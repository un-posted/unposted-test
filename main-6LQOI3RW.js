var WN=Object.defineProperty,GN=Object.defineProperties;var KN=Object.getOwnPropertyDescriptors;var eS=Object.getOwnPropertySymbols,YN=Object.getPrototypeOf,QN=Object.prototype.hasOwnProperty,ZN=Object.prototype.propertyIsEnumerable,XN=Reflect.get;var tS=(n,e,t)=>e in n?WN(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,H=(n,e)=>{for(var t in e||={})QN.call(e,t)&&tS(n,t,e[t]);if(eS)for(var t of eS(e))ZN.call(e,t)&&tS(n,t,e[t]);return n},ne=(n,e)=>GN(n,KN(e));var eo=(n,e,t)=>XN(YN(n),t,e);var b=(n,e,t)=>new Promise((r,i)=>{var o=l=>{try{a(t.next(l))}catch(u){i(u)}},s=l=>{try{a(t.throw(l))}catch(u){i(u)}},a=l=>l.done?r(l.value):Promise.resolve(l.value).then(o,s);a((t=t.apply(n,e)).next())});var _v;function nf(){return _v}function Fr(n){let e=_v;return _v=n,e}var nS=Symbol("NotFound");function _a(n){return n===nS||n?.name==="\u0275NotFound"}function cf(n,e){return Object.is(n,e)}var Xt=null,rf=!1,yv=1,JN=null,Jt=Symbol("SIGNAL");function Ee(n){let e=Xt;return Xt=n,e}function lf(){return Xt}var Xo={version:0,lastCleanEpoch:0,dirty:!1,producers:void 0,producersTail:void 0,consumers:void 0,consumersTail:void 0,recomputing:!1,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,kind:"unknown",producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{}};function ya(n){if(rf)throw new Error("");if(Xt===null)return;Xt.consumerOnSignalRead(n);let e=Xt.producersTail;if(e!==void 0&&e.producer===n)return;let t,r=Xt.recomputing;if(r&&(t=e!==void 0?e.nextProducer:Xt.producers,t!==void 0&&t.producer===n)){Xt.producersTail=t,t.lastReadVersion=n.version;return}let i=n.consumersTail;if(i!==void 0&&i.consumer===Xt&&(!r||tF(i,Xt)))return;let o=wa(Xt),s={producer:n,consumer:Xt,nextProducer:t,prevConsumer:i,lastReadVersion:n.version,nextConsumer:void 0};Xt.producersTail=s,e!==void 0?e.nextProducer=s:Xt.producers=s,o&&iS(n,s)}function rS(){yv++}function uf(n){if(!(wa(n)&&!n.dirty)&&!(!n.dirty&&n.lastCleanEpoch===yv)){if(!n.producerMustRecompute(n)&&!Cl(n)){af(n);return}n.producerRecomputeValue(n),af(n)}}function bv(n){if(n.consumers===void 0)return;let e=rf;rf=!0;try{for(let t=n.consumers;t!==void 0;t=t.nextConsumer){let r=t.consumer;r.dirty||eF(r)}}finally{rf=e}}function wv(){return Xt?.consumerAllowSignalWrites!==!1}function eF(n){n.dirty=!0,bv(n),n.consumerMarkedDirty?.(n)}function af(n){n.dirty=!1,n.lastCleanEpoch=yv}function Jo(n){return n&&(n.producersTail=void 0,n.recomputing=!0),Ee(n)}function ba(n,e){if(Ee(e),!n)return;n.recomputing=!1;let t=n.producersTail,r=t!==void 0?t.nextProducer:n.producers;if(r!==void 0){if(wa(n))do r=Ev(r);while(r!==void 0);t!==void 0?t.nextProducer=void 0:n.producers=void 0}}function Cl(n){for(let e=n.producers;e!==void 0;e=e.nextProducer){let t=e.producer,r=e.lastReadVersion;if(r!==t.version||(uf(t),r!==t.version))return!0}return!1}function Il(n){if(wa(n)){let e=n.producers;for(;e!==void 0;)e=Ev(e)}n.producers=void 0,n.producersTail=void 0,n.consumers=void 0,n.consumersTail=void 0}function iS(n,e){let t=n.consumersTail,r=wa(n);if(t!==void 0?(e.nextConsumer=t.nextConsumer,t.nextConsumer=e):(e.nextConsumer=void 0,n.consumers=e),e.prevConsumer=t,n.consumersTail=e,!r)for(let i=n.producers;i!==void 0;i=i.nextProducer)iS(i.producer,i)}function Ev(n){let e=n.producer,t=n.nextProducer,r=n.nextConsumer,i=n.prevConsumer;if(n.nextConsumer=void 0,n.prevConsumer=void 0,r!==void 0?r.prevConsumer=i:e.consumersTail=i,i!==void 0)i.nextConsumer=r;else if(e.consumers=r,!wa(e)){let o=e.producers;for(;o!==void 0;)o=Ev(o)}return t}function wa(n){return n.consumerIsAlwaysLive||n.consumers!==void 0}function df(n){JN?.(n)}function tF(n,e){let t=e.producersTail;if(t!==void 0){let r=e.producers;do{if(r===n)return!0;if(r===t)break;r=r.nextProducer}while(r!==void 0)}return!1}function ff(n,e){let t=Object.create(nF);t.computation=n,e!==void 0&&(t.equal=e);let r=()=>{if(uf(t),ya(t),t.value===El)throw t.error;return t.value};return r[Jt]=t,df(t),r}var of=Symbol("UNSET"),sf=Symbol("COMPUTING"),El=Symbol("ERRORED"),nF=ne(H({},Xo),{value:of,dirty:!0,error:null,equal:cf,kind:"computed",producerMustRecompute(n){return n.value===of||n.value===sf},producerRecomputeValue(n){if(n.value===sf)throw new Error("");let e=n.value;n.value=sf;let t=Jo(n),r,i=!1;try{r=n.computation(),Ee(null),i=e!==of&&e!==El&&r!==El&&n.equal(e,r)}catch(o){r=El,n.error=o}finally{ba(n,t)}if(i){n.value=e;return}n.value=r,n.version++}});function rF(){throw new Error}var oS=rF;function sS(n){oS(n)}function Cv(n){oS=n}var iF=null;function Iv(n,e){let t=Object.create(hf);t.value=n,e!==void 0&&(t.equal=e);let r=()=>aS(t);return r[Jt]=t,df(t),[r,s=>Ea(t,s),s=>Sv(t,s)]}function aS(n){return ya(n),n.value}function Ea(n,e){wv()||sS(n),n.equal(n.value,e)||(n.value=e,oF(n))}function Sv(n,e){wv()||sS(n),Ea(n,e(n.value))}var hf=ne(H({},Xo),{equal:cf,value:void 0,kind:"signal"});function oF(n){n.version++,rS(),bv(n),iF?.(n)}function ve(n){return typeof n=="function"}function Ca(n){let t=n(r=>{Error.call(r),r.stack=new Error().stack});return t.prototype=Object.create(Error.prototype),t.prototype.constructor=t,t}var pf=Ca(n=>function(t){n(this),this.message=t?`${t.length} errors occurred during unsubscription:
${t.map((r,i)=>`${i+1}) ${r.toString()}`).join(`
  `)}`:"",this.name="UnsubscriptionError",this.errors=t});function es(n,e){if(n){let t=n.indexOf(e);0<=t&&n.splice(t,1)}}var lt=class n{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;let{_parentage:t}=this;if(t)if(this._parentage=null,Array.isArray(t))for(let o of t)o.remove(this);else t.remove(this);let{initialTeardown:r}=this;if(ve(r))try{r()}catch(o){e=o instanceof pf?o.errors:[o]}let{_finalizers:i}=this;if(i){this._finalizers=null;for(let o of i)try{cS(o)}catch(s){e=e??[],s instanceof pf?e=[...e,...s.errors]:e.push(s)}}if(e)throw new pf(e)}}add(e){var t;if(e&&e!==this)if(this.closed)cS(e);else{if(e instanceof n){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=(t=this._finalizers)!==null&&t!==void 0?t:[]).push(e)}}_hasParent(e){let{_parentage:t}=this;return t===e||Array.isArray(t)&&t.includes(e)}_addParent(e){let{_parentage:t}=this;this._parentage=Array.isArray(t)?(t.push(e),t):t?[t,e]:e}_removeParent(e){let{_parentage:t}=this;t===e?this._parentage=null:Array.isArray(t)&&es(t,e)}remove(e){let{_finalizers:t}=this;t&&es(t,e),e instanceof n&&e._removeParent(this)}};lt.EMPTY=(()=>{let n=new lt;return n.closed=!0,n})();var Tv=lt.EMPTY;function gf(n){return n instanceof lt||n&&"closed"in n&&ve(n.remove)&&ve(n.add)&&ve(n.unsubscribe)}function cS(n){ve(n)?n():n.unsubscribe()}var fr={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1};var Ia={setTimeout(n,e,...t){let{delegate:r}=Ia;return r?.setTimeout?r.setTimeout(n,e,...t):setTimeout(n,e,...t)},clearTimeout(n){let{delegate:e}=Ia;return(e?.clearTimeout||clearTimeout)(n)},delegate:void 0};function mf(n){Ia.setTimeout(()=>{let{onUnhandledError:e}=fr;if(e)e(n);else throw n})}function Sl(){}var lS=Dv("C",void 0,void 0);function uS(n){return Dv("E",void 0,n)}function dS(n){return Dv("N",n,void 0)}function Dv(n,e,t){return{kind:n,value:e,error:t}}var ts=null;function Sa(n){if(fr.useDeprecatedSynchronousErrorHandling){let e=!ts;if(e&&(ts={errorThrown:!1,error:null}),n(),e){let{errorThrown:t,error:r}=ts;if(ts=null,t)throw r}}else n()}function fS(n){fr.useDeprecatedSynchronousErrorHandling&&ts&&(ts.errorThrown=!0,ts.error=n)}var ns=class extends lt{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,gf(e)&&e.add(this)):this.destination=cF}static create(e,t,r){return new Ta(e,t,r)}next(e){this.isStopped?Mv(dS(e),this):this._next(e)}error(e){this.isStopped?Mv(uS(e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?Mv(lS,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}},sF=Function.prototype.bind;function xv(n,e){return sF.call(n,e)}var Pv=class{constructor(e){this.partialObserver=e}next(e){let{partialObserver:t}=this;if(t.next)try{t.next(e)}catch(r){vf(r)}}error(e){let{partialObserver:t}=this;if(t.error)try{t.error(e)}catch(r){vf(r)}else vf(e)}complete(){let{partialObserver:e}=this;if(e.complete)try{e.complete()}catch(t){vf(t)}}},Ta=class extends ns{constructor(e,t,r){super();let i;if(ve(e)||!e)i={next:e??void 0,error:t??void 0,complete:r??void 0};else{let o;this&&fr.useDeprecatedNextContext?(o=Object.create(e),o.unsubscribe=()=>this.unsubscribe(),i={next:e.next&&xv(e.next,o),error:e.error&&xv(e.error,o),complete:e.complete&&xv(e.complete,o)}):i=e}this.destination=new Pv(i)}};function vf(n){fr.useDeprecatedSynchronousErrorHandling?fS(n):mf(n)}function aF(n){throw n}function Mv(n,e){let{onStoppedNotification:t}=fr;t&&Ia.setTimeout(()=>t(n,e))}var cF={closed:!0,next:Sl,error:aF,complete:Sl};var Da=typeof Symbol=="function"&&Symbol.observable||"@@observable";function un(n){return n}function Av(...n){return kv(n)}function kv(n){return n.length===0?un:n.length===1?n[0]:function(t){return n.reduce((r,i)=>i(r),t)}}var ge=(()=>{class n{constructor(t){t&&(this._subscribe=t)}lift(t){let r=new n;return r.source=this,r.operator=t,r}subscribe(t,r,i){let o=uF(t)?t:new Ta(t,r,i);return Sa(()=>{let{operator:s,source:a}=this;o.add(s?s.call(o,a):a?this._subscribe(o):this._trySubscribe(o))}),o}_trySubscribe(t){try{return this._subscribe(t)}catch(r){t.error(r)}}forEach(t,r){return r=hS(r),new r((i,o)=>{let s=new Ta({next:a=>{try{t(a)}catch(l){o(l),s.unsubscribe()}},error:o,complete:i});this.subscribe(s)})}_subscribe(t){var r;return(r=this.source)===null||r===void 0?void 0:r.subscribe(t)}[Da](){return this}pipe(...t){return kv(t)(this)}toPromise(t){return t=hS(t),new t((r,i)=>{let o;this.subscribe(s=>o=s,s=>i(s),()=>r(o))})}}return n.create=e=>new n(e),n})();function hS(n){var e;return(e=n??fr.Promise)!==null&&e!==void 0?e:Promise}function lF(n){return n&&ve(n.next)&&ve(n.error)&&ve(n.complete)}function uF(n){return n&&n instanceof ns||lF(n)&&gf(n)}function Ov(n){return ve(n?.lift)}function Ie(n){return e=>{if(Ov(e))return e.lift(function(t){try{return n(t,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function ye(n,e,t,r,i){return new Tl(n,e,t,r,i)}var Tl=class extends ns{constructor(e,t,r,i,o,s){super(e),this.onFinalize=o,this.shouldUnsubscribe=s,this._next=t?function(a){try{t(a)}catch(l){e.error(l)}}:super._next,this._error=i?function(a){try{i(a)}catch(l){e.error(l)}finally{this.unsubscribe()}}:super._error,this._complete=r?function(){try{r()}catch(a){e.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){let{closed:t}=this;super.unsubscribe(),!t&&((e=this.onFinalize)===null||e===void 0||e.call(this))}}};function xa(){return Ie((n,e)=>{let t=null;n._refCount++;let r=ye(e,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount){t=null;return}let i=n._connection,o=t;t=null,i&&(!o||i===o)&&i.unsubscribe(),e.unsubscribe()});n.subscribe(r),r.closed||(t=n.connect())})}var Ma=class extends ge{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._subject=null,this._refCount=0,this._connection=null,Ov(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){let e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;let{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new lt;let t=this.getSubject();e.add(this.source.subscribe(ye(t,void 0,()=>{this._teardown(),t.complete()},r=>{this._teardown(),t.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=lt.EMPTY)}return e}refCount(){return xa()(this)}};var pS=Ca(n=>function(){n(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var We=(()=>{class n extends ge{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(t){let r=new _f(this,this);return r.operator=t,r}_throwIfClosed(){if(this.closed)throw new pS}next(t){Sa(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(let r of this.currentObservers)r.next(t)}})}error(t){Sa(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=t;let{observers:r}=this;for(;r.length;)r.shift().error(t)}})}complete(){Sa(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;let{observers:t}=this;for(;t.length;)t.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var t;return((t=this.observers)===null||t===void 0?void 0:t.length)>0}_trySubscribe(t){return this._throwIfClosed(),super._trySubscribe(t)}_subscribe(t){return this._throwIfClosed(),this._checkFinalizedStatuses(t),this._innerSubscribe(t)}_innerSubscribe(t){let{hasError:r,isStopped:i,observers:o}=this;return r||i?Tv:(this.currentObservers=null,o.push(t),new lt(()=>{this.currentObservers=null,es(o,t)}))}_checkFinalizedStatuses(t){let{hasError:r,thrownError:i,isStopped:o}=this;r?t.error(i):o&&t.complete()}asObservable(){let t=new ge;return t.source=this,t}}return n.create=(e,t)=>new _f(e,t),n})(),_f=class extends We{constructor(e,t){super(),this.destination=e,this.source=t}next(e){var t,r;(r=(t=this.destination)===null||t===void 0?void 0:t.next)===null||r===void 0||r.call(t,e)}error(e){var t,r;(r=(t=this.destination)===null||t===void 0?void 0:t.error)===null||r===void 0||r.call(t,e)}complete(){var e,t;(t=(e=this.destination)===null||e===void 0?void 0:e.complete)===null||t===void 0||t.call(e)}_subscribe(e){var t,r;return(r=(t=this.source)===null||t===void 0?void 0:t.subscribe(e))!==null&&r!==void 0?r:Tv}};var _t=class extends We{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){let t=super._subscribe(e);return!t.closed&&e.next(this._value),t}getValue(){let{hasError:e,thrownError:t,_value:r}=this;if(e)throw t;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}};var Rv={now(){return(Rv.delegate||Date).now()},delegate:void 0};var yf=class extends lt{constructor(e,t){super()}schedule(e,t=0){return this}};var Dl={setInterval(n,e,...t){let{delegate:r}=Dl;return r?.setInterval?r.setInterval(n,e,...t):setInterval(n,e,...t)},clearInterval(n){let{delegate:e}=Dl;return(e?.clearInterval||clearInterval)(n)},delegate:void 0};var Pa=class extends yf{constructor(e,t){super(e,t),this.scheduler=e,this.work=t,this.pending=!1}schedule(e,t=0){var r;if(this.closed)return this;this.state=e;let i=this.id,o=this.scheduler;return i!=null&&(this.id=this.recycleAsyncId(o,i,t)),this.pending=!0,this.delay=t,this.id=(r=this.id)!==null&&r!==void 0?r:this.requestAsyncId(o,this.id,t),this}requestAsyncId(e,t,r=0){return Dl.setInterval(e.flush.bind(e,this),r)}recycleAsyncId(e,t,r=0){if(r!=null&&this.delay===r&&this.pending===!1)return t;t!=null&&Dl.clearInterval(t)}execute(e,t){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;let r=this._execute(e,t);if(r)return r;this.pending===!1&&this.id!=null&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(e,t){let r=!1,i;try{this.work(e)}catch(o){r=!0,i=o||new Error("Scheduled action threw falsy error")}if(r)return this.unsubscribe(),i}unsubscribe(){if(!this.closed){let{id:e,scheduler:t}=this,{actions:r}=t;this.work=this.state=this.scheduler=null,this.pending=!1,es(r,this),e!=null&&(this.id=this.recycleAsyncId(t,e,null)),this.delay=null,super.unsubscribe()}}};var Aa=class n{constructor(e,t=n.now){this.schedulerActionCtor=e,this.now=t}schedule(e,t=0,r){return new this.schedulerActionCtor(this,e).schedule(r,t)}};Aa.now=Rv.now;var ka=class extends Aa{constructor(e,t=Aa.now){super(e,t),this.actions=[],this._active=!1}flush(e){let{actions:t}=this;if(this._active){t.push(e);return}let r;this._active=!0;do if(r=e.execute(e.state,e.delay))break;while(e=t.shift());if(this._active=!1,r){for(;e=t.shift();)e.unsubscribe();throw r}}};var Nv=new ka(Pa);var bf=class extends Pa{constructor(e,t){super(e,t),this.scheduler=e,this.work=t}schedule(e,t=0){return t>0?super.schedule(e,t):(this.delay=t,this.state=e,this.scheduler.flush(this),this)}execute(e,t){return t>0||this.closed?super.execute(e,t):this._execute(e,t)}requestAsyncId(e,t,r=0){return r!=null&&r>0||r==null&&this.delay>0?super.requestAsyncId(e,t,r):(e.flush(this),0)}};var wf=class extends ka{};var Fv=new wf(bf);var en=new ge(n=>n.complete());function gS(n){return n&&ve(n.schedule)}function mS(n){return n[n.length-1]}function Ef(n){return ve(mS(n))?n.pop():void 0}function to(n){return gS(mS(n))?n.pop():void 0}function Cf(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(n);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(n,r[i])&&(t[r[i]]=n[r[i]]);return t}function _S(n,e,t,r){function i(o){return o instanceof t?o:new t(function(s){s(o)})}return new(t||(t=Promise))(function(o,s){function a(f){try{u(r.next(f))}catch(m){s(m)}}function l(f){try{u(r.throw(f))}catch(m){s(m)}}function u(f){f.done?o(f.value):i(f.value).then(a,l)}u((r=r.apply(n,e||[])).next())})}function vS(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function rs(n){return this instanceof rs?(this.v=n,this):new rs(n)}function yS(n,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=t.apply(n,e||[]),i,o=[];return i=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),a("next"),a("throw"),a("return",s),i[Symbol.asyncIterator]=function(){return this},i;function s(E){return function(x){return Promise.resolve(x).then(E,m)}}function a(E,x){r[E]&&(i[E]=function(F){return new Promise(function(L,W){o.push([E,F,L,W])>1||l(E,F)})},x&&(i[E]=x(i[E])))}function l(E,x){try{u(r[E](x))}catch(F){_(o[0][3],F)}}function u(E){E.value instanceof rs?Promise.resolve(E.value.v).then(f,m):_(o[0][2],E)}function f(E){l("next",E)}function m(E){l("throw",E)}function _(E,x){E(x),o.shift(),o.length&&l(o[0][0],o[0][1])}}function bS(n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=n[Symbol.asyncIterator],t;return e?e.call(n):(n=typeof vS=="function"?vS(n):n[Symbol.iterator](),t={},r("next"),r("throw"),r("return"),t[Symbol.asyncIterator]=function(){return this},t);function r(o){t[o]=n[o]&&function(s){return new Promise(function(a,l){s=n[o](s),i(a,l,s.done,s.value)})}}function i(o,s,a,l){Promise.resolve(l).then(function(u){o({value:u,done:a})},s)}}var If=n=>n&&typeof n.length=="number"&&typeof n!="function";function Sf(n){return ve(n?.then)}function Tf(n){return ve(n[Da])}function Df(n){return Symbol.asyncIterator&&ve(n?.[Symbol.asyncIterator])}function xf(n){return new TypeError(`You provided ${n!==null&&typeof n=="object"?"an invalid object":`'${n}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}function dF(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var Mf=dF();function Pf(n){return ve(n?.[Mf])}function Af(n){return yS(this,arguments,function*(){let t=n.getReader();try{for(;;){let{value:r,done:i}=yield rs(t.read());if(i)return yield rs(void 0);yield yield rs(r)}}finally{t.releaseLock()}})}function kf(n){return ve(n?.getReader)}function ut(n){if(n instanceof ge)return n;if(n!=null){if(Tf(n))return fF(n);if(If(n))return hF(n);if(Sf(n))return pF(n);if(Df(n))return wS(n);if(Pf(n))return gF(n);if(kf(n))return mF(n)}throw xf(n)}function fF(n){return new ge(e=>{let t=n[Da]();if(ve(t.subscribe))return t.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function hF(n){return new ge(e=>{for(let t=0;t<n.length&&!e.closed;t++)e.next(n[t]);e.complete()})}function pF(n){return new ge(e=>{n.then(t=>{e.closed||(e.next(t),e.complete())},t=>e.error(t)).then(null,mf)})}function gF(n){return new ge(e=>{for(let t of n)if(e.next(t),e.closed)return;e.complete()})}function wS(n){return new ge(e=>{vF(n,e).catch(t=>e.error(t))})}function mF(n){return wS(Af(n))}function vF(n,e){var t,r,i,o;return _S(this,void 0,void 0,function*(){try{for(t=bS(n);r=yield t.next(),!r.done;){let s=r.value;if(e.next(s),e.closed)return}}catch(s){i={error:s}}finally{try{r&&!r.done&&(o=t.return)&&(yield o.call(t))}finally{if(i)throw i.error}}e.complete()})}function bn(n,e,t,r=0,i=!1){let o=e.schedule(function(){t(),i?n.add(this.schedule(null,r)):this.unsubscribe()},r);if(n.add(o),!i)return o}function no(n,e=0){return Ie((t,r)=>{t.subscribe(ye(r,i=>bn(r,n,()=>r.next(i),e),()=>bn(r,n,()=>r.complete(),e),i=>bn(r,n,()=>r.error(i),e)))})}function ro(n,e=0){return Ie((t,r)=>{r.add(n.schedule(()=>t.subscribe(r),e))})}function ES(n,e){return ut(n).pipe(ro(e),no(e))}function CS(n,e){return ut(n).pipe(ro(e),no(e))}function IS(n,e){return new ge(t=>{let r=0;return e.schedule(function(){r===n.length?t.complete():(t.next(n[r++]),t.closed||this.schedule())})})}function SS(n,e){return new ge(t=>{let r;return bn(t,e,()=>{r=n[Mf](),bn(t,e,()=>{let i,o;try{({value:i,done:o}=r.next())}catch(s){t.error(s);return}o?t.complete():t.next(i)},0,!0)}),()=>ve(r?.return)&&r.return()})}function Of(n,e){if(!n)throw new Error("Iterable cannot be null");return new ge(t=>{bn(t,e,()=>{let r=n[Symbol.asyncIterator]();bn(t,e,()=>{r.next().then(i=>{i.done?t.complete():t.next(i.value)})},0,!0)})})}function TS(n,e){return Of(Af(n),e)}function DS(n,e){if(n!=null){if(Tf(n))return ES(n,e);if(If(n))return IS(n,e);if(Sf(n))return CS(n,e);if(Df(n))return Of(n,e);if(Pf(n))return SS(n,e);if(kf(n))return TS(n,e)}throw xf(n)}function Ge(n,e){return e?DS(n,e):ut(n)}function se(...n){let e=to(n);return Ge(n,e)}function Oa(n,e){let t=ve(n)?n:()=>n,r=i=>i.error(t());return new ge(e?i=>e.schedule(r,0,i):r)}function Lv(n){return!!n&&(n instanceof ge||ve(n.lift)&&ve(n.subscribe))}var vi=Ca(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});function Ce(n,e){return Ie((t,r)=>{let i=0;t.subscribe(ye(r,o=>{r.next(n.call(e,o,i++))}))})}var{isArray:_F}=Array;function yF(n,e){return _F(e)?n(...e):n(e)}function Rf(n){return Ce(e=>yF(n,e))}var{isArray:bF}=Array,{getPrototypeOf:wF,prototype:EF,keys:CF}=Object;function Nf(n){if(n.length===1){let e=n[0];if(bF(e))return{args:e,keys:null};if(IF(e)){let t=CF(e);return{args:t.map(r=>e[r]),keys:t}}}return{args:n,keys:null}}function IF(n){return n&&typeof n=="object"&&wF(n)===EF}function Ff(n,e){return n.reduce((t,r,i)=>(t[r]=e[i],t),{})}function xl(...n){let e=to(n),t=Ef(n),{args:r,keys:i}=Nf(n);if(r.length===0)return Ge([],e);let o=new ge(SF(r,e,i?s=>Ff(i,s):un));return t?o.pipe(Rf(t)):o}function SF(n,e,t=un){return r=>{xS(e,()=>{let{length:i}=n,o=new Array(i),s=i,a=i;for(let l=0;l<i;l++)xS(e,()=>{let u=Ge(n[l],e),f=!1;u.subscribe(ye(r,m=>{o[l]=m,f||(f=!0,a--),a||r.next(t(o.slice()))},()=>{--s||r.complete()}))},r)},r)}}function xS(n,e,t){n?bn(t,n,e):e()}function MS(n,e,t,r,i,o,s,a){let l=[],u=0,f=0,m=!1,_=()=>{m&&!l.length&&!u&&e.complete()},E=F=>u<r?x(F):l.push(F),x=F=>{o&&e.next(F),u++;let L=!1;ut(t(F,f++)).subscribe(ye(e,W=>{i?.(W),o?E(W):e.next(W)},()=>{L=!0},void 0,()=>{if(L)try{for(u--;l.length&&u<r;){let W=l.shift();s?bn(e,s,()=>x(W)):x(W)}_()}catch(W){e.error(W)}}))};return n.subscribe(ye(e,E,()=>{m=!0,_()})),()=>{a?.()}}function ot(n,e,t=1/0){return ve(e)?ot((r,i)=>Ce((o,s)=>e(r,o,i,s))(ut(n(r,i))),t):(typeof e=="number"&&(t=e),Ie((r,i)=>MS(r,i,n,t)))}function io(n=1/0){return ot(un,n)}function PS(){return io(1)}function Ra(...n){return PS()(Ge(n,to(n)))}function Ml(n){return new ge(e=>{ut(n()).subscribe(e)})}function Vv(...n){let e=Ef(n),{args:t,keys:r}=Nf(n),i=new ge(o=>{let{length:s}=t;if(!s){o.complete();return}let a=new Array(s),l=s,u=s;for(let f=0;f<s;f++){let m=!1;ut(t[f]).subscribe(ye(o,_=>{m||(m=!0,u--),a[f]=_},()=>l--,void 0,()=>{(!l||!m)&&(u||o.next(r?Ff(r,a):a),o.complete())}))}});return e?i.pipe(Rf(e)):i}function Mt(n,e){return Ie((t,r)=>{let i=0;t.subscribe(ye(r,o=>n.call(e,o,i++)&&r.next(o)))})}function _i(n){return Ie((e,t)=>{let r=null,i=!1,o;r=e.subscribe(ye(t,void 0,void 0,s=>{o=ut(n(s,_i(n)(e))),r?(r.unsubscribe(),r=null,o.subscribe(t)):i=!0})),i&&(r.unsubscribe(),r=null,o.subscribe(t))})}function AS(n,e,t,r,i){return(o,s)=>{let a=t,l=e,u=0;o.subscribe(ye(s,f=>{let m=u++;l=a?n(l,f,m):(a=!0,f),r&&s.next(l)},i&&(()=>{a&&s.next(l),s.complete()})))}}function yi(n,e){return ve(e)?ot(n,e,1):ot(n,1)}function oo(n){return Ie((e,t)=>{let r=!1;e.subscribe(ye(t,i=>{r=!0,t.next(i)},()=>{r||t.next(n),t.complete()}))})}function hr(n){return n<=0?()=>en:Ie((e,t)=>{let r=0;e.subscribe(ye(t,i=>{++r<=n&&(t.next(i),n<=r&&t.complete())}))})}function Uv(n,e=un){return n=n??TF,Ie((t,r)=>{let i,o=!0;t.subscribe(ye(r,s=>{let a=e(s);(o||!n(i,a))&&(o=!1,i=a,r.next(s))}))})}function TF(n,e){return n===e}function Lf(n=DF){return Ie((e,t)=>{let r=!1;e.subscribe(ye(t,i=>{r=!0,t.next(i)},()=>r?t.complete():t.error(n())))})}function DF(){return new vi}function Pl(n){return Ie((e,t)=>{try{e.subscribe(t)}finally{t.add(n)}})}function bi(n,e){let t=arguments.length>=2;return r=>r.pipe(n?Mt((i,o)=>n(i,o,r)):un,hr(1),t?oo(e):Lf(()=>new vi))}function jv(n,e,t,r){return Ie((i,o)=>{let s;!e||typeof e=="function"?s=e:{duration:t,element:s,connector:r}=e;let a=new Map,l=x=>{a.forEach(x),x(o)},u=x=>l(F=>F.error(x)),f=0,m=!1,_=new Tl(o,x=>{try{let F=n(x),L=a.get(F);if(!L){a.set(F,L=r?r():new We);let W=E(F,L);if(o.next(W),t){let oe=ye(L,()=>{L.complete(),oe?.unsubscribe()},void 0,void 0,()=>a.delete(F));_.add(ut(t(W)).subscribe(oe))}}L.next(s?s(x):x)}catch(F){u(F)}},()=>l(x=>x.complete()),u,()=>a.clear(),()=>(m=!0,f===0));i.subscribe(_);function E(x,F){let L=new ge(W=>{f++;let oe=F.subscribe(W);return()=>{oe.unsubscribe(),--f===0&&m&&_.unsubscribe()}});return L.key=x,L}})}function Na(n){return n<=0?()=>en:Ie((e,t)=>{let r=[];e.subscribe(ye(t,i=>{r.push(i),n<r.length&&r.shift()},()=>{for(let i of r)t.next(i);t.complete()},void 0,()=>{r=null}))})}function Bv(n,e){let t=arguments.length>=2;return r=>r.pipe(n?Mt((i,o)=>n(i,o,r)):un,Na(1),t?oo(e):Lf(()=>new vi))}function $v(){return Ie((n,e)=>{let t,r=!1;n.subscribe(ye(e,i=>{let o=t;t=i,r&&e.next([o,i]),r=!0}))})}function Hv(n,e){return Ie(AS(n,e,arguments.length>=2,!0))}function Al(...n){let e=to(n);return Ie((t,r)=>{(e?Ra(n,t,e):Ra(n,t)).subscribe(r)})}function yt(n,e){return Ie((t,r)=>{let i=null,o=0,s=!1,a=()=>s&&!i&&r.complete();t.subscribe(ye(r,l=>{i?.unsubscribe();let u=0,f=o++;ut(n(l,f)).subscribe(i=ye(r,m=>r.next(e?e(l,m,f,u++):m),()=>{i=null,a()}))},()=>{s=!0,a()}))})}function wi(n){return Ie((e,t)=>{ut(n).subscribe(ye(t,()=>t.complete(),Sl)),!t.closed&&e.subscribe(t)})}function Nt(n,e,t){let r=ve(n)||e||t?{next:n,error:e,complete:t}:n;return r?Ie((i,o)=>{var s;(s=r.subscribe)===null||s===void 0||s.call(r);let a=!0;i.subscribe(ye(o,l=>{var u;(u=r.next)===null||u===void 0||u.call(r,l),o.next(l)},()=>{var l;a=!1,(l=r.complete)===null||l===void 0||l.call(r),o.complete()},l=>{var u;a=!1,(u=r.error)===null||u===void 0||u.call(r,l),o.error(l)},()=>{var l,u;a&&((l=r.unsubscribe)===null||l===void 0||l.call(r)),(u=r.finalize)===null||u===void 0||u.call(r)}))}):un}function kS(n){let e=Ee(null);try{return n()}finally{Ee(e)}}var $f="https://angular.dev/best-practices/security#preventing-cross-site-scripting-xss",Z=class extends Error{code;constructor(e,t){super(cs(e,t)),this.code=e}};function xF(n){return`NG0${Math.abs(n)}`}function cs(n,e){return`${xF(n)}${e?": "+e:""}`}var gr=globalThis;function Ue(n){for(let e in n)if(n[e]===Ue)return e;throw Error("")}function NS(n,e){for(let t in e)e.hasOwnProperty(t)&&!n.hasOwnProperty(t)&&(n[t]=e[t])}function Ci(n){if(typeof n=="string")return n;if(Array.isArray(n))return`[${n.map(Ci).join(", ")}]`;if(n==null)return""+n;let e=n.overriddenName||n.name;if(e)return`${e}`;let t=n.toString();if(t==null)return""+t;let r=t.indexOf(`
`);return r>=0?t.slice(0,r):t}function n0(n,e){return n?e?`${n} ${e}`:n:e||""}var MF=Ue({__forward_ref__:Ue});function qn(n){return n.__forward_ref__=qn,n.toString=function(){return Ci(this())},n}function zt(n){return r0(n)?n():n}function r0(n){return typeof n=="function"&&n.hasOwnProperty(MF)&&n.__forward_ref__===qn}function FS(n,e){n==null&&i0(e,n,null,"!=")}function i0(n,e,t,r){throw new Error(`ASSERTION ERROR: ${n}`+(r==null?"":` [Expected=> ${t} ${r} ${e} <=Actual]`))}function Q(n){return{token:n.token,providedIn:n.providedIn||null,factory:n.factory,value:void 0}}function Wn(n){return{providers:n.providers||[],imports:n.imports||[]}}function Fl(n){return PF(n,Hf)}function o0(n){return Fl(n)!==null}function PF(n,e){return n.hasOwnProperty(e)&&n[e]||null}function AF(n){let e=n?.[Hf]??null;return e||null}function qv(n){return n&&n.hasOwnProperty(Uf)?n[Uf]:null}var Hf=Ue({\u0275prov:Ue}),Uf=Ue({\u0275inj:Ue}),X=class{_desc;ngMetadataName="InjectionToken";\u0275prov;constructor(e,t){this._desc=e,this.\u0275prov=void 0,typeof t=="number"?this.__NG_ELEMENT_ID__=t:t!==void 0&&(this.\u0275prov=Q({token:this,providedIn:t.providedIn||"root",factory:t.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}};function s0(n){return n&&!!n.\u0275providers}var a0=Ue({\u0275cmp:Ue}),c0=Ue({\u0275dir:Ue}),l0=Ue({\u0275pipe:Ue}),u0=Ue({\u0275mod:Ue}),Rl=Ue({\u0275fac:Ue}),ls=Ue({__NG_ELEMENT_ID__:Ue}),OS=Ue({__NG_ENV_ID__:Ue});function co(n){return typeof n=="string"?n:n==null?"":String(n)}function jf(n){return typeof n=="function"?n.name||n.toString():typeof n=="object"&&n!=null&&typeof n.type=="function"?n.type.name||n.type.toString():co(n)}var d0=Ue({ngErrorCode:Ue}),LS=Ue({ngErrorMessage:Ue}),Ol=Ue({ngTokenPath:Ue});function f0(n,e){return VS("",-200,e)}function zf(n,e){throw new Z(-201,!1)}function kF(n,e){n[Ol]??=[];let t=n[Ol],r;typeof e=="object"&&"multi"in e&&e?.multi===!0?(FS(e.provide,"Token with multi: true should have a provide property"),r=jf(e.provide)):r=jf(e),t[0]!==r&&n[Ol].unshift(r)}function OF(n,e){let t=n[Ol],r=n[d0],i=n[LS]||n.message;return n.message=NF(i,r,t,e),n}function VS(n,e,t){let r=new Z(e,n);return r[d0]=e,r[LS]=n,t&&(r[Ol]=t),r}function RF(n){return n[d0]}function NF(n,e,t=[],r=null){let i="";t&&t.length>1&&(i=` Path: ${t.join(" -> ")}.`);let o=r?` Source: ${r}.`:"";return cs(e,`${n}${o}${i}`)}var Wv;function US(){return Wv}function dn(n){let e=Wv;return Wv=n,e}function h0(n,e,t){let r=Fl(n);if(r&&r.providedIn=="root")return r.value===void 0?r.value=r.factory():r.value;if(t&8)return null;if(e!==void 0)return e;zf(n,"Injector")}var FF={},is=FF,Gv="__NG_DI_FLAG__",Kv=class{injector;constructor(e){this.injector=e}retrieve(e,t){let r=os(t)||0;try{return this.injector.get(e,r&8?null:is,r)}catch(i){if(_a(i))return i;throw i}}};function LF(n,e=0){let t=nf();if(t===void 0)throw new Z(-203,!1);if(t===null)return h0(n,void 0,e);{let r=VF(e),i=t.retrieve(n,r);if(_a(i)){if(r.optional)return null;throw i}return i}}function re(n,e=0){return(US()||LF)(zt(n),e)}function k(n,e){return re(n,os(e))}function os(n){return typeof n>"u"||typeof n=="number"?n:0|(n.optional&&8)|(n.host&&1)|(n.self&&2)|(n.skipSelf&&4)}function VF(n){return{optional:!!(n&8),host:!!(n&1),self:!!(n&2),skipSelf:!!(n&4)}}function Yv(n){let e=[];for(let t=0;t<n.length;t++){let r=zt(n[t]);if(Array.isArray(r)){if(r.length===0)throw new Z(900,!1);let i,o=0;for(let s=0;s<r.length;s++){let a=r[s],l=UF(a);typeof l=="number"?l===-1?i=a.token:o|=l:i=a}e.push(re(i,o))}else e.push(re(r))}return e}function p0(n,e){return n[Gv]=e,n.prototype[Gv]=e,n}function UF(n){return n[Gv]}function so(n,e){let t=n.hasOwnProperty(Rl);return t?n[Rl]:null}function jS(n,e,t){if(n.length!==e.length)return!1;for(let r=0;r<n.length;r++){let i=n[r],o=e[r];if(t&&(i=t(i),o=t(o)),o!==i)return!1}return!0}function BS(n){return n.flat(Number.POSITIVE_INFINITY)}function qf(n,e){n.forEach(t=>Array.isArray(t)?qf(t,e):e(t))}function g0(n,e,t){e>=n.length?n.push(t):n.splice(e,0,t)}function Ll(n,e){return e>=n.length-1?n.pop():n.splice(e,1)[0]}function $S(n,e,t,r){let i=n.length;if(i==e)n.push(t,r);else if(i===1)n.push(r,n[0]),n[0]=t;else{for(i--,n.push(n[i-1],n[i]);i>e;){let o=i-2;n[i]=n[o],i--}n[e]=t,n[e+1]=r}}function HS(n,e,t){let r=La(n,e);return r>=0?n[r|1]=t:(r=~r,$S(n,r,e,t)),r}function Wf(n,e){let t=La(n,e);if(t>=0)return n[t|1]}function La(n,e){return jF(n,e,1)}function jF(n,e,t){let r=0,i=n.length>>t;for(;i!==r;){let o=r+(i-r>>1),s=n[o<<t];if(e===s)return o<<t;s>e?i=o:r=o+1}return~(i<<t)}var lo={},Mn=[],Si=new X(""),m0=new X("",-1),v0=new X(""),Nl=class{get(e,t=is){if(t===is){let i=VS("",-201);throw i.name="\u0275NotFound",i}return t}};function _0(n){return n[u0]||null}function Ti(n){return n[a0]||null}function y0(n){return n[c0]||null}function zS(n){return n[l0]||null}function tn(n){return{\u0275providers:n}}function qS(n){return tn([{provide:Si,multi:!0,useValue:n}])}function WS(...n){return{\u0275providers:b0(!0,n),\u0275fromNgModule:!0}}function b0(n,...e){let t=[],r=new Set,i,o=s=>{t.push(s)};return qf(e,s=>{let a=s;Bf(a,o,[],r)&&(i||=[],i.push(a))}),i!==void 0&&GS(i,o),t}function GS(n,e){for(let t=0;t<n.length;t++){let{ngModule:r,providers:i}=n[t];w0(i,o=>{e(o,r)})}}function Bf(n,e,t,r){if(n=zt(n),!n)return!1;let i=null,o=qv(n),s=!o&&Ti(n);if(!o&&!s){let l=n.ngModule;if(o=qv(l),o)i=l;else return!1}else{if(s&&!s.standalone)return!1;i=n}let a=r.has(i);if(s){if(a)return!1;if(r.add(i),s.dependencies){let l=typeof s.dependencies=="function"?s.dependencies():s.dependencies;for(let u of l)Bf(u,e,t,r)}}else if(o){if(o.imports!=null&&!a){r.add(i);let u;try{qf(o.imports,f=>{Bf(f,e,t,r)&&(u||=[],u.push(f))})}finally{}u!==void 0&&GS(u,e)}if(!a){let u=so(i)||(()=>new i);e({provide:i,useFactory:u,deps:Mn},i),e({provide:v0,useValue:i,multi:!0},i),e({provide:Si,useValue:()=>re(i),multi:!0},i)}let l=o.providers;if(l!=null&&!a){let u=n;w0(l,f=>{e(f,u)})}}else return!1;return i!==n&&n.providers!==void 0}function w0(n,e){for(let t of n)s0(t)&&(t=t.\u0275providers),Array.isArray(t)?w0(t,e):e(t)}var BF=Ue({provide:String,useValue:Ue});function KS(n){return n!==null&&typeof n=="object"&&BF in n}function $F(n){return!!(n&&n.useExisting)}function HF(n){return!!(n&&n.useFactory)}function ss(n){return typeof n=="function"}function YS(n){return!!n.useClass}var Vl=new X(""),Vf={},RS={},zv;function Ul(){return zv===void 0&&(zv=new Nl),zv}var ht=class{},as=class extends ht{parent;source;scopes;records=new Map;_ngOnDestroyHooks=new Set;_onDestroyHooks=[];get destroyed(){return this._destroyed}_destroyed=!1;injectorDefTypes;constructor(e,t,r,i){super(),this.parent=t,this.source=r,this.scopes=i,Zv(e,s=>this.processProvider(s)),this.records.set(m0,Fa(void 0,this)),i.has("environment")&&this.records.set(ht,Fa(void 0,this));let o=this.records.get(Vl);o!=null&&typeof o.value=="string"&&this.scopes.add(o.value),this.injectorDefTypes=new Set(this.get(v0,Mn,{self:!0}))}retrieve(e,t){let r=os(t)||0;try{return this.get(e,is,r)}catch(i){if(_a(i))return i;throw i}}destroy(){kl(this),this._destroyed=!0;let e=Ee(null);try{for(let r of this._ngOnDestroyHooks)r.ngOnDestroy();let t=this._onDestroyHooks;this._onDestroyHooks=[];for(let r of t)r()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),Ee(e)}}onDestroy(e){return kl(this),this._onDestroyHooks.push(e),()=>this.removeOnDestroy(e)}runInContext(e){kl(this);let t=Fr(this),r=dn(void 0),i;try{return e()}finally{Fr(t),dn(r)}}get(e,t=is,r){if(kl(this),e.hasOwnProperty(OS))return e[OS](this);let i=os(r),o,s=Fr(this),a=dn(void 0);try{if(!(i&4)){let u=this.records.get(e);if(u===void 0){let f=KF(e)&&Fl(e);f&&this.injectableDefInScope(f)?u=Fa(Qv(e),Vf):u=null,this.records.set(e,u)}if(u!=null)return this.hydrate(e,u,i)}let l=i&2?Ul():this.parent;return t=i&8&&t===is?null:t,l.get(e,t)}catch(l){let u=RF(l);throw u===-200||u===-201?new Z(u,null):l}finally{dn(a),Fr(s)}}resolveInjectorInitializers(){let e=Ee(null),t=Fr(this),r=dn(void 0),i;try{let o=this.get(Si,Mn,{self:!0});for(let s of o)s()}finally{Fr(t),dn(r),Ee(e)}}toString(){let e=[],t=this.records;for(let r of t.keys())e.push(Ci(r));return`R3Injector[${e.join(", ")}]`}processProvider(e){e=zt(e);let t=ss(e)?e:zt(e&&e.provide),r=qF(e);if(!ss(e)&&e.multi===!0){let i=this.records.get(t);i||(i=Fa(void 0,Vf,!0),i.factory=()=>Yv(i.multi),this.records.set(t,i)),t=e,i.multi.push(e)}this.records.set(t,r)}hydrate(e,t,r){let i=Ee(null);try{if(t.value===RS)throw f0(Ci(e));return t.value===Vf&&(t.value=RS,t.value=t.factory(void 0,r)),typeof t.value=="object"&&t.value&&GF(t.value)&&this._ngOnDestroyHooks.add(t.value),t.value}finally{Ee(i)}}injectableDefInScope(e){if(!e.providedIn)return!1;let t=zt(e.providedIn);return typeof t=="string"?t==="any"||this.scopes.has(t):this.injectorDefTypes.has(t)}removeOnDestroy(e){let t=this._onDestroyHooks.indexOf(e);t!==-1&&this._onDestroyHooks.splice(t,1)}};function Qv(n){let e=Fl(n),t=e!==null?e.factory:so(n);if(t!==null)return t;if(n instanceof X)throw new Z(204,!1);if(n instanceof Function)return zF(n);throw new Z(204,!1)}function zF(n){if(n.length>0)throw new Z(204,!1);let t=AF(n);return t!==null?()=>t.factory(n):()=>new n}function qF(n){if(KS(n))return Fa(void 0,n.useValue);{let e=E0(n);return Fa(e,Vf)}}function E0(n,e,t){let r;if(ss(n)){let i=zt(n);return so(i)||Qv(i)}else if(KS(n))r=()=>zt(n.useValue);else if(HF(n))r=()=>n.useFactory(...Yv(n.deps||[]));else if($F(n))r=(i,o)=>re(zt(n.useExisting),o!==void 0&&o&8?8:void 0);else{let i=zt(n&&(n.useClass||n.provide));if(WF(n))r=()=>new i(...Yv(n.deps));else return so(i)||Qv(i)}return r}function kl(n){if(n.destroyed)throw new Z(205,!1)}function Fa(n,e,t=!1){return{factory:n,value:e,multi:t?[]:void 0}}function WF(n){return!!n.deps}function GF(n){return n!==null&&typeof n=="object"&&typeof n.ngOnDestroy=="function"}function KF(n){return typeof n=="function"||typeof n=="object"&&n.ngMetadataName==="InjectionToken"}function Zv(n,e){for(let t of n)Array.isArray(t)?Zv(t,e):t&&s0(t)?Zv(t.\u0275providers,e):e(t)}function bt(n,e){let t;n instanceof as?(kl(n),t=n):t=new Kv(n);let r,i=Fr(t),o=dn(void 0);try{return e()}finally{Fr(i),dn(o)}}function QS(){return US()!==void 0||nf()!=null}var mr=0,ue=1,pe=2,Ft=3,Gn=4,Kn=5,jl=6,Va=7,nn=8,us=9,Lr=10,Ze=11,Ua=12,C0=13,ds=14,Yn=15,uo=16,fs=17,Vr=18,Bl=19,I0=20,Ei=21,Gf=22,$l=23,Pn=24,hs=25,Lt=26,ZS=1;var fo=7,Hl=8,ps=9,fn=10;function Ur(n){return Array.isArray(n)&&typeof n[ZS]=="object"}function vr(n){return Array.isArray(n)&&n[ZS]===!0}function S0(n){return(n.flags&4)!==0}function ho(n){return n.componentOffset>-1}function ja(n){return(n.flags&1)===1}function jr(n){return!!n.template}function Ba(n){return(n[pe]&512)!==0}function gs(n){return(n[pe]&256)===256}var T0="svg",XS="math";function Qn(n){for(;Array.isArray(n);)n=n[mr];return n}function D0(n,e){return Qn(e[n])}function _r(n,e){return Qn(e[n.index])}function Kf(n,e){return n.data[e]}function x0(n,e){return n[e]}function M0(n,e,t,r){t>=n.data.length&&(n.data[t]=null,n.blueprint[t]=null),e[t]=r}function Zn(n,e){let t=e[n];return Ur(t)?t:t[mr]}function JS(n){return(n[pe]&4)===4}function Yf(n){return(n[pe]&128)===128}function eT(n){return vr(n[Ft])}function ms(n,e){return e==null?null:n[e]}function P0(n){n[fs]=0}function A0(n){n[pe]&1024||(n[pe]|=1024,Yf(n)&&$a(n))}function tT(n,e){for(;n>0;)e=e[ds],n--;return e}function zl(n){return!!(n[pe]&9216||n[Pn]?.dirty)}function Qf(n){n[Lr].changeDetectionScheduler?.notify(8),n[pe]&64&&(n[pe]|=1024),zl(n)&&$a(n)}function $a(n){n[Lr].changeDetectionScheduler?.notify(0);let e=ao(n);for(;e!==null&&!(e[pe]&8192||(e[pe]|=8192,!Yf(e)));)e=ao(e)}function k0(n,e){if(gs(n))throw new Z(911,!1);n[Ei]===null&&(n[Ei]=[]),n[Ei].push(e)}function nT(n,e){if(n[Ei]===null)return;let t=n[Ei].indexOf(e);t!==-1&&n[Ei].splice(t,1)}function ao(n){let e=n[Ft];return vr(e)?e[Ft]:e}function O0(n){return n[Va]??=[]}function R0(n){return n.cleanup??=[]}function rT(n,e,t,r){let i=O0(e);i.push(t),n.firstCreatePass&&R0(n).push(r,i.length-1)}var be={lFrame:vT(null),bindingsEnabled:!0,skipHydrationRootTNode:null},ql=(function(n){return n[n.Off=0]="Off",n[n.Exhaustive=1]="Exhaustive",n[n.OnlyDirtyViews=2]="OnlyDirtyViews",n})(ql||{}),YF=0,Xv=!1;function iT(){return be.lFrame.elementDepthCount}function oT(){be.lFrame.elementDepthCount++}function N0(){be.lFrame.elementDepthCount--}function Zf(){return be.bindingsEnabled}function sT(){return be.skipHydrationRootTNode!==null}function F0(n){return be.skipHydrationRootTNode===n}function L0(){be.skipHydrationRootTNode=null}function Se(){return be.lFrame.lView}function wt(){return be.lFrame.tView}function V(n){return be.lFrame.contextLView=n,n[nn]}function U(n){return be.lFrame.contextLView=null,n}function Et(){let n=V0();for(;n!==null&&n.type===64;)n=n.parent;return n}function V0(){return be.lFrame.currentTNode}function aT(){let n=be.lFrame,e=n.currentTNode;return n.isParent?e:e.parent}function Ha(n,e){let t=be.lFrame;t.currentTNode=n,t.isParent=e}function U0(){return be.lFrame.isParent}function cT(){be.lFrame.isParent=!1}function lT(){return be.lFrame.contextLView}function j0(n){i0("Must never be called in production mode"),YF=n}function B0(){return Xv}function $0(n){let e=Xv;return Xv=n,e}function Xf(){let n=be.lFrame,e=n.bindingRootIndex;return e===-1&&(e=n.bindingRootIndex=n.tView.bindingStartIndex),e}function uT(){return be.lFrame.bindingIndex}function dT(n){return be.lFrame.bindingIndex=n}function za(){return be.lFrame.bindingIndex++}function H0(n){let e=be.lFrame,t=e.bindingIndex;return e.bindingIndex=e.bindingIndex+n,t}function fT(){return be.lFrame.inI18n}function hT(n,e){let t=be.lFrame;t.bindingIndex=t.bindingRootIndex=n,Jf(e)}function pT(){return be.lFrame.currentDirectiveIndex}function Jf(n){be.lFrame.currentDirectiveIndex=n}function gT(n){let e=be.lFrame.currentDirectiveIndex;return e===-1?null:n[e]}function z0(){return be.lFrame.currentQueryIndex}function eh(n){be.lFrame.currentQueryIndex=n}function QF(n){let e=n[ue];return e.type===2?e.declTNode:e.type===1?n[Kn]:null}function q0(n,e,t){if(t&4){let i=e,o=n;for(;i=i.parent,i===null&&!(t&1);)if(i=QF(o),i===null||(o=o[ds],i.type&10))break;if(i===null)return!1;e=i,n=o}let r=be.lFrame=mT();return r.currentTNode=e,r.lView=n,!0}function th(n){let e=mT(),t=n[ue];be.lFrame=e,e.currentTNode=t.firstChild,e.lView=n,e.tView=t,e.contextLView=n,e.bindingIndex=t.bindingStartIndex,e.inI18n=!1}function mT(){let n=be.lFrame,e=n===null?null:n.child;return e===null?vT(n):e}function vT(n){let e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:n,child:null,inI18n:!1};return n!==null&&(n.child=e),e}function _T(){let n=be.lFrame;return be.lFrame=n.parent,n.currentTNode=null,n.lView=null,n}var W0=_T;function nh(){let n=_T();n.isParent=!0,n.tView=null,n.selectedIndex=-1,n.contextLView=null,n.elementDepthCount=0,n.currentDirectiveIndex=-1,n.currentNamespace=null,n.bindingRootIndex=-1,n.bindingIndex=-1,n.currentQueryIndex=0}function yT(n){return(be.lFrame.contextLView=tT(n,be.lFrame.contextLView))[nn]}function po(){return be.lFrame.selectedIndex}function go(n){be.lFrame.selectedIndex=n}function Wl(){let n=be.lFrame;return Kf(n.tView,n.selectedIndex)}function ce(){be.lFrame.currentNamespace=T0}function Pe(){ZF()}function ZF(){be.lFrame.currentNamespace=null}function bT(){return be.lFrame.currentNamespace}var wT=!0;function rh(){return wT}function Gl(n){wT=n}var XF={elements:void 0};function ih(){return XF}function Jv(n,e=null,t=null,r){let i=G0(n,e,t,r);return i.resolveInjectorInitializers(),i}function G0(n,e=null,t=null,r,i=new Set){let o=[t||Mn,WS(n)];return r=r||(typeof n=="object"?void 0:Ci(n)),new as(o,e||Ul(),r||null,i)}var Ke=class n{static THROW_IF_NOT_FOUND=is;static NULL=new Nl;static create(e,t){if(Array.isArray(e))return Jv({name:""},t,e,"");{let r=e.name??"";return Jv({name:r},e.parent,e.providers,r)}}static \u0275prov=Q({token:n,providedIn:"any",factory:()=>re(m0)});static __NG_ELEMENT_ID__=-1},pt=new X(""),yr=(()=>{class n{static __NG_ELEMENT_ID__=JF;static __NG_ENV_ID__=t=>t}return n})(),e0=class extends yr{_lView;constructor(e){super(),this._lView=e}get destroyed(){return gs(this._lView)}onDestroy(e){let t=this._lView;return k0(t,e),()=>nT(t,e)}};function JF(){return new e0(Se())}var pr=class{_console=console;handleError(e){this._console.error("ERROR",e)}},hn=new X("",{providedIn:"root",factory:()=>{let n=k(ht),e;return t=>{n.destroyed&&!e?setTimeout(()=>{throw t}):(e??=n.get(pr),e.handleError(t))}}}),ET={provide:Si,useValue:()=>void k(pr),multi:!0},eL=new X("",{providedIn:"root",factory:()=>{let n=k(pt).defaultView;if(!n)return;let e=k(hn),t=o=>{e(o.reason),o.preventDefault()},r=o=>{o.error?e(o.error):e(new Error(o.message,{cause:o})),o.preventDefault()},i=()=>{n.addEventListener("unhandledrejection",t),n.addEventListener("error",r)};typeof Zone<"u"?Zone.root.run(i):i(),k(yr).onDestroy(()=>{n.removeEventListener("error",r),n.removeEventListener("unhandledrejection",t)})}});function K0(){return tn([qS(()=>void k(eL))])}function Y0(n){return typeof n=="function"&&n[Jt]!==void 0}function wn(n,e){let[t,r,i]=Iv(n,e?.equal),o=t,s=o[Jt];return o.set=r,o.update=i,o.asReadonly=CT.bind(o),o}function CT(){let n=this[Jt];if(n.readonlyFn===void 0){let e=()=>this();e[Jt]=n,n.readonlyFn=e}return n.readonlyFn}function Q0(n){return Y0(n)&&typeof n.set=="function"}var Ii=class{},Kl=new X("",{providedIn:"root",factory:()=>!1});var Z0=new X(""),X0=new X("");var oh=(()=>{class n{view;node;constructor(t,r){this.view=t,this.node=r}static __NG_ELEMENT_ID__=tL}return n})();function tL(){return new oh(Se(),Et())}var Br=(()=>{class n{taskId=0;pendingTasks=new Set;destroyed=!1;pendingTask=new _t(!1);get hasPendingTasks(){return this.destroyed?!1:this.pendingTask.value}get hasPendingTasksObservable(){return this.destroyed?new ge(t=>{t.next(!1),t.complete()}):this.pendingTask}add(){!this.hasPendingTasks&&!this.destroyed&&this.pendingTask.next(!0);let t=this.taskId++;return this.pendingTasks.add(t),t}has(t){return this.pendingTasks.has(t)}remove(t){this.pendingTasks.delete(t),this.pendingTasks.size===0&&this.hasPendingTasks&&this.pendingTask.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this.hasPendingTasks&&this.pendingTask.next(!1),this.destroyed=!0,this.pendingTask.unsubscribe()}static \u0275prov=Q({token:n,providedIn:"root",factory:()=>new n})}return n})(),qa=(()=>{class n{internalPendingTasks=k(Br);scheduler=k(Ii);errorHandler=k(hn);add(){let t=this.internalPendingTasks.add();return()=>{this.internalPendingTasks.has(t)&&(this.scheduler.notify(11),this.internalPendingTasks.remove(t))}}run(t){let r=this.add();t().catch(this.errorHandler).finally(r)}static \u0275prov=Q({token:n,providedIn:"root",factory:()=>new n})}return n})();function Yl(...n){}var J0=(()=>{class n{static \u0275prov=Q({token:n,providedIn:"root",factory:()=>new t0})}return n})(),t0=class{dirtyEffectCount=0;queues=new Map;add(e){this.enqueue(e),this.schedule(e)}schedule(e){e.dirty&&this.dirtyEffectCount++}remove(e){let t=e.zone,r=this.queues.get(t);r.has(e)&&(r.delete(e),e.dirty&&this.dirtyEffectCount--)}enqueue(e){let t=e.zone;this.queues.has(t)||this.queues.set(t,new Set);let r=this.queues.get(t);r.has(e)||r.add(e)}flush(){for(;this.dirtyEffectCount>0;){let e=!1;for(let[t,r]of this.queues)t===null?e||=this.flushQueue(r):e||=t.run(()=>this.flushQueue(r));e||(this.dirtyEffectCount=0)}}flushQueue(e){let t=!1;for(let r of e)r.dirty&&(this.dirtyEffectCount--,t=!0,r.run());return t}};function Za(n){return{toString:n}.toString()}var sh="__parameters__";function aL(n){return function(...t){if(n){let r=n(...t);for(let i in r)this[i]=r[i]}}}function oD(n,e,t){return Za(()=>{let r=aL(e);function i(...o){if(this instanceof i)return r.apply(this,o),this;let s=new i(...o);return a.annotation=s,a;function a(l,u,f){let m=l.hasOwnProperty(sh)?l[sh]:Object.defineProperty(l,sh,{value:[]})[sh];for(;m.length<=f;)m.push(null);return(m[f]=m[f]||[]).push(s),l}}return i.prototype.ngMetadataName=n,i.annotationCls=i,i})}var qt=p0(oD("Optional"),8);var sD=p0(oD("SkipSelf"),4);function cL(n){return typeof n=="function"}var mh=class{previousValue;currentValue;firstChange;constructor(e,t,r){this.previousValue=e,this.currentValue=t,this.firstChange=r}isFirstChange(){return this.firstChange}};function aD(n,e,t,r){e!==null?e.applyValueToInputSignal(e,r):n[t]=r}var zr=(()=>{let n=()=>cD;return n.ngInherit=!0,n})();function cD(n){return n.type.prototype.ngOnChanges&&(n.setInput=uL),lL}function lL(){let n=uD(this),e=n?.current;if(e){let t=n.previous;if(t===lo)n.previous=e;else for(let r in e)t[r]=e[r];n.current=null,this.ngOnChanges(e)}}function uL(n,e,t,r,i){let o=this.declaredInputs[r],s=uD(n)||dL(n,{previous:lo,current:null}),a=s.current||(s.current={}),l=s.previous,u=l[o];a[o]=new mh(u&&u.currentValue,t,l===lo),aD(n,e,i,t)}var lD="__ngSimpleChanges__";function uD(n){return n[lD]||null}function dL(n,e){return n[lD]=e}var IT=[];var He=function(n,e=null,t){for(let r=0;r<IT.length;r++){let i=IT[r];i(n,e,t)}};function fL(n,e,t){let{ngOnChanges:r,ngOnInit:i,ngDoCheck:o}=e.type.prototype;if(r){let s=cD(e);(t.preOrderHooks??=[]).push(n,s),(t.preOrderCheckHooks??=[]).push(n,s)}i&&(t.preOrderHooks??=[]).push(0-n,i),o&&((t.preOrderHooks??=[]).push(n,o),(t.preOrderCheckHooks??=[]).push(n,o))}function dD(n,e){for(let t=e.directiveStart,r=e.directiveEnd;t<r;t++){let o=n.data[t].type.prototype,{ngAfterContentInit:s,ngAfterContentChecked:a,ngAfterViewInit:l,ngAfterViewChecked:u,ngOnDestroy:f}=o;s&&(n.contentHooks??=[]).push(-t,s),a&&((n.contentHooks??=[]).push(t,a),(n.contentCheckHooks??=[]).push(t,a)),l&&(n.viewHooks??=[]).push(-t,l),u&&((n.viewHooks??=[]).push(t,u),(n.viewCheckHooks??=[]).push(t,u)),f!=null&&(n.destroyHooks??=[]).push(t,f)}}function dh(n,e,t){fD(n,e,3,t)}function fh(n,e,t,r){(n[pe]&3)===t&&fD(n,e,t,r)}function e_(n,e){let t=n[pe];(t&3)===e&&(t&=16383,t+=1,n[pe]=t)}function fD(n,e,t,r){let i=r!==void 0?n[fs]&65535:0,o=r??-1,s=e.length-1,a=0;for(let l=i;l<s;l++)if(typeof e[l+1]=="number"){if(a=e[l],r!=null&&a>=r)break}else e[l]<0&&(n[fs]+=65536),(a<o||o==-1)&&(hL(n,t,e,l),n[fs]=(n[fs]&4294901760)+l+2),l++}function ST(n,e){He(4,n,e);let t=Ee(null);try{e.call(n)}finally{Ee(t),He(5,n,e)}}function hL(n,e,t,r){let i=t[r]<0,o=t[r+1],s=i?-t[r]:t[r],a=n[s];i?n[pe]>>14<n[fs]>>16&&(n[pe]&3)===e&&(n[pe]+=16384,ST(a,o)):ST(a,o)}var Ga=-1,ys=class{factory;name;injectImpl;resolving=!1;canSeeViewProviders;multi;componentProviders;index;providerFactory;constructor(e,t,r,i){this.factory=e,this.name=i,this.canSeeViewProviders=t,this.injectImpl=r}};function pL(n){return(n.flags&8)!==0}function gL(n){return(n.flags&16)!==0}function mL(n,e,t){let r=0;for(;r<t.length;){let i=t[r];if(typeof i=="number"){if(i!==0)break;r++;let o=t[r++],s=t[r++],a=t[r++];n.setAttribute(e,s,a,o)}else{let o=i,s=t[++r];vL(o)?n.setProperty(e,o,s):n.setAttribute(e,o,s),r++}}return r}function hD(n){return n===3||n===4||n===6}function vL(n){return n.charCodeAt(0)===64}function Ka(n,e){if(!(e===null||e.length===0))if(n===null||n.length===0)n=e.slice();else{let t=-1;for(let r=0;r<e.length;r++){let i=e[r];typeof i=="number"?t=i:t===0||(t===-1||t===2?TT(n,t,i,null,e[++r]):TT(n,t,i,null,null))}}return n}function TT(n,e,t,r,i){let o=0,s=n.length;if(e===-1)s=-1;else for(;o<n.length;){let a=n[o++];if(typeof a=="number"){if(a===e){s=-1;break}else if(a>e){s=o-1;break}}}for(;o<n.length;){let a=n[o];if(typeof a=="number")break;if(a===t){i!==null&&(n[o+1]=i);return}o++,i!==null&&o++}s!==-1&&(n.splice(s,0,e),o=s+1),n.splice(o++,0,t),i!==null&&n.splice(o++,0,i)}function pD(n){return n!==Ga}function vh(n){return n&32767}function _L(n){return n>>16}function _h(n,e){let t=_L(n),r=e;for(;t>0;)r=r[ds],t--;return r}var u_=!0;function yh(n){let e=u_;return u_=n,e}var yL=256,gD=yL-1,mD=5,bL=0,$r={};function wL(n,e,t){let r;typeof t=="string"?r=t.charCodeAt(0)||0:t.hasOwnProperty(ls)&&(r=t[ls]),r==null&&(r=t[ls]=bL++);let i=r&gD,o=1<<i;e.data[n+(i>>mD)]|=o}function bh(n,e){let t=vD(n,e);if(t!==-1)return t;let r=e[ue];r.firstCreatePass&&(n.injectorIndex=e.length,t_(r.data,n),t_(e,null),t_(r.blueprint,null));let i=L_(n,e),o=n.injectorIndex;if(pD(i)){let s=vh(i),a=_h(i,e),l=a[ue].data;for(let u=0;u<8;u++)e[o+u]=a[s+u]|l[s+u]}return e[o+8]=i,o}function t_(n,e){n.push(0,0,0,0,0,0,0,0,e)}function vD(n,e){return n.injectorIndex===-1||n.parent&&n.parent.injectorIndex===n.injectorIndex||e[n.injectorIndex+8]===null?-1:n.injectorIndex}function L_(n,e){if(n.parent&&n.parent.injectorIndex!==-1)return n.parent.injectorIndex;let t=0,r=null,i=e;for(;i!==null;){if(r=ED(i),r===null)return Ga;if(t++,i=i[ds],r.injectorIndex!==-1)return r.injectorIndex|t<<16}return Ga}function d_(n,e,t){wL(n,e,t)}function EL(n,e){if(e==="class")return n.classes;if(e==="style")return n.styles;let t=n.attrs;if(t){let r=t.length,i=0;for(;i<r;){let o=t[i];if(hD(o))break;if(o===0)i=i+2;else if(typeof o=="number")for(i++;i<r&&typeof t[i]=="string";)i++;else{if(o===e)return t[i+1];i=i+2}}}return null}function _D(n,e,t){if(t&8||n!==void 0)return n;zf(e,"NodeInjector")}function yD(n,e,t,r){if(t&8&&r===void 0&&(r=null),(t&3)===0){let i=n[us],o=dn(void 0);try{return i?i.get(e,r,t&8):h0(e,r,t&8)}finally{dn(o)}}return _D(r,e,t)}function bD(n,e,t,r=0,i){if(n!==null){if(e[pe]&2048&&!(r&2)){let s=TL(n,e,t,r,$r);if(s!==$r)return s}let o=wD(n,e,t,r,$r);if(o!==$r)return o}return yD(e,t,r,i)}function wD(n,e,t,r,i){let o=IL(t);if(typeof o=="function"){if(!q0(e,n,r))return r&1?_D(i,t,r):yD(e,t,r,i);try{let s;if(s=o(r),s==null&&!(r&8))zf(t);else return s}finally{W0()}}else if(typeof o=="number"){let s=null,a=vD(n,e),l=Ga,u=r&1?e[Yn][Kn]:null;for((a===-1||r&4)&&(l=a===-1?L_(n,e):e[a+8],l===Ga||!xT(r,!1)?a=-1:(s=e[ue],a=vh(l),e=_h(l,e)));a!==-1;){let f=e[ue];if(DT(o,a,f.data)){let m=CL(a,e,t,s,r,u);if(m!==$r)return m}l=e[a+8],l!==Ga&&xT(r,e[ue].data[a+8]===u)&&DT(o,a,e)?(s=f,a=vh(l),e=_h(l,e)):a=-1}}return i}function CL(n,e,t,r,i,o){let s=e[ue],a=s.data[n+8],l=r==null?ho(a)&&u_:r!=s&&(a.type&3)!==0,u=i&1&&o===a,f=hh(a,s,t,l,u);return f!==null?Xl(e,s,f,a,i):$r}function hh(n,e,t,r,i){let o=n.providerIndexes,s=e.data,a=o&1048575,l=n.directiveStart,u=n.directiveEnd,f=o>>20,m=r?a:a+f,_=i?a+f:u;for(let E=m;E<_;E++){let x=s[E];if(E<l&&t===x||E>=l&&x.type===t)return E}if(i){let E=s[l];if(E&&jr(E)&&E.type===t)return l}return null}function Xl(n,e,t,r,i){let o=n[t],s=e.data;if(o instanceof ys){let a=o;if(a.resolving){let E=jf(s[t]);throw f0(E)}let l=yh(a.canSeeViewProviders);a.resolving=!0;let u=s[t].type||s[t],f,m=a.injectImpl?dn(a.injectImpl):null,_=q0(n,r,0);try{o=n[t]=a.factory(void 0,i,s,n,r),e.firstCreatePass&&t>=r.directiveStart&&fL(t,s[t],e)}finally{m!==null&&dn(m),yh(l),a.resolving=!1,W0()}}return o}function IL(n){if(typeof n=="string")return n.charCodeAt(0)||0;let e=n.hasOwnProperty(ls)?n[ls]:void 0;return typeof e=="number"?e>=0?e&gD:SL:e}function DT(n,e,t){let r=1<<n;return!!(t[e+(n>>mD)]&r)}function xT(n,e){return!(n&2)&&!(n&1&&e)}var _s=class{_tNode;_lView;constructor(e,t){this._tNode=e,this._lView=t}get(e,t,r){return bD(this._tNode,this._lView,e,os(r),t)}};function SL(){return new _s(Et(),Se())}function qr(n){return Za(()=>{let e=n.prototype.constructor,t=e[Rl]||f_(e),r=Object.prototype,i=Object.getPrototypeOf(n.prototype).constructor;for(;i&&i!==r;){let o=i[Rl]||f_(i);if(o&&o!==t)return o;i=Object.getPrototypeOf(i)}return o=>new o})}function f_(n){return r0(n)?()=>{let e=f_(zt(n));return e&&e()}:so(n)}function TL(n,e,t,r,i){let o=n,s=e;for(;o!==null&&s!==null&&s[pe]&2048&&!Ba(s);){let a=wD(o,s,t,r|2,$r);if(a!==$r)return a;let l=o.parent;if(!l){let u=s[I0];if(u){let f=u.get(t,$r,r);if(f!==$r)return f}l=ED(s),s=s[ds]}o=l}return i}function ED(n){let e=n[ue],t=e.type;return t===2?e.declTNode:t===1?n[Kn]:null}function nu(n){return EL(Et(),n)}function DL(){return Xa(Et(),Se())}function Xa(n,e){return new rn(_r(n,e))}var rn=(()=>{class n{nativeElement;constructor(t){this.nativeElement=t}static __NG_ELEMENT_ID__=DL}return n})();function xL(n){return n instanceof rn?n.nativeElement:n}function ML(){return this._results[Symbol.iterator]()}var wh=class{_emitDistinctChangesOnly;dirty=!0;_onDirty=void 0;_results=[];_changesDetected=!1;_changes=void 0;length=0;first=void 0;last=void 0;get changes(){return this._changes??=new We}constructor(e=!1){this._emitDistinctChangesOnly=e}get(e){return this._results[e]}map(e){return this._results.map(e)}filter(e){return this._results.filter(e)}find(e){return this._results.find(e)}reduce(e,t){return this._results.reduce(e,t)}forEach(e){this._results.forEach(e)}some(e){return this._results.some(e)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(e,t){this.dirty=!1;let r=BS(e);(this._changesDetected=!jS(this._results,r,t))&&(this._results=r,this.length=r.length,this.last=r[this.length-1],this.first=r[0])}notifyOnChanges(){this._changes!==void 0&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.next(this)}onDirty(e){this._onDirty=e}setDirty(){this.dirty=!0,this._onDirty?.()}destroy(){this._changes!==void 0&&(this._changes.complete(),this._changes.unsubscribe())}[Symbol.iterator]=ML};function CD(n){return(n.flags&128)===128}var V_=(function(n){return n[n.OnPush=0]="OnPush",n[n.Default=1]="Default",n})(V_||{}),ID=new Map,PL=0;function AL(){return PL++}function kL(n){ID.set(n[Bl],n)}function h_(n){ID.delete(n[Bl])}var MT="__ngContext__";function Ya(n,e){Ur(e)?(n[MT]=e[Bl],kL(e)):n[MT]=e}function SD(n){return DD(n[Ua])}function TD(n){return DD(n[Gn])}function DD(n){for(;n!==null&&!vr(n);)n=n[Gn];return n}var p_;function U_(n){p_=n}function j_(){if(p_!==void 0)return p_;if(typeof document<"u")return document;throw new Z(210,!1)}var Nh=new X("",{providedIn:"root",factory:()=>OL}),OL="ng",Fh=new X(""),wr=new X("",{providedIn:"platform",factory:()=>"unknown"});var Lh=new X("",{providedIn:"root",factory:()=>j_().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});var RL="h",NL="b";var xD=!1,MD=new X("",{providedIn:"root",factory:()=>xD});var B_=new X("");var FL=(n,e,t,r)=>{};function LL(n,e,t,r){FL(n,e,t,r)}function $_(n){return(n.flags&32)===32}var VL=()=>null;function PD(n,e,t=!1){return VL(n,e,t)}function AD(n,e){let t=n.contentQueries;if(t!==null){let r=Ee(null);try{for(let i=0;i<t.length;i+=2){let o=t[i],s=t[i+1];if(s!==-1){let a=n.data[s];eh(o),a.contentQueries(2,e[s],s)}}}finally{Ee(r)}}}function g_(n,e,t){eh(0);let r=Ee(null);try{e(n,t)}finally{Ee(r)}}function H_(n,e,t){if(S0(e)){let r=Ee(null);try{let i=e.directiveStart,o=e.directiveEnd;for(let s=i;s<o;s++){let a=n.data[s];if(a.contentQueries){let l=t[s];a.contentQueries(1,l,s)}}}finally{Ee(r)}}}var Di=(function(n){return n[n.Emulated=0]="Emulated",n[n.None=2]="None",n[n.ShadowDom=3]="ShadowDom",n})(Di||{}),ah;function UL(){if(ah===void 0&&(ah=null,gr.trustedTypes))try{ah=gr.trustedTypes.createPolicy("angular",{createHTML:n=>n,createScript:n=>n,createScriptURL:n=>n})}catch{}return ah}function Vh(n){return UL()?.createHTML(n)||n}var ch;function kD(){if(ch===void 0&&(ch=null,gr.trustedTypes))try{ch=gr.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:n=>n,createScript:n=>n,createScriptURL:n=>n})}catch{}return ch}function PT(n){return kD()?.createHTML(n)||n}function AT(n){return kD()?.createScriptURL(n)||n}var Eh=class{changingThisBreaksApplicationSecurity;constructor(e){this.changingThisBreaksApplicationSecurity=e}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${$f})`}};function Ja(n){return n instanceof Eh?n.changingThisBreaksApplicationSecurity:n}function Uh(n,e){let t=OD(n);if(t!=null&&t!==e){if(t==="ResourceURL"&&e==="URL")return!0;throw new Error(`Required a safe ${e}, got a ${t} (see ${$f})`)}return t===e}function OD(n){return n instanceof Eh&&n.getTypeName()||null}function jL(n){let e=new v_(n);return BL()?new m_(e):e}var m_=class{inertDocumentHelper;constructor(e){this.inertDocumentHelper=e}getInertBodyElement(e){e="<body><remove></remove>"+e;try{let t=new window.DOMParser().parseFromString(Vh(e),"text/html").body;return t===null?this.inertDocumentHelper.getInertBodyElement(e):(t.firstChild?.remove(),t)}catch{return null}}},v_=class{defaultDoc;inertDocument;constructor(e){this.defaultDoc=e,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert")}getInertBodyElement(e){let t=this.inertDocument.createElement("template");return t.innerHTML=Vh(e),t}};function BL(){try{return!!new window.DOMParser().parseFromString(Vh(""),"text/html")}catch{return!1}}var $L=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;function z_(n){return n=String(n),n.match($L)?n:"unsafe:"+n}function Mi(n){let e={};for(let t of n.split(","))e[t]=!0;return e}function ru(...n){let e={};for(let t of n)for(let r in t)t.hasOwnProperty(r)&&(e[r]=!0);return e}var RD=Mi("area,br,col,hr,img,wbr"),ND=Mi("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),FD=Mi("rp,rt"),HL=ru(FD,ND),zL=ru(ND,Mi("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),qL=ru(FD,Mi("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),kT=ru(RD,zL,qL,HL),LD=Mi("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),WL=Mi("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,srcset,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),GL=Mi("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext"),KL=ru(LD,WL,GL),YL=Mi("script,style,template"),__=class{sanitizedSomething=!1;buf=[];sanitizeChildren(e){let t=e.firstChild,r=!0,i=[];for(;t;){if(t.nodeType===Node.ELEMENT_NODE?r=this.startElement(t):t.nodeType===Node.TEXT_NODE?this.chars(t.nodeValue):this.sanitizedSomething=!0,r&&t.firstChild){i.push(t),t=XL(t);continue}for(;t;){t.nodeType===Node.ELEMENT_NODE&&this.endElement(t);let o=ZL(t);if(o){t=o;break}t=i.pop()}}return this.buf.join("")}startElement(e){let t=OT(e).toLowerCase();if(!kT.hasOwnProperty(t))return this.sanitizedSomething=!0,!YL.hasOwnProperty(t);this.buf.push("<"),this.buf.push(t);let r=e.attributes;for(let i=0;i<r.length;i++){let o=r.item(i),s=o.name,a=s.toLowerCase();if(!KL.hasOwnProperty(a)){this.sanitizedSomething=!0;continue}let l=o.value;LD[a]&&(l=z_(l)),this.buf.push(" ",s,'="',RT(l),'"')}return this.buf.push(">"),!0}endElement(e){let t=OT(e).toLowerCase();kT.hasOwnProperty(t)&&!RD.hasOwnProperty(t)&&(this.buf.push("</"),this.buf.push(t),this.buf.push(">"))}chars(e){this.buf.push(RT(e))}};function QL(n,e){return(n.compareDocumentPosition(e)&Node.DOCUMENT_POSITION_CONTAINED_BY)!==Node.DOCUMENT_POSITION_CONTAINED_BY}function ZL(n){let e=n.nextSibling;if(e&&n!==e.previousSibling)throw VD(e);return e}function XL(n){let e=n.firstChild;if(e&&QL(n,e))throw VD(e);return e}function OT(n){let e=n.nodeName;return typeof e=="string"?e:"FORM"}function VD(n){return new Error(`Failed to sanitize html because the element is clobbered: ${n.outerHTML}`)}var JL=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,eV=/([^\#-~ |!])/g;function RT(n){return n.replace(/&/g,"&amp;").replace(JL,function(e){let t=e.charCodeAt(0),r=e.charCodeAt(1);return"&#"+((t-55296)*1024+(r-56320)+65536)+";"}).replace(eV,function(e){return"&#"+e.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}var lh;function UD(n,e){let t=null;try{lh=lh||jL(n);let r=e?String(e):"";t=lh.getInertBodyElement(r);let i=5,o=r;do{if(i===0)throw new Error("Failed to sanitize html because the input is unstable");i--,r=o,o=t.innerHTML,t=lh.getInertBodyElement(r)}while(r!==o);let a=new __().sanitizeChildren(NT(t)||t);return Vh(a)}finally{if(t){let r=NT(t)||t;for(;r.firstChild;)r.firstChild.remove()}}}function NT(n){return"content"in n&&tV(n)?n.content:null}function tV(n){return n.nodeType===Node.ELEMENT_NODE&&n.nodeName==="TEMPLATE"}var iu=(function(n){return n[n.NONE=0]="NONE",n[n.HTML=1]="HTML",n[n.STYLE=2]="STYLE",n[n.SCRIPT=3]="SCRIPT",n[n.URL=4]="URL",n[n.RESOURCE_URL=5]="RESOURCE_URL",n})(iu||{});function q_(n){let e=G_();return e?PT(e.sanitize(iu.HTML,n)||""):Uh(n,"HTML")?PT(Ja(n)):UD(j_(),co(n))}function st(n){let e=G_();return e?e.sanitize(iu.URL,n)||"":Uh(n,"URL")?Ja(n):z_(co(n))}function jD(n){let e=G_();if(e)return AT(e.sanitize(iu.RESOURCE_URL,n)||"");if(Uh(n,"ResourceURL"))return AT(Ja(n));throw new Z(904,!1)}function nV(n,e){return e==="src"&&(n==="embed"||n==="frame"||n==="iframe"||n==="media"||n==="script")||e==="href"&&(n==="base"||n==="link")?jD:st}function W_(n,e,t){return nV(e,t)(n)}function G_(){let n=Se();return n&&n[Lr].sanitizer}var rV=/^>|^->|<!--|-->|--!>|<!-$/g,iV=/(<|>)/g,oV="\u200B$1\u200B";function sV(n){return n.replace(rV,e=>e.replace(iV,oV))}function K_(n){return n.ownerDocument}function BD(n){return n instanceof Function?n():n}function aV(n,e,t){let r=n.length;for(;;){let i=n.indexOf(e,t);if(i===-1)return i;if(i===0||n.charCodeAt(i-1)<=32){let o=e.length;if(i+o===r||n.charCodeAt(i+o)<=32)return i}t=i+1}}var $D="ng-template";function cV(n,e,t,r){let i=0;if(r){for(;i<e.length&&typeof e[i]=="string";i+=2)if(e[i]==="class"&&aV(e[i+1].toLowerCase(),t,0)!==-1)return!0}else if(Y_(n))return!1;if(i=e.indexOf(1,i),i>-1){let o;for(;++i<e.length&&typeof(o=e[i])=="string";)if(o.toLowerCase()===t)return!0}return!1}function Y_(n){return n.type===4&&n.value!==$D}function lV(n,e,t){let r=n.type===4&&!t?$D:n.value;return e===r}function uV(n,e,t){let r=4,i=n.attrs,o=i!==null?hV(i):0,s=!1;for(let a=0;a<e.length;a++){let l=e[a];if(typeof l=="number"){if(!s&&!br(r)&&!br(l))return!1;if(s&&br(l))continue;s=!1,r=l|r&1;continue}if(!s)if(r&4){if(r=2|r&1,l!==""&&!lV(n,l,t)||l===""&&e.length===1){if(br(r))return!1;s=!0}}else if(r&8){if(i===null||!cV(n,i,l,t)){if(br(r))return!1;s=!0}}else{let u=e[++a],f=dV(l,i,Y_(n),t);if(f===-1){if(br(r))return!1;s=!0;continue}if(u!==""){let m;if(f>o?m="":m=i[f+1].toLowerCase(),r&2&&u!==m){if(br(r))return!1;s=!0}}}}return br(r)||s}function br(n){return(n&1)===0}function dV(n,e,t,r){if(e===null)return-1;let i=0;if(r||!t){let o=!1;for(;i<e.length;){let s=e[i];if(s===n)return i;if(s===3||s===6)o=!0;else if(s===1||s===2){let a=e[++i];for(;typeof a=="string";)a=e[++i];continue}else{if(s===4)break;if(s===0){i+=4;continue}}i+=o?1:2}return-1}else return pV(e,n)}function fV(n,e,t=!1){for(let r=0;r<e.length;r++)if(uV(n,e[r],t))return!0;return!1}function hV(n){for(let e=0;e<n.length;e++){let t=n[e];if(hD(t))return e}return n.length}function pV(n,e){let t=n.indexOf(4);if(t>-1)for(t++;t<n.length;){let r=n[t];if(typeof r=="number")return-1;if(r===e)return t;t++}return-1}function FT(n,e){return n?":not("+e.trim()+")":e}function gV(n){let e=n[0],t=1,r=2,i="",o=!1;for(;t<n.length;){let s=n[t];if(typeof s=="string")if(r&2){let a=n[++t];i+="["+s+(a.length>0?'="'+a+'"':"")+"]"}else r&8?i+="."+s:r&4&&(i+=" "+s);else i!==""&&!br(s)&&(e+=FT(o,i),i=""),r=s,o=o||!br(r);t++}return i!==""&&(e+=FT(o,i)),e}function mV(n){return n.map(gV).join(",")}function vV(n){let e=[],t=[],r=1,i=2;for(;r<n.length;){let o=n[r];if(typeof o=="string")i===2?o!==""&&e.push(o,n[++r]):i===8&&t.push(o);else{if(!br(i))break;i=o}r++}return t.length&&e.push(1,...t),e}var Xn={};function _V(n,e){return n.createText(e)}function yV(n,e,t){n.setValue(e,t)}function bV(n,e){return n.createComment(sV(e))}function HD(n,e,t){return n.createElement(e,t)}function Ch(n,e,t,r,i){n.insertBefore(e,t,r,i)}function zD(n,e,t){n.appendChild(e,t)}function LT(n,e,t,r,i){r!==null?Ch(n,e,t,r,i):zD(n,e,t)}function wV(n,e,t){n.removeChild(null,e,t)}function EV(n,e,t){n.setAttribute(e,"style",t)}function CV(n,e,t){t===""?n.removeAttribute(e,"class"):n.setAttribute(e,"class",t)}function qD(n,e,t){let{mergedAttrs:r,classes:i,styles:o}=t;r!==null&&mL(n,e,r),i!==null&&CV(n,e,i),o!==null&&EV(n,e,o)}function Q_(n,e,t,r,i,o,s,a,l,u,f){let m=Lt+r,_=m+i,E=IV(m,_),x=typeof u=="function"?u():u;return E[ue]={type:n,blueprint:E,template:t,queries:null,viewQuery:a,declTNode:e,data:E.slice().fill(null,m),bindingStartIndex:m,expandoStartIndex:_,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:typeof o=="function"?o():o,pipeRegistry:typeof s=="function"?s():s,firstChild:null,schemas:l,consts:x,incompleteFirstPass:!1,ssrId:f}}function IV(n,e){let t=[];for(let r=0;r<e;r++)t.push(r<n?null:Xn);return t}function SV(n){let e=n.tView;return e===null||e.incompleteFirstPass?n.tView=Q_(1,null,n.template,n.decls,n.vars,n.directiveDefs,n.pipeDefs,n.viewQuery,n.schemas,n.consts,n.id):e}function Z_(n,e,t,r,i,o,s,a,l,u,f){let m=e.blueprint.slice();return m[mr]=i,m[pe]=r|4|128|8|64|1024,(u!==null||n&&n[pe]&2048)&&(m[pe]|=2048),P0(m),m[Ft]=m[ds]=n,m[nn]=t,m[Lr]=s||n&&n[Lr],m[Ze]=a||n&&n[Ze],m[us]=l||n&&n[us]||null,m[Kn]=o,m[Bl]=AL(),m[jl]=f,m[I0]=u,m[Yn]=e.type==2?n[Yn]:m,m}function TV(n,e,t){let r=_r(e,n),i=SV(t),o=n[Lr].rendererFactory,s=X_(n,Z_(n,i,null,WD(t),r,e,null,o.createRenderer(r,t),null,null,null));return n[e.index]=s}function WD(n){let e=16;return n.signals?e=4096:n.onPush&&(e=64),e}function GD(n,e,t,r){if(t===0)return-1;let i=e.length;for(let o=0;o<t;o++)e.push(r),n.blueprint.push(r),n.data.push(null);return i}function X_(n,e){return n[Ua]?n[C0][Gn]=e:n[Ua]=e,n[C0]=e,e}function v(n=1){KD(wt(),Se(),po()+n,!1)}function KD(n,e,t,r){if(!r)if((e[pe]&3)===3){let o=n.preOrderCheckHooks;o!==null&&dh(e,o,t)}else{let o=n.preOrderHooks;o!==null&&fh(e,o,0,t)}go(t)}var jh=(function(n){return n[n.None=0]="None",n[n.SignalBased=1]="SignalBased",n[n.HasDecoratorInputTransform=2]="HasDecoratorInputTransform",n})(jh||{});function y_(n,e,t,r){let i=Ee(null);try{let[o,s,a]=n.inputs[t],l=null;(s&jh.SignalBased)!==0&&(l=e[o][Jt]),l!==null&&l.transformFn!==void 0?r=l.transformFn(r):a!==null&&(r=a.call(e,r)),n.setInput!==null?n.setInput(e,l,r,t,o):aD(e,l,o,r)}finally{Ee(i)}}var Hr=(function(n){return n[n.Important=1]="Important",n[n.DashCase=2]="DashCase",n})(Hr||{}),DV;function J_(n,e){return DV(n,e)}function Wa(n,e,t,r,i){if(r!=null){let o,s=!1;vr(r)?o=r:Ur(r)&&(s=!0,r=r[mr]);let a=Qn(r);n===0&&t!==null?i==null?zD(e,t,a):Ch(e,t,a,i||null,!0):n===1&&t!==null?Ch(e,t,a,i||null,!0):n===2?wV(e,a,s):n===3&&e.destroyNode(a),o!=null&&UV(e,n,o,t,i)}}function xV(n,e){YD(n,e),e[mr]=null,e[Kn]=null}function MV(n,e,t,r,i,o){r[mr]=i,r[Kn]=e,Bh(n,r,t,1,i,o)}function YD(n,e){e[Lr].changeDetectionScheduler?.notify(9),Bh(n,e,e[Ze],2,null,null)}function PV(n){let e=n[Ua];if(!e)return n_(n[ue],n);for(;e;){let t=null;if(Ur(e))t=e[Ua];else{let r=e[fn];r&&(t=r)}if(!t){for(;e&&!e[Gn]&&e!==n;)Ur(e)&&n_(e[ue],e),e=e[Ft];e===null&&(e=n),Ur(e)&&n_(e[ue],e),t=e&&e[Gn]}e=t}}function ey(n,e){let t=n[ps],r=t.indexOf(e);t.splice(r,1)}function QD(n,e){if(gs(e))return;let t=e[Ze];t.destroyNode&&Bh(n,e,t,3,null,null),PV(e)}function n_(n,e){if(gs(e))return;let t=Ee(null);try{e[pe]&=-129,e[pe]|=256,e[Pn]&&Il(e[Pn]),kV(n,e),AV(n,e),e[ue].type===1&&e[Ze].destroy();let r=e[uo];if(r!==null&&vr(e[Ft])){r!==e[Ft]&&ey(r,e);let i=e[Vr];i!==null&&i.detachView(n)}h_(e)}finally{Ee(t)}}function AV(n,e){let t=n.cleanup,r=e[Va];if(t!==null)for(let s=0;s<t.length-1;s+=2)if(typeof t[s]=="string"){let a=t[s+3];a>=0?r[a]():r[-a].unsubscribe(),s+=2}else{let a=r[t[s+1]];t[s].call(a)}r!==null&&(e[Va]=null);let i=e[Ei];if(i!==null){e[Ei]=null;for(let s=0;s<i.length;s++){let a=i[s];a()}}let o=e[$l];if(o!==null){e[$l]=null;for(let s of o)s.destroy()}}function kV(n,e){let t;if(n!=null&&(t=n.destroyHooks)!=null)for(let r=0;r<t.length;r+=2){let i=e[t[r]];if(!(i instanceof ys)){let o=t[r+1];if(Array.isArray(o))for(let s=0;s<o.length;s+=2){let a=i[o[s]],l=o[s+1];He(4,a,l);try{l.call(a)}finally{He(5,a,l)}}else{He(4,i,o);try{o.call(i)}finally{He(5,i,o)}}}}}function OV(n,e,t){return RV(n,e.parent,t)}function RV(n,e,t){let r=e;for(;r!==null&&r.type&168;)e=r,r=e.parent;if(r===null)return t[mr];if(ho(r)){let{encapsulation:i}=n.data[r.directiveStart+r.componentOffset];if(i===Di.None||i===Di.Emulated)return null}return _r(r,t)}function NV(n,e,t){return LV(n,e,t)}function FV(n,e,t){return n.type&40?_r(n,t):null}var LV=FV,VT;function ty(n,e,t,r){let i=OV(n,r,e),o=e[Ze],s=r.parent||e[Kn],a=NV(s,r,e);if(i!=null)if(Array.isArray(t))for(let l=0;l<t.length;l++)LT(o,i,t[l],a,!1);else LT(o,i,t,a,!1);VT!==void 0&&VT(o,r,e,t,i)}function Ql(n,e){if(e!==null){let t=e.type;if(t&3)return _r(e,n);if(t&4)return b_(-1,n[e.index]);if(t&8){let r=e.child;if(r!==null)return Ql(n,r);{let i=n[e.index];return vr(i)?b_(-1,i):Qn(i)}}else{if(t&128)return Ql(n,e.next);if(t&32)return J_(e,n)()||Qn(n[e.index]);{let r=ZD(n,e);if(r!==null){if(Array.isArray(r))return r[0];let i=ao(n[Yn]);return Ql(i,r)}else return Ql(n,e.next)}}}return null}function ZD(n,e){if(e!==null){let r=n[Yn][Kn],i=e.projection;return r.projection[i]}return null}function b_(n,e){let t=fn+n+1;if(t<e.length){let r=e[t],i=r[ue].firstChild;if(i!==null)return Ql(r,i)}return e[fo]}function ny(n,e,t,r,i,o,s){for(;t!=null;){if(t.type===128){t=t.next;continue}let a=r[t.index],l=t.type;if(s&&e===0&&(a&&Ya(Qn(a),r),t.flags|=2),!$_(t))if(l&8)ny(n,e,t.child,r,i,o,!1),Wa(e,n,i,a,o);else if(l&32){let u=J_(t,r),f;for(;f=u();)Wa(e,n,i,f,o);Wa(e,n,i,a,o)}else l&16?VV(n,e,r,t,i,o):Wa(e,n,i,a,o);t=s?t.projectionNext:t.next}}function Bh(n,e,t,r,i,o){ny(t,r,n.firstChild,e,i,o,!1)}function VV(n,e,t,r,i,o){let s=t[Yn],l=s[Kn].projection[r.projection];if(Array.isArray(l))for(let u=0;u<l.length;u++){let f=l[u];Wa(e,n,i,f,o)}else{let u=l,f=s[Ft];CD(r)&&(u.flags|=128),ny(n,e,u,f,i,o,!0)}}function UV(n,e,t,r,i){let o=t[fo],s=Qn(t);o!==s&&Wa(e,n,r,o,i);for(let a=fn;a<t.length;a++){let l=t[a];Bh(l[ue],l,n,e,r,o)}}function jV(n,e,t,r,i){if(e)i?n.addClass(t,r):n.removeClass(t,r);else{let o=r.indexOf("-")===-1?void 0:Hr.DashCase;i==null?n.removeStyle(t,r,o):(typeof i=="string"&&i.endsWith("!important")&&(i=i.slice(0,-10),o|=Hr.Important),n.setStyle(t,r,i,o))}}function XD(n,e,t,r,i){let o=po(),s=r&2;try{go(-1),s&&e.length>Lt&&KD(n,e,Lt,!1),He(s?2:0,i,t),t(r,i)}finally{go(o),He(s?3:1,i,t)}}function $h(n,e,t){WV(n,e,t),(t.flags&64)===64&&GV(n,e,t)}function Hh(n,e,t=_r){let r=e.localNames;if(r!==null){let i=e.index+1;for(let o=0;o<r.length;o+=2){let s=r[o+1],a=s===-1?t(e,n):n[s];n[i++]=a}}}function BV(n,e,t,r){let o=r.get(MD,xD)||t===Di.ShadowDom,s=n.selectRootElement(e,o);return $V(s),s}function $V(n){HV(n)}var HV=()=>null;function zV(n){return n==="class"?"className":n==="for"?"htmlFor":n==="formaction"?"formAction":n==="innerHtml"?"innerHTML":n==="readonly"?"readOnly":n==="tabindex"?"tabIndex":n}function JD(n,e,t,r,i,o){let s=e[ue];if(sy(n,s,e,t,r)){ho(n)&&qV(e,n.index);return}n.type&3&&(t=zV(t)),ex(n,e,t,r,i,o)}function ex(n,e,t,r,i,o){if(n.type&3){let s=_r(n,e);r=o!=null?o(r,n.value||"",t):r,i.setProperty(s,t,r)}else n.type&12}function qV(n,e){let t=Zn(e,n);t[pe]&16||(t[pe]|=64)}function WV(n,e,t){let r=t.directiveStart,i=t.directiveEnd;ho(t)&&TV(e,t,n.data[r+t.componentOffset]),n.firstCreatePass||bh(t,e);let o=t.initialInputs;for(let s=r;s<i;s++){let a=n.data[s],l=Xl(e,n,s,t);if(Ya(l,e),o!==null&&ZV(e,s-r,l,a,t,o),jr(a)){let u=Zn(t.index,e);u[nn]=Xl(e,n,s,t)}}}function GV(n,e,t){let r=t.directiveStart,i=t.directiveEnd,o=t.index,s=pT();try{go(o);for(let a=r;a<i;a++){let l=n.data[a],u=e[a];Jf(a),(l.hostBindings!==null||l.hostVars!==0||l.hostAttrs!==null)&&KV(l,u)}}finally{go(-1),Jf(s)}}function KV(n,e){n.hostBindings!==null&&n.hostBindings(1,e)}function ry(n,e){let t=n.directiveRegistry,r=null;if(t)for(let i=0;i<t.length;i++){let o=t[i];fV(e,o.selectors,!1)&&(r??=[],jr(o)?r.unshift(o):r.push(o))}return r}function YV(n,e,t,r,i,o){let s=_r(n,e);QV(e[Ze],s,o,n.value,t,r,i)}function QV(n,e,t,r,i,o,s){if(o==null)n.removeAttribute(e,i,t);else{let a=s==null?co(o):s(o,r||"",i);n.setAttribute(e,i,a,t)}}function ZV(n,e,t,r,i,o){let s=o[e];if(s!==null)for(let a=0;a<s.length;a+=2){let l=s[a],u=s[a+1];y_(r,t,l,u)}}function iy(n,e,t,r,i){let o=Lt+t,s=e[ue],a=i(s,e,n,r,t);e[o]=a,Ha(n,!0);let l=n.type===2;return l?(qD(e[Ze],a,n),(iT()===0||ja(n))&&Ya(a,e),oT()):Ya(a,e),rh()&&(!l||!$_(n))&&ty(s,e,a,n),n}function oy(n){let e=n;return U0()?cT():(e=e.parent,Ha(e,!1)),e}function XV(n,e){let t=n[us];if(!t)return;t.get(hn,null)?.(e)}function sy(n,e,t,r,i){let o=n.inputs?.[r],s=n.hostDirectiveInputs?.[r],a=!1;if(s)for(let l=0;l<s.length;l+=2){let u=s[l],f=s[l+1],m=e.data[u];y_(m,t[u],f,i),a=!0}if(o)for(let l of o){let u=t[l],f=e.data[l];y_(f,u,r,i),a=!0}return a}function JV(n,e){let t=Zn(e,n),r=t[ue];e3(r,t);let i=t[mr];i!==null&&t[jl]===null&&(t[jl]=PD(i,t[us])),He(18),ay(r,t,t[nn]),He(19,t[nn])}function e3(n,e){for(let t=e.length;t<n.blueprint.length;t++)e.push(n.blueprint[t])}function ay(n,e,t){th(e);try{let r=n.viewQuery;r!==null&&g_(1,r,t);let i=n.template;i!==null&&XD(n,e,i,1,t),n.firstCreatePass&&(n.firstCreatePass=!1),e[Vr]?.finishViewCreation(n),n.staticContentQueries&&AD(n,e),n.staticViewQueries&&g_(2,n.viewQuery,t);let o=n.components;o!==null&&t3(e,o)}catch(r){throw n.firstCreatePass&&(n.incompleteFirstPass=!0,n.firstCreatePass=!1),r}finally{e[pe]&=-5,nh()}}function t3(n,e){for(let t=0;t<e.length;t++)JV(n,e[t])}function n3(n,e,t,r){let i=Ee(null);try{let o=e.tView,a=n[pe]&4096?4096:16,l=Z_(n,o,t,a,null,e,null,null,r?.injector??null,r?.embeddedViewInjector??null,r?.dehydratedView??null),u=n[e.index];l[uo]=u;let f=n[Vr];return f!==null&&(l[Vr]=f.createEmbeddedView(o)),ay(o,l,t),l}finally{Ee(i)}}function UT(n,e){return!e||e.firstChild===null||CD(n)}var jT=!1,r3=new X("");function Jl(n,e,t,r,i=!1){for(;t!==null;){if(t.type===128){t=i?t.projectionNext:t.next;continue}let o=e[t.index];o!==null&&r.push(Qn(o)),vr(o)&&tx(o,r);let s=t.type;if(s&8)Jl(n,e,t.child,r);else if(s&32){let a=J_(t,e),l;for(;l=a();)r.push(l)}else if(s&16){let a=ZD(e,t);if(Array.isArray(a))r.push(...a);else{let l=ao(e[Yn]);Jl(l[ue],l,a,r,!0)}}t=i?t.projectionNext:t.next}return r}function tx(n,e){for(let t=fn;t<n.length;t++){let r=n[t],i=r[ue].firstChild;i!==null&&Jl(r[ue],r,i,e)}n[fo]!==n[mr]&&e.push(n[fo])}function nx(n){if(n[hs]!==null){for(let e of n[hs])e.impl.addSequence(e);n[hs].length=0}}var rx=[];function i3(n){return n[Pn]??o3(n)}function o3(n){let e=rx.pop()??Object.create(a3);return e.lView=n,e}function s3(n){n.lView[Pn]!==n&&(n.lView=null,rx.push(n))}var a3=ne(H({},Xo),{consumerIsAlwaysLive:!0,kind:"template",consumerMarkedDirty:n=>{$a(n.lView)},consumerOnSignalRead(){this.lView[Pn]=this}});function c3(n){let e=n[Pn]??Object.create(l3);return e.lView=n,e}var l3=ne(H({},Xo),{consumerIsAlwaysLive:!0,kind:"template",consumerMarkedDirty:n=>{let e=ao(n.lView);for(;e&&!ix(e[ue]);)e=ao(e);e&&A0(e)},consumerOnSignalRead(){this.lView[Pn]=this}});function ix(n){return n.type!==2}function ox(n){if(n[$l]===null)return;let e=!0;for(;e;){let t=!1;for(let r of n[$l])r.dirty&&(t=!0,r.zone===null||Zone.current===r.zone?r.run():r.zone.run(()=>r.run()));e=t&&!!(n[pe]&8192)}}var u3=100;function cy(n,e=0){let r=n[Lr].rendererFactory,i=!1;i||r.begin?.();try{d3(n,e)}finally{i||r.end?.()}}function d3(n,e){let t=B0();try{$0(!0),w_(n,e);let r=0;for(;zl(n);){if(r===u3)throw new Z(103,!1);r++,w_(n,1)}}finally{$0(t)}}function sx(n,e){j0(e?ql.Exhaustive:ql.OnlyDirtyViews);try{cy(n)}finally{j0(ql.Off)}}function f3(n,e,t,r){if(gs(e))return;let i=e[pe],o=!1,s=!1;th(e);let a=!0,l=null,u=null;o||(ix(n)?(u=i3(e),l=Jo(u)):lf()===null?(a=!1,u=c3(e),l=Jo(u)):e[Pn]&&(Il(e[Pn]),e[Pn]=null));try{P0(e),dT(n.bindingStartIndex),t!==null&&XD(n,e,t,2,r);let f=(i&3)===3;if(!o)if(f){let E=n.preOrderCheckHooks;E!==null&&dh(e,E,null)}else{let E=n.preOrderHooks;E!==null&&fh(e,E,0,null),e_(e,0)}if(s||h3(e),ox(e),ax(e,0),n.contentQueries!==null&&AD(n,e),!o)if(f){let E=n.contentCheckHooks;E!==null&&dh(e,E)}else{let E=n.contentHooks;E!==null&&fh(e,E,1),e_(e,1)}g3(n,e);let m=n.components;m!==null&&lx(e,m,0);let _=n.viewQuery;if(_!==null&&g_(2,_,r),!o)if(f){let E=n.viewCheckHooks;E!==null&&dh(e,E)}else{let E=n.viewHooks;E!==null&&fh(e,E,2),e_(e,2)}if(n.firstUpdatePass===!0&&(n.firstUpdatePass=!1),e[Gf]){for(let E of e[Gf])E();e[Gf]=null}o||(nx(e),e[pe]&=-73)}catch(f){throw o||$a(e),f}finally{u!==null&&(ba(u,l),a&&s3(u)),nh()}}function ax(n,e){for(let t=SD(n);t!==null;t=TD(t))for(let r=fn;r<t.length;r++){let i=t[r];cx(i,e)}}function h3(n){for(let e=SD(n);e!==null;e=TD(e)){if(!(e[pe]&2))continue;let t=e[ps];for(let r=0;r<t.length;r++){let i=t[r];A0(i)}}}function p3(n,e,t){He(18);let r=Zn(e,n);cx(r,t),He(19,r[nn])}function cx(n,e){Yf(n)&&w_(n,e)}function w_(n,e){let r=n[ue],i=n[pe],o=n[Pn],s=!!(e===0&&i&16);if(s||=!!(i&64&&e===0),s||=!!(i&1024),s||=!!(o?.dirty&&Cl(o)),s||=!1,o&&(o.dirty=!1),n[pe]&=-9217,s)f3(r,n,r.template,n[nn]);else if(i&8192){let a=Ee(null);try{ox(n),ax(n,1);let l=r.components;l!==null&&lx(n,l,1),nx(n)}finally{Ee(a)}}}function lx(n,e,t){for(let r=0;r<e.length;r++)p3(n,e[r],t)}function g3(n,e){let t=n.hostBindingOpCodes;if(t!==null)try{for(let r=0;r<t.length;r++){let i=t[r];if(i<0)go(~i);else{let o=i,s=t[++r],a=t[++r];hT(s,o);let l=e[o];He(24,l),a(2,l),He(25,l)}}}finally{go(-1)}}function ly(n,e){let t=B0()?64:1088;for(n[Lr].changeDetectionScheduler?.notify(e);n;){n[pe]|=t;let r=ao(n);if(Ba(n)&&!r)return n;n=r}return null}function ux(n,e,t,r){return[n,!0,0,e,null,r,null,t,null,null]}function m3(n,e,t,r=!0){let i=e[ue];if(v3(i,e,n,t),r){let s=b_(t,n),a=e[Ze],l=a.parentNode(n[fo]);l!==null&&MV(i,n[Kn],a,e,l,s)}let o=e[jl];o!==null&&o.firstChild!==null&&(o.firstChild=null)}function E_(n,e){if(n.length<=fn)return;let t=fn+e,r=n[t];if(r){let i=r[uo];i!==null&&i!==n&&ey(i,r),e>0&&(n[t-1][Gn]=r[Gn]);let o=Ll(n,fn+e);xV(r[ue],r);let s=o[Vr];s!==null&&s.detachView(o[ue]),r[Ft]=null,r[Gn]=null,r[pe]&=-129}return r}function v3(n,e,t,r){let i=fn+r,o=t.length;r>0&&(t[i-1][Gn]=e),r<o-fn?(e[Gn]=t[i],g0(t,fn+r,e)):(t.push(e),e[Gn]=null),e[Ft]=t;let s=e[uo];s!==null&&t!==s&&dx(s,e);let a=e[Vr];a!==null&&a.insertView(n),Qf(e),e[pe]|=128}function dx(n,e){let t=n[ps],r=e[Ft];if(Ur(r))n[pe]|=2;else{let i=r[Ft][Yn];e[Yn]!==i&&(n[pe]|=2)}t===null?n[ps]=[e]:t.push(e)}var mo=class{_lView;_cdRefInjectingView;_appRef=null;_attachedToViewContainer=!1;exhaustive;get rootNodes(){let e=this._lView,t=e[ue];return Jl(t,e,t.firstChild,[])}constructor(e,t){this._lView=e,this._cdRefInjectingView=t}get context(){return this._lView[nn]}set context(e){this._lView[nn]=e}get destroyed(){return gs(this._lView)}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){let e=this._lView[Ft];if(vr(e)){let t=e[Hl],r=t?t.indexOf(this):-1;r>-1&&(E_(e,r),Ll(t,r))}this._attachedToViewContainer=!1}QD(this._lView[ue],this._lView)}onDestroy(e){k0(this._lView,e)}markForCheck(){ly(this._cdRefInjectingView||this._lView,4)}detach(){this._lView[pe]&=-129}reattach(){Qf(this._lView),this._lView[pe]|=128}detectChanges(){this._lView[pe]|=1024,cy(this._lView)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new Z(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null;let e=Ba(this._lView),t=this._lView[uo];t!==null&&!e&&ey(t,this._lView),YD(this._lView[ue],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new Z(902,!1);this._appRef=e;let t=Ba(this._lView),r=this._lView[uo];r!==null&&!t&&dx(r,this._lView),Qf(this._lView)}};var vo=(()=>{class n{_declarationLView;_declarationTContainer;elementRef;static __NG_ELEMENT_ID__=_3;constructor(t,r,i){this._declarationLView=t,this._declarationTContainer=r,this.elementRef=i}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(t,r){return this.createEmbeddedViewImpl(t,r)}createEmbeddedViewImpl(t,r,i){let o=n3(this._declarationLView,this._declarationTContainer,t,{embeddedViewInjector:r,dehydratedView:i});return new mo(o)}}return n})();function _3(){return zh(Et(),Se())}function zh(n,e){return n.type&4?new vo(e,n,Xa(n,e)):null}function qh(n,e,t,r,i){let o=n.data[e];if(o===null)o=y3(n,e,t,r,i),fT()&&(o.flags|=32);else if(o.type&64){o.type=t,o.value=r,o.attrs=i;let s=aT();o.injectorIndex=s===null?-1:s.injectorIndex}return Ha(o,!0),o}function y3(n,e,t,r,i){let o=V0(),s=U0(),a=s?o:o&&o.parent,l=n.data[e]=w3(n,a,t,e,r,i);return b3(n,l,o,s),l}function b3(n,e,t,r){n.firstChild===null&&(n.firstChild=e),t!==null&&(r?t.child==null&&e.parent!==null&&(t.child=e):t.next===null&&(t.next=e,e.prev=t))}function w3(n,e,t,r,i,o){let s=e?e.injectorIndex:-1,a=0;return sT()&&(a|=128),{type:t,index:r,insertBeforeIndex:null,injectorIndex:s,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:a,providerIndexes:0,value:i,attrs:o,mergedAttrs:null,localNames:null,initialInputs:null,inputs:null,hostDirectiveInputs:null,outputs:null,hostDirectiveOutputs:null,directiveToIndex:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}var Hre=new RegExp(`^(\\d+)*(${NL}|${RL})*(.*)`);var E3=()=>null;function BT(n,e){return E3(n,e)}var fx=class{},Wh=class{},C_=class{resolveComponentFactory(e){throw new Z(917,!1)}},Is=class{static NULL=new C_},bs=class{},Jn=(()=>{class n{destroyNode=null;static __NG_ELEMENT_ID__=()=>C3()}return n})();function C3(){let n=Se(),e=Et(),t=Zn(e.index,n);return(Ur(t)?t:n)[Ze]}var hx=(()=>{class n{static \u0275prov=Q({token:n,providedIn:"root",factory:()=>null})}return n})();var ph={},I_=class{injector;parentInjector;constructor(e,t){this.injector=e,this.parentInjector=t}get(e,t,r){let i=this.injector.get(e,ph,r);return i!==ph||t===ph?i:this.parentInjector.get(e,t,r)}};function Ih(n,e,t){let r=t?n.styles:null,i=t?n.classes:null,o=0;if(e!==null)for(let s=0;s<e.length;s++){let a=e[s];if(typeof a=="number")o=a;else if(o==1)i=n0(i,a);else if(o==2){let l=a,u=e[++s];r=n0(r,l+": "+u+";")}}t?n.styles=r:n.stylesWithoutHost=r,t?n.classes=i:n.classesWithoutHost=i}function ee(n,e=0){let t=Se();if(t===null)return re(n,e);let r=Et();return bD(r,t,zt(n),e)}function uy(){let n="invalid";throw new Error(n)}function px(n,e,t,r,i){let o=r===null?null:{"":-1},s=i(n,t);if(s!==null){let a=s,l=null,u=null;for(let f of s)if(f.resolveHostDirectives!==null){[a,l,u]=f.resolveHostDirectives(s);break}T3(n,e,t,a,o,l,u)}o!==null&&r!==null&&I3(t,r,o)}function I3(n,e,t){let r=n.localNames=[];for(let i=0;i<e.length;i+=2){let o=t[e[i+1]];if(o==null)throw new Z(-301,!1);r.push(e[i],o)}}function S3(n,e,t){e.componentOffset=t,(n.components??=[]).push(e.index)}function T3(n,e,t,r,i,o,s){let a=r.length,l=!1;for(let _=0;_<a;_++){let E=r[_];!l&&jr(E)&&(l=!0,S3(n,t,_)),d_(bh(t,e),n,E.type)}k3(t,n.data.length,a);for(let _=0;_<a;_++){let E=r[_];E.providersResolver&&E.providersResolver(E)}let u=!1,f=!1,m=GD(n,e,a,null);a>0&&(t.directiveToIndex=new Map);for(let _=0;_<a;_++){let E=r[_];if(t.mergedAttrs=Ka(t.mergedAttrs,E.hostAttrs),x3(n,t,e,m,E),A3(m,E,i),s!==null&&s.has(E)){let[F,L]=s.get(E);t.directiveToIndex.set(E.type,[m,F+t.directiveStart,L+t.directiveStart])}else(o===null||!o.has(E))&&t.directiveToIndex.set(E.type,m);E.contentQueries!==null&&(t.flags|=4),(E.hostBindings!==null||E.hostAttrs!==null||E.hostVars!==0)&&(t.flags|=64);let x=E.type.prototype;!u&&(x.ngOnChanges||x.ngOnInit||x.ngDoCheck)&&((n.preOrderHooks??=[]).push(t.index),u=!0),!f&&(x.ngOnChanges||x.ngDoCheck)&&((n.preOrderCheckHooks??=[]).push(t.index),f=!0),m++}D3(n,t,o)}function D3(n,e,t){for(let r=e.directiveStart;r<e.directiveEnd;r++){let i=n.data[r];if(t===null||!t.has(i))$T(0,e,i,r),$T(1,e,i,r),zT(e,r,!1);else{let o=t.get(i);HT(0,e,o,r),HT(1,e,o,r),zT(e,r,!0)}}}function $T(n,e,t,r){let i=n===0?t.inputs:t.outputs;for(let o in i)if(i.hasOwnProperty(o)){let s;n===0?s=e.inputs??={}:s=e.outputs??={},s[o]??=[],s[o].push(r),gx(e,o)}}function HT(n,e,t,r){let i=n===0?t.inputs:t.outputs;for(let o in i)if(i.hasOwnProperty(o)){let s=i[o],a;n===0?a=e.hostDirectiveInputs??={}:a=e.hostDirectiveOutputs??={},a[s]??=[],a[s].push(r,o),gx(e,s)}}function gx(n,e){e==="class"?n.flags|=8:e==="style"&&(n.flags|=16)}function zT(n,e,t){let{attrs:r,inputs:i,hostDirectiveInputs:o}=n;if(r===null||!t&&i===null||t&&o===null||Y_(n)){n.initialInputs??=[],n.initialInputs.push(null);return}let s=null,a=0;for(;a<r.length;){let l=r[a];if(l===0){a+=4;continue}else if(l===5){a+=2;continue}else if(typeof l=="number")break;if(!t&&i.hasOwnProperty(l)){let u=i[l];for(let f of u)if(f===e){s??=[],s.push(l,r[a+1]);break}}else if(t&&o.hasOwnProperty(l)){let u=o[l];for(let f=0;f<u.length;f+=2)if(u[f]===e){s??=[],s.push(u[f+1],r[a+1]);break}}a+=2}n.initialInputs??=[],n.initialInputs.push(s)}function x3(n,e,t,r,i){n.data[r]=i;let o=i.factory||(i.factory=so(i.type,!0)),s=new ys(o,jr(i),ee,null);n.blueprint[r]=s,t[r]=s,M3(n,e,r,GD(n,t,i.hostVars,Xn),i)}function M3(n,e,t,r,i){let o=i.hostBindings;if(o){let s=n.hostBindingOpCodes;s===null&&(s=n.hostBindingOpCodes=[]);let a=~e.index;P3(s)!=a&&s.push(a),s.push(t,r,o)}}function P3(n){let e=n.length;for(;e>0;){let t=n[--e];if(typeof t=="number"&&t<0)return t}return 0}function A3(n,e,t){if(t){if(e.exportAs)for(let r=0;r<e.exportAs.length;r++)t[e.exportAs[r]]=n;jr(e)&&(t[""]=n)}}function k3(n,e,t){n.flags|=1,n.directiveStart=e,n.directiveEnd=e+t,n.providerIndexes=e}function dy(n,e,t,r,i,o,s,a){let l=e[ue],u=l.consts,f=ms(u,s),m=qh(l,n,t,r,f);return o&&px(l,e,m,ms(u,a),i),m.mergedAttrs=Ka(m.mergedAttrs,m.attrs),m.attrs!==null&&Ih(m,m.attrs,!1),m.mergedAttrs!==null&&Ih(m,m.mergedAttrs,!0),l.queries!==null&&l.queries.elementStart(l,m),m}function fy(n,e){dD(n,e),S0(e)&&n.queries.elementEnd(e)}function O3(n,e,t,r,i,o){let s=e.consts,a=ms(s,i),l=qh(e,n,t,r,a);if(l.mergedAttrs=Ka(l.mergedAttrs,l.attrs),o!=null){let u=ms(s,o);l.localNames=[];for(let f=0;f<u.length;f+=2)l.localNames.push(u[f],-1)}return l.attrs!==null&&Ih(l,l.attrs,!1),l.mergedAttrs!==null&&Ih(l,l.mergedAttrs,!0),e.queries!==null&&e.queries.elementStart(e,l),l}function hy(n){return vx(n)?Array.isArray(n)||!(n instanceof Map)&&Symbol.iterator in n:!1}function mx(n,e){if(Array.isArray(n))for(let t=0;t<n.length;t++)e(n[t]);else{let t=n[Symbol.iterator](),r;for(;!(r=t.next()).done;)e(r.value)}}function vx(n){return n!==null&&(typeof n=="function"||typeof n=="object")}function py(n,e,t){return n[e]=t}function R3(n,e){return n[e]}function xi(n,e,t){if(t===Xn)return!1;let r=n[e];return Object.is(r,t)?!1:(n[e]=t,!0)}function _x(n,e,t,r){let i=xi(n,e,t);return xi(n,e+1,r)||i}function gh(n,e,t){return function r(i){let o=ho(n)?Zn(n.index,e):e;ly(o,5);let s=e[nn],a=qT(e,s,t,i),l=r.__ngNextListenerFn__;for(;l;)a=qT(e,s,l,i)&&a,l=l.__ngNextListenerFn__;return a}}function qT(n,e,t,r){let i=Ee(null);try{return He(6,e,t),t(r)!==!1}catch(o){return XV(n,o),!1}finally{He(7,e,t),Ee(i)}}function yx(n,e,t,r,i,o,s,a){let l=ja(n),u=!1,f=null;if(!r&&l&&(f=N3(e,t,o,n.index)),f!==null){let m=f.__ngLastListenerFn__||f;m.__ngNextListenerFn__=s,f.__ngLastListenerFn__=s,u=!0}else{let m=_r(n,t),_=r?r(m):m;LL(t,_,o,a);let E=i.listen(_,o,a),x=r?F=>r(Qn(F[n.index])):n.index;bx(x,e,t,o,a,E,!1)}return u}function N3(n,e,t,r){let i=n.cleanup;if(i!=null)for(let o=0;o<i.length-1;o+=2){let s=i[o];if(s===t&&i[o+1]===r){let a=e[Va],l=i[o+2];return a&&a.length>l?a[l]:null}typeof s=="string"&&(o+=2)}return null}function bx(n,e,t,r,i,o,s){let a=e.firstCreatePass?R0(e):null,l=O0(t),u=l.length;l.push(i,o),a&&a.push(r,n,u,(u+1)*(s?-1:1))}function WT(n,e,t,r,i,o){let s=e[t],a=e[ue],u=a.data[t].outputs[r],m=s[u].subscribe(o);bx(n.index,a,e,i,o,m,!0)}var S_=Symbol("BINDING");var Sh=class extends Is{ngModule;constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){let t=Ti(e);return new ws(t,this.ngModule)}};function F3(n){return Object.keys(n).map(e=>{let[t,r,i]=n[e],o={propName:t,templateName:e,isSignal:(r&jh.SignalBased)!==0};return i&&(o.transform=i),o})}function L3(n){return Object.keys(n).map(e=>({propName:n[e],templateName:e}))}function V3(n,e,t){let r=e instanceof ht?e:e?.injector;return r&&n.getStandaloneInjector!==null&&(r=n.getStandaloneInjector(r)||r),r?new I_(t,r):t}function U3(n){let e=n.get(bs,null);if(e===null)throw new Z(407,!1);let t=n.get(hx,null),r=n.get(Ii,null);return{rendererFactory:e,sanitizer:t,changeDetectionScheduler:r,ngReflect:!1}}function j3(n,e){let t=wx(n);return HD(e,t,t==="svg"?T0:t==="math"?XS:null)}function wx(n){return(n.selectors[0][0]||"div").toLowerCase()}var ws=class extends Wh{componentDef;ngModule;selector;componentType;ngContentSelectors;isBoundToModule;cachedInputs=null;cachedOutputs=null;get inputs(){return this.cachedInputs??=F3(this.componentDef.inputs),this.cachedInputs}get outputs(){return this.cachedOutputs??=L3(this.componentDef.outputs),this.cachedOutputs}constructor(e,t){super(),this.componentDef=e,this.ngModule=t,this.componentType=e.type,this.selector=mV(e.selectors),this.ngContentSelectors=e.ngContentSelectors??[],this.isBoundToModule=!!t}create(e,t,r,i,o,s){He(22);let a=Ee(null);try{let l=this.componentDef,u=B3(r,l,s,o),f=V3(l,i||this.ngModule,e),m=U3(f),_=m.rendererFactory.createRenderer(null,l),E=r?BV(_,r,l.encapsulation,f):j3(l,_),x=s?.some(GT)||o?.some(W=>typeof W!="function"&&W.bindings.some(GT)),F=Z_(null,u,null,512|WD(l),null,null,m,_,f,null,PD(E,f,!0));F[Lt]=E,th(F);let L=null;try{let W=dy(Lt,F,2,"#host",()=>u.directiveRegistry,!0,0);E&&(qD(_,E,W),Ya(E,F)),$h(u,F,W),H_(u,W,F),fy(u,W),t!==void 0&&H3(W,this.ngContentSelectors,t),L=Zn(W.index,F),F[nn]=L[nn],ay(u,F,null)}catch(W){throw L!==null&&h_(L),h_(F),W}finally{He(23),nh()}return new Th(this.componentType,F,!!x)}finally{Ee(a)}}};function B3(n,e,t,r){let i=n?["ng-version","20.2.1"]:vV(e.selectors[0]),o=null,s=null,a=0;if(t)for(let f of t)a+=f[S_].requiredVars,f.create&&(f.targetIdx=0,(o??=[]).push(f)),f.update&&(f.targetIdx=0,(s??=[]).push(f));if(r)for(let f=0;f<r.length;f++){let m=r[f];if(typeof m!="function")for(let _ of m.bindings){a+=_[S_].requiredVars;let E=f+1;_.create&&(_.targetIdx=E,(o??=[]).push(_)),_.update&&(_.targetIdx=E,(s??=[]).push(_))}}let l=[e];if(r)for(let f of r){let m=typeof f=="function"?f:f.type,_=y0(m);l.push(_)}return Q_(0,null,$3(o,s),1,a,l,null,null,null,[i],null)}function $3(n,e){return!n&&!e?null:t=>{if(t&1&&n)for(let r of n)r.create();if(t&2&&e)for(let r of e)r.update()}}function GT(n){let e=n[S_].kind;return e==="input"||e==="twoWay"}var Th=class extends fx{_rootLView;_hasInputBindings;instance;hostView;changeDetectorRef;componentType;location;previousInputValues=null;_tNode;constructor(e,t,r){super(),this._rootLView=t,this._hasInputBindings=r,this._tNode=Kf(t[ue],Lt),this.location=Xa(this._tNode,t),this.instance=Zn(this._tNode.index,t)[nn],this.hostView=this.changeDetectorRef=new mo(t,void 0),this.componentType=e}setInput(e,t){this._hasInputBindings;let r=this._tNode;if(this.previousInputValues??=new Map,this.previousInputValues.has(e)&&Object.is(this.previousInputValues.get(e),t))return;let i=this._rootLView,o=sy(r,i[ue],i,e,t);this.previousInputValues.set(e,t);let s=Zn(r.index,i);ly(s,1)}get injector(){return new _s(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}};function H3(n,e,t){let r=n.projection=[];for(let i=0;i<e.length;i++){let o=t[i];r.push(o!=null&&o.length?Array.from(o):null)}}var Pi=(()=>{class n{static __NG_ELEMENT_ID__=z3}return n})();function z3(){let n=Et();return Cx(n,Se())}var q3=Pi,Ex=class extends q3{_lContainer;_hostTNode;_hostLView;constructor(e,t,r){super(),this._lContainer=e,this._hostTNode=t,this._hostLView=r}get element(){return Xa(this._hostTNode,this._hostLView)}get injector(){return new _s(this._hostTNode,this._hostLView)}get parentInjector(){let e=L_(this._hostTNode,this._hostLView);if(pD(e)){let t=_h(e,this._hostLView),r=vh(e),i=t[ue].data[r+8];return new _s(i,t)}else return new _s(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){let t=KT(this._lContainer);return t!==null&&t[e]||null}get length(){return this._lContainer.length-fn}createEmbeddedView(e,t,r){let i,o;typeof r=="number"?i=r:r!=null&&(i=r.index,o=r.injector);let s=BT(this._lContainer,e.ssrId),a=e.createEmbeddedViewImpl(t||{},o,s);return this.insertImpl(a,i,UT(this._hostTNode,s)),a}createComponent(e,t,r,i,o,s,a){let l=e&&!cL(e),u;if(l)u=t;else{let L=t||{};u=L.index,r=L.injector,i=L.projectableNodes,o=L.environmentInjector||L.ngModuleRef,s=L.directives,a=L.bindings}let f=l?e:new ws(Ti(e)),m=r||this.parentInjector;if(!o&&f.ngModule==null){let W=(l?m:this.parentInjector).get(ht,null);W&&(o=W)}let _=Ti(f.componentType??{}),E=BT(this._lContainer,_?.id??null),x=E?.firstChild??null,F=f.create(m,i,x,o,s,a);return this.insertImpl(F.hostView,u,UT(this._hostTNode,E)),F}insert(e,t){return this.insertImpl(e,t,!0)}insertImpl(e,t,r){let i=e._lView;if(eT(i)){let a=this.indexOf(e);if(a!==-1)this.detach(a);else{let l=i[Ft],u=new Ex(l,l[Kn],l[Ft]);u.detach(u.indexOf(e))}}let o=this._adjustIndex(t),s=this._lContainer;return m3(s,i,o,r),e.attachToViewContainerRef(),g0(r_(s),o,e),e}move(e,t){return this.insert(e,t)}indexOf(e){let t=KT(this._lContainer);return t!==null?t.indexOf(e):-1}remove(e){let t=this._adjustIndex(e,-1),r=E_(this._lContainer,t);r&&(Ll(r_(this._lContainer),t),QD(r[ue],r))}detach(e){let t=this._adjustIndex(e,-1),r=E_(this._lContainer,t);return r&&Ll(r_(this._lContainer),t)!=null?new mo(r):null}_adjustIndex(e,t=0){return e??this.length+t}};function KT(n){return n[Hl]}function r_(n){return n[Hl]||(n[Hl]=[])}function Cx(n,e){let t,r=e[n.index];return vr(r)?t=r:(t=ux(r,e,null,n),e[n.index]=t,X_(e,t)),G3(t,e,n,r),new Ex(t,n,e)}function W3(n,e){let t=n[Ze],r=t.createComment(""),i=_r(e,n),o=t.parentNode(i);return Ch(t,o,r,t.nextSibling(i),!1),r}var G3=Q3,K3=()=>!1;function Y3(n,e,t){return K3(n,e,t)}function Q3(n,e,t,r){if(n[fo])return;let i;t.type&8?i=Qn(r):i=W3(e,t),n[fo]=i}var T_=class n{queryList;matches=null;constructor(e){this.queryList=e}clone(){return new n(this.queryList)}setDirty(){this.queryList.setDirty()}},D_=class n{queries;constructor(e=[]){this.queries=e}createEmbeddedView(e){let t=e.queries;if(t!==null){let r=e.contentQueries!==null?e.contentQueries[0]:t.length,i=[];for(let o=0;o<r;o++){let s=t.getByIndex(o),a=this.queries[s.indexInDeclarationView];i.push(a.clone())}return new n(i)}return null}insertView(e){this.dirtyQueriesWithMatches(e)}detachView(e){this.dirtyQueriesWithMatches(e)}finishViewCreation(e){this.dirtyQueriesWithMatches(e)}dirtyQueriesWithMatches(e){for(let t=0;t<this.queries.length;t++)gy(e,t).matches!==null&&this.queries[t].setDirty()}},Dh=class{flags;read;predicate;constructor(e,t,r=null){this.flags=t,this.read=r,typeof e=="string"?this.predicate=i4(e):this.predicate=e}},x_=class n{queries;constructor(e=[]){this.queries=e}elementStart(e,t){for(let r=0;r<this.queries.length;r++)this.queries[r].elementStart(e,t)}elementEnd(e){for(let t=0;t<this.queries.length;t++)this.queries[t].elementEnd(e)}embeddedTView(e){let t=null;for(let r=0;r<this.length;r++){let i=t!==null?t.length:0,o=this.getByIndex(r).embeddedTView(e,i);o&&(o.indexInDeclarationView=r,t!==null?t.push(o):t=[o])}return t!==null?new n(t):null}template(e,t){for(let r=0;r<this.queries.length;r++)this.queries[r].template(e,t)}getByIndex(e){return this.queries[e]}get length(){return this.queries.length}track(e){this.queries.push(e)}},M_=class n{metadata;matches=null;indexInDeclarationView=-1;crossesNgTemplate=!1;_declarationNodeIndex;_appliesToNextNode=!0;constructor(e,t=-1){this.metadata=e,this._declarationNodeIndex=t}elementStart(e,t){this.isApplyingToNode(t)&&this.matchTNode(e,t)}elementEnd(e){this._declarationNodeIndex===e.index&&(this._appliesToNextNode=!1)}template(e,t){this.elementStart(e,t)}embeddedTView(e,t){return this.isApplyingToNode(e)?(this.crossesNgTemplate=!0,this.addMatch(-e.index,t),new n(this.metadata)):null}isApplyingToNode(e){if(this._appliesToNextNode&&(this.metadata.flags&1)!==1){let t=this._declarationNodeIndex,r=e.parent;for(;r!==null&&r.type&8&&r.index!==t;)r=r.parent;return t===(r!==null?r.index:-1)}return this._appliesToNextNode}matchTNode(e,t){let r=this.metadata.predicate;if(Array.isArray(r))for(let i=0;i<r.length;i++){let o=r[i];this.matchTNodeWithReadOption(e,t,Z3(t,o)),this.matchTNodeWithReadOption(e,t,hh(t,e,o,!1,!1))}else r===vo?t.type&4&&this.matchTNodeWithReadOption(e,t,-1):this.matchTNodeWithReadOption(e,t,hh(t,e,r,!1,!1))}matchTNodeWithReadOption(e,t,r){if(r!==null){let i=this.metadata.read;if(i!==null)if(i===rn||i===Pi||i===vo&&t.type&4)this.addMatch(t.index,-2);else{let o=hh(t,e,i,!1,!1);o!==null&&this.addMatch(t.index,o)}else this.addMatch(t.index,r)}}addMatch(e,t){this.matches===null?this.matches=[e,t]:this.matches.push(e,t)}};function Z3(n,e){let t=n.localNames;if(t!==null){for(let r=0;r<t.length;r+=2)if(t[r]===e)return t[r+1]}return null}function X3(n,e){return n.type&11?Xa(n,e):n.type&4?zh(n,e):null}function J3(n,e,t,r){return t===-1?X3(e,n):t===-2?e4(n,e,r):Xl(n,n[ue],t,e)}function e4(n,e,t){if(t===rn)return Xa(e,n);if(t===vo)return zh(e,n);if(t===Pi)return Cx(e,n)}function Ix(n,e,t,r){let i=e[Vr].queries[r];if(i.matches===null){let o=n.data,s=t.matches,a=[];for(let l=0;s!==null&&l<s.length;l+=2){let u=s[l];if(u<0)a.push(null);else{let f=o[u];a.push(J3(e,f,s[l+1],t.metadata.read))}}i.matches=a}return i.matches}function P_(n,e,t,r){let i=n.queries.getByIndex(t),o=i.matches;if(o!==null){let s=Ix(n,e,i,t);for(let a=0;a<o.length;a+=2){let l=o[a];if(l>0)r.push(s[a/2]);else{let u=o[a+1],f=e[-l];for(let m=fn;m<f.length;m++){let _=f[m];_[uo]===_[Ft]&&P_(_[ue],_,u,r)}if(f[ps]!==null){let m=f[ps];for(let _=0;_<m.length;_++){let E=m[_];P_(E[ue],E,u,r)}}}}}return r}function t4(n,e){return n[Vr].queries[e].queryList}function Sx(n,e,t){let r=new wh((t&4)===4);return rT(n,e,r,r.destroy),(e[Vr]??=new D_).queries.push(new T_(r))-1}function n4(n,e,t){let r=wt();return r.firstCreatePass&&(Tx(r,new Dh(n,e,t),-1),(e&2)===2&&(r.staticViewQueries=!0)),Sx(r,Se(),e)}function r4(n,e,t,r){let i=wt();if(i.firstCreatePass){let o=Et();Tx(i,new Dh(e,t,r),o.index),o4(i,n),(t&2)===2&&(i.staticContentQueries=!0)}return Sx(i,Se(),t)}function i4(n){return n.split(",").map(e=>e.trim())}function Tx(n,e,t){n.queries===null&&(n.queries=new x_),n.queries.track(new M_(e,t))}function o4(n,e){let t=n.contentQueries||(n.contentQueries=[]),r=t.length?t[t.length-1]:-1;e!==r&&t.push(n.queries.length-1,e)}function gy(n,e){return n.queries.getByIndex(e)}function s4(n,e){let t=n[ue],r=gy(t,e);return r.crossesNgTemplate?P_(t,n,e,[]):Ix(t,n,r,e)}var YT=new Set;function Ss(n){YT.has(n)||(YT.add(n),performance?.mark?.("mark_feature_usage",{detail:{feature:n}}))}var Es=class{},Gh=class{};var xh=class extends Es{ngModuleType;_parent;_bootstrapComponents=[];_r3Injector;instance;destroyCbs=[];componentFactoryResolver=new Sh(this);constructor(e,t,r,i=!0){super(),this.ngModuleType=e,this._parent=t;let o=_0(e);this._bootstrapComponents=BD(o.bootstrap),this._r3Injector=G0(e,t,[{provide:Es,useValue:this},{provide:Is,useValue:this.componentFactoryResolver},...r],Ci(e),new Set(["environment"])),i&&this.resolveInjectorInitializers()}resolveInjectorInitializers(){this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(this.ngModuleType)}get injector(){return this._r3Injector}destroy(){let e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(t=>t()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}},Mh=class extends Gh{moduleType;constructor(e){super(),this.moduleType=e}create(e){return new xh(this.moduleType,e,[])}};var eu=class extends Es{injector;componentFactoryResolver=new Sh(this);instance=null;constructor(e){super();let t=new as([...e.providers,{provide:Es,useValue:this},{provide:Is,useValue:this.componentFactoryResolver}],e.parent||Ul(),e.debugName,new Set(["environment"]));this.injector=t,e.runEnvironmentInitializers&&t.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(e){this.injector.onDestroy(e)}};function ec(n,e,t=null){return new eu({providers:n,parent:e,debugName:t,runEnvironmentInitializers:!0}).injector}var a4=(()=>{class n{_injector;cachedInjectors=new Map;constructor(t){this._injector=t}getOrCreateStandaloneInjector(t){if(!t.standalone)return null;if(!this.cachedInjectors.has(t)){let r=b0(!1,t.type),i=r.length>0?ec([r],this._injector,`Standalone[${t.type.name}]`):null;this.cachedInjectors.set(t,i)}return this.cachedInjectors.get(t)}ngOnDestroy(){try{for(let t of this.cachedInjectors.values())t!==null&&t.destroy()}finally{this.cachedInjectors.clear()}}static \u0275prov=Q({token:n,providedIn:"environment",factory:()=>new n(re(ht))})}return n})();function Xe(n){return Za(()=>{let e=Dx(n),t=ne(H({},e),{decls:n.decls,vars:n.vars,template:n.template,consts:n.consts||null,ngContentSelectors:n.ngContentSelectors,onPush:n.changeDetection===V_.OnPush,directiveDefs:null,pipeDefs:null,dependencies:e.standalone&&n.dependencies||null,getStandaloneInjector:e.standalone?i=>i.get(a4).getOrCreateStandaloneInjector(t):null,getExternalStyles:null,signals:n.signals??!1,data:n.data||{},encapsulation:n.encapsulation||Di.Emulated,styles:n.styles||Mn,_:null,schemas:n.schemas||null,tView:null,id:""});e.standalone&&Ss("NgStandalone"),xx(t);let r=n.dependencies;return t.directiveDefs=QT(r,c4),t.pipeDefs=QT(r,zS),t.id=d4(t),t})}function c4(n){return Ti(n)||y0(n)}function Er(n){return Za(()=>({type:n.type,bootstrap:n.bootstrap||Mn,declarations:n.declarations||Mn,imports:n.imports||Mn,exports:n.exports||Mn,transitiveCompileScopes:null,schemas:n.schemas||null,id:n.id||null}))}function l4(n,e){if(n==null)return lo;let t={};for(let r in n)if(n.hasOwnProperty(r)){let i=n[r],o,s,a,l;Array.isArray(i)?(a=i[0],o=i[1],s=i[2]??o,l=i[3]||null):(o=i,s=i,a=jh.None,l=null),t[o]=[r,a,l],e[o]=s}return t}function u4(n){if(n==null)return lo;let e={};for(let t in n)n.hasOwnProperty(t)&&(e[n[t]]=t);return e}function Ye(n){return Za(()=>{let e=Dx(n);return xx(e),e})}function my(n){return{type:n.type,name:n.name,factory:null,pure:n.pure!==!1,standalone:n.standalone??!0,onDestroy:n.type.prototype.ngOnDestroy||null}}function Dx(n){let e={};return{type:n.type,providersResolver:null,factory:null,hostBindings:n.hostBindings||null,hostVars:n.hostVars||0,hostAttrs:n.hostAttrs||null,contentQueries:n.contentQueries||null,declaredInputs:e,inputConfig:n.inputs||lo,exportAs:n.exportAs||null,standalone:n.standalone??!0,signals:n.signals===!0,selectors:n.selectors||Mn,viewQuery:n.viewQuery||null,features:n.features||null,setInput:null,resolveHostDirectives:null,hostDirectives:null,inputs:l4(n.inputs,e),outputs:u4(n.outputs),debugInfo:null}}function xx(n){n.features?.forEach(e=>e(n))}function QT(n,e){return n?()=>{let t=typeof n=="function"?n():n,r=[];for(let i of t){let o=e(i);o!==null&&r.push(o)}return r}:null}function d4(n){let e=0,t=typeof n.consts=="function"?"":n.consts,r=[n.selectors,n.ngContentSelectors,n.hostVars,n.hostAttrs,t,n.vars,n.decls,n.encapsulation,n.standalone,n.signals,n.exportAs,JSON.stringify(n.inputs),JSON.stringify(n.outputs),Object.getOwnPropertyNames(n.type.prototype),!!n.contentQueries,!!n.viewQuery];for(let o of r.join("|"))e=Math.imul(31,e)+o.charCodeAt(0)<<0;return e+=2147483648,"c"+e}function f4(n){return Object.getPrototypeOf(n.prototype).constructor}function An(n){let e=f4(n.type),t=!0,r=[n];for(;e;){let i;if(jr(n))i=e.\u0275cmp||e.\u0275dir;else{if(e.\u0275cmp)throw new Z(903,!1);i=e.\u0275dir}if(i){if(t){r.push(i);let s=n;s.inputs=i_(n.inputs),s.declaredInputs=i_(n.declaredInputs),s.outputs=i_(n.outputs);let a=i.hostBindings;a&&v4(n,a);let l=i.viewQuery,u=i.contentQueries;if(l&&g4(n,l),u&&m4(n,u),h4(n,i),NS(n.outputs,i.outputs),jr(i)&&i.data.animation){let f=n.data;f.animation=(f.animation||[]).concat(i.data.animation)}}let o=i.features;if(o)for(let s=0;s<o.length;s++){let a=o[s];a&&a.ngInherit&&a(n),a===An&&(t=!1)}}e=Object.getPrototypeOf(e)}p4(r)}function h4(n,e){for(let t in e.inputs){if(!e.inputs.hasOwnProperty(t)||n.inputs.hasOwnProperty(t))continue;let r=e.inputs[t];r!==void 0&&(n.inputs[t]=r,n.declaredInputs[t]=e.declaredInputs[t])}}function p4(n){let e=0,t=null;for(let r=n.length-1;r>=0;r--){let i=n[r];i.hostVars=e+=i.hostVars,i.hostAttrs=Ka(i.hostAttrs,t=Ka(t,i.hostAttrs))}}function i_(n){return n===lo?{}:n===Mn?[]:n}function g4(n,e){let t=n.viewQuery;t?n.viewQuery=(r,i)=>{e(r,i),t(r,i)}:n.viewQuery=e}function m4(n,e){let t=n.contentQueries;t?n.contentQueries=(r,i,o)=>{e(r,i,o),t(r,i,o)}:n.contentQueries=e}function v4(n,e){let t=n.hostBindings;t?n.hostBindings=(r,i)=>{e(r,i),t(r,i)}:n.hostBindings=e}function _4(n,e,t,r,i,o,s,a){if(t.firstCreatePass){n.mergedAttrs=Ka(n.mergedAttrs,n.attrs);let f=n.tView=Q_(2,n,i,o,s,t.directiveRegistry,t.pipeRegistry,null,t.schemas,t.consts,null);t.queries!==null&&(t.queries.template(t,n),f.queries=t.queries.embeddedTView(n))}a&&(n.flags|=a),Ha(n,!1);let l=b4(t,e,n,r);rh()&&ty(t,e,l,n),Ya(l,e);let u=ux(l,e,l,n);e[r+Lt]=u,X_(e,u),Y3(u,n,e)}function y4(n,e,t,r,i,o,s,a,l,u,f){let m=t+Lt,_;return e.firstCreatePass?(_=qh(e,m,4,s||null,a||null),Zf()&&px(e,n,_,ms(e.consts,u),ry),dD(e,_)):_=e.data[m],_4(_,n,e,t,r,i,o,l),ja(_)&&$h(e,n,_),u!=null&&Hh(n,_,f),_}function B(n,e,t,r,i,o,s,a){let l=Se(),u=wt(),f=ms(u.consts,o);return y4(l,u,n,e,t,r,i,f,void 0,s,a),B}var b4=w4;function w4(n,e,t,r){return Gl(!0),e[Ze].createComment("")}var Kh=(function(n){return n[n.CHANGE_DETECTION=0]="CHANGE_DETECTION",n[n.AFTER_NEXT_RENDER=1]="AFTER_NEXT_RENDER",n})(Kh||{}),Ts=new X(""),Mx=!1,A_=class extends We{__isAsync;destroyRef=void 0;pendingTasks=void 0;constructor(e=!1){super(),this.__isAsync=e,QS()&&(this.destroyRef=k(yr,{optional:!0})??void 0,this.pendingTasks=k(Br,{optional:!0})??void 0)}emit(e){let t=Ee(null);try{super.next(e)}finally{Ee(t)}}subscribe(e,t,r){let i=e,o=t||(()=>null),s=r;if(e&&typeof e=="object"){let l=e;i=l.next?.bind(l),o=l.error?.bind(l),s=l.complete?.bind(l)}this.__isAsync&&(o=this.wrapInTimeout(o),i&&(i=this.wrapInTimeout(i)),s&&(s=this.wrapInTimeout(s)));let a=super.subscribe({next:i,error:o,complete:s});return e instanceof lt&&e.add(a),a}wrapInTimeout(e){return t=>{let r=this.pendingTasks?.add();setTimeout(()=>{try{e(t)}finally{r!==void 0&&this.pendingTasks?.remove(r)}})}}},et=A_;function Px(n){let e,t;function r(){n=Yl;try{t!==void 0&&typeof cancelAnimationFrame=="function"&&cancelAnimationFrame(t),e!==void 0&&clearTimeout(e)}catch{}}return e=setTimeout(()=>{n(),r()}),typeof requestAnimationFrame=="function"&&(t=requestAnimationFrame(()=>{n(),r()})),()=>r()}function ZT(n){return queueMicrotask(()=>n()),()=>{n=Yl}}var vy="isAngularZone",Ph=vy+"_ID",E4=0,xe=class n{hasPendingMacrotasks=!1;hasPendingMicrotasks=!1;isStable=!0;onUnstable=new et(!1);onMicrotaskEmpty=new et(!1);onStable=new et(!1);onError=new et(!1);constructor(e){let{enableLongStackTrace:t=!1,shouldCoalesceEventChangeDetection:r=!1,shouldCoalesceRunChangeDetection:i=!1,scheduleInRootZone:o=Mx}=e;if(typeof Zone>"u")throw new Z(908,!1);Zone.assertZonePatched();let s=this;s._nesting=0,s._outer=s._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(s._inner=s._inner.fork(new Zone.TaskTrackingZoneSpec)),t&&Zone.longStackTraceZoneSpec&&(s._inner=s._inner.fork(Zone.longStackTraceZoneSpec)),s.shouldCoalesceEventChangeDetection=!i&&r,s.shouldCoalesceRunChangeDetection=i,s.callbackScheduled=!1,s.scheduleInRootZone=o,S4(s)}static isInAngularZone(){return typeof Zone<"u"&&Zone.current.get(vy)===!0}static assertInAngularZone(){if(!n.isInAngularZone())throw new Z(909,!1)}static assertNotInAngularZone(){if(n.isInAngularZone())throw new Z(909,!1)}run(e,t,r){return this._inner.run(e,t,r)}runTask(e,t,r,i){let o=this._inner,s=o.scheduleEventTask("NgZoneEvent: "+i,e,C4,Yl,Yl);try{return o.runTask(s,t,r)}finally{o.cancelTask(s)}}runGuarded(e,t,r){return this._inner.runGuarded(e,t,r)}runOutsideAngular(e){return this._outer.run(e)}},C4={};function _y(n){if(n._nesting==0&&!n.hasPendingMicrotasks&&!n.isStable)try{n._nesting++,n.onMicrotaskEmpty.emit(null)}finally{if(n._nesting--,!n.hasPendingMicrotasks)try{n.runOutsideAngular(()=>n.onStable.emit(null))}finally{n.isStable=!0}}}function I4(n){if(n.isCheckStableRunning||n.callbackScheduled)return;n.callbackScheduled=!0;function e(){Px(()=>{n.callbackScheduled=!1,k_(n),n.isCheckStableRunning=!0,_y(n),n.isCheckStableRunning=!1})}n.scheduleInRootZone?Zone.root.run(()=>{e()}):n._outer.run(()=>{e()}),k_(n)}function S4(n){let e=()=>{I4(n)},t=E4++;n._inner=n._inner.fork({name:"angular",properties:{[vy]:!0,[Ph]:t,[Ph+t]:!0},onInvokeTask:(r,i,o,s,a,l)=>{if(T4(l))return r.invokeTask(o,s,a,l);try{return XT(n),r.invokeTask(o,s,a,l)}finally{(n.shouldCoalesceEventChangeDetection&&s.type==="eventTask"||n.shouldCoalesceRunChangeDetection)&&e(),JT(n)}},onInvoke:(r,i,o,s,a,l,u)=>{try{return XT(n),r.invoke(o,s,a,l,u)}finally{n.shouldCoalesceRunChangeDetection&&!n.callbackScheduled&&!D4(l)&&e(),JT(n)}},onHasTask:(r,i,o,s)=>{r.hasTask(o,s),i===o&&(s.change=="microTask"?(n._hasPendingMicrotasks=s.microTask,k_(n),_y(n)):s.change=="macroTask"&&(n.hasPendingMacrotasks=s.macroTask))},onHandleError:(r,i,o,s)=>(r.handleError(o,s),n.runOutsideAngular(()=>n.onError.emit(s)),!1)})}function k_(n){n._hasPendingMicrotasks||(n.shouldCoalesceEventChangeDetection||n.shouldCoalesceRunChangeDetection)&&n.callbackScheduled===!0?n.hasPendingMicrotasks=!0:n.hasPendingMicrotasks=!1}function XT(n){n._nesting++,n.isStable&&(n.isStable=!1,n.onUnstable.emit(null))}function JT(n){n._nesting--,_y(n)}var Ah=class{hasPendingMicrotasks=!1;hasPendingMacrotasks=!1;isStable=!0;onUnstable=new et;onMicrotaskEmpty=new et;onStable=new et;onError=new et;run(e,t,r){return e.apply(t,r)}runGuarded(e,t,r){return e.apply(t,r)}runOutsideAngular(e){return e()}runTask(e,t,r,i){return e.apply(t,r)}};function T4(n){return Ax(n,"__ignore_ng_zone__")}function D4(n){return Ax(n,"__scheduler_tick__")}function Ax(n,e){return!Array.isArray(n)||n.length!==1?!1:n[0]?.data?.[e]===!0}var yy=(()=>{class n{impl=null;execute(){this.impl?.execute()}static \u0275prov=Q({token:n,providedIn:"root",factory:()=>new n})}return n})(),kx=[0,1,2,3],Ox=(()=>{class n{ngZone=k(xe);scheduler=k(Ii);errorHandler=k(pr,{optional:!0});sequences=new Set;deferredRegistrations=new Set;executing=!1;constructor(){k(Ts,{optional:!0})}execute(){let t=this.sequences.size>0;t&&He(16),this.executing=!0;for(let r of kx)for(let i of this.sequences)if(!(i.erroredOrDestroyed||!i.hooks[r]))try{i.pipelinedValue=this.ngZone.runOutsideAngular(()=>this.maybeTrace(()=>{let o=i.hooks[r];return o(i.pipelinedValue)},i.snapshot))}catch(o){i.erroredOrDestroyed=!0,this.errorHandler?.handleError(o)}this.executing=!1;for(let r of this.sequences)r.afterRun(),r.once&&(this.sequences.delete(r),r.destroy());for(let r of this.deferredRegistrations)this.sequences.add(r);this.deferredRegistrations.size>0&&this.scheduler.notify(7),this.deferredRegistrations.clear(),t&&He(17)}register(t){let{view:r}=t;r!==void 0?((r[hs]??=[]).push(t),$a(r),r[pe]|=8192):this.executing?this.deferredRegistrations.add(t):this.addSequence(t)}addSequence(t){this.sequences.add(t),this.scheduler.notify(7)}unregister(t){this.executing&&this.sequences.has(t)?(t.erroredOrDestroyed=!0,t.pipelinedValue=void 0,t.once=!0):(this.sequences.delete(t),this.deferredRegistrations.delete(t))}maybeTrace(t,r){return r?r.run(Kh.AFTER_NEXT_RENDER,t):t()}static \u0275prov=Q({token:n,providedIn:"root",factory:()=>new n})}return n})(),kh=class{impl;hooks;view;once;snapshot;erroredOrDestroyed=!1;pipelinedValue=void 0;unregisterOnDestroy;constructor(e,t,r,i,o,s=null){this.impl=e,this.hooks=t,this.view=r,this.once=i,this.snapshot=s,this.unregisterOnDestroy=o?.onDestroy(()=>this.destroy())}afterRun(){this.erroredOrDestroyed=!1,this.pipelinedValue=void 0,this.snapshot?.dispose(),this.snapshot=null}destroy(){this.impl.unregister(this),this.unregisterOnDestroy?.();let e=this.view?.[hs];e&&(this.view[hs]=e.filter(t=>t!==this))}};function ou(n,e){let t=e?.injector??k(Ke);return Ss("NgAfterNextRender"),M4(n,t,e,!0)}function x4(n){return n instanceof Function?[void 0,void 0,n,void 0]:[n.earlyRead,n.write,n.mixedReadWrite,n.read]}function M4(n,e,t,r){let i=e.get(yy);i.impl??=e.get(Ox);let o=e.get(Ts,null,{optional:!0}),s=t?.manualCleanup!==!0?e.get(yr):null,a=e.get(oh,null,{optional:!0}),l=new kh(i.impl,x4(n),a?.view,r,s,o?.snapshot(null));return i.impl.register(l),l}var by=(()=>{class n{log(t){console.log(t)}warn(t){console.warn(t)}static \u0275fac=function(r){return new(r||n)};static \u0275prov=Q({token:n,factory:n.\u0275fac,providedIn:"platform"})}return n})();var wy=new X("");function _o(n){return!!n&&typeof n.then=="function"}function Ey(n){return!!n&&typeof n.subscribe=="function"}var Cy=new X("");function Yh(n){return tn([{provide:Cy,multi:!0,useValue:n}])}var Iy=(()=>{class n{resolve;reject;initialized=!1;done=!1;donePromise=new Promise((t,r)=>{this.resolve=t,this.reject=r});appInits=k(Cy,{optional:!0})??[];injector=k(Ke);constructor(){}runInitializers(){if(this.initialized)return;let t=[];for(let i of this.appInits){let o=bt(this.injector,i);if(_o(o))t.push(o);else if(Ey(o)){let s=new Promise((a,l)=>{o.subscribe({complete:a,error:l})});t.push(s)}}let r=()=>{this.done=!0,this.resolve()};Promise.all(t).then(()=>{r()}).catch(i=>{this.reject(i)}),t.length===0&&r(),this.initialized=!0}static \u0275fac=function(r){return new(r||n)};static \u0275prov=Q({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),su=new X("");function Rx(){Cv(()=>{let n="";throw new Z(600,n)})}function Nx(n){return n.isBoundToModule}var P4=10;var Ai=(()=>{class n{_runningTick=!1;_destroyed=!1;_destroyListeners=[];_views=[];internalErrorHandler=k(hn);afterRenderManager=k(yy);zonelessEnabled=k(Kl);rootEffectScheduler=k(J0);dirtyFlags=0;tracingSnapshot=null;allTestViews=new Set;autoDetectTestViews=new Set;includeAllTestViews=!1;afterTick=new We;get allViews(){return[...(this.includeAllTestViews?this.allTestViews:this.autoDetectTestViews).keys(),...this._views]}get destroyed(){return this._destroyed}componentTypes=[];components=[];internalPendingTask=k(Br);get isStable(){return this.internalPendingTask.hasPendingTasksObservable.pipe(Ce(t=>!t))}constructor(){k(Ts,{optional:!0})}whenStable(){let t;return new Promise(r=>{t=this.isStable.subscribe({next:i=>{i&&r()}})}).finally(()=>{t.unsubscribe()})}_injector=k(ht);_rendererFactory=null;get injector(){return this._injector}bootstrap(t,r){return this.bootstrapImpl(t,r)}bootstrapImpl(t,r,i=Ke.NULL){return this._injector.get(xe).run(()=>{He(10);let s=t instanceof Wh;if(!this._injector.get(Iy).done){let x="";throw new Z(405,x)}let l;s?l=t:l=this._injector.get(Is).resolveComponentFactory(t),this.componentTypes.push(l.componentType);let u=Nx(l)?void 0:this._injector.get(Es),f=r||l.selector,m=l.create(i,[],f,u),_=m.location.nativeElement,E=m.injector.get(wy,null);return E?.registerApplication(_),m.onDestroy(()=>{this.detachView(m.hostView),Zl(this.components,m),E?.unregisterApplication(_)}),this._loadComponent(m),He(11,m),m})}tick(){this.zonelessEnabled||(this.dirtyFlags|=1),this._tick()}_tick(){He(12),this.tracingSnapshot!==null?this.tracingSnapshot.run(Kh.CHANGE_DETECTION,this.tickImpl):this.tickImpl()}tickImpl=()=>{if(this._runningTick)throw new Z(101,!1);let t=Ee(null);try{this._runningTick=!0,this.synchronize()}finally{this._runningTick=!1,this.tracingSnapshot?.dispose(),this.tracingSnapshot=null,Ee(t),this.afterTick.next(),He(13)}};synchronize(){this._rendererFactory===null&&!this._injector.destroyed&&(this._rendererFactory=this._injector.get(bs,null,{optional:!0}));let t=0;for(;this.dirtyFlags!==0&&t++<P4;)He(14),this.synchronizeOnce(),He(15)}synchronizeOnce(){this.dirtyFlags&16&&(this.dirtyFlags&=-17,this.rootEffectScheduler.flush());let t=!1;if(this.dirtyFlags&7){let r=!!(this.dirtyFlags&1);this.dirtyFlags&=-8,this.dirtyFlags|=8;for(let{_lView:i}of this.allViews){if(!r&&!zl(i))continue;let o=r&&!this.zonelessEnabled?0:1;cy(i,o),t=!0}if(this.dirtyFlags&=-5,this.syncDirtyFlagsWithViews(),this.dirtyFlags&23)return}t||(this._rendererFactory?.begin?.(),this._rendererFactory?.end?.()),this.dirtyFlags&8&&(this.dirtyFlags&=-9,this.afterRenderManager.execute()),this.syncDirtyFlagsWithViews()}syncDirtyFlagsWithViews(){if(this.allViews.some(({_lView:t})=>zl(t))){this.dirtyFlags|=2;return}else this.dirtyFlags&=-8}attachView(t){let r=t;this._views.push(r),r.attachToAppRef(this)}detachView(t){let r=t;Zl(this._views,r),r.detachFromAppRef()}_loadComponent(t){this.attachView(t.hostView);try{this.tick()}catch(i){this.internalErrorHandler(i)}this.components.push(t),this._injector.get(su,[]).forEach(i=>i(t))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(t=>t()),this._views.slice().forEach(t=>t.destroy())}finally{this._destroyed=!0,this._views=[],this._destroyListeners=[]}}onDestroy(t){return this._destroyListeners.push(t),()=>Zl(this._destroyListeners,t)}destroy(){if(this._destroyed)throw new Z(406,!1);let t=this._injector;t.destroy&&!t.destroyed&&t.destroy()}get viewCount(){return this._views.length}static \u0275fac=function(r){return new(r||n)};static \u0275prov=Q({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function Zl(n,e){let t=n.indexOf(e);t>-1&&n.splice(t,1)}function pn(n,e,t,r){let i=Se(),o=za();if(xi(i,o,e)){let s=wt(),a=Wl();YV(a,i,n,e,t,r)}return pn}var Sy=new X("",{providedIn:"root",factory:()=>!1}),Ty=new X("",{providedIn:"root",factory:()=>A4}),A4=4e3;var Qre=typeof document<"u"&&typeof document?.documentElement?.getAnimations=="function";function C(n,e,t){let r=Se(),i=za();if(xi(r,i,e)){let o=wt(),s=Wl();JD(s,r,n,e,r[Ze],t)}return C}function eD(n,e,t,r,i){sy(e,n,t,i?"class":"style",r)}function h(n,e,t,r){let i=Se(),o=i[ue],s=n+Lt,a=o.firstCreatePass?dy(s,i,2,e,ry,Zf(),t,r):o.data[s];if(iy(a,i,n,e,Fx),ja(a)){let l=i[ue];$h(l,i,a),H_(l,a,i)}return r!=null&&Hh(i,a),h}function p(){let n=wt(),e=Et(),t=oy(e);return n.firstCreatePass&&fy(n,t),F0(t)&&L0(),N0(),t.classesWithoutHost!=null&&pL(t)&&eD(n,t,Se(),t.classesWithoutHost,!0),t.stylesWithoutHost!=null&&gL(t)&&eD(n,t,Se(),t.stylesWithoutHost,!1),p}function q(n,e,t,r){return h(n,e,t,r),p(),q}function tt(n,e,t,r){let i=Se(),o=i[ue],s=n+Lt,a=o.firstCreatePass?O3(s,o,2,e,t,r):o.data[s];return iy(a,i,n,e,Fx),r!=null&&Hh(i,a),tt}function gt(){let n=Et(),e=oy(n);return F0(e)&&L0(),N0(),gt}function tc(n,e,t,r){return tt(n,e,t,r),gt(),tc}var Fx=(n,e,t,r,i)=>(Gl(!0),HD(e[Ze],r,bT()));function Qh(n,e,t){let r=Se(),i=r[ue],o=n+Lt,s=i.firstCreatePass?dy(o,r,8,"ng-container",ry,Zf(),e,t):i.data[o];if(iy(s,r,n,"ng-container",k4),ja(s)){let a=r[ue];$h(a,r,s),H_(a,s,r)}return t!=null&&Hh(r,s),Qh}function Zh(){let n=wt(),e=Et(),t=oy(e);return n.firstCreatePass&&fy(n,t),Zh}var k4=(n,e,t,r,i)=>(Gl(!0),bV(e[Ze],""));function te(){return Se()}function nc(n,e,t){let r=Se(),i=za();if(xi(r,i,e)){let o=wt(),s=Wl();ex(s,r,n,e,r[Ze],t)}return nc}var vs=void 0;function O4(n){let e=Math.floor(Math.abs(n)),t=n.toString().replace(/^[^.]*\.?/,"").length;return e===1&&t===0?1:5}var R4=["en",[["a","p"],["AM","PM"],vs],[["AM","PM"],vs,vs],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],vs,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],vs,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",vs,"{1} 'at' {0}",vs],[".",",",";","%","+","-","E","\xD7","\u2030","\u221E","NaN",":"],["#,##0.###","#,##0%","\xA4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",O4],o_={};function Xh(n){let e=N4(n),t=tD(e);if(t)return t;let r=e.split("-")[0];if(t=tD(r),t)return t;if(r==="en")return R4;throw new Z(701,!1)}function tD(n){return n in o_||(o_[n]=gr.ng&&gr.ng.common&&gr.ng.common.locales&&gr.ng.common.locales[n]),o_[n]}var Ds=(function(n){return n[n.LocaleId=0]="LocaleId",n[n.DayPeriodsFormat=1]="DayPeriodsFormat",n[n.DayPeriodsStandalone=2]="DayPeriodsStandalone",n[n.DaysFormat=3]="DaysFormat",n[n.DaysStandalone=4]="DaysStandalone",n[n.MonthsFormat=5]="MonthsFormat",n[n.MonthsStandalone=6]="MonthsStandalone",n[n.Eras=7]="Eras",n[n.FirstDayOfWeek=8]="FirstDayOfWeek",n[n.WeekendRange=9]="WeekendRange",n[n.DateFormat=10]="DateFormat",n[n.TimeFormat=11]="TimeFormat",n[n.DateTimeFormat=12]="DateTimeFormat",n[n.NumberSymbols=13]="NumberSymbols",n[n.NumberFormats=14]="NumberFormats",n[n.CurrencyCode=15]="CurrencyCode",n[n.CurrencySymbol=16]="CurrencySymbol",n[n.CurrencyName=17]="CurrencyName",n[n.Currencies=18]="Currencies",n[n.Directionality=19]="Directionality",n[n.PluralCase=20]="PluralCase",n[n.ExtraData=21]="ExtraData",n})(Ds||{});function N4(n){return n.toLowerCase().replace(/_/g,"-")}var au="en-US";var F4=au;function Lx(n){typeof n=="string"&&(F4=n.toLowerCase().replace(/_/g,"-"))}function $(n,e,t){let r=Se(),i=wt(),o=Et();return Vx(i,r,r[Ze],o,n,e,t),$}function rc(n,e,t){let r=Se(),i=wt(),o=Et();return(o.type&3||t)&&yx(o,i,r,t,r[Ze],n,e,gh(o,r,e)),rc}function Vx(n,e,t,r,i,o,s){let a=!0,l=null;if((r.type&3||s)&&(l??=gh(r,e,o),yx(r,n,e,s,t,i,o,l)&&(a=!1)),a){let u=r.outputs?.[i],f=r.hostDirectiveOutputs?.[i];if(f&&f.length)for(let m=0;m<f.length;m+=2){let _=f[m],E=f[m+1];l??=gh(r,e,o),WT(r,e,_,E,i,l)}if(u&&u.length)for(let m of u)l??=gh(r,e,o),WT(r,e,m,i,i,l)}}function S(n=1){return yT(n)}function Dy(n,e,t,r){r4(n,e,t,r)}function yo(n,e,t){n4(n,e,t)}function Wr(n){let e=Se(),t=wt(),r=z0();eh(r+1);let i=gy(t,r);if(n.dirty&&JS(e)===((i.metadata.flags&2)===2)){if(i.matches===null)n.reset([]);else{let o=s4(e,r);n.reset(o,xL),n.notifyOnChanges()}return!0}return!1}function Gr(){return t4(Se(),z0())}function kn(n){let e=lT();return x0(e,Lt+n)}function uh(n,e){return n<<17|e<<2}function Cs(n){return n>>17&32767}function L4(n){return(n&2)==2}function V4(n,e){return n&131071|e<<17}function O_(n){return n|2}function Qa(n){return(n&131068)>>2}function s_(n,e){return n&-131069|e<<2}function U4(n){return(n&1)===1}function R_(n){return n|1}function j4(n,e,t,r,i,o){let s=o?e.classBindings:e.styleBindings,a=Cs(s),l=Qa(s);n[r]=t;let u=!1,f;if(Array.isArray(t)){let m=t;f=m[1],(f===null||La(m,f)>0)&&(u=!0)}else f=t;if(i)if(l!==0){let _=Cs(n[a+1]);n[r+1]=uh(_,a),_!==0&&(n[_+1]=s_(n[_+1],r)),n[a+1]=V4(n[a+1],r)}else n[r+1]=uh(a,0),a!==0&&(n[a+1]=s_(n[a+1],r)),a=r;else n[r+1]=uh(l,0),a===0?a=r:n[l+1]=s_(n[l+1],r),l=r;u&&(n[r+1]=O_(n[r+1])),nD(n,f,r,!0),nD(n,f,r,!1),B4(e,f,n,r,o),s=uh(a,l),o?e.classBindings=s:e.styleBindings=s}function B4(n,e,t,r,i){let o=i?n.residualClasses:n.residualStyles;o!=null&&typeof e=="string"&&La(o,e)>=0&&(t[r+1]=R_(t[r+1]))}function nD(n,e,t,r){let i=n[t+1],o=e===null,s=r?Cs(i):Qa(i),a=!1;for(;s!==0&&(a===!1||o);){let l=n[s],u=n[s+1];$4(l,e)&&(a=!0,n[s+1]=r?R_(u):O_(u)),s=r?Cs(u):Qa(u)}a&&(n[t+1]=r?O_(i):R_(i))}function $4(n,e){return n===null||e==null||(Array.isArray(n)?n[1]:n)===e?!0:Array.isArray(n)&&typeof e=="string"?La(n,e)>=0:!1}function En(n,e,t){return Ux(n,e,t,!1),En}function he(n,e){return Ux(n,e,null,!0),he}function Ux(n,e,t,r){let i=Se(),o=wt(),s=H0(2);if(o.firstUpdatePass&&z4(o,n,s,r),e!==Xn&&xi(i,s,e)){let a=o.data[po()];Y4(o,a,i,i[Ze],n,i[s+1]=Q4(e,t),r,s)}}function H4(n,e){return e>=n.expandoStartIndex}function z4(n,e,t,r){let i=n.data;if(i[t+1]===null){let o=i[po()],s=H4(n,t);Z4(o,r)&&e===null&&!s&&(e=!1),e=q4(i,o,e,r),j4(i,o,e,t,s,r)}}function q4(n,e,t,r){let i=gT(n),o=r?e.residualClasses:e.residualStyles;if(i===null)(r?e.classBindings:e.styleBindings)===0&&(t=a_(null,n,e,t,r),t=tu(t,e.attrs,r),o=null);else{let s=e.directiveStylingLast;if(s===-1||n[s]!==i)if(t=a_(i,n,e,t,r),o===null){let l=W4(n,e,r);l!==void 0&&Array.isArray(l)&&(l=a_(null,n,e,l[1],r),l=tu(l,e.attrs,r),G4(n,e,r,l))}else o=K4(n,e,r)}return o!==void 0&&(r?e.residualClasses=o:e.residualStyles=o),t}function W4(n,e,t){let r=t?e.classBindings:e.styleBindings;if(Qa(r)!==0)return n[Cs(r)]}function G4(n,e,t,r){let i=t?e.classBindings:e.styleBindings;n[Cs(i)]=r}function K4(n,e,t){let r,i=e.directiveEnd;for(let o=1+e.directiveStylingLast;o<i;o++){let s=n[o].hostAttrs;r=tu(r,s,t)}return tu(r,e.attrs,t)}function a_(n,e,t,r,i){let o=null,s=t.directiveEnd,a=t.directiveStylingLast;for(a===-1?a=t.directiveStart:a++;a<s&&(o=e[a],r=tu(r,o.hostAttrs,i),o!==n);)a++;return n!==null&&(t.directiveStylingLast=a),r}function tu(n,e,t){let r=t?1:2,i=-1;if(e!==null)for(let o=0;o<e.length;o++){let s=e[o];typeof s=="number"?i=s:i===r&&(Array.isArray(n)||(n=n===void 0?[]:["",n]),HS(n,s,t?!0:e[++o]))}return n===void 0?null:n}function Y4(n,e,t,r,i,o,s,a){if(!(e.type&3))return;let l=n.data,u=l[a+1],f=U4(u)?rD(l,e,t,i,Qa(u),s):void 0;if(!Oh(f)){Oh(o)||L4(u)&&(o=rD(l,null,t,i,a,s));let m=D0(po(),t);jV(r,s,m,i,o)}}function rD(n,e,t,r,i,o){let s=e===null,a;for(;i>0;){let l=n[i],u=Array.isArray(l),f=u?l[1]:l,m=f===null,_=t[i+1];_===Xn&&(_=m?Mn:void 0);let E=m?Wf(_,r):f===r?_:void 0;if(u&&!Oh(E)&&(E=Wf(l,r)),Oh(E)&&(a=E,s))return a;let x=n[i+1];i=s?Cs(x):Qa(x)}if(e!==null){let l=o?e.residualClasses:e.residualStyles;l!=null&&(a=Wf(l,r))}return a}function Oh(n){return n!==void 0}function Q4(n,e){return n==null||n===""||(typeof e=="string"?n=n+e:typeof n=="object"&&(n=Ci(Ja(n)))),n}function Z4(n,e){return(n.flags&(e?8:16))!==0}function y(n,e=""){let t=Se(),r=wt(),i=n+Lt,o=r.firstCreatePass?qh(r,i,1,e,null):r.data[i],s=X4(r,t,o,e,n);t[i]=s,rh()&&ty(r,t,s,o),Ha(o,!1)}var X4=(n,e,t,r,i)=>(Gl(!0),_V(e[Ze],r));function J4(n,e,t,r=""){return xi(n,za(),t)?e+co(t)+r:Xn}function eU(n,e,t,r,i,o=""){let s=uT(),a=_x(n,s,t,i);return H0(2),a?e+co(t)+r+co(i)+o:Xn}function K(n){return ie("",n),K}function ie(n,e,t){let r=Se(),i=J4(r,n,e,t);return i!==Xn&&jx(r,po(),i),ie}function Cn(n,e,t,r,i){let o=Se(),s=eU(o,n,e,t,r,i);return s!==Xn&&jx(o,po(),s),Cn}function jx(n,e,t){let r=D0(e,n);yV(n[Ze],r,t)}function Ct(n,e,t){Q0(e)&&(e=e());let r=Se(),i=za();if(xi(r,i,e)){let o=wt(),s=Wl();JD(s,r,n,e,r[Ze],t)}return Ct}function Pt(n,e){let t=Q0(n);return t&&n.set(e),t}function It(n,e){let t=Se(),r=wt(),i=Et();return Vx(r,t,t[Ze],i,n,e),It}function tU(n,e,t){let r=wt();if(r.firstCreatePass){let i=jr(n);N_(t,r.data,r.blueprint,i,!0),N_(e,r.data,r.blueprint,i,!1)}}function N_(n,e,t,r,i){if(n=zt(n),Array.isArray(n))for(let o=0;o<n.length;o++)N_(n[o],e,t,r,i);else{let o=wt(),s=Se(),a=Et(),l=ss(n)?n:zt(n.provide),u=E0(n),f=a.providerIndexes&1048575,m=a.directiveStart,_=a.providerIndexes>>20;if(ss(n)||!n.multi){let E=new ys(u,i,ee,null),x=l_(l,e,i?f:f+_,m);x===-1?(d_(bh(a,s),o,l),c_(o,n,e.length),e.push(l),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),t.push(E),s.push(E)):(t[x]=E,s[x]=E)}else{let E=l_(l,e,f+_,m),x=l_(l,e,f,f+_),F=E>=0&&t[E],L=x>=0&&t[x];if(i&&!L||!i&&!F){d_(bh(a,s),o,l);let W=iU(i?rU:nU,t.length,i,r,u,n);!i&&L&&(t[x].providerFactory=W),c_(o,n,e.length,0),e.push(l),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),t.push(W),s.push(W)}else{let W=Bx(t[i?x:E],u,!i&&r);c_(o,n,E>-1?E:x,W)}!i&&r&&L&&t[x].componentProviders++}}}function c_(n,e,t,r){let i=ss(e),o=YS(e);if(i||o){let l=(o?zt(e.useClass):e).prototype.ngOnDestroy;if(l){let u=n.destroyHooks||(n.destroyHooks=[]);if(!i&&e.multi){let f=u.indexOf(t);f===-1?u.push(t,[r,l]):u[f+1].push(r,l)}else u.push(t,l)}}}function Bx(n,e,t){return t&&n.componentProviders++,n.multi.push(e)-1}function l_(n,e,t,r){for(let i=t;i<r;i++)if(e[i]===n)return i;return-1}function nU(n,e,t,r,i){return F_(this.multi,[])}function rU(n,e,t,r,i){let o=this.multi,s;if(this.providerFactory){let a=this.providerFactory.componentProviders,l=Xl(r,r[ue],this.providerFactory.index,i);s=l.slice(0,a),F_(o,s);for(let u=a;u<l.length;u++)s.push(l[u])}else s=[],F_(o,s);return s}function F_(n,e){for(let t=0;t<n.length;t++){let r=n[t];e.push(r())}return e}function iU(n,e,t,r,i,o){let s=new ys(n,t,ee,null);return s.multi=[],s.index=e,s.componentProviders=0,Bx(s,i,r&&!t),s}function ki(n,e=[]){return t=>{t.providersResolver=(r,i)=>tU(r,i?i(n):n,e)}}function Kr(n,e,t){let r=Xf()+n,i=Se();return i[r]===Xn?py(i,r,t?e.call(t):e()):R3(i,r)}function On(n,e,t,r){return oU(Se(),Xf(),n,e,t,r)}function $x(n,e){let t=n[e];return t===Xn?void 0:t}function oU(n,e,t,r,i,o){let s=e+t;return xi(n,s,i)?py(n,s+1,o?r.call(o,i):r(i)):$x(n,s+1)}function sU(n,e,t,r,i,o,s){let a=e+t;return _x(n,a,i,o)?py(n,a+2,s?r.call(s,i,o):r(i,o)):$x(n,a+2)}function xy(n,e){let t=wt(),r,i=n+Lt;t.firstCreatePass?(r=aU(e,t.pipeRegistry),t.data[i]=r,r.onDestroy&&(t.destroyHooks??=[]).push(i,r.onDestroy)):r=t.data[i];let o=r.factory||(r.factory=so(r.type,!0)),s,a=dn(ee);try{let l=yh(!1),u=o();return yh(l),M0(t,Se(),i,u),u}finally{dn(a)}}function aU(n,e){if(e)for(let t=e.length-1;t>=0;t--){let r=e[t];if(n===r.name)return r}}function My(n,e,t,r){let i=n+Lt,o=Se(),s=x0(o,i);return cU(o,i)?sU(o,Xf(),e,s.transform,t,r,s):s.transform(t,r)}function cU(n,e){return n[ue].data[e].pure}function Cr(n,e){return zh(n,e)}var Rh=class{ngModuleFactory;componentFactories;constructor(e,t){this.ngModuleFactory=e,this.componentFactories=t}},Py=(()=>{class n{compileModuleSync(t){return new Mh(t)}compileModuleAsync(t){return Promise.resolve(this.compileModuleSync(t))}compileModuleAndAllComponentsSync(t){let r=this.compileModuleSync(t),i=_0(t),o=BD(i.declarations).reduce((s,a)=>{let l=Ti(a);return l&&s.push(new ws(l)),s},[]);return new Rh(r,o)}compileModuleAndAllComponentsAsync(t){return Promise.resolve(this.compileModuleAndAllComponentsSync(t))}clearCache(){}clearCacheFor(t){}getModuleId(t){}static \u0275fac=function(r){return new(r||n)};static \u0275prov=Q({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var lU=(()=>{class n{zone=k(xe);changeDetectionScheduler=k(Ii);applicationRef=k(Ai);applicationErrorHandler=k(hn);_onMicrotaskEmptySubscription;initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.changeDetectionScheduler.runningTick||this.zone.run(()=>{try{this.applicationRef.dirtyFlags|=1,this.applicationRef._tick()}catch(t){this.applicationErrorHandler(t)}})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}static \u0275fac=function(r){return new(r||n)};static \u0275prov=Q({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),Hx=new X("",{factory:()=>!1});function Ay({ngZoneFactory:n,ignoreChangesOutsideZone:e,scheduleInRootZone:t}){return n??=()=>new xe(ne(H({},Oy()),{scheduleInRootZone:t})),[{provide:xe,useFactory:n},{provide:Si,multi:!0,useFactory:()=>{let r=k(lU,{optional:!0});return()=>r.initialize()}},{provide:Si,multi:!0,useFactory:()=>{let r=k(uU);return()=>{r.initialize()}}},e===!0?{provide:Z0,useValue:!0}:[],{provide:X0,useValue:t??Mx},{provide:hn,useFactory:()=>{let r=k(xe),i=k(ht),o;return s=>{r.runOutsideAngular(()=>{i.destroyed&&!o?setTimeout(()=>{throw s}):(o??=i.get(pr),o.handleError(s))})}}}]}function ky(n){let e=n?.ignoreChangesOutsideZone,t=n?.scheduleInRootZone,r=Ay({ngZoneFactory:()=>{let i=Oy(n);return i.scheduleInRootZone=t,i.shouldCoalesceEventChangeDetection&&Ss("NgZone_CoalesceEvent"),new xe(i)},ignoreChangesOutsideZone:e,scheduleInRootZone:t});return tn([{provide:Hx,useValue:!0},{provide:Kl,useValue:!1},r])}function Oy(n){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:n?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:n?.runCoalescing??!1}}var uU=(()=>{class n{subscription=new lt;initialized=!1;zone=k(xe);pendingTasks=k(Br);initialize(){if(this.initialized)return;this.initialized=!0;let t=null;!this.zone.isStable&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(t=this.pendingTasks.add()),this.zone.runOutsideAngular(()=>{this.subscription.add(this.zone.onStable.subscribe(()=>{xe.assertNotInAngularZone(),queueMicrotask(()=>{t!==null&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(this.pendingTasks.remove(t),t=null)})}))}),this.subscription.add(this.zone.onUnstable.subscribe(()=>{xe.assertInAngularZone(),t??=this.pendingTasks.add()}))}ngOnDestroy(){this.subscription.unsubscribe()}static \u0275fac=function(r){return new(r||n)};static \u0275prov=Q({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var zx=(()=>{class n{applicationErrorHandler=k(hn);appRef=k(Ai);taskService=k(Br);ngZone=k(xe);zonelessEnabled=k(Kl);tracing=k(Ts,{optional:!0});disableScheduling=k(Z0,{optional:!0})??!1;zoneIsDefined=typeof Zone<"u"&&!!Zone.root.run;schedulerTickApplyArgs=[{data:{__scheduler_tick__:!0}}];subscriptions=new lt;angularZoneId=this.zoneIsDefined?this.ngZone._inner?.get(Ph):null;scheduleInRootZone=!this.zonelessEnabled&&this.zoneIsDefined&&(k(X0,{optional:!0})??!1);cancelScheduledCallback=null;useMicrotaskScheduler=!1;runningTick=!1;pendingRenderTaskId=null;constructor(){this.subscriptions.add(this.appRef.afterTick.subscribe(()=>{this.runningTick||this.cleanup()})),this.subscriptions.add(this.ngZone.onUnstable.subscribe(()=>{this.runningTick||this.cleanup()})),this.disableScheduling||=!this.zonelessEnabled&&(this.ngZone instanceof Ah||!this.zoneIsDefined)}notify(t){if(!this.zonelessEnabled&&t===5)return;let r=!1;switch(t){case 0:{this.appRef.dirtyFlags|=2;break}case 3:case 2:case 4:case 5:case 1:{this.appRef.dirtyFlags|=4;break}case 6:{this.appRef.dirtyFlags|=2,r=!0;break}case 12:{this.appRef.dirtyFlags|=16,r=!0;break}case 13:{this.appRef.dirtyFlags|=2,r=!0;break}case 11:{r=!0;break}case 9:case 8:case 7:case 10:default:this.appRef.dirtyFlags|=8}if(this.appRef.tracingSnapshot=this.tracing?.snapshot(this.appRef.tracingSnapshot)??null,!this.shouldScheduleTick(r))return;let i=this.useMicrotaskScheduler?ZT:Px;this.pendingRenderTaskId=this.taskService.add(),this.scheduleInRootZone?this.cancelScheduledCallback=Zone.root.run(()=>i(()=>this.tick())):this.cancelScheduledCallback=this.ngZone.runOutsideAngular(()=>i(()=>this.tick()))}shouldScheduleTick(t){return!(this.disableScheduling&&!t||this.appRef.destroyed||this.pendingRenderTaskId!==null||this.runningTick||this.appRef._runningTick||!this.zonelessEnabled&&this.zoneIsDefined&&Zone.current.get(Ph+this.angularZoneId))}tick(){if(this.runningTick||this.appRef.destroyed)return;if(this.appRef.dirtyFlags===0){this.cleanup();return}!this.zonelessEnabled&&this.appRef.dirtyFlags&7&&(this.appRef.dirtyFlags|=1);let t=this.taskService.add();try{this.ngZone.run(()=>{this.runningTick=!0,this.appRef._tick()},void 0,this.schedulerTickApplyArgs)}catch(r){this.taskService.remove(t),this.applicationErrorHandler(r)}finally{this.cleanup()}this.useMicrotaskScheduler=!0,ZT(()=>{this.useMicrotaskScheduler=!1,this.taskService.remove(t)})}ngOnDestroy(){this.subscriptions.unsubscribe(),this.cleanup()}cleanup(){if(this.runningTick=!1,this.cancelScheduledCallback?.(),this.cancelScheduledCallback=null,this.pendingRenderTaskId!==null){let t=this.pendingRenderTaskId;this.pendingRenderTaskId=null,this.taskService.remove(t)}}static \u0275fac=function(r){return new(r||n)};static \u0275prov=Q({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function dU(){return typeof $localize<"u"&&$localize.locale||au}var cu=new X("",{providedIn:"root",factory:()=>k(cu,{optional:!0,skipSelf:!0})||dU()});function Vt(n){return kS(n)}function ic(n,e){return ff(n,e?.equal)}var qx=class{[Jt];constructor(e){this[Jt]=e}destroy(){this[Jt].destroy()}};var Qx=Symbol("InputSignalNode#UNSET"),CU=ne(H({},hf),{transformFn:void 0,applyValueToInputSignal(n,e){Ea(n,e)}});function Zx(n,e){let t=Object.create(CU);t.value=n,t.transformFn=e?.transform;function r(){if(ya(t),t.value===Qx){let i=null;throw new Z(-950,i)}return t.value}return r[Jt]=t,r}var ep=class{attributeName;constructor(e){this.attributeName=e}__NG_ELEMENT_ID__=()=>nu(this.attributeName);toString(){return`HostAttributeToken ${this.attributeName}`}},IU=new X("");IU.__NG_ELEMENT_ID__=n=>{let e=Et();if(e===null)throw new Z(204,!1);if(e.type&2)return e.value;if(n&8)return null;throw new Z(204,!1)};function Wx(n,e){return Zx(n,e)}function SU(n){return Zx(Qx,n)}var Xx=(Wx.required=SU,Wx);var xs=class{full;major;minor;patch;constructor(e){this.full=e;let t=e.split(".");this.major=t[0],this.minor=t[1],this.patch=t.slice(2).join(".")}},Jx=new xs("20.2.1");var Ry=new X(""),TU=new X("");function lu(n){return!n.moduleRef}function DU(n){let e=lu(n)?n.r3Injector:n.moduleRef.injector,t=e.get(xe);return t.run(()=>{lu(n)?n.r3Injector.resolveInjectorInitializers():n.moduleRef.resolveInjectorInitializers();let r=e.get(hn),i;if(t.runOutsideAngular(()=>{i=t.onError.subscribe({next:r})}),lu(n)){let o=()=>e.destroy(),s=n.platformInjector.get(Ry);s.add(o),e.onDestroy(()=>{i.unsubscribe(),s.delete(o)})}else{let o=()=>n.moduleRef.destroy(),s=n.platformInjector.get(Ry);s.add(o),n.moduleRef.onDestroy(()=>{Zl(n.allPlatformModules,n.moduleRef),i.unsubscribe(),s.delete(o)})}return MU(r,t,()=>{let o=e.get(Br),s=o.add(),a=e.get(Iy);return a.runInitializers(),a.donePromise.then(()=>{let l=e.get(cu,au);if(Lx(l||au),!e.get(TU,!0))return lu(n)?e.get(Ai):(n.allPlatformModules.push(n.moduleRef),n.moduleRef);if(lu(n)){let f=e.get(Ai);return n.rootComponent!==void 0&&f.bootstrap(n.rootComponent),f}else return xU?.(n.moduleRef,n.allPlatformModules),n.moduleRef}).finally(()=>void o.remove(s))})})}var xU;function MU(n,e,t){try{let r=t();return _o(r)?r.catch(i=>{throw e.runOutsideAngular(()=>n(i)),i}):r}catch(r){throw e.runOutsideAngular(()=>n(r)),r}}var Jh=null;function PU(n=[],e){return Ke.create({name:e,providers:[{provide:Vl,useValue:"platform"},{provide:Ry,useValue:new Set([()=>Jh=null])},...n]})}function AU(n=[]){if(Jh)return Jh;let e=PU(n);return Jh=e,Rx(),kU(e),e}function kU(n){let e=n.get(Fh,null);bt(n,()=>{e?.forEach(t=>t())})}function Uy(){return!1}var Oi=(()=>{class n{static __NG_ELEMENT_ID__=OU}return n})();function OU(n){return RU(Et(),Se(),(n&16)===16)}function RU(n,e,t){if(ho(n)&&!t){let r=Zn(n.index,e);return new mo(r,r)}else if(n.type&175){let r=e[Yn];return new mo(r,e)}return null}var Ny=class{constructor(){}supports(e){return hy(e)}create(e){return new Fy(e)}},NU=(n,e)=>e,Fy=class{length=0;collection;_linkedRecords=null;_unlinkedRecords=null;_previousItHead=null;_itHead=null;_itTail=null;_additionsHead=null;_additionsTail=null;_movesHead=null;_movesTail=null;_removalsHead=null;_removalsTail=null;_identityChangesHead=null;_identityChangesTail=null;_trackByFn;constructor(e){this._trackByFn=e||NU}forEachItem(e){let t;for(t=this._itHead;t!==null;t=t._next)e(t)}forEachOperation(e){let t=this._itHead,r=this._removalsHead,i=0,o=null;for(;t||r;){let s=!r||t&&t.currentIndex<Gx(r,i,o)?t:r,a=Gx(s,i,o),l=s.currentIndex;if(s===r)i--,r=r._nextRemoved;else if(t=t._next,s.previousIndex==null)i++;else{o||(o=[]);let u=a-i,f=l-i;if(u!=f){for(let _=0;_<u;_++){let E=_<o.length?o[_]:o[_]=0,x=E+_;f<=x&&x<u&&(o[_]=E+1)}let m=s.previousIndex;o[m]=f-u}}a!==l&&e(s,a,l)}}forEachPreviousItem(e){let t;for(t=this._previousItHead;t!==null;t=t._nextPrevious)e(t)}forEachAddedItem(e){let t;for(t=this._additionsHead;t!==null;t=t._nextAdded)e(t)}forEachMovedItem(e){let t;for(t=this._movesHead;t!==null;t=t._nextMoved)e(t)}forEachRemovedItem(e){let t;for(t=this._removalsHead;t!==null;t=t._nextRemoved)e(t)}forEachIdentityChange(e){let t;for(t=this._identityChangesHead;t!==null;t=t._nextIdentityChange)e(t)}diff(e){if(e==null&&(e=[]),!hy(e))throw new Z(900,!1);return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let t=this._itHead,r=!1,i,o,s;if(Array.isArray(e)){this.length=e.length;for(let a=0;a<this.length;a++)o=e[a],s=this._trackByFn(a,o),t===null||!Object.is(t.trackById,s)?(t=this._mismatch(t,o,s,a),r=!0):(r&&(t=this._verifyReinsertion(t,o,s,a)),Object.is(t.item,o)||this._addIdentityChange(t,o)),t=t._next}else i=0,mx(e,a=>{s=this._trackByFn(i,a),t===null||!Object.is(t.trackById,s)?(t=this._mismatch(t,a,s,i),r=!0):(r&&(t=this._verifyReinsertion(t,a,s,i)),Object.is(t.item,a)||this._addIdentityChange(t,a)),t=t._next,i++}),this.length=i;return this._truncate(t),this.collection=e,this.isDirty}get isDirty(){return this._additionsHead!==null||this._movesHead!==null||this._removalsHead!==null||this._identityChangesHead!==null}_reset(){if(this.isDirty){let e;for(e=this._previousItHead=this._itHead;e!==null;e=e._next)e._nextPrevious=e._next;for(e=this._additionsHead;e!==null;e=e._nextAdded)e.previousIndex=e.currentIndex;for(this._additionsHead=this._additionsTail=null,e=this._movesHead;e!==null;e=e._nextMoved)e.previousIndex=e.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(e,t,r,i){let o;return e===null?o=this._itTail:(o=e._prev,this._remove(e)),e=this._unlinkedRecords===null?null:this._unlinkedRecords.get(r,null),e!==null?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._reinsertAfter(e,o,i)):(e=this._linkedRecords===null?null:this._linkedRecords.get(r,i),e!==null?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._moveAfter(e,o,i)):e=this._addAfter(new Ly(t,r),o,i)),e}_verifyReinsertion(e,t,r,i){let o=this._unlinkedRecords===null?null:this._unlinkedRecords.get(r,null);return o!==null?e=this._reinsertAfter(o,e._prev,i):e.currentIndex!=i&&(e.currentIndex=i,this._addToMoves(e,i)),e}_truncate(e){for(;e!==null;){let t=e._next;this._addToRemovals(this._unlink(e)),e=t}this._unlinkedRecords!==null&&this._unlinkedRecords.clear(),this._additionsTail!==null&&(this._additionsTail._nextAdded=null),this._movesTail!==null&&(this._movesTail._nextMoved=null),this._itTail!==null&&(this._itTail._next=null),this._removalsTail!==null&&(this._removalsTail._nextRemoved=null),this._identityChangesTail!==null&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(e,t,r){this._unlinkedRecords!==null&&this._unlinkedRecords.remove(e);let i=e._prevRemoved,o=e._nextRemoved;return i===null?this._removalsHead=o:i._nextRemoved=o,o===null?this._removalsTail=i:o._prevRemoved=i,this._insertAfter(e,t,r),this._addToMoves(e,r),e}_moveAfter(e,t,r){return this._unlink(e),this._insertAfter(e,t,r),this._addToMoves(e,r),e}_addAfter(e,t,r){return this._insertAfter(e,t,r),this._additionsTail===null?this._additionsTail=this._additionsHead=e:this._additionsTail=this._additionsTail._nextAdded=e,e}_insertAfter(e,t,r){let i=t===null?this._itHead:t._next;return e._next=i,e._prev=t,i===null?this._itTail=e:i._prev=e,t===null?this._itHead=e:t._next=e,this._linkedRecords===null&&(this._linkedRecords=new tp),this._linkedRecords.put(e),e.currentIndex=r,e}_remove(e){return this._addToRemovals(this._unlink(e))}_unlink(e){this._linkedRecords!==null&&this._linkedRecords.remove(e);let t=e._prev,r=e._next;return t===null?this._itHead=r:t._next=r,r===null?this._itTail=t:r._prev=t,e}_addToMoves(e,t){return e.previousIndex===t||(this._movesTail===null?this._movesTail=this._movesHead=e:this._movesTail=this._movesTail._nextMoved=e),e}_addToRemovals(e){return this._unlinkedRecords===null&&(this._unlinkedRecords=new tp),this._unlinkedRecords.put(e),e.currentIndex=null,e._nextRemoved=null,this._removalsTail===null?(this._removalsTail=this._removalsHead=e,e._prevRemoved=null):(e._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=e),e}_addIdentityChange(e,t){return e.item=t,this._identityChangesTail===null?this._identityChangesTail=this._identityChangesHead=e:this._identityChangesTail=this._identityChangesTail._nextIdentityChange=e,e}},Ly=class{item;trackById;currentIndex=null;previousIndex=null;_nextPrevious=null;_prev=null;_next=null;_prevDup=null;_nextDup=null;_prevRemoved=null;_nextRemoved=null;_nextAdded=null;_nextMoved=null;_nextIdentityChange=null;constructor(e,t){this.item=e,this.trackById=t}},Vy=class{_head=null;_tail=null;add(e){this._head===null?(this._head=this._tail=e,e._nextDup=null,e._prevDup=null):(this._tail._nextDup=e,e._prevDup=this._tail,e._nextDup=null,this._tail=e)}get(e,t){let r;for(r=this._head;r!==null;r=r._nextDup)if((t===null||t<=r.currentIndex)&&Object.is(r.trackById,e))return r;return null}remove(e){let t=e._prevDup,r=e._nextDup;return t===null?this._head=r:t._nextDup=r,r===null?this._tail=t:r._prevDup=t,this._head===null}},tp=class{map=new Map;put(e){let t=e.trackById,r=this.map.get(t);r||(r=new Vy,this.map.set(t,r)),r.add(e)}get(e,t){let r=e,i=this.map.get(r);return i?i.get(e,t):null}remove(e){let t=e.trackById;return this.map.get(t).remove(e)&&this.map.delete(t),e}get isEmpty(){return this.map.size===0}clear(){this.map.clear()}};function Gx(n,e,t){let r=n.previousIndex;if(r===null)return r;let i=0;return t&&r<t.length&&(i=t[r]),r+e+i}function Kx(){return new jy([new Ny])}var jy=(()=>{class n{factories;static \u0275prov=Q({token:n,providedIn:"root",factory:Kx});constructor(t){this.factories=t}static create(t,r){if(r!=null){let i=r.factories.slice();t=t.concat(i)}return new n(t)}static extend(t){return{provide:n,useFactory:r=>n.create(t,r||Kx()),deps:[[n,new sD,new qt]]}}find(t){let r=this.factories.find(i=>i.supports(t));if(r!=null)return r;throw new Z(901,!1)}}return n})();function eM(n){He(8);try{let{rootComponent:e,appProviders:t,platformProviders:r}=n,i=AU(r),o=[Ay({}),{provide:Ii,useExisting:zx},ET,...t||[]],s=new eu({providers:o,parent:i,debugName:"",runEnvironmentInitializers:!1});return DU({r3Injector:s.injector,platformInjector:i,rootComponent:e})}catch(e){return Promise.reject(e)}finally{He(9)}}function bo(n){return typeof n=="boolean"?n:n!=null&&n!=="false"}function tM(n){let e=Ti(n);if(!e)return null;let t=new ws(e);return{get selector(){return t.selector},get type(){return t.componentType},get inputs(){return t.inputs},get outputs(){return t.outputs},get ngContentSelectors(){return t.ngContentSelectors},get isStandalone(){return e.standalone},get isSignal(){return e.signals}}}var iM=null;function er(){return iM}function By(n){iM??=n}var uu=class{},du=(()=>{class n{historyGo(t){throw new Error("")}static \u0275fac=function(r){return new(r||n)};static \u0275prov=Q({token:n,factory:()=>k(oM),providedIn:"platform"})}return n})(),$y=new X(""),oM=(()=>{class n extends du{_location;_history;_doc=k(pt);constructor(){super(),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return er().getBaseHref(this._doc)}onPopState(t){let r=er().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",t,!1),()=>r.removeEventListener("popstate",t)}onHashChange(t){let r=er().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",t,!1),()=>r.removeEventListener("hashchange",t)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(t){this._location.pathname=t}pushState(t,r,i){this._history.pushState(t,r,i)}replaceState(t,r,i){this._history.replaceState(t,r,i)}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}static \u0275fac=function(r){return new(r||n)};static \u0275prov=Q({token:n,factory:()=>new n,providedIn:"platform"})}return n})();function np(n,e){return n?e?n.endsWith("/")?e.startsWith("/")?n+e.slice(1):n+e:e.startsWith("/")?n+e:`${n}/${e}`:n:e}function nM(n){let e=n.search(/#|\?|$/);return n[e-1]==="/"?n.slice(0,e-1)+n.slice(e):n}function Sr(n){return n&&n[0]!=="?"?`?${n}`:n}var Tr=(()=>{class n{historyGo(t){throw new Error("")}static \u0275fac=function(r){return new(r||n)};static \u0275prov=Q({token:n,factory:()=>k(ip),providedIn:"root"})}return n})(),rp=new X(""),ip=(()=>{class n extends Tr{_platformLocation;_baseHref;_removeListenerFns=[];constructor(t,r){super(),this._platformLocation=t,this._baseHref=r??this._platformLocation.getBaseHrefFromDOM()??k(pt).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return np(this._baseHref,t)}path(t=!1){let r=this._platformLocation.pathname+Sr(this._platformLocation.search),i=this._platformLocation.hash;return i&&t?`${r}${i}`:r}pushState(t,r,i,o){let s=this.prepareExternalUrl(i+Sr(o));this._platformLocation.pushState(t,r,s)}replaceState(t,r,i,o){let s=this.prepareExternalUrl(i+Sr(o));this._platformLocation.replaceState(t,r,s)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}static \u0275fac=function(r){return new(r||n)(re(du),re(rp,8))};static \u0275prov=Q({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),wo=(()=>{class n{_subject=new We;_basePath;_locationStrategy;_urlChangeListeners=[];_urlChangeSubscription=null;constructor(t){this._locationStrategy=t;let r=this._locationStrategy.getBaseHref();this._basePath=VU(nM(rM(r))),this._locationStrategy.onPopState(i=>{this._subject.next({url:this.path(!0),pop:!0,state:i.state,type:i.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(t=!1){return this.normalize(this._locationStrategy.path(t))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(t,r=""){return this.path()==this.normalize(t+Sr(r))}normalize(t){return n.stripTrailingSlash(LU(this._basePath,rM(t)))}prepareExternalUrl(t){return t&&t[0]!=="/"&&(t="/"+t),this._locationStrategy.prepareExternalUrl(t)}go(t,r="",i=null){this._locationStrategy.pushState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+Sr(r)),i)}replaceState(t,r="",i=null){this._locationStrategy.replaceState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+Sr(r)),i)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(t=0){this._locationStrategy.historyGo?.(t)}onUrlChange(t){return this._urlChangeListeners.push(t),this._urlChangeSubscription??=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)}),()=>{let r=this._urlChangeListeners.indexOf(t);this._urlChangeListeners.splice(r,1),this._urlChangeListeners.length===0&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(t="",r){this._urlChangeListeners.forEach(i=>i(t,r))}subscribe(t,r,i){return this._subject.subscribe({next:t,error:r??void 0,complete:i??void 0})}static normalizeQueryParams=Sr;static joinWithSlash=np;static stripTrailingSlash=nM;static \u0275fac=function(r){return new(r||n)(re(Tr))};static \u0275prov=Q({token:n,factory:()=>FU(),providedIn:"root"})}return n})();function FU(){return new wo(re(Tr))}function LU(n,e){if(!n||!e.startsWith(n))return e;let t=e.substring(n.length);return t===""||["/",";","?","#"].includes(t[0])?t:e}function rM(n){return n.replace(/\/index.html$/,"")}function VU(n){if(new RegExp("^(https?:)?//").test(n)){let[,t]=n.split(/\/\/[^\/]+/);return t}return n}var Wy=(()=>{class n extends Tr{_platformLocation;_baseHref="";_removeListenerFns=[];constructor(t,r){super(),this._platformLocation=t,r!=null&&(this._baseHref=r)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}path(t=!1){let r=this._platformLocation.hash??"#";return r.length>0?r.substring(1):r}prepareExternalUrl(t){let r=np(this._baseHref,t);return r.length>0?"#"+r:r}pushState(t,r,i,o){let s=this.prepareExternalUrl(i+Sr(o))||this._platformLocation.pathname;this._platformLocation.pushState(t,r,s)}replaceState(t,r,i,o){let s=this.prepareExternalUrl(i+Sr(o))||this._platformLocation.pathname;this._platformLocation.replaceState(t,r,s)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}static \u0275fac=function(r){return new(r||n)(re(du),re(rp,8))};static \u0275prov=Q({token:n,factory:n.\u0275fac})}return n})();var Gy=(function(n){return n[n.Decimal=0]="Decimal",n[n.Percent=1]="Percent",n[n.Currency=2]="Currency",n[n.Scientific=3]="Scientific",n})(Gy||{});var Yr={Decimal:0,Group:1,List:2,PercentSign:3,PlusSign:4,MinusSign:5,Exponential:6,SuperscriptingExponent:7,PerMille:8,Infinity:9,NaN:10,TimeSeparator:11,CurrencyDecimal:12,CurrencyGroup:13};function oc(n,e){let t=Xh(n),r=t[Ds.NumberSymbols][e];if(typeof r>"u"){if(e===Yr.CurrencyDecimal)return t[Ds.NumberSymbols][Yr.Decimal];if(e===Yr.CurrencyGroup)return t[Ds.NumberSymbols][Yr.Group]}return r}function uM(n,e){return Xh(n)[Ds.NumberFormats][e]}var UU=/^(\d+)?\.((\d+)(-(\d+))?)?$/,sM=22,op=".",fu="0",jU=";",BU=",",Hy="#";function $U(n,e,t,r,i,o,s=!1){let a="",l=!1;if(!isFinite(n))a=oc(t,Yr.Infinity);else{let u=qU(n);s&&(u=zU(u));let f=e.minInt,m=e.minFrac,_=e.maxFrac;if(o){let oe=o.match(UU);if(oe===null)throw new Z(2306,!1);let de=oe[1],Fe=oe[3],Rt=oe[5];de!=null&&(f=zy(de)),Fe!=null&&(m=zy(Fe)),Rt!=null?_=zy(Rt):Fe!=null&&m>_&&(_=m)}WU(u,m,_);let E=u.digits,x=u.integerLen,F=u.exponent,L=[];for(l=E.every(oe=>!oe);x<f;x++)E.unshift(0);for(;x<0;x++)E.unshift(0);x>0?L=E.splice(x,E.length):(L=E,E=[0]);let W=[];for(E.length>=e.lgSize&&W.unshift(E.splice(-e.lgSize,E.length).join(""));E.length>e.gSize;)W.unshift(E.splice(-e.gSize,E.length).join(""));E.length&&W.unshift(E.join("")),a=W.join(oc(t,r)),L.length&&(a+=oc(t,i)+L.join("")),F&&(a+=oc(t,Yr.Exponential)+"+"+F)}return n<0&&!l?a=e.negPre+a+e.negSuf:a=e.posPre+a+e.posSuf,a}function dM(n,e,t){let r=uM(e,Gy.Decimal),i=HU(r,oc(e,Yr.MinusSign));return $U(n,i,e,Yr.Group,Yr.Decimal,t)}function HU(n,e="-"){let t={minInt:1,minFrac:0,maxFrac:0,posPre:"",posSuf:"",negPre:"",negSuf:"",gSize:0,lgSize:0},r=n.split(jU),i=r[0],o=r[1],s=i.indexOf(op)!==-1?i.split(op):[i.substring(0,i.lastIndexOf(fu)+1),i.substring(i.lastIndexOf(fu)+1)],a=s[0],l=s[1]||"";t.posPre=a.substring(0,a.indexOf(Hy));for(let f=0;f<l.length;f++){let m=l.charAt(f);m===fu?t.minFrac=t.maxFrac=f+1:m===Hy?t.maxFrac=f+1:t.posSuf+=m}let u=a.split(BU);if(t.gSize=u[1]?u[1].length:0,t.lgSize=u[2]||u[1]?(u[2]||u[1]).length:0,o){let f=i.length-t.posPre.length-t.posSuf.length,m=o.indexOf(Hy);t.negPre=o.substring(0,m).replace(/'/g,""),t.negSuf=o.slice(m+f).replace(/'/g,"")}else t.negPre=e+t.posPre,t.negSuf=t.posSuf;return t}function zU(n){if(n.digits[0]===0)return n;let e=n.digits.length-n.integerLen;return n.exponent?n.exponent+=2:(e===0?n.digits.push(0,0):e===1&&n.digits.push(0),n.integerLen+=2),n}function qU(n){let e=Math.abs(n)+"",t=0,r,i,o,s,a;for((i=e.indexOf(op))>-1&&(e=e.replace(op,"")),(o=e.search(/e/i))>0?(i<0&&(i=o),i+=+e.slice(o+1),e=e.substring(0,o)):i<0&&(i=e.length),o=0;e.charAt(o)===fu;o++);if(o===(a=e.length))r=[0],i=1;else{for(a--;e.charAt(a)===fu;)a--;for(i-=o,r=[],s=0;o<=a;o++,s++)r[s]=Number(e.charAt(o))}return i>sM&&(r=r.splice(0,sM-1),t=i-1,i=1),{digits:r,exponent:t,integerLen:i}}function WU(n,e,t){if(e>t)throw new Z(2307,!1);let r=n.digits,i=r.length-n.integerLen,o=Math.min(Math.max(e,i),t),s=o+n.integerLen,a=r[s];if(s>0){r.splice(Math.max(n.integerLen,s));for(let m=s;m<r.length;m++)r[m]=0}else{i=Math.max(0,i),n.integerLen=1,r.length=Math.max(1,s=o+1),r[0]=0;for(let m=1;m<s;m++)r[m]=0}if(a>=5)if(s-1<0){for(let m=0;m>s;m--)r.unshift(0),n.integerLen++;r.unshift(1),n.integerLen++}else r[s-1]++;for(;i<Math.max(0,o);i++)r.push(0);let l=o!==0,u=e+n.integerLen,f=r.reduceRight(function(m,_,E,x){return _=_+m,x[E]=_<10?_:_-10,l&&(x[E]===0&&E>=u?x.pop():l=!1),_>=10?1:0},0);f&&(r.unshift(f),n.integerLen++)}function zy(n){let e=parseInt(n);if(isNaN(e))throw new Z(2305,!1);return e}var qy=/\s+/,aM=[],Ms=(()=>{class n{_ngEl;_renderer;initialClasses=aM;rawClass;stateMap=new Map;constructor(t,r){this._ngEl=t,this._renderer=r}set klass(t){this.initialClasses=t!=null?t.trim().split(qy):aM}set ngClass(t){this.rawClass=typeof t=="string"?t.trim().split(qy):t}ngDoCheck(){for(let r of this.initialClasses)this._updateState(r,!0);let t=this.rawClass;if(Array.isArray(t)||t instanceof Set)for(let r of t)this._updateState(r,!0);else if(t!=null)for(let r of Object.keys(t))this._updateState(r,!!t[r]);this._applyStateDiff()}_updateState(t,r){let i=this.stateMap.get(t);i!==void 0?(i.enabled!==r&&(i.changed=!0,i.enabled=r),i.touched=!0):this.stateMap.set(t,{enabled:r,changed:!0,touched:!0})}_applyStateDiff(){for(let t of this.stateMap){let r=t[0],i=t[1];i.changed?(this._toggleClass(r,i.enabled),i.changed=!1):i.touched||(i.enabled&&this._toggleClass(r,!1),this.stateMap.delete(r)),i.touched=!1}}_toggleClass(t,r){t=t.trim(),t.length>0&&t.split(qy).forEach(i=>{r?this._renderer.addClass(this._ngEl.nativeElement,i):this._renderer.removeClass(this._ngEl.nativeElement,i)})}static \u0275fac=function(r){return new(r||n)(ee(rn),ee(Jn))};static \u0275dir=Ye({type:n,selectors:[["","ngClass",""]],inputs:{klass:[0,"class","klass"],ngClass:"ngClass"}})}return n})();var sp=class{$implicit;ngForOf;index;count;constructor(e,t,r,i){this.$implicit=e,this.ngForOf=t,this.index=r,this.count=i}get first(){return this.index===0}get last(){return this.index===this.count-1}get even(){return this.index%2===0}get odd(){return!this.even}},In=(()=>{class n{_viewContainer;_template;_differs;set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}_ngForOf=null;_ngForOfDirty=!0;_differ=null;_trackByFn;constructor(t,r,i){this._viewContainer=t,this._template=r,this._differs=i}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;let t=this._ngForOf;!this._differ&&t&&(this._differ=this._differs.find(t).create(this.ngForTrackBy))}if(this._differ){let t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){let r=this._viewContainer;t.forEachOperation((i,o,s)=>{if(i.previousIndex==null)r.createEmbeddedView(this._template,new sp(i.item,this._ngForOf,-1,-1),s===null?void 0:s);else if(s==null)r.remove(o===null?void 0:o);else if(o!==null){let a=r.get(o);r.move(a,s),cM(a,i)}});for(let i=0,o=r.length;i<o;i++){let a=r.get(i).context;a.index=i,a.count=o,a.ngForOf=this._ngForOf}t.forEachIdentityChange(i=>{let o=r.get(i.currentIndex);cM(o,i)})}static ngTemplateContextGuard(t,r){return!0}static \u0275fac=function(r){return new(r||n)(ee(Pi),ee(vo),ee(jy))};static \u0275dir=Ye({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"}})}return n})();function cM(n,e){n.context.$implicit=e.item}var Rn=(()=>{class n{_viewContainer;_context=new ap;_thenTemplateRef=null;_elseTemplateRef=null;_thenViewRef=null;_elseViewRef=null;constructor(t,r){this._viewContainer=t,this._thenTemplateRef=r}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){lM(t,!1),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){lM(t,!1),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngIfUseIfTypeGuard;static ngTemplateGuard_ngIf;static ngTemplateContextGuard(t,r){return!0}static \u0275fac=function(r){return new(r||n)(ee(Pi),ee(vo))};static \u0275dir=Ye({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"}})}return n})(),ap=class{$implicit=null;ngIf=null};function lM(n,e){if(n&&!n.createEmbeddedView)throw new Z(2020,!1)}function GU(n,e){return new Z(2100,!1)}var Ky=(()=>{class n{_locale;constructor(t){this._locale=t}transform(t,r,i){if(!KU(t))return null;i||=this._locale;try{let o=YU(t);return dM(o,i,r)}catch(o){throw GU(n,o.message)}}static \u0275fac=function(r){return new(r||n)(ee(cu,16))};static \u0275pipe=my({name:"number",type:n,pure:!0})}return n})();function KU(n){return!(n==null||n===""||n!==n)}function YU(n){if(typeof n=="string"&&!isNaN(Number(n)-parseFloat(n)))return Number(n);if(typeof n!="number")throw new Z(2309,!1);return n}var Sn=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275mod=Er({type:n});static \u0275inj=Wn({})}return n})();function Yy(n,e){e=encodeURIComponent(e);for(let t of n.split(";")){let r=t.indexOf("="),[i,o]=r==-1?[t,""]:[t.slice(0,r),t.slice(r+1)];if(i.trim()===e)return decodeURIComponent(o)}return null}var hu=class{};var Zy="browser";function Xy(n){return n===Zy}var fM=(()=>{class n{static \u0275prov=Q({token:n,providedIn:"root",factory:()=>new Qy(k(pt),window)})}return n})(),Qy=class{document;window;offset=()=>[0,0];constructor(e,t){this.document=e,this.window=t}setOffset(e){Array.isArray(e)?this.offset=()=>e:this.offset=e}getScrollPosition(){return[this.window.scrollX,this.window.scrollY]}scrollToPosition(e,t){this.window.scrollTo(ne(H({},t),{left:e[0],top:e[1]}))}scrollToAnchor(e,t){let r=QU(this.document,e);r&&(this.scrollToElement(r,t),r.focus())}setHistoryScrollRestoration(e){try{this.window.history.scrollRestoration=e}catch{console.warn(cs(2400,!1))}}scrollToElement(e,t){let r=e.getBoundingClientRect(),i=r.left+this.window.pageXOffset,o=r.top+this.window.pageYOffset,s=this.offset();this.window.scrollTo(ne(H({},t),{left:i-s[0],top:o-s[1]}))}};function QU(n,e){let t=n.getElementById(e)||n.getElementsByName(e)[0];if(t)return t;if(typeof n.createTreeWalker=="function"&&n.body&&typeof n.body.attachShadow=="function"){let r=n.createTreeWalker(n.body,NodeFilter.SHOW_ELEMENT),i=r.currentNode;for(;i;){let o=i.shadowRoot;if(o){let s=o.getElementById(e)||o.querySelector(`[name="${e}"]`);if(s)return s}i=r.nextNode()}}return null}var lp=new X(""),rb=(()=>{class n{_zone;_plugins;_eventNameToPlugin=new Map;constructor(t,r){this._zone=r,t.forEach(i=>{i.manager=this}),this._plugins=t.slice().reverse()}addEventListener(t,r,i,o){return this._findPluginFor(r).addEventListener(t,r,i,o)}getZone(){return this._zone}_findPluginFor(t){let r=this._eventNameToPlugin.get(t);if(r)return r;if(r=this._plugins.find(o=>o.supports(t)),!r)throw new Z(5101,!1);return this._eventNameToPlugin.set(t,r),r}static \u0275fac=function(r){return new(r||n)(re(lp),re(xe))};static \u0275prov=Q({token:n,factory:n.\u0275fac})}return n})(),pu=class{_doc;constructor(e){this._doc=e}manager},Jy="ng-app-id";function hM(n){for(let e of n)e.remove()}function pM(n,e){let t=e.createElement("style");return t.textContent=n,t}function ZU(n,e,t,r){let i=n.head?.querySelectorAll(`style[${Jy}="${e}"],link[${Jy}="${e}"]`);if(i)for(let o of i)o.removeAttribute(Jy),o instanceof HTMLLinkElement?r.set(o.href.slice(o.href.lastIndexOf("/")+1),{usage:0,elements:[o]}):o.textContent&&t.set(o.textContent,{usage:0,elements:[o]})}function tb(n,e){let t=e.createElement("link");return t.setAttribute("rel","stylesheet"),t.setAttribute("href",n),t}var ib=(()=>{class n{doc;appId;nonce;inline=new Map;external=new Map;hosts=new Set;constructor(t,r,i,o={}){this.doc=t,this.appId=r,this.nonce=i,ZU(t,r,this.inline,this.external),this.hosts.add(t.head)}addStyles(t,r){for(let i of t)this.addUsage(i,this.inline,pM);r?.forEach(i=>this.addUsage(i,this.external,tb))}removeStyles(t,r){for(let i of t)this.removeUsage(i,this.inline);r?.forEach(i=>this.removeUsage(i,this.external))}addUsage(t,r,i){let o=r.get(t);o?o.usage++:r.set(t,{usage:1,elements:[...this.hosts].map(s=>this.addElement(s,i(t,this.doc)))})}removeUsage(t,r){let i=r.get(t);i&&(i.usage--,i.usage<=0&&(hM(i.elements),r.delete(t)))}ngOnDestroy(){for(let[,{elements:t}]of[...this.inline,...this.external])hM(t);this.hosts.clear()}addHost(t){this.hosts.add(t);for(let[r,{elements:i}]of this.inline)i.push(this.addElement(t,pM(r,this.doc)));for(let[r,{elements:i}]of this.external)i.push(this.addElement(t,tb(r,this.doc)))}removeHost(t){this.hosts.delete(t)}addElement(t,r){return this.nonce&&r.setAttribute("nonce",this.nonce),t.appendChild(r)}static \u0275fac=function(r){return new(r||n)(re(pt),re(Nh),re(Lh,8),re(wr))};static \u0275prov=Q({token:n,factory:n.\u0275fac})}return n})(),eb={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/Math/MathML"},ob=/%COMP%/g;var mM="%COMP%",XU=`_nghost-${mM}`,JU=`_ngcontent-${mM}`,e5=!0,t5=new X("",{providedIn:"root",factory:()=>e5});function n5(n){return JU.replace(ob,n)}function r5(n){return XU.replace(ob,n)}function vM(n,e){return e.map(t=>t.replace(ob,n))}var sb=(()=>{class n{eventManager;sharedStylesHost;appId;removeStylesOnCompDestroy;doc;platformId;ngZone;nonce;animationDisabled;maxAnimationTimeout;tracingService;rendererByCompId=new Map;defaultRenderer;platformIsServer;registry;constructor(t,r,i,o,s,a,l,u=null,f,m,_=null){this.eventManager=t,this.sharedStylesHost=r,this.appId=i,this.removeStylesOnCompDestroy=o,this.doc=s,this.platformId=a,this.ngZone=l,this.nonce=u,this.animationDisabled=f,this.maxAnimationTimeout=m,this.tracingService=_,this.platformIsServer=!1,this.defaultRenderer=new gu(t,s,l,this.platformIsServer,this.tracingService,this.registry=ih(),this.maxAnimationTimeout)}createRenderer(t,r){if(!t||!r)return this.defaultRenderer;let i=this.getOrCreateRenderer(t,r);return i instanceof cp?i.applyToHost(t):i instanceof mu&&i.applyStyles(),i}getOrCreateRenderer(t,r){let i=this.rendererByCompId,o=i.get(r.id);if(!o){let s=this.doc,a=this.ngZone,l=this.eventManager,u=this.sharedStylesHost,f=this.removeStylesOnCompDestroy,m=this.platformIsServer,_=this.tracingService;switch(r.encapsulation){case Di.Emulated:o=new cp(l,u,r,this.appId,f,s,a,m,_,this.registry,this.animationDisabled,this.maxAnimationTimeout);break;case Di.ShadowDom:return new nb(l,u,t,r,s,a,this.nonce,m,_,this.registry,this.maxAnimationTimeout);default:o=new mu(l,u,r,f,s,a,m,_,this.registry,this.animationDisabled,this.maxAnimationTimeout);break}i.set(r.id,o)}return o}ngOnDestroy(){this.rendererByCompId.clear()}componentReplaced(t){this.rendererByCompId.delete(t)}static \u0275fac=function(r){return new(r||n)(re(rb),re(ib),re(Nh),re(t5),re(pt),re(wr),re(xe),re(Lh),re(Sy),re(Ty),re(Ts,8))};static \u0275prov=Q({token:n,factory:n.\u0275fac})}return n})(),gu=class{eventManager;doc;ngZone;platformIsServer;tracingService;registry;maxAnimationTimeout;data=Object.create(null);throwOnSyntheticProps=!0;constructor(e,t,r,i,o,s,a){this.eventManager=e,this.doc=t,this.ngZone=r,this.platformIsServer=i,this.tracingService=o,this.registry=s,this.maxAnimationTimeout=a}destroy(){}destroyNode=null;createElement(e,t){return t?this.doc.createElementNS(eb[t]||t,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,t){(gM(e)?e.content:e).appendChild(t)}insertBefore(e,t,r){e&&(gM(e)?e.content:e).insertBefore(t,r)}removeChild(e,t){let{elements:r}=this.registry;if(r){r.animate(t,()=>t.remove(),this.maxAnimationTimeout);return}t.remove()}selectRootElement(e,t){let r=typeof e=="string"?this.doc.querySelector(e):e;if(!r)throw new Z(-5104,!1);return t||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,r,i){if(i){t=i+":"+t;let o=eb[i];o?e.setAttributeNS(o,t,r):e.setAttribute(t,r)}else e.setAttribute(t,r)}removeAttribute(e,t,r){if(r){let i=eb[r];i?e.removeAttributeNS(i,t):e.removeAttribute(`${r}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,r,i){i&(Hr.DashCase|Hr.Important)?e.style.setProperty(t,r,i&Hr.Important?"important":""):e.style[t]=r}removeStyle(e,t,r){r&Hr.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,r){e!=null&&(e[t]=r)}setValue(e,t){e.nodeValue=t}listen(e,t,r,i){if(typeof e=="string"&&(e=er().getGlobalEventTarget(this.doc,e),!e))throw new Z(5102,!1);let o=this.decoratePreventDefault(r);return this.tracingService?.wrapEventListener&&(o=this.tracingService.wrapEventListener(e,t,o)),this.eventManager.addEventListener(e,t,o,i)}decoratePreventDefault(e){return t=>{if(t==="__ngUnwrap__")return e;e(t)===!1&&t.preventDefault()}}};function gM(n){return n.tagName==="TEMPLATE"&&n.content!==void 0}var nb=class extends gu{sharedStylesHost;hostEl;shadowRoot;constructor(e,t,r,i,o,s,a,l,u,f,m){super(e,o,s,l,u,f,m),this.sharedStylesHost=t,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);let _=i.styles;_=vM(i.id,_);for(let x of _){let F=document.createElement("style");a&&F.setAttribute("nonce",a),F.textContent=x,this.shadowRoot.appendChild(F)}let E=i.getExternalStyles?.();if(E)for(let x of E){let F=tb(x,o);a&&F.setAttribute("nonce",a),this.shadowRoot.appendChild(F)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,r){return super.insertBefore(this.nodeOrShadowRoot(e),t,r)}removeChild(e,t){return super.removeChild(null,t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}},mu=class extends gu{sharedStylesHost;removeStylesOnCompDestroy;styles;styleUrls;_animationDisabled;constructor(e,t,r,i,o,s,a,l,u,f,m,_){super(e,o,s,a,l,u,m),this.sharedStylesHost=t,this.removeStylesOnCompDestroy=i,this._animationDisabled=f;let E=r.styles;this.styles=_?vM(_,E):E,this.styleUrls=r.getExternalStyles?.(_)}applyStyles(){this.sharedStylesHost.addStyles(this.styles,this.styleUrls)}destroy(){if(this.removeStylesOnCompDestroy){if(!this._animationDisabled&&this.registry.elements){this.ngZone.runOutsideAngular(()=>{setTimeout(()=>{this.sharedStylesHost.removeStyles(this.styles,this.styleUrls)},this.maxAnimationTimeout)});return}this.sharedStylesHost.removeStyles(this.styles,this.styleUrls)}}},cp=class extends mu{contentAttr;hostAttr;constructor(e,t,r,i,o,s,a,l,u,f,m,_){let E=i+"-"+r.id;super(e,t,r,o,s,a,l,u,f,m,_,E),this.contentAttr=n5(E),this.hostAttr=r5(E)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,t){let r=super.createElement(e,t);return super.setAttribute(r,this.contentAttr,""),r}};var up=class n extends uu{supportsDOMEvents=!0;static makeCurrent(){By(new n)}onAndCancel(e,t,r,i){return e.addEventListener(t,r,i),()=>{e.removeEventListener(t,r,i)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.remove()}createElement(e,t){return t=t||this.getDefaultDocument(),t.createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return t==="window"?window:t==="document"?e:t==="body"?e.body:null}getBaseHref(e){let t=i5();return t==null?null:o5(t)}resetBaseElement(){vu=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return Yy(document.cookie,e)}},vu=null;function i5(){return vu=vu||document.head.querySelector("base"),vu?vu.getAttribute("href"):null}function o5(n){return new URL(n,document.baseURI).pathname}var s5=(()=>{class n{build(){return new XMLHttpRequest}static \u0275fac=function(r){return new(r||n)};static \u0275prov=Q({token:n,factory:n.\u0275fac})}return n})(),yM=(()=>{class n extends pu{constructor(t){super(t)}supports(t){return!0}addEventListener(t,r,i,o){return t.addEventListener(r,i,o),()=>this.removeEventListener(t,r,i,o)}removeEventListener(t,r,i,o){return t.removeEventListener(r,i,o)}static \u0275fac=function(r){return new(r||n)(re(pt))};static \u0275prov=Q({token:n,factory:n.\u0275fac})}return n})(),_M=["alt","control","meta","shift"],a5={"\b":"Backspace","	":"Tab","\x7F":"Delete","\x1B":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},c5={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey},bM=(()=>{class n extends pu{constructor(t){super(t)}supports(t){return n.parseEventName(t)!=null}addEventListener(t,r,i,o){let s=n.parseEventName(r),a=n.eventCallback(s.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>er().onAndCancel(t,s.domEventName,a,o))}static parseEventName(t){let r=t.toLowerCase().split("."),i=r.shift();if(r.length===0||!(i==="keydown"||i==="keyup"))return null;let o=n._normalizeKey(r.pop()),s="",a=r.indexOf("code");if(a>-1&&(r.splice(a,1),s="code."),_M.forEach(u=>{let f=r.indexOf(u);f>-1&&(r.splice(f,1),s+=u+".")}),s+=o,r.length!=0||o.length===0)return null;let l={};return l.domEventName=i,l.fullKey=s,l}static matchEventFullKeyCode(t,r){let i=a5[t.key]||t.key,o="";return r.indexOf("code.")>-1&&(i=t.code,o="code."),i==null||!i?!1:(i=i.toLowerCase(),i===" "?i="space":i==="."&&(i="dot"),_M.forEach(s=>{if(s!==i){let a=c5[s];a(t)&&(o+=s+".")}}),o+=i,o===r)}static eventCallback(t,r,i){return o=>{n.matchEventFullKeyCode(o,t)&&i.runGuarded(()=>r(o))}}static _normalizeKey(t){return t==="esc"?"escape":t}static \u0275fac=function(r){return new(r||n)(re(pt))};static \u0275prov=Q({token:n,factory:n.\u0275fac})}return n})();function ab(n,e){let t=H({rootComponent:n},l5(e));return eM(t)}function l5(n){return{appProviders:[...p5,...n?.providers??[]],platformProviders:h5}}function u5(){up.makeCurrent()}function d5(){return new pr}function f5(){return U_(document),document}var h5=[{provide:wr,useValue:Zy},{provide:Fh,useValue:u5,multi:!0},{provide:pt,useFactory:f5}];var p5=[{provide:Vl,useValue:"root"},{provide:pr,useFactory:d5},{provide:lp,useClass:yM,multi:!0,deps:[pt]},{provide:lp,useClass:bM,multi:!0,deps:[pt]},sb,ib,rb,{provide:bs,useExisting:sb},{provide:hu,useClass:s5},[]];var dp=(()=>{class n{_doc;constructor(t){this._doc=t}getTitle(){return this._doc.title}setTitle(t){this._doc.title=t||""}static \u0275fac=function(r){return new(r||n)(re(pt))};static \u0275prov=Q({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var we="primary",Pu=Symbol("RouteTitle"),fb=class{params;constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){let t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){let t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}};function Os(n){return new fb(n)}function MM(n,e,t){let r=t.path.split("/");if(r.length>n.length||t.pathMatch==="full"&&(e.hasChildren()||r.length<n.length))return null;let i={};for(let o=0;o<r.length;o++){let s=r[o],a=n[o];if(s[0]===":")i[s.substring(1)]=a;else if(s!==a.path)return null}return{consumed:n.slice(0,r.length),posParams:i}}function g5(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!Qr(n[t],e[t]))return!1;return!0}function Qr(n,e){let t=n?hb(n):void 0,r=e?hb(e):void 0;if(!t||!r||t.length!=r.length)return!1;let i;for(let o=0;o<t.length;o++)if(i=t[o],!PM(n[i],e[i]))return!1;return!0}function hb(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}function PM(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;let t=[...n].sort(),r=[...e].sort();return t.every((i,o)=>r[o]===i)}else return n===e}function AM(n){return n.length>0?n[n.length-1]:null}function Ri(n){return Lv(n)?n:_o(n)?Ge(Promise.resolve(n)):se(n)}var m5={exact:OM,subset:RM},kM={exact:v5,subset:_5,ignored:()=>!0};function EM(n,e,t){return m5[t.paths](n.root,e.root,t.matrixParams)&&kM[t.queryParams](n.queryParams,e.queryParams)&&!(t.fragment==="exact"&&n.fragment!==e.fragment)}function v5(n,e){return Qr(n,e)}function OM(n,e,t){if(!As(n.segments,e.segments)||!pp(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(let r in e.children)if(!n.children[r]||!OM(n.children[r],e.children[r],t))return!1;return!0}function _5(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>PM(n[t],e[t]))}function RM(n,e,t){return NM(n,e,e.segments,t)}function NM(n,e,t,r){if(n.segments.length>t.length){let i=n.segments.slice(0,t.length);return!(!As(i,t)||e.hasChildren()||!pp(i,t,r))}else if(n.segments.length===t.length){if(!As(n.segments,t)||!pp(n.segments,t,r))return!1;for(let i in e.children)if(!n.children[i]||!RM(n.children[i],e.children[i],r))return!1;return!0}else{let i=t.slice(0,n.segments.length),o=t.slice(n.segments.length);return!As(n.segments,i)||!pp(n.segments,i,r)||!n.children[we]?!1:NM(n.children[we],e,o,r)}}function pp(n,e,t){return e.every((r,i)=>kM[t](n[i].parameters,r.parameters))}var Xr=class{root;queryParams;fragment;_queryParamMap;constructor(e=new Le([],{}),t={},r=null){this.root=e,this.queryParams=t,this.fragment=r}get queryParamMap(){return this._queryParamMap??=Os(this.queryParams),this._queryParamMap}toString(){return w5.serialize(this)}},Le=class{segments;children;parent=null;constructor(e,t){this.segments=e,this.children=t,Object.values(t).forEach(r=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return gp(this)}},Eo=class{path;parameters;_parameterMap;constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap??=Os(this.parameters),this._parameterMap}toString(){return LM(this)}};function y5(n,e){return As(n,e)&&n.every((t,r)=>Qr(t.parameters,e[r].parameters))}function As(n,e){return n.length!==e.length?!1:n.every((t,r)=>t.path===e[r].path)}function b5(n,e){let t=[];return Object.entries(n.children).forEach(([r,i])=>{r===we&&(t=t.concat(e(i,r)))}),Object.entries(n.children).forEach(([r,i])=>{r!==we&&(t=t.concat(e(i,r)))}),t}var Rs=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275prov=Q({token:n,factory:()=>new Co,providedIn:"root"})}return n})(),Co=class{parse(e){let t=new gb(e);return new Xr(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){let t=`/${_u(e.root,!0)}`,r=I5(e.queryParams),i=typeof e.fragment=="string"?`#${E5(e.fragment)}`:"";return`${t}${r}${i}`}},w5=new Co;function gp(n){return n.segments.map(e=>LM(e)).join("/")}function _u(n,e){if(!n.hasChildren())return gp(n);if(e){let t=n.children[we]?_u(n.children[we],!1):"",r=[];return Object.entries(n.children).forEach(([i,o])=>{i!==we&&r.push(`${i}:${_u(o,!1)}`)}),r.length>0?`${t}(${r.join("//")})`:t}else{let t=b5(n,(r,i)=>i===we?[_u(n.children[we],!1)]:[`${i}:${_u(r,!1)}`]);return Object.keys(n.children).length===1&&n.children[we]!=null?`${gp(n)}/${t[0]}`:`${gp(n)}/(${t.join("//")})`}}function FM(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function fp(n){return FM(n).replace(/%3B/gi,";")}function E5(n){return encodeURI(n)}function pb(n){return FM(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function mp(n){return decodeURIComponent(n)}function CM(n){return mp(n.replace(/\+/g,"%20"))}function LM(n){return`${pb(n.path)}${C5(n.parameters)}`}function C5(n){return Object.entries(n).map(([e,t])=>`;${pb(e)}=${pb(t)}`).join("")}function I5(n){let e=Object.entries(n).map(([t,r])=>Array.isArray(r)?r.map(i=>`${fp(t)}=${fp(i)}`).join("&"):`${fp(t)}=${fp(r)}`).filter(t=>t);return e.length?`?${e.join("&")}`:""}var S5=/^[^\/()?;#]+/;function cb(n){let e=n.match(S5);return e?e[0]:""}var T5=/^[^\/()?;=#]+/;function D5(n){let e=n.match(T5);return e?e[0]:""}var x5=/^[^=?&#]+/;function M5(n){let e=n.match(x5);return e?e[0]:""}var P5=/^[^&#]+/;function A5(n){let e=n.match(P5);return e?e[0]:""}var gb=class{url;remaining;constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),this.remaining===""||this.peekStartsWith("?")||this.peekStartsWith("#")?new Le([],{}):new Le([],this.parseChildren())}parseQueryParams(){let e={};if(this.consumeOptional("?"))do this.parseQueryParam(e);while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(this.remaining==="")return{};this.consumeOptional("/");let e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(r[we]=new Le(e,t)),r}parseSegment(){let e=cb(this.remaining);if(e===""&&this.peekStartsWith(";"))throw new Z(4009,!1);return this.capture(e),new Eo(mp(e),this.parseMatrixParams())}parseMatrixParams(){let e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){let t=D5(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){let i=cb(this.remaining);i&&(r=i,this.capture(r))}e[mp(t)]=mp(r)}parseQueryParam(e){let t=M5(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){let s=A5(this.remaining);s&&(r=s,this.capture(r))}let i=CM(t),o=CM(r);if(e.hasOwnProperty(i)){let s=e[i];Array.isArray(s)||(s=[s],e[i]=s),s.push(o)}else e[i]=o}parseParens(e){let t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){let r=cb(this.remaining),i=this.remaining[r.length];if(i!=="/"&&i!==")"&&i!==";")throw new Z(4010,!1);let o;r.indexOf(":")>-1?(o=r.slice(0,r.indexOf(":")),this.capture(o),this.capture(":")):e&&(o=we);let s=this.parseChildren();t[o]=Object.keys(s).length===1?s[we]:new Le([],s),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return this.peekStartsWith(e)?(this.remaining=this.remaining.substring(e.length),!0):!1}capture(e){if(!this.consumeOptional(e))throw new Z(4011,!1)}};function VM(n){return n.segments.length>0?new Le([],{[we]:n}):n}function UM(n){let e={};for(let[r,i]of Object.entries(n.children)){let o=UM(i);if(r===we&&o.segments.length===0&&o.hasChildren())for(let[s,a]of Object.entries(o.children))e[s]=a;else(o.segments.length>0||o.hasChildren())&&(e[r]=o)}let t=new Le(n.segments,e);return k5(t)}function k5(n){if(n.numberOfChildren===1&&n.children[we]){let e=n.children[we];return new Le(n.segments.concat(e.segments),e.children)}return n}function Io(n){return n instanceof Xr}function jM(n,e,t=null,r=null){let i=BM(n);return $M(i,e,t,r)}function BM(n){let e;function t(o){let s={};for(let l of o.children){let u=t(l);s[l.outlet]=u}let a=new Le(o.url,s);return o===n&&(e=a),a}let r=t(n.root),i=VM(r);return e??i}function $M(n,e,t,r){let i=n;for(;i.parent;)i=i.parent;if(e.length===0)return lb(i,i,i,t,r);let o=O5(e);if(o.toRoot())return lb(i,i,new Le([],{}),t,r);let s=R5(o,i,n),a=s.processChildren?bu(s.segmentGroup,s.index,o.commands):zM(s.segmentGroup,s.index,o.commands);return lb(i,s.segmentGroup,a,t,r)}function vp(n){return typeof n=="object"&&n!=null&&!n.outlets&&!n.segmentPath}function Eu(n){return typeof n=="object"&&n!=null&&n.outlets}function lb(n,e,t,r,i){let o={};r&&Object.entries(r).forEach(([l,u])=>{o[l]=Array.isArray(u)?u.map(f=>`${f}`):`${u}`});let s;n===e?s=t:s=HM(n,e,t);let a=VM(UM(s));return new Xr(a,o,i)}function HM(n,e,t){let r={};return Object.entries(n.children).forEach(([i,o])=>{o===e?r[i]=t:r[i]=HM(o,e,t)}),new Le(n.segments,r)}var _p=class{isAbsolute;numberOfDoubleDots;commands;constructor(e,t,r){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=r,e&&r.length>0&&vp(r[0]))throw new Z(4003,!1);let i=r.find(Eu);if(i&&i!==AM(r))throw new Z(4004,!1)}toRoot(){return this.isAbsolute&&this.commands.length===1&&this.commands[0]=="/"}};function O5(n){if(typeof n[0]=="string"&&n.length===1&&n[0]==="/")return new _p(!0,0,n);let e=0,t=!1,r=n.reduce((i,o,s)=>{if(typeof o=="object"&&o!=null){if(o.outlets){let a={};return Object.entries(o.outlets).forEach(([l,u])=>{a[l]=typeof u=="string"?u.split("/"):u}),[...i,{outlets:a}]}if(o.segmentPath)return[...i,o.segmentPath]}return typeof o!="string"?[...i,o]:s===0?(o.split("/").forEach((a,l)=>{l==0&&a==="."||(l==0&&a===""?t=!0:a===".."?e++:a!=""&&i.push(a))}),i):[...i,o]},[]);return new _p(t,e,r)}var cc=class{segmentGroup;processChildren;index;constructor(e,t,r){this.segmentGroup=e,this.processChildren=t,this.index=r}};function R5(n,e,t){if(n.isAbsolute)return new cc(e,!0,0);if(!t)return new cc(e,!1,NaN);if(t.parent===null)return new cc(t,!0,0);let r=vp(n.commands[0])?0:1,i=t.segments.length-1+r;return N5(t,i,n.numberOfDoubleDots)}function N5(n,e,t){let r=n,i=e,o=t;for(;o>i;){if(o-=i,r=r.parent,!r)throw new Z(4005,!1);i=r.segments.length}return new cc(r,!1,i-o)}function F5(n){return Eu(n[0])?n[0].outlets:{[we]:n}}function zM(n,e,t){if(n??=new Le([],{}),n.segments.length===0&&n.hasChildren())return bu(n,e,t);let r=L5(n,e,t),i=t.slice(r.commandIndex);if(r.match&&r.pathIndex<n.segments.length){let o=new Le(n.segments.slice(0,r.pathIndex),{});return o.children[we]=new Le(n.segments.slice(r.pathIndex),n.children),bu(o,0,i)}else return r.match&&i.length===0?new Le(n.segments,{}):r.match&&!n.hasChildren()?mb(n,e,t):r.match?bu(n,0,i):mb(n,e,t)}function bu(n,e,t){if(t.length===0)return new Le(n.segments,{});{let r=F5(t),i={};if(Object.keys(r).some(o=>o!==we)&&n.children[we]&&n.numberOfChildren===1&&n.children[we].segments.length===0){let o=bu(n.children[we],e,t);return new Le(n.segments,o.children)}return Object.entries(r).forEach(([o,s])=>{typeof s=="string"&&(s=[s]),s!==null&&(i[o]=zM(n.children[o],e,s))}),Object.entries(n.children).forEach(([o,s])=>{r[o]===void 0&&(i[o]=s)}),new Le(n.segments,i)}}function L5(n,e,t){let r=0,i=e,o={match:!1,pathIndex:0,commandIndex:0};for(;i<n.segments.length;){if(r>=t.length)return o;let s=n.segments[i],a=t[r];if(Eu(a))break;let l=`${a}`,u=r<t.length-1?t[r+1]:null;if(i>0&&l===void 0)break;if(l&&u&&typeof u=="object"&&u.outlets===void 0){if(!SM(l,u,s))return o;r+=2}else{if(!SM(l,{},s))return o;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}function mb(n,e,t){let r=n.segments.slice(0,e),i=0;for(;i<t.length;){let o=t[i];if(Eu(o)){let l=V5(o.outlets);return new Le(r,l)}if(i===0&&vp(t[0])){let l=n.segments[e];r.push(new Eo(l.path,IM(t[0]))),i++;continue}let s=Eu(o)?o.outlets[we]:`${o}`,a=i<t.length-1?t[i+1]:null;s&&a&&vp(a)?(r.push(new Eo(s,IM(a))),i+=2):(r.push(new Eo(s,{})),i++)}return new Le(r,{})}function V5(n){let e={};return Object.entries(n).forEach(([t,r])=>{typeof r=="string"&&(r=[r]),r!==null&&(e[t]=mb(new Le([],{}),0,r))}),e}function IM(n){let e={};return Object.entries(n).forEach(([t,r])=>e[t]=`${r}`),e}function SM(n,e,t){return n==t.path&&Qr(e,t.parameters)}var lc="imperative",At=(function(n){return n[n.NavigationStart=0]="NavigationStart",n[n.NavigationEnd=1]="NavigationEnd",n[n.NavigationCancel=2]="NavigationCancel",n[n.NavigationError=3]="NavigationError",n[n.RoutesRecognized=4]="RoutesRecognized",n[n.ResolveStart=5]="ResolveStart",n[n.ResolveEnd=6]="ResolveEnd",n[n.GuardsCheckStart=7]="GuardsCheckStart",n[n.GuardsCheckEnd=8]="GuardsCheckEnd",n[n.RouteConfigLoadStart=9]="RouteConfigLoadStart",n[n.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",n[n.ChildActivationStart=11]="ChildActivationStart",n[n.ChildActivationEnd=12]="ChildActivationEnd",n[n.ActivationStart=13]="ActivationStart",n[n.ActivationEnd=14]="ActivationEnd",n[n.Scroll=15]="Scroll",n[n.NavigationSkipped=16]="NavigationSkipped",n})(At||{}),Fn=class{id;url;constructor(e,t){this.id=e,this.url=t}},So=class extends Fn{type=At.NavigationStart;navigationTrigger;restoredState;constructor(e,t,r="imperative",i=null){super(e,t),this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}},Ln=class extends Fn{urlAfterRedirects;type=At.NavigationEnd;constructor(e,t,r){super(e,t),this.urlAfterRedirects=r}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}},gn=(function(n){return n[n.Redirect=0]="Redirect",n[n.SupersededByNewNavigation=1]="SupersededByNewNavigation",n[n.NoDataFromResolver=2]="NoDataFromResolver",n[n.GuardRejected=3]="GuardRejected",n[n.Aborted=4]="Aborted",n})(gn||{}),dc=(function(n){return n[n.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",n[n.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",n})(dc||{}),Zr=class extends Fn{reason;code;type=At.NavigationCancel;constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}},Jr=class extends Fn{reason;code;type=At.NavigationSkipped;constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i}},fc=class extends Fn{error;target;type=At.NavigationError;constructor(e,t,r,i){super(e,t),this.error=r,this.target=i}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}},Cu=class extends Fn{urlAfterRedirects;state;type=At.RoutesRecognized;constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},yp=class extends Fn{urlAfterRedirects;state;type=At.GuardsCheckStart;constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},bp=class extends Fn{urlAfterRedirects;state;shouldActivate;type=At.GuardsCheckEnd;constructor(e,t,r,i,o){super(e,t),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=o}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}},wp=class extends Fn{urlAfterRedirects;state;type=At.ResolveStart;constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Ep=class extends Fn{urlAfterRedirects;state;type=At.ResolveEnd;constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Cp=class{route;type=At.RouteConfigLoadStart;constructor(e){this.route=e}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}},Ip=class{route;type=At.RouteConfigLoadEnd;constructor(e){this.route=e}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}},Sp=class{snapshot;type=At.ChildActivationStart;constructor(e){this.snapshot=e}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Tp=class{snapshot;type=At.ChildActivationEnd;constructor(e){this.snapshot=e}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Dp=class{snapshot;type=At.ActivationStart;constructor(e){this.snapshot=e}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},hc=class{snapshot;type=At.ActivationEnd;constructor(e){this.snapshot=e}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},pc=class{routerEvent;position;anchor;type=At.Scroll;constructor(e,t,r){this.routerEvent=e,this.position=t,this.anchor=r}toString(){let e=this.position?`${this.position[0]}, ${this.position[1]}`:null;return`Scroll(anchor: '${this.anchor}', position: '${e}')`}},Iu=class{},gc=class{url;navigationBehaviorOptions;constructor(e,t){this.url=e,this.navigationBehaviorOptions=t}};function U5(n){return!(n instanceof Iu)&&!(n instanceof gc)}function j5(n,e){return n.providers&&!n._injector&&(n._injector=ec(n.providers,e,`Route: ${n.path}`)),n._injector??e}function Dr(n){return n.outlet||we}function B5(n,e){let t=n.filter(r=>Dr(r)===e);return t.push(...n.filter(r=>Dr(r)!==e)),t}function _c(n){if(!n)return null;if(n.routeConfig?._injector)return n.routeConfig._injector;for(let e=n.parent;e;e=e.parent){let t=e.routeConfig;if(t?._loadedInjector)return t._loadedInjector;if(t?._injector)return t._injector}return null}var xp=class{rootInjector;outlet=null;route=null;children;attachRef=null;get injector(){return _c(this.route?.snapshot)??this.rootInjector}constructor(e){this.rootInjector=e,this.children=new Ns(this.rootInjector)}},Ns=(()=>{class n{rootInjector;contexts=new Map;constructor(t){this.rootInjector=t}onChildOutletCreated(t,r){let i=this.getOrCreateContext(t);i.outlet=r,this.contexts.set(t,i)}onChildOutletDestroyed(t){let r=this.getContext(t);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){let t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let r=this.getContext(t);return r||(r=new xp(this.rootInjector),this.contexts.set(t,r)),r}getContext(t){return this.contexts.get(t)||null}static \u0275fac=function(r){return new(r||n)(re(ht))};static \u0275prov=Q({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),Mp=class{_root;constructor(e){this._root=e}get root(){return this._root.value}parent(e){let t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){let t=vb(e,this._root);return t?t.children.map(r=>r.value):[]}firstChild(e){let t=vb(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){let t=_b(e,this._root);return t.length<2?[]:t[t.length-2].children.map(i=>i.value).filter(i=>i!==e)}pathFromRoot(e){return _b(e,this._root).map(t=>t.value)}};function vb(n,e){if(n===e.value)return e;for(let t of e.children){let r=vb(n,t);if(r)return r}return null}function _b(n,e){if(n===e.value)return[e];for(let t of e.children){let r=_b(n,t);if(r.length)return r.unshift(e),r}return[]}var Nn=class{value;children;constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}};function ac(n){let e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}var Su=class extends Mp{snapshot;constructor(e,t){super(e),this.snapshot=t,Tb(this,e)}toString(){return this.snapshot.toString()}};function qM(n){let e=$5(n),t=new _t([new Eo("",{})]),r=new _t({}),i=new _t({}),o=new _t({}),s=new _t(""),a=new Tn(t,r,o,s,i,we,n,e.root);return a.snapshot=e.root,new Su(new Nn(a,[]),e)}function $5(n){let e={},t={},r={},o=new ks([],e,r,"",t,we,n,null,{});return new Tu("",new Nn(o,[]))}var Tn=class{urlSubject;paramsSubject;queryParamsSubject;fragmentSubject;dataSubject;outlet;component;snapshot;_futureSnapshot;_routerState;_paramMap;_queryParamMap;title;url;params;queryParams;fragment;data;constructor(e,t,r,i,o,s,a,l){this.urlSubject=e,this.paramsSubject=t,this.queryParamsSubject=r,this.fragmentSubject=i,this.dataSubject=o,this.outlet=s,this.component=a,this._futureSnapshot=l,this.title=this.dataSubject?.pipe(Ce(u=>u[Pu]))??se(void 0),this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=o}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=this.params.pipe(Ce(e=>Os(e))),this._paramMap}get queryParamMap(){return this._queryParamMap??=this.queryParams.pipe(Ce(e=>Os(e))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}};function Pp(n,e,t="emptyOnly"){let r,{routeConfig:i}=n;return e!==null&&(t==="always"||i?.path===""||!e.component&&!e.routeConfig?.loadComponent)?r={params:H(H({},e.params),n.params),data:H(H({},e.data),n.data),resolve:H(H(H(H({},n.data),e.data),i?.data),n._resolvedData)}:r={params:H({},n.params),data:H({},n.data),resolve:H(H({},n.data),n._resolvedData??{})},i&&GM(i)&&(r.resolve[Pu]=i.title),r}var ks=class{url;params;queryParams;fragment;data;outlet;component;routeConfig;_resolve;_resolvedData;_routerState;_paramMap;_queryParamMap;get title(){return this.data?.[Pu]}constructor(e,t,r,i,o,s,a,l,u){this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=o,this.outlet=s,this.component=a,this.routeConfig=l,this._resolve=u}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=Os(this.params),this._paramMap}get queryParamMap(){return this._queryParamMap??=Os(this.queryParams),this._queryParamMap}toString(){let e=this.url.map(r=>r.toString()).join("/"),t=this.routeConfig?this.routeConfig.path:"";return`Route(url:'${e}', path:'${t}')`}},Tu=class extends Mp{url;constructor(e,t){super(t),this.url=e,Tb(this,t)}toString(){return WM(this._root)}};function Tb(n,e){e.value._routerState=n,e.children.forEach(t=>Tb(n,t))}function WM(n){let e=n.children.length>0?` { ${n.children.map(WM).join(", ")} } `:"";return`${n.value}${e}`}function ub(n){if(n.snapshot){let e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,Qr(e.queryParams,t.queryParams)||n.queryParamsSubject.next(t.queryParams),e.fragment!==t.fragment&&n.fragmentSubject.next(t.fragment),Qr(e.params,t.params)||n.paramsSubject.next(t.params),g5(e.url,t.url)||n.urlSubject.next(t.url),Qr(e.data,t.data)||n.dataSubject.next(t.data)}else n.snapshot=n._futureSnapshot,n.dataSubject.next(n._futureSnapshot.data)}function yb(n,e){let t=Qr(n.params,e.params)&&y5(n.url,e.url),r=!n.parent!=!e.parent;return t&&!r&&(!n.parent||yb(n.parent,e.parent))}function GM(n){return typeof n.title=="string"||n.title===null}var KM=new X(""),Au=(()=>{class n{activated=null;get activatedComponentRef(){return this.activated}_activatedRoute=null;name=we;activateEvents=new et;deactivateEvents=new et;attachEvents=new et;detachEvents=new et;routerOutletData=Xx(void 0);parentContexts=k(Ns);location=k(Pi);changeDetector=k(Oi);inputBinder=k(ku,{optional:!0});supportsBindingToComponentInputs=!0;ngOnChanges(t){if(t.name){let{firstChange:r,previousValue:i}=t.name;if(r)return;this.isTrackedInParentContexts(i)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(i)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(t){return this.parentContexts.getContext(t)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;let t=this.parentContexts.getContext(this.name);t?.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new Z(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new Z(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new Z(4012,!1);this.location.detach();let t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,r){this.activated=t,this._activatedRoute=r,this.location.insert(t.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){let t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,r){if(this.isActivated)throw new Z(4013,!1);this._activatedRoute=t;let i=this.location,s=t.snapshot.component,a=this.parentContexts.getOrCreateContext(this.name).children,l=new bb(t,a,i.injector,this.routerOutletData);this.activated=i.createComponent(s,{index:i.length,injector:l,environmentInjector:r}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}static \u0275fac=function(r){return new(r||n)};static \u0275dir=Ye({type:n,selectors:[["router-outlet"]],inputs:{name:"name",routerOutletData:[1,"routerOutletData"]},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],features:[zr]})}return n})(),bb=class{route;childContexts;parent;outletData;constructor(e,t,r,i){this.route=e,this.childContexts=t,this.parent=r,this.outletData=i}get(e,t){return e===Tn?this.route:e===Ns?this.childContexts:e===KM?this.outletData:this.parent.get(e,t)}},ku=new X(""),Db=(()=>{class n{outletDataSubscriptions=new Map;bindActivatedRouteToOutletComponent(t){this.unsubscribeFromRouteData(t),this.subscribeToRouteData(t)}unsubscribeFromRouteData(t){this.outletDataSubscriptions.get(t)?.unsubscribe(),this.outletDataSubscriptions.delete(t)}subscribeToRouteData(t){let{activatedRoute:r}=t,i=xl([r.queryParams,r.params,r.data]).pipe(yt(([o,s,a],l)=>(a=H(H(H({},o),s),a),l===0?se(a):Promise.resolve(a)))).subscribe(o=>{if(!t.isActivated||!t.activatedComponentRef||t.activatedRoute!==r||r.component===null){this.unsubscribeFromRouteData(t);return}let s=tM(r.component);if(!s){this.unsubscribeFromRouteData(t);return}for(let{templateName:a}of s.inputs)t.activatedComponentRef.setInput(a,o[a])});this.outletDataSubscriptions.set(t,i)}static \u0275fac=function(r){return new(r||n)};static \u0275prov=Q({token:n,factory:n.\u0275fac})}return n})(),Ou=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275cmp=Xe({type:n,selectors:[["ng-component"]],exportAs:["emptyRouterOutlet"],decls:1,vars:0,template:function(r,i){r&1&&q(0,"router-outlet")},dependencies:[Au],encapsulation:2})}return n})();function xb(n){let e=n.children&&n.children.map(xb),t=e?ne(H({},n),{children:e}):H({},n);return!t.component&&!t.loadComponent&&(e||t.loadChildren)&&t.outlet&&t.outlet!==we&&(t.component=Ou),t}function H5(n,e,t){let r=Du(n,e._root,t?t._root:void 0);return new Su(r,e)}function Du(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){let r=t.value;r._futureSnapshot=e.value;let i=z5(n,e,t);return new Nn(r,i)}else{if(n.shouldAttach(e.value)){let o=n.retrieve(e.value);if(o!==null){let s=o.route;return s.value._futureSnapshot=e.value,s.children=e.children.map(a=>Du(n,a)),s}}let r=q5(e.value),i=e.children.map(o=>Du(n,o));return new Nn(r,i)}}function z5(n,e,t){return e.children.map(r=>{for(let i of t.children)if(n.shouldReuseRoute(r.value,i.value.snapshot))return Du(n,r,i);return Du(n,r)})}function q5(n){return new Tn(new _t(n.url),new _t(n.params),new _t(n.queryParams),new _t(n.fragment),new _t(n.data),n.outlet,n.component,n)}var mc=class{redirectTo;navigationBehaviorOptions;constructor(e,t){this.redirectTo=e,this.navigationBehaviorOptions=t}},YM="ngNavigationCancelingError";function Ap(n,e){let{redirectTo:t,navigationBehaviorOptions:r}=Io(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,i=QM(!1,gn.Redirect);return i.url=t,i.navigationBehaviorOptions=r,i}function QM(n,e){let t=new Error(`NavigationCancelingError: ${n||""}`);return t[YM]=!0,t.cancellationCode=e,t}function W5(n){return ZM(n)&&Io(n.url)}function ZM(n){return!!n&&n[YM]}var G5=(n,e,t,r)=>Ce(i=>(new wb(e,i.targetRouterState,i.currentRouterState,t,r).activate(n),i)),wb=class{routeReuseStrategy;futureState;currState;forwardEvent;inputBindingEnabled;constructor(e,t,r,i,o){this.routeReuseStrategy=e,this.futureState=t,this.currState=r,this.forwardEvent=i,this.inputBindingEnabled=o}activate(e){let t=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,r,e),ub(this.futureState.root),this.activateChildRoutes(t,r,e)}deactivateChildRoutes(e,t,r){let i=ac(t);e.children.forEach(o=>{let s=o.value.outlet;this.deactivateRoutes(o,i[s],r),delete i[s]}),Object.values(i).forEach(o=>{this.deactivateRouteAndItsChildren(o,r)})}deactivateRoutes(e,t,r){let i=e.value,o=t?t.value:null;if(i===o)if(i.component){let s=r.getContext(i.outlet);s&&this.deactivateChildRoutes(e,t,s.children)}else this.deactivateChildRoutes(e,t,r);else o&&this.deactivateRouteAndItsChildren(t,r)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){let r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,o=ac(e);for(let s of Object.values(o))this.deactivateRouteAndItsChildren(s,i);if(r&&r.outlet){let s=r.outlet.detach(),a=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:s,route:e,contexts:a})}}deactivateRouteAndOutlet(e,t){let r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,o=ac(e);for(let s of Object.values(o))this.deactivateRouteAndItsChildren(s,i);r&&(r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated()),r.attachRef=null,r.route=null)}activateChildRoutes(e,t,r){let i=ac(t);e.children.forEach(o=>{this.activateRoutes(o,i[o.value.outlet],r),this.forwardEvent(new hc(o.value.snapshot))}),e.children.length&&this.forwardEvent(new Tp(e.value.snapshot))}activateRoutes(e,t,r){let i=e.value,o=t?t.value:null;if(ub(i),i===o)if(i.component){let s=r.getOrCreateContext(i.outlet);this.activateChildRoutes(e,t,s.children)}else this.activateChildRoutes(e,t,r);else if(i.component){let s=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){let a=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),s.children.onOutletReAttached(a.contexts),s.attachRef=a.componentRef,s.route=a.route.value,s.outlet&&s.outlet.attach(a.componentRef,a.route.value),ub(a.route.value),this.activateChildRoutes(e,null,s.children)}else s.attachRef=null,s.route=i,s.outlet&&s.outlet.activateWith(i,s.injector),this.activateChildRoutes(e,null,s.children)}else this.activateChildRoutes(e,null,r)}},kp=class{path;route;constructor(e){this.path=e,this.route=this.path[this.path.length-1]}},uc=class{component;route;constructor(e,t){this.component=e,this.route=t}};function K5(n,e,t){let r=n._root,i=e?e._root:null;return yu(r,i,t,[r.value])}function Y5(n){let e=n.routeConfig?n.routeConfig.canActivateChild:null;return!e||e.length===0?null:{node:n,guards:e}}function yc(n,e){let t=Symbol(),r=e.get(n,t);return r===t?typeof n=="function"&&!o0(n)?n:e.get(n):r}function yu(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let o=ac(e);return n.children.forEach(s=>{Q5(s,o[s.value.outlet],t,r.concat([s.value]),i),delete o[s.value.outlet]}),Object.entries(o).forEach(([s,a])=>wu(a,t.getContext(s),i)),i}function Q5(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let o=n.value,s=e?e.value:null,a=t?t.getContext(n.value.outlet):null;if(s&&o.routeConfig===s.routeConfig){let l=Z5(s,o,o.routeConfig.runGuardsAndResolvers);l?i.canActivateChecks.push(new kp(r)):(o.data=s.data,o._resolvedData=s._resolvedData),o.component?yu(n,e,a?a.children:null,r,i):yu(n,e,t,r,i),l&&a&&a.outlet&&a.outlet.isActivated&&i.canDeactivateChecks.push(new uc(a.outlet.component,s))}else s&&wu(e,a,i),i.canActivateChecks.push(new kp(r)),o.component?yu(n,null,a?a.children:null,r,i):yu(n,null,t,r,i);return i}function Z5(n,e,t){if(typeof t=="function")return t(n,e);switch(t){case"pathParamsChange":return!As(n.url,e.url);case"pathParamsOrQueryParamsChange":return!As(n.url,e.url)||!Qr(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!yb(n,e)||!Qr(n.queryParams,e.queryParams);case"paramsChange":default:return!yb(n,e)}}function wu(n,e,t){let r=ac(n),i=n.value;Object.entries(r).forEach(([o,s])=>{i.component?e?wu(s,e.children.getContext(o),t):wu(s,null,t):wu(s,e,t)}),i.component?e&&e.outlet&&e.outlet.isActivated?t.canDeactivateChecks.push(new uc(e.outlet.component,i)):t.canDeactivateChecks.push(new uc(null,i)):t.canDeactivateChecks.push(new uc(null,i))}function Ru(n){return typeof n=="function"}function X5(n){return typeof n=="boolean"}function J5(n){return n&&Ru(n.canLoad)}function ej(n){return n&&Ru(n.canActivate)}function tj(n){return n&&Ru(n.canActivateChild)}function nj(n){return n&&Ru(n.canDeactivate)}function rj(n){return n&&Ru(n.canMatch)}function XM(n){return n instanceof vi||n?.name==="EmptyError"}var hp=Symbol("INITIAL_VALUE");function vc(){return yt(n=>xl(n.map(e=>e.pipe(hr(1),Al(hp)))).pipe(Ce(e=>{for(let t of e)if(t!==!0){if(t===hp)return hp;if(t===!1||ij(t))return t}return!0}),Mt(e=>e!==hp),hr(1)))}function ij(n){return Io(n)||n instanceof mc}function oj(n,e){return ot(t=>{let{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:o,canDeactivateChecks:s}}=t;return s.length===0&&o.length===0?se(ne(H({},t),{guardsResult:!0})):sj(s,r,i,n).pipe(ot(a=>a&&X5(a)?aj(r,o,n,e):se(a)),Ce(a=>ne(H({},t),{guardsResult:a})))})}function sj(n,e,t,r){return Ge(n).pipe(ot(i=>fj(i.component,i.route,t,e,r)),bi(i=>i!==!0,!0))}function aj(n,e,t,r){return Ge(e).pipe(yi(i=>Ra(lj(i.route.parent,r),cj(i.route,r),dj(n,i.path,t),uj(n,i.route,t))),bi(i=>i!==!0,!0))}function cj(n,e){return n!==null&&e&&e(new Dp(n)),se(!0)}function lj(n,e){return n!==null&&e&&e(new Sp(n)),se(!0)}function uj(n,e,t){let r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||r.length===0)return se(!0);let i=r.map(o=>Ml(()=>{let s=_c(e)??t,a=yc(o,s),l=ej(a)?a.canActivate(e,n):bt(s,()=>a(e,n));return Ri(l).pipe(bi())}));return se(i).pipe(vc())}function dj(n,e,t){let r=e[e.length-1],o=e.slice(0,e.length-1).reverse().map(s=>Y5(s)).filter(s=>s!==null).map(s=>Ml(()=>{let a=s.guards.map(l=>{let u=_c(s.node)??t,f=yc(l,u),m=tj(f)?f.canActivateChild(r,n):bt(u,()=>f(r,n));return Ri(m).pipe(bi())});return se(a).pipe(vc())}));return se(o).pipe(vc())}function fj(n,e,t,r,i){let o=e&&e.routeConfig?e.routeConfig.canDeactivate:null;if(!o||o.length===0)return se(!0);let s=o.map(a=>{let l=_c(e)??i,u=yc(a,l),f=nj(u)?u.canDeactivate(n,e,t,r):bt(l,()=>u(n,e,t,r));return Ri(f).pipe(bi())});return se(s).pipe(vc())}function hj(n,e,t,r){let i=e.canLoad;if(i===void 0||i.length===0)return se(!0);let o=i.map(s=>{let a=yc(s,n),l=J5(a)?a.canLoad(e,t):bt(n,()=>a(e,t));return Ri(l)});return se(o).pipe(vc(),JM(r))}function JM(n){return Av(Nt(e=>{if(typeof e!="boolean")throw Ap(n,e)}),Ce(e=>e===!0))}function pj(n,e,t,r){let i=e.canMatch;if(!i||i.length===0)return se(!0);let o=i.map(s=>{let a=yc(s,n),l=rj(a)?a.canMatch(e,t):bt(n,()=>a(e,t));return Ri(l)});return se(o).pipe(vc(),JM(r))}var xu=class{segmentGroup;constructor(e){this.segmentGroup=e||null}},Mu=class extends Error{urlTree;constructor(e){super(),this.urlTree=e}};function sc(n){return Oa(new xu(n))}function gj(n){return Oa(new Z(4e3,!1))}function mj(n){return Oa(QM(!1,gn.GuardRejected))}var Eb=class{urlSerializer;urlTree;constructor(e,t){this.urlSerializer=e,this.urlTree=t}lineralizeSegments(e,t){let r=[],i=t.root;for(;;){if(r=r.concat(i.segments),i.numberOfChildren===0)return se(r);if(i.numberOfChildren>1||!i.children[we])return gj(`${e.redirectTo}`);i=i.children[we]}}applyRedirectCommands(e,t,r,i,o){return vj(t,i,o).pipe(Ce(s=>{if(s instanceof Xr)throw new Mu(s);let a=this.applyRedirectCreateUrlTree(s,this.urlSerializer.parse(s),e,r);if(s[0]==="/")throw new Mu(a);return a}))}applyRedirectCreateUrlTree(e,t,r,i){let o=this.createSegmentGroup(e,t.root,r,i);return new Xr(o,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){let r={};return Object.entries(e).forEach(([i,o])=>{if(typeof o=="string"&&o[0]===":"){let a=o.substring(1);r[i]=t[a]}else r[i]=o}),r}createSegmentGroup(e,t,r,i){let o=this.createSegments(e,t.segments,r,i),s={};return Object.entries(t.children).forEach(([a,l])=>{s[a]=this.createSegmentGroup(e,l,r,i)}),new Le(o,s)}createSegments(e,t,r,i){return t.map(o=>o.path[0]===":"?this.findPosParam(e,o,i):this.findOrReturn(o,r))}findPosParam(e,t,r){let i=r[t.path.substring(1)];if(!i)throw new Z(4001,!1);return i}findOrReturn(e,t){let r=0;for(let i of t){if(i.path===e.path)return t.splice(r),i;r++}return e}};function vj(n,e,t){if(typeof n=="string")return se(n);let r=n,{queryParams:i,fragment:o,routeConfig:s,url:a,outlet:l,params:u,data:f,title:m}=e;return Ri(bt(t,()=>r({params:u,data:f,queryParams:i,fragment:o,routeConfig:s,url:a,outlet:l,title:m})))}var Cb={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function _j(n,e,t,r,i){let o=eP(n,e,t);return o.matched?(r=j5(e,r),pj(r,e,t,i).pipe(Ce(s=>s===!0?o:H({},Cb)))):se(o)}function eP(n,e,t){if(e.path==="**")return yj(t);if(e.path==="")return e.pathMatch==="full"&&(n.hasChildren()||t.length>0)?H({},Cb):{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};let i=(e.matcher||MM)(t,n,e);if(!i)return H({},Cb);let o={};Object.entries(i.posParams??{}).forEach(([a,l])=>{o[a]=l.path});let s=i.consumed.length>0?H(H({},o),i.consumed[i.consumed.length-1].parameters):o;return{matched:!0,consumedSegments:i.consumed,remainingSegments:t.slice(i.consumed.length),parameters:s,positionalParamSegments:i.posParams??{}}}function yj(n){return{matched:!0,parameters:n.length>0?AM(n).parameters:{},consumedSegments:n,remainingSegments:[],positionalParamSegments:{}}}function TM(n,e,t,r){return t.length>0&&Ej(n,t,r)?{segmentGroup:new Le(e,wj(r,new Le(t,n.children))),slicedSegments:[]}:t.length===0&&Cj(n,t,r)?{segmentGroup:new Le(n.segments,bj(n,t,r,n.children)),slicedSegments:t}:{segmentGroup:new Le(n.segments,n.children),slicedSegments:t}}function bj(n,e,t,r){let i={};for(let o of t)if(Rp(n,e,o)&&!r[Dr(o)]){let s=new Le([],{});i[Dr(o)]=s}return H(H({},r),i)}function wj(n,e){let t={};t[we]=e;for(let r of n)if(r.path===""&&Dr(r)!==we){let i=new Le([],{});t[Dr(r)]=i}return t}function Ej(n,e,t){return t.some(r=>Rp(n,e,r)&&Dr(r)!==we)}function Cj(n,e,t){return t.some(r=>Rp(n,e,r))}function Rp(n,e,t){return(n.hasChildren()||e.length>0)&&t.pathMatch==="full"?!1:t.path===""}function Ij(n,e,t){return e.length===0&&!n.children[t]}var Ib=class{};function Sj(n,e,t,r,i,o,s="emptyOnly"){return new Sb(n,e,t,r,i,s,o).recognize()}var Tj=31,Sb=class{injector;configLoader;rootComponentType;config;urlTree;paramsInheritanceStrategy;urlSerializer;applyRedirects;absoluteRedirectCount=0;allowRedirects=!0;constructor(e,t,r,i,o,s,a){this.injector=e,this.configLoader=t,this.rootComponentType=r,this.config=i,this.urlTree=o,this.paramsInheritanceStrategy=s,this.urlSerializer=a,this.applyRedirects=new Eb(this.urlSerializer,this.urlTree)}noMatchError(e){return new Z(4002,`'${e.segmentGroup}'`)}recognize(){let e=TM(this.urlTree.root,[],[],this.config).segmentGroup;return this.match(e).pipe(Ce(({children:t,rootSnapshot:r})=>{let i=new Nn(r,t),o=new Tu("",i),s=jM(r,[],this.urlTree.queryParams,this.urlTree.fragment);return s.queryParams=this.urlTree.queryParams,o.url=this.urlSerializer.serialize(s),{state:o,tree:s}}))}match(e){let t=new ks([],Object.freeze({}),Object.freeze(H({},this.urlTree.queryParams)),this.urlTree.fragment,Object.freeze({}),we,this.rootComponentType,null,{});return this.processSegmentGroup(this.injector,this.config,e,we,t).pipe(Ce(r=>({children:r,rootSnapshot:t})),_i(r=>{if(r instanceof Mu)return this.urlTree=r.urlTree,this.match(r.urlTree.root);throw r instanceof xu?this.noMatchError(r):r}))}processSegmentGroup(e,t,r,i,o){return r.segments.length===0&&r.hasChildren()?this.processChildren(e,t,r,o):this.processSegment(e,t,r,r.segments,i,!0,o).pipe(Ce(s=>s instanceof Nn?[s]:[]))}processChildren(e,t,r,i){let o=[];for(let s of Object.keys(r.children))s==="primary"?o.unshift(s):o.push(s);return Ge(o).pipe(yi(s=>{let a=r.children[s],l=B5(t,s);return this.processSegmentGroup(e,l,a,s,i)}),Hv((s,a)=>(s.push(...a),s)),oo(null),Bv(),ot(s=>{if(s===null)return sc(r);let a=tP(s);return Dj(a),se(a)}))}processSegment(e,t,r,i,o,s,a){return Ge(t).pipe(yi(l=>this.processSegmentAgainstRoute(l._injector??e,t,l,r,i,o,s,a).pipe(_i(u=>{if(u instanceof xu)return se(null);throw u}))),bi(l=>!!l),_i(l=>{if(XM(l))return Ij(r,i,o)?se(new Ib):sc(r);throw l}))}processSegmentAgainstRoute(e,t,r,i,o,s,a,l){return Dr(r)!==s&&(s===we||!Rp(i,o,r))?sc(i):r.redirectTo===void 0?this.matchSegmentAgainstRoute(e,i,r,o,s,l):this.allowRedirects&&a?this.expandSegmentAgainstRouteUsingRedirect(e,i,t,r,o,s,l):sc(i)}expandSegmentAgainstRouteUsingRedirect(e,t,r,i,o,s,a){let{matched:l,parameters:u,consumedSegments:f,positionalParamSegments:m,remainingSegments:_}=eP(t,i,o);if(!l)return sc(t);typeof i.redirectTo=="string"&&i.redirectTo[0]==="/"&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>Tj&&(this.allowRedirects=!1));let E=new ks(o,u,Object.freeze(H({},this.urlTree.queryParams)),this.urlTree.fragment,DM(i),Dr(i),i.component??i._loadedComponent??null,i,xM(i)),x=Pp(E,a,this.paramsInheritanceStrategy);return E.params=Object.freeze(x.params),E.data=Object.freeze(x.data),this.applyRedirects.applyRedirectCommands(f,i.redirectTo,m,E,e).pipe(yt(L=>this.applyRedirects.lineralizeSegments(i,L)),ot(L=>this.processSegment(e,r,t,L.concat(_),s,!1,a)))}matchSegmentAgainstRoute(e,t,r,i,o,s){let a=_j(t,r,i,e,this.urlSerializer);return r.path==="**"&&(t.children={}),a.pipe(yt(l=>l.matched?(e=r._injector??e,this.getChildConfig(e,r,i).pipe(yt(({routes:u})=>{let f=r._loadedInjector??e,{parameters:m,consumedSegments:_,remainingSegments:E}=l,x=new ks(_,m,Object.freeze(H({},this.urlTree.queryParams)),this.urlTree.fragment,DM(r),Dr(r),r.component??r._loadedComponent??null,r,xM(r)),F=Pp(x,s,this.paramsInheritanceStrategy);x.params=Object.freeze(F.params),x.data=Object.freeze(F.data);let{segmentGroup:L,slicedSegments:W}=TM(t,_,E,u);if(W.length===0&&L.hasChildren())return this.processChildren(f,u,L,x).pipe(Ce(de=>new Nn(x,de)));if(u.length===0&&W.length===0)return se(new Nn(x,[]));let oe=Dr(r)===o;return this.processSegment(f,u,L,W,oe?we:o,!0,x).pipe(Ce(de=>new Nn(x,de instanceof Nn?[de]:[])))}))):sc(t)))}getChildConfig(e,t,r){return t.children?se({routes:t.children,injector:e}):t.loadChildren?t._loadedRoutes!==void 0?se({routes:t._loadedRoutes,injector:t._loadedInjector}):hj(e,t,r,this.urlSerializer).pipe(ot(i=>i?this.configLoader.loadChildren(e,t).pipe(Nt(o=>{t._loadedRoutes=o.routes,t._loadedInjector=o.injector})):mj(t))):se({routes:[],injector:e})}};function Dj(n){n.sort((e,t)=>e.value.outlet===we?-1:t.value.outlet===we?1:e.value.outlet.localeCompare(t.value.outlet))}function xj(n){let e=n.value.routeConfig;return e&&e.path===""}function tP(n){let e=[],t=new Set;for(let r of n){if(!xj(r)){e.push(r);continue}let i=e.find(o=>r.value.routeConfig===o.value.routeConfig);i!==void 0?(i.children.push(...r.children),t.add(i)):e.push(r)}for(let r of t){let i=tP(r.children);e.push(new Nn(r.value,i))}return e.filter(r=>!t.has(r))}function DM(n){return n.data||{}}function xM(n){return n.resolve||{}}function Mj(n,e,t,r,i,o){return ot(s=>Sj(n,e,t,r,s.extractedUrl,i,o).pipe(Ce(({state:a,tree:l})=>ne(H({},s),{targetSnapshot:a,urlAfterRedirects:l}))))}function Pj(n,e){return ot(t=>{let{targetSnapshot:r,guards:{canActivateChecks:i}}=t;if(!i.length)return se(t);let o=new Set(i.map(l=>l.route)),s=new Set;for(let l of o)if(!s.has(l))for(let u of nP(l))s.add(u);let a=0;return Ge(s).pipe(yi(l=>o.has(l)?Aj(l,r,n,e):(l.data=Pp(l,l.parent,n).resolve,se(void 0))),Nt(()=>a++),Na(1),ot(l=>a===s.size?se(t):en))})}function nP(n){let e=n.children.map(t=>nP(t)).flat();return[n,...e]}function Aj(n,e,t,r){let i=n.routeConfig,o=n._resolve;return i?.title!==void 0&&!GM(i)&&(o[Pu]=i.title),Ml(()=>(n.data=Pp(n,n.parent,t).resolve,kj(o,n,e,r).pipe(Ce(s=>(n._resolvedData=s,n.data=H(H({},n.data),s),null)))))}function kj(n,e,t,r){let i=hb(n);if(i.length===0)return se({});let o={};return Ge(i).pipe(ot(s=>Oj(n[s],e,t,r).pipe(bi(),Nt(a=>{if(a instanceof mc)throw Ap(new Co,a);o[s]=a}))),Na(1),Ce(()=>o),_i(s=>XM(s)?en:Oa(s)))}function Oj(n,e,t,r){let i=_c(e)??r,o=yc(n,i),s=o.resolve?o.resolve(e,t):bt(i,()=>o(e,t));return Ri(s)}function db(n){return yt(e=>{let t=n(e);return t?Ge(t).pipe(Ce(()=>e)):se(e)})}var Mb=(()=>{class n{buildTitle(t){let r,i=t.root;for(;i!==void 0;)r=this.getResolvedTitleForRoute(i)??r,i=i.children.find(o=>o.outlet===we);return r}getResolvedTitleForRoute(t){return t.data[Pu]}static \u0275fac=function(r){return new(r||n)};static \u0275prov=Q({token:n,factory:()=>k(rP),providedIn:"root"})}return n})(),rP=(()=>{class n extends Mb{title;constructor(t){super(),this.title=t}updateTitle(t){let r=this.buildTitle(t);r!==void 0&&this.title.setTitle(r)}static \u0275fac=function(r){return new(r||n)(re(dp))};static \u0275prov=Q({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),To=new X("",{providedIn:"root",factory:()=>({})}),Fs=new X(""),Np=(()=>{class n{componentLoaders=new WeakMap;childrenLoaders=new WeakMap;onLoadStartListener;onLoadEndListener;compiler=k(Py);loadComponent(t,r){if(this.componentLoaders.get(r))return this.componentLoaders.get(r);if(r._loadedComponent)return se(r._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(r);let i=Ri(bt(t,()=>r.loadComponent())).pipe(Ce(oP),yt(sP),Nt(s=>{this.onLoadEndListener&&this.onLoadEndListener(r),r._loadedComponent=s}),Pl(()=>{this.componentLoaders.delete(r)})),o=new Ma(i,()=>new We).pipe(xa());return this.componentLoaders.set(r,o),o}loadChildren(t,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return se({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);let o=iP(r,this.compiler,t,this.onLoadEndListener).pipe(Pl(()=>{this.childrenLoaders.delete(r)})),s=new Ma(o,()=>new We).pipe(xa());return this.childrenLoaders.set(r,s),s}static \u0275fac=function(r){return new(r||n)};static \u0275prov=Q({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function iP(n,e,t,r){return Ri(bt(t,()=>n.loadChildren())).pipe(Ce(oP),yt(sP),ot(i=>i instanceof Gh||Array.isArray(i)?se(i):Ge(e.compileModuleAsync(i))),Ce(i=>{r&&r(n);let o,s,a=!1;return Array.isArray(i)?(s=i,a=!0):(o=i.create(t).injector,s=o.get(Fs,[],{optional:!0,self:!0}).flat()),{routes:s.map(xb),injector:o}}))}function Rj(n){return n&&typeof n=="object"&&"default"in n}function oP(n){return Rj(n)?n.default:n}function sP(n){return se(n)}var Fp=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275prov=Q({token:n,factory:()=>k(Nj),providedIn:"root"})}return n})(),Nj=(()=>{class n{shouldProcessUrl(t){return!0}extract(t){return t}merge(t,r){return t}static \u0275fac=function(r){return new(r||n)};static \u0275prov=Q({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),Pb=new X(""),Ab=new X("");function aP(n,e,t){let r=n.get(Ab),i=n.get(pt);if(!i.startViewTransition||r.skipNextTransition)return r.skipNextTransition=!1,new Promise(u=>setTimeout(u));let o,s=new Promise(u=>{o=u}),a=i.startViewTransition(()=>(o(),Fj(n)));a.ready.catch(u=>{});let{onViewTransitionCreated:l}=r;return l&&bt(n,()=>l({transition:a,from:e,to:t})),s}function Fj(n){return new Promise(e=>{ou({read:()=>setTimeout(e)},{injector:n})})}var kb=new X(""),Lp=(()=>{class n{currentNavigation=wn(null,{equal:()=>!1});currentTransition=null;lastSuccessfulNavigation=null;events=new We;transitionAbortWithErrorSubject=new We;configLoader=k(Np);environmentInjector=k(ht);destroyRef=k(yr);urlSerializer=k(Rs);rootContexts=k(Ns);location=k(wo);inputBindingEnabled=k(ku,{optional:!0})!==null;titleStrategy=k(Mb);options=k(To,{optional:!0})||{};paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly";urlHandlingStrategy=k(Fp);createViewTransition=k(Pb,{optional:!0});navigationErrorHandler=k(kb,{optional:!0});navigationId=0;get hasRequestedNavigation(){return this.navigationId!==0}transitions;afterPreactivation=()=>se(void 0);rootComponentType=null;destroyed=!1;constructor(){let t=i=>this.events.next(new Cp(i)),r=i=>this.events.next(new Ip(i));this.configLoader.onLoadEndListener=r,this.configLoader.onLoadStartListener=t,this.destroyRef.onDestroy(()=>{this.destroyed=!0})}complete(){this.transitions?.complete()}handleNavigationRequest(t){let r=++this.navigationId;Vt(()=>{this.transitions?.next(ne(H({},t),{extractedUrl:this.urlHandlingStrategy.extract(t.rawUrl),targetSnapshot:null,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null,abortController:new AbortController,id:r}))})}setupNavigations(t){return this.transitions=new _t(null),this.transitions.pipe(Mt(r=>r!==null),yt(r=>{let i=!1;return se(r).pipe(yt(o=>{if(this.navigationId>r.id)return this.cancelNavigationTransition(r,"",gn.SupersededByNewNavigation),en;this.currentTransition=r,this.currentNavigation.set({id:o.id,initialUrl:o.rawUrl,extractedUrl:o.extractedUrl,targetBrowserUrl:typeof o.extras.browserUrl=="string"?this.urlSerializer.parse(o.extras.browserUrl):o.extras.browserUrl,trigger:o.source,extras:o.extras,previousNavigation:this.lastSuccessfulNavigation?ne(H({},this.lastSuccessfulNavigation),{previousNavigation:null}):null,abort:()=>o.abortController.abort()});let s=!t.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl(),a=o.extras.onSameUrlNavigation??t.onSameUrlNavigation;if(!s&&a!=="reload")return this.events.next(new Jr(o.id,this.urlSerializer.serialize(o.rawUrl),"",dc.IgnoredSameUrlNavigation)),o.resolve(!1),en;if(this.urlHandlingStrategy.shouldProcessUrl(o.rawUrl))return se(o).pipe(yt(l=>(this.events.next(new So(l.id,this.urlSerializer.serialize(l.extractedUrl),l.source,l.restoredState)),l.id!==this.navigationId?en:Promise.resolve(l))),Mj(this.environmentInjector,this.configLoader,this.rootComponentType,t.config,this.urlSerializer,this.paramsInheritanceStrategy),Nt(l=>{r.targetSnapshot=l.targetSnapshot,r.urlAfterRedirects=l.urlAfterRedirects,this.currentNavigation.update(f=>(f.finalUrl=l.urlAfterRedirects,f));let u=new Cu(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot);this.events.next(u)}));if(s&&this.urlHandlingStrategy.shouldProcessUrl(o.currentRawUrl)){let{id:l,extractedUrl:u,source:f,restoredState:m,extras:_}=o,E=new So(l,this.urlSerializer.serialize(u),f,m);this.events.next(E);let x=qM(this.rootComponentType).snapshot;return this.currentTransition=r=ne(H({},o),{targetSnapshot:x,urlAfterRedirects:u,extras:ne(H({},_),{skipLocationChange:!1,replaceUrl:!1})}),this.currentNavigation.update(F=>(F.finalUrl=u,F)),se(r)}else return this.events.next(new Jr(o.id,this.urlSerializer.serialize(o.extractedUrl),"",dc.IgnoredByUrlHandlingStrategy)),o.resolve(!1),en}),Nt(o=>{let s=new yp(o.id,this.urlSerializer.serialize(o.extractedUrl),this.urlSerializer.serialize(o.urlAfterRedirects),o.targetSnapshot);this.events.next(s)}),Ce(o=>(this.currentTransition=r=ne(H({},o),{guards:K5(o.targetSnapshot,o.currentSnapshot,this.rootContexts)}),r)),oj(this.environmentInjector,o=>this.events.next(o)),Nt(o=>{if(r.guardsResult=o.guardsResult,o.guardsResult&&typeof o.guardsResult!="boolean")throw Ap(this.urlSerializer,o.guardsResult);let s=new bp(o.id,this.urlSerializer.serialize(o.extractedUrl),this.urlSerializer.serialize(o.urlAfterRedirects),o.targetSnapshot,!!o.guardsResult);this.events.next(s)}),Mt(o=>o.guardsResult?!0:(this.cancelNavigationTransition(o,"",gn.GuardRejected),!1)),db(o=>{if(o.guards.canActivateChecks.length!==0)return se(o).pipe(Nt(s=>{let a=new wp(s.id,this.urlSerializer.serialize(s.extractedUrl),this.urlSerializer.serialize(s.urlAfterRedirects),s.targetSnapshot);this.events.next(a)}),yt(s=>{let a=!1;return se(s).pipe(Pj(this.paramsInheritanceStrategy,this.environmentInjector),Nt({next:()=>a=!0,complete:()=>{a||this.cancelNavigationTransition(s,"",gn.NoDataFromResolver)}}))}),Nt(s=>{let a=new Ep(s.id,this.urlSerializer.serialize(s.extractedUrl),this.urlSerializer.serialize(s.urlAfterRedirects),s.targetSnapshot);this.events.next(a)}))}),db(o=>{let s=a=>{let l=[];if(a.routeConfig?.loadComponent){let u=_c(a)??this.environmentInjector;l.push(this.configLoader.loadComponent(u,a.routeConfig).pipe(Nt(f=>{a.component=f}),Ce(()=>{})))}for(let u of a.children)l.push(...s(u));return l};return xl(s(o.targetSnapshot.root)).pipe(oo(null),hr(1))}),db(()=>this.afterPreactivation()),yt(()=>{let{currentSnapshot:o,targetSnapshot:s}=r,a=this.createViewTransition?.(this.environmentInjector,o.root,s.root);return a?Ge(a).pipe(Ce(()=>r)):se(r)}),Ce(o=>{let s=H5(t.routeReuseStrategy,o.targetSnapshot,o.currentRouterState);return this.currentTransition=r=ne(H({},o),{targetRouterState:s}),this.currentNavigation.update(a=>(a.targetRouterState=s,a)),r}),Nt(()=>{this.events.next(new Iu)}),G5(this.rootContexts,t.routeReuseStrategy,o=>this.events.next(o),this.inputBindingEnabled),hr(1),wi(new ge(o=>{let s=r.abortController.signal,a=()=>o.next();return s.addEventListener("abort",a),()=>s.removeEventListener("abort",a)}).pipe(Mt(()=>!i&&!r.targetRouterState),Nt(()=>{this.cancelNavigationTransition(r,r.abortController.signal.reason+"",gn.Aborted)}))),Nt({next:o=>{i=!0,this.lastSuccessfulNavigation=Vt(this.currentNavigation),this.events.next(new Ln(o.id,this.urlSerializer.serialize(o.extractedUrl),this.urlSerializer.serialize(o.urlAfterRedirects))),this.titleStrategy?.updateTitle(o.targetRouterState.snapshot),o.resolve(!0)},complete:()=>{i=!0}}),wi(this.transitionAbortWithErrorSubject.pipe(Nt(o=>{throw o}))),Pl(()=>{i||this.cancelNavigationTransition(r,"",gn.SupersededByNewNavigation),this.currentTransition?.id===r.id&&(this.currentNavigation.set(null),this.currentTransition=null)}),_i(o=>{if(this.destroyed)return r.resolve(!1),en;if(i=!0,ZM(o))this.events.next(new Zr(r.id,this.urlSerializer.serialize(r.extractedUrl),o.message,o.cancellationCode)),W5(o)?this.events.next(new gc(o.url,o.navigationBehaviorOptions)):r.resolve(!1);else{let s=new fc(r.id,this.urlSerializer.serialize(r.extractedUrl),o,r.targetSnapshot??void 0);try{let a=bt(this.environmentInjector,()=>this.navigationErrorHandler?.(s));if(a instanceof mc){let{message:l,cancellationCode:u}=Ap(this.urlSerializer,a);this.events.next(new Zr(r.id,this.urlSerializer.serialize(r.extractedUrl),l,u)),this.events.next(new gc(a.redirectTo,a.navigationBehaviorOptions))}else throw this.events.next(s),o}catch(a){this.options.resolveNavigationPromiseOnError?r.resolve(!1):r.reject(a)}}return en}))}))}cancelNavigationTransition(t,r,i){let o=new Zr(t.id,this.urlSerializer.serialize(t.extractedUrl),r,i);this.events.next(o),t.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){let t=this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))),r=Vt(this.currentNavigation),i=r?.targetBrowserUrl??r?.extractedUrl;return t.toString()!==i?.toString()&&!r?.extras.skipLocationChange}static \u0275fac=function(r){return new(r||n)};static \u0275prov=Q({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function Lj(n){return n!==lc}var cP=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275prov=Q({token:n,factory:()=>k(Vj),providedIn:"root"})}return n})(),Op=class{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}},Vj=(()=>{class n extends Op{static \u0275fac=(()=>{let t;return function(i){return(t||(t=qr(n)))(i||n)}})();static \u0275prov=Q({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),lP=(()=>{class n{urlSerializer=k(Rs);options=k(To,{optional:!0})||{};canceledNavigationResolution=this.options.canceledNavigationResolution||"replace";location=k(wo);urlHandlingStrategy=k(Fp);urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred";currentUrlTree=new Xr;getCurrentUrlTree(){return this.currentUrlTree}rawUrlTree=this.currentUrlTree;getRawUrlTree(){return this.rawUrlTree}createBrowserPath({finalUrl:t,initialUrl:r,targetBrowserUrl:i}){let o=t!==void 0?this.urlHandlingStrategy.merge(t,r):r,s=i??o;return s instanceof Xr?this.urlSerializer.serialize(s):s}commitTransition({targetRouterState:t,finalUrl:r,initialUrl:i}){r&&t?(this.currentUrlTree=r,this.rawUrlTree=this.urlHandlingStrategy.merge(r,i),this.routerState=t):this.rawUrlTree=i}routerState=qM(null);getRouterState(){return this.routerState}stateMemento=this.createStateMemento();updateStateMemento(){this.stateMemento=this.createStateMemento()}createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}resetInternalState({finalUrl:t}){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t??this.rawUrlTree)}static \u0275fac=function(r){return new(r||n)};static \u0275prov=Q({token:n,factory:()=>k(Uj),providedIn:"root"})}return n})(),Uj=(()=>{class n extends lP{currentPageId=0;lastSuccessfulId=-1;restoredState(){return this.location.getState()}get browserPageId(){return this.canceledNavigationResolution!=="computed"?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}registerNonRouterCurrentEntryChangeListener(t){return this.location.subscribe(r=>{r.type==="popstate"&&setTimeout(()=>{t(r.url,r.state,"popstate")})})}handleRouterEvent(t,r){t instanceof So?this.updateStateMemento():t instanceof Jr?this.commitTransition(r):t instanceof Cu?this.urlUpdateStrategy==="eager"&&(r.extras.skipLocationChange||this.setBrowserUrl(this.createBrowserPath(r),r)):t instanceof Iu?(this.commitTransition(r),this.urlUpdateStrategy==="deferred"&&!r.extras.skipLocationChange&&this.setBrowserUrl(this.createBrowserPath(r),r)):t instanceof Zr&&t.code!==gn.SupersededByNewNavigation&&t.code!==gn.Redirect?this.restoreHistory(r):t instanceof fc?this.restoreHistory(r,!0):t instanceof Ln&&(this.lastSuccessfulId=t.id,this.currentPageId=this.browserPageId)}setBrowserUrl(t,{extras:r,id:i}){let{replaceUrl:o,state:s}=r;if(this.location.isCurrentPathEqualTo(t)||o){let a=this.browserPageId,l=H(H({},s),this.generateNgRouterState(i,a));this.location.replaceState(t,"",l)}else{let a=H(H({},s),this.generateNgRouterState(i,this.browserPageId+1));this.location.go(t,"",a)}}restoreHistory(t,r=!1){if(this.canceledNavigationResolution==="computed"){let i=this.browserPageId,o=this.currentPageId-i;o!==0?this.location.historyGo(o):this.getCurrentUrlTree()===t.finalUrl&&o===0&&(this.resetInternalState(t),this.resetUrlToCurrentUrlTree())}else this.canceledNavigationResolution==="replace"&&(r&&this.resetInternalState(t),this.resetUrlToCurrentUrlTree())}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.getRawUrlTree()),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(t,r){return this.canceledNavigationResolution==="computed"?{navigationId:t,\u0275routerPageId:r}:{navigationId:t}}static \u0275fac=(()=>{let t;return function(i){return(t||(t=qr(n)))(i||n)}})();static \u0275prov=Q({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function Vp(n,e){n.events.pipe(Mt(t=>t instanceof Ln||t instanceof Zr||t instanceof fc||t instanceof Jr),Ce(t=>t instanceof Ln||t instanceof Jr?0:(t instanceof Zr?t.code===gn.Redirect||t.code===gn.SupersededByNewNavigation:!1)?2:1),Mt(t=>t!==2),hr(1)).subscribe(()=>{e()})}var jj={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},Bj={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"},Ve=(()=>{class n{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}disposed=!1;nonRouterCurrentEntryChangeSubscription;console=k(by);stateManager=k(lP);options=k(To,{optional:!0})||{};pendingTasks=k(Br);urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred";navigationTransitions=k(Lp);urlSerializer=k(Rs);location=k(wo);urlHandlingStrategy=k(Fp);injector=k(ht);_events=new We;get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}navigated=!1;routeReuseStrategy=k(cP);onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore";config=k(Fs,{optional:!0})?.flat()??[];componentInputBindingEnabled=!!k(ku,{optional:!0});currentNavigation=this.navigationTransitions.currentNavigation.asReadonly();constructor(){this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this).subscribe({error:t=>{this.console.warn(t)}}),this.subscribeToNavigationEvents()}eventsSubscription=new lt;subscribeToNavigationEvents(){let t=this.navigationTransitions.events.subscribe(r=>{try{let i=this.navigationTransitions.currentTransition,o=Vt(this.navigationTransitions.currentNavigation);if(i!==null&&o!==null){if(this.stateManager.handleRouterEvent(r,o),r instanceof Zr&&r.code!==gn.Redirect&&r.code!==gn.SupersededByNewNavigation)this.navigated=!0;else if(r instanceof Ln)this.navigated=!0;else if(r instanceof gc){let s=r.navigationBehaviorOptions,a=this.urlHandlingStrategy.merge(r.url,i.currentRawUrl),l=H({browserUrl:i.extras.browserUrl,info:i.extras.info,skipLocationChange:i.extras.skipLocationChange,replaceUrl:i.extras.replaceUrl||this.urlUpdateStrategy==="eager"||Lj(i.source)},s);this.scheduleNavigation(a,lc,null,l,{resolve:i.resolve,reject:i.reject,promise:i.promise})}}U5(r)&&this._events.next(r)}catch(i){this.navigationTransitions.transitionAbortWithErrorSubject.next(i)}});this.eventsSubscription.add(t)}resetRootComponentType(t){this.routerState.root.component=t,this.navigationTransitions.rootComponentType=t}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),lc,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription??=this.stateManager.registerNonRouterCurrentEntryChangeListener((t,r,i)=>{this.navigateToSyncWithBrowser(t,i,r)})}navigateToSyncWithBrowser(t,r,i){let o={replaceUrl:!0},s=i?.navigationId?i:null;if(i){let l=H({},i);delete l.navigationId,delete l.\u0275routerPageId,Object.keys(l).length!==0&&(o.state=l)}let a=this.parseUrl(t);this.scheduleNavigation(a,r,s,o).catch(l=>{this.disposed||this.injector.get(hn)(l)})}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return Vt(this.navigationTransitions.currentNavigation)}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(t){this.config=t.map(xb),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this._events.unsubscribe(),this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(t,r={}){let{relativeTo:i,queryParams:o,fragment:s,queryParamsHandling:a,preserveFragment:l}=r,u=l?this.currentUrlTree.fragment:s,f=null;switch(a??this.options.defaultQueryParamsHandling){case"merge":f=H(H({},this.currentUrlTree.queryParams),o);break;case"preserve":f=this.currentUrlTree.queryParams;break;default:f=o||null}f!==null&&(f=this.removeEmptyProps(f));let m;try{let _=i?i.snapshot:this.routerState.snapshot.root;m=BM(_)}catch{(typeof t[0]!="string"||t[0][0]!=="/")&&(t=[]),m=this.currentUrlTree.root}return $M(m,t,f,u??null)}navigateByUrl(t,r={skipLocationChange:!1}){let i=Io(t)?t:this.parseUrl(t),o=this.urlHandlingStrategy.merge(i,this.rawUrlTree);return this.scheduleNavigation(o,lc,null,r)}navigate(t,r={skipLocationChange:!1}){return $j(t),this.navigateByUrl(this.createUrlTree(t,r),r)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){try{return this.urlSerializer.parse(t)}catch{return this.urlSerializer.parse("/")}}isActive(t,r){let i;if(r===!0?i=H({},jj):r===!1?i=H({},Bj):i=r,Io(t))return EM(this.currentUrlTree,t,i);let o=this.parseUrl(t);return EM(this.currentUrlTree,o,i)}removeEmptyProps(t){return Object.entries(t).reduce((r,[i,o])=>(o!=null&&(r[i]=o),r),{})}scheduleNavigation(t,r,i,o,s){if(this.disposed)return Promise.resolve(!1);let a,l,u;s?(a=s.resolve,l=s.reject,u=s.promise):u=new Promise((m,_)=>{a=m,l=_});let f=this.pendingTasks.add();return Vp(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(f))}),this.navigationTransitions.handleNavigationRequest({source:r,restoredState:i,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:t,extras:o,resolve:a,reject:l,promise:u,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),u.catch(m=>Promise.reject(m))}static \u0275fac=function(r){return new(r||n)};static \u0275prov=Q({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function $j(n){for(let e=0;e<n.length;e++)if(n[e]==null)throw new Z(4008,!1)}var on=(()=>{class n{router;route;tabIndexAttribute;renderer;el;locationStrategy;reactiveHref=wn(null);get href(){return Vt(this.reactiveHref)}set href(t){this.reactiveHref.set(t)}target;queryParams;fragment;queryParamsHandling;state;info;relativeTo;isAnchorElement;subscription;onChanges=new We;applicationErrorHandler=k(hn);options=k(To,{optional:!0});constructor(t,r,i,o,s,a){this.router=t,this.route=r,this.tabIndexAttribute=i,this.renderer=o,this.el=s,this.locationStrategy=a,this.reactiveHref.set(k(new ep("href"),{optional:!0}));let l=s.nativeElement.tagName?.toLowerCase();this.isAnchorElement=l==="a"||l==="area"||!!(typeof customElements=="object"&&customElements.get(l)?.observedAttributes?.includes?.("href")),this.isAnchorElement?this.setTabIndexIfNotOnNativeEl("0"):this.subscribeToNavigationEventsIfNecessary()}subscribeToNavigationEventsIfNecessary(){if(this.subscription!==void 0||!this.isAnchorElement)return;let t=this.preserveFragment,r=i=>i==="merge"||i==="preserve";t||=r(this.queryParamsHandling),t||=!this.queryParamsHandling&&!r(this.options?.defaultQueryParamsHandling),t&&(this.subscription=this.router.events.subscribe(i=>{i instanceof Ln&&this.updateHref()}))}preserveFragment=!1;skipLocationChange=!1;replaceUrl=!1;setTabIndexIfNotOnNativeEl(t){this.tabIndexAttribute!=null||this.isAnchorElement||this.applyAttributeValue("tabindex",t)}ngOnChanges(t){this.isAnchorElement&&(this.updateHref(),this.subscribeToNavigationEventsIfNecessary()),this.onChanges.next(this)}routerLinkInput=null;set routerLink(t){t==null?(this.routerLinkInput=null,this.setTabIndexIfNotOnNativeEl(null)):(Io(t)?this.routerLinkInput=t:this.routerLinkInput=Array.isArray(t)?t:[t],this.setTabIndexIfNotOnNativeEl("0"))}onClick(t,r,i,o,s){let a=this.urlTree;if(a===null||this.isAnchorElement&&(t!==0||r||i||o||s||typeof this.target=="string"&&this.target!="_self"))return!0;let l={skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state,info:this.info};return this.router.navigateByUrl(a,l)?.catch(u=>{this.applicationErrorHandler(u)}),!this.isAnchorElement}ngOnDestroy(){this.subscription?.unsubscribe()}updateHref(){let t=this.urlTree;this.reactiveHref.set(t!==null&&this.locationStrategy?this.locationStrategy?.prepareExternalUrl(this.router.serializeUrl(t))??"":null)}applyAttributeValue(t,r){let i=this.renderer,o=this.el.nativeElement;r!==null?i.setAttribute(o,t,r):i.removeAttribute(o,t)}get urlTree(){return this.routerLinkInput===null?null:Io(this.routerLinkInput)?this.routerLinkInput:this.router.createUrlTree(this.routerLinkInput,{relativeTo:this.relativeTo!==void 0?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}static \u0275fac=function(r){return new(r||n)(ee(Ve),ee(Tn),nu("tabindex"),ee(Jn),ee(rn),ee(Tr))};static \u0275dir=Ye({type:n,selectors:[["","routerLink",""]],hostVars:2,hostBindings:function(r,i){r&1&&$("click",function(s){return i.onClick(s.button,s.ctrlKey,s.shiftKey,s.altKey,s.metaKey)}),r&2&&pn("href",i.reactiveHref(),W_)("target",i.target)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",info:"info",relativeTo:"relativeTo",preserveFragment:[2,"preserveFragment","preserveFragment",bo],skipLocationChange:[2,"skipLocationChange","skipLocationChange",bo],replaceUrl:[2,"replaceUrl","replaceUrl",bo],routerLink:"routerLink"},features:[zr]})}return n})(),Rb=(()=>{class n{router;element;renderer;cdr;link;links;classes=[];routerEventsSubscription;linkInputChangesSubscription;_isActive=!1;get isActive(){return this._isActive}routerLinkActiveOptions={exact:!1};ariaCurrentWhenActive;isActiveChange=new et;constructor(t,r,i,o,s){this.router=t,this.element=r,this.renderer=i,this.cdr=o,this.link=s,this.routerEventsSubscription=t.events.subscribe(a=>{a instanceof Ln&&this.update()})}ngAfterContentInit(){se(this.links.changes,se(null)).pipe(io()).subscribe(t=>{this.update(),this.subscribeToEachLinkOnChanges()})}subscribeToEachLinkOnChanges(){this.linkInputChangesSubscription?.unsubscribe();let t=[...this.links.toArray(),this.link].filter(r=>!!r).map(r=>r.onChanges);this.linkInputChangesSubscription=Ge(t).pipe(io()).subscribe(r=>{this._isActive!==this.isLinkActive(this.router)(r)&&this.update()})}set routerLinkActive(t){let r=Array.isArray(t)?t:t.split(" ");this.classes=r.filter(i=>!!i)}ngOnChanges(t){this.update()}ngOnDestroy(){this.routerEventsSubscription.unsubscribe(),this.linkInputChangesSubscription?.unsubscribe()}update(){!this.links||!this.router.navigated||queueMicrotask(()=>{let t=this.hasActiveLinks();this.classes.forEach(r=>{t?this.renderer.addClass(this.element.nativeElement,r):this.renderer.removeClass(this.element.nativeElement,r)}),t&&this.ariaCurrentWhenActive!==void 0?this.renderer.setAttribute(this.element.nativeElement,"aria-current",this.ariaCurrentWhenActive.toString()):this.renderer.removeAttribute(this.element.nativeElement,"aria-current"),this._isActive!==t&&(this._isActive=t,this.cdr.markForCheck(),this.isActiveChange.emit(t))})}isLinkActive(t){let r=Hj(this.routerLinkActiveOptions)?this.routerLinkActiveOptions:this.routerLinkActiveOptions.exact||!1;return i=>{let o=i.urlTree;return o?t.isActive(o,r):!1}}hasActiveLinks(){let t=this.isLinkActive(this.router);return this.link&&t(this.link)||this.links.some(t)}static \u0275fac=function(r){return new(r||n)(ee(Ve),ee(rn),ee(Jn),ee(Oi),ee(on,8))};static \u0275dir=Ye({type:n,selectors:[["","routerLinkActive",""]],contentQueries:function(r,i,o){if(r&1&&Dy(o,on,5),r&2){let s;Wr(s=Gr())&&(i.links=s)}},inputs:{routerLinkActiveOptions:"routerLinkActiveOptions",ariaCurrentWhenActive:"ariaCurrentWhenActive",routerLinkActive:"routerLinkActive"},outputs:{isActiveChange:"isActiveChange"},exportAs:["routerLinkActive"],features:[zr]})}return n})();function Hj(n){return!!n.paths}var Nu=class{};var uP=(()=>{class n{router;injector;preloadingStrategy;loader;subscription;constructor(t,r,i,o){this.router=t,this.injector=r,this.preloadingStrategy=i,this.loader=o}setUpPreloading(){this.subscription=this.router.events.pipe(Mt(t=>t instanceof Ln),yi(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,r){let i=[];for(let o of r){o.providers&&!o._injector&&(o._injector=ec(o.providers,t,`Route: ${o.path}`));let s=o._injector??t,a=o._loadedInjector??s;(o.loadChildren&&!o._loadedRoutes&&o.canLoad===void 0||o.loadComponent&&!o._loadedComponent)&&i.push(this.preloadConfig(s,o)),(o.children||o._loadedRoutes)&&i.push(this.processRoutes(a,o.children??o._loadedRoutes))}return Ge(i).pipe(io())}preloadConfig(t,r){return this.preloadingStrategy.preload(r,()=>{let i;r.loadChildren&&r.canLoad===void 0?i=this.loader.loadChildren(t,r):i=se(null);let o=i.pipe(ot(s=>s===null?se(void 0):(r._loadedRoutes=s.routes,r._loadedInjector=s.injector,this.processRoutes(s.injector??t,s.routes))));if(r.loadComponent&&!r._loadedComponent){let s=this.loader.loadComponent(t,r);return Ge([o,s]).pipe(io())}else return o})}static \u0275fac=function(r){return new(r||n)(re(Ve),re(ht),re(Nu),re(Np))};static \u0275prov=Q({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),dP=new X(""),zj=(()=>{class n{urlSerializer;transitions;viewportScroller;zone;options;routerEventsSubscription;scrollEventsSubscription;lastId=0;lastSource=lc;restoredId=0;store={};constructor(t,r,i,o,s={}){this.urlSerializer=t,this.transitions=r,this.viewportScroller=i,this.zone=o,this.options=s,s.scrollPositionRestoration||="disabled",s.anchorScrolling||="disabled"}init(){this.options.scrollPositionRestoration!=="disabled"&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(t=>{t instanceof So?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof Ln?(this.lastId=t.id,this.scheduleScrollEvent(t,this.urlSerializer.parse(t.urlAfterRedirects).fragment)):t instanceof Jr&&t.code===dc.IgnoredSameUrlNavigation&&(this.lastSource=void 0,this.restoredId=0,this.scheduleScrollEvent(t,this.urlSerializer.parse(t.url).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(t=>{t instanceof pc&&(t.position?this.options.scrollPositionRestoration==="top"?this.viewportScroller.scrollToPosition([0,0]):this.options.scrollPositionRestoration==="enabled"&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&this.options.anchorScrolling==="enabled"?this.viewportScroller.scrollToAnchor(t.anchor):this.options.scrollPositionRestoration!=="disabled"&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,r){this.zone.runOutsideAngular(()=>b(this,null,function*(){yield new Promise(i=>{setTimeout(i),typeof requestAnimationFrame<"u"&&requestAnimationFrame(i)}),this.zone.run(()=>{this.transitions.events.next(new pc(t,this.lastSource==="popstate"?this.store[this.restoredId]:null,r))})}))}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}static \u0275fac=function(r){uy()};static \u0275prov=Q({token:n,factory:n.\u0275fac})}return n})();function Nb(n,...e){return tn([{provide:Fs,multi:!0,useValue:n},[],{provide:Tn,useFactory:fP,deps:[Ve]},{provide:su,multi:!0,useFactory:hP},e.map(t=>t.\u0275providers)])}function fP(n){return n.routerState.root}function Fu(n,e){return{\u0275kind:n,\u0275providers:e}}function hP(){let n=k(Ke);return e=>{let t=n.get(Ai);if(e!==t.components[0])return;let r=n.get(Ve),i=n.get(pP);n.get(Fb)===1&&r.initialNavigation(),n.get(vP,null,{optional:!0})?.setUpPreloading(),n.get(dP,null,{optional:!0})?.init(),r.resetRootComponentType(t.componentTypes[0]),i.closed||(i.next(),i.complete(),i.unsubscribe())}}var pP=new X("",{factory:()=>new We}),Fb=new X("",{providedIn:"root",factory:()=>1});function gP(){let n=[{provide:B_,useValue:!0},{provide:Fb,useValue:0},Yh(()=>{let e=k(Ke);return e.get($y,Promise.resolve()).then(()=>new Promise(r=>{let i=e.get(Ve),o=e.get(pP);Vp(i,()=>{r(!0)}),e.get(Lp).afterPreactivation=()=>(r(!0),o.closed?se(void 0):o),i.initialNavigation()}))})];return Fu(2,n)}function mP(){let n=[Yh(()=>{k(Ve).setUpLocationChangeListener()}),{provide:Fb,useValue:2}];return Fu(3,n)}var vP=new X("");function _P(n){return Fu(0,[{provide:vP,useExisting:uP},{provide:Nu,useExisting:n}])}function yP(){return Fu(8,[Db,{provide:ku,useExisting:Db}])}function bP(n){Ss("NgRouterViewTransitions");let e=[{provide:Pb,useValue:aP},{provide:Ab,useValue:H({skipNextTransition:!!n?.skipInitialTransition},n)}];return Fu(9,e)}var wP=[wo,{provide:Rs,useClass:Co},Ve,Ns,{provide:Tn,useFactory:fP,deps:[Ve]},Np,[]],xr=(()=>{class n{constructor(){}static forRoot(t,r){return{ngModule:n,providers:[wP,[],{provide:Fs,multi:!0,useValue:t},[],r?.errorHandler?{provide:kb,useValue:r.errorHandler}:[],{provide:To,useValue:r||{}},r?.useHash?Wj():Gj(),qj(),r?.preloadingStrategy?_P(r.preloadingStrategy).\u0275providers:[],r?.initialNavigation?Kj(r):[],r?.bindToComponentInputs?yP().\u0275providers:[],r?.enableViewTransitions?bP().\u0275providers:[],Yj()]}}static forChild(t){return{ngModule:n,providers:[{provide:Fs,multi:!0,useValue:t}]}}static \u0275fac=function(r){return new(r||n)};static \u0275mod=Er({type:n});static \u0275inj=Wn({})}return n})();function qj(){return{provide:dP,useFactory:()=>{let n=k(fM),e=k(xe),t=k(To),r=k(Lp),i=k(Rs);return t.scrollOffset&&n.setOffset(t.scrollOffset),new zj(i,r,n,e,t)}}}function Wj(){return{provide:Tr,useClass:Wy}}function Gj(){return{provide:Tr,useClass:ip}}function Kj(n){return[n.initialNavigation==="disabled"?mP().\u0275providers:[],n.initialNavigation==="enabledBlocking"?gP().\u0275providers:[]]}var Ob=new X("");function Yj(){return[{provide:Ob,useFactory:hP},{provide:su,multi:!0,useExisting:Ob}]}var EP=()=>{};var SP=function(n){let e=[],t=0;for(let r=0;r<n.length;r++){let i=n.charCodeAt(r);i<128?e[t++]=i:i<2048?(e[t++]=i>>6|192,e[t++]=i&63|128):(i&64512)===55296&&r+1<n.length&&(n.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(n.charCodeAt(++r)&1023),e[t++]=i>>18|240,e[t++]=i>>12&63|128,e[t++]=i>>6&63|128,e[t++]=i&63|128):(e[t++]=i>>12|224,e[t++]=i>>6&63|128,e[t++]=i&63|128)}return e},Qj=function(n){let e=[],t=0,r=0;for(;t<n.length;){let i=n[t++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){let o=n[t++];e[r++]=String.fromCharCode((i&31)<<6|o&63)}else if(i>239&&i<365){let o=n[t++],s=n[t++],a=n[t++],l=((i&7)<<18|(o&63)<<12|(s&63)<<6|a&63)-65536;e[r++]=String.fromCharCode(55296+(l>>10)),e[r++]=String.fromCharCode(56320+(l&1023))}else{let o=n[t++],s=n[t++];e[r++]=String.fromCharCode((i&15)<<12|(o&63)<<6|s&63)}}return e.join("")},Up={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();let t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<n.length;i+=3){let o=n[i],s=i+1<n.length,a=s?n[i+1]:0,l=i+2<n.length,u=l?n[i+2]:0,f=o>>2,m=(o&3)<<4|a>>4,_=(a&15)<<2|u>>6,E=u&63;l||(E=64,s||(_=64)),r.push(t[f],t[m],t[_],t[E])}return r.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(SP(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):Qj(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();let t=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<n.length;){let o=t[n.charAt(i++)],a=i<n.length?t[n.charAt(i)]:0;++i;let u=i<n.length?t[n.charAt(i)]:64;++i;let m=i<n.length?t[n.charAt(i)]:64;if(++i,o==null||a==null||u==null||m==null)throw new Vb;let _=o<<2|a>>4;if(r.push(_),u!==64){let E=a<<4&240|u>>2;if(r.push(E),m!==64){let x=u<<6&192|m;r.push(x)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}},Vb=class extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}},Zj=function(n){let e=SP(n);return Up.encodeByteArray(e,!0)},Vu=function(n){return Zj(n).replace(/\./g,"")},jp=function(n){try{return Up.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function jb(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}var Xj=()=>jb().__FIREBASE_DEFAULTS__,Jj=()=>{if(typeof process>"u"||typeof process.env>"u")return;let n=process.env.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},e6=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}let e=n&&jp(n[1]);return e&&JSON.parse(e)},Bp=()=>{try{return EP()||Xj()||Jj()||e6()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},Bb=n=>{var e,t;return(t=(e=Bp())===null||e===void 0?void 0:e.emulatorHosts)===null||t===void 0?void 0:t[n]},TP=n=>{let e=Bb(n);if(!e)return;let t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);let r=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),r]:[e.substring(0,t),r]},$b=()=>{var n;return(n=Bp())===null||n===void 0?void 0:n.config},Hb=n=>{var e;return(e=Bp())===null||e===void 0?void 0:e[`_${n}`]};var Vs=class{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,r)=>{t?this.reject(t):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,r))}}};function Do(n){try{return(n.startsWith("http://")||n.startsWith("https://")?new URL(n).hostname:n).endsWith(".cloudworkstations.dev")}catch{return!1}}function $p(n){return b(this,null,function*(){return(yield fetch(n,{credentials:"include"})).ok})}function DP(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');let t={alg:"none",type:"JWT"},r=e||"demo-project",i=n.iat||0,o=n.sub||n.user_id;if(!o)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");let s=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:o,user_id:o,firebase:{sign_in_provider:"custom",identities:{}}},n);return[Vu(JSON.stringify(t)),Vu(JSON.stringify(s)),""].join(".")}var Lu={};function t6(){let n={prod:[],emulator:[]};for(let e of Object.keys(Lu))Lu[e]?n.emulator.push(e):n.prod.push(e);return n}function n6(n){let e=document.getElementById(n),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",n),t=!0),{created:t,element:e}}var CP=!1;function Hp(n,e){if(typeof window>"u"||typeof document>"u"||!Do(window.location.host)||Lu[n]===e||Lu[n]||CP)return;Lu[n]=e;function t(_){return`__firebase__banner__${_}`}let r="__firebase__banner",o=t6().prod.length>0;function s(){let _=document.getElementById(r);_&&_.remove()}function a(_){_.style.display="flex",_.style.background="#7faaf0",_.style.position="fixed",_.style.bottom="5px",_.style.left="5px",_.style.padding=".5em",_.style.borderRadius="5px",_.style.alignItems="center"}function l(_,E){_.setAttribute("width","24"),_.setAttribute("id",E),_.setAttribute("height","24"),_.setAttribute("viewBox","0 0 24 24"),_.setAttribute("fill","none"),_.style.marginLeft="-6px"}function u(){let _=document.createElement("span");return _.style.cursor="pointer",_.style.marginLeft="16px",_.style.fontSize="24px",_.innerHTML=" &times;",_.onclick=()=>{CP=!0,s()},_}function f(_,E){_.setAttribute("id",E),_.innerText="Learn more",_.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",_.setAttribute("target","__blank"),_.style.paddingLeft="5px",_.style.textDecoration="underline"}function m(){let _=n6(r),E=t("text"),x=document.getElementById(E)||document.createElement("span"),F=t("learnmore"),L=document.getElementById(F)||document.createElement("a"),W=t("preprendIcon"),oe=document.getElementById(W)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(_.created){let de=_.element;a(de),f(L,F);let Fe=u();l(oe,W),de.append(oe,x,L,Fe),document.body.appendChild(de)}o?(x.innerText="Preview backend disconnected.",oe.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(oe.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,x.innerText="Preview backend running in this workspace."),x.setAttribute("id",E)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",m):m()}function Ut(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function xP(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Ut())}function r6(){var n;let e=(n=Bp())===null||n===void 0?void 0:n.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function MP(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function Uu(){let n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function PP(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function AP(){let n=Ut();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}function kP(){return!r6()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function xo(){try{return typeof indexedDB=="object"}catch{return!1}}function ju(){return new Promise((n,e)=>{try{let t=!0,r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),t||self.indexedDB.deleteDatabase(r),n(!0)},i.onupgradeneeded=()=>{t=!1},i.onerror=()=>{var o;e(((o=i.error)===null||o===void 0?void 0:o.message)||"")}}catch(t){e(t)}})}function zb(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}var i6="FirebaseError",Wt=class n extends Error{constructor(e,t,r){super(t),this.code=e,this.customData=r,this.name=i6,Object.setPrototypeOf(this,n.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,mn.prototype.create)}},mn=class{constructor(e,t,r){this.service=e,this.serviceName=t,this.errors=r}create(e,...t){let r=t[0]||{},i=`${this.service}/${e}`,o=this.errors[e],s=o?o6(o,r):"Error",a=`${this.serviceName}: ${s} (${i}).`;return new Wt(i,a,r)}};function o6(n,e){return n.replace(s6,(t,r)=>{let i=e[r];return i!=null?String(i):`<${r}?>`})}var s6=/\{\$([^}]+)}/g;function OP(n){for(let e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function tr(n,e){if(n===e)return!0;let t=Object.keys(n),r=Object.keys(e);for(let i of t){if(!r.includes(i))return!1;let o=n[i],s=e[i];if(IP(o)&&IP(s)){if(!tr(o,s))return!1}else if(o!==s)return!1}for(let i of r)if(!t.includes(i))return!1;return!0}function IP(n){return n!==null&&typeof n=="object"}function bc(n){let e=[];for(let[t,r]of Object.entries(n))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function RP(n,e){let t=new Ub(n,e);return t.subscribe.bind(t)}var Ub=class{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,r){let i;if(e===void 0&&t===void 0&&r===void 0)throw new Error("Missing Observer.");a6(e,["next","error","complete"])?i=e:i={next:e,error:t,complete:r},i.next===void 0&&(i.next=Lb),i.error===void 0&&(i.error=Lb),i.complete===void 0&&(i.complete=Lb);let o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),o}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}};function a6(n,e){if(typeof n!="object"||n===null)return!1;for(let t of e)if(t in n&&typeof n[t]=="function")return!0;return!1}function Lb(){}var c6=1e3,l6=2,u6=14400*1e3,d6=.5;function zp(n,e=c6,t=l6){let r=e*Math.pow(t,n),i=Math.round(d6*r*(Math.random()-.5)*2);return Math.min(u6,r+i)}function ze(n){return n&&n._delegate?n._delegate:n}var mt=class{constructor(e,t,r){this.name=e,this.instanceFactory=t,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}};var Us="[DEFAULT]";var qb=class{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){let t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){let r=new Vs;if(this.instancesDeferred.set(t,r),this.isInitialized(t)||this.shouldAutoInitialize())try{let i=this.getOrInitializeService({instanceIdentifier:t});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;let r=this.normalizeInstanceIdentifier(e?.identifier),i=(t=e?.optional)!==null&&t!==void 0?t:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(o){if(i)return null;throw o}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(h6(e))try{this.getOrInitializeService({instanceIdentifier:Us})}catch{}for(let[t,r]of this.instancesDeferred.entries()){let i=this.normalizeInstanceIdentifier(t);try{let o=this.getOrInitializeService({instanceIdentifier:i});r.resolve(o)}catch{}}}}clearInstance(e=Us){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}delete(){return b(this,null,function*(){let e=Array.from(this.instances.values());yield Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])})}isComponentSet(){return this.component!=null}isInitialized(e=Us){return this.instances.has(e)}getOptions(e=Us){return this.instancesOptions.get(e)||{}}initialize(e={}){let{options:t={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);let i=this.getOrInitializeService({instanceIdentifier:r,options:t});for(let[o,s]of this.instancesDeferred.entries()){let a=this.normalizeInstanceIdentifier(o);r===a&&s.resolve(i)}return i}onInit(e,t){var r;let i=this.normalizeInstanceIdentifier(t),o=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;o.add(e),this.onInitCallbacks.set(i,o);let s=this.instances.get(i);return s&&e(s,i),()=>{o.delete(e)}}invokeOnInitCallbacks(e,t){let r=this.onInitCallbacks.get(t);if(r)for(let i of r)try{i(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:f6(e),options:t}),this.instances.set(e,r),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Us){return this.component?this.component.multipleInstances?e:Us:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}};function f6(n){return n===Us?void 0:n}function h6(n){return n.instantiationMode==="EAGER"}var qp=class{constructor(e){this.name=e,this.providers=new Map}addComponent(e){let t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);let t=new qb(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}};var p6=[],De=(function(n){return n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT",n})(De||{}),g6={debug:De.DEBUG,verbose:De.VERBOSE,info:De.INFO,warn:De.WARN,error:De.ERROR,silent:De.SILENT},m6=De.INFO,v6={[De.DEBUG]:"log",[De.VERBOSE]:"log",[De.INFO]:"info",[De.WARN]:"warn",[De.ERROR]:"error"},_6=(n,e,...t)=>{if(e<n.logLevel)return;let r=new Date().toISOString(),i=v6[e];if(i)console[i](`[${r}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)},nr=class{constructor(e){this.name=e,this._logLevel=m6,this._logHandler=_6,this._userLogHandler=null,p6.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in De))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?g6[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,De.DEBUG,...e),this._logHandler(this,De.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,De.VERBOSE,...e),this._logHandler(this,De.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,De.INFO,...e),this._logHandler(this,De.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,De.WARN,...e),this._logHandler(this,De.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,De.ERROR,...e),this._logHandler(this,De.ERROR,...e)}};var y6=(n,e)=>e.some(t=>n instanceof t),NP,FP;function b6(){return NP||(NP=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function w6(){return FP||(FP=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}var LP=new WeakMap,Gb=new WeakMap,VP=new WeakMap,Wb=new WeakMap,Yb=new WeakMap;function E6(n){let e=new Promise((t,r)=>{let i=()=>{n.removeEventListener("success",o),n.removeEventListener("error",s)},o=()=>{t(ei(n.result)),i()},s=()=>{r(n.error),i()};n.addEventListener("success",o),n.addEventListener("error",s)});return e.then(t=>{t instanceof IDBCursor&&LP.set(t,n)}).catch(()=>{}),Yb.set(e,n),e}function C6(n){if(Gb.has(n))return;let e=new Promise((t,r)=>{let i=()=>{n.removeEventListener("complete",o),n.removeEventListener("error",s),n.removeEventListener("abort",s)},o=()=>{t(),i()},s=()=>{r(n.error||new DOMException("AbortError","AbortError")),i()};n.addEventListener("complete",o),n.addEventListener("error",s),n.addEventListener("abort",s)});Gb.set(n,e)}var Kb={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return Gb.get(n);if(e==="objectStoreNames")return n.objectStoreNames||VP.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return ei(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function UP(n){Kb=n(Kb)}function I6(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){let r=n.call(Wp(this),e,...t);return VP.set(r,e.sort?e.sort():[e]),ei(r)}:w6().includes(n)?function(...e){return n.apply(Wp(this),e),ei(LP.get(this))}:function(...e){return ei(n.apply(Wp(this),e))}}function S6(n){return typeof n=="function"?I6(n):(n instanceof IDBTransaction&&C6(n),y6(n,b6())?new Proxy(n,Kb):n)}function ei(n){if(n instanceof IDBRequest)return E6(n);if(Wb.has(n))return Wb.get(n);let e=S6(n);return e!==n&&(Wb.set(n,e),Yb.set(e,n)),e}var Wp=n=>Yb.get(n);function Gp(n,e,{blocked:t,upgrade:r,blocking:i,terminated:o}={}){let s=indexedDB.open(n,e),a=ei(s);return r&&s.addEventListener("upgradeneeded",l=>{r(ei(s.result),l.oldVersion,l.newVersion,ei(s.transaction),l)}),t&&s.addEventListener("blocked",l=>t(l.oldVersion,l.newVersion,l)),a.then(l=>{o&&l.addEventListener("close",()=>o()),i&&l.addEventListener("versionchange",u=>i(u.oldVersion,u.newVersion,u))}).catch(()=>{}),a}var T6=["get","getKey","getAll","getAllKeys","count"],D6=["put","add","delete","clear"],Qb=new Map;function jP(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(Qb.get(e))return Qb.get(e);let t=e.replace(/FromIndex$/,""),r=e!==t,i=D6.includes(t);if(!(t in(r?IDBIndex:IDBObjectStore).prototype)||!(i||T6.includes(t)))return;let o=function(s,...a){return b(this,null,function*(){let l=this.transaction(s,i?"readwrite":"readonly"),u=l.store;return r&&(u=u.index(a.shift())),(yield Promise.all([u[t](...a),i&&l.done]))[0]})};return Qb.set(e,o),o}UP(n=>ne(H({},n),{get:(e,t,r)=>jP(e,t)||n.get(e,t,r),has:(e,t)=>!!jP(e,t)||n.has(e,t)}));var Xb=class{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(x6(t)){let r=t.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(t=>t).join(" ")}};function x6(n){let e=n.getComponent();return e?.type==="VERSION"}var Jb="@firebase/app",BP="0.13.2";var Ni=new nr("@firebase/app"),M6="@firebase/app-compat",P6="@firebase/analytics-compat",A6="@firebase/analytics",k6="@firebase/app-check-compat",O6="@firebase/app-check",R6="@firebase/auth",N6="@firebase/auth-compat",F6="@firebase/database",L6="@firebase/data-connect",V6="@firebase/database-compat",U6="@firebase/functions",j6="@firebase/functions-compat",B6="@firebase/installations",$6="@firebase/installations-compat",H6="@firebase/messaging",z6="@firebase/messaging-compat",q6="@firebase/performance",W6="@firebase/performance-compat",G6="@firebase/remote-config",K6="@firebase/remote-config-compat",Y6="@firebase/storage",Q6="@firebase/storage-compat",Z6="@firebase/firestore",X6="@firebase/ai",J6="@firebase/firestore-compat",eB="firebase",tB="11.10.0";var ew="[DEFAULT]",nB={[Jb]:"fire-core",[M6]:"fire-core-compat",[A6]:"fire-analytics",[P6]:"fire-analytics-compat",[O6]:"fire-app-check",[k6]:"fire-app-check-compat",[R6]:"fire-auth",[N6]:"fire-auth-compat",[F6]:"fire-rtdb",[L6]:"fire-data-connect",[V6]:"fire-rtdb-compat",[U6]:"fire-fn",[j6]:"fire-fn-compat",[B6]:"fire-iid",[$6]:"fire-iid-compat",[H6]:"fire-fcm",[z6]:"fire-fcm-compat",[q6]:"fire-perf",[W6]:"fire-perf-compat",[G6]:"fire-rc",[K6]:"fire-rc-compat",[Y6]:"fire-gcs",[Q6]:"fire-gcs-compat",[Z6]:"fire-fst",[J6]:"fire-fst-compat",[X6]:"fire-vertex","fire-js":"fire-js",[eB]:"fire-js-all"};var Bu=new Map,rB=new Map,tw=new Map;function $P(n,e){try{n.container.addComponent(e)}catch(t){Ni.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function Gt(n){let e=n.name;if(tw.has(e))return Ni.debug(`There were multiple attempts to register component ${e}.`),!1;tw.set(e,n);for(let t of Bu.values())$P(t,n);for(let t of rB.values())$P(t,n);return!0}function rr(n,e){let t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function Vn(n){return n==null?!1:n.settings!==void 0}var iB={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Mo=new mn("app","Firebase",iB);var nw=class{constructor(e,t,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new mt("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Mo.create("app-deleted",{appName:this._name})}};var Po=tB;function ow(n,e={}){let t=n;typeof e!="object"&&(e={name:e});let r=Object.assign({name:ew,automaticDataCollectionEnabled:!0},e),i=r.name;if(typeof i!="string"||!i)throw Mo.create("bad-app-name",{appName:String(i)});if(t||(t=$b()),!t)throw Mo.create("no-options");let o=Bu.get(i);if(o){if(tr(t,o.options)&&tr(r,o.config))return o;throw Mo.create("duplicate-app",{appName:i})}let s=new qp(i);for(let l of tw.values())s.addComponent(l);let a=new nw(t,r,s);return Bu.set(i,a),a}function ti(n=ew){let e=Bu.get(n);if(!e&&n===ew&&$b())return ow();if(!e)throw Mo.create("no-app",{appName:n});return e}function Kp(){return Array.from(Bu.values())}function Re(n,e,t){var r;let i=(r=nB[n])!==null&&r!==void 0?r:n;t&&(i+=`-${t}`);let o=i.match(/\s|\//),s=e.match(/\s|\//);if(o||s){let a=[`Unable to register library "${i}" with version "${e}":`];o&&a.push(`library name "${i}" contains illegal characters (whitespace or "/")`),o&&s&&a.push("and"),s&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Ni.warn(a.join(" "));return}Gt(new mt(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}var oB="firebase-heartbeat-database",sB=1,$u="firebase-heartbeat-store",Zb=null;function WP(){return Zb||(Zb=Gp(oB,sB,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore($u)}catch(t){console.warn(t)}}}}).catch(n=>{throw Mo.create("idb-open",{originalErrorMessage:n.message})})),Zb}function aB(n){return b(this,null,function*(){try{let t=(yield WP()).transaction($u),r=yield t.objectStore($u).get(GP(n));return yield t.done,r}catch(e){if(e instanceof Wt)Ni.warn(e.message);else{let t=Mo.create("idb-get",{originalErrorMessage:e?.message});Ni.warn(t.message)}}})}function HP(n,e){return b(this,null,function*(){try{let r=(yield WP()).transaction($u,"readwrite");yield r.objectStore($u).put(e,GP(n)),yield r.done}catch(t){if(t instanceof Wt)Ni.warn(t.message);else{let r=Mo.create("idb-set",{originalErrorMessage:t?.message});Ni.warn(r.message)}}})}function GP(n){return`${n.name}!${n.options.appId}`}var cB=1024,lB=30,rw=class{constructor(e){this.container=e,this._heartbeatsCache=null;let t=this.container.getProvider("app").getImmediate();this._storage=new iw(t),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}triggerHeartbeat(){return b(this,null,function*(){var e,t;try{let i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),o=zP();if(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=yield this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===o||this._heartbeatsCache.heartbeats.some(s=>s.date===o))return;if(this._heartbeatsCache.heartbeats.push({date:o,agent:i}),this._heartbeatsCache.heartbeats.length>lB){let s=dB(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(s,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){Ni.warn(r)}})}getHeartbeatsHeader(){return b(this,null,function*(){var e;try{if(this._heartbeatsCache===null&&(yield this._heartbeatsCachePromise),((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";let t=zP(),{heartbeatsToSend:r,unsentEntries:i}=uB(this._heartbeatsCache.heartbeats),o=Vu(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=t,i.length>0?(this._heartbeatsCache.heartbeats=i,yield this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),o}catch(t){return Ni.warn(t),""}})}};function zP(){return new Date().toISOString().substring(0,10)}function uB(n,e=cB){let t=[],r=n.slice();for(let i of n){let o=t.find(s=>s.agent===i.agent);if(o){if(o.dates.push(i.date),qP(t)>e){o.dates.pop();break}}else if(t.push({agent:i.agent,dates:[i.date]}),qP(t)>e){t.pop();break}r=r.slice(1)}return{heartbeatsToSend:t,unsentEntries:r}}var iw=class{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return b(this,null,function*(){return xo()?ju().then(()=>!0).catch(()=>!1):!1})}read(){return b(this,null,function*(){if(yield this._canUseIndexedDBPromise){let t=yield aB(this.app);return t?.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}})}overwrite(e){return b(this,null,function*(){var t;if(yield this._canUseIndexedDBPromise){let i=yield this.read();return HP(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return})}add(e){return b(this,null,function*(){var t;if(yield this._canUseIndexedDBPromise){let i=yield this.read();return HP(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return})}};function qP(n){return Vu(JSON.stringify({version:2,heartbeats:n})).length}function dB(n){if(n.length===0)return-1;let e=0,t=n[0].date;for(let r=1;r<n.length;r++)n[r].date<t&&(t=n[r].date,e=r);return e}function fB(n){Gt(new mt("platform-logger",e=>new Xb(e),"PRIVATE")),Gt(new mt("heartbeat",e=>new rw(e),"PRIVATE")),Re(Jb,BP,n),Re(Jb,BP,"esm2017"),Re("fire-js","")}fB("");var hB="firebase",pB="11.10.0";Re(hB,pB,"app");function KP(n){n===void 0&&(n=k(Ke));let e=n.get(qa);return t=>new ge(r=>{let i=e.add(),o=!1;function s(){o||(i(),o=!0)}let a=t.subscribe({next:l=>{r.next(l),s()},complete:()=>{r.complete(),s()},error:l=>{r.error(l),s()}});return a.add(()=>{r.unsubscribe(),s()}),a})}var ir=new xs("ANGULARFIRE2_VERSION");function Bs(n,e,t){if(e){if(e.length===1)return e[0];let o=e.filter(s=>s.app===t);if(o.length===1)return o[0]}return t.container.getProvider(n).getImmediate({optional:!0})}var Ao=(n,e)=>{let t=e?[e]:Kp(),r=[];return t.forEach(i=>{i.container.getProvider(n).instances.forEach(s=>{r.includes(s)||r.push(s)})}),r},wc=(function(n){return n[n.SILENT=0]="SILENT",n[n.WARN=1]="WARN",n[n.VERBOSE=2]="VERBOSE",n})(wc||{}),YP=Uy()&&typeof Zone<"u"?wc.WARN:wc.SILENT;var Yp=class{zone;delegate;constructor(e,t=Fv){this.zone=e,this.delegate=t}now(){return this.delegate.now()}schedule(e,t,r){let i=this.zone,o=function(s){i?i.runGuarded(()=>{e.apply(this,[s])}):e.apply(this,[s])};return this.delegate.schedule(o,t,r)}},ni=(()=>{class n{outsideAngular;insideAngular;constructor(){let t=k(xe);this.outsideAngular=t.runOutsideAngular(()=>new Yp(typeof Zone>"u"?void 0:Zone.current)),this.insideAngular=t.run(()=>new Yp(typeof Zone>"u"?void 0:Zone.current,Nv))}static \u0275fac=function(r){return new(r||n)};static \u0275prov=Q({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),QP=!1;function gB(n,e){!QP&&(YP>wc.SILENT||Uy())&&(QP=!0,console.warn("Calling Firebase APIs outside of an Injection context may destabilize your application leading to subtle change-detection and hydration bugs. Find more at https://github.com/angular/angularfire/blob/main/docs/zones.md")),YP>=e&&console.warn(`Firebase API called outside injection context: ${n.name}`)}function mB(n){let e=k(xe,{optional:!0});return e?e.runOutsideAngular(()=>n()):n()}function js(n){let e=k(xe,{optional:!0});return e?e.run(()=>n()):n()}var vB=(n,e,t)=>(...r)=>(e&&setTimeout(e,0),bt(t,()=>js(()=>n.apply(void 0,r)))),Ne=(n,e,t)=>(t||=e?wc.WARN:wc.VERBOSE,function(){let r,i=arguments,o,s,a;try{o=k(ni),s=k(qa),a=k(ht)}catch{return gB(n,t),n.apply(this,i)}for(let u=0;u<arguments.length;u++)typeof i[u]=="function"&&(e&&(r||=js(()=>s.add())),i[u]=vB(i[u],r,a));let l=mB(()=>n.apply(this,i));return e?l instanceof ge?l.pipe(ro(o.outsideAngular),no(o.insideAngular),KP(a)):l instanceof Promise?js(()=>{let u=s.add();return new Promise((f,m)=>{l.then(_=>bt(a,()=>js(()=>f(_))),_=>bt(a,()=>js(()=>m(_)))).finally(u)})}):typeof l=="function"&&r?function(){return setTimeout(r,0),l.apply(this,arguments)}:js(()=>l):l instanceof ge?l.pipe(ro(o.outsideAngular),no(o.insideAngular)):js(()=>l)});var Mr=class{constructor(e){return e}},Fi=class{constructor(){return Kp()}};function _B(n){return n&&n.length===1?n[0]:new Mr(ti())}var sw=new X("angularfire2._apps"),yB={provide:Mr,useFactory:_B,deps:[[new qt,sw]]},bB={provide:Fi,deps:[[new qt,sw]]};function wB(n){return(e,t)=>{let r=t.get(wr);Re("angularfire",ir.full,"core"),Re("angularfire",ir.full,"app"),Re("angular",Jx.full,r.toString());let i=e.runOutsideAngular(()=>n(t));return new Mr(i)}}function ZP(n,...e){return tn([yB,bB,{provide:sw,useFactory:wB(n),multi:!0,deps:[xe,Ke,ni,...e]}])}var XP=Ne(ow,!0);var EB=new Map,CB={activated:!1,tokenObservers:[]},IB={initialized:!1,enabled:!1};function Pr(n){return EB.get(n)||Object.assign({},CB)}function nA(){return IB}var SB="https://content-firebaseappcheck.googleapis.com/v1";var TB="exchangeDebugToken",JP={OFFSET_DURATION:300*1e3,RETRIAL_MIN_WAIT:30*1e3,RETRIAL_MAX_WAIT:960*1e3},Xhe=1440*60*1e3;var lw=class{constructor(e,t,r,i,o){if(this.operation=e,this.retryPolicy=t,this.getWaitDuration=r,this.lowerBound=i,this.upperBound=o,this.pending=null,this.nextErrorWaitInterval=i,i>o)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(e){return b(this,null,function*(){this.stop();try{this.pending=new Vs,this.pending.promise.catch(t=>{}),yield DB(this.getNextRun(e)),this.pending.resolve(),yield this.pending.promise,this.pending=new Vs,this.pending.promise.catch(t=>{}),yield this.operation(),this.pending.resolve(),yield this.pending.promise,this.process(!0).catch(()=>{})}catch(t){this.retryPolicy(t)?this.process(!1).catch(()=>{}):this.stop()}})}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{let t=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),t}}};function DB(n){return new Promise(e=>{setTimeout(e,n)})}var xB={"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.","initial-throttle":"{$httpStatus} error. Attempts allowed again after {$time}",throttled:"Requests throttled due to previous {$httpStatus} error. Attempts allowed again after {$time}"},ko=new mn("appCheck","AppCheck",xB);function rA(n){if(!Pr(n).activated)throw ko.create("use-before-activation",{appName:n.name})}function iA(r,i){return b(this,arguments,function*({url:n,body:e},t){let o={"Content-Type":"application/json"},s=t.getImmediate({optional:!0});if(s){let E=yield s.getHeartbeatsHeader();E&&(o["X-Firebase-Client"]=E)}let a={method:"POST",body:JSON.stringify(e),headers:o},l;try{l=yield fetch(n,a)}catch(E){throw ko.create("fetch-network-error",{originalErrorMessage:E?.message})}if(l.status!==200)throw ko.create("fetch-status-error",{httpStatus:l.status});let u;try{u=yield l.json()}catch(E){throw ko.create("fetch-parse-error",{originalErrorMessage:E?.message})}let f=u.ttl.match(/^([\d.]+)(s)$/);if(!f||!f[2]||isNaN(Number(f[1])))throw ko.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${u.ttl}`});let m=Number(f[1])*1e3,_=Date.now();return{token:u.token,expireTimeMillis:_+m,issuedAtTimeMillis:_}})}function oA(n,e){let{projectId:t,appId:r,apiKey:i}=n.options;return{url:`${SB}/projects/${t}/apps/${r}:${TB}?key=${i}`,body:{debug_token:e}}}var MB="firebase-app-check-database",PB=1,uw="firebase-app-check-store";var Qp=null;function AB(){return Qp||(Qp=new Promise((n,e)=>{try{let t=indexedDB.open(MB,PB);t.onsuccess=r=>{n(r.target.result)},t.onerror=r=>{var i;e(ko.create("storage-open",{originalErrorMessage:(i=r.target.error)===null||i===void 0?void 0:i.message}))},t.onupgradeneeded=r=>{let i=r.target.result;switch(r.oldVersion){case 0:i.createObjectStore(uw,{keyPath:"compositeKey"})}}}catch(t){e(ko.create("storage-open",{originalErrorMessage:t?.message}))}}),Qp)}function kB(n,e){return OB(RB(n),e)}function OB(n,e){return b(this,null,function*(){let r=(yield AB()).transaction(uw,"readwrite"),o=r.objectStore(uw).put({compositeKey:n,value:e});return new Promise((s,a)=>{o.onsuccess=l=>{s()},r.onerror=l=>{var u;a(ko.create("storage-set",{originalErrorMessage:(u=l.target.error)===null||u===void 0?void 0:u.message}))}})})}function RB(n){return`${n.options.appId}-${n.name}`}var Hu=new nr("@firebase/app-check");function aw(n,e){return xo()?kB(n,e).catch(t=>{Hu.warn(`Failed to write token to IndexedDB. Error: ${t}`)}):Promise.resolve()}function sA(){return nA().enabled}function aA(){return b(this,null,function*(){let n=nA();if(n.enabled&&n.token)return n.token.promise;throw Error(`
            Can't get debug token in production mode.
        `)})}var NB={error:"UNKNOWN_ERROR"};function FB(n){return Up.encodeString(JSON.stringify(n),!1)}function dw(n,e=!1,t=!1){return b(this,null,function*(){let r=n.app;rA(r);let i=Pr(r),o=i.token,s;if(o&&!zu(o)&&(i.token=void 0,o=void 0),!o){let u=yield i.cachedTokenPromise;u&&(zu(u)?o=u:yield aw(r,void 0))}if(!e&&o&&zu(o))return{token:o.token};let a=!1;if(sA())try{i.exchangeTokenPromise||(i.exchangeTokenPromise=iA(oA(r,yield aA()),n.heartbeatServiceProvider).finally(()=>{i.exchangeTokenPromise=void 0}),a=!0);let u=yield i.exchangeTokenPromise;return yield aw(r,u),i.token=u,{token:u.token}}catch(u){return u.code==="appCheck/throttled"||u.code==="appCheck/initial-throttle"?Hu.warn(u.message):t&&Hu.error(u),cw(u)}try{i.exchangeTokenPromise||(i.exchangeTokenPromise=i.provider.getToken().finally(()=>{i.exchangeTokenPromise=void 0}),a=!0),o=yield Pr(r).exchangeTokenPromise}catch(u){u.code==="appCheck/throttled"||u.code==="appCheck/initial-throttle"?Hu.warn(u.message):t&&Hu.error(u),s=u}let l;return o?s?zu(o)?l={token:o.token,internalError:s}:l=cw(s):(l={token:o.token},i.token=o,yield aw(r,o)):l=cw(s),a&&jB(r,l),l})}function LB(n){return b(this,null,function*(){let e=n.app;rA(e);let{provider:t}=Pr(e);if(sA()){let r=yield aA(),{token:i}=yield iA(oA(e,r),n.heartbeatServiceProvider);return{token:i}}else{let{token:r}=yield t.getToken();return{token:r}}})}function VB(n,e,t,r){let{app:i}=n,o=Pr(i),s={next:t,error:r,type:e};if(o.tokenObservers=[...o.tokenObservers,s],o.token&&zu(o.token)){let a=o.token;Promise.resolve().then(()=>{t({token:a.token}),eA(n)}).catch(()=>{})}o.cachedTokenPromise.then(()=>eA(n))}function cA(n,e){let t=Pr(n),r=t.tokenObservers.filter(i=>i.next!==e);r.length===0&&t.tokenRefresher&&t.tokenRefresher.isRunning()&&t.tokenRefresher.stop(),t.tokenObservers=r}function eA(n){let{app:e}=n,t=Pr(e),r=t.tokenRefresher;r||(r=UB(n),t.tokenRefresher=r),!r.isRunning()&&t.isTokenAutoRefreshEnabled&&r.start()}function UB(n){let{app:e}=n;return new lw(()=>b(null,null,function*(){let t=Pr(e),r;if(t.token?r=yield dw(n,!0):r=yield dw(n),r.error)throw r.error;if(r.internalError)throw r.internalError}),()=>!0,()=>{let t=Pr(e);if(t.token){let r=t.token.issuedAtTimeMillis+(t.token.expireTimeMillis-t.token.issuedAtTimeMillis)*.5+3e5,i=t.token.expireTimeMillis-300*1e3;return r=Math.min(r,i),Math.max(0,r-Date.now())}else return 0},JP.RETRIAL_MIN_WAIT,JP.RETRIAL_MAX_WAIT)}function jB(n,e){let t=Pr(n).tokenObservers;for(let r of t)try{r.type==="EXTERNAL"&&e.error!=null?r.error(e.error):r.next(e)}catch{}}function zu(n){return n.expireTimeMillis-Date.now()>0}function cw(n){return{token:FB(NB),error:n}}var fw=class{constructor(e,t){this.app=e,this.heartbeatServiceProvider=t}_delete(){let{tokenObservers:e}=Pr(this.app);for(let t of e)cA(this.app,t.next);return Promise.resolve()}};function BB(n,e){return new fw(n,e)}function $B(n){return{getToken:e=>dw(n,e),getLimitedUseToken:()=>LB(n),addTokenListener:e=>VB(n,"INTERNAL",e),removeTokenListener:e=>cA(n.app,e)}}var HB="@firebase/app-check",zB="0.10.1";var qB="app-check",tA="app-check-internal";function WB(){Gt(new mt(qB,n=>{let e=n.getProvider("app").getImmediate(),t=n.getProvider("heartbeat");return BB(e,t)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((n,e,t)=>{n.getProvider(tA).initialize()})),Gt(new mt(tA,n=>{let e=n.getProvider("app-check").getImmediate();return $B(e)},"PUBLIC").setInstantiationMode("EXPLICIT")),Re(HB,zB)}WB();var GB="app-check";var Ec=class{constructor(){return Ao(GB)}};var KB=["localhost","0.0.0.0","127.0.0.1"],dpe=typeof window<"u"&&KB.includes(window.location.hostname);function CA(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}var IA=CA,SA=new mn("auth","Firebase",CA());var ng=new nr("@firebase/auth");function YB(n,...e){ng.logLevel<=De.WARN&&ng.warn(`Auth (${Po}): ${n}`,...e)}function Xp(n,...e){ng.logLevel<=De.ERROR&&ng.error(`Auth (${Po}): ${n}`,...e)}function ii(n,...e){throw Pw(n,...e)}function Ar(n,...e){return Pw(n,...e)}function Mw(n,e,t){let r=Object.assign(Object.assign({},IA()),{[e]:t});return new mn("auth","Firebase",r).create(e,{appName:n.name})}function $s(n){return Mw(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function QB(n,e,t){let r=t;if(!(e instanceof r))throw r.name!==e.constructor.name&&ii(n,"argument-error"),Mw(n,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Pw(n,...e){if(typeof n!="string"){let t=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=n.name),n._errorFactory.create(t,...r)}return SA.create(n,...e)}function fe(n,e,...t){if(!n)throw Pw(e,...t)}function Li(n){let e="INTERNAL ASSERTION FAILED: "+n;throw Xp(e),new Error(e)}function Ui(n,e){n||Li(e)}function gw(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.href)||""}function ZB(){return lA()==="http:"||lA()==="https:"}function lA(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.protocol)||null}function XB(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(ZB()||Uu()||"connection"in navigator)?navigator.onLine:!0}function JB(){if(typeof navigator>"u")return null;let n=navigator;return n.languages&&n.languages[0]||n.language||null}var Hs=class{constructor(e,t){this.shortDelay=e,this.longDelay=t,Ui(t>e,"Short delay should be less than long delay!"),this.isMobile=xP()||PP()}get(){return XB()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}};function Aw(n,e){Ui(n.emulator,"Emulator should always be set here");let{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}var rg=class{static initialize(e,t,r){this.fetchImpl=e,t&&(this.headersImpl=t),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Li("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Li("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Li("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}};var e8={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};var t8=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],n8=new Hs(3e4,6e4);function kw(n,e){return n.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:n.tenantId}):e}function Ic(o,s,a,l){return b(this,arguments,function*(n,e,t,r,i={}){return TA(n,i,()=>b(null,null,function*(){let u={},f={};r&&(e==="GET"?f=r:u={body:JSON.stringify(r)});let m=bc(Object.assign({key:n.config.apiKey},f)).slice(1),_=yield n._getAdditionalHeaders();_["Content-Type"]="application/json",n.languageCode&&(_["X-Firebase-Locale"]=n.languageCode);let E=Object.assign({method:e,headers:_},u);return MP()||(E.referrerPolicy="no-referrer"),n.emulatorConfig&&Do(n.emulatorConfig.host)&&(E.credentials="include"),rg.fetch()(yield DA(n,n.config.apiHost,t,m),E)}))})}function TA(n,e,t){return b(this,null,function*(){n._canInitEmulator=!1;let r=Object.assign(Object.assign({},e8),e);try{let i=new mw(n),o=yield Promise.race([t(),i.promise]);i.clearNetworkTimeout();let s=yield o.json();if("needConfirmation"in s)throw Zp(n,"account-exists-with-different-credential",s);if(o.ok&&!("errorMessage"in s))return s;{let a=o.ok?s.errorMessage:s.error.message,[l,u]=a.split(" : ");if(l==="FEDERATED_USER_ID_ALREADY_LINKED")throw Zp(n,"credential-already-in-use",s);if(l==="EMAIL_EXISTS")throw Zp(n,"email-already-in-use",s);if(l==="USER_DISABLED")throw Zp(n,"user-disabled",s);let f=r[l]||l.toLowerCase().replace(/[_\s]+/g,"-");if(u)throw Mw(n,f,u);ii(n,f)}}catch(i){if(i instanceof Wt)throw i;ii(n,"network-request-failed",{message:String(i)})}})}function r8(o,s,a,l){return b(this,arguments,function*(n,e,t,r,i={}){let u=yield Ic(n,e,t,r,i);return"mfaPendingCredential"in u&&ii(n,"multi-factor-auth-required",{_serverResponse:u}),u})}function DA(n,e,t,r){return b(this,null,function*(){let i=`${e}${t}?${r}`,o=n,s=o.config.emulator?Aw(n.config,i):`${n.config.apiScheme}://${i}`;return t8.includes(t)&&(yield o._persistenceManagerAvailable,o._getPersistenceType()==="COOKIE")?o._getPersistence()._getFinalTarget(s).toString():s})}var mw=class{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,r)=>{this.timer=setTimeout(()=>r(Ar(this.auth,"network-request-failed")),n8.get())})}};function Zp(n,e,t){let r={appName:n.name};t.email&&(r.email=t.email),t.phoneNumber&&(r.phoneNumber=t.phoneNumber);let i=Ar(n,e,r);return i.customData._tokenResponse=t,i}function i8(n,e){return b(this,null,function*(){return Ic(n,"POST","/v1/accounts:delete",e)})}function ig(n,e){return b(this,null,function*(){return Ic(n,"POST","/v1/accounts:lookup",e)})}function qu(n){if(n)try{let e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}function Ow(n,e=!1){return b(this,null,function*(){let t=ze(n),r=yield t.getIdToken(e),i=Rw(r);fe(i&&i.exp&&i.auth_time&&i.iat,t.auth,"internal-error");let o=typeof i.firebase=="object"?i.firebase:void 0,s=o?.sign_in_provider;return{claims:i,token:r,authTime:qu(hw(i.auth_time)),issuedAtTime:qu(hw(i.iat)),expirationTime:qu(hw(i.exp)),signInProvider:s||null,signInSecondFactor:o?.sign_in_second_factor||null}})}function hw(n){return Number(n)*1e3}function Rw(n){let[e,t,r]=n.split(".");if(e===void 0||t===void 0||r===void 0)return Xp("JWT malformed, contained fewer than 3 sections"),null;try{let i=jp(t);return i?JSON.parse(i):(Xp("Failed to decode base64 JWT payload"),null)}catch(i){return Xp("Caught error parsing JWT payload as JSON",i?.toString()),null}}function uA(n){let e=Rw(n);return fe(e,"internal-error"),fe(typeof e.exp<"u","internal-error"),fe(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}function Gu(n,e,t=!1){return b(this,null,function*(){if(t)return e;try{return yield e}catch(r){throw r instanceof Wt&&o8(r)&&n.auth.currentUser===n&&(yield n.auth.signOut()),r}})}function o8({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}var vw=class{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){let r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;let i=((t=this.user.stsTokenManager.expirationTime)!==null&&t!==void 0?t:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;let t=this.getInterval(e);this.timerId=setTimeout(()=>b(this,null,function*(){yield this.iteration()}),t)}iteration(){return b(this,null,function*(){try{yield this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()})}};var Ku=class{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=qu(this.lastLoginAt),this.creationTime=qu(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}};function og(n){return b(this,null,function*(){var e;let t=n.auth,r=yield n.getIdToken(),i=yield Gu(n,ig(t,{idToken:r}));fe(i?.users.length,t,"internal-error");let o=i.users[0];n._notifyReloadListener(o);let s=!((e=o.providerUserInfo)===null||e===void 0)&&e.length?xA(o.providerUserInfo):[],a=s8(n.providerData,s),l=n.isAnonymous,u=!(n.email&&o.passwordHash)&&!a?.length,f=l?u:!1,m={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:a,metadata:new Ku(o.createdAt,o.lastLoginAt),isAnonymous:f};Object.assign(n,m)})}function Nw(n){return b(this,null,function*(){let e=ze(n);yield og(e),yield e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)})}function s8(n,e){return[...n.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function xA(n){return n.map(e=>{var{providerId:t}=e,r=Cf(e,["providerId"]);return{providerId:t,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}function a8(n,e){return b(this,null,function*(){let t=yield TA(n,{},()=>b(null,null,function*(){let r=bc({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:o}=n.config,s=yield DA(n,i,"/v1/token",`key=${o}`),a=yield n._getAdditionalHeaders();a["Content-Type"]="application/x-www-form-urlencoded";let l={method:"POST",headers:a,body:r};return n.emulatorConfig&&Do(n.emulatorConfig.host)&&(l.credentials="include"),rg.fetch()(s,l)}));return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}})}function c8(n,e){return b(this,null,function*(){return Ic(n,"POST","/v2/accounts:revokeToken",kw(n,e))})}var Wu=class n{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){fe(e.idToken,"internal-error"),fe(typeof e.idToken<"u","internal-error"),fe(typeof e.refreshToken<"u","internal-error");let t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):uA(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){fe(e.length!==0,"internal-error");let t=uA(e);this.updateTokensAndExpiration(e,null,t)}getToken(e,t=!1){return b(this,null,function*(){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(fe(this.refreshToken,e,"user-token-expired"),this.refreshToken?(yield this.refresh(e,this.refreshToken),this.accessToken):null)})}clearRefreshToken(){this.refreshToken=null}refresh(e,t){return b(this,null,function*(){let{accessToken:r,refreshToken:i,expiresIn:o}=yield a8(e,t);this.updateTokensAndExpiration(r,i,Number(o))})}updateTokensAndExpiration(e,t,r){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,t){let{refreshToken:r,accessToken:i,expirationTime:o}=t,s=new n;return r&&(fe(typeof r=="string","internal-error",{appName:e}),s.refreshToken=r),i&&(fe(typeof i=="string","internal-error",{appName:e}),s.accessToken=i),o&&(fe(typeof o=="number","internal-error",{appName:e}),s.expirationTime=o),s}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new n,this.toJSON())}_performRefresh(){return Li("not implemented")}};function Oo(n,e){fe(typeof n=="string"||typeof n>"u","internal-error",{appName:e})}var Ro=class n{constructor(e){var{uid:t,auth:r,stsTokenManager:i}=e,o=Cf(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new vw(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=o.displayName||null,this.email=o.email||null,this.emailVerified=o.emailVerified||!1,this.phoneNumber=o.phoneNumber||null,this.photoURL=o.photoURL||null,this.isAnonymous=o.isAnonymous||!1,this.tenantId=o.tenantId||null,this.providerData=o.providerData?[...o.providerData]:[],this.metadata=new Ku(o.createdAt||void 0,o.lastLoginAt||void 0)}getIdToken(e){return b(this,null,function*(){let t=yield Gu(this,this.stsTokenManager.getToken(this.auth,e));return fe(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,yield this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t})}getIdTokenResult(e){return Ow(this,e)}reload(){return Nw(this)}_assign(e){this!==e&&(fe(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>Object.assign({},t)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){let t=new n(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){fe(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(e,t=!1){return b(this,null,function*(){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),t&&(yield og(this)),yield this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)})}delete(){return b(this,null,function*(){if(Vn(this.auth.app))return Promise.reject($s(this.auth));let e=yield this.getIdToken();return yield Gu(this,i8(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()})}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var r,i,o,s,a,l,u,f;let m=(r=t.displayName)!==null&&r!==void 0?r:void 0,_=(i=t.email)!==null&&i!==void 0?i:void 0,E=(o=t.phoneNumber)!==null&&o!==void 0?o:void 0,x=(s=t.photoURL)!==null&&s!==void 0?s:void 0,F=(a=t.tenantId)!==null&&a!==void 0?a:void 0,L=(l=t._redirectEventId)!==null&&l!==void 0?l:void 0,W=(u=t.createdAt)!==null&&u!==void 0?u:void 0,oe=(f=t.lastLoginAt)!==null&&f!==void 0?f:void 0,{uid:de,emailVerified:Fe,isAnonymous:Rt,providerData:$e,stsTokenManager:P}=t;fe(de&&P,e,"internal-error");let I=Wu.fromJSON(this.name,P);fe(typeof de=="string",e,"internal-error"),Oo(m,e.name),Oo(_,e.name),fe(typeof Fe=="boolean",e,"internal-error"),fe(typeof Rt=="boolean",e,"internal-error"),Oo(E,e.name),Oo(x,e.name),Oo(F,e.name),Oo(L,e.name),Oo(W,e.name),Oo(oe,e.name);let D=new n({uid:de,auth:e,email:_,emailVerified:Fe,displayName:m,isAnonymous:Rt,photoURL:x,phoneNumber:E,tenantId:F,stsTokenManager:I,createdAt:W,lastLoginAt:oe});return $e&&Array.isArray($e)&&(D.providerData=$e.map(M=>Object.assign({},M))),L&&(D._redirectEventId=L),D}static _fromIdTokenResponse(e,t,r=!1){return b(this,null,function*(){let i=new Wu;i.updateFromServerResponse(t);let o=new n({uid:t.localId,auth:e,stsTokenManager:i,isAnonymous:r});return yield og(o),o})}static _fromGetAccountInfoResponse(e,t,r){return b(this,null,function*(){let i=t.users[0];fe(i.localId!==void 0,"internal-error");let o=i.providerUserInfo!==void 0?xA(i.providerUserInfo):[],s=!(i.email&&i.passwordHash)&&!o?.length,a=new Wu;a.updateFromIdToken(r);let l=new n({uid:i.localId,auth:e,stsTokenManager:a,isAnonymous:s}),u={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:o,metadata:new Ku(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!o?.length};return Object.assign(l,u),l})}};var dA=new Map;function Vi(n){Ui(n instanceof Function,"Expected a class definition");let e=dA.get(n);return e?(Ui(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,dA.set(n,e),e)}var l8=(()=>{class n{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return b(this,null,function*(){return!0})}_set(t,r){return b(this,null,function*(){this.storage[t]=r})}_get(t){return b(this,null,function*(){let r=this.storage[t];return r===void 0?null:r})}_remove(t){return b(this,null,function*(){delete this.storage[t]})}_addListener(t,r){}_removeListener(t,r){}}return n.type="NONE",n})(),_w=l8;function Jp(n,e,t){return`firebase:${n}:${e}:${t}`}var sg=class n{constructor(e,t,r){this.persistence=e,this.auth=t,this.userKey=r;let{config:i,name:o}=this.auth;this.fullUserKey=Jp(this.userKey,i.apiKey,o),this.fullPersistenceKey=Jp("persistence",i.apiKey,o),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}getCurrentUser(){return b(this,null,function*(){let e=yield this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){let t=yield ig(this.auth,{idToken:e}).catch(()=>{});return t?Ro._fromGetAccountInfoResponse(this.auth,t,e):null}return Ro._fromJSON(this.auth,e)})}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(e){return b(this,null,function*(){if(this.persistence===e)return;let t=yield this.getCurrentUser();if(yield this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)})}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(e,t,r="authUser"){return b(this,null,function*(){if(!t.length)return new n(Vi(_w),e,r);let i=(yield Promise.all(t.map(u=>b(null,null,function*(){if(yield u._isAvailable())return u})))).filter(u=>u),o=i[0]||Vi(_w),s=Jp(r,e.config.apiKey,e.name),a=null;for(let u of t)try{let f=yield u._get(s);if(f){let m;if(typeof f=="string"){let _=yield ig(e,{idToken:f}).catch(()=>{});if(!_)break;m=yield Ro._fromGetAccountInfoResponse(e,_,f)}else m=Ro._fromJSON(e,f);u!==o&&(a=m),o=u;break}}catch{}let l=i.filter(u=>u._shouldAllowMigration);return!o._shouldAllowMigration||!l.length?new n(o,e,r):(o=l[0],a&&(yield o._set(s,a.toJSON())),yield Promise.all(t.map(u=>b(null,null,function*(){if(u!==o)try{yield u._remove(s)}catch{}}))),new n(o,e,r))})}};function fA(n){let e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(kA(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(MA(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(RA(e))return"Blackberry";if(NA(e))return"Webos";if(PA(e))return"Safari";if((e.includes("chrome/")||AA(e))&&!e.includes("edge/"))return"Chrome";if(OA(e))return"Android";{let t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=n.match(t);if(r?.length===2)return r[1]}return"Other"}function MA(n=Ut()){return/firefox\//i.test(n)}function PA(n=Ut()){let e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function AA(n=Ut()){return/crios\//i.test(n)}function kA(n=Ut()){return/iemobile/i.test(n)}function OA(n=Ut()){return/android/i.test(n)}function RA(n=Ut()){return/blackberry/i.test(n)}function NA(n=Ut()){return/webos/i.test(n)}function Fw(n=Ut()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function u8(n=Ut()){var e;return Fw(n)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function d8(){return AP()&&document.documentMode===10}function FA(n=Ut()){return Fw(n)||OA(n)||NA(n)||RA(n)||/windows phone/i.test(n)||kA(n)}function LA(n,e=[]){let t;switch(n){case"Browser":t=fA(Ut());break;case"Worker":t=`${fA(Ut())}-${n}`;break;default:t=n}let r=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${Po}/${r}`}var yw=class{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){let r=o=>new Promise((s,a)=>{try{let l=e(o);s(l)}catch(l){a(l)}});r.onAbort=t,this.queue.push(r);let i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}runMiddleware(e){return b(this,null,function*(){if(this.auth.currentUser===e)return;let t=[];try{for(let r of this.queue)yield r(e),r.onAbort&&t.push(r.onAbort)}catch(r){t.reverse();for(let i of t)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r?.message})}})}};function f8(t){return b(this,arguments,function*(n,e={}){return Ic(n,"GET","/v2/passwordPolicy",kw(n,e))})}var h8=6,bw=class{constructor(e){var t,r,i,o;let s=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(t=s.minPasswordLength)!==null&&t!==void 0?t:h8,s.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=s.maxPasswordLength),s.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=s.containsLowercaseCharacter),s.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=s.containsUppercaseCharacter),s.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=s.containsNumericCharacter),s.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=s.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(i=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&i!==void 0?i:"",this.forceUpgradeOnSignin=(o=e.forceUpgradeOnSignin)!==null&&o!==void 0?o:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,r,i,o,s,a;let l={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,l),this.validatePasswordCharacterOptions(e,l),l.isValid&&(l.isValid=(t=l.meetsMinPasswordLength)!==null&&t!==void 0?t:!0),l.isValid&&(l.isValid=(r=l.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),l.isValid&&(l.isValid=(i=l.containsLowercaseLetter)!==null&&i!==void 0?i:!0),l.isValid&&(l.isValid=(o=l.containsUppercaseLetter)!==null&&o!==void 0?o:!0),l.isValid&&(l.isValid=(s=l.containsNumericCharacter)!==null&&s!==void 0?s:!0),l.isValid&&(l.isValid=(a=l.containsNonAlphanumericCharacter)!==null&&a!==void 0?a:!0),l}validatePasswordLengthOptions(e,t){let r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(t.meetsMinPasswordLength=e.length>=r),i&&(t.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(t,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,t,r,i,o){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=o))}};var ww=class{constructor(e,t,r,i){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new ag(this),this.idTokenSubscription=new ag(this),this.beforeStateQueue=new yw(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=SA,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion,this._persistenceManagerAvailable=new Promise(o=>this._resolvePersistenceManagerAvailable=o)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=Vi(t)),this._initializationPromise=this.queue(()=>b(this,null,function*(){var r,i,o;if(!this._deleted&&(this.persistenceManager=yield sg.create(this,e),(r=this._resolvePersistenceManagerAvailable)===null||r===void 0||r.call(this),!this._deleted)){if(!((i=this._popupRedirectResolver)===null||i===void 0)&&i._shouldInitProactively)try{yield this._popupRedirectResolver._initialize(this)}catch{}yield this.initializeCurrentUser(t),this.lastNotifiedUid=((o=this.currentUser)===null||o===void 0?void 0:o.uid)||null,!this._deleted&&(this._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){return b(this,null,function*(){if(this._deleted)return;let e=yield this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),yield this.currentUser.getIdToken();return}yield this._updateCurrentUser(e,!0)}})}initializeCurrentUserFromIdToken(e){return b(this,null,function*(){try{let t=yield ig(this,{idToken:e}),r=yield Ro._fromGetAccountInfoResponse(this,t,e);yield this.directlySetCurrentUser(r)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),yield this.directlySetCurrentUser(null)}})}initializeCurrentUser(e){return b(this,null,function*(){var t;if(Vn(this.app)){let s=this.app.settings.authIdToken;return s?new Promise(a=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(s).then(a,a))}):this.directlySetCurrentUser(null)}let r=yield this.assertedPersistence.getCurrentUser(),i=r,o=!1;if(e&&this.config.authDomain){yield this.getOrInitRedirectPersistenceManager();let s=(t=this.redirectUser)===null||t===void 0?void 0:t._redirectEventId,a=i?._redirectEventId,l=yield this.tryRedirectSignIn(e);(!s||s===a)&&l?.user&&(i=l.user,o=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(o)try{yield this.beforeStateQueue.runMiddleware(i)}catch(s){i=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(s))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return fe(this._popupRedirectResolver,this,"argument-error"),yield this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)})}tryRedirectSignIn(e){return b(this,null,function*(){let t=null;try{t=yield this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{yield this._setRedirectUser(null)}return t})}reloadAndSetCurrentUserOrClear(e){return b(this,null,function*(){try{yield og(e)}catch(t){if(t?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)})}useDeviceLanguage(){this.languageCode=JB()}_delete(){return b(this,null,function*(){this._deleted=!0})}updateCurrentUser(e){return b(this,null,function*(){if(Vn(this.app))return Promise.reject($s(this));let t=e?ze(e):null;return t&&fe(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))})}_updateCurrentUser(e,t=!1){return b(this,null,function*(){if(!this._deleted)return e&&fe(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||(yield this.beforeStateQueue.runMiddleware(e)),this.queue(()=>b(this,null,function*(){yield this.directlySetCurrentUser(e),this.notifyAuthListeners()}))})}signOut(){return b(this,null,function*(){return Vn(this.app)?Promise.reject($s(this)):(yield this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&(yield this._setRedirectUser(null)),this._updateCurrentUser(null,!0))})}setPersistence(e){return Vn(this.app)?Promise.reject($s(this)):this.queue(()=>b(this,null,function*(){yield this.assertedPersistence.setPersistence(Vi(e))}))}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}validatePassword(e){return b(this,null,function*(){this._getPasswordPolicyInternal()||(yield this._updatePasswordPolicy());let t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)})}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}_updatePasswordPolicy(){return b(this,null,function*(){let e=yield f8(this),t=new bw(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t})}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new mn("auth","Firebase",e())}onAuthStateChanged(e,t,r){return this.registerStateListener(this.authStateSubscription,e,t,r)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,r){return this.registerStateListener(this.idTokenSubscription,e,t,r)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{let r=this.onAuthStateChanged(()=>{r(),e()},t)}})}revokeAccessToken(e){return b(this,null,function*(){if(this.currentUser){let t=yield this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(r.tenantId=this.tenantId),yield c8(this,r)}})}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}_setRedirectUser(e,t){return b(this,null,function*(){let r=yield this.getOrInitRedirectPersistenceManager(t);return e===null?r.removeCurrentUser():r.setCurrentUser(e)})}getOrInitRedirectPersistenceManager(e){return b(this,null,function*(){if(!this.redirectPersistenceManager){let t=e&&Vi(e)||this._popupRedirectResolver;fe(t,this,"argument-error"),this.redirectPersistenceManager=yield sg.create(this,[Vi(t._redirectPersistence)],"redirectUser"),this.redirectUser=yield this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager})}_redirectUserForId(e){return b(this,null,function*(){var t,r;return this._isInitialized&&(yield this.queue(()=>b(this,null,function*(){}))),((t=this._currentUser)===null||t===void 0?void 0:t._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null})}_persistUserIfCurrent(e){return b(this,null,function*(){if(e===this.currentUser)return this.queue(()=>b(this,null,function*(){return this.directlySetCurrentUser(e)}))})}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);let r=(t=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&t!==void 0?t:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,r,i){if(this._deleted)return()=>{};let o=typeof t=="function"?t:t.next.bind(t),s=!1,a=this._isInitialized?Promise.resolve():this._initializationPromise;if(fe(a,this,"internal-error"),a.then(()=>{s||o(this.currentUser)}),typeof t=="function"){let l=e.addObserver(t,r,i);return()=>{s=!0,l()}}else{let l=e.addObserver(t);return()=>{s=!0,l()}}}directlySetCurrentUser(e){return b(this,null,function*(){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?yield this.assertedPersistence.setCurrentUser(e):yield this.assertedPersistence.removeCurrentUser()})}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return fe(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=LA(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){return b(this,null,function*(){var e;let t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);let r=yield(e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader();r&&(t["X-Firebase-Client"]=r);let i=yield this._getAppCheckToken();return i&&(t["X-Firebase-AppCheck"]=i),t})}_getAppCheckToken(){return b(this,null,function*(){var e;if(Vn(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;let t=yield(e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken();return t?.error&&YB(`Error while retrieving App Check token: ${t.error}`),t?.token})}};function gg(n){return ze(n)}var ag=class{constructor(e){this.auth=e,this.observer=null,this.addObserver=RP(t=>this.observer=t)}get next(){return fe(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}};var Lw={loadJS(){return b(this,null,function*(){throw new Error("Unable to load external scripts")})},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function p8(n){Lw=n}function g8(n){return Lw.loadJS(n)}function m8(){return Lw.gapiScript}function VA(n){return`__${n}${Math.floor(Math.random()*1e6)}`}function Vw(n,e){let t=rr(n,"auth");if(t.isInitialized()){let i=t.getImmediate(),o=t.getOptions();if(tr(o,e??{}))return i;ii(i,"already-initialized")}return t.initialize({options:e})}function v8(n,e){let t=e?.persistence||[],r=(Array.isArray(t)?t:[t]).map(Vi);e?.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(r,e?.popupRedirectResolver)}function Uw(n,e,t){let r=gg(n);fe(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");let i=!!t?.disableWarnings,o=UA(e),{host:s,port:a}=_8(e),l=a===null?"":`:${a}`,u={url:`${o}//${s}${l}/`},f=Object.freeze({host:s,port:a,protocol:o.replace(":",""),options:Object.freeze({disableWarnings:i})});if(!r._canInitEmulator){fe(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),fe(tr(u,r.config.emulator)&&tr(f,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=u,r.emulatorConfig=f,r.settings.appVerificationDisabledForTesting=!0,Do(s)?($p(`${o}//${s}${l}`),Hp("Auth",!0)):i||y8()}function UA(n){let e=n.indexOf(":");return e<0?"":n.substr(0,e+1)}function _8(n){let e=UA(n),t=/(\/\/)?([^?#/]+)/.exec(n.substr(e.length));if(!t)return{host:"",port:null};let r=t[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){let o=i[1];return{host:o,port:hA(r.substr(o.length+1))}}else{let[o,s]=r.split(":");return{host:o,port:hA(s)}}}function hA(n){if(!n)return null;let e=Number(n);return isNaN(e)?null:e}function y8(){function n(){let e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",n):n())}var Yu=class{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return Li("not implemented")}_getIdTokenResponse(e){return Li("not implemented")}_linkToIdToken(e,t){return Li("not implemented")}_getReauthenticationResolver(e){return Li("not implemented")}};function Cc(n,e){return b(this,null,function*(){return r8(n,"POST","/v1/accounts:signInWithIdp",kw(n,e))})}var b8="http://localhost",cg=class n extends Yu{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){let t=new n(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):ii("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){let t=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:i}=t,o=Cf(t,["providerId","signInMethod"]);if(!r||!i)return null;let s=new n(r,i);return s.idToken=o.idToken||void 0,s.accessToken=o.accessToken||void 0,s.secret=o.secret,s.nonce=o.nonce,s.pendingToken=o.pendingToken||null,s}_getIdTokenResponse(e){let t=this.buildRequest();return Cc(e,t)}_linkToIdToken(e,t){let r=this.buildRequest();return r.idToken=t,Cc(e,r)}_getReauthenticationResolver(e){let t=this.buildRequest();return t.autoCreate=!1,Cc(e,t)}buildRequest(){let e={requestUri:b8,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{let t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=bc(t)}return e}};var Qu=class{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}};var lg=class extends Qu{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}};var jw=(()=>{class n extends lg{constructor(){super("google.com"),this.addScope("profile")}static credential(t,r){return cg._fromParams({providerId:n.PROVIDER_ID,signInMethod:n.GOOGLE_SIGN_IN_METHOD,idToken:t,accessToken:r})}static credentialFromResult(t){return n.credentialFromTaggedObject(t)}static credentialFromError(t){return n.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;let{oauthIdToken:r,oauthAccessToken:i}=t;if(!r&&!i)return null;try{return n.credential(r,i)}catch{return null}}}n.GOOGLE_SIGN_IN_METHOD="google.com",n.PROVIDER_ID="google.com";return n})();var Zu=class n{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static _fromIdTokenResponse(e,t,r,i=!1){return b(this,null,function*(){let o=yield Ro._fromIdTokenResponse(e,r,i),s=pA(r);return new n({user:o,providerId:s,_tokenResponse:r,operationType:t})})}static _forOperation(e,t,r){return b(this,null,function*(){yield e._updateTokensIfNecessary(r,!0);let i=pA(r);return new n({user:e,providerId:i,_tokenResponse:r,operationType:t})})}};function pA(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}var Ew=class n extends Wt{constructor(e,t,r,i){var o;super(t.code,t.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,n.prototype),this.customData={appName:e.name,tenantId:(o=e.tenantId)!==null&&o!==void 0?o:void 0,_serverResponse:t.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,t,r,i){return new n(e,t,r,i)}};function jA(n,e,t,r){return(e==="reauthenticate"?t._getReauthenticationResolver(n):t._getIdTokenResponse(n)).catch(o=>{throw o.code==="auth/multi-factor-auth-required"?Ew._fromErrorAndOperation(n,o,e,r):o})}function w8(n,e,t=!1){return b(this,null,function*(){let r=yield Gu(n,e._linkToIdToken(n.auth,yield n.getIdToken()),t);return Zu._forOperation(n,"link",r)})}function E8(n,e,t=!1){return b(this,null,function*(){let{auth:r}=n;if(Vn(r.app))return Promise.reject($s(r));let i="reauthenticate";try{let o=yield Gu(n,jA(r,i,e,n),t);fe(o.idToken,r,"internal-error");let s=Rw(o.idToken);fe(s,r,"internal-error");let{sub:a}=s;return fe(n.uid===a,r,"user-mismatch"),Zu._forOperation(n,i,o)}catch(o){throw o?.code==="auth/user-not-found"&&ii(r,"user-mismatch"),o}})}function C8(n,e,t=!1){return b(this,null,function*(){if(Vn(n.app))return Promise.reject($s(n));let r="signIn",i=yield jA(n,r,e),o=yield Zu._fromIdTokenResponse(n,r,i);return t||(yield n._updateCurrentUser(o.user)),o})}function mg(n,e,t,r){return ze(n).onIdTokenChanged(e,t,r)}function Bw(n,e,t){return ze(n).beforeAuthStateChanged(e,t)}function Ju(n,e,t,r){return ze(n).onAuthStateChanged(e,t,r)}function $w(n){return ze(n).signOut()}var ug="__sak";var dg=class{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(ug,"1"),this.storage.removeItem(ug),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){let t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}};var I8=1e3,S8=10,T8=(()=>{class n extends dg{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(t,r)=>this.onStorageEvent(t,r),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=FA(),this._shouldAllowMigration=!0}forAllChangedKeys(t){for(let r of Object.keys(this.listeners)){let i=this.storage.getItem(r),o=this.localCache[r];i!==o&&t(r,o,i)}}onStorageEvent(t,r=!1){if(!t.key){this.forAllChangedKeys((a,l,u)=>{this.notifyListeners(a,u)});return}let i=t.key;r?this.detachListener():this.stopPolling();let o=()=>{let a=this.storage.getItem(i);!r&&this.localCache[i]===a||this.notifyListeners(i,a)},s=this.storage.getItem(i);d8()&&s!==t.newValue&&t.newValue!==t.oldValue?setTimeout(o,S8):o()}notifyListeners(t,r){this.localCache[t]=r;let i=this.listeners[t];if(i)for(let o of Array.from(i))o(r&&JSON.parse(r))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((t,r,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:t,oldValue:r,newValue:i}),!0)})},I8)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(t,r){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[t]||(this.listeners[t]=new Set,this.localCache[t]=this.storage.getItem(t)),this.listeners[t].add(r)}_removeListener(t,r){this.listeners[t]&&(this.listeners[t].delete(r),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}_set(t,r){return b(this,null,function*(){yield eo(n.prototype,this,"_set").call(this,t,r),this.localCache[t]=JSON.stringify(r)})}_get(t){return b(this,null,function*(){let r=yield eo(n.prototype,this,"_get").call(this,t);return this.localCache[t]=JSON.stringify(r),r})}_remove(t){return b(this,null,function*(){yield eo(n.prototype,this,"_remove").call(this,t),delete this.localCache[t]})}}return n.type="LOCAL",n})(),BA=T8;var D8=(()=>{class n extends dg{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(t,r){}_removeListener(t,r){}}return n.type="SESSION",n})(),Hw=D8;function x8(n){return Promise.all(n.map(e=>b(null,null,function*(){try{return{fulfilled:!0,value:yield e}}catch(t){return{fulfilled:!1,reason:t}}})))}var M8=(()=>{class n{constructor(t){this.eventTarget=t,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(t){let r=this.receivers.find(o=>o.isListeningto(t));if(r)return r;let i=new n(t);return this.receivers.push(i),i}isListeningto(t){return this.eventTarget===t}handleEvent(t){return b(this,null,function*(){let r=t,{eventId:i,eventType:o,data:s}=r.data,a=this.handlersMap[o];if(!a?.size)return;r.ports[0].postMessage({status:"ack",eventId:i,eventType:o});let l=Array.from(a).map(f=>b(this,null,function*(){return f(r.origin,s)})),u=yield x8(l);r.ports[0].postMessage({status:"done",eventId:i,eventType:o,response:u})})}_subscribe(t,r){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[t]||(this.handlersMap[t]=new Set),this.handlersMap[t].add(r)}_unsubscribe(t,r){this.handlersMap[t]&&r&&this.handlersMap[t].delete(r),(!r||this.handlersMap[t].size===0)&&delete this.handlersMap[t],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}n.receivers=[];return n})();function zw(n="",e=10){let t="";for(let r=0;r<e;r++)t+=Math.floor(Math.random()*10);return n+t}var Cw=class{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}_send(e,t,r=50){return b(this,null,function*(){let i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let o,s;return new Promise((a,l)=>{let u=zw("",20);i.port1.start();let f=setTimeout(()=>{l(new Error("unsupported_event"))},r);s={messageChannel:i,onMessage(m){let _=m;if(_.data.eventId===u)switch(_.data.status){case"ack":clearTimeout(f),o=setTimeout(()=>{l(new Error("timeout"))},3e3);break;case"done":clearTimeout(o),a(_.data.response);break;default:clearTimeout(f),clearTimeout(o),l(new Error("invalid_response"));break}}},this.handlers.add(s),i.port1.addEventListener("message",s.onMessage),this.target.postMessage({eventType:e,eventId:u,data:t},[i.port2])}).finally(()=>{s&&this.removeMessageHandler(s)})})}};function ri(){return window}function P8(n){ri().location.href=n}function $A(){return typeof ri().WorkerGlobalScope<"u"&&typeof ri().importScripts=="function"}function A8(){return b(this,null,function*(){if(!navigator?.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})}function k8(){var n;return((n=navigator?.serviceWorker)===null||n===void 0?void 0:n.controller)||null}function O8(){return $A()?self:null}var HA="firebaseLocalStorageDb",R8=1,fg="firebaseLocalStorage",zA="fbase_key",zs=class{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}};function vg(n,e){return n.transaction([fg],e?"readwrite":"readonly").objectStore(fg)}function N8(){let n=indexedDB.deleteDatabase(HA);return new zs(n).toPromise()}function Iw(){let n=indexedDB.open(HA,R8);return new Promise((e,t)=>{n.addEventListener("error",()=>{t(n.error)}),n.addEventListener("upgradeneeded",()=>{let r=n.result;try{r.createObjectStore(fg,{keyPath:zA})}catch(i){t(i)}}),n.addEventListener("success",()=>b(null,null,function*(){let r=n.result;r.objectStoreNames.contains(fg)?e(r):(r.close(),yield N8(),e(yield Iw()))}))})}function gA(n,e,t){return b(this,null,function*(){let r=vg(n,!0).put({[zA]:e,value:t});return new zs(r).toPromise()})}function F8(n,e){return b(this,null,function*(){let t=vg(n,!1).get(e),r=yield new zs(t).toPromise();return r===void 0?null:r.value})}function mA(n,e){let t=vg(n,!0).delete(e);return new zs(t).toPromise()}var L8=800,V8=3,U8=(()=>{class n{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){return b(this,null,function*(){return this.db?this.db:(this.db=yield Iw(),this.db)})}_withRetries(t){return b(this,null,function*(){let r=0;for(;;)try{let i=yield this._openDb();return yield t(i)}catch(i){if(r++>V8)throw i;this.db&&(this.db.close(),this.db=void 0)}})}initializeServiceWorkerMessaging(){return b(this,null,function*(){return $A()?this.initializeReceiver():this.initializeSender()})}initializeReceiver(){return b(this,null,function*(){this.receiver=M8._getInstance(O8()),this.receiver._subscribe("keyChanged",(t,r)=>b(this,null,function*(){return{keyProcessed:(yield this._poll()).includes(r.key)}})),this.receiver._subscribe("ping",(t,r)=>b(this,null,function*(){return["keyChanged"]}))})}initializeSender(){return b(this,null,function*(){var t,r;if(this.activeServiceWorker=yield A8(),!this.activeServiceWorker)return;this.sender=new Cw(this.activeServiceWorker);let i=yield this.sender._send("ping",{},800);i&&!((t=i[0])===null||t===void 0)&&t.fulfilled&&!((r=i[0])===null||r===void 0)&&r.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)})}notifyServiceWorker(t){return b(this,null,function*(){if(!(!this.sender||!this.activeServiceWorker||k8()!==this.activeServiceWorker))try{yield this.sender._send("keyChanged",{key:t},this.serviceWorkerReceiverAvailable?800:50)}catch{}})}_isAvailable(){return b(this,null,function*(){try{if(!indexedDB)return!1;let t=yield Iw();return yield gA(t,ug,"1"),yield mA(t,ug),!0}catch{}return!1})}_withPendingWrite(t){return b(this,null,function*(){this.pendingWrites++;try{yield t()}finally{this.pendingWrites--}})}_set(t,r){return b(this,null,function*(){return this._withPendingWrite(()=>b(this,null,function*(){return yield this._withRetries(i=>gA(i,t,r)),this.localCache[t]=r,this.notifyServiceWorker(t)}))})}_get(t){return b(this,null,function*(){let r=yield this._withRetries(i=>F8(i,t));return this.localCache[t]=r,r})}_remove(t){return b(this,null,function*(){return this._withPendingWrite(()=>b(this,null,function*(){return yield this._withRetries(r=>mA(r,t)),delete this.localCache[t],this.notifyServiceWorker(t)}))})}_poll(){return b(this,null,function*(){let t=yield this._withRetries(o=>{let s=vg(o,!1).getAll();return new zs(s).toPromise()});if(!t)return[];if(this.pendingWrites!==0)return[];let r=[],i=new Set;if(t.length!==0)for(let{fbase_key:o,value:s}of t)i.add(o),JSON.stringify(this.localCache[o])!==JSON.stringify(s)&&(this.notifyListeners(o,s),r.push(o));for(let o of Object.keys(this.localCache))this.localCache[o]&&!i.has(o)&&(this.notifyListeners(o,null),r.push(o));return r})}notifyListeners(t,r){this.localCache[t]=r;let i=this.listeners[t];if(i)for(let o of Array.from(i))o(r)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>b(this,null,function*(){return this._poll()}),L8)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(t,r){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[t]||(this.listeners[t]=new Set,this._get(t)),this.listeners[t].add(r)}_removeListener(t,r){this.listeners[t]&&(this.listeners[t].delete(r),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&this.stopPolling()}}return n.type="LOCAL",n})(),qA=U8;var wpe=VA("rcb"),Epe=new Hs(3e4,6e4);function WA(n,e){return e?Vi(e):(fe(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}var Xu=class extends Yu{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Cc(e,this._buildIdpRequest())}_linkToIdToken(e,t){return Cc(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return Cc(e,this._buildIdpRequest())}_buildIdpRequest(e){let t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}};function j8(n){return C8(n.auth,new Xu(n),n.bypassAuthState)}function B8(n){let{auth:e,user:t}=n;return fe(t,e,"internal-error"),E8(t,new Xu(n),n.bypassAuthState)}function $8(n){return b(this,null,function*(){let{auth:e,user:t}=n;return fe(t,e,"internal-error"),w8(t,new Xu(n),n.bypassAuthState)})}var hg=class{constructor(e,t,r,i,o=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=o,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise((e,t)=>b(this,null,function*(){this.pendingPromise={resolve:e,reject:t};try{this.eventManager=yield this.resolver._initialize(this.auth),yield this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}}))}onAuthEvent(e){return b(this,null,function*(){let{urlResponse:t,sessionId:r,postBody:i,tenantId:o,error:s,type:a}=e;if(s){this.reject(s);return}let l={auth:this.auth,requestUri:t,sessionId:r,tenantId:o||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(yield this.getIdpTask(a)(l))}catch(u){this.reject(u)}})}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return j8;case"linkViaPopup":case"linkViaRedirect":return $8;case"reauthViaPopup":case"reauthViaRedirect":return B8;default:ii(this.auth,"internal-error")}}resolve(e){Ui(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Ui(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}};var H8=new Hs(2e3,1e4);function qw(n,e,t){return b(this,null,function*(){if(Vn(n.app))return Promise.reject(Ar(n,"operation-not-supported-in-this-environment"));let r=gg(n);QB(n,e,Qu);let i=WA(r,t);return new z8(r,"signInViaPopup",e,i).executeNotNull()})}var z8=(()=>{class n extends hg{constructor(t,r,i,o,s){super(t,r,o,s),this.provider=i,this.authWindow=null,this.pollId=null,n.currentPopupAction&&n.currentPopupAction.cancel(),n.currentPopupAction=this}executeNotNull(){return b(this,null,function*(){let t=yield this.execute();return fe(t,this.auth,"internal-error"),t})}onExecution(){return b(this,null,function*(){Ui(this.filter.length===1,"Popup operations only handle one event");let t=zw();this.authWindow=yield this.resolver._openPopup(this.auth,this.provider,this.filter[0],t),this.authWindow.associatedEvent=t,this.resolver._originValidation(this.auth).catch(r=>{this.reject(r)}),this.resolver._isIframeWebStorageSupported(this.auth,r=>{r||this.reject(Ar(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()})}get eventId(){var t;return((t=this.authWindow)===null||t===void 0?void 0:t.associatedEvent)||null}cancel(){this.reject(Ar(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,n.currentPopupAction=null}pollUserCancellation(){let t=()=>{var r,i;if(!((i=(r=this.authWindow)===null||r===void 0?void 0:r.window)===null||i===void 0)&&i.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Ar(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(t,H8.get())};t()}}n.currentPopupAction=null;return n})(),q8="pendingRedirect",eg=new Map,Sw=class n extends hg{constructor(e,t,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,r),this.eventId=null}execute(){return b(this,null,function*(){let e=eg.get(this.auth._key());if(!e){try{let r=(yield W8(this.resolver,this.auth))?yield eo(n.prototype,this,"execute").call(this):null;e=()=>Promise.resolve(r)}catch(t){e=()=>Promise.reject(t)}eg.set(this.auth._key(),e)}return this.bypassAuthState||eg.set(this.auth._key(),()=>Promise.resolve(null)),e()})}onAuthEvent(e){return b(this,null,function*(){if(e.type==="signInViaRedirect")return eo(n.prototype,this,"onAuthEvent").call(this,e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){let t=yield this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,eo(n.prototype,this,"onAuthEvent").call(this,e);this.resolve(null)}})}onExecution(){return b(this,null,function*(){})}cleanUp(){}};function W8(n,e){return b(this,null,function*(){let t=Y8(e),r=K8(n);if(!(yield r._isAvailable()))return!1;let i=(yield r._get(t))==="true";return yield r._remove(t),i})}function G8(n,e){eg.set(n._key(),e)}function K8(n){return Vi(n._redirectPersistence)}function Y8(n){return Jp(q8,n.config.apiKey,n.name)}function Q8(n,e,t=!1){return b(this,null,function*(){if(Vn(n.app))return Promise.reject($s(n));let r=gg(n),i=WA(r,e),s=yield new Sw(r,i,t).execute();return s&&!t&&(delete s.user._redirectEventId,yield r._persistUserIfCurrent(s.user),yield r._setRedirectUser(null,e)),s})}var Z8=600*1e3,Tw=class{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(t=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!X8(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var r;if(e.error&&!GA(e)){let i=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";t.onError(Ar(this.auth,i))}else t.onAuthEvent(e)}isEventForConsumer(e,t){let r=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=Z8&&this.cachedEventUids.clear(),this.cachedEventUids.has(vA(e))}saveEventToCache(e){this.cachedEventUids.add(vA(e)),this.lastProcessedEventTime=Date.now()}};function vA(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(e=>e).join("-")}function GA({type:n,error:e}){return n==="unknown"&&e?.code==="auth/no-auth-event"}function X8(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return GA(n);default:return!1}}function J8(t){return b(this,arguments,function*(n,e={}){return Ic(n,"GET","/v1/projects",e)})}var e9=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,t9=/^https?/;function n9(n){return b(this,null,function*(){if(n.config.emulator)return;let{authorizedDomains:e}=yield J8(n);for(let t of e)try{if(r9(t))return}catch{}ii(n,"unauthorized-domain")})}function r9(n){let e=gw(),{protocol:t,hostname:r}=new URL(e);if(n.startsWith("chrome-extension://")){let s=new URL(n);return s.hostname===""&&r===""?t==="chrome-extension:"&&n.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&s.hostname===r}if(!t9.test(t))return!1;if(e9.test(n))return r===n;let i=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}var i9=new Hs(3e4,6e4);function _A(){let n=ri().___jsl;if(n?.H){for(let e of Object.keys(n.H))if(n.H[e].r=n.H[e].r||[],n.H[e].L=n.H[e].L||[],n.H[e].r=[...n.H[e].L],n.CP)for(let t=0;t<n.CP.length;t++)n.CP[t]=null}}function o9(n){return new Promise((e,t)=>{var r,i,o;function s(){_A(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{_A(),t(Ar(n,"network-request-failed"))},timeout:i9.get()})}if(!((i=(r=ri().gapi)===null||r===void 0?void 0:r.iframes)===null||i===void 0)&&i.Iframe)e(gapi.iframes.getContext());else if(!((o=ri().gapi)===null||o===void 0)&&o.load)s();else{let a=VA("iframefcb");return ri()[a]=()=>{gapi.load?s():t(Ar(n,"network-request-failed"))},g8(`${m8()}?onload=${a}`).catch(l=>t(l))}}).catch(e=>{throw tg=null,e})}var tg=null;function s9(n){return tg=tg||o9(n),tg}var a9=new Hs(5e3,15e3),c9="__/auth/iframe",l9="emulator/auth/iframe",u9={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},d9=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function f9(n){let e=n.config;fe(e.authDomain,n,"auth-domain-config-required");let t=e.emulator?Aw(e,l9):`https://${n.config.authDomain}/${c9}`,r={apiKey:e.apiKey,appName:n.name,v:Po},i=d9.get(n.config.apiHost);i&&(r.eid=i);let o=n._getFrameworks();return o.length&&(r.fw=o.join(",")),`${t}?${bc(r).slice(1)}`}function h9(n){return b(this,null,function*(){let e=yield s9(n),t=ri().gapi;return fe(t,n,"internal-error"),e.open({where:document.body,url:f9(n),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:u9,dontclear:!0},r=>new Promise((i,o)=>b(null,null,function*(){yield r.restyle({setHideOnLeave:!1});let s=Ar(n,"network-request-failed"),a=ri().setTimeout(()=>{o(s)},a9.get());function l(){ri().clearTimeout(a),i(r)}r.ping(l).then(l,()=>{o(s)})})))})}var p9={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},g9=500,m9=600,v9="_blank",_9="http://localhost",pg=class{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}};function y9(n,e,t,r=g9,i=m9){let o=Math.max((window.screen.availHeight-i)/2,0).toString(),s=Math.max((window.screen.availWidth-r)/2,0).toString(),a="",l=Object.assign(Object.assign({},p9),{width:r.toString(),height:i.toString(),top:o,left:s}),u=Ut().toLowerCase();t&&(a=AA(u)?v9:t),MA(u)&&(e=e||_9,l.scrollbars="yes");let f=Object.entries(l).reduce((_,[E,x])=>`${_}${E}=${x},`,"");if(u8(u)&&a!=="_self")return b9(e||"",a),new pg(null);let m=window.open(e||"",a,f);fe(m,n,"popup-blocked");try{m.focus()}catch{}return new pg(m)}function b9(n,e){let t=document.createElement("a");t.href=n,t.target=e;let r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(r)}var w9="__/auth/handler",E9="emulator/auth/handler",C9=encodeURIComponent("fac");function yA(n,e,t,r,i,o){return b(this,null,function*(){fe(n.config.authDomain,n,"auth-domain-config-required"),fe(n.config.apiKey,n,"invalid-api-key");let s={apiKey:n.config.apiKey,appName:n.name,authType:t,redirectUrl:r,v:Po,eventId:i};if(e instanceof Qu){e.setDefaultLanguage(n.languageCode),s.providerId=e.providerId||"",OP(e.getCustomParameters())||(s.customParameters=JSON.stringify(e.getCustomParameters()));for(let[f,m]of Object.entries(o||{}))s[f]=m}if(e instanceof lg){let f=e.getScopes().filter(m=>m!=="");f.length>0&&(s.scopes=f.join(","))}n.tenantId&&(s.tid=n.tenantId);let a=s;for(let f of Object.keys(a))a[f]===void 0&&delete a[f];let l=yield n._getAppCheckToken(),u=l?`#${C9}=${encodeURIComponent(l)}`:"";return`${I9(n)}?${bc(a).slice(1)}${u}`})}function I9({config:n}){return n.emulator?Aw(n,E9):`https://${n.authDomain}/${w9}`}var pw="webStorageSupport",Dw=class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Hw,this._completeRedirectFn=Q8,this._overrideRedirectResult=G8}_openPopup(e,t,r,i){return b(this,null,function*(){var o;Ui((o=this.eventManagers[e._key()])===null||o===void 0?void 0:o.manager,"_initialize() not called before _openPopup()");let s=yield yA(e,t,r,gw(),i);return y9(e,s,zw())})}_openRedirect(e,t,r,i){return b(this,null,function*(){yield this._originValidation(e);let o=yield yA(e,t,r,gw(),i);return P8(o),new Promise(()=>{})})}_initialize(e){let t=e._key();if(this.eventManagers[t]){let{manager:i,promise:o}=this.eventManagers[t];return i?Promise.resolve(i):(Ui(o,"If manager is not set, promise should be"),o)}let r=this.initAndGetManager(e);return this.eventManagers[t]={promise:r},r.catch(()=>{delete this.eventManagers[t]}),r}initAndGetManager(e){return b(this,null,function*(){let t=yield h9(e),r=new Tw(e);return t.register("authEvent",i=>(fe(i?.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=t,r})}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(pw,{type:pw},i=>{var o;let s=(o=i?.[0])===null||o===void 0?void 0:o[pw];s!==void 0&&t(!!s),ii(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){let t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=n9(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return FA()||PA()||Fw()}},KA=Dw;var bA="@firebase/auth",wA="1.10.8";var xw=class{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}getToken(e){return b(this,null,function*(){return this.assertAuthConfigured(),yield this.auth._initializationPromise,this.auth.currentUser?{accessToken:yield this.auth.currentUser.getIdToken(e)}:null})}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;let t=this.auth.onIdTokenChanged(r=>{e(r?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();let t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){fe(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}};function S9(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function T9(n){Gt(new mt("auth",(e,{options:t})=>{let r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),o=e.getProvider("app-check-internal"),{apiKey:s,authDomain:a}=r.options;fe(s&&!s.includes(":"),"invalid-api-key",{appName:r.name});let l={apiKey:s,authDomain:a,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:LA(n)},u=new ww(r,i,o,l);return v8(u,t),u},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,r)=>{e.getProvider("auth-internal").initialize()})),Gt(new mt("auth-internal",e=>{let t=gg(e.getProvider("auth").getImmediate());return(r=>new xw(r))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),Re(bA,wA,S9(n)),Re(bA,wA,"esm2017")}var D9=300,x9=Hb("authIdTokenMaxAge")||D9,EA=null,M9=n=>e=>b(null,null,function*(){let t=e&&(yield e.getIdTokenResult()),r=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(r&&r>x9)return;let i=t?.token;EA!==i&&(EA=i,yield fetch(n,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))});function Ww(n=ti()){let e=rr(n,"auth");if(e.isInitialized())return e.getImmediate();let t=Vw(n,{popupRedirectResolver:KA,persistence:[qA,BA,Hw]}),r=Hb("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){let o=new URL(r,location.origin);if(location.origin===o.origin){let s=M9(o.toString());Bw(t,s,()=>s(t.currentUser)),mg(t,a=>s(a))}}let i=Bb("auth");return i&&Uw(t,`http://${i}`),t}function P9(){var n,e;return(e=(n=document.getElementsByTagName("head"))===null||n===void 0?void 0:n[0])!==null&&e!==void 0?e:document}p8({loadJS(n){return new Promise((e,t)=>{let r=document.createElement("script");r.setAttribute("src",n),r.onload=e,r.onerror=i=>{let o=Ar("internal-error");o.customData=i,t(o)},r.type="text/javascript",r.charset="UTF-8",P9().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});T9("Browser");function QA(n){return new ge(function(e){var t=Ju(n,e.next.bind(e),e.error.bind(e),e.complete.bind(e));return{unsubscribe:t}})}var ZA="auth",Un=class{constructor(e){return e}},ed=class{constructor(){return Ao(ZA)}};var Gw=new X("angularfire2.auth-instances");function y$(n,e){let t=Bs(ZA,n,e);return t&&new Un(t)}function b$(n){return(e,t)=>{let r=e.runOutsideAngular(()=>n(t));return new Un(r)}}var w$={provide:ed,deps:[[new qt,Gw]]},E$={provide:Un,useFactory:y$,deps:[[new qt,Gw],Mr]};function XA(n,...e){return Re("angularfire",ir.full,"auth"),tn([E$,w$,{provide:Gw,useFactory:b$(n),multi:!0,deps:[xe,Ke,ni,Fi,[new qt,Ec],...e]}])}var _g=Ne(QA,!0);var yg=Ne(Ww,!0);var JA=Ne(Ju,!0);var ek=Ne(qw,!0,2);var tk=Ne($w,!0,2);var nk=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},rk={};var ji,Kw;(function(){var n;function e(P,I){function D(){}D.prototype=I.prototype,P.D=I.prototype,P.prototype=new D,P.prototype.constructor=P,P.C=function(M,A,R){for(var T=Array(arguments.length-2),pi=2;pi<arguments.length;pi++)T[pi-2]=arguments[pi];return I.prototype[A].apply(M,T)}}function t(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,t),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(P,I,D){D||(D=0);var M=Array(16);if(typeof I=="string")for(var A=0;16>A;++A)M[A]=I.charCodeAt(D++)|I.charCodeAt(D++)<<8|I.charCodeAt(D++)<<16|I.charCodeAt(D++)<<24;else for(A=0;16>A;++A)M[A]=I[D++]|I[D++]<<8|I[D++]<<16|I[D++]<<24;I=P.g[0],D=P.g[1],A=P.g[2];var R=P.g[3],T=I+(R^D&(A^R))+M[0]+3614090360&4294967295;I=D+(T<<7&4294967295|T>>>25),T=R+(A^I&(D^A))+M[1]+3905402710&4294967295,R=I+(T<<12&4294967295|T>>>20),T=A+(D^R&(I^D))+M[2]+606105819&4294967295,A=R+(T<<17&4294967295|T>>>15),T=D+(I^A&(R^I))+M[3]+3250441966&4294967295,D=A+(T<<22&4294967295|T>>>10),T=I+(R^D&(A^R))+M[4]+4118548399&4294967295,I=D+(T<<7&4294967295|T>>>25),T=R+(A^I&(D^A))+M[5]+1200080426&4294967295,R=I+(T<<12&4294967295|T>>>20),T=A+(D^R&(I^D))+M[6]+2821735955&4294967295,A=R+(T<<17&4294967295|T>>>15),T=D+(I^A&(R^I))+M[7]+4249261313&4294967295,D=A+(T<<22&4294967295|T>>>10),T=I+(R^D&(A^R))+M[8]+1770035416&4294967295,I=D+(T<<7&4294967295|T>>>25),T=R+(A^I&(D^A))+M[9]+2336552879&4294967295,R=I+(T<<12&4294967295|T>>>20),T=A+(D^R&(I^D))+M[10]+4294925233&4294967295,A=R+(T<<17&4294967295|T>>>15),T=D+(I^A&(R^I))+M[11]+2304563134&4294967295,D=A+(T<<22&4294967295|T>>>10),T=I+(R^D&(A^R))+M[12]+1804603682&4294967295,I=D+(T<<7&4294967295|T>>>25),T=R+(A^I&(D^A))+M[13]+4254626195&4294967295,R=I+(T<<12&4294967295|T>>>20),T=A+(D^R&(I^D))+M[14]+2792965006&4294967295,A=R+(T<<17&4294967295|T>>>15),T=D+(I^A&(R^I))+M[15]+1236535329&4294967295,D=A+(T<<22&4294967295|T>>>10),T=I+(A^R&(D^A))+M[1]+4129170786&4294967295,I=D+(T<<5&4294967295|T>>>27),T=R+(D^A&(I^D))+M[6]+3225465664&4294967295,R=I+(T<<9&4294967295|T>>>23),T=A+(I^D&(R^I))+M[11]+643717713&4294967295,A=R+(T<<14&4294967295|T>>>18),T=D+(R^I&(A^R))+M[0]+3921069994&4294967295,D=A+(T<<20&4294967295|T>>>12),T=I+(A^R&(D^A))+M[5]+3593408605&4294967295,I=D+(T<<5&4294967295|T>>>27),T=R+(D^A&(I^D))+M[10]+38016083&4294967295,R=I+(T<<9&4294967295|T>>>23),T=A+(I^D&(R^I))+M[15]+3634488961&4294967295,A=R+(T<<14&4294967295|T>>>18),T=D+(R^I&(A^R))+M[4]+3889429448&4294967295,D=A+(T<<20&4294967295|T>>>12),T=I+(A^R&(D^A))+M[9]+568446438&4294967295,I=D+(T<<5&4294967295|T>>>27),T=R+(D^A&(I^D))+M[14]+3275163606&4294967295,R=I+(T<<9&4294967295|T>>>23),T=A+(I^D&(R^I))+M[3]+4107603335&4294967295,A=R+(T<<14&4294967295|T>>>18),T=D+(R^I&(A^R))+M[8]+1163531501&4294967295,D=A+(T<<20&4294967295|T>>>12),T=I+(A^R&(D^A))+M[13]+2850285829&4294967295,I=D+(T<<5&4294967295|T>>>27),T=R+(D^A&(I^D))+M[2]+4243563512&4294967295,R=I+(T<<9&4294967295|T>>>23),T=A+(I^D&(R^I))+M[7]+1735328473&4294967295,A=R+(T<<14&4294967295|T>>>18),T=D+(R^I&(A^R))+M[12]+2368359562&4294967295,D=A+(T<<20&4294967295|T>>>12),T=I+(D^A^R)+M[5]+4294588738&4294967295,I=D+(T<<4&4294967295|T>>>28),T=R+(I^D^A)+M[8]+2272392833&4294967295,R=I+(T<<11&4294967295|T>>>21),T=A+(R^I^D)+M[11]+1839030562&4294967295,A=R+(T<<16&4294967295|T>>>16),T=D+(A^R^I)+M[14]+4259657740&4294967295,D=A+(T<<23&4294967295|T>>>9),T=I+(D^A^R)+M[1]+2763975236&4294967295,I=D+(T<<4&4294967295|T>>>28),T=R+(I^D^A)+M[4]+1272893353&4294967295,R=I+(T<<11&4294967295|T>>>21),T=A+(R^I^D)+M[7]+4139469664&4294967295,A=R+(T<<16&4294967295|T>>>16),T=D+(A^R^I)+M[10]+3200236656&4294967295,D=A+(T<<23&4294967295|T>>>9),T=I+(D^A^R)+M[13]+681279174&4294967295,I=D+(T<<4&4294967295|T>>>28),T=R+(I^D^A)+M[0]+3936430074&4294967295,R=I+(T<<11&4294967295|T>>>21),T=A+(R^I^D)+M[3]+3572445317&4294967295,A=R+(T<<16&4294967295|T>>>16),T=D+(A^R^I)+M[6]+76029189&4294967295,D=A+(T<<23&4294967295|T>>>9),T=I+(D^A^R)+M[9]+3654602809&4294967295,I=D+(T<<4&4294967295|T>>>28),T=R+(I^D^A)+M[12]+3873151461&4294967295,R=I+(T<<11&4294967295|T>>>21),T=A+(R^I^D)+M[15]+530742520&4294967295,A=R+(T<<16&4294967295|T>>>16),T=D+(A^R^I)+M[2]+3299628645&4294967295,D=A+(T<<23&4294967295|T>>>9),T=I+(A^(D|~R))+M[0]+4096336452&4294967295,I=D+(T<<6&4294967295|T>>>26),T=R+(D^(I|~A))+M[7]+1126891415&4294967295,R=I+(T<<10&4294967295|T>>>22),T=A+(I^(R|~D))+M[14]+2878612391&4294967295,A=R+(T<<15&4294967295|T>>>17),T=D+(R^(A|~I))+M[5]+4237533241&4294967295,D=A+(T<<21&4294967295|T>>>11),T=I+(A^(D|~R))+M[12]+1700485571&4294967295,I=D+(T<<6&4294967295|T>>>26),T=R+(D^(I|~A))+M[3]+2399980690&4294967295,R=I+(T<<10&4294967295|T>>>22),T=A+(I^(R|~D))+M[10]+4293915773&4294967295,A=R+(T<<15&4294967295|T>>>17),T=D+(R^(A|~I))+M[1]+2240044497&4294967295,D=A+(T<<21&4294967295|T>>>11),T=I+(A^(D|~R))+M[8]+1873313359&4294967295,I=D+(T<<6&4294967295|T>>>26),T=R+(D^(I|~A))+M[15]+4264355552&4294967295,R=I+(T<<10&4294967295|T>>>22),T=A+(I^(R|~D))+M[6]+2734768916&4294967295,A=R+(T<<15&4294967295|T>>>17),T=D+(R^(A|~I))+M[13]+1309151649&4294967295,D=A+(T<<21&4294967295|T>>>11),T=I+(A^(D|~R))+M[4]+4149444226&4294967295,I=D+(T<<6&4294967295|T>>>26),T=R+(D^(I|~A))+M[11]+3174756917&4294967295,R=I+(T<<10&4294967295|T>>>22),T=A+(I^(R|~D))+M[2]+718787259&4294967295,A=R+(T<<15&4294967295|T>>>17),T=D+(R^(A|~I))+M[9]+3951481745&4294967295,P.g[0]=P.g[0]+I&4294967295,P.g[1]=P.g[1]+(A+(T<<21&4294967295|T>>>11))&4294967295,P.g[2]=P.g[2]+A&4294967295,P.g[3]=P.g[3]+R&4294967295}r.prototype.u=function(P,I){I===void 0&&(I=P.length);for(var D=I-this.blockSize,M=this.B,A=this.h,R=0;R<I;){if(A==0)for(;R<=D;)i(this,P,R),R+=this.blockSize;if(typeof P=="string"){for(;R<I;)if(M[A++]=P.charCodeAt(R++),A==this.blockSize){i(this,M),A=0;break}}else for(;R<I;)if(M[A++]=P[R++],A==this.blockSize){i(this,M),A=0;break}}this.h=A,this.o+=I},r.prototype.v=function(){var P=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);P[0]=128;for(var I=1;I<P.length-8;++I)P[I]=0;var D=8*this.o;for(I=P.length-8;I<P.length;++I)P[I]=D&255,D/=256;for(this.u(P),P=Array(16),I=D=0;4>I;++I)for(var M=0;32>M;M+=8)P[D++]=this.g[I]>>>M&255;return P};function o(P,I){var D=a;return Object.prototype.hasOwnProperty.call(D,P)?D[P]:D[P]=I(P)}function s(P,I){this.h=I;for(var D=[],M=!0,A=P.length-1;0<=A;A--){var R=P[A]|0;M&&R==I||(D[A]=R,M=!1)}this.g=D}var a={};function l(P){return-128<=P&&128>P?o(P,function(I){return new s([I|0],0>I?-1:0)}):new s([P|0],0>P?-1:0)}function u(P){if(isNaN(P)||!isFinite(P))return m;if(0>P)return L(u(-P));for(var I=[],D=1,M=0;P>=D;M++)I[M]=P/D|0,D*=4294967296;return new s(I,0)}function f(P,I){if(P.length==0)throw Error("number format error: empty string");if(I=I||10,2>I||36<I)throw Error("radix out of range: "+I);if(P.charAt(0)=="-")return L(f(P.substring(1),I));if(0<=P.indexOf("-"))throw Error('number format error: interior "-" character');for(var D=u(Math.pow(I,8)),M=m,A=0;A<P.length;A+=8){var R=Math.min(8,P.length-A),T=parseInt(P.substring(A,A+R),I);8>R?(R=u(Math.pow(I,R)),M=M.j(R).add(u(T))):(M=M.j(D),M=M.add(u(T)))}return M}var m=l(0),_=l(1),E=l(16777216);n=s.prototype,n.m=function(){if(F(this))return-L(this).m();for(var P=0,I=1,D=0;D<this.g.length;D++){var M=this.i(D);P+=(0<=M?M:4294967296+M)*I,I*=4294967296}return P},n.toString=function(P){if(P=P||10,2>P||36<P)throw Error("radix out of range: "+P);if(x(this))return"0";if(F(this))return"-"+L(this).toString(P);for(var I=u(Math.pow(P,6)),D=this,M="";;){var A=Fe(D,I).g;D=W(D,A.j(I));var R=((0<D.g.length?D.g[0]:D.h)>>>0).toString(P);if(D=A,x(D))return R+M;for(;6>R.length;)R="0"+R;M=R+M}},n.i=function(P){return 0>P?0:P<this.g.length?this.g[P]:this.h};function x(P){if(P.h!=0)return!1;for(var I=0;I<P.g.length;I++)if(P.g[I]!=0)return!1;return!0}function F(P){return P.h==-1}n.l=function(P){return P=W(this,P),F(P)?-1:x(P)?0:1};function L(P){for(var I=P.g.length,D=[],M=0;M<I;M++)D[M]=~P.g[M];return new s(D,~P.h).add(_)}n.abs=function(){return F(this)?L(this):this},n.add=function(P){for(var I=Math.max(this.g.length,P.g.length),D=[],M=0,A=0;A<=I;A++){var R=M+(this.i(A)&65535)+(P.i(A)&65535),T=(R>>>16)+(this.i(A)>>>16)+(P.i(A)>>>16);M=T>>>16,R&=65535,T&=65535,D[A]=T<<16|R}return new s(D,D[D.length-1]&-2147483648?-1:0)};function W(P,I){return P.add(L(I))}n.j=function(P){if(x(this)||x(P))return m;if(F(this))return F(P)?L(this).j(L(P)):L(L(this).j(P));if(F(P))return L(this.j(L(P)));if(0>this.l(E)&&0>P.l(E))return u(this.m()*P.m());for(var I=this.g.length+P.g.length,D=[],M=0;M<2*I;M++)D[M]=0;for(M=0;M<this.g.length;M++)for(var A=0;A<P.g.length;A++){var R=this.i(M)>>>16,T=this.i(M)&65535,pi=P.i(A)>>>16,rl=P.i(A)&65535;D[2*M+2*A]+=T*rl,oe(D,2*M+2*A),D[2*M+2*A+1]+=R*rl,oe(D,2*M+2*A+1),D[2*M+2*A+1]+=T*pi,oe(D,2*M+2*A+1),D[2*M+2*A+2]+=R*pi,oe(D,2*M+2*A+2)}for(M=0;M<I;M++)D[M]=D[2*M+1]<<16|D[2*M];for(M=I;M<2*I;M++)D[M]=0;return new s(D,0)};function oe(P,I){for(;(P[I]&65535)!=P[I];)P[I+1]+=P[I]>>>16,P[I]&=65535,I++}function de(P,I){this.g=P,this.h=I}function Fe(P,I){if(x(I))throw Error("division by zero");if(x(P))return new de(m,m);if(F(P))return I=Fe(L(P),I),new de(L(I.g),L(I.h));if(F(I))return I=Fe(P,L(I)),new de(L(I.g),I.h);if(30<P.g.length){if(F(P)||F(I))throw Error("slowDivide_ only works with positive integers.");for(var D=_,M=I;0>=M.l(P);)D=Rt(D),M=Rt(M);var A=$e(D,1),R=$e(M,1);for(M=$e(M,2),D=$e(D,2);!x(M);){var T=R.add(M);0>=T.l(P)&&(A=A.add(D),R=T),M=$e(M,1),D=$e(D,1)}return I=W(P,A.j(I)),new de(A,I)}for(A=m;0<=P.l(I);){for(D=Math.max(1,Math.floor(P.m()/I.m())),M=Math.ceil(Math.log(D)/Math.LN2),M=48>=M?1:Math.pow(2,M-48),R=u(D),T=R.j(I);F(T)||0<T.l(P);)D-=M,R=u(D),T=R.j(I);x(R)&&(R=_),A=A.add(R),P=W(P,T)}return new de(A,P)}n.A=function(P){return Fe(this,P).h},n.and=function(P){for(var I=Math.max(this.g.length,P.g.length),D=[],M=0;M<I;M++)D[M]=this.i(M)&P.i(M);return new s(D,this.h&P.h)},n.or=function(P){for(var I=Math.max(this.g.length,P.g.length),D=[],M=0;M<I;M++)D[M]=this.i(M)|P.i(M);return new s(D,this.h|P.h)},n.xor=function(P){for(var I=Math.max(this.g.length,P.g.length),D=[],M=0;M<I;M++)D[M]=this.i(M)^P.i(M);return new s(D,this.h^P.h)};function Rt(P){for(var I=P.g.length+1,D=[],M=0;M<I;M++)D[M]=P.i(M)<<1|P.i(M-1)>>>31;return new s(D,P.h)}function $e(P,I){var D=I>>5;I%=32;for(var M=P.g.length-D,A=[],R=0;R<M;R++)A[R]=0<I?P.i(R+D)>>>I|P.i(R+D+1)<<32-I:P.i(R+D);return new s(A,P.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,Kw=rk.Md5=r,s.prototype.add=s.prototype.add,s.prototype.multiply=s.prototype.j,s.prototype.modulo=s.prototype.A,s.prototype.compare=s.prototype.l,s.prototype.toNumber=s.prototype.m,s.prototype.toString=s.prototype.toString,s.prototype.getBits=s.prototype.i,s.fromNumber=u,s.fromString=f,ji=rk.Integer=s}).apply(typeof nk<"u"?nk:typeof self<"u"?self:typeof window<"u"?window:{});var bg=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Bi={};var Yw,I$,Sc,Qw,td,wg,Zw,Xw,Jw;(function(){var n,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(c,d,g){return c==Array.prototype||c==Object.prototype||(c[d]=g.value),c};function t(c){c=[typeof globalThis=="object"&&globalThis,c,typeof window=="object"&&window,typeof self=="object"&&self,typeof bg=="object"&&bg];for(var d=0;d<c.length;++d){var g=c[d];if(g&&g.Math==Math)return g}throw Error("Cannot find global object")}var r=t(this);function i(c,d){if(d)e:{var g=r;c=c.split(".");for(var w=0;w<c.length-1;w++){var O=c[w];if(!(O in g))break e;g=g[O]}c=c[c.length-1],w=g[c],d=d(w),d!=w&&d!=null&&e(g,c,{configurable:!0,writable:!0,value:d})}}function o(c,d){c instanceof String&&(c+="");var g=0,w=!1,O={next:function(){if(!w&&g<c.length){var N=g++;return{value:d(N,c[N]),done:!1}}return w=!0,{done:!0,value:void 0}}};return O[Symbol.iterator]=function(){return O},O}i("Array.prototype.values",function(c){return c||function(){return o(this,function(d,g){return g})}});var s=s||{},a=this||self;function l(c){var d=typeof c;return d=d!="object"?d:c?Array.isArray(c)?"array":d:"null",d=="array"||d=="object"&&typeof c.length=="number"}function u(c){var d=typeof c;return d=="object"&&c!=null||d=="function"}function f(c,d,g){return c.call.apply(c.bind,arguments)}function m(c,d,g){if(!c)throw Error();if(2<arguments.length){var w=Array.prototype.slice.call(arguments,2);return function(){var O=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(O,w),c.apply(d,O)}}return function(){return c.apply(d,arguments)}}function _(c,d,g){return _=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?f:m,_.apply(null,arguments)}function E(c,d){var g=Array.prototype.slice.call(arguments,1);return function(){var w=g.slice();return w.push.apply(w,arguments),c.apply(this,w)}}function x(c,d){function g(){}g.prototype=d.prototype,c.aa=d.prototype,c.prototype=new g,c.prototype.constructor=c,c.Qb=function(w,O,N){for(var Y=Array(arguments.length-2),qe=2;qe<arguments.length;qe++)Y[qe-2]=arguments[qe];return d.prototype[O].apply(w,Y)}}function F(c){let d=c.length;if(0<d){let g=Array(d);for(let w=0;w<d;w++)g[w]=c[w];return g}return[]}function L(c,d){for(let g=1;g<arguments.length;g++){let w=arguments[g];if(l(w)){let O=c.length||0,N=w.length||0;c.length=O+N;for(let Y=0;Y<N;Y++)c[O+Y]=w[Y]}else c.push(w)}}class W{constructor(d,g){this.i=d,this.j=g,this.h=0,this.g=null}get(){let d;return 0<this.h?(this.h--,d=this.g,this.g=d.next,d.next=null):d=this.i(),d}}function oe(c){return/^[\s\xa0]*$/.test(c)}function de(){var c=a.navigator;return c&&(c=c.userAgent)?c:""}function Fe(c){return Fe[" "](c),c}Fe[" "]=function(){};var Rt=de().indexOf("Gecko")!=-1&&!(de().toLowerCase().indexOf("webkit")!=-1&&de().indexOf("Edge")==-1)&&!(de().indexOf("Trident")!=-1||de().indexOf("MSIE")!=-1)&&de().indexOf("Edge")==-1;function $e(c,d,g){for(let w in c)d.call(g,c[w],w,c)}function P(c,d){for(let g in c)d.call(void 0,c[g],g,c)}function I(c){let d={};for(let g in c)d[g]=c[g];return d}let D="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function M(c,d){let g,w;for(let O=1;O<arguments.length;O++){w=arguments[O];for(g in w)c[g]=w[g];for(let N=0;N<D.length;N++)g=D[N],Object.prototype.hasOwnProperty.call(w,g)&&(c[g]=w[g])}}function A(c){var d=1;c=c.split(":");let g=[];for(;0<d&&c.length;)g.push(c.shift()),d--;return c.length&&g.push(c.join(":")),g}function R(c){a.setTimeout(()=>{throw c},0)}function T(){var c=Gm;let d=null;return c.g&&(d=c.g,c.g=c.g.next,c.g||(c.h=null),d.next=null),d}class pi{constructor(){this.h=this.g=null}add(d,g){let w=rl.get();w.set(d,g),this.h?this.h.next=w:this.g=w,this.h=w}}var rl=new W(()=>new fN,c=>c.reset());class fN{constructor(){this.next=this.g=this.h=null}set(d,g){this.h=d,this.g=g,this.next=null}reset(){this.next=this.g=this.h=null}}let il,ol=!1,Gm=new pi,JI=()=>{let c=a.Promise.resolve(void 0);il=()=>{c.then(hN)}};var hN=()=>{for(var c;c=T();){try{c.h.call(c.g)}catch(g){R(g)}var d=rl;d.j(c),100>d.h&&(d.h++,c.next=d.g,d.g=c)}ol=!1};function Qi(){this.s=this.s,this.C=this.C}Qi.prototype.s=!1,Qi.prototype.ma=function(){this.s||(this.s=!0,this.N())},Qi.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function Kt(c,d){this.type=c,this.g=this.target=d,this.defaultPrevented=!1}Kt.prototype.h=function(){this.defaultPrevented=!0};var pN=(function(){if(!a.addEventListener||!Object.defineProperty)return!1;var c=!1,d=Object.defineProperty({},"passive",{get:function(){c=!0}});try{let g=()=>{};a.addEventListener("test",g,d),a.removeEventListener("test",g,d)}catch{}return c})();function sl(c,d){if(Kt.call(this,c?c.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,c){var g=this.type=c.type,w=c.changedTouches&&c.changedTouches.length?c.changedTouches[0]:null;if(this.target=c.target||c.srcElement,this.g=d,d=c.relatedTarget){if(Rt){e:{try{Fe(d.nodeName);var O=!0;break e}catch{}O=!1}O||(d=null)}}else g=="mouseover"?d=c.fromElement:g=="mouseout"&&(d=c.toElement);this.relatedTarget=d,w?(this.clientX=w.clientX!==void 0?w.clientX:w.pageX,this.clientY=w.clientY!==void 0?w.clientY:w.pageY,this.screenX=w.screenX||0,this.screenY=w.screenY||0):(this.clientX=c.clientX!==void 0?c.clientX:c.pageX,this.clientY=c.clientY!==void 0?c.clientY:c.pageY,this.screenX=c.screenX||0,this.screenY=c.screenY||0),this.button=c.button,this.key=c.key||"",this.ctrlKey=c.ctrlKey,this.altKey=c.altKey,this.shiftKey=c.shiftKey,this.metaKey=c.metaKey,this.pointerId=c.pointerId||0,this.pointerType=typeof c.pointerType=="string"?c.pointerType:gN[c.pointerType]||"",this.state=c.state,this.i=c,c.defaultPrevented&&sl.aa.h.call(this)}}x(sl,Kt);var gN={2:"touch",3:"pen",4:"mouse"};sl.prototype.h=function(){sl.aa.h.call(this);var c=this.i;c.preventDefault?c.preventDefault():c.returnValue=!1};var al="closure_listenable_"+(1e6*Math.random()|0),mN=0;function vN(c,d,g,w,O){this.listener=c,this.proxy=null,this.src=d,this.type=g,this.capture=!!w,this.ha=O,this.key=++mN,this.da=this.fa=!1}function Ud(c){c.da=!0,c.listener=null,c.proxy=null,c.src=null,c.ha=null}function jd(c){this.src=c,this.g={},this.h=0}jd.prototype.add=function(c,d,g,w,O){var N=c.toString();c=this.g[N],c||(c=this.g[N]=[],this.h++);var Y=Ym(c,d,w,O);return-1<Y?(d=c[Y],g||(d.fa=!1)):(d=new vN(d,this.src,N,!!w,O),d.fa=g,c.push(d)),d};function Km(c,d){var g=d.type;if(g in c.g){var w=c.g[g],O=Array.prototype.indexOf.call(w,d,void 0),N;(N=0<=O)&&Array.prototype.splice.call(w,O,1),N&&(Ud(d),c.g[g].length==0&&(delete c.g[g],c.h--))}}function Ym(c,d,g,w){for(var O=0;O<c.length;++O){var N=c[O];if(!N.da&&N.listener==d&&N.capture==!!g&&N.ha==w)return O}return-1}var Qm="closure_lm_"+(1e6*Math.random()|0),Zm={};function e1(c,d,g,w,O){if(w&&w.once)return n1(c,d,g,w,O);if(Array.isArray(d)){for(var N=0;N<d.length;N++)e1(c,d[N],g,w,O);return null}return g=tv(g),c&&c[al]?c.K(d,g,u(w)?!!w.capture:!!w,O):t1(c,d,g,!1,w,O)}function t1(c,d,g,w,O,N){if(!d)throw Error("Invalid event type");var Y=u(O)?!!O.capture:!!O,qe=Jm(c);if(qe||(c[Qm]=qe=new jd(c)),g=qe.add(d,g,w,Y,N),g.proxy)return g;if(w=_N(),g.proxy=w,w.src=c,w.listener=g,c.addEventListener)pN||(O=Y),O===void 0&&(O=!1),c.addEventListener(d.toString(),w,O);else if(c.attachEvent)c.attachEvent(i1(d.toString()),w);else if(c.addListener&&c.removeListener)c.addListener(w);else throw Error("addEventListener and attachEvent are unavailable.");return g}function _N(){function c(g){return d.call(c.src,c.listener,g)}let d=yN;return c}function n1(c,d,g,w,O){if(Array.isArray(d)){for(var N=0;N<d.length;N++)n1(c,d[N],g,w,O);return null}return g=tv(g),c&&c[al]?c.L(d,g,u(w)?!!w.capture:!!w,O):t1(c,d,g,!0,w,O)}function r1(c,d,g,w,O){if(Array.isArray(d))for(var N=0;N<d.length;N++)r1(c,d[N],g,w,O);else w=u(w)?!!w.capture:!!w,g=tv(g),c&&c[al]?(c=c.i,d=String(d).toString(),d in c.g&&(N=c.g[d],g=Ym(N,g,w,O),-1<g&&(Ud(N[g]),Array.prototype.splice.call(N,g,1),N.length==0&&(delete c.g[d],c.h--)))):c&&(c=Jm(c))&&(d=c.g[d.toString()],c=-1,d&&(c=Ym(d,g,w,O)),(g=-1<c?d[c]:null)&&Xm(g))}function Xm(c){if(typeof c!="number"&&c&&!c.da){var d=c.src;if(d&&d[al])Km(d.i,c);else{var g=c.type,w=c.proxy;d.removeEventListener?d.removeEventListener(g,w,c.capture):d.detachEvent?d.detachEvent(i1(g),w):d.addListener&&d.removeListener&&d.removeListener(w),(g=Jm(d))?(Km(g,c),g.h==0&&(g.src=null,d[Qm]=null)):Ud(c)}}}function i1(c){return c in Zm?Zm[c]:Zm[c]="on"+c}function yN(c,d){if(c.da)c=!0;else{d=new sl(d,this);var g=c.listener,w=c.ha||c.src;c.fa&&Xm(c),c=g.call(w,d)}return c}function Jm(c){return c=c[Qm],c instanceof jd?c:null}var ev="__closure_events_fn_"+(1e9*Math.random()>>>0);function tv(c){return typeof c=="function"?c:(c[ev]||(c[ev]=function(d){return c.handleEvent(d)}),c[ev])}function Yt(){Qi.call(this),this.i=new jd(this),this.M=this,this.F=null}x(Yt,Qi),Yt.prototype[al]=!0,Yt.prototype.removeEventListener=function(c,d,g,w){r1(this,c,d,g,w)};function cn(c,d){var g,w=c.F;if(w)for(g=[];w;w=w.F)g.push(w);if(c=c.M,w=d.type||d,typeof d=="string")d=new Kt(d,c);else if(d instanceof Kt)d.target=d.target||c;else{var O=d;d=new Kt(w,c),M(d,O)}if(O=!0,g)for(var N=g.length-1;0<=N;N--){var Y=d.g=g[N];O=Bd(Y,w,!0,d)&&O}if(Y=d.g=c,O=Bd(Y,w,!0,d)&&O,O=Bd(Y,w,!1,d)&&O,g)for(N=0;N<g.length;N++)Y=d.g=g[N],O=Bd(Y,w,!1,d)&&O}Yt.prototype.N=function(){if(Yt.aa.N.call(this),this.i){var c=this.i,d;for(d in c.g){for(var g=c.g[d],w=0;w<g.length;w++)Ud(g[w]);delete c.g[d],c.h--}}this.F=null},Yt.prototype.K=function(c,d,g,w){return this.i.add(String(c),d,!1,g,w)},Yt.prototype.L=function(c,d,g,w){return this.i.add(String(c),d,!0,g,w)};function Bd(c,d,g,w){if(d=c.i.g[String(d)],!d)return!0;d=d.concat();for(var O=!0,N=0;N<d.length;++N){var Y=d[N];if(Y&&!Y.da&&Y.capture==g){var qe=Y.listener,Ht=Y.ha||Y.src;Y.fa&&Km(c.i,Y),O=qe.call(Ht,w)!==!1&&O}}return O&&!w.defaultPrevented}function o1(c,d,g){if(typeof c=="function")g&&(c=_(c,g));else if(c&&typeof c.handleEvent=="function")c=_(c.handleEvent,c);else throw Error("Invalid listener argument");return 2147483647<Number(d)?-1:a.setTimeout(c,d||0)}function s1(c){c.g=o1(()=>{c.g=null,c.i&&(c.i=!1,s1(c))},c.l);let d=c.h;c.h=null,c.m.apply(null,d)}class bN extends Qi{constructor(d,g){super(),this.m=d,this.l=g,this.h=null,this.i=!1,this.g=null}j(d){this.h=arguments,this.g?this.i=!0:s1(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function cl(c){Qi.call(this),this.h=c,this.g={}}x(cl,Qi);var a1=[];function c1(c){$e(c.g,function(d,g){this.g.hasOwnProperty(g)&&Xm(d)},c),c.g={}}cl.prototype.N=function(){cl.aa.N.call(this),c1(this)},cl.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var nv=a.JSON.stringify,wN=a.JSON.parse,EN=class{stringify(c){return a.JSON.stringify(c,void 0)}parse(c){return a.JSON.parse(c,void 0)}};function rv(){}rv.prototype.h=null;function l1(c){return c.h||(c.h=c.i())}function u1(){}var ll={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function iv(){Kt.call(this,"d")}x(iv,Kt);function ov(){Kt.call(this,"c")}x(ov,Kt);var Ko={},d1=null;function $d(){return d1=d1||new Yt}Ko.La="serverreachability";function f1(c){Kt.call(this,Ko.La,c)}x(f1,Kt);function ul(c){let d=$d();cn(d,new f1(d))}Ko.STAT_EVENT="statevent";function h1(c,d){Kt.call(this,Ko.STAT_EVENT,c),this.stat=d}x(h1,Kt);function ln(c){let d=$d();cn(d,new h1(d,c))}Ko.Ma="timingevent";function p1(c,d){Kt.call(this,Ko.Ma,c),this.size=d}x(p1,Kt);function dl(c,d){if(typeof c!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){c()},d)}function fl(){this.g=!0}fl.prototype.xa=function(){this.g=!1};function CN(c,d,g,w,O,N){c.info(function(){if(c.g)if(N)for(var Y="",qe=N.split("&"),Ht=0;Ht<qe.length;Ht++){var Oe=qe[Ht].split("=");if(1<Oe.length){var Qt=Oe[0];Oe=Oe[1];var Zt=Qt.split("_");Y=2<=Zt.length&&Zt[1]=="type"?Y+(Qt+"="+Oe+"&"):Y+(Qt+"=redacted&")}}else Y=null;else Y=N;return"XMLHTTP REQ ("+w+") [attempt "+O+"]: "+d+`
`+g+`
`+Y})}function IN(c,d,g,w,O,N,Y){c.info(function(){return"XMLHTTP RESP ("+w+") [ attempt "+O+"]: "+d+`
`+g+`
`+N+" "+Y})}function pa(c,d,g,w){c.info(function(){return"XMLHTTP TEXT ("+d+"): "+TN(c,g)+(w?" "+w:"")})}function SN(c,d){c.info(function(){return"TIMEOUT: "+d})}fl.prototype.info=function(){};function TN(c,d){if(!c.g)return d;if(!d)return null;try{var g=JSON.parse(d);if(g){for(c=0;c<g.length;c++)if(Array.isArray(g[c])){var w=g[c];if(!(2>w.length)){var O=w[1];if(Array.isArray(O)&&!(1>O.length)){var N=O[0];if(N!="noop"&&N!="stop"&&N!="close")for(var Y=1;Y<O.length;Y++)O[Y]=""}}}}return nv(g)}catch{return d}}var Hd={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},g1={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},sv;function zd(){}x(zd,rv),zd.prototype.g=function(){return new XMLHttpRequest},zd.prototype.i=function(){return{}},sv=new zd;function Zi(c,d,g,w){this.j=c,this.i=d,this.l=g,this.R=w||1,this.U=new cl(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new m1}function m1(){this.i=null,this.g="",this.h=!1}var v1={},av={};function cv(c,d,g){c.L=1,c.v=Kd(gi(d)),c.m=g,c.P=!0,_1(c,null)}function _1(c,d){c.F=Date.now(),qd(c),c.A=gi(c.v);var g=c.A,w=c.R;Array.isArray(w)||(w=[String(w)]),k1(g.i,"t",w),c.C=0,g=c.j.J,c.h=new m1,c.g=Q1(c.j,g?d:null,!c.m),0<c.O&&(c.M=new bN(_(c.Y,c,c.g),c.O)),d=c.U,g=c.g,w=c.ca;var O="readystatechange";Array.isArray(O)||(O&&(a1[0]=O.toString()),O=a1);for(var N=0;N<O.length;N++){var Y=e1(g,O[N],w||d.handleEvent,!1,d.h||d);if(!Y)break;d.g[Y.key]=Y}d=c.H?I(c.H):{},c.m?(c.u||(c.u="POST"),d["Content-Type"]="application/x-www-form-urlencoded",c.g.ea(c.A,c.u,c.m,d)):(c.u="GET",c.g.ea(c.A,c.u,null,d)),ul(),CN(c.i,c.u,c.A,c.l,c.R,c.m)}Zi.prototype.ca=function(c){c=c.target;let d=this.M;d&&mi(c)==3?d.j():this.Y(c)},Zi.prototype.Y=function(c){try{if(c==this.g)e:{let Zt=mi(this.g);var d=this.g.Ba();let va=this.g.Z();if(!(3>Zt)&&(Zt!=3||this.g&&(this.h.h||this.g.oa()||U1(this.g)))){this.J||Zt!=4||d==7||(d==8||0>=va?ul(3):ul(2)),lv(this);var g=this.g.Z();this.X=g;t:if(y1(this)){var w=U1(this.g);c="";var O=w.length,N=mi(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Yo(this),hl(this);var Y="";break t}this.h.i=new a.TextDecoder}for(d=0;d<O;d++)this.h.h=!0,c+=this.h.i.decode(w[d],{stream:!(N&&d==O-1)});w.length=0,this.h.g+=c,this.C=0,Y=this.h.g}else Y=this.g.oa();if(this.o=g==200,IN(this.i,this.u,this.A,this.l,this.R,Zt,g),this.o){if(this.T&&!this.K){t:{if(this.g){var qe,Ht=this.g;if((qe=Ht.g?Ht.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!oe(qe)){var Oe=qe;break t}}Oe=null}if(g=Oe)pa(this.i,this.l,g,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,uv(this,g);else{this.o=!1,this.s=3,ln(12),Yo(this),hl(this);break e}}if(this.P){g=!0;let dr;for(;!this.J&&this.C<Y.length;)if(dr=DN(this,Y),dr==av){Zt==4&&(this.s=4,ln(14),g=!1),pa(this.i,this.l,null,"[Incomplete Response]");break}else if(dr==v1){this.s=4,ln(15),pa(this.i,this.l,Y,"[Invalid Chunk]"),g=!1;break}else pa(this.i,this.l,dr,null),uv(this,dr);if(y1(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Zt!=4||Y.length!=0||this.h.h||(this.s=1,ln(16),g=!1),this.o=this.o&&g,!g)pa(this.i,this.l,Y,"[Invalid Chunked Response]"),Yo(this),hl(this);else if(0<Y.length&&!this.W){this.W=!0;var Qt=this.j;Qt.g==this&&Qt.ba&&!Qt.M&&(Qt.j.info("Great, no buffering proxy detected. Bytes received: "+Y.length),mv(Qt),Qt.M=!0,ln(11))}}else pa(this.i,this.l,Y,null),uv(this,Y);Zt==4&&Yo(this),this.o&&!this.J&&(Zt==4?W1(this.j,this):(this.o=!1,qd(this)))}else zN(this.g),g==400&&0<Y.indexOf("Unknown SID")?(this.s=3,ln(12)):(this.s=0,ln(13)),Yo(this),hl(this)}}}catch{}finally{}};function y1(c){return c.g?c.u=="GET"&&c.L!=2&&c.j.Ca:!1}function DN(c,d){var g=c.C,w=d.indexOf(`
`,g);return w==-1?av:(g=Number(d.substring(g,w)),isNaN(g)?v1:(w+=1,w+g>d.length?av:(d=d.slice(w,w+g),c.C=w+g,d)))}Zi.prototype.cancel=function(){this.J=!0,Yo(this)};function qd(c){c.S=Date.now()+c.I,b1(c,c.I)}function b1(c,d){if(c.B!=null)throw Error("WatchDog timer not null");c.B=dl(_(c.ba,c),d)}function lv(c){c.B&&(a.clearTimeout(c.B),c.B=null)}Zi.prototype.ba=function(){this.B=null;let c=Date.now();0<=c-this.S?(SN(this.i,this.A),this.L!=2&&(ul(),ln(17)),Yo(this),this.s=2,hl(this)):b1(this,this.S-c)};function hl(c){c.j.G==0||c.J||W1(c.j,c)}function Yo(c){lv(c);var d=c.M;d&&typeof d.ma=="function"&&d.ma(),c.M=null,c1(c.U),c.g&&(d=c.g,c.g=null,d.abort(),d.ma())}function uv(c,d){try{var g=c.j;if(g.G!=0&&(g.g==c||dv(g.h,c))){if(!c.K&&dv(g.h,c)&&g.G==3){try{var w=g.Da.g.parse(d)}catch{w=null}if(Array.isArray(w)&&w.length==3){var O=w;if(O[0]==0){e:if(!g.u){if(g.g)if(g.g.F+3e3<c.F)Jd(g),Zd(g);else break e;gv(g),ln(18)}}else g.za=O[1],0<g.za-g.T&&37500>O[2]&&g.F&&g.v==0&&!g.C&&(g.C=dl(_(g.Za,g),6e3));if(1>=C1(g.h)&&g.ca){try{g.ca()}catch{}g.ca=void 0}}else Zo(g,11)}else if((c.K||g.g==c)&&Jd(g),!oe(d))for(O=g.Da.g.parse(d),d=0;d<O.length;d++){let Oe=O[d];if(g.T=Oe[0],Oe=Oe[1],g.G==2)if(Oe[0]=="c"){g.K=Oe[1],g.ia=Oe[2];let Qt=Oe[3];Qt!=null&&(g.la=Qt,g.j.info("VER="+g.la));let Zt=Oe[4];Zt!=null&&(g.Aa=Zt,g.j.info("SVER="+g.Aa));let va=Oe[5];va!=null&&typeof va=="number"&&0<va&&(w=1.5*va,g.L=w,g.j.info("backChannelRequestTimeoutMs_="+w)),w=g;let dr=c.g;if(dr){let tf=dr.g?dr.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(tf){var N=w.h;N.g||tf.indexOf("spdy")==-1&&tf.indexOf("quic")==-1&&tf.indexOf("h2")==-1||(N.j=N.l,N.g=new Set,N.h&&(fv(N,N.h),N.h=null))}if(w.D){let vv=dr.g?dr.g.getResponseHeader("X-HTTP-Session-Id"):null;vv&&(w.ya=vv,Qe(w.I,w.D,vv))}}g.G=3,g.l&&g.l.ua(),g.ba&&(g.R=Date.now()-c.F,g.j.info("Handshake RTT: "+g.R+"ms")),w=g;var Y=c;if(w.qa=Y1(w,w.J?w.ia:null,w.W),Y.K){I1(w.h,Y);var qe=Y,Ht=w.L;Ht&&(qe.I=Ht),qe.B&&(lv(qe),qd(qe)),w.g=Y}else z1(w);0<g.i.length&&Xd(g)}else Oe[0]!="stop"&&Oe[0]!="close"||Zo(g,7);else g.G==3&&(Oe[0]=="stop"||Oe[0]=="close"?Oe[0]=="stop"?Zo(g,7):pv(g):Oe[0]!="noop"&&g.l&&g.l.ta(Oe),g.v=0)}}ul(4)}catch{}}var xN=class{constructor(c,d){this.g=c,this.map=d}};function w1(c){this.l=c||10,a.PerformanceNavigationTiming?(c=a.performance.getEntriesByType("navigation"),c=0<c.length&&(c[0].nextHopProtocol=="hq"||c[0].nextHopProtocol=="h2")):c=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=c?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function E1(c){return c.h?!0:c.g?c.g.size>=c.j:!1}function C1(c){return c.h?1:c.g?c.g.size:0}function dv(c,d){return c.h?c.h==d:c.g?c.g.has(d):!1}function fv(c,d){c.g?c.g.add(d):c.h=d}function I1(c,d){c.h&&c.h==d?c.h=null:c.g&&c.g.has(d)&&c.g.delete(d)}w1.prototype.cancel=function(){if(this.i=S1(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(let c of this.g.values())c.cancel();this.g.clear()}};function S1(c){if(c.h!=null)return c.i.concat(c.h.D);if(c.g!=null&&c.g.size!==0){let d=c.i;for(let g of c.g.values())d=d.concat(g.D);return d}return F(c.i)}function MN(c){if(c.V&&typeof c.V=="function")return c.V();if(typeof Map<"u"&&c instanceof Map||typeof Set<"u"&&c instanceof Set)return Array.from(c.values());if(typeof c=="string")return c.split("");if(l(c)){for(var d=[],g=c.length,w=0;w<g;w++)d.push(c[w]);return d}d=[],g=0;for(w in c)d[g++]=c[w];return d}function PN(c){if(c.na&&typeof c.na=="function")return c.na();if(!c.V||typeof c.V!="function"){if(typeof Map<"u"&&c instanceof Map)return Array.from(c.keys());if(!(typeof Set<"u"&&c instanceof Set)){if(l(c)||typeof c=="string"){var d=[];c=c.length;for(var g=0;g<c;g++)d.push(g);return d}d=[],g=0;for(let w in c)d[g++]=w;return d}}}function T1(c,d){if(c.forEach&&typeof c.forEach=="function")c.forEach(d,void 0);else if(l(c)||typeof c=="string")Array.prototype.forEach.call(c,d,void 0);else for(var g=PN(c),w=MN(c),O=w.length,N=0;N<O;N++)d.call(void 0,w[N],g&&g[N],c)}var D1=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function AN(c,d){if(c){c=c.split("&");for(var g=0;g<c.length;g++){var w=c[g].indexOf("="),O=null;if(0<=w){var N=c[g].substring(0,w);O=c[g].substring(w+1)}else N=c[g];d(N,O?decodeURIComponent(O.replace(/\+/g," ")):"")}}}function Qo(c){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,c instanceof Qo){this.h=c.h,Wd(this,c.j),this.o=c.o,this.g=c.g,Gd(this,c.s),this.l=c.l;var d=c.i,g=new ml;g.i=d.i,d.g&&(g.g=new Map(d.g),g.h=d.h),x1(this,g),this.m=c.m}else c&&(d=String(c).match(D1))?(this.h=!1,Wd(this,d[1]||"",!0),this.o=pl(d[2]||""),this.g=pl(d[3]||"",!0),Gd(this,d[4]),this.l=pl(d[5]||"",!0),x1(this,d[6]||"",!0),this.m=pl(d[7]||"")):(this.h=!1,this.i=new ml(null,this.h))}Qo.prototype.toString=function(){var c=[],d=this.j;d&&c.push(gl(d,M1,!0),":");var g=this.g;return(g||d=="file")&&(c.push("//"),(d=this.o)&&c.push(gl(d,M1,!0),"@"),c.push(encodeURIComponent(String(g)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),g=this.s,g!=null&&c.push(":",String(g))),(g=this.l)&&(this.g&&g.charAt(0)!="/"&&c.push("/"),c.push(gl(g,g.charAt(0)=="/"?RN:ON,!0))),(g=this.i.toString())&&c.push("?",g),(g=this.m)&&c.push("#",gl(g,FN)),c.join("")};function gi(c){return new Qo(c)}function Wd(c,d,g){c.j=g?pl(d,!0):d,c.j&&(c.j=c.j.replace(/:$/,""))}function Gd(c,d){if(d){if(d=Number(d),isNaN(d)||0>d)throw Error("Bad port number "+d);c.s=d}else c.s=null}function x1(c,d,g){d instanceof ml?(c.i=d,LN(c.i,c.h)):(g||(d=gl(d,NN)),c.i=new ml(d,c.h))}function Qe(c,d,g){c.i.set(d,g)}function Kd(c){return Qe(c,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),c}function pl(c,d){return c?d?decodeURI(c.replace(/%25/g,"%2525")):decodeURIComponent(c):""}function gl(c,d,g){return typeof c=="string"?(c=encodeURI(c).replace(d,kN),g&&(c=c.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),c):null}function kN(c){return c=c.charCodeAt(0),"%"+(c>>4&15).toString(16)+(c&15).toString(16)}var M1=/[#\/\?@]/g,ON=/[#\?:]/g,RN=/[#\?]/g,NN=/[#\?@]/g,FN=/#/g;function ml(c,d){this.h=this.g=null,this.i=c||null,this.j=!!d}function Xi(c){c.g||(c.g=new Map,c.h=0,c.i&&AN(c.i,function(d,g){c.add(decodeURIComponent(d.replace(/\+/g," ")),g)}))}n=ml.prototype,n.add=function(c,d){Xi(this),this.i=null,c=ga(this,c);var g=this.g.get(c);return g||this.g.set(c,g=[]),g.push(d),this.h+=1,this};function P1(c,d){Xi(c),d=ga(c,d),c.g.has(d)&&(c.i=null,c.h-=c.g.get(d).length,c.g.delete(d))}function A1(c,d){return Xi(c),d=ga(c,d),c.g.has(d)}n.forEach=function(c,d){Xi(this),this.g.forEach(function(g,w){g.forEach(function(O){c.call(d,O,w,this)},this)},this)},n.na=function(){Xi(this);let c=Array.from(this.g.values()),d=Array.from(this.g.keys()),g=[];for(let w=0;w<d.length;w++){let O=c[w];for(let N=0;N<O.length;N++)g.push(d[w])}return g},n.V=function(c){Xi(this);let d=[];if(typeof c=="string")A1(this,c)&&(d=d.concat(this.g.get(ga(this,c))));else{c=Array.from(this.g.values());for(let g=0;g<c.length;g++)d=d.concat(c[g])}return d},n.set=function(c,d){return Xi(this),this.i=null,c=ga(this,c),A1(this,c)&&(this.h-=this.g.get(c).length),this.g.set(c,[d]),this.h+=1,this},n.get=function(c,d){return c?(c=this.V(c),0<c.length?String(c[0]):d):d};function k1(c,d,g){P1(c,d),0<g.length&&(c.i=null,c.g.set(ga(c,d),F(g)),c.h+=g.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";let c=[],d=Array.from(this.g.keys());for(var g=0;g<d.length;g++){var w=d[g];let N=encodeURIComponent(String(w)),Y=this.V(w);for(w=0;w<Y.length;w++){var O=N;Y[w]!==""&&(O+="="+encodeURIComponent(String(Y[w]))),c.push(O)}}return this.i=c.join("&")};function ga(c,d){return d=String(d),c.j&&(d=d.toLowerCase()),d}function LN(c,d){d&&!c.j&&(Xi(c),c.i=null,c.g.forEach(function(g,w){var O=w.toLowerCase();w!=O&&(P1(this,w),k1(this,O,g))},c)),c.j=d}function VN(c,d){let g=new fl;if(a.Image){let w=new Image;w.onload=E(Ji,g,"TestLoadImage: loaded",!0,d,w),w.onerror=E(Ji,g,"TestLoadImage: error",!1,d,w),w.onabort=E(Ji,g,"TestLoadImage: abort",!1,d,w),w.ontimeout=E(Ji,g,"TestLoadImage: timeout",!1,d,w),a.setTimeout(function(){w.ontimeout&&w.ontimeout()},1e4),w.src=c}else d(!1)}function UN(c,d){let g=new fl,w=new AbortController,O=setTimeout(()=>{w.abort(),Ji(g,"TestPingServer: timeout",!1,d)},1e4);fetch(c,{signal:w.signal}).then(N=>{clearTimeout(O),N.ok?Ji(g,"TestPingServer: ok",!0,d):Ji(g,"TestPingServer: server error",!1,d)}).catch(()=>{clearTimeout(O),Ji(g,"TestPingServer: error",!1,d)})}function Ji(c,d,g,w,O){try{O&&(O.onload=null,O.onerror=null,O.onabort=null,O.ontimeout=null),w(g)}catch{}}function jN(){this.g=new EN}function BN(c,d,g){let w=g||"";try{T1(c,function(O,N){let Y=O;u(O)&&(Y=nv(O)),d.push(w+N+"="+encodeURIComponent(Y))})}catch(O){throw d.push(w+"type="+encodeURIComponent("_badmap")),O}}function vl(c){this.l=c.Ub||null,this.j=c.eb||!1}x(vl,rv),vl.prototype.g=function(){return new Yd(this.l,this.j)},vl.prototype.i=(function(c){return function(){return c}})({});function Yd(c,d){Yt.call(this),this.D=c,this.o=d,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}x(Yd,Yt),n=Yd.prototype,n.open=function(c,d){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=c,this.A=d,this.readyState=1,yl(this)},n.send=function(c){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;let d={headers:this.u,method:this.B,credentials:this.m,cache:void 0};c&&(d.body=c),(this.D||a).fetch(new Request(this.A,d)).then(this.Sa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,_l(this)),this.readyState=0},n.Sa=function(c){if(this.g&&(this.l=c,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=c.headers,this.readyState=2,yl(this)),this.g&&(this.readyState=3,yl(this),this.g)))if(this.responseType==="arraybuffer")c.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in c){if(this.j=c.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;O1(this)}else c.text().then(this.Ra.bind(this),this.ga.bind(this))};function O1(c){c.j.read().then(c.Pa.bind(c)).catch(c.ga.bind(c))}n.Pa=function(c){if(this.g){if(this.o&&c.value)this.response.push(c.value);else if(!this.o){var d=c.value?c.value:new Uint8Array(0);(d=this.v.decode(d,{stream:!c.done}))&&(this.response=this.responseText+=d)}c.done?_l(this):yl(this),this.readyState==3&&O1(this)}},n.Ra=function(c){this.g&&(this.response=this.responseText=c,_l(this))},n.Qa=function(c){this.g&&(this.response=c,_l(this))},n.ga=function(){this.g&&_l(this)};function _l(c){c.readyState=4,c.l=null,c.j=null,c.v=null,yl(c)}n.setRequestHeader=function(c,d){this.u.append(c,d)},n.getResponseHeader=function(c){return this.h&&this.h.get(c.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";let c=[],d=this.h.entries();for(var g=d.next();!g.done;)g=g.value,c.push(g[0]+": "+g[1]),g=d.next();return c.join(`\r
`)};function yl(c){c.onreadystatechange&&c.onreadystatechange.call(c)}Object.defineProperty(Yd.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(c){this.m=c?"include":"same-origin"}});function R1(c){let d="";return $e(c,function(g,w){d+=w,d+=":",d+=g,d+=`\r
`}),d}function hv(c,d,g){e:{for(w in g){var w=!1;break e}w=!0}w||(g=R1(g),typeof c=="string"?g!=null&&encodeURIComponent(String(g)):Qe(c,d,g))}function ct(c){Yt.call(this),this.headers=new Map,this.o=c||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}x(ct,Yt);var $N=/^https?$/i,HN=["POST","PUT"];n=ct.prototype,n.Ha=function(c){this.J=c},n.ea=function(c,d,g,w){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+c);d=d?d.toUpperCase():"GET",this.D=c,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():sv.g(),this.v=this.o?l1(this.o):l1(sv),this.g.onreadystatechange=_(this.Ea,this);try{this.B=!0,this.g.open(d,String(c),!0),this.B=!1}catch(N){N1(this,N);return}if(c=g||"",g=new Map(this.headers),w)if(Object.getPrototypeOf(w)===Object.prototype)for(var O in w)g.set(O,w[O]);else if(typeof w.keys=="function"&&typeof w.get=="function")for(let N of w.keys())g.set(N,w.get(N));else throw Error("Unknown input type for opt_headers: "+String(w));w=Array.from(g.keys()).find(N=>N.toLowerCase()=="content-type"),O=a.FormData&&c instanceof a.FormData,!(0<=Array.prototype.indexOf.call(HN,d,void 0))||w||O||g.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(let[N,Y]of g)this.g.setRequestHeader(N,Y);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{V1(this),this.u=!0,this.g.send(c),this.u=!1}catch(N){N1(this,N)}};function N1(c,d){c.h=!1,c.g&&(c.j=!0,c.g.abort(),c.j=!1),c.l=d,c.m=5,F1(c),Qd(c)}function F1(c){c.A||(c.A=!0,cn(c,"complete"),cn(c,"error"))}n.abort=function(c){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=c||7,cn(this,"complete"),cn(this,"abort"),Qd(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Qd(this,!0)),ct.aa.N.call(this)},n.Ea=function(){this.s||(this.B||this.u||this.j?L1(this):this.bb())},n.bb=function(){L1(this)};function L1(c){if(c.h&&typeof s<"u"&&(!c.v[1]||mi(c)!=4||c.Z()!=2)){if(c.u&&mi(c)==4)o1(c.Ea,0,c);else if(cn(c,"readystatechange"),mi(c)==4){c.h=!1;try{let Y=c.Z();e:switch(Y){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var d=!0;break e;default:d=!1}var g;if(!(g=d)){var w;if(w=Y===0){var O=String(c.D).match(D1)[1]||null;!O&&a.self&&a.self.location&&(O=a.self.location.protocol.slice(0,-1)),w=!$N.test(O?O.toLowerCase():"")}g=w}if(g)cn(c,"complete"),cn(c,"success");else{c.m=6;try{var N=2<mi(c)?c.g.statusText:""}catch{N=""}c.l=N+" ["+c.Z()+"]",F1(c)}}finally{Qd(c)}}}}function Qd(c,d){if(c.g){V1(c);let g=c.g,w=c.v[0]?()=>{}:null;c.g=null,c.v=null,d||cn(c,"ready");try{g.onreadystatechange=w}catch{}}}function V1(c){c.I&&(a.clearTimeout(c.I),c.I=null)}n.isActive=function(){return!!this.g};function mi(c){return c.g?c.g.readyState:0}n.Z=function(){try{return 2<mi(this)?this.g.status:-1}catch{return-1}},n.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.Oa=function(c){if(this.g){var d=this.g.responseText;return c&&d.indexOf(c)==0&&(d=d.substring(c.length)),wN(d)}};function U1(c){try{if(!c.g)return null;if("response"in c.g)return c.g.response;switch(c.H){case"":case"text":return c.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in c.g)return c.g.mozResponseArrayBuffer}return null}catch{return null}}function zN(c){let d={};c=(c.g&&2<=mi(c)&&c.g.getAllResponseHeaders()||"").split(`\r
`);for(let w=0;w<c.length;w++){if(oe(c[w]))continue;var g=A(c[w]);let O=g[0];if(g=g[1],typeof g!="string")continue;g=g.trim();let N=d[O]||[];d[O]=N,N.push(g)}P(d,function(w){return w.join(", ")})}n.Ba=function(){return this.m},n.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function bl(c,d,g){return g&&g.internalChannelParams&&g.internalChannelParams[c]||d}function j1(c){this.Aa=0,this.i=[],this.j=new fl,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=bl("failFast",!1,c),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=bl("baseRetryDelayMs",5e3,c),this.cb=bl("retryDelaySeedMs",1e4,c),this.Wa=bl("forwardChannelMaxRetries",2,c),this.wa=bl("forwardChannelRequestTimeoutMs",2e4,c),this.pa=c&&c.xmlHttpFactory||void 0,this.Xa=c&&c.Tb||void 0,this.Ca=c&&c.useFetchStreams||!1,this.L=void 0,this.J=c&&c.supportsCrossDomainXhr||!1,this.K="",this.h=new w1(c&&c.concurrentRequestLimit),this.Da=new jN,this.P=c&&c.fastHandshake||!1,this.O=c&&c.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=c&&c.Rb||!1,c&&c.xa&&this.j.xa(),c&&c.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&c&&c.detectBufferingProxy||!1,this.ja=void 0,c&&c.longPollingTimeout&&0<c.longPollingTimeout&&(this.ja=c.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}n=j1.prototype,n.la=8,n.G=1,n.connect=function(c,d,g,w){ln(0),this.W=c,this.H=d||{},g&&w!==void 0&&(this.H.OSID=g,this.H.OAID=w),this.F=this.X,this.I=Y1(this,null,this.W),Xd(this)};function pv(c){if(B1(c),c.G==3){var d=c.U++,g=gi(c.I);if(Qe(g,"SID",c.K),Qe(g,"RID",d),Qe(g,"TYPE","terminate"),wl(c,g),d=new Zi(c,c.j,d),d.L=2,d.v=Kd(gi(g)),g=!1,a.navigator&&a.navigator.sendBeacon)try{g=a.navigator.sendBeacon(d.v.toString(),"")}catch{}!g&&a.Image&&(new Image().src=d.v,g=!0),g||(d.g=Q1(d.j,null),d.g.ea(d.v)),d.F=Date.now(),qd(d)}K1(c)}function Zd(c){c.g&&(mv(c),c.g.cancel(),c.g=null)}function B1(c){Zd(c),c.u&&(a.clearTimeout(c.u),c.u=null),Jd(c),c.h.cancel(),c.s&&(typeof c.s=="number"&&a.clearTimeout(c.s),c.s=null)}function Xd(c){if(!E1(c.h)&&!c.s){c.s=!0;var d=c.Ga;il||JI(),ol||(il(),ol=!0),Gm.add(d,c),c.B=0}}function qN(c,d){return C1(c.h)>=c.h.j-(c.s?1:0)?!1:c.s?(c.i=d.D.concat(c.i),!0):c.G==1||c.G==2||c.B>=(c.Va?0:c.Wa)?!1:(c.s=dl(_(c.Ga,c,d),G1(c,c.B)),c.B++,!0)}n.Ga=function(c){if(this.s)if(this.s=null,this.G==1){if(!c){this.U=Math.floor(1e5*Math.random()),c=this.U++;let O=new Zi(this,this.j,c),N=this.o;if(this.S&&(N?(N=I(N),M(N,this.S)):N=this.S),this.m!==null||this.O||(O.H=N,N=null),this.P)e:{for(var d=0,g=0;g<this.i.length;g++){t:{var w=this.i[g];if("__data__"in w.map&&(w=w.map.__data__,typeof w=="string")){w=w.length;break t}w=void 0}if(w===void 0)break;if(d+=w,4096<d){d=g;break e}if(d===4096||g===this.i.length-1){d=g+1;break e}}d=1e3}else d=1e3;d=H1(this,O,d),g=gi(this.I),Qe(g,"RID",c),Qe(g,"CVER",22),this.D&&Qe(g,"X-HTTP-Session-Id",this.D),wl(this,g),N&&(this.O?d="headers="+encodeURIComponent(String(R1(N)))+"&"+d:this.m&&hv(g,this.m,N)),fv(this.h,O),this.Ua&&Qe(g,"TYPE","init"),this.P?(Qe(g,"$req",d),Qe(g,"SID","null"),O.T=!0,cv(O,g,null)):cv(O,g,d),this.G=2}}else this.G==3&&(c?$1(this,c):this.i.length==0||E1(this.h)||$1(this))};function $1(c,d){var g;d?g=d.l:g=c.U++;let w=gi(c.I);Qe(w,"SID",c.K),Qe(w,"RID",g),Qe(w,"AID",c.T),wl(c,w),c.m&&c.o&&hv(w,c.m,c.o),g=new Zi(c,c.j,g,c.B+1),c.m===null&&(g.H=c.o),d&&(c.i=d.D.concat(c.i)),d=H1(c,g,1e3),g.I=Math.round(.5*c.wa)+Math.round(.5*c.wa*Math.random()),fv(c.h,g),cv(g,w,d)}function wl(c,d){c.H&&$e(c.H,function(g,w){Qe(d,w,g)}),c.l&&T1({},function(g,w){Qe(d,w,g)})}function H1(c,d,g){g=Math.min(c.i.length,g);var w=c.l?_(c.l.Na,c.l,c):null;e:{var O=c.i;let N=-1;for(;;){let Y=["count="+g];N==-1?0<g?(N=O[0].g,Y.push("ofs="+N)):N=0:Y.push("ofs="+N);let qe=!0;for(let Ht=0;Ht<g;Ht++){let Oe=O[Ht].g,Qt=O[Ht].map;if(Oe-=N,0>Oe)N=Math.max(0,O[Ht].g-100),qe=!1;else try{BN(Qt,Y,"req"+Oe+"_")}catch{w&&w(Qt)}}if(qe){w=Y.join("&");break e}}}return c=c.i.splice(0,g),d.D=c,w}function z1(c){if(!c.g&&!c.u){c.Y=1;var d=c.Fa;il||JI(),ol||(il(),ol=!0),Gm.add(d,c),c.v=0}}function gv(c){return c.g||c.u||3<=c.v?!1:(c.Y++,c.u=dl(_(c.Fa,c),G1(c,c.v)),c.v++,!0)}n.Fa=function(){if(this.u=null,q1(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var c=2*this.R;this.j.info("BP detection timer enabled: "+c),this.A=dl(_(this.ab,this),c)}},n.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,ln(10),Zd(this),q1(this))};function mv(c){c.A!=null&&(a.clearTimeout(c.A),c.A=null)}function q1(c){c.g=new Zi(c,c.j,"rpc",c.Y),c.m===null&&(c.g.H=c.o),c.g.O=0;var d=gi(c.qa);Qe(d,"RID","rpc"),Qe(d,"SID",c.K),Qe(d,"AID",c.T),Qe(d,"CI",c.F?"0":"1"),!c.F&&c.ja&&Qe(d,"TO",c.ja),Qe(d,"TYPE","xmlhttp"),wl(c,d),c.m&&c.o&&hv(d,c.m,c.o),c.L&&(c.g.I=c.L);var g=c.g;c=c.ia,g.L=1,g.v=Kd(gi(d)),g.m=null,g.P=!0,_1(g,c)}n.Za=function(){this.C!=null&&(this.C=null,Zd(this),gv(this),ln(19))};function Jd(c){c.C!=null&&(a.clearTimeout(c.C),c.C=null)}function W1(c,d){var g=null;if(c.g==d){Jd(c),mv(c),c.g=null;var w=2}else if(dv(c.h,d))g=d.D,I1(c.h,d),w=1;else return;if(c.G!=0){if(d.o)if(w==1){g=d.m?d.m.length:0,d=Date.now()-d.F;var O=c.B;w=$d(),cn(w,new p1(w,g)),Xd(c)}else z1(c);else if(O=d.s,O==3||O==0&&0<d.X||!(w==1&&qN(c,d)||w==2&&gv(c)))switch(g&&0<g.length&&(d=c.h,d.i=d.i.concat(g)),O){case 1:Zo(c,5);break;case 4:Zo(c,10);break;case 3:Zo(c,6);break;default:Zo(c,2)}}}function G1(c,d){let g=c.Ta+Math.floor(Math.random()*c.cb);return c.isActive()||(g*=2),g*d}function Zo(c,d){if(c.j.info("Error code "+d),d==2){var g=_(c.fb,c),w=c.Xa;let O=!w;w=new Qo(w||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||Wd(w,"https"),Kd(w),O?VN(w.toString(),g):UN(w.toString(),g)}else ln(2);c.G=0,c.l&&c.l.sa(d),K1(c),B1(c)}n.fb=function(c){c?(this.j.info("Successfully pinged google.com"),ln(2)):(this.j.info("Failed to ping google.com"),ln(1))};function K1(c){if(c.G=0,c.ka=[],c.l){let d=S1(c.h);(d.length!=0||c.i.length!=0)&&(L(c.ka,d),L(c.ka,c.i),c.h.i.length=0,F(c.i),c.i.length=0),c.l.ra()}}function Y1(c,d,g){var w=g instanceof Qo?gi(g):new Qo(g);if(w.g!="")d&&(w.g=d+"."+w.g),Gd(w,w.s);else{var O=a.location;w=O.protocol,d=d?d+"."+O.hostname:O.hostname,O=+O.port;var N=new Qo(null);w&&Wd(N,w),d&&(N.g=d),O&&Gd(N,O),g&&(N.l=g),w=N}return g=c.D,d=c.ya,g&&d&&Qe(w,g,d),Qe(w,"VER",c.la),wl(c,w),w}function Q1(c,d,g){if(d&&!c.J)throw Error("Can't create secondary domain capable XhrIo object.");return d=c.Ca&&!c.pa?new ct(new vl({eb:g})):new ct(c.pa),d.Ha(c.J),d}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function Z1(){}n=Z1.prototype,n.ua=function(){},n.ta=function(){},n.sa=function(){},n.ra=function(){},n.isActive=function(){return!0},n.Na=function(){};function ef(){}ef.prototype.g=function(c,d){return new xn(c,d)};function xn(c,d){Yt.call(this),this.g=new j1(d),this.l=c,this.h=d&&d.messageUrlParams||null,c=d&&d.messageHeaders||null,d&&d.clientProtocolHeaderRequired&&(c?c["X-Client-Protocol"]="webchannel":c={"X-Client-Protocol":"webchannel"}),this.g.o=c,c=d&&d.initMessageHeaders||null,d&&d.messageContentType&&(c?c["X-WebChannel-Content-Type"]=d.messageContentType:c={"X-WebChannel-Content-Type":d.messageContentType}),d&&d.va&&(c?c["X-WebChannel-Client-Profile"]=d.va:c={"X-WebChannel-Client-Profile":d.va}),this.g.S=c,(c=d&&d.Sb)&&!oe(c)&&(this.g.m=c),this.v=d&&d.supportsCrossDomainXhr||!1,this.u=d&&d.sendRawJson||!1,(d=d&&d.httpSessionIdParam)&&!oe(d)&&(this.g.D=d,c=this.h,c!==null&&d in c&&(c=this.h,d in c&&delete c[d])),this.j=new ma(this)}x(xn,Yt),xn.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},xn.prototype.close=function(){pv(this.g)},xn.prototype.o=function(c){var d=this.g;if(typeof c=="string"){var g={};g.__data__=c,c=g}else this.u&&(g={},g.__data__=nv(c),c=g);d.i.push(new xN(d.Ya++,c)),d.G==3&&Xd(d)},xn.prototype.N=function(){this.g.l=null,delete this.j,pv(this.g),delete this.g,xn.aa.N.call(this)};function X1(c){iv.call(this),c.__headers__&&(this.headers=c.__headers__,this.statusCode=c.__status__,delete c.__headers__,delete c.__status__);var d=c.__sm__;if(d){e:{for(let g in d){c=g;break e}c=void 0}(this.i=c)&&(c=this.i,d=d!==null&&c in d?d[c]:void 0),this.data=d}else this.data=c}x(X1,iv);function J1(){ov.call(this),this.status=1}x(J1,ov);function ma(c){this.g=c}x(ma,Z1),ma.prototype.ua=function(){cn(this.g,"a")},ma.prototype.ta=function(c){cn(this.g,new X1(c))},ma.prototype.sa=function(c){cn(this.g,new J1)},ma.prototype.ra=function(){cn(this.g,"b")},ef.prototype.createWebChannel=ef.prototype.g,xn.prototype.send=xn.prototype.o,xn.prototype.open=xn.prototype.m,xn.prototype.close=xn.prototype.close,Jw=Bi.createWebChannelTransport=function(){return new ef},Xw=Bi.getStatEventTarget=function(){return $d()},Zw=Bi.Event=Ko,wg=Bi.Stat={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Hd.NO_ERROR=0,Hd.TIMEOUT=8,Hd.HTTP_ERROR=6,td=Bi.ErrorCode=Hd,g1.COMPLETE="complete",Qw=Bi.EventType=g1,u1.EventType=ll,ll.OPEN="a",ll.CLOSE="b",ll.ERROR="c",ll.MESSAGE="d",Yt.prototype.listen=Yt.prototype.K,Sc=Bi.WebChannel=u1,I$=Bi.FetchXmlHttpFactory=vl,ct.prototype.listenOnce=ct.prototype.L,ct.prototype.getLastError=ct.prototype.Ka,ct.prototype.getLastErrorCode=ct.prototype.Ba,ct.prototype.getStatus=ct.prototype.Z,ct.prototype.getResponseJson=ct.prototype.Oa,ct.prototype.getResponseText=ct.prototype.oa,ct.prototype.send=ct.prototype.ea,ct.prototype.setWithCredentials=ct.prototype.Ha,Yw=Bi.XhrIo=ct}).apply(typeof bg<"u"?bg:typeof self<"u"?self:typeof window<"u"?window:{});var ik="@firebase/firestore",ok="4.8.0";var jt=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};jt.UNAUTHENTICATED=new jt(null),jt.GOOGLE_CREDENTIALS=new jt("google-credentials-uid"),jt.FIRST_PARTY=new jt("first-party-uid"),jt.MOCK_USER=new jt("mock-user");var zc="11.10.0";var Qs=new nr("@firebase/firestore");function Tc(){return Qs.logLevel}function J(n,...e){if(Qs.logLevel<=De.DEBUG){let t=e.map(WC);Qs.debug(`Firestore (${zc}): ${n}`,...t)}}function $i(n,...e){if(Qs.logLevel<=De.ERROR){let t=e.map(WC);Qs.error(`Firestore (${zc}): ${n}`,...t)}}function Uo(n,...e){if(Qs.logLevel<=De.WARN){let t=e.map(WC);Qs.warn(`Firestore (${zc}): ${n}`,...t)}}function WC(n){if(typeof n=="string")return n;try{return(function(t){return JSON.stringify(t)})(n)}catch{return n}}function le(n,e,t){let r="Unexpected state";typeof e=="string"?r=e:t=e,Qk(n,r,t)}function Qk(n,e,t){let r=`FIRESTORE (${zc}) INTERNAL ASSERTION FAILED: ${e} (ID: ${n.toString(16)})`;if(t!==void 0)try{r+=" CONTEXT: "+JSON.stringify(t)}catch{r+=" CONTEXT: "+t}throw $i(r),new Error(r)}function Be(n,e,t,r){let i="Unexpected state";typeof t=="string"?i=t:r=t,n||Qk(e,i,r)}function me(n,e){return n}var j={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},G=class extends Wt{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}};var kr=class{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}};var xg=class{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}},oE=class{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(jt.UNAUTHENTICATED))}shutdown(){}},sE=class{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}},aE=class{constructor(e){this.t=e,this.currentUser=jt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){Be(this.o===void 0,42304);let r=this.i,i=l=>this.i!==r?(r=this.i,t(l)):Promise.resolve(),o=new kr;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new kr,e.enqueueRetryable(()=>i(this.currentUser))};let s=()=>{let l=o;e.enqueueRetryable(()=>b(this,null,function*(){yield l.promise,yield i(this.currentUser)}))},a=l=>{J("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=l,this.o&&(this.auth.addAuthTokenListener(this.o),s())};this.t.onInit(l=>a(l)),setTimeout(()=>{if(!this.auth){let l=this.t.getImmediate({optional:!0});l?a(l):(J("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new kr)}},0),s()}getToken(){let e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(J("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Be(typeof r.accessToken=="string",31837,{l:r}),new xg(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){let e=this.auth&&this.auth.getUid();return Be(e===null||typeof e=="string",2055,{h:e}),new jt(e)}},cE=class{constructor(e,t,r){this.P=e,this.T=t,this.I=r,this.type="FirstParty",this.user=jt.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);let e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}},lE=class{constructor(e,t,r){this.P=e,this.T=t,this.I=r}getToken(){return Promise.resolve(new cE(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable(()=>t(jt.FIRST_PARTY))}shutdown(){}invalidateToken(){}},Mg=class{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}},uE=class{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Vn(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){Be(this.o===void 0,3512);let r=o=>{o.error!=null&&J("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${o.error.message}`);let s=o.token!==this.m;return this.m=o.token,J("FirebaseAppCheckTokenProvider",`Received ${s?"new":"existing"} token.`),s?t(o.token):Promise.resolve()};this.o=o=>{e.enqueueRetryable(()=>r(o))};let i=o=>{J("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=o,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(o=>i(o)),setTimeout(()=>{if(!this.appCheck){let o=this.V.getImmediate({optional:!0});o?i(o):J("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new Mg(this.p));let e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(Be(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new Mg(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}};function S$(n){let e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}function Zk(){return new TextEncoder}var sd=class{static newId(){let e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516),r="";for(;r.length<20;){let i=S$(40);for(let o=0;o<i.length;++o)r.length<20&&i[o]<t&&(r+=e.charAt(i[o]%62))}return r}};function Te(n,e){return n<e?-1:n>e?1:0}function dE(n,e){let t=0;for(;t<n.length&&t<e.length;){let r=n.codePointAt(t),i=e.codePointAt(t);if(r!==i){if(r<128&&i<128)return Te(r,i);{let o=Zk(),s=T$(o.encode(sk(n,t)),o.encode(sk(e,t)));return s!==0?s:Te(r,i)}}t+=r>65535?2:1}return Te(n.length,e.length)}function sk(n,e){return n.codePointAt(e)>65535?n.substring(e,e+2):n.substring(e,e+1)}function T$(n,e){for(let t=0;t<n.length&&t<e.length;++t)if(n[t]!==e[t])return Te(n[t],e[t]);return Te(n.length,e.length)}function Rc(n,e,t){return n.length===e.length&&n.every((r,i)=>t(r,e[i]))}var ak="__name__",Pg=class n{constructor(e,t,r){t===void 0?t=0:t>e.length&&le(637,{offset:t,range:e.length}),r===void 0?r=e.length-t:r>e.length-t&&le(1746,{length:r,range:e.length-t}),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return n.comparator(this,e)===0}child(e){let t=this.segments.slice(this.offset,this.limit());return e instanceof n?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){let r=Math.min(e.length,t.length);for(let i=0;i<r;i++){let o=n.compareSegments(e.get(i),t.get(i));if(o!==0)return o}return Te(e.length,t.length)}static compareSegments(e,t){let r=n.isNumericId(e),i=n.isNumericId(t);return r&&!i?-1:!r&&i?1:r&&i?n.extractNumericId(e).compare(n.extractNumericId(t)):dE(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return ji.fromString(e.substring(4,e.length-2))}},Je=class n extends Pg{construct(e,t,r){return new n(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){let t=[];for(let r of e){if(r.indexOf("//")>=0)throw new G(j.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(i=>i.length>0))}return new n(t)}static emptyPath(){return new n([])}},D$=/^[_a-zA-Z][_a-zA-Z0-9]*$/,Bn=class n extends Pg{construct(e,t,r){return new n(e,t,r)}static isValidIdentifier(e){return D$.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),n.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===ak}static keyField(){return new n([ak])}static fromServerFormat(e){let t=[],r="",i=0,o=()=>{if(r.length===0)throw new G(j.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""},s=!1;for(;i<e.length;){let a=e[i];if(a==="\\"){if(i+1===e.length)throw new G(j.INVALID_ARGUMENT,"Path has trailing escape character: "+e);let l=e[i+1];if(l!=="\\"&&l!=="."&&l!=="`")throw new G(j.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=l,i+=2}else a==="`"?(s=!s,i++):a!=="."||s?(r+=a,i++):(o(),i++)}if(o(),s)throw new G(j.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new n(t)}static emptyPath(){return new n([])}};var ae=class n{constructor(e){this.path=e}static fromPath(e){return new n(Je.fromString(e))}static fromName(e){return new n(Je.fromString(e).popFirst(5))}static empty(){return new n(Je.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Je.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return Je.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new n(new Je(e.slice()))}};function Xk(n,e,t){if(!t)throw new G(j.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function x$(n,e,t,r){if(e===!0&&r===!0)throw new G(j.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function ck(n){if(!ae.isDocumentKey(n))throw new G(j.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function lk(n){if(ae.isDocumentKey(n))throw new G(j.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function Jk(n){return typeof n=="object"&&n!==null&&(Object.getPrototypeOf(n)===Object.prototype||Object.getPrototypeOf(n)===null)}function lm(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{let e=(function(r){return r.constructor?r.constructor.name:null})(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":le(12329,{type:typeof n})}function vn(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new G(j.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{let t=lm(n);throw new G(j.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function M$(n,e){if(e<=0)throw new G(j.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${e}.`)}function xt(n,e){let t={typeString:n};return e&&(t.value=e),t}function bd(n,e){if(!Jk(n))throw new G(j.INVALID_ARGUMENT,"JSON must be an object");let t;for(let r in e)if(e[r]){let i=e[r].typeString,o="value"in e[r]?{value:e[r].value}:void 0;if(!(r in n)){t=`JSON missing required field: '${r}'`;break}let s=n[r];if(i&&typeof s!==i){t=`JSON field '${r}' must be a ${i}.`;break}if(o!==void 0&&s!==o.value){t=`Expected '${r}' field to equal '${o.value}'`;break}}if(t)throw new G(j.INVALID_ARGUMENT,t);return!0}var uk=-62135596800,dk=1e6,rt=class n{static now(){return n.fromMillis(Date.now())}static fromDate(e){return n.fromMillis(e.getTime())}static fromMillis(e){let t=Math.floor(e/1e3),r=Math.floor((e-1e3*t)*dk);return new n(t,r)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new G(j.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new G(j.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<uk)throw new G(j.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new G(j.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/dk}_compareTo(e){return this.seconds===e.seconds?Te(this.nanoseconds,e.nanoseconds):Te(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:n._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(bd(e,n._jsonSchema))return new n(e.seconds,e.nanoseconds)}valueOf(){let e=this.seconds-uk;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}};rt._jsonSchemaVersion="firestore/timestamp/1.0",rt._jsonSchema={type:xt("string",rt._jsonSchemaVersion),seconds:xt("number"),nanoseconds:xt("number")};var _e=class n{static fromTimestamp(e){return new n(e)}static min(){return new n(new rt(0,0))}static max(){return new n(new rt(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}};var ad=-1,fE=class{constructor(e,t,r,i){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=i}};fE.UNKNOWN_ID=-1;function P$(n,e){let t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,i=_e.fromTimestamp(r===1e9?new rt(t+1,0):new rt(t,r));return new Zs(i,ae.empty(),e)}function A$(n){return new Zs(n.readTime,n.key,ad)}var Zs=class n{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new n(_e.min(),ae.empty(),ad)}static max(){return new n(_e.max(),ae.empty(),ad)}};function k$(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=ae.comparator(n.documentKey,e.documentKey),t!==0?t:Te(n.largestBatchId,e.largestBatchId))}var O$="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",hE=class{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}};function qc(n){return b(this,null,function*(){if(n.code!==j.FAILED_PRECONDITION||n.message!==O$)throw n;J("LocalStore","Unexpectedly lost primary lease")})}var z=class n{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&le(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new n((r,i)=>{this.nextCallback=o=>{this.wrapSuccess(e,o).next(r,i)},this.catchCallback=o=>{this.wrapFailure(t,o).next(r,i)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{let t=e();return t instanceof n?t:n.resolve(t)}catch(t){return n.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):n.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):n.reject(t)}static resolve(e){return new n((t,r)=>{t(e)})}static reject(e){return new n((t,r)=>{r(e)})}static waitFor(e){return new n((t,r)=>{let i=0,o=0,s=!1;e.forEach(a=>{++i,a.next(()=>{++o,s&&o===i&&t()},l=>r(l))}),s=!0,o===i&&t()})}static or(e){let t=n.resolve(!1);for(let r of e)t=t.next(i=>i?n.resolve(i):r());return t}static forEach(e,t){let r=[];return e.forEach((i,o)=>{r.push(t.call(this,i,o))}),this.waitFor(r)}static mapArray(e,t){return new n((r,i)=>{let o=e.length,s=new Array(o),a=0;for(let l=0;l<o;l++){let u=l;t(e[u]).next(f=>{s[u]=f,++a,a===o&&r(s)},f=>i(f))}})}static doWhile(e,t){return new n((r,i)=>{let o=()=>{e()===!0?t().next(()=>{o()},i):r()};o()})}};function R$(n){let e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function Wc(n){return n.name==="IndexedDbTransactionError"}var GC=(()=>{class n{constructor(t,r){this.previousValue=t,r&&(r.sequenceNumberHandler=i=>this._e(i),this.ae=i=>r.writeSequenceNumber(i))}_e(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){let t=++this.previousValue;return this.ae&&this.ae(t),t}}n.ue=-1;return n})(),KC=-1;function um(n){return n==null}function cd(n){return n===0&&1/n==-1/0}function N$(n){return typeof n=="number"&&Number.isInteger(n)&&!cd(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}var eO="";function F$(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=fk(e)),e=L$(n.get(t),e);return fk(e)}function L$(n,e){let t=e,r=n.length;for(let i=0;i<r;i++){let o=n.charAt(i);switch(o){case"\0":t+="";break;case eO:t+="";break;default:t+=o}}return t}function fk(n){return n+eO+""}var V$="remoteDocuments",tO="owner";var nO="mutationQueues";var rO="mutations";var iO="documentMutations",U$="remoteDocumentsV14";var oO="remoteDocumentGlobal";var sO="targets";var aO="targetDocuments";var cO="targetGlobal",lO="collectionParents";var uO="clientMetadata";var dO="bundles";var fO="namedQueries";var j$="indexConfiguration";var B$="indexState";var $$="indexEntries";var hO="documentOverlays";var H$="globals";var z$=[nO,rO,iO,V$,sO,tO,cO,aO,uO,oO,lO,dO,fO],xge=[...z$,hO],q$=[nO,rO,iO,U$,sO,tO,cO,aO,uO,oO,lO,dO,fO,hO],W$=q$,G$=[...W$,j$,B$,$$];var Mge=[...G$,H$];function hk(n){let e=0;for(let t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function zo(n,e){for(let t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function pO(n){for(let e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}var dt=class n{constructor(e,t){this.comparator=e,this.root=t||oi.EMPTY}insert(e,t){return new n(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,oi.BLACK,null,null))}remove(e){return new n(this.comparator,this.root.remove(e,this.comparator).copy(null,null,oi.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){let r=this.comparator(e,t.key);if(r===0)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){let i=this.comparator(e,r.key);if(i===0)return t+r.left.size;i<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){let e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Pc(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Pc(this.root,e,this.comparator,!1)}getReverseIterator(){return new Pc(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Pc(this.root,e,this.comparator,!0)}},Pc=class{constructor(e,t,r,i){this.isReverse=i,this.nodeStack=[];let o=1;for(;!e.isEmpty();)if(o=t?r(e.key,t):1,t&&i&&(o*=-1),o<0)e=this.isReverse?e.left:e.right;else{if(o===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop(),t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;let e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}},oi=class n{constructor(e,t,r,i,o){this.key=e,this.value=t,this.color=r??n.RED,this.left=i??n.EMPTY,this.right=o??n.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,i,o){return new n(e??this.key,t??this.value,r??this.color,i??this.left,o??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let i=this,o=r(e,i.key);return i=o<0?i.copy(null,null,null,i.left.insert(e,t,r),null):o===0?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return n.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),t(e,i.key)===0){if(i.right.isEmpty())return n.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){let e=this.copy(null,null,n.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){let e=this.copy(null,null,n.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){let e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){let e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw le(43730,{key:this.key,value:this.value});if(this.right.isRed())throw le(14113,{key:this.key,value:this.value});let e=this.left.check();if(e!==this.right.check())throw le(27949);return e+(this.isRed()?0:1)}};oi.EMPTY=null,oi.RED=!0,oi.BLACK=!1;oi.EMPTY=new class{constructor(){this.size=0}get key(){throw le(57766)}get value(){throw le(16141)}get color(){throw le(16727)}get left(){throw le(29726)}get right(){throw le(36894)}copy(e,t,r,i,o){return this}insert(e,t,r){return new oi(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};var Bt=class n{constructor(e){this.comparator=e,this.data=new dt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){let r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){let i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let r;for(r=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){let t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new Ag(this.data.getIterator())}getIteratorFrom(e){return new Ag(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof n)||this.size!==e.size)return!1;let t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){let i=t.getNext().key,o=r.getNext().key;if(this.comparator(i,o)!==0)return!1}return!0}toArray(){let e=[];return this.forEach(t=>{e.push(t)}),e}toString(){let e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){let t=new n(this.comparator);return t.data=e,t}},Ag=class{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}};var sr=class n{constructor(e){this.fields=e,e.sort(Bn.comparator)}static empty(){return new n([])}unionWith(e){let t=new Bt(Bn.comparator);for(let r of this.fields)t=t.add(r);for(let r of e)t=t.add(r);return new n(t.toArray())}covers(e){for(let t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Rc(this.fields,e.fields,(t,r)=>t.isEqual(r))}};var kg=class extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}};var an=class n{constructor(e){this.binaryString=e}static fromBase64String(e){let t=(function(i){try{return atob(i)}catch(o){throw typeof DOMException<"u"&&o instanceof DOMException?new kg("Invalid base64 string: "+o):o}})(e);return new n(t)}static fromUint8Array(e){let t=(function(i){let o="";for(let s=0;s<i.length;++s)o+=String.fromCharCode(i[s]);return o})(e);return new n(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(t){return btoa(t)})(this.binaryString)}toUint8Array(){return(function(t){let r=new Uint8Array(t.length);for(let i=0;i<t.length;i++)r[i]=t.charCodeAt(i);return r})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Te(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}};an.EMPTY_BYTE_STRING=new an("");var K$=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Hi(n){if(Be(!!n,39018),typeof n=="string"){let e=0,t=K$.exec(n);if(Be(!!t,46558,{timestamp:n}),t[1]){let i=t[1];i=(i+"000000000").substr(0,9),e=Number(i)}let r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:nt(n.seconds),nanos:nt(n.nanos)}}function nt(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function zi(n){return typeof n=="string"?an.fromBase64String(n):an.fromUint8Array(n)}var gO="server_timestamp",mO="__type__",vO="__previous_value__",_O="__local_write_time__";function dm(n){var e,t;return((t=(((e=n?.mapValue)===null||e===void 0?void 0:e.fields)||{})[mO])===null||t===void 0?void 0:t.stringValue)===gO}function fm(n){let e=n.mapValue.fields[vO];return dm(e)?fm(e):e}function ld(n){let e=Hi(n.mapValue.fields[_O].timestampValue);return new rt(e.seconds,e.nanos)}var pE=class{constructor(e,t,r,i,o,s,a,l,u,f){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=i,this.ssl=o,this.forceLongPolling=s,this.autoDetectLongPolling=a,this.longPollingOptions=l,this.useFetchStreams=u,this.isUsingEmulator=f}},Og="(default)",Rg=class n{constructor(e,t){this.projectId=e,this.database=t||Og}static empty(){return new n("","")}get isDefaultDatabase(){return this.database===Og}isEqual(e){return e instanceof n&&e.projectId===this.projectId&&e.database===this.database}};var YC="__type__",yO="__max__",Eg={mapValue:{fields:{__type__:{stringValue:yO}}}},QC="__vector__",Nc="value";function jo(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?dm(n)?4:wO(n)?9007199254740991:bO(n)?10:11:le(28295,{value:n})}function ci(n,e){if(n===e)return!0;let t=jo(n);if(t!==jo(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return ld(n).isEqual(ld(e));case 3:return(function(i,o){if(typeof i.timestampValue=="string"&&typeof o.timestampValue=="string"&&i.timestampValue.length===o.timestampValue.length)return i.timestampValue===o.timestampValue;let s=Hi(i.timestampValue),a=Hi(o.timestampValue);return s.seconds===a.seconds&&s.nanos===a.nanos})(n,e);case 5:return n.stringValue===e.stringValue;case 6:return(function(i,o){return zi(i.bytesValue).isEqual(zi(o.bytesValue))})(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return(function(i,o){return nt(i.geoPointValue.latitude)===nt(o.geoPointValue.latitude)&&nt(i.geoPointValue.longitude)===nt(o.geoPointValue.longitude)})(n,e);case 2:return(function(i,o){if("integerValue"in i&&"integerValue"in o)return nt(i.integerValue)===nt(o.integerValue);if("doubleValue"in i&&"doubleValue"in o){let s=nt(i.doubleValue),a=nt(o.doubleValue);return s===a?cd(s)===cd(a):isNaN(s)&&isNaN(a)}return!1})(n,e);case 9:return Rc(n.arrayValue.values||[],e.arrayValue.values||[],ci);case 10:case 11:return(function(i,o){let s=i.mapValue.fields||{},a=o.mapValue.fields||{};if(hk(s)!==hk(a))return!1;for(let l in s)if(s.hasOwnProperty(l)&&(a[l]===void 0||!ci(s[l],a[l])))return!1;return!0})(n,e);default:return le(52216,{left:n})}}function ud(n,e){return(n.values||[]).find(t=>ci(t,e))!==void 0}function Fc(n,e){if(n===e)return 0;let t=jo(n),r=jo(e);if(t!==r)return Te(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return Te(n.booleanValue,e.booleanValue);case 2:return(function(o,s){let a=nt(o.integerValue||o.doubleValue),l=nt(s.integerValue||s.doubleValue);return a<l?-1:a>l?1:a===l?0:isNaN(a)?isNaN(l)?0:-1:1})(n,e);case 3:return pk(n.timestampValue,e.timestampValue);case 4:return pk(ld(n),ld(e));case 5:return dE(n.stringValue,e.stringValue);case 6:return(function(o,s){let a=zi(o),l=zi(s);return a.compareTo(l)})(n.bytesValue,e.bytesValue);case 7:return(function(o,s){let a=o.split("/"),l=s.split("/");for(let u=0;u<a.length&&u<l.length;u++){let f=Te(a[u],l[u]);if(f!==0)return f}return Te(a.length,l.length)})(n.referenceValue,e.referenceValue);case 8:return(function(o,s){let a=Te(nt(o.latitude),nt(s.latitude));return a!==0?a:Te(nt(o.longitude),nt(s.longitude))})(n.geoPointValue,e.geoPointValue);case 9:return gk(n.arrayValue,e.arrayValue);case 10:return(function(o,s){var a,l,u,f;let m=o.fields||{},_=s.fields||{},E=(a=m[Nc])===null||a===void 0?void 0:a.arrayValue,x=(l=_[Nc])===null||l===void 0?void 0:l.arrayValue,F=Te(((u=E?.values)===null||u===void 0?void 0:u.length)||0,((f=x?.values)===null||f===void 0?void 0:f.length)||0);return F!==0?F:gk(E,x)})(n.mapValue,e.mapValue);case 11:return(function(o,s){if(o===Eg.mapValue&&s===Eg.mapValue)return 0;if(o===Eg.mapValue)return 1;if(s===Eg.mapValue)return-1;let a=o.fields||{},l=Object.keys(a),u=s.fields||{},f=Object.keys(u);l.sort(),f.sort();for(let m=0;m<l.length&&m<f.length;++m){let _=dE(l[m],f[m]);if(_!==0)return _;let E=Fc(a[l[m]],u[f[m]]);if(E!==0)return E}return Te(l.length,f.length)})(n.mapValue,e.mapValue);default:throw le(23264,{le:t})}}function pk(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return Te(n,e);let t=Hi(n),r=Hi(e),i=Te(t.seconds,r.seconds);return i!==0?i:Te(t.nanos,r.nanos)}function gk(n,e){let t=n.values||[],r=e.values||[];for(let i=0;i<t.length&&i<r.length;++i){let o=Fc(t[i],r[i]);if(o)return o}return Te(t.length,r.length)}function Lc(n){return gE(n)}function gE(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?(function(t){let r=Hi(t);return`time(${r.seconds},${r.nanos})`})(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?(function(t){return zi(t).toBase64()})(n.bytesValue):"referenceValue"in n?(function(t){return ae.fromName(t).toString()})(n.referenceValue):"geoPointValue"in n?(function(t){return`geo(${t.latitude},${t.longitude})`})(n.geoPointValue):"arrayValue"in n?(function(t){let r="[",i=!0;for(let o of t.values||[])i?i=!1:r+=",",r+=gE(o);return r+"]"})(n.arrayValue):"mapValue"in n?(function(t){let r=Object.keys(t.fields||{}).sort(),i="{",o=!0;for(let s of r)o?o=!1:i+=",",i+=`${s}:${gE(t.fields[s])}`;return i+"}"})(n.mapValue):le(61005,{value:n})}function Sg(n){switch(jo(n)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:let e=fm(n);return e?16+Sg(e):16;case 5:return 2*n.stringValue.length;case 6:return zi(n.bytesValue).approximateByteSize();case 7:return n.referenceValue.length;case 9:return(function(r){return(r.values||[]).reduce((i,o)=>i+Sg(o),0)})(n.arrayValue);case 10:case 11:return(function(r){let i=0;return zo(r.fields,(o,s)=>{i+=o.length+Sg(s)}),i})(n.mapValue);default:throw le(13486,{value:n})}}function Ng(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function mE(n){return!!n&&"integerValue"in n}function ZC(n){return!!n&&"arrayValue"in n}function mk(n){return!!n&&"nullValue"in n}function vk(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function Tg(n){return!!n&&"mapValue"in n}function bO(n){var e,t;return((t=(((e=n?.mapValue)===null||e===void 0?void 0:e.fields)||{})[YC])===null||t===void 0?void 0:t.stringValue)===QC}function rd(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){let e={mapValue:{fields:{}}};return zo(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=rd(r)),e}if(n.arrayValue){let e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=rd(n.arrayValue.values[t]);return e}return Object.assign({},n)}function wO(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue===yO}var Age={mapValue:{fields:{[YC]:{stringValue:QC},[Nc]:{arrayValue:{}}}}};var jn=class n{constructor(e){this.value=e}static empty(){return new n({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!Tg(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=rd(t)}setAll(e){let t=Bn.emptyPath(),r={},i=[];e.forEach((s,a)=>{if(!t.isImmediateParentOf(a)){let l=this.getFieldsMap(t);this.applyChanges(l,r,i),r={},i=[],t=a.popLast()}s?r[a.lastSegment()]=rd(s):i.push(a.lastSegment())});let o=this.getFieldsMap(t);this.applyChanges(o,r,i)}delete(e){let t=this.field(e.popLast());Tg(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return ci(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=t.mapValue.fields[e.get(r)];Tg(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,r){zo(t,(i,o)=>e[i]=o);for(let i of r)delete e[i]}clone(){return new n(rd(this.value))}};function EO(n){let e=[];return zo(n.fields,(t,r)=>{let i=new Bn([t]);if(Tg(r)){let o=EO(r.mapValue).fields;if(o.length===0)e.push(i);else for(let s of o)e.push(i.child(s))}else e.push(i)}),new sr(e)}var Or=class n{constructor(e,t,r,i,o,s,a){this.key=e,this.documentType=t,this.version=r,this.readTime=i,this.createTime=o,this.data=s,this.documentState=a}static newInvalidDocument(e){return new n(e,0,_e.min(),_e.min(),_e.min(),jn.empty(),0)}static newFoundDocument(e,t,r,i){return new n(e,1,t,_e.min(),r,i,0)}static newNoDocument(e,t){return new n(e,2,t,_e.min(),_e.min(),jn.empty(),0)}static newUnknownDocument(e,t){return new n(e,3,t,_e.min(),_e.min(),jn.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(_e.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=jn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=jn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=_e.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof n&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new n(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}};var Bo=class{constructor(e,t){this.position=e,this.inclusive=t}};function _k(n,e,t){let r=0;for(let i=0;i<n.position.length;i++){let o=e[i],s=n.position[i];if(o.field.isKeyField()?r=ae.comparator(ae.fromName(s.referenceValue),t.key):r=Fc(s,t.data.field(o.field)),o.dir==="desc"&&(r*=-1),r!==0)break}return r}function yk(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!ci(n.position[t],e.position[t]))return!1;return!0}var Xs=class{constructor(e,t="asc"){this.field=e,this.dir=t}};function Y$(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}var Fg=class{},Dt=class n extends Fg{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,r):new _E(e,t,r):t==="array-contains"?new wE(e,r):t==="in"?new EE(e,r):t==="not-in"?new CE(e,r):t==="array-contains-any"?new IE(e,r):new n(e,t,r)}static createKeyFieldInFilter(e,t,r){return t==="in"?new yE(e,r):new bE(e,r)}matches(e){let t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(Fc(t,this.value)):t!==null&&jo(this.value)===jo(t)&&this.matchesComparison(Fc(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return le(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}},Rr=class n extends Fg{constructor(e,t){super(),this.filters=e,this.op=t,this.he=null}static create(e,t){return new n(e,t)}matches(e){return CO(this)?this.filters.find(t=>!t.matches(e))===void 0:this.filters.find(t=>t.matches(e))!==void 0}getFlattenedFilters(){return this.he!==null||(this.he=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.he}getFilters(){return Object.assign([],this.filters)}};function CO(n){return n.op==="and"}function IO(n){return Q$(n)&&CO(n)}function Q$(n){for(let e of n.filters)if(e instanceof Rr)return!1;return!0}function vE(n){if(n instanceof Dt)return n.field.canonicalString()+n.op.toString()+Lc(n.value);if(IO(n))return n.filters.map(e=>vE(e)).join(",");{let e=n.filters.map(t=>vE(t)).join(",");return`${n.op}(${e})`}}function SO(n,e){return n instanceof Dt?(function(r,i){return i instanceof Dt&&r.op===i.op&&r.field.isEqual(i.field)&&ci(r.value,i.value)})(n,e):n instanceof Rr?(function(r,i){return i instanceof Rr&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((o,s,a)=>o&&SO(s,i.filters[a]),!0):!1})(n,e):void le(19439)}function TO(n){return n instanceof Dt?(function(t){return`${t.field.canonicalString()} ${t.op} ${Lc(t.value)}`})(n):n instanceof Rr?(function(t){return t.op.toString()+" {"+t.getFilters().map(TO).join(" ,")+"}"})(n):"Filter"}var _E=class extends Dt{constructor(e,t,r){super(e,t,r),this.key=ae.fromName(r.referenceValue)}matches(e){let t=ae.comparator(e.key,this.key);return this.matchesComparison(t)}},yE=class extends Dt{constructor(e,t){super(e,"in",t),this.keys=DO("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}},bE=class extends Dt{constructor(e,t){super(e,"not-in",t),this.keys=DO("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}};function DO(n,e){var t;return(((t=e.arrayValue)===null||t===void 0?void 0:t.values)||[]).map(r=>ae.fromName(r.referenceValue))}var wE=class extends Dt{constructor(e,t){super(e,"array-contains",t)}matches(e){let t=e.data.field(this.field);return ZC(t)&&ud(t.arrayValue,this.value)}},EE=class extends Dt{constructor(e,t){super(e,"in",t)}matches(e){let t=e.data.field(this.field);return t!==null&&ud(this.value.arrayValue,t)}},CE=class extends Dt{constructor(e,t){super(e,"not-in",t)}matches(e){if(ud(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;let t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!ud(this.value.arrayValue,t)}},IE=class extends Dt{constructor(e,t){super(e,"array-contains-any",t)}matches(e){let t=e.data.field(this.field);return!(!ZC(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>ud(this.value.arrayValue,r))}};var SE=class{constructor(e,t=null,r=[],i=[],o=null,s=null,a=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=i,this.limit=o,this.startAt=s,this.endAt=a,this.Pe=null}};function bk(n,e=null,t=[],r=[],i=null,o=null,s=null){return new SE(n,e,t,r,i,o,s)}function XC(n){let e=me(n);if(e.Pe===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>vE(r)).join(","),t+="|ob:",t+=e.orderBy.map(r=>(function(o){return o.field.canonicalString()+o.dir})(r)).join(","),um(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>Lc(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>Lc(r)).join(",")),e.Pe=t}return e.Pe}function JC(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!Y$(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!SO(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!yk(n.startAt,e.startAt)&&yk(n.endAt,e.endAt)}function TE(n){return ae.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}var qi=class{constructor(e,t=null,r=[],i=[],o=null,s="F",a=null,l=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=i,this.limit=o,this.limitType=s,this.startAt=a,this.endAt=l,this.Te=null,this.Ie=null,this.de=null,this.startAt,this.endAt}};function Z$(n,e,t,r,i,o,s,a){return new qi(n,e,t,r,i,o,s,a)}function hm(n){return new qi(n)}function wk(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function eI(n){return n.collectionGroup!==null}function Ac(n){let e=me(n);if(e.Te===null){e.Te=[];let t=new Set;for(let o of e.explicitOrderBy)e.Te.push(o),t.add(o.field.canonicalString());let r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(s){let a=new Bt(Bn.comparator);return s.filters.forEach(l=>{l.getFlattenedFilters().forEach(u=>{u.isInequality()&&(a=a.add(u.field))})}),a})(e).forEach(o=>{t.has(o.canonicalString())||o.isKeyField()||e.Te.push(new Xs(o,r))}),t.has(Bn.keyField().canonicalString())||e.Te.push(new Xs(Bn.keyField(),r))}return e.Te}function si(n){let e=me(n);return e.Ie||(e.Ie=X$(e,Ac(n))),e.Ie}function X$(n,e){if(n.limitType==="F")return bk(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map(i=>{let o=i.dir==="desc"?"asc":"desc";return new Xs(i.field,o)});let t=n.endAt?new Bo(n.endAt.position,n.endAt.inclusive):null,r=n.startAt?new Bo(n.startAt.position,n.startAt.inclusive):null;return bk(n.path,n.collectionGroup,e,n.filters,n.limit,t,r)}}function DE(n,e){let t=n.filters.concat([e]);return new qi(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function Lg(n,e,t){return new qi(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function pm(n,e){return JC(si(n),si(e))&&n.limitType===e.limitType}function xO(n){return`${XC(si(n))}|lt:${n.limitType}`}function Dc(n){return`Query(target=${(function(t){let r=t.path.canonicalString();return t.collectionGroup!==null&&(r+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(r+=`, filters: [${t.filters.map(i=>TO(i)).join(", ")}]`),um(t.limit)||(r+=", limit: "+t.limit),t.orderBy.length>0&&(r+=`, orderBy: [${t.orderBy.map(i=>(function(s){return`${s.field.canonicalString()} (${s.dir})`})(i)).join(", ")}]`),t.startAt&&(r+=", startAt: ",r+=t.startAt.inclusive?"b:":"a:",r+=t.startAt.position.map(i=>Lc(i)).join(",")),t.endAt&&(r+=", endAt: ",r+=t.endAt.inclusive?"a:":"b:",r+=t.endAt.position.map(i=>Lc(i)).join(",")),`Target(${r})`})(si(n))}; limitType=${n.limitType})`}function gm(n,e){return e.isFoundDocument()&&(function(r,i){let o=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(o):ae.isDocumentKey(r.path)?r.path.isEqual(o):r.path.isImmediateParentOf(o)})(n,e)&&(function(r,i){for(let o of Ac(r))if(!o.field.isKeyField()&&i.data.field(o.field)===null)return!1;return!0})(n,e)&&(function(r,i){for(let o of r.filters)if(!o.matches(i))return!1;return!0})(n,e)&&(function(r,i){return!(r.startAt&&!(function(s,a,l){let u=_k(s,a,l);return s.inclusive?u<=0:u<0})(r.startAt,Ac(r),i)||r.endAt&&!(function(s,a,l){let u=_k(s,a,l);return s.inclusive?u>=0:u>0})(r.endAt,Ac(r),i))})(n,e)}function J$(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function MO(n){return(e,t)=>{let r=!1;for(let i of Ac(n)){let o=e7(i,e,t);if(o!==0)return o;r=r||i.field.isKeyField()}return 0}}function e7(n,e,t){let r=n.field.isKeyField()?ae.comparator(e.key,t.key):(function(o,s,a){let l=s.data.field(o),u=a.data.field(o);return l!==null&&u!==null?Fc(l,u):le(42886)})(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return le(19790,{direction:n.dir})}}var Wi=class{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){let t=this.mapKeyFn(e),r=this.inner[t];if(r!==void 0){for(let[i,o]of r)if(this.equalsFn(i,e))return o}}has(e){return this.get(e)!==void 0}set(e,t){let r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,t]],void this.innerSize++;for(let o=0;o<i.length;o++)if(this.equalsFn(i[o][0],e))return void(i[o]=[e,t]);i.push([e,t]),this.innerSize++}delete(e){let t=this.mapKeyFn(e),r=this.inner[t];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[t]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){zo(this.inner,(t,r)=>{for(let[i,o]of r)e(i,o)})}isEmpty(){return pO(this.inner)}size(){return this.innerSize}};var t7=new dt(ae.comparator);function Gi(){return t7}var PO=new dt(ae.comparator);function nd(...n){let e=PO;for(let t of n)e=e.insert(t.key,t);return e}function AO(n){let e=PO;return n.forEach((t,r)=>e=e.insert(t,r.overlayedDocument)),e}function qs(){return id()}function kO(){return id()}function id(){return new Wi(n=>n.toString(),(n,e)=>n.isEqual(e))}var n7=new dt(ae.comparator),r7=new Bt(ae.comparator);function Me(...n){let e=r7;for(let t of n)e=e.add(t);return e}var i7=new Bt(Te);function o7(){return i7}function tI(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:cd(e)?"-0":e}}function OO(n){return{integerValue:""+n}}function RO(n,e){return N$(e)?OO(e):tI(n,e)}var Vc=class{constructor(){this._=void 0}};function s7(n,e,t){return n instanceof Js?(function(i,o){let s={fields:{[mO]:{stringValue:gO},[_O]:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return o&&dm(o)&&(o=fm(o)),o&&(s.fields[vO]=o),{mapValue:s}})(t,e):n instanceof ea?FO(n,e):n instanceof ta?LO(n,e):(function(i,o){let s=NO(i,o),a=Ek(s)+Ek(i.Ee);return mE(s)&&mE(i.Ee)?OO(a):tI(i.serializer,a)})(n,e)}function a7(n,e,t){return n instanceof ea?FO(n,e):n instanceof ta?LO(n,e):t}function NO(n,e){return n instanceof na?(function(r){return mE(r)||(function(o){return!!o&&"doubleValue"in o})(r)})(e)?e:{integerValue:0}:null}var Js=class extends Vc{},ea=class extends Vc{constructor(e){super(),this.elements=e}};function FO(n,e){let t=VO(e);for(let r of n.elements)t.some(i=>ci(i,r))||t.push(r);return{arrayValue:{values:t}}}var ta=class extends Vc{constructor(e){super(),this.elements=e}};function LO(n,e){let t=VO(e);for(let r of n.elements)t=t.filter(i=>!ci(i,r));return{arrayValue:{values:t}}}var na=class extends Vc{constructor(e,t){super(),this.serializer=e,this.Ee=t}};function Ek(n){return nt(n.integerValue||n.doubleValue)}function VO(n){return ZC(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}var Vg=class{constructor(e,t){this.field=e,this.transform=t}};function c7(n,e){return n.field.isEqual(e.field)&&(function(r,i){return r instanceof ea&&i instanceof ea||r instanceof ta&&i instanceof ta?Rc(r.elements,i.elements,ci):r instanceof na&&i instanceof na?ci(r.Ee,i.Ee):r instanceof Js&&i instanceof Js})(n.transform,e.transform)}var xE=class{constructor(e,t){this.version=e,this.transformResults=t}},$n=class n{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new n}static exists(e){return new n(void 0,e)}static updateTime(e){return new n(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}};function Dg(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}var Uc=class{};function UO(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new jc(n.key,$n.none()):new ra(n.key,n.data,$n.none());{let t=n.data,r=jn.empty(),i=new Bt(Bn.comparator);for(let o of e.fields)if(!i.has(o)){let s=t.field(o);s===null&&o.length>1&&(o=o.popLast(),s=t.field(o)),s===null?r.delete(o):r.set(o,s),i=i.add(o)}return new li(n.key,r,new sr(i.toArray()),$n.none())}}function l7(n,e,t){n instanceof ra?(function(i,o,s){let a=i.value.clone(),l=Ik(i.fieldTransforms,o,s.transformResults);a.setAll(l),o.convertToFoundDocument(s.version,a).setHasCommittedMutations()})(n,e,t):n instanceof li?(function(i,o,s){if(!Dg(i.precondition,o))return void o.convertToUnknownDocument(s.version);let a=Ik(i.fieldTransforms,o,s.transformResults),l=o.data;l.setAll(jO(i)),l.setAll(a),o.convertToFoundDocument(s.version,l).setHasCommittedMutations()})(n,e,t):(function(i,o,s){o.convertToNoDocument(s.version).setHasCommittedMutations()})(0,e,t)}function od(n,e,t,r){return n instanceof ra?(function(o,s,a,l){if(!Dg(o.precondition,s))return a;let u=o.value.clone(),f=Sk(o.fieldTransforms,l,s);return u.setAll(f),s.convertToFoundDocument(s.version,u).setHasLocalMutations(),null})(n,e,t,r):n instanceof li?(function(o,s,a,l){if(!Dg(o.precondition,s))return a;let u=Sk(o.fieldTransforms,l,s),f=s.data;return f.setAll(jO(o)),f.setAll(u),s.convertToFoundDocument(s.version,f).setHasLocalMutations(),a===null?null:a.unionWith(o.fieldMask.fields).unionWith(o.fieldTransforms.map(m=>m.field))})(n,e,t,r):(function(o,s,a){return Dg(o.precondition,s)?(s.convertToNoDocument(s.version).setHasLocalMutations(),null):a})(n,e,t)}function u7(n,e){let t=null;for(let r of n.fieldTransforms){let i=e.data.field(r.field),o=NO(r.transform,i||null);o!=null&&(t===null&&(t=jn.empty()),t.set(r.field,o))}return t||null}function Ck(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!(function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&Rc(r,i,(o,s)=>c7(o,s))})(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}var ra=class extends Uc{constructor(e,t,r,i=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}},li=class extends Uc{constructor(e,t,r,i,o=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=i,this.fieldTransforms=o,this.type=1}getFieldMask(){return this.fieldMask}};function jO(n){let e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){let r=n.data.field(t);e.set(t,r)}}),e}function Ik(n,e,t){let r=new Map;Be(n.length===t.length,32656,{Ae:t.length,Re:n.length});for(let i=0;i<t.length;i++){let o=n[i],s=o.transform,a=e.data.field(o.field);r.set(o.field,a7(s,a,t[i]))}return r}function Sk(n,e,t){let r=new Map;for(let i of n){let o=i.transform,s=t.data.field(i.field);r.set(i.field,s7(o,s,e))}return r}var jc=class extends Uc{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}},ME=class extends Uc{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}};var PE=class{constructor(e,t,r,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,t){let r=t.mutationResults;for(let i=0;i<this.mutations.length;i++){let o=this.mutations[i];o.key.isEqual(e.key)&&l7(o,e,r[i])}}applyToLocalView(e,t){for(let r of this.baseMutations)r.key.isEqual(e.key)&&(t=od(r,e,t,this.localWriteTime));for(let r of this.mutations)r.key.isEqual(e.key)&&(t=od(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){let r=kO();return this.mutations.forEach(i=>{let o=e.get(i.key),s=o.overlayedDocument,a=this.applyToLocalView(s,o.mutatedFields);a=t.has(i.key)?null:a;let l=UO(s,a);l!==null&&r.set(i.key,l),s.isValidDocument()||s.convertToNoDocument(_e.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),Me())}isEqual(e){return this.batchId===e.batchId&&Rc(this.mutations,e.mutations,(t,r)=>Ck(t,r))&&Rc(this.baseMutations,e.baseMutations,(t,r)=>Ck(t,r))}},AE=class n{constructor(e,t,r,i){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=i}static from(e,t,r){Be(e.mutations.length===r.length,58842,{Ve:e.mutations.length,me:r.length});let i=(function(){return n7})(),o=e.mutations;for(let s=0;s<o.length;s++)i=i.insert(o[s].key,r[s].version);return new n(e,t,r,i)}};var kE=class{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}};var OE=class{constructor(e,t){this.count=e,this.unchangedNames=t}};var St,ke;function d7(n){switch(n){case j.OK:return le(64938);case j.CANCELLED:case j.UNKNOWN:case j.DEADLINE_EXCEEDED:case j.RESOURCE_EXHAUSTED:case j.INTERNAL:case j.UNAVAILABLE:case j.UNAUTHENTICATED:return!1;case j.INVALID_ARGUMENT:case j.NOT_FOUND:case j.ALREADY_EXISTS:case j.PERMISSION_DENIED:case j.FAILED_PRECONDITION:case j.ABORTED:case j.OUT_OF_RANGE:case j.UNIMPLEMENTED:case j.DATA_LOSS:return!0;default:return le(15467,{code:n})}}function BO(n){if(n===void 0)return $i("GRPC error has no .code"),j.UNKNOWN;switch(n){case St.OK:return j.OK;case St.CANCELLED:return j.CANCELLED;case St.UNKNOWN:return j.UNKNOWN;case St.DEADLINE_EXCEEDED:return j.DEADLINE_EXCEEDED;case St.RESOURCE_EXHAUSTED:return j.RESOURCE_EXHAUSTED;case St.INTERNAL:return j.INTERNAL;case St.UNAVAILABLE:return j.UNAVAILABLE;case St.UNAUTHENTICATED:return j.UNAUTHENTICATED;case St.INVALID_ARGUMENT:return j.INVALID_ARGUMENT;case St.NOT_FOUND:return j.NOT_FOUND;case St.ALREADY_EXISTS:return j.ALREADY_EXISTS;case St.PERMISSION_DENIED:return j.PERMISSION_DENIED;case St.FAILED_PRECONDITION:return j.FAILED_PRECONDITION;case St.ABORTED:return j.ABORTED;case St.OUT_OF_RANGE:return j.OUT_OF_RANGE;case St.UNIMPLEMENTED:return j.UNIMPLEMENTED;case St.DATA_LOSS:return j.DATA_LOSS;default:return le(39323,{code:n})}}(ke=St||(St={}))[ke.OK=0]="OK",ke[ke.CANCELLED=1]="CANCELLED",ke[ke.UNKNOWN=2]="UNKNOWN",ke[ke.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",ke[ke.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",ke[ke.NOT_FOUND=5]="NOT_FOUND",ke[ke.ALREADY_EXISTS=6]="ALREADY_EXISTS",ke[ke.PERMISSION_DENIED=7]="PERMISSION_DENIED",ke[ke.UNAUTHENTICATED=16]="UNAUTHENTICATED",ke[ke.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",ke[ke.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",ke[ke.ABORTED=10]="ABORTED",ke[ke.OUT_OF_RANGE=11]="OUT_OF_RANGE",ke[ke.UNIMPLEMENTED=12]="UNIMPLEMENTED",ke[ke.INTERNAL=13]="INTERNAL",ke[ke.UNAVAILABLE=14]="UNAVAILABLE",ke[ke.DATA_LOSS=15]="DATA_LOSS";var Tk=null;var f7=new ji([4294967295,4294967295],0);function Dk(n){let e=Zk().encode(n),t=new Kw;return t.update(e),new Uint8Array(t.digest())}function xk(n){let e=new DataView(n.buffer),t=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),o=e.getUint32(12,!0);return[new ji([t,r],0),new ji([i,o],0)]}var RE=class n{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new Ws(`Invalid padding: ${t}`);if(r<0)throw new Ws(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Ws(`Invalid hash count: ${r}`);if(e.length===0&&t!==0)throw new Ws(`Invalid padding when bitmap length is 0: ${t}`);this.fe=8*e.length-t,this.ge=ji.fromNumber(this.fe)}pe(e,t,r){let i=e.add(t.multiply(ji.fromNumber(r)));return i.compare(f7)===1&&(i=new ji([i.getBits(0),i.getBits(1)],0)),i.modulo(this.ge).toNumber()}ye(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.fe===0)return!1;let t=Dk(e),[r,i]=xk(t);for(let o=0;o<this.hashCount;o++){let s=this.pe(r,i,o);if(!this.ye(s))return!1}return!0}static create(e,t,r){let i=e%8==0?0:8-e%8,o=new Uint8Array(Math.ceil(e/8)),s=new n(o,i,t);return r.forEach(a=>s.insert(a)),s}insert(e){if(this.fe===0)return;let t=Dk(e),[r,i]=xk(t);for(let o=0;o<this.hashCount;o++){let s=this.pe(r,i,o);this.we(s)}}we(e){let t=Math.floor(e/8),r=e%8;this.bitmap[t]|=1<<r}},Ws=class extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}};var Ug=class n{constructor(e,t,r,i,o){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=o}static createSynthesizedRemoteEventForCurrentChange(e,t,r){let i=new Map;return i.set(e,dd.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new n(_e.min(),i,new dt(Te),Gi(),Me())}},dd=class n{constructor(e,t,r,i,o){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=o}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new n(r,t,Me(),Me(),Me())}};var kc=class{constructor(e,t,r,i){this.Se=e,this.removedTargetIds=t,this.key=r,this.be=i}},jg=class{constructor(e,t){this.targetId=e,this.De=t}},Bg=class{constructor(e,t,r=an.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=i}},$g=class{constructor(){this.ve=0,this.Ce=Mk(),this.Fe=an.EMPTY_BYTE_STRING,this.Me=!1,this.xe=!0}get current(){return this.Me}get resumeToken(){return this.Fe}get Oe(){return this.ve!==0}get Ne(){return this.xe}Be(e){e.approximateByteSize()>0&&(this.xe=!0,this.Fe=e)}Le(){let e=Me(),t=Me(),r=Me();return this.Ce.forEach((i,o)=>{switch(o){case 0:e=e.add(i);break;case 2:t=t.add(i);break;case 1:r=r.add(i);break;default:le(38017,{changeType:o})}}),new dd(this.Fe,this.Me,e,t,r)}ke(){this.xe=!1,this.Ce=Mk()}qe(e,t){this.xe=!0,this.Ce=this.Ce.insert(e,t)}Qe(e){this.xe=!0,this.Ce=this.Ce.remove(e)}$e(){this.ve+=1}Ue(){this.ve-=1,Be(this.ve>=0,3241,{ve:this.ve})}Ke(){this.xe=!0,this.Me=!0}},NE=class{constructor(e){this.We=e,this.Ge=new Map,this.ze=Gi(),this.je=Cg(),this.Je=Cg(),this.He=new dt(Te)}Ye(e){for(let t of e.Se)e.be&&e.be.isFoundDocument()?this.Ze(t,e.be):this.Xe(t,e.key,e.be);for(let t of e.removedTargetIds)this.Xe(t,e.key,e.be)}et(e){this.forEachTarget(e,t=>{let r=this.tt(t);switch(e.state){case 0:this.nt(t)&&r.Be(e.resumeToken);break;case 1:r.Ue(),r.Oe||r.ke(),r.Be(e.resumeToken);break;case 2:r.Ue(),r.Oe||this.removeTarget(t);break;case 3:this.nt(t)&&(r.Ke(),r.Be(e.resumeToken));break;case 4:this.nt(t)&&(this.rt(t),r.Be(e.resumeToken));break;default:le(56790,{state:e.state})}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Ge.forEach((r,i)=>{this.nt(i)&&t(i)})}it(e){let t=e.targetId,r=e.De.count,i=this.st(t);if(i){let o=i.target;if(TE(o))if(r===0){let s=new ae(o.path);this.Xe(t,s,Or.newNoDocument(s,_e.min()))}else Be(r===1,20013,{expectedCount:r});else{let s=this.ot(t);if(s!==r){let a=this._t(e),l=a?this.ut(a,e,s):1;if(l!==0){this.rt(t);let u=l===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.He=this.He.insert(t,u)}Tk?.ct((function(f,m,_,E,x){var F,L,W,oe,de,Fe;let Rt={localCacheCount:f,existenceFilterCount:m.count,databaseId:_.database,projectId:_.projectId},$e=m.unchangedNames;return $e&&(Rt.bloomFilter={applied:x===0,hashCount:(F=$e?.hashCount)!==null&&F!==void 0?F:0,bitmapLength:(oe=(W=(L=$e?.bits)===null||L===void 0?void 0:L.bitmap)===null||W===void 0?void 0:W.length)!==null&&oe!==void 0?oe:0,padding:(Fe=(de=$e?.bits)===null||de===void 0?void 0:de.padding)!==null&&Fe!==void 0?Fe:0,mightContain:P=>{var I;return(I=E?.mightContain(P))!==null&&I!==void 0&&I}}),Rt})(s,e.De,this.We.lt(),a,l))}}}}_t(e){let t=e.De.unchangedNames;if(!t||!t.bits)return null;let{bits:{bitmap:r="",padding:i=0},hashCount:o=0}=t,s,a;try{s=zi(r).toUint8Array()}catch(l){if(l instanceof kg)return Uo("Decoding the base64 bloom filter in existence filter failed ("+l.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw l}try{a=new RE(s,i,o)}catch(l){return Uo(l instanceof Ws?"BloomFilter error: ":"Applying bloom filter failed: ",l),null}return a.fe===0?null:a}ut(e,t,r){return t.De.count===r-this.ht(e,t.targetId)?0:2}ht(e,t){let r=this.We.getRemoteKeysForTarget(t),i=0;return r.forEach(o=>{let s=this.We.lt(),a=`projects/${s.projectId}/databases/${s.database}/documents/${o.path.canonicalString()}`;e.mightContain(a)||(this.Xe(t,o,null),i++)}),i}Pt(e){let t=new Map;this.Ge.forEach((o,s)=>{let a=this.st(s);if(a){if(o.current&&TE(a.target)){let l=new ae(a.target.path);this.Tt(l).has(s)||this.It(s,l)||this.Xe(s,l,Or.newNoDocument(l,e))}o.Ne&&(t.set(s,o.Le()),o.ke())}});let r=Me();this.Je.forEach((o,s)=>{let a=!0;s.forEachWhile(l=>{let u=this.st(l);return!u||u.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(r=r.add(o))}),this.ze.forEach((o,s)=>s.setReadTime(e));let i=new Ug(e,t,this.He,this.ze,r);return this.ze=Gi(),this.je=Cg(),this.Je=Cg(),this.He=new dt(Te),i}Ze(e,t){if(!this.nt(e))return;let r=this.It(e,t.key)?2:0;this.tt(e).qe(t.key,r),this.ze=this.ze.insert(t.key,t),this.je=this.je.insert(t.key,this.Tt(t.key).add(e)),this.Je=this.Je.insert(t.key,this.dt(t.key).add(e))}Xe(e,t,r){if(!this.nt(e))return;let i=this.tt(e);this.It(e,t)?i.qe(t,1):i.Qe(t),this.Je=this.Je.insert(t,this.dt(t).delete(e)),this.Je=this.Je.insert(t,this.dt(t).add(e)),r&&(this.ze=this.ze.insert(t,r))}removeTarget(e){this.Ge.delete(e)}ot(e){let t=this.tt(e).Le();return this.We.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}$e(e){this.tt(e).$e()}tt(e){let t=this.Ge.get(e);return t||(t=new $g,this.Ge.set(e,t)),t}dt(e){let t=this.Je.get(e);return t||(t=new Bt(Te),this.Je=this.Je.insert(e,t)),t}Tt(e){let t=this.je.get(e);return t||(t=new Bt(Te),this.je=this.je.insert(e,t)),t}nt(e){let t=this.st(e)!==null;return t||J("WatchChangeAggregator","Detected inactive target",e),t}st(e){let t=this.Ge.get(e);return t&&t.Oe?null:this.We.Et(e)}rt(e){this.Ge.set(e,new $g),this.We.getRemoteKeysForTarget(e).forEach(t=>{this.Xe(e,t,null)})}It(e,t){return this.We.getRemoteKeysForTarget(e).has(t)}};function Cg(){return new dt(ae.comparator)}function Mk(){return new dt(ae.comparator)}var h7={asc:"ASCENDING",desc:"DESCENDING"},p7={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},g7={and:"AND",or:"OR"},FE=class{constructor(e,t){this.databaseId=e,this.useProto3Json=t}};function LE(n,e){return n.useProto3Json||um(e)?e:{value:e}}function Hg(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function $O(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function m7(n,e){return Hg(n,e.toTimestamp())}function ai(n){return Be(!!n,49232),_e.fromTimestamp((function(t){let r=Hi(t);return new rt(r.seconds,r.nanos)})(n))}function nI(n,e){return VE(n,e).canonicalString()}function VE(n,e){let t=(function(i){return new Je(["projects",i.projectId,"databases",i.database])})(n).child("documents");return e===void 0?t:t.child(e)}function HO(n){let e=Je.fromString(n);return Be(KO(e),10190,{key:e.toString()}),e}function UE(n,e){return nI(n.databaseId,e.path)}function eE(n,e){let t=HO(e);if(t.get(1)!==n.databaseId.projectId)throw new G(j.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new G(j.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new ae(qO(t))}function zO(n,e){return nI(n.databaseId,e)}function v7(n){let e=HO(n);return e.length===4?Je.emptyPath():qO(e)}function jE(n){return new Je(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function qO(n){return Be(n.length>4&&n.get(4)==="documents",29091,{key:n.toString()}),n.popFirst(5)}function Pk(n,e,t){return{name:UE(n,e),fields:t.value.mapValue.fields}}function _7(n,e){let t;if("targetChange"in e){e.targetChange;let r=(function(u){return u==="NO_CHANGE"?0:u==="ADD"?1:u==="REMOVE"?2:u==="CURRENT"?3:u==="RESET"?4:le(39313,{state:u})})(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],o=(function(u,f){return u.useProto3Json?(Be(f===void 0||typeof f=="string",58123),an.fromBase64String(f||"")):(Be(f===void 0||f instanceof Buffer||f instanceof Uint8Array,16193),an.fromUint8Array(f||new Uint8Array))})(n,e.targetChange.resumeToken),s=e.targetChange.cause,a=s&&(function(u){let f=u.code===void 0?j.UNKNOWN:BO(u.code);return new G(f,u.message||"")})(s);t=new Bg(r,i,o,a||null)}else if("documentChange"in e){e.documentChange;let r=e.documentChange;r.document,r.document.name,r.document.updateTime;let i=eE(n,r.document.name),o=ai(r.document.updateTime),s=r.document.createTime?ai(r.document.createTime):_e.min(),a=new jn({mapValue:{fields:r.document.fields}}),l=Or.newFoundDocument(i,o,s,a),u=r.targetIds||[],f=r.removedTargetIds||[];t=new kc(u,f,l.key,l)}else if("documentDelete"in e){e.documentDelete;let r=e.documentDelete;r.document;let i=eE(n,r.document),o=r.readTime?ai(r.readTime):_e.min(),s=Or.newNoDocument(i,o),a=r.removedTargetIds||[];t=new kc([],a,s.key,s)}else if("documentRemove"in e){e.documentRemove;let r=e.documentRemove;r.document;let i=eE(n,r.document),o=r.removedTargetIds||[];t=new kc([],o,i,null)}else{if(!("filter"in e))return le(11601,{At:e});{e.filter;let r=e.filter;r.targetId;let{count:i=0,unchangedNames:o}=r,s=new OE(i,o),a=r.targetId;t=new jg(a,s)}}return t}function y7(n,e){let t;if(e instanceof ra)t={update:Pk(n,e.key,e.value)};else if(e instanceof jc)t={delete:UE(n,e.key)};else if(e instanceof li)t={update:Pk(n,e.key,e.data),updateMask:x7(e.fieldMask)};else{if(!(e instanceof ME))return le(16599,{Rt:e.type});t={verify:UE(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>(function(o,s){let a=s.transform;if(a instanceof Js)return{fieldPath:s.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof ea)return{fieldPath:s.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof ta)return{fieldPath:s.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof na)return{fieldPath:s.field.canonicalString(),increment:a.Ee};throw le(20930,{transform:s.transform})})(0,r))),e.precondition.isNone||(t.currentDocument=(function(i,o){return o.updateTime!==void 0?{updateTime:m7(i,o.updateTime)}:o.exists!==void 0?{exists:o.exists}:le(27497)})(n,e.precondition)),t}function b7(n,e){return n&&n.length>0?(Be(e!==void 0,14353),n.map(t=>(function(i,o){let s=i.updateTime?ai(i.updateTime):ai(o);return s.isEqual(_e.min())&&(s=ai(o)),new xE(s,i.transformResults||[])})(t,e))):[]}function w7(n,e){return{documents:[zO(n,e.path)]}}function E7(n,e){let t={structuredQuery:{}},r=e.path,i;e.collectionGroup!==null?(i=r,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),t.structuredQuery.from=[{collectionId:r.lastSegment()}]),t.parent=zO(n,i);let o=(function(u){if(u.length!==0)return GO(Rr.create(u,"and"))})(e.filters);o&&(t.structuredQuery.where=o);let s=(function(u){if(u.length!==0)return u.map(f=>(function(_){return{field:xc(_.field),direction:S7(_.dir)}})(f))})(e.orderBy);s&&(t.structuredQuery.orderBy=s);let a=LE(n,e.limit);return a!==null&&(t.structuredQuery.limit=a),e.startAt&&(t.structuredQuery.startAt=(function(u){return{before:u.inclusive,values:u.position}})(e.startAt)),e.endAt&&(t.structuredQuery.endAt=(function(u){return{before:!u.inclusive,values:u.position}})(e.endAt)),{Vt:t,parent:i}}function C7(n){let e=v7(n.parent),t=n.structuredQuery,r=t.from?t.from.length:0,i=null;if(r>0){Be(r===1,65062);let f=t.from[0];f.allDescendants?i=f.collectionId:e=e.child(f.collectionId)}let o=[];t.where&&(o=(function(m){let _=WO(m);return _ instanceof Rr&&IO(_)?_.getFilters():[_]})(t.where));let s=[];t.orderBy&&(s=(function(m){return m.map(_=>(function(x){return new Xs(Mc(x.field),(function(L){switch(L){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(x.direction))})(_))})(t.orderBy));let a=null;t.limit&&(a=(function(m){let _;return _=typeof m=="object"?m.value:m,um(_)?null:_})(t.limit));let l=null;t.startAt&&(l=(function(m){let _=!!m.before,E=m.values||[];return new Bo(E,_)})(t.startAt));let u=null;return t.endAt&&(u=(function(m){let _=!m.before,E=m.values||[];return new Bo(E,_)})(t.endAt)),Z$(e,i,s,o,a,"F",l,u)}function I7(n,e){let t=(function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return le(28987,{purpose:i})}})(e.purpose);return t==null?null:{"goog-listen-tags":t}}function WO(n){return n.unaryFilter!==void 0?(function(t){switch(t.unaryFilter.op){case"IS_NAN":let r=Mc(t.unaryFilter.field);return Dt.create(r,"==",{doubleValue:NaN});case"IS_NULL":let i=Mc(t.unaryFilter.field);return Dt.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":let o=Mc(t.unaryFilter.field);return Dt.create(o,"!=",{doubleValue:NaN});case"IS_NOT_NULL":let s=Mc(t.unaryFilter.field);return Dt.create(s,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return le(61313);default:return le(60726)}})(n):n.fieldFilter!==void 0?(function(t){return Dt.create(Mc(t.fieldFilter.field),(function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return le(58110);default:return le(50506)}})(t.fieldFilter.op),t.fieldFilter.value)})(n):n.compositeFilter!==void 0?(function(t){return Rr.create(t.compositeFilter.filters.map(r=>WO(r)),(function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return le(1026)}})(t.compositeFilter.op))})(n):le(30097,{filter:n})}function S7(n){return h7[n]}function T7(n){return p7[n]}function D7(n){return g7[n]}function xc(n){return{fieldPath:n.canonicalString()}}function Mc(n){return Bn.fromServerFormat(n.fieldPath)}function GO(n){return n instanceof Dt?(function(t){if(t.op==="=="){if(vk(t.value))return{unaryFilter:{field:xc(t.field),op:"IS_NAN"}};if(mk(t.value))return{unaryFilter:{field:xc(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(vk(t.value))return{unaryFilter:{field:xc(t.field),op:"IS_NOT_NAN"}};if(mk(t.value))return{unaryFilter:{field:xc(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:xc(t.field),op:T7(t.op),value:t.value}}})(n):n instanceof Rr?(function(t){let r=t.getFilters().map(i=>GO(i));return r.length===1?r[0]:{compositeFilter:{op:D7(t.op),filters:r}}})(n):le(54877,{filter:n})}function x7(n){let e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function KO(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}var fd=class n{constructor(e,t,r,i,o=_e.min(),s=_e.min(),a=an.EMPTY_BYTE_STRING,l=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=o,this.lastLimboFreeSnapshotVersion=s,this.resumeToken=a,this.expectedCount=l}withSequenceNumber(e){return new n(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}};var BE=class{constructor(e){this.gt=e}};function M7(n){let e=C7({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?Lg(e,e.limit,"L"):e}var zg=class{constructor(){}bt(e,t){this.Dt(e,t),t.vt()}Dt(e,t){if("nullValue"in e)this.Ct(t,5);else if("booleanValue"in e)this.Ct(t,10),t.Ft(e.booleanValue?1:0);else if("integerValue"in e)this.Ct(t,15),t.Ft(nt(e.integerValue));else if("doubleValue"in e){let r=nt(e.doubleValue);isNaN(r)?this.Ct(t,13):(this.Ct(t,15),cd(r)?t.Ft(0):t.Ft(r))}else if("timestampValue"in e){let r=e.timestampValue;this.Ct(t,20),typeof r=="string"&&(r=Hi(r)),t.Mt(`${r.seconds||""}`),t.Ft(r.nanos||0)}else if("stringValue"in e)this.xt(e.stringValue,t),this.Ot(t);else if("bytesValue"in e)this.Ct(t,30),t.Nt(zi(e.bytesValue)),this.Ot(t);else if("referenceValue"in e)this.Bt(e.referenceValue,t);else if("geoPointValue"in e){let r=e.geoPointValue;this.Ct(t,45),t.Ft(r.latitude||0),t.Ft(r.longitude||0)}else"mapValue"in e?wO(e)?this.Ct(t,Number.MAX_SAFE_INTEGER):bO(e)?this.Lt(e.mapValue,t):(this.kt(e.mapValue,t),this.Ot(t)):"arrayValue"in e?(this.qt(e.arrayValue,t),this.Ot(t)):le(19022,{Qt:e})}xt(e,t){this.Ct(t,25),this.$t(e,t)}$t(e,t){t.Mt(e)}kt(e,t){let r=e.fields||{};this.Ct(t,55);for(let i of Object.keys(r))this.xt(i,t),this.Dt(r[i],t)}Lt(e,t){var r,i;let o=e.fields||{};this.Ct(t,53);let s=Nc,a=((i=(r=o[s].arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.length)||0;this.Ct(t,15),t.Ft(nt(a)),this.xt(s,t),this.Dt(o[s],t)}qt(e,t){let r=e.values||[];this.Ct(t,50);for(let i of r)this.Dt(i,t)}Bt(e,t){this.Ct(t,37),ae.fromName(e).path.forEach(r=>{this.Ct(t,60),this.$t(r,t)})}Ct(e,t){e.Ft(t)}Ot(e){e.Ft(2)}};zg.Ut=new zg;var $E=class{constructor(){this.Dn=new HE}addToCollectionParentIndex(e,t){return this.Dn.add(t),z.resolve()}getCollectionParents(e,t){return z.resolve(this.Dn.getEntries(t))}addFieldIndex(e,t){return z.resolve()}deleteFieldIndex(e,t){return z.resolve()}deleteAllFieldIndexes(e){return z.resolve()}createTargetIndexes(e,t){return z.resolve()}getDocumentsMatchingTarget(e,t){return z.resolve(null)}getIndexType(e,t){return z.resolve(0)}getFieldIndexes(e,t){return z.resolve([])}getNextCollectionGroupToUpdate(e){return z.resolve(null)}getMinOffset(e,t){return z.resolve(Zs.min())}getMinOffsetFromCollectionGroup(e,t){return z.resolve(Zs.min())}updateCollectionGroup(e,t,r){return z.resolve()}updateIndexEntries(e,t){return z.resolve()}},HE=class{constructor(){this.index={}}add(e){let t=e.lastSegment(),r=e.popLast(),i=this.index[t]||new Bt(Je.comparator),o=!i.has(r);return this.index[t]=i.add(r),o}has(e){let t=e.lastSegment(),r=e.popLast(),i=this.index[t];return i&&i.has(r)}getEntries(e){return(this.index[e]||new Bt(Je.comparator)).toArray()}};var kge=new Uint8Array(0);var Ak={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},YO=41943040,or=class n{static withCacheSize(e){return new n(e,n.DEFAULT_COLLECTION_PERCENTILE,n.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}};or.DEFAULT_COLLECTION_PERCENTILE=10,or.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,or.DEFAULT=new or(YO,or.DEFAULT_COLLECTION_PERCENTILE,or.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),or.DISABLED=new or(-1,0,0);var hd=class n{constructor(e){this._r=e}next(){return this._r+=2,this._r}static ar(){return new n(0)}static ur(){return new n(-1)}};var kk="LruGarbageCollector",P7=1048576;function Ok([n,e],[t,r]){let i=Te(n,t);return i===0?Te(e,r):i}var zE=class{constructor(e){this.Tr=e,this.buffer=new Bt(Ok),this.Ir=0}dr(){return++this.Ir}Er(e){let t=[e,this.dr()];if(this.buffer.size<this.Tr)this.buffer=this.buffer.add(t);else{let r=this.buffer.last();Ok(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}},qE=class{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.Ar=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Rr(6e4)}stop(){this.Ar&&(this.Ar.cancel(),this.Ar=null)}get started(){return this.Ar!==null}Rr(e){J(kk,`Garbage collection scheduled in ${e}ms`),this.Ar=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,()=>b(this,null,function*(){this.Ar=null;try{yield this.localStore.collectGarbage(this.garbageCollector)}catch(t){Wc(t)?J(kk,"Ignoring IndexedDB error during garbage collection: ",t):yield qc(t)}yield this.Rr(3e5)}))}},WE=class{constructor(e,t){this.Vr=e,this.params=t}calculateTargetCount(e,t){return this.Vr.mr(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(t===0)return z.resolve(GC.ue);let r=new zE(t);return this.Vr.forEachTarget(e,i=>r.Er(i.sequenceNumber)).next(()=>this.Vr.gr(e,i=>r.Er(i))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.Vr.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.Vr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(J("LruGarbageCollector","Garbage collection skipped; disabled"),z.resolve(Ak)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(J("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Ak):this.pr(e,t))}getCacheSize(e){return this.Vr.getCacheSize(e)}pr(e,t){let r,i,o,s,a,l,u,f=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(m=>(m>this.params.maximumSequenceNumbersToCollect?(J("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${m}`),i=this.params.maximumSequenceNumbersToCollect):i=m,s=Date.now(),this.nthSequenceNumber(e,i))).next(m=>(r=m,a=Date.now(),this.removeTargets(e,r,t))).next(m=>(o=m,l=Date.now(),this.removeOrphanedDocuments(e,r))).next(m=>(u=Date.now(),Tc()<=De.DEBUG&&J("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${s-f}ms
	Determined least recently used ${i} in `+(a-s)+`ms
	Removed ${o} targets in `+(l-a)+`ms
	Removed ${m} documents in `+(u-l)+`ms
Total Duration: ${u-f}ms`),z.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:o,documentsRemoved:m})))}};function A7(n,e){return new WE(n,e)}var GE=class{constructor(){this.changes=new Wi(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Or.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();let r=this.changes.get(t);return r!==void 0?z.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}};var KE=class{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}};var YE=class{constructor(e,t,r,i){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,t))).next(i=>(r!==null&&od(r.mutation,i,sr.empty(),rt.now()),i))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.getLocalViewOfDocuments(e,r,Me()).next(()=>r))}getLocalViewOfDocuments(e,t,r=Me()){let i=qs();return this.populateOverlays(e,i,t).next(()=>this.computeViews(e,t,i,r).next(o=>{let s=nd();return o.forEach((a,l)=>{s=s.insert(a,l.overlayedDocument)}),s}))}getOverlayedDocuments(e,t){let r=qs();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,Me()))}populateOverlays(e,t,r){let i=[];return r.forEach(o=>{t.has(o)||i.push(o)}),this.documentOverlayCache.getOverlays(e,i).next(o=>{o.forEach((s,a)=>{t.set(s,a)})})}computeViews(e,t,r,i){let o=Gi(),s=id(),a=(function(){return id()})();return t.forEach((l,u)=>{let f=r.get(u.key);i.has(u.key)&&(f===void 0||f.mutation instanceof li)?o=o.insert(u.key,u):f!==void 0?(s.set(u.key,f.mutation.getFieldMask()),od(f.mutation,u,f.mutation.getFieldMask(),rt.now())):s.set(u.key,sr.empty())}),this.recalculateAndSaveOverlays(e,o).next(l=>(l.forEach((u,f)=>s.set(u,f)),t.forEach((u,f)=>{var m;return a.set(u,new KE(f,(m=s.get(u))!==null&&m!==void 0?m:null))}),a))}recalculateAndSaveOverlays(e,t){let r=id(),i=new dt((s,a)=>s-a),o=Me();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(s=>{for(let a of s)a.keys().forEach(l=>{let u=t.get(l);if(u===null)return;let f=r.get(l)||sr.empty();f=a.applyToLocalView(u,f),r.set(l,f);let m=(i.get(a.batchId)||Me()).add(l);i=i.insert(a.batchId,m)})}).next(()=>{let s=[],a=i.getReverseIterator();for(;a.hasNext();){let l=a.getNext(),u=l.key,f=l.value,m=kO();f.forEach(_=>{if(!o.has(_)){let E=UO(t.get(_),r.get(_));E!==null&&m.set(_,E),o=o.add(_)}}),s.push(this.documentOverlayCache.saveOverlays(e,u,m))}return z.waitFor(s)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,t,r,i){return(function(s){return ae.isDocumentKey(s.path)&&s.collectionGroup===null&&s.filters.length===0})(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):eI(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r,i):this.getDocumentsMatchingCollectionQuery(e,t,r,i)}getNextDocuments(e,t,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,i).next(o=>{let s=i-o.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,i-o.size):z.resolve(qs()),a=ad,l=o;return s.next(u=>z.forEach(u,(f,m)=>(a<m.largestBatchId&&(a=m.largestBatchId),o.get(f)?z.resolve():this.remoteDocumentCache.getEntry(e,f).next(_=>{l=l.insert(f,_)}))).next(()=>this.populateOverlays(e,u,o)).next(()=>this.computeViews(e,l,u,Me())).next(f=>({batchId:a,changes:AO(f)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new ae(t)).next(r=>{let i=nd();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,t,r,i){let o=t.collectionGroup,s=nd();return this.indexManager.getCollectionParents(e,o).next(a=>z.forEach(a,l=>{let u=(function(m,_){return new qi(_,null,m.explicitOrderBy.slice(),m.filters.slice(),m.limit,m.limitType,m.startAt,m.endAt)})(t,l.child(o));return this.getDocumentsMatchingCollectionQuery(e,u,r,i).next(f=>{f.forEach((m,_)=>{s=s.insert(m,_)})})}).next(()=>s))}getDocumentsMatchingCollectionQuery(e,t,r,i){let o;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next(s=>(o=s,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,o,i))).next(s=>{o.forEach((l,u)=>{let f=u.getKey();s.get(f)===null&&(s=s.insert(f,Or.newInvalidDocument(f)))});let a=nd();return s.forEach((l,u)=>{let f=o.get(l);f!==void 0&&od(f.mutation,u,sr.empty(),rt.now()),gm(t,u)&&(a=a.insert(l,u))}),a})}};var QE=class{constructor(e){this.serializer=e,this.Br=new Map,this.Lr=new Map}getBundleMetadata(e,t){return z.resolve(this.Br.get(t))}saveBundleMetadata(e,t){return this.Br.set(t.id,(function(i){return{id:i.id,version:i.version,createTime:ai(i.createTime)}})(t)),z.resolve()}getNamedQuery(e,t){return z.resolve(this.Lr.get(t))}saveNamedQuery(e,t){return this.Lr.set(t.name,(function(i){return{name:i.name,query:M7(i.bundledQuery),readTime:ai(i.readTime)}})(t)),z.resolve()}};var ZE=class{constructor(){this.overlays=new dt(ae.comparator),this.kr=new Map}getOverlay(e,t){return z.resolve(this.overlays.get(t))}getOverlays(e,t){let r=qs();return z.forEach(t,i=>this.getOverlay(e,i).next(o=>{o!==null&&r.set(i,o)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((i,o)=>{this.wt(e,t,o)}),z.resolve()}removeOverlaysForBatchId(e,t,r){let i=this.kr.get(r);return i!==void 0&&(i.forEach(o=>this.overlays=this.overlays.remove(o)),this.kr.delete(r)),z.resolve()}getOverlaysForCollection(e,t,r){let i=qs(),o=t.length+1,s=new ae(t.child("")),a=this.overlays.getIteratorFrom(s);for(;a.hasNext();){let l=a.getNext().value,u=l.getKey();if(!t.isPrefixOf(u.path))break;u.path.length===o&&l.largestBatchId>r&&i.set(l.getKey(),l)}return z.resolve(i)}getOverlaysForCollectionGroup(e,t,r,i){let o=new dt((u,f)=>u-f),s=this.overlays.getIterator();for(;s.hasNext();){let u=s.getNext().value;if(u.getKey().getCollectionGroup()===t&&u.largestBatchId>r){let f=o.get(u.largestBatchId);f===null&&(f=qs(),o=o.insert(u.largestBatchId,f)),f.set(u.getKey(),u)}}let a=qs(),l=o.getIterator();for(;l.hasNext()&&(l.getNext().value.forEach((u,f)=>a.set(u,f)),!(a.size()>=i)););return z.resolve(a)}wt(e,t,r){let i=this.overlays.get(r.key);if(i!==null){let s=this.kr.get(i.largestBatchId).delete(r.key);this.kr.set(i.largestBatchId,s)}this.overlays=this.overlays.insert(r.key,new kE(t,r));let o=this.kr.get(t);o===void 0&&(o=Me(),this.kr.set(t,o)),this.kr.set(t,o.add(r.key))}};var XE=class{constructor(){this.sessionToken=an.EMPTY_BYTE_STRING}getSessionToken(e){return z.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,z.resolve()}};var pd=class{constructor(){this.qr=new Bt(Tt.Qr),this.$r=new Bt(Tt.Ur)}isEmpty(){return this.qr.isEmpty()}addReference(e,t){let r=new Tt(e,t);this.qr=this.qr.add(r),this.$r=this.$r.add(r)}Kr(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.Wr(new Tt(e,t))}Gr(e,t){e.forEach(r=>this.removeReference(r,t))}zr(e){let t=new ae(new Je([])),r=new Tt(t,e),i=new Tt(t,e+1),o=[];return this.$r.forEachInRange([r,i],s=>{this.Wr(s),o.push(s.key)}),o}jr(){this.qr.forEach(e=>this.Wr(e))}Wr(e){this.qr=this.qr.delete(e),this.$r=this.$r.delete(e)}Jr(e){let t=new ae(new Je([])),r=new Tt(t,e),i=new Tt(t,e+1),o=Me();return this.$r.forEachInRange([r,i],s=>{o=o.add(s.key)}),o}containsKey(e){let t=new Tt(e,0),r=this.qr.firstAfterOrEqual(t);return r!==null&&e.isEqual(r.key)}},Tt=class{constructor(e,t){this.key=e,this.Hr=t}static Qr(e,t){return ae.comparator(e.key,t.key)||Te(e.Hr,t.Hr)}static Ur(e,t){return Te(e.Hr,t.Hr)||ae.comparator(e.key,t.key)}};var JE=class{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.er=1,this.Yr=new Bt(Tt.Qr)}checkEmpty(e){return z.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,r,i){let o=this.er;this.er++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];let s=new PE(o,t,r,i);this.mutationQueue.push(s);for(let a of i)this.Yr=this.Yr.add(new Tt(a.key,o)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return z.resolve(s)}lookupMutationBatch(e,t){return z.resolve(this.Zr(t))}getNextMutationBatchAfterBatchId(e,t){let r=t+1,i=this.Xr(r),o=i<0?0:i;return z.resolve(this.mutationQueue.length>o?this.mutationQueue[o]:null)}getHighestUnacknowledgedBatchId(){return z.resolve(this.mutationQueue.length===0?KC:this.er-1)}getAllMutationBatches(e){return z.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){let r=new Tt(t,0),i=new Tt(t,Number.POSITIVE_INFINITY),o=[];return this.Yr.forEachInRange([r,i],s=>{let a=this.Zr(s.Hr);o.push(a)}),z.resolve(o)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new Bt(Te);return t.forEach(i=>{let o=new Tt(i,0),s=new Tt(i,Number.POSITIVE_INFINITY);this.Yr.forEachInRange([o,s],a=>{r=r.add(a.Hr)})}),z.resolve(this.ei(r))}getAllMutationBatchesAffectingQuery(e,t){let r=t.path,i=r.length+1,o=r;ae.isDocumentKey(o)||(o=o.child(""));let s=new Tt(new ae(o),0),a=new Bt(Te);return this.Yr.forEachWhile(l=>{let u=l.key.path;return!!r.isPrefixOf(u)&&(u.length===i&&(a=a.add(l.Hr)),!0)},s),z.resolve(this.ei(a))}ei(e){let t=[];return e.forEach(r=>{let i=this.Zr(r);i!==null&&t.push(i)}),t}removeMutationBatch(e,t){Be(this.ti(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Yr;return z.forEach(t.mutations,i=>{let o=new Tt(i.key,t.batchId);return r=r.delete(o),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.Yr=r})}rr(e){}containsKey(e,t){let r=new Tt(t,0),i=this.Yr.firstAfterOrEqual(r);return z.resolve(t.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,z.resolve()}ti(e,t){return this.Xr(e)}Xr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Zr(e){let t=this.Xr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}};var eC=class{constructor(e){this.ni=e,this.docs=(function(){return new dt(ae.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){let r=t.key,i=this.docs.get(r),o=i?i.size:0,s=this.ni(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:s}),this.size+=s-o,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){let t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){let r=this.docs.get(t);return z.resolve(r?r.document.mutableCopy():Or.newInvalidDocument(t))}getEntries(e,t){let r=Gi();return t.forEach(i=>{let o=this.docs.get(i);r=r.insert(i,o?o.document.mutableCopy():Or.newInvalidDocument(i))}),z.resolve(r)}getDocumentsMatchingQuery(e,t,r,i){let o=Gi(),s=t.path,a=new ae(s.child("__id-9223372036854775808__")),l=this.docs.getIteratorFrom(a);for(;l.hasNext();){let{key:u,value:{document:f}}=l.getNext();if(!s.isPrefixOf(u.path))break;u.path.length>s.length+1||k$(A$(f),r)<=0||(i.has(f.key)||gm(t,f))&&(o=o.insert(f.key,f.mutableCopy()))}return z.resolve(o)}getAllFromCollectionGroup(e,t,r,i){le(9500)}ri(e,t){return z.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new tC(this)}getSize(e){return z.resolve(this.size)}},tC=class extends GE{constructor(e){super(),this.Or=e}applyChanges(e){let t=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?t.push(this.Or.addEntry(e,i)):this.Or.removeEntry(r)}),z.waitFor(t)}getFromCache(e,t){return this.Or.getEntry(e,t)}getAllFromCache(e,t){return this.Or.getEntries(e,t)}};var nC=class{constructor(e){this.persistence=e,this.ii=new Wi(t=>XC(t),JC),this.lastRemoteSnapshotVersion=_e.min(),this.highestTargetId=0,this.si=0,this.oi=new pd,this.targetCount=0,this._i=hd.ar()}forEachTarget(e,t){return this.ii.forEach((r,i)=>t(i)),z.resolve()}getLastRemoteSnapshotVersion(e){return z.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return z.resolve(this.si)}allocateTargetId(e){return this.highestTargetId=this._i.next(),z.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.si&&(this.si=t),z.resolve()}hr(e){this.ii.set(e.target,e);let t=e.targetId;t>this.highestTargetId&&(this._i=new hd(t),this.highestTargetId=t),e.sequenceNumber>this.si&&(this.si=e.sequenceNumber)}addTargetData(e,t){return this.hr(t),this.targetCount+=1,z.resolve()}updateTargetData(e,t){return this.hr(t),z.resolve()}removeTargetData(e,t){return this.ii.delete(t.target),this.oi.zr(t.targetId),this.targetCount-=1,z.resolve()}removeTargets(e,t,r){let i=0,o=[];return this.ii.forEach((s,a)=>{a.sequenceNumber<=t&&r.get(a.targetId)===null&&(this.ii.delete(s),o.push(this.removeMatchingKeysForTargetId(e,a.targetId)),i++)}),z.waitFor(o).next(()=>i)}getTargetCount(e){return z.resolve(this.targetCount)}getTargetData(e,t){let r=this.ii.get(t)||null;return z.resolve(r)}addMatchingKeys(e,t,r){return this.oi.Kr(t,r),z.resolve()}removeMatchingKeys(e,t,r){this.oi.Gr(t,r);let i=this.persistence.referenceDelegate,o=[];return i&&t.forEach(s=>{o.push(i.markPotentiallyOrphaned(e,s))}),z.waitFor(o)}removeMatchingKeysForTargetId(e,t){return this.oi.zr(t),z.resolve()}getMatchingKeysForTargetId(e,t){let r=this.oi.Jr(t);return z.resolve(r)}containsKey(e,t){return z.resolve(this.oi.containsKey(t))}};var qg=class{constructor(e,t){this.ai={},this.overlays={},this.ui=new GC(0),this.ci=!1,this.ci=!0,this.li=new XE,this.referenceDelegate=e(this),this.hi=new nC(this),this.indexManager=new $E,this.remoteDocumentCache=(function(i){return new eC(i)})(r=>this.referenceDelegate.Pi(r)),this.serializer=new BE(t),this.Ti=new QE(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.ci=!1,Promise.resolve()}get started(){return this.ci}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new ZE,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.ai[e.toKey()];return r||(r=new JE(t,this.referenceDelegate),this.ai[e.toKey()]=r),r}getGlobalsCache(){return this.li}getTargetCache(){return this.hi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ti}runTransaction(e,t,r){J("MemoryPersistence","Starting transaction:",e);let i=new rC(this.ui.next());return this.referenceDelegate.Ii(),r(i).next(o=>this.referenceDelegate.di(i).next(()=>o)).toPromise().then(o=>(i.raiseOnCommittedEvent(),o))}Ei(e,t){return z.or(Object.values(this.ai).map(r=>()=>r.containsKey(e,t)))}},rC=class extends hE{constructor(e){super(),this.currentSequenceNumber=e}},iC=class n{constructor(e){this.persistence=e,this.Ai=new pd,this.Ri=null}static Vi(e){return new n(e)}get mi(){if(this.Ri)return this.Ri;throw le(60996)}addReference(e,t,r){return this.Ai.addReference(r,t),this.mi.delete(r.toString()),z.resolve()}removeReference(e,t,r){return this.Ai.removeReference(r,t),this.mi.add(r.toString()),z.resolve()}markPotentiallyOrphaned(e,t){return this.mi.add(t.toString()),z.resolve()}removeTarget(e,t){this.Ai.zr(t.targetId).forEach(i=>this.mi.add(i.toString()));let r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(i=>{i.forEach(o=>this.mi.add(o.toString()))}).next(()=>r.removeTargetData(e,t))}Ii(){this.Ri=new Set}di(e){let t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return z.forEach(this.mi,r=>{let i=ae.fromPath(r);return this.fi(e,i).next(o=>{o||t.removeEntry(i,_e.min())})}).next(()=>(this.Ri=null,t.apply(e)))}updateLimboDocument(e,t){return this.fi(e,t).next(r=>{r?this.mi.delete(t.toString()):this.mi.add(t.toString())})}Pi(e){return 0}fi(e,t){return z.or([()=>z.resolve(this.Ai.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ei(e,t)])}},Wg=class n{constructor(e,t){this.persistence=e,this.gi=new Wi(r=>F$(r.path),(r,i)=>r.isEqual(i)),this.garbageCollector=A7(this,t)}static Vi(e,t){return new n(e,t)}Ii(){}di(e){return z.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}mr(e){let t=this.yr(e);return this.persistence.getTargetCache().getTargetCount(e).next(r=>t.next(i=>r+i))}yr(e){let t=0;return this.gr(e,r=>{t++}).next(()=>t)}gr(e,t){return z.forEach(this.gi,(r,i)=>this.Sr(e,r,i).next(o=>o?z.resolve():t(i)))}removeTargets(e,t,r){return this.persistence.getTargetCache().removeTargets(e,t,r)}removeOrphanedDocuments(e,t){let r=0,i=this.persistence.getRemoteDocumentCache(),o=i.newChangeBuffer();return i.ri(e,s=>this.Sr(e,s,t).next(a=>{a||(r++,o.removeEntry(s,_e.min()))})).next(()=>o.apply(e)).next(()=>r)}markPotentiallyOrphaned(e,t){return this.gi.set(t,e.currentSequenceNumber),z.resolve()}removeTarget(e,t){let r=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,t,r){return this.gi.set(r,e.currentSequenceNumber),z.resolve()}removeReference(e,t,r){return this.gi.set(r,e.currentSequenceNumber),z.resolve()}updateLimboDocument(e,t){return this.gi.set(t,e.currentSequenceNumber),z.resolve()}Pi(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=Sg(e.data.value)),t}Sr(e,t,r){return z.or([()=>this.persistence.Ei(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{let i=this.gi.get(t);return z.resolve(i!==void 0&&i>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}};var oC=class n{constructor(e,t,r,i){this.targetId=e,this.fromCache=t,this.Is=r,this.ds=i}static Es(e,t){let r=Me(),i=Me();for(let o of t.docChanges)switch(o.type){case 0:r=r.add(o.doc.key);break;case 1:i=i.add(o.doc.key)}return new n(e,t.fromCache,r,i)}};var sC=class{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}};var aC=class{constructor(){this.As=!1,this.Rs=!1,this.Vs=100,this.fs=(function(){return kP()?8:R$(Ut())>0?6:4})()}initialize(e,t){this.gs=e,this.indexManager=t,this.As=!0}getDocumentsMatchingQuery(e,t,r,i){let o={result:null};return this.ps(e,t).next(s=>{o.result=s}).next(()=>{if(!o.result)return this.ys(e,t,i,r).next(s=>{o.result=s})}).next(()=>{if(o.result)return;let s=new sC;return this.ws(e,t,s).next(a=>{if(o.result=a,this.Rs)return this.Ss(e,t,s,a.size)})}).next(()=>o.result)}Ss(e,t,r,i){return r.documentReadCount<this.Vs?(Tc()<=De.DEBUG&&J("QueryEngine","SDK will not create cache indexes for query:",Dc(t),"since it only creates cache indexes for collection contains","more than or equal to",this.Vs,"documents"),z.resolve()):(Tc()<=De.DEBUG&&J("QueryEngine","Query:",Dc(t),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.fs*i?(Tc()<=De.DEBUG&&J("QueryEngine","The SDK decides to create cache indexes for query:",Dc(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,si(t))):z.resolve())}ps(e,t){if(wk(t))return z.resolve(null);let r=si(t);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(t.limit!==null&&i===1&&(t=Lg(t,null,"F"),r=si(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next(o=>{let s=Me(...o);return this.gs.getDocuments(e,s).next(a=>this.indexManager.getMinOffset(e,r).next(l=>{let u=this.bs(t,a);return this.Ds(t,u,s,l.readTime)?this.ps(e,Lg(t,null,"F")):this.vs(e,u,t,l)}))})))}ys(e,t,r,i){return wk(t)||i.isEqual(_e.min())?z.resolve(null):this.gs.getDocuments(e,r).next(o=>{let s=this.bs(t,o);return this.Ds(t,s,r,i)?z.resolve(null):(Tc()<=De.DEBUG&&J("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),Dc(t)),this.vs(e,s,t,P$(i,ad)).next(a=>a))})}bs(e,t){let r=new Bt(MO(e));return t.forEach((i,o)=>{gm(e,o)&&(r=r.add(o))}),r}Ds(e,t,r,i){if(e.limit===null)return!1;if(r.size!==t.size)return!0;let o=e.limitType==="F"?t.last():t.first();return!!o&&(o.hasPendingWrites||o.version.compareTo(i)>0)}ws(e,t,r){return Tc()<=De.DEBUG&&J("QueryEngine","Using full collection scan to execute query:",Dc(t)),this.gs.getDocumentsMatchingQuery(e,t,Zs.min(),r)}vs(e,t,r,i){return this.gs.getDocumentsMatchingQuery(e,r,i).next(o=>(t.forEach(s=>{o=o.insert(s.key,s)}),o))}};var rI="LocalStore",k7=3e8,cC=class{constructor(e,t,r,i){this.persistence=e,this.Cs=t,this.serializer=i,this.Fs=new dt(Te),this.Ms=new Wi(o=>XC(o),JC),this.xs=new Map,this.Os=e.getRemoteDocumentCache(),this.hi=e.getTargetCache(),this.Ti=e.getBundleCache(),this.Ns(r)}Ns(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new YE(this.Os,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Os.setIndexManager(this.indexManager),this.Cs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.Fs))}};function O7(n,e,t,r){return new cC(n,e,t,r)}function QO(n,e){return b(this,null,function*(){let t=me(n);return yield t.persistence.runTransaction("Handle user change","readonly",r=>{let i;return t.mutationQueue.getAllMutationBatches(r).next(o=>(i=o,t.Ns(e),t.mutationQueue.getAllMutationBatches(r))).next(o=>{let s=[],a=[],l=Me();for(let u of i){s.push(u.batchId);for(let f of u.mutations)l=l.add(f.key)}for(let u of o){a.push(u.batchId);for(let f of u.mutations)l=l.add(f.key)}return t.localDocuments.getDocuments(r,l).next(u=>({Bs:u,removedBatchIds:s,addedBatchIds:a}))})})})}function R7(n,e){let t=me(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{let i=e.batch.keys(),o=t.Os.newChangeBuffer({trackRemovals:!0});return(function(a,l,u,f){let m=u.batch,_=m.keys(),E=z.resolve();return _.forEach(x=>{E=E.next(()=>f.getEntry(l,x)).next(F=>{let L=u.docVersions.get(x);Be(L!==null,48541),F.version.compareTo(L)<0&&(m.applyToRemoteDocument(F,u),F.isValidDocument()&&(F.setReadTime(u.commitVersion),f.addEntry(F)))})}),E.next(()=>a.mutationQueue.removeMutationBatch(l,m))})(t,r,e,o).next(()=>o.apply(r)).next(()=>t.mutationQueue.performConsistencyCheck(r)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,(function(a){let l=Me();for(let u=0;u<a.mutationResults.length;++u)a.mutationResults[u].transformResults.length>0&&(l=l.add(a.batch.mutations[u].key));return l})(e))).next(()=>t.localDocuments.getDocuments(r,i))})}function ZO(n){let e=me(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.hi.getLastRemoteSnapshotVersion(t))}function N7(n,e){let t=me(n),r=e.snapshotVersion,i=t.Fs;return t.persistence.runTransaction("Apply remote event","readwrite-primary",o=>{let s=t.Os.newChangeBuffer({trackRemovals:!0});i=t.Fs;let a=[];e.targetChanges.forEach((f,m)=>{let _=i.get(m);if(!_)return;a.push(t.hi.removeMatchingKeys(o,f.removedDocuments,m).next(()=>t.hi.addMatchingKeys(o,f.addedDocuments,m)));let E=_.withSequenceNumber(o.currentSequenceNumber);e.targetMismatches.get(m)!==null?E=E.withResumeToken(an.EMPTY_BYTE_STRING,_e.min()).withLastLimboFreeSnapshotVersion(_e.min()):f.resumeToken.approximateByteSize()>0&&(E=E.withResumeToken(f.resumeToken,r)),i=i.insert(m,E),(function(F,L,W){return F.resumeToken.approximateByteSize()===0||L.snapshotVersion.toMicroseconds()-F.snapshotVersion.toMicroseconds()>=k7?!0:W.addedDocuments.size+W.modifiedDocuments.size+W.removedDocuments.size>0})(_,E,f)&&a.push(t.hi.updateTargetData(o,E))});let l=Gi(),u=Me();if(e.documentUpdates.forEach(f=>{e.resolvedLimboDocuments.has(f)&&a.push(t.persistence.referenceDelegate.updateLimboDocument(o,f))}),a.push(F7(o,s,e.documentUpdates).next(f=>{l=f.Ls,u=f.ks})),!r.isEqual(_e.min())){let f=t.hi.getLastRemoteSnapshotVersion(o).next(m=>t.hi.setTargetsMetadata(o,o.currentSequenceNumber,r));a.push(f)}return z.waitFor(a).next(()=>s.apply(o)).next(()=>t.localDocuments.getLocalViewOfDocuments(o,l,u)).next(()=>l)}).then(o=>(t.Fs=i,o))}function F7(n,e,t){let r=Me(),i=Me();return t.forEach(o=>r=r.add(o)),e.getEntries(n,r).next(o=>{let s=Gi();return t.forEach((a,l)=>{let u=o.get(a);l.isFoundDocument()!==u.isFoundDocument()&&(i=i.add(a)),l.isNoDocument()&&l.version.isEqual(_e.min())?(e.removeEntry(a,l.readTime),s=s.insert(a,l)):!u.isValidDocument()||l.version.compareTo(u.version)>0||l.version.compareTo(u.version)===0&&u.hasPendingWrites?(e.addEntry(l),s=s.insert(a,l)):J(rI,"Ignoring outdated watch update for ",a,". Current version:",u.version," Watch version:",l.version)}),{Ls:s,ks:i}})}function L7(n,e){let t=me(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=KC),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function V7(n,e){let t=me(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return t.hi.getTargetData(r,e).next(o=>o?(i=o,z.resolve(i)):t.hi.allocateTargetId(r).next(s=>(i=new fd(e,s,"TargetPurposeListen",r.currentSequenceNumber),t.hi.addTargetData(r,i).next(()=>i))))}).then(r=>{let i=t.Fs.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(t.Fs=t.Fs.insert(r.targetId,r),t.Ms.set(e,r.targetId)),r})}function lC(n,e,t){return b(this,null,function*(){let r=me(n),i=r.Fs.get(e),o=t?"readwrite":"readwrite-primary";try{t||(yield r.persistence.runTransaction("Release target",o,s=>r.persistence.referenceDelegate.removeTarget(s,i)))}catch(s){if(!Wc(s))throw s;J(rI,`Failed to update sequence numbers for target ${e}: ${s}`)}r.Fs=r.Fs.remove(e),r.Ms.delete(i.target)})}function Rk(n,e,t){let r=me(n),i=_e.min(),o=Me();return r.persistence.runTransaction("Execute query","readwrite",s=>(function(l,u,f){let m=me(l),_=m.Ms.get(f);return _!==void 0?z.resolve(m.Fs.get(_)):m.hi.getTargetData(u,f)})(r,s,si(e)).next(a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,r.hi.getMatchingKeysForTargetId(s,a.targetId).next(l=>{o=l})}).next(()=>r.Cs.getDocumentsMatchingQuery(s,e,t?i:_e.min(),t?o:Me())).next(a=>(U7(r,J$(e),a),{documents:a,qs:o})))}function U7(n,e,t){let r=n.xs.get(e)||_e.min();t.forEach((i,o)=>{o.readTime.compareTo(r)>0&&(r=o.readTime)}),n.xs.set(e,r)}var Gg=class{constructor(){this.activeTargetIds=o7()}Gs(e){this.activeTargetIds=this.activeTargetIds.add(e)}zs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Ws(){let e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}};var uC=class{constructor(){this.Fo=new Gg,this.Mo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e,t=!0){return t&&this.Fo.Gs(e),this.Mo[e]||"not-current"}updateQueryState(e,t,r){this.Mo[e]=t}removeLocalQueryTarget(e){this.Fo.zs(e)}isLocalQueryTarget(e){return this.Fo.activeTargetIds.has(e)}clearQueryState(e){delete this.Mo[e]}getAllActiveQueryTargets(){return this.Fo.activeTargetIds}isActiveQueryTarget(e){return this.Fo.activeTargetIds.has(e)}start(){return this.Fo=new Gg,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}};var dC=class{xo(e){}shutdown(){}};var Nk="ConnectivityMonitor",Kg=class{constructor(){this.Oo=()=>this.No(),this.Bo=()=>this.Lo(),this.ko=[],this.qo()}xo(e){this.ko.push(e)}shutdown(){window.removeEventListener("online",this.Oo),window.removeEventListener("offline",this.Bo)}qo(){window.addEventListener("online",this.Oo),window.addEventListener("offline",this.Bo)}No(){J(Nk,"Network connectivity changed: AVAILABLE");for(let e of this.ko)e(0)}Lo(){J(Nk,"Network connectivity changed: UNAVAILABLE");for(let e of this.ko)e(1)}static C(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}};var Ig=null;function fC(){return Ig===null?Ig=(function(){return 268435456+Math.round(2147483648*Math.random())})():Ig++,"0x"+Ig.toString(16)}var tE="RestConnection",j7={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"},hC=class{get Qo(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;let t=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.$o=t+"://"+e.host,this.Uo=`projects/${r}/databases/${i}`,this.Ko=this.databaseId.database===Og?`project_id=${r}`:`project_id=${r}&database_id=${i}`}Wo(e,t,r,i,o){let s=fC(),a=this.Go(e,t.toUriEncodedString());J(tE,`Sending RPC '${e}' ${s}:`,a,r);let l={"google-cloud-resource-prefix":this.Uo,"x-goog-request-params":this.Ko};this.zo(l,i,o);let{host:u}=new URL(a),f=Do(u);return this.jo(e,a,l,r,f).then(m=>(J(tE,`Received RPC '${e}' ${s}: `,m),m),m=>{throw Uo(tE,`RPC '${e}' ${s} failed with error: `,m,"url: ",a,"request:",r),m})}Jo(e,t,r,i,o,s){return this.Wo(e,t,r,i,o)}zo(e,t,r){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+zc})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((i,o)=>e[o]=i),r&&r.headers.forEach((i,o)=>e[o]=i)}Go(e,t){let r=j7[e];return`${this.$o}/v1/${t}:${r}`}terminate(){}};var pC=class{constructor(e){this.Ho=e.Ho,this.Yo=e.Yo}Zo(e){this.Xo=e}e_(e){this.t_=e}n_(e){this.r_=e}onMessage(e){this.i_=e}close(){this.Yo()}send(e){this.Ho(e)}s_(){this.Xo()}o_(){this.t_()}__(e){this.r_(e)}a_(e){this.i_(e)}};var sn="WebChannelConnection",gC=class extends hC{constructor(e){super(e),this.u_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}jo(e,t,r,i,o){let s=fC();return new Promise((a,l)=>{let u=new Yw;u.setWithCredentials(!0),u.listenOnce(Qw.COMPLETE,()=>{try{switch(u.getLastErrorCode()){case td.NO_ERROR:let m=u.getResponseJson();J(sn,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(m)),a(m);break;case td.TIMEOUT:J(sn,`RPC '${e}' ${s} timed out`),l(new G(j.DEADLINE_EXCEEDED,"Request time out"));break;case td.HTTP_ERROR:let _=u.getStatus();if(J(sn,`RPC '${e}' ${s} failed with status:`,_,"response text:",u.getResponseText()),_>0){let E=u.getResponseJson();Array.isArray(E)&&(E=E[0]);let x=E?.error;if(x&&x.status&&x.message){let F=(function(W){let oe=W.toLowerCase().replace(/_/g,"-");return Object.values(j).indexOf(oe)>=0?oe:j.UNKNOWN})(x.status);l(new G(F,x.message))}else l(new G(j.UNKNOWN,"Server responded with status "+u.getStatus()))}else l(new G(j.UNAVAILABLE,"Connection failed."));break;default:le(9055,{c_:e,streamId:s,l_:u.getLastErrorCode(),h_:u.getLastError()})}}finally{J(sn,`RPC '${e}' ${s} completed.`)}});let f=JSON.stringify(i);J(sn,`RPC '${e}' ${s} sending request:`,i),u.send(t,"POST",f,r,15)})}P_(e,t,r){let i=fC(),o=[this.$o,"/","google.firestore.v1.Firestore","/",e,"/channel"],s=Jw(),a=Xw(),l={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},u=this.longPollingOptions.timeoutSeconds;u!==void 0&&(l.longPollingTimeout=Math.round(1e3*u)),this.useFetchStreams&&(l.useFetchStreams=!0),this.zo(l.initMessageHeaders,t,r),l.encodeInitMessageHeaders=!0;let f=o.join("");J(sn,`Creating RPC '${e}' stream ${i}: ${f}`,l);let m=s.createWebChannel(f,l);this.T_(m);let _=!1,E=!1,x=new pC({Ho:L=>{E?J(sn,`Not sending because RPC '${e}' stream ${i} is closed:`,L):(_||(J(sn,`Opening RPC '${e}' stream ${i} transport.`),m.open(),_=!0),J(sn,`RPC '${e}' stream ${i} sending:`,L),m.send(L))},Yo:()=>m.close()}),F=(L,W,oe)=>{L.listen(W,de=>{try{oe(de)}catch(Fe){setTimeout(()=>{throw Fe},0)}})};return F(m,Sc.EventType.OPEN,()=>{E||(J(sn,`RPC '${e}' stream ${i} transport opened.`),x.s_())}),F(m,Sc.EventType.CLOSE,()=>{E||(E=!0,J(sn,`RPC '${e}' stream ${i} transport closed`),x.__(),this.I_(m))}),F(m,Sc.EventType.ERROR,L=>{E||(E=!0,Uo(sn,`RPC '${e}' stream ${i} transport errored. Name:`,L.name,"Message:",L.message),x.__(new G(j.UNAVAILABLE,"The operation could not be completed")))}),F(m,Sc.EventType.MESSAGE,L=>{var W;if(!E){let oe=L.data[0];Be(!!oe,16349);let de=oe,Fe=de?.error||((W=de[0])===null||W===void 0?void 0:W.error);if(Fe){J(sn,`RPC '${e}' stream ${i} received error:`,Fe);let Rt=Fe.status,$e=(function(D){let M=St[D];if(M!==void 0)return BO(M)})(Rt),P=Fe.message;$e===void 0&&($e=j.INTERNAL,P="Unknown error status: "+Rt+" with message "+Fe.message),E=!0,x.__(new G($e,P)),m.close()}else J(sn,`RPC '${e}' stream ${i} received:`,oe),x.a_(oe)}}),F(a,Zw.STAT_EVENT,L=>{L.stat===wg.PROXY?J(sn,`RPC '${e}' stream ${i} detected buffering proxy`):L.stat===wg.NOPROXY&&J(sn,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{x.o_()},0),x}terminate(){this.u_.forEach(e=>e.close()),this.u_=[]}T_(e){this.u_.push(e)}I_(e){this.u_=this.u_.filter(t=>t===e)}};function nE(){return typeof document<"u"?document:null}function mm(n){return new FE(n,!0)}var Yg=class{constructor(e,t,r=1e3,i=1.5,o=6e4){this.Fi=e,this.timerId=t,this.d_=r,this.E_=i,this.A_=o,this.R_=0,this.V_=null,this.m_=Date.now(),this.reset()}reset(){this.R_=0}f_(){this.R_=this.A_}g_(e){this.cancel();let t=Math.floor(this.R_+this.p_()),r=Math.max(0,Date.now()-this.m_),i=Math.max(0,t-r);i>0&&J("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.R_} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.V_=this.Fi.enqueueAfterDelay(this.timerId,i,()=>(this.m_=Date.now(),e())),this.R_*=this.E_,this.R_<this.d_&&(this.R_=this.d_),this.R_>this.A_&&(this.R_=this.A_)}y_(){this.V_!==null&&(this.V_.skipDelay(),this.V_=null)}cancel(){this.V_!==null&&(this.V_.cancel(),this.V_=null)}p_(){return(Math.random()-.5)*this.R_}};var Fk="PersistentStream",Qg=class{constructor(e,t,r,i,o,s,a,l){this.Fi=e,this.w_=r,this.S_=i,this.connection=o,this.authCredentialsProvider=s,this.appCheckCredentialsProvider=a,this.listener=l,this.state=0,this.b_=0,this.D_=null,this.v_=null,this.stream=null,this.C_=0,this.F_=new Yg(e,t)}M_(){return this.state===1||this.state===5||this.x_()}x_(){return this.state===2||this.state===3}start(){this.C_=0,this.state!==4?this.auth():this.O_()}stop(){return b(this,null,function*(){this.M_()&&(yield this.close(0))})}N_(){this.state=0,this.F_.reset()}B_(){this.x_()&&this.D_===null&&(this.D_=this.Fi.enqueueAfterDelay(this.w_,6e4,()=>this.L_()))}k_(e){this.q_(),this.stream.send(e)}L_(){return b(this,null,function*(){if(this.x_())return this.close(0)})}q_(){this.D_&&(this.D_.cancel(),this.D_=null)}Q_(){this.v_&&(this.v_.cancel(),this.v_=null)}close(e,t){return b(this,null,function*(){this.q_(),this.Q_(),this.F_.cancel(),this.b_++,e!==4?this.F_.reset():t&&t.code===j.RESOURCE_EXHAUSTED?($i(t.toString()),$i("Using maximum backoff delay to prevent overloading the backend."),this.F_.f_()):t&&t.code===j.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.U_(),this.stream.close(),this.stream=null),this.state=e,yield this.listener.n_(t)})}U_(){}auth(){this.state=1;let e=this.K_(this.b_),t=this.b_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.b_===t&&this.W_(r,i)},r=>{e(()=>{let i=new G(j.UNKNOWN,"Fetching auth token failed: "+r.message);return this.G_(i)})})}W_(e,t){let r=this.K_(this.b_);this.stream=this.z_(e,t),this.stream.Zo(()=>{r(()=>this.listener.Zo())}),this.stream.e_(()=>{r(()=>(this.state=2,this.v_=this.Fi.enqueueAfterDelay(this.S_,1e4,()=>(this.x_()&&(this.state=3),Promise.resolve())),this.listener.e_()))}),this.stream.n_(i=>{r(()=>this.G_(i))}),this.stream.onMessage(i=>{r(()=>++this.C_==1?this.j_(i):this.onNext(i))})}O_(){this.state=5,this.F_.g_(()=>b(this,null,function*(){this.state=0,this.start()}))}G_(e){return J(Fk,`close with error: ${e}`),this.stream=null,this.close(4,e)}K_(e){return t=>{this.Fi.enqueueAndForget(()=>this.b_===e?t():(J(Fk,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}},mC=class extends Qg{constructor(e,t,r,i,o,s){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,i,s),this.serializer=o}z_(e,t){return this.connection.P_("Listen",e,t)}j_(e){return this.onNext(e)}onNext(e){this.F_.reset();let t=_7(this.serializer,e),r=(function(o){if(!("targetChange"in o))return _e.min();let s=o.targetChange;return s.targetIds&&s.targetIds.length?_e.min():s.readTime?ai(s.readTime):_e.min()})(e);return this.listener.J_(t,r)}H_(e){let t={};t.database=jE(this.serializer),t.addTarget=(function(o,s){let a,l=s.target;if(a=TE(l)?{documents:w7(o,l)}:{query:E7(o,l).Vt},a.targetId=s.targetId,s.resumeToken.approximateByteSize()>0){a.resumeToken=$O(o,s.resumeToken);let u=LE(o,s.expectedCount);u!==null&&(a.expectedCount=u)}else if(s.snapshotVersion.compareTo(_e.min())>0){a.readTime=Hg(o,s.snapshotVersion.toTimestamp());let u=LE(o,s.expectedCount);u!==null&&(a.expectedCount=u)}return a})(this.serializer,e);let r=I7(this.serializer,e);r&&(t.labels=r),this.k_(t)}Y_(e){let t={};t.database=jE(this.serializer),t.removeTarget=e,this.k_(t)}},vC=class extends Qg{constructor(e,t,r,i,o,s){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,i,s),this.serializer=o}get Z_(){return this.C_>0}start(){this.lastStreamToken=void 0,super.start()}U_(){this.Z_&&this.X_([])}z_(e,t){return this.connection.P_("Write",e,t)}j_(e){return Be(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,Be(!e.writeResults||e.writeResults.length===0,55816),this.listener.ea()}onNext(e){Be(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.F_.reset();let t=b7(e.writeResults,e.commitTime),r=ai(e.commitTime);return this.listener.ta(r,t)}na(){let e={};e.database=jE(this.serializer),this.k_(e)}X_(e){let t={streamToken:this.lastStreamToken,writes:e.map(r=>y7(this.serializer,r))};this.k_(t)}};var _C=class{},yC=class extends _C{constructor(e,t,r,i){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=i,this.ra=!1}ia(){if(this.ra)throw new G(j.FAILED_PRECONDITION,"The client has already been terminated.")}Wo(e,t,r,i){return this.ia(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,s])=>this.connection.Wo(e,VE(t,r),i,o,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===j.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new G(j.UNKNOWN,o.toString())})}Jo(e,t,r,i,o){return this.ia(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,a])=>this.connection.Jo(e,VE(t,r),i,s,a,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===j.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new G(j.UNKNOWN,s.toString())})}terminate(){this.ra=!0,this.connection.terminate()}},bC=class{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.sa=0,this.oa=null,this._a=!0}aa(){this.sa===0&&(this.ua("Unknown"),this.oa=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.oa=null,this.ca("Backend didn't respond within 10 seconds."),this.ua("Offline"),Promise.resolve())))}la(e){this.state==="Online"?this.ua("Unknown"):(this.sa++,this.sa>=1&&(this.ha(),this.ca(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ua("Offline")))}set(e){this.ha(),this.sa=0,e==="Online"&&(this._a=!1),this.ua(e)}ua(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}ca(e){let t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this._a?($i(t),this._a=!1):J("OnlineStateTracker",t)}ha(){this.oa!==null&&(this.oa.cancel(),this.oa=null)}};var ia="RemoteStore",wC=class{constructor(e,t,r,i,o){this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.Pa=[],this.Ta=new Map,this.Ia=new Set,this.da=[],this.Ea=o,this.Ea.xo(s=>{r.enqueueAndForget(()=>b(this,null,function*(){aa(this)&&(J(ia,"Restarting streams for network reachability change."),yield(function(l){return b(this,null,function*(){let u=me(l);u.Ia.add(4),yield wd(u),u.Aa.set("Unknown"),u.Ia.delete(4),yield vm(u)})})(this))}))}),this.Aa=new bC(r,i)}};function vm(n){return b(this,null,function*(){if(aa(n))for(let e of n.da)yield e(!0)})}function wd(n){return b(this,null,function*(){for(let e of n.da)yield e(!1)})}function XO(n,e){let t=me(n);t.Ta.has(e.targetId)||(t.Ta.set(e.targetId,e),aI(t)?sI(t):Gc(t).x_()&&oI(t,e))}function iI(n,e){let t=me(n),r=Gc(t);t.Ta.delete(e),r.x_()&&JO(t,e),t.Ta.size===0&&(r.x_()?r.B_():aa(t)&&t.Aa.set("Unknown"))}function oI(n,e){if(n.Ra.$e(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(_e.min())>0){let t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}Gc(n).H_(e)}function JO(n,e){n.Ra.$e(e),Gc(n).Y_(e)}function sI(n){n.Ra=new NE({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),Et:e=>n.Ta.get(e)||null,lt:()=>n.datastore.serializer.databaseId}),Gc(n).start(),n.Aa.aa()}function aI(n){return aa(n)&&!Gc(n).M_()&&n.Ta.size>0}function aa(n){return me(n).Ia.size===0}function eR(n){n.Ra=void 0}function B7(n){return b(this,null,function*(){n.Aa.set("Online")})}function $7(n){return b(this,null,function*(){n.Ta.forEach((e,t)=>{oI(n,e)})})}function H7(n,e){return b(this,null,function*(){eR(n),aI(n)?(n.Aa.la(e),sI(n)):n.Aa.set("Unknown")})}function z7(n,e,t){return b(this,null,function*(){if(n.Aa.set("Online"),e instanceof Bg&&e.state===2&&e.cause)try{yield(function(i,o){return b(this,null,function*(){let s=o.cause;for(let a of o.targetIds)i.Ta.has(a)&&(yield i.remoteSyncer.rejectListen(a,s),i.Ta.delete(a),i.Ra.removeTarget(a))})})(n,e)}catch(r){J(ia,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield Zg(n,r)}else if(e instanceof kc?n.Ra.Ye(e):e instanceof jg?n.Ra.it(e):n.Ra.et(e),!t.isEqual(_e.min()))try{let r=yield ZO(n.localStore);t.compareTo(r)>=0&&(yield(function(o,s){let a=o.Ra.Pt(s);return a.targetChanges.forEach((l,u)=>{if(l.resumeToken.approximateByteSize()>0){let f=o.Ta.get(u);f&&o.Ta.set(u,f.withResumeToken(l.resumeToken,s))}}),a.targetMismatches.forEach((l,u)=>{let f=o.Ta.get(l);if(!f)return;o.Ta.set(l,f.withResumeToken(an.EMPTY_BYTE_STRING,f.snapshotVersion)),JO(o,l);let m=new fd(f.target,l,u,f.sequenceNumber);oI(o,m)}),o.remoteSyncer.applyRemoteEvent(a)})(n,t))}catch(r){J(ia,"Failed to raise snapshot:",r),yield Zg(n,r)}})}function Zg(n,e,t){return b(this,null,function*(){if(!Wc(e))throw e;n.Ia.add(1),yield wd(n),n.Aa.set("Offline"),t||(t=()=>ZO(n.localStore)),n.asyncQueue.enqueueRetryable(()=>b(null,null,function*(){J(ia,"Retrying IndexedDB access"),yield t(),n.Ia.delete(1),yield vm(n)}))})}function tR(n,e){return e().catch(t=>Zg(n,t,e))}function _m(n){return b(this,null,function*(){let e=me(n),t=$o(e),r=e.Pa.length>0?e.Pa[e.Pa.length-1].batchId:KC;for(;q7(e);)try{let i=yield L7(e.localStore,r);if(i===null){e.Pa.length===0&&t.B_();break}r=i.batchId,W7(e,i)}catch(i){yield Zg(e,i)}nR(e)&&rR(e)})}function q7(n){return aa(n)&&n.Pa.length<10}function W7(n,e){n.Pa.push(e);let t=$o(n);t.x_()&&t.Z_&&t.X_(e.mutations)}function nR(n){return aa(n)&&!$o(n).M_()&&n.Pa.length>0}function rR(n){$o(n).start()}function G7(n){return b(this,null,function*(){$o(n).na()})}function K7(n){return b(this,null,function*(){let e=$o(n);for(let t of n.Pa)e.X_(t.mutations)})}function Y7(n,e,t){return b(this,null,function*(){let r=n.Pa.shift(),i=AE.from(r,e,t);yield tR(n,()=>n.remoteSyncer.applySuccessfulWrite(i)),yield _m(n)})}function Q7(n,e){return b(this,null,function*(){e&&$o(n).Z_&&(yield(function(r,i){return b(this,null,function*(){if((function(s){return d7(s)&&s!==j.ABORTED})(i.code)){let o=r.Pa.shift();$o(r).N_(),yield tR(r,()=>r.remoteSyncer.rejectFailedWrite(o.batchId,i)),yield _m(r)}})})(n,e)),nR(n)&&rR(n)})}function Lk(n,e){return b(this,null,function*(){let t=me(n);t.asyncQueue.verifyOperationInProgress(),J(ia,"RemoteStore received new credentials");let r=aa(t);t.Ia.add(3),yield wd(t),r&&t.Aa.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t.Ia.delete(3),yield vm(t)})}function Z7(n,e){return b(this,null,function*(){let t=me(n);e?(t.Ia.delete(2),yield vm(t)):e||(t.Ia.add(2),yield wd(t),t.Aa.set("Unknown"))})}function Gc(n){return n.Va||(n.Va=(function(t,r,i){let o=me(t);return o.ia(),new mC(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)})(n.datastore,n.asyncQueue,{Zo:B7.bind(null,n),e_:$7.bind(null,n),n_:H7.bind(null,n),J_:z7.bind(null,n)}),n.da.push(e=>b(null,null,function*(){e?(n.Va.N_(),aI(n)?sI(n):n.Aa.set("Unknown")):(yield n.Va.stop(),eR(n))}))),n.Va}function $o(n){return n.ma||(n.ma=(function(t,r,i){let o=me(t);return o.ia(),new vC(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)})(n.datastore,n.asyncQueue,{Zo:()=>Promise.resolve(),e_:G7.bind(null,n),n_:Q7.bind(null,n),ea:K7.bind(null,n),ta:Y7.bind(null,n)}),n.da.push(e=>b(null,null,function*(){e?(n.ma.N_(),yield _m(n)):(yield n.ma.stop(),n.Pa.length>0&&(J(ia,`Stopping write stream with ${n.Pa.length} pending writes`),n.Pa=[]))}))),n.ma}var EC=class n{constructor(e,t,r,i,o){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=i,this.removalCallback=o,this.deferred=new kr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(s=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,r,i,o){let s=Date.now()+r,a=new n(e,t,s,i,o);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new G(j.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}};function cI(n,e){if($i("AsyncQueue",`${e}: ${n}`),Wc(n))return new G(j.UNAVAILABLE,`${e}: ${n}`);throw n}var Xg=class n{static emptySet(e){return new n(e.comparator)}constructor(e){this.comparator=e?(t,r)=>e(t,r)||ae.comparator(t.key,r.key):(t,r)=>ae.comparator(t.key,r.key),this.keyedMap=nd(),this.sortedSet=new dt(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){let t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){let t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){let t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof n)||this.size!==e.size)return!1;let t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){let i=t.getNext().key,o=r.getNext().key;if(!i.isEqual(o))return!1}return!0}toString(){let e=[];return this.forEach(t=>{e.push(t.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){let r=new n;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}};var Jg=class{constructor(){this.fa=new dt(ae.comparator)}track(e){let t=e.doc.key,r=this.fa.get(t);r?e.type!==0&&r.type===3?this.fa=this.fa.insert(t,e):e.type===3&&r.type!==1?this.fa=this.fa.insert(t,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.fa=this.fa.insert(t,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.fa=this.fa.insert(t,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.fa=this.fa.remove(t):e.type===1&&r.type===2?this.fa=this.fa.insert(t,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.fa=this.fa.insert(t,{type:2,doc:e.doc}):le(63341,{At:e,ga:r}):this.fa=this.fa.insert(t,e)}pa(){let e=[];return this.fa.inorderTraversal((t,r)=>{e.push(r)}),e}},Bc=class n{constructor(e,t,r,i,o,s,a,l,u){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=o,this.fromCache=s,this.syncStateChanged=a,this.excludesMetadataChanges=l,this.hasCachedResults=u}static fromInitialDocuments(e,t,r,i,o){let s=[];return t.forEach(a=>{s.push({type:0,doc:a})}),new n(e,t,Xg.emptySet(t),s,r,i,!0,!1,o)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&pm(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;let t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let i=0;i<t.length;i++)if(t[i].type!==r[i].type||!t[i].doc.isEqual(r[i].doc))return!1;return!0}};var CC=class{constructor(){this.ya=void 0,this.wa=[]}Sa(){return this.wa.some(e=>e.ba())}},IC=class{constructor(){this.queries=Vk(),this.onlineState="Unknown",this.Da=new Set}terminate(){(function(t,r){let i=me(t),o=i.queries;i.queries=Vk(),o.forEach((s,a)=>{for(let l of a.wa)l.onError(r)})})(this,new G(j.ABORTED,"Firestore shutting down"))}};function Vk(){return new Wi(n=>xO(n),pm)}function lI(n,e){return b(this,null,function*(){let t=me(n),r=3,i=e.query,o=t.queries.get(i);o?!o.Sa()&&e.ba()&&(r=2):(o=new CC,r=e.ba()?0:1);try{switch(r){case 0:o.ya=yield t.onListen(i,!0);break;case 1:o.ya=yield t.onListen(i,!1);break;case 2:yield t.onFirstRemoteStoreListen(i)}}catch(s){let a=cI(s,`Initialization of query '${Dc(e.query)}' failed`);return void e.onError(a)}t.queries.set(i,o),o.wa.push(e),e.va(t.onlineState),o.ya&&e.Ca(o.ya)&&dI(t)})}function uI(n,e){return b(this,null,function*(){let t=me(n),r=e.query,i=3,o=t.queries.get(r);if(o){let s=o.wa.indexOf(e);s>=0&&(o.wa.splice(s,1),o.wa.length===0?i=e.ba()?0:1:!o.Sa()&&e.ba()&&(i=2))}switch(i){case 0:return t.queries.delete(r),t.onUnlisten(r,!0);case 1:return t.queries.delete(r),t.onUnlisten(r,!1);case 2:return t.onLastRemoteStoreUnlisten(r);default:return}})}function X7(n,e){let t=me(n),r=!1;for(let i of e){let o=i.query,s=t.queries.get(o);if(s){for(let a of s.wa)a.Ca(i)&&(r=!0);s.ya=i}}r&&dI(t)}function J7(n,e,t){let r=me(n),i=r.queries.get(e);if(i)for(let o of i.wa)o.onError(t);r.queries.delete(e)}function dI(n){n.Da.forEach(e=>{e.next()})}var SC,Uk;(Uk=SC||(SC={})).Fa="default",Uk.Cache="cache";var gd=class{constructor(e,t,r){this.query=e,this.Ma=t,this.xa=!1,this.Oa=null,this.onlineState="Unknown",this.options=r||{}}Ca(e){if(!this.options.includeMetadataChanges){let r=[];for(let i of e.docChanges)i.type!==3&&r.push(i);e=new Bc(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.xa?this.Na(e)&&(this.Ma.next(e),t=!0):this.Ba(e,this.onlineState)&&(this.La(e),t=!0),this.Oa=e,t}onError(e){this.Ma.error(e)}va(e){this.onlineState=e;let t=!1;return this.Oa&&!this.xa&&this.Ba(this.Oa,e)&&(this.La(this.Oa),t=!0),t}Ba(e,t){if(!e.fromCache||!this.ba())return!0;let r=t!=="Offline";return(!this.options.ka||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Na(e){if(e.docChanges.length>0)return!0;let t=this.Oa&&this.Oa.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}La(e){e=Bc.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.xa=!0,this.Ma.next(e)}ba(){return this.options.source!==SC.Cache}};var em=class{constructor(e){this.key=e}},tm=class{constructor(e){this.key=e}},TC=class{constructor(e,t){this.query=e,this.Ha=t,this.Ya=null,this.hasCachedResults=!1,this.current=!1,this.Za=Me(),this.mutatedKeys=Me(),this.Xa=MO(e),this.eu=new Xg(this.Xa)}get tu(){return this.Ha}nu(e,t){let r=t?t.ru:new Jg,i=t?t.eu:this.eu,o=t?t.mutatedKeys:this.mutatedKeys,s=i,a=!1,l=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,u=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((f,m)=>{let _=i.get(f),E=gm(this.query,m)?m:null,x=!!_&&this.mutatedKeys.has(_.key),F=!!E&&(E.hasLocalMutations||this.mutatedKeys.has(E.key)&&E.hasCommittedMutations),L=!1;_&&E?_.data.isEqual(E.data)?x!==F&&(r.track({type:3,doc:E}),L=!0):this.iu(_,E)||(r.track({type:2,doc:E}),L=!0,(l&&this.Xa(E,l)>0||u&&this.Xa(E,u)<0)&&(a=!0)):!_&&E?(r.track({type:0,doc:E}),L=!0):_&&!E&&(r.track({type:1,doc:_}),L=!0,(l||u)&&(a=!0)),L&&(E?(s=s.add(E),o=F?o.add(f):o.delete(f)):(s=s.delete(f),o=o.delete(f)))}),this.query.limit!==null)for(;s.size>this.query.limit;){let f=this.query.limitType==="F"?s.last():s.first();s=s.delete(f.key),o=o.delete(f.key),r.track({type:1,doc:f})}return{eu:s,ru:r,Ds:a,mutatedKeys:o}}iu(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r,i){let o=this.eu;this.eu=e.eu,this.mutatedKeys=e.mutatedKeys;let s=e.ru.pa();s.sort((f,m)=>(function(E,x){let F=L=>{switch(L){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return le(20277,{At:L})}};return F(E)-F(x)})(f.type,m.type)||this.Xa(f.doc,m.doc)),this.su(r),i=i!=null&&i;let a=t&&!i?this.ou():[],l=this.Za.size===0&&this.current&&!i?1:0,u=l!==this.Ya;return this.Ya=l,s.length!==0||u?{snapshot:new Bc(this.query,e.eu,o,s,e.mutatedKeys,l===0,u,!1,!!r&&r.resumeToken.approximateByteSize()>0),_u:a}:{_u:a}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({eu:this.eu,ru:new Jg,mutatedKeys:this.mutatedKeys,Ds:!1},!1)):{_u:[]}}au(e){return!this.Ha.has(e)&&!!this.eu.has(e)&&!this.eu.get(e).hasLocalMutations}su(e){e&&(e.addedDocuments.forEach(t=>this.Ha=this.Ha.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Ha=this.Ha.delete(t)),this.current=e.current)}ou(){if(!this.current)return[];let e=this.Za;this.Za=Me(),this.eu.forEach(r=>{this.au(r.key)&&(this.Za=this.Za.add(r.key))});let t=[];return e.forEach(r=>{this.Za.has(r)||t.push(new tm(r))}),this.Za.forEach(r=>{e.has(r)||t.push(new em(r))}),t}uu(e){this.Ha=e.qs,this.Za=Me();let t=this.nu(e.documents);return this.applyChanges(t,!0)}cu(){return Bc.fromInitialDocuments(this.query,this.eu,this.mutatedKeys,this.Ya===0,this.hasCachedResults)}},fI="SyncEngine",DC=class{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}},xC=class{constructor(e){this.key=e,this.lu=!1}},MC=class{constructor(e,t,r,i,o,s){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=i,this.currentUser=o,this.maxConcurrentLimboResolutions=s,this.hu={},this.Pu=new Wi(a=>xO(a),pm),this.Tu=new Map,this.Iu=new Set,this.du=new dt(ae.comparator),this.Eu=new Map,this.Au=new pd,this.Ru={},this.Vu=new Map,this.mu=hd.ur(),this.onlineState="Unknown",this.fu=void 0}get isPrimaryClient(){return this.fu===!0}};function eH(n,e,t=!0){return b(this,null,function*(){let r=lR(n),i,o=r.Pu.get(e);return o?(r.sharedClientState.addLocalQueryTarget(o.targetId),i=o.view.cu()):i=yield iR(r,e,t,!0),i})}function tH(n,e){return b(this,null,function*(){let t=lR(n);yield iR(t,e,!0,!1)})}function iR(n,e,t,r){return b(this,null,function*(){let i=yield V7(n.localStore,si(e)),o=i.targetId,s=n.sharedClientState.addLocalQueryTarget(o,t),a;return r&&(a=yield nH(n,e,o,s==="current",i.resumeToken)),n.isPrimaryClient&&t&&XO(n.remoteStore,i),a})}function nH(n,e,t,r,i){return b(this,null,function*(){n.gu=(m,_,E)=>(function(F,L,W,oe){return b(this,null,function*(){let de=L.view.nu(W);de.Ds&&(de=yield Rk(F.localStore,L.query,!1).then(({documents:P})=>L.view.nu(P,de)));let Fe=oe&&oe.targetChanges.get(L.targetId),Rt=oe&&oe.targetMismatches.get(L.targetId)!=null,$e=L.view.applyChanges(de,F.isPrimaryClient,Fe,Rt);return Bk(F,L.targetId,$e._u),$e.snapshot})})(n,m,_,E);let o=yield Rk(n.localStore,e,!0),s=new TC(e,o.qs),a=s.nu(o.documents),l=dd.createSynthesizedTargetChangeForCurrentChange(t,r&&n.onlineState!=="Offline",i),u=s.applyChanges(a,n.isPrimaryClient,l);Bk(n,t,u._u);let f=new DC(e,t,s);return n.Pu.set(e,f),n.Tu.has(t)?n.Tu.get(t).push(e):n.Tu.set(t,[e]),u.snapshot})}function rH(n,e,t){return b(this,null,function*(){let r=me(n),i=r.Pu.get(e),o=r.Tu.get(i.targetId);if(o.length>1)return r.Tu.set(i.targetId,o.filter(s=>!pm(s,e))),void r.Pu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||(yield lC(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),t&&iI(r.remoteStore,i.targetId),PC(r,i.targetId)}).catch(qc))):(PC(r,i.targetId),yield lC(r.localStore,i.targetId,!0))})}function iH(n,e){return b(this,null,function*(){let t=me(n),r=t.Pu.get(e),i=t.Tu.get(r.targetId);t.isPrimaryClient&&i.length===1&&(t.sharedClientState.removeLocalQueryTarget(r.targetId),iI(t.remoteStore,r.targetId))})}function oH(n,e,t){return b(this,null,function*(){let r=fH(n);try{let i=yield(function(s,a){let l=me(s),u=rt.now(),f=a.reduce((E,x)=>E.add(x.key),Me()),m,_;return l.persistence.runTransaction("Locally write mutations","readwrite",E=>{let x=Gi(),F=Me();return l.Os.getEntries(E,f).next(L=>{x=L,x.forEach((W,oe)=>{oe.isValidDocument()||(F=F.add(W))})}).next(()=>l.localDocuments.getOverlayedDocuments(E,x)).next(L=>{m=L;let W=[];for(let oe of a){let de=u7(oe,m.get(oe.key).overlayedDocument);de!=null&&W.push(new li(oe.key,de,EO(de.value.mapValue),$n.exists(!0)))}return l.mutationQueue.addMutationBatch(E,u,W,a)}).next(L=>{_=L;let W=L.applyToLocalDocumentSet(m,F);return l.documentOverlayCache.saveOverlays(E,L.batchId,W)})}).then(()=>({batchId:_.batchId,changes:AO(m)}))})(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),(function(s,a,l){let u=s.Ru[s.currentUser.toKey()];u||(u=new dt(Te)),u=u.insert(a,l),s.Ru[s.currentUser.toKey()]=u})(r,i.batchId,t),yield Ed(r,i.changes),yield _m(r.remoteStore)}catch(i){let o=cI(i,"Failed to persist write");t.reject(o)}})}function oR(n,e){return b(this,null,function*(){let t=me(n);try{let r=yield N7(t.localStore,e);e.targetChanges.forEach((i,o)=>{let s=t.Eu.get(o);s&&(Be(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1,22616),i.addedDocuments.size>0?s.lu=!0:i.modifiedDocuments.size>0?Be(s.lu,14607):i.removedDocuments.size>0&&(Be(s.lu,42227),s.lu=!1))}),yield Ed(t,r,e)}catch(r){yield qc(r)}})}function jk(n,e,t){let r=me(n);if(r.isPrimaryClient&&t===0||!r.isPrimaryClient&&t===1){let i=[];r.Pu.forEach((o,s)=>{let a=s.view.va(e);a.snapshot&&i.push(a.snapshot)}),(function(s,a){let l=me(s);l.onlineState=a;let u=!1;l.queries.forEach((f,m)=>{for(let _ of m.wa)_.va(a)&&(u=!0)}),u&&dI(l)})(r.eventManager,e),i.length&&r.hu.J_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function sH(n,e,t){return b(this,null,function*(){let r=me(n);r.sharedClientState.updateQueryState(e,"rejected",t);let i=r.Eu.get(e),o=i&&i.key;if(o){let s=new dt(ae.comparator);s=s.insert(o,Or.newNoDocument(o,_e.min()));let a=Me().add(o),l=new Ug(_e.min(),new Map,new dt(Te),s,a);yield oR(r,l),r.du=r.du.remove(o),r.Eu.delete(e),hI(r)}else yield lC(r.localStore,e,!1).then(()=>PC(r,e,t)).catch(qc)})}function aH(n,e){return b(this,null,function*(){let t=me(n),r=e.batch.batchId;try{let i=yield R7(t.localStore,e);aR(t,r,null),sR(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),yield Ed(t,i)}catch(i){yield qc(i)}})}function cH(n,e,t){return b(this,null,function*(){let r=me(n);try{let i=yield(function(s,a){let l=me(s);return l.persistence.runTransaction("Reject batch","readwrite-primary",u=>{let f;return l.mutationQueue.lookupMutationBatch(u,a).next(m=>(Be(m!==null,37113),f=m.keys(),l.mutationQueue.removeMutationBatch(u,m))).next(()=>l.mutationQueue.performConsistencyCheck(u)).next(()=>l.documentOverlayCache.removeOverlaysForBatchId(u,f,a)).next(()=>l.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(u,f)).next(()=>l.localDocuments.getDocuments(u,f))})})(r.localStore,e);aR(r,e,t),sR(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),yield Ed(r,i)}catch(i){yield qc(i)}})}function sR(n,e){(n.Vu.get(e)||[]).forEach(t=>{t.resolve()}),n.Vu.delete(e)}function aR(n,e,t){let r=me(n),i=r.Ru[r.currentUser.toKey()];if(i){let o=i.get(e);o&&(t?o.reject(t):o.resolve(),i=i.remove(e)),r.Ru[r.currentUser.toKey()]=i}}function PC(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(let r of n.Tu.get(e))n.Pu.delete(r),t&&n.hu.pu(r,t);n.Tu.delete(e),n.isPrimaryClient&&n.Au.zr(e).forEach(r=>{n.Au.containsKey(r)||cR(n,r)})}function cR(n,e){n.Iu.delete(e.path.canonicalString());let t=n.du.get(e);t!==null&&(iI(n.remoteStore,t),n.du=n.du.remove(e),n.Eu.delete(t),hI(n))}function Bk(n,e,t){for(let r of t)r instanceof em?(n.Au.addReference(r.key,e),lH(n,r)):r instanceof tm?(J(fI,"Document no longer in limbo: "+r.key),n.Au.removeReference(r.key,e),n.Au.containsKey(r.key)||cR(n,r.key)):le(19791,{yu:r})}function lH(n,e){let t=e.key,r=t.path.canonicalString();n.du.get(t)||n.Iu.has(r)||(J(fI,"New document in limbo: "+t),n.Iu.add(r),hI(n))}function hI(n){for(;n.Iu.size>0&&n.du.size<n.maxConcurrentLimboResolutions;){let e=n.Iu.values().next().value;n.Iu.delete(e);let t=new ae(Je.fromString(e)),r=n.mu.next();n.Eu.set(r,new xC(t)),n.du=n.du.insert(t,r),XO(n.remoteStore,new fd(si(hm(t.path)),r,"TargetPurposeLimboResolution",GC.ue))}}function Ed(n,e,t){return b(this,null,function*(){let r=me(n),i=[],o=[],s=[];r.Pu.isEmpty()||(r.Pu.forEach((a,l)=>{s.push(r.gu(l,e,t).then(u=>{var f;if((u||t)&&r.isPrimaryClient){let m=u?!u.fromCache:(f=t?.targetChanges.get(l.targetId))===null||f===void 0?void 0:f.current;r.sharedClientState.updateQueryState(l.targetId,m?"current":"not-current")}if(u){i.push(u);let m=oC.Es(l.targetId,u);o.push(m)}}))}),yield Promise.all(s),r.hu.J_(i),yield(function(l,u){return b(this,null,function*(){let f=me(l);try{yield f.persistence.runTransaction("notifyLocalViewChanges","readwrite",m=>z.forEach(u,_=>z.forEach(_.Is,E=>f.persistence.referenceDelegate.addReference(m,_.targetId,E)).next(()=>z.forEach(_.ds,E=>f.persistence.referenceDelegate.removeReference(m,_.targetId,E)))))}catch(m){if(!Wc(m))throw m;J(rI,"Failed to update sequence numbers: "+m)}for(let m of u){let _=m.targetId;if(!m.fromCache){let E=f.Fs.get(_),x=E.snapshotVersion,F=E.withLastLimboFreeSnapshotVersion(x);f.Fs=f.Fs.insert(_,F)}}})})(r.localStore,o))})}function uH(n,e){return b(this,null,function*(){let t=me(n);if(!t.currentUser.isEqual(e)){J(fI,"User change. New user:",e.toKey());let r=yield QO(t.localStore,e);t.currentUser=e,(function(o,s){o.Vu.forEach(a=>{a.forEach(l=>{l.reject(new G(j.CANCELLED,s))})}),o.Vu.clear()})(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield Ed(t,r.Bs)}})}function dH(n,e){let t=me(n),r=t.Eu.get(e);if(r&&r.lu)return Me().add(r.key);{let i=Me(),o=t.Tu.get(e);if(!o)return i;for(let s of o){let a=t.Pu.get(s);i=i.unionWith(a.view.tu)}return i}}function lR(n){let e=me(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=oR.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=dH.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=sH.bind(null,e),e.hu.J_=X7.bind(null,e.eventManager),e.hu.pu=J7.bind(null,e.eventManager),e}function fH(n){let e=me(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=aH.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=cH.bind(null,e),e}var uR=(()=>{class n{constructor(){this.kind="memory",this.synchronizeTabs=!1}initialize(t){return b(this,null,function*(){this.serializer=mm(t.databaseInfo.databaseId),this.sharedClientState=this.bu(t),this.persistence=this.Du(t),yield this.persistence.start(),this.localStore=this.vu(t),this.gcScheduler=this.Cu(t,this.localStore),this.indexBackfillerScheduler=this.Fu(t,this.localStore)})}Cu(t,r){return null}Fu(t,r){return null}vu(t){return O7(this.persistence,new aC,t.initialUser,this.serializer)}Du(t){return new qg(iC.Vi,this.serializer)}bu(t){return new uC}terminate(){return b(this,null,function*(){var t,r;(t=this.gcScheduler)===null||t===void 0||t.stop(),(r=this.indexBackfillerScheduler)===null||r===void 0||r.stop(),this.sharedClientState.shutdown(),yield this.persistence.shutdown()})}}return n.provider={build:()=>new n},n})(),AC=class extends uR{constructor(e){super(),this.cacheSizeBytes=e}Cu(e,t){Be(this.persistence.referenceDelegate instanceof Wg,46915);let r=this.persistence.referenceDelegate.garbageCollector;return new qE(r,e.asyncQueue,t)}Du(e){let t=this.cacheSizeBytes!==void 0?or.withCacheSize(this.cacheSizeBytes):or.DEFAULT;return new qg(r=>Wg.Vi(r,t),this.serializer)}};var hH=(()=>{class n{initialize(t,r){return b(this,null,function*(){this.localStore||(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(r),this.remoteStore=this.createRemoteStore(r),this.eventManager=this.createEventManager(r),this.syncEngine=this.createSyncEngine(r,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>jk(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=uH.bind(null,this.syncEngine),yield Z7(this.remoteStore,this.syncEngine.isPrimaryClient))})}createEventManager(t){return(function(){return new IC})()}createDatastore(t){let r=mm(t.databaseInfo.databaseId),i=(function(s){return new gC(s)})(t.databaseInfo);return(function(s,a,l,u){return new yC(s,a,l,u)})(t.authCredentials,t.appCheckCredentials,i,r)}createRemoteStore(t){return(function(i,o,s,a,l){return new wC(i,o,s,a,l)})(this.localStore,this.datastore,t.asyncQueue,r=>jk(this.syncEngine,r,0),(function(){return Kg.C()?new Kg:new dC})())}createSyncEngine(t,r){return(function(o,s,a,l,u,f,m){let _=new MC(o,s,a,l,u,f);return m&&(_.fu=!0),_})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,r)}terminate(){return b(this,null,function*(){var t,r;yield(function(o){return b(this,null,function*(){let s=me(o);J(ia,"RemoteStore shutting down."),s.Ia.add(5),yield wd(s),s.Ea.shutdown(),s.Aa.set("Unknown")})})(this.remoteStore),(t=this.datastore)===null||t===void 0||t.terminate(),(r=this.eventManager)===null||r===void 0||r.terminate()})}}return n.provider={build:()=>new n},n})();var md=class{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.xu(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.xu(this.observer.error,e):$i("Uncaught Error in snapshot listener:",e.toString()))}Ou(){this.muted=!0}xu(e,t){setTimeout(()=>{this.muted||e(t)},0)}};var Ho="FirestoreClient",kC=class{constructor(e,t,r,i,o){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=i,this.user=jt.UNAUTHENTICATED,this.clientId=sd.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=o,this.authCredentials.start(r,s=>b(this,null,function*(){J(Ho,"Received user=",s.uid),yield this.authCredentialListener(s),this.user=s})),this.appCheckCredentials.start(r,s=>(J(Ho,"Received new app check token=",s),this.appCheckCredentialListener(s,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();let e=new kr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(()=>b(this,null,function*(){try{this._onlineComponents&&(yield this._onlineComponents.terminate()),this._offlineComponents&&(yield this._offlineComponents.terminate()),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){let r=cI(t,"Failed to shutdown persistence");e.reject(r)}})),e.promise}};function rE(n,e){return b(this,null,function*(){n.asyncQueue.verifyOperationInProgress(),J(Ho,"Initializing OfflineComponentProvider");let t=n.configuration;yield e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(i=>b(null,null,function*(){r.isEqual(i)||(yield QO(e.localStore,i),r=i)})),e.persistence.setDatabaseDeletedListener(()=>{Uo("Terminating Firestore due to IndexedDb database deletion"),n.terminate().then(()=>{J("Terminating Firestore due to IndexedDb database deletion completed successfully")}).catch(i=>{Uo("Terminating Firestore due to IndexedDb database deletion failed",i)})}),n._offlineComponents=e})}function $k(n,e){return b(this,null,function*(){n.asyncQueue.verifyOperationInProgress();let t=yield pH(n);J(Ho,"Initializing OnlineComponentProvider"),yield e.initialize(t,n.configuration),n.setCredentialChangeListener(r=>Lk(e.remoteStore,r)),n.setAppCheckTokenChangeListener((r,i)=>Lk(e.remoteStore,i)),n._onlineComponents=e})}function pH(n){return b(this,null,function*(){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){J(Ho,"Using user provided OfflineComponentProvider");try{yield rE(n,n._uninitializedComponentsProvider._offline)}catch(e){let t=e;if(!(function(i){return i.name==="FirebaseError"?i.code===j.FAILED_PRECONDITION||i.code===j.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11})(t))throw t;Uo("Error using user provided cache. Falling back to memory cache: "+t),yield rE(n,new uR)}}else J(Ho,"Using default OfflineComponentProvider"),yield rE(n,new AC(void 0));return n._offlineComponents})}function dR(n){return b(this,null,function*(){return n._onlineComponents||(n._uninitializedComponentsProvider?(J(Ho,"Using user provided OnlineComponentProvider"),yield $k(n,n._uninitializedComponentsProvider._online)):(J(Ho,"Using default OnlineComponentProvider"),yield $k(n,new hH))),n._onlineComponents})}function gH(n){return dR(n).then(e=>e.syncEngine)}function nm(n){return b(this,null,function*(){let e=yield dR(n),t=e.eventManager;return t.onListen=eH.bind(null,e.syncEngine),t.onUnlisten=rH.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=tH.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=iH.bind(null,e.syncEngine),t})}function mH(n,e,t={}){let r=new kr;return n.asyncQueue.enqueueAndForget(()=>b(null,null,function*(){return(function(o,s,a,l,u){let f=new md({next:_=>{f.Ou(),s.enqueueAndForget(()=>uI(o,m));let E=_.docs.has(a);!E&&_.fromCache?u.reject(new G(j.UNAVAILABLE,"Failed to get document because the client is offline.")):E&&_.fromCache&&l&&l.source==="server"?u.reject(new G(j.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):u.resolve(_)},error:_=>u.reject(_)}),m=new gd(hm(a.path),f,{includeMetadataChanges:!0,ka:!0});return lI(o,m)})(yield nm(n),n.asyncQueue,e,t,r)})),r.promise}function vH(n,e,t={}){let r=new kr;return n.asyncQueue.enqueueAndForget(()=>b(null,null,function*(){return(function(o,s,a,l,u){let f=new md({next:_=>{f.Ou(),s.enqueueAndForget(()=>uI(o,m)),_.fromCache&&l.source==="server"?u.reject(new G(j.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):u.resolve(_)},error:_=>u.reject(_)}),m=new gd(a,f,{includeMetadataChanges:!0,ka:!0});return lI(o,m)})(yield nm(n),n.asyncQueue,e,t,r)})),r.promise}function fR(n){let e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}var Hk=new Map;var hR="firestore.googleapis.com",zk=!0,rm=class{constructor(e){var t,r;if(e.host===void 0){if(e.ssl!==void 0)throw new G(j.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=hR,this.ssl=zk}else this.host=e.host,this.ssl=(t=e.ssl)!==null&&t!==void 0?t:zk;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=YO;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<P7)throw new G(j.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}x$("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=fR((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),(function(o){if(o.timeoutSeconds!==void 0){if(isNaN(o.timeoutSeconds))throw new G(j.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (must not be NaN)`);if(o.timeoutSeconds<5)throw new G(j.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (minimum allowed value is 5)`);if(o.timeoutSeconds>30)throw new G(j.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(r,i){return r.timeoutSeconds===i.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}},$c=class{constructor(e,t,r,i){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new rm({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new G(j.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new G(j.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new rm(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(r){if(!r)return new oE;switch(r.type){case"firstParty":return new lE(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new G(j.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}_restart(){return b(this,null,function*(){this._terminateTask==="notTerminated"?yield this._terminate():this._terminateTask="notTerminated"})}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(t){let r=Hk.get(t);r&&(J("ComponentProvider","Removing Datastore"),Hk.delete(t),r.terminate())})(this),Promise.resolve()}};function pR(n,e,t,r={}){var i;n=vn(n,$c);let o=Do(e),s=n._getSettings(),a=Object.assign(Object.assign({},s),{emulatorOptions:n._getEmulatorOptions()}),l=`${e}:${t}`;o&&($p(`https://${l}`),Hp("Firestore",!0)),s.host!==hR&&s.host!==l&&Uo("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");let u=Object.assign(Object.assign({},s),{host:l,ssl:o,emulatorOptions:r});if(!tr(u,a)&&(n._setSettings(u),r.mockUserToken)){let f,m;if(typeof r.mockUserToken=="string")f=r.mockUserToken,m=jt.MOCK_USER;else{f=DP(r.mockUserToken,(i=n._app)===null||i===void 0?void 0:i.options.projectId);let _=r.mockUserToken.sub||r.mockUserToken.user_id;if(!_)throw new G(j.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");m=new jt(_)}n._authCredentials=new sE(new xg(f,m))}}var ui=class n{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new n(this.firestore,e,this._query)}},kt=class n{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new No(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new n(this.firestore,e,this._key)}toJSON(){return{type:n._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,r){if(bd(t,n._jsonSchema))return new n(e,r||null,new ae(Je.fromString(t.referencePath)))}};kt._jsonSchemaVersion="firestore/documentReference/1.0",kt._jsonSchema={type:xt("string",kt._jsonSchemaVersion),referencePath:xt("string")};var No=class n extends ui{constructor(e,t,r){super(e,t,hm(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){let e=this._path.popLast();return e.isEmpty()?null:new kt(this.firestore,null,new ae(e))}withConverter(e){return new n(this.firestore,e,this._path)}};function gR(n,e,...t){if(n=ze(n),Xk("collection","path",e),n instanceof $c){let r=Je.fromString(e,...t);return lk(r),new No(n,null,r)}{if(!(n instanceof kt||n instanceof No))throw new G(j.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=n._path.child(Je.fromString(e,...t));return lk(r),new No(n.firestore,null,r)}}function pI(n,e,...t){if(n=ze(n),arguments.length===1&&(e=sd.newId()),Xk("doc","path",e),n instanceof $c){let r=Je.fromString(e,...t);return ck(r),new kt(n,null,new ae(r))}{if(!(n instanceof kt||n instanceof No))throw new G(j.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=n._path.child(Je.fromString(e,...t));return ck(r),new kt(n.firestore,n instanceof No?n.converter:null,new ae(r))}}var qk="AsyncQueue",im=class{constructor(e=Promise.resolve()){this.Zu=[],this.Xu=!1,this.ec=[],this.tc=null,this.nc=!1,this.rc=!1,this.sc=[],this.F_=new Yg(this,"async_queue_retry"),this.oc=()=>{let r=nE();r&&J(qk,"Visibility state changed to "+r.visibilityState),this.F_.y_()},this._c=e;let t=nE();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this.oc)}get isShuttingDown(){return this.Xu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.ac(),this.uc(e)}enterRestrictedMode(e){if(!this.Xu){this.Xu=!0,this.rc=e||!1;let t=nE();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this.oc)}}enqueue(e){if(this.ac(),this.Xu)return new Promise(()=>{});let t=new kr;return this.uc(()=>this.Xu&&this.rc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Zu.push(e),this.cc()))}cc(){return b(this,null,function*(){if(this.Zu.length!==0){try{yield this.Zu[0](),this.Zu.shift(),this.F_.reset()}catch(e){if(!Wc(e))throw e;J(qk,"Operation failed with retryable error: "+e)}this.Zu.length>0&&this.F_.g_(()=>this.cc())}})}uc(e){let t=this._c.then(()=>(this.nc=!0,e().catch(r=>{throw this.tc=r,this.nc=!1,$i("INTERNAL UNHANDLED ERROR: ",Wk(r)),r}).then(r=>(this.nc=!1,r))));return this._c=t,t}enqueueAfterDelay(e,t,r){this.ac(),this.sc.indexOf(e)>-1&&(t=0);let i=EC.createAndSchedule(this,e,t,r,o=>this.lc(o));return this.ec.push(i),i}ac(){this.tc&&le(47125,{hc:Wk(this.tc)})}verifyOperationInProgress(){}Pc(){return b(this,null,function*(){let e;do e=this._c,yield e;while(e!==this._c)})}Tc(e){for(let t of this.ec)if(t.timerId===e)return!0;return!1}Ic(e){return this.Pc().then(()=>{this.ec.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(let t of this.ec)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Pc()})}dc(e){this.sc.push(e)}lc(e){let t=this.ec.indexOf(e);this.ec.splice(t,1)}};function Wk(n){let e=n.message||"";return n.stack&&(e=n.stack.includes(n.message)?n.stack:n.message+`
`+n.stack),e}function Gk(n){return(function(t,r){if(typeof t!="object"||t===null)return!1;let i=t;for(let o of r)if(o in i&&typeof i[o]=="function")return!0;return!1})(n,["next","error","complete"])}var ar=class extends $c{constructor(e,t,r,i){super(e,t,r,i),this.type="firestore",this._queue=new im,this._persistenceKey=i?.name||"[DEFAULT]"}_terminate(){return b(this,null,function*(){if(this._firestoreClient){let e=this._firestoreClient.terminate();this._queue=new im(e),this._firestoreClient=void 0,yield e}})}};function mR(n,e){let t=typeof n=="object"?n:ti(),r=typeof n=="string"?n:e||Og,i=rr(t,"firestore").getImmediate({identifier:r});if(!i._initialized){let o=TP("firestore");o&&pR(i,...o)}return i}function Cd(n){if(n._terminated)throw new G(j.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||_H(n),n._firestoreClient}function _H(n){var e,t,r;let i=n._freezeSettings(),o=(function(a,l,u,f){return new pE(a,l,u,f.host,f.ssl,f.experimentalForceLongPolling,f.experimentalAutoDetectLongPolling,fR(f.experimentalLongPollingOptions),f.useFetchStreams,f.isUsingEmulator)})(n._databaseId,((e=n._app)===null||e===void 0?void 0:e.options.appId)||"",n._persistenceKey,i);n._componentsProvider||!((t=i.localCache)===null||t===void 0)&&t._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(n._componentsProvider={_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider}),n._firestoreClient=new kC(n._authCredentials,n._appCheckCredentials,n._queue,o,n._componentsProvider&&(function(a){let l=a?._online.build();return{_offline:a?._offline.build(l),_online:l}})(n._componentsProvider))}var Fo=class n{constructor(e){this._byteString=e}static fromBase64String(e){try{return new n(an.fromBase64String(e))}catch(t){throw new G(j.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new n(an.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:n._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(bd(e,n._jsonSchema))return n.fromBase64String(e.bytes)}};Fo._jsonSchemaVersion="firestore/bytes/1.0",Fo._jsonSchema={type:xt("string",Fo._jsonSchemaVersion),bytes:xt("string")};var oa=class{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new G(j.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Bn(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}};var sa=class{constructor(e){this._methodName=e}};var Lo=class n{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new G(j.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new G(j.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return Te(this._lat,e._lat)||Te(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:n._jsonSchemaVersion}}static fromJSON(e){if(bd(e,n._jsonSchema))return new n(e.latitude,e.longitude)}};Lo._jsonSchemaVersion="firestore/geoPoint/1.0",Lo._jsonSchema={type:xt("string",Lo._jsonSchemaVersion),latitude:xt("number"),longitude:xt("number")};var Vo=class n{constructor(e){this._values=(e||[]).map(t=>t)}toArray(){return this._values.map(e=>e)}isEqual(e){return(function(r,i){if(r.length!==i.length)return!1;for(let o=0;o<r.length;++o)if(r[o]!==i[o])return!1;return!0})(this._values,e._values)}toJSON(){return{type:n._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(bd(e,n._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(t=>typeof t=="number"))return new n(e.vectorValues);throw new G(j.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}};Vo._jsonSchemaVersion="firestore/vectorValue/1.0",Vo._jsonSchema={type:xt("string",Vo._jsonSchemaVersion),vectorValues:xt("object")};var yH=/^__.*__$/,OC=class{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return this.fieldMask!==null?new li(e,this.data,this.fieldMask,t,this.fieldTransforms):new ra(e,this.data,t,this.fieldTransforms)}},om=class{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new li(e,this.data,this.fieldMask,t,this.fieldTransforms)}};function vR(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw le(40011,{Ec:n})}}var RC=class n{constructor(e,t,r,i,o,s){this.settings=e,this.databaseId=t,this.serializer=r,this.ignoreUndefinedProperties=i,o===void 0&&this.Ac(),this.fieldTransforms=o||[],this.fieldMask=s||[]}get path(){return this.settings.path}get Ec(){return this.settings.Ec}Rc(e){return new n(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Vc(e){var t;let r=(t=this.path)===null||t===void 0?void 0:t.child(e),i=this.Rc({path:r,mc:!1});return i.fc(e),i}gc(e){var t;let r=(t=this.path)===null||t===void 0?void 0:t.child(e),i=this.Rc({path:r,mc:!1});return i.Ac(),i}yc(e){return this.Rc({path:void 0,mc:!0})}wc(e){return am(e,this.settings.methodName,this.settings.Sc||!1,this.path,this.settings.bc)}contains(e){return this.fieldMask.find(t=>e.isPrefixOf(t))!==void 0||this.fieldTransforms.find(t=>e.isPrefixOf(t.field))!==void 0}Ac(){if(this.path)for(let e=0;e<this.path.length;e++)this.fc(this.path.get(e))}fc(e){if(e.length===0)throw this.wc("Document fields must not be empty");if(vR(this.Ec)&&yH.test(e))throw this.wc('Document fields cannot begin and end with "__"')}},NC=class{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=r||mm(e)}Dc(e,t,r,i=!1){return new RC({Ec:e,methodName:t,bc:r,path:Bn.emptyPath(),mc:!1,Sc:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}};function Kc(n){let e=n._freezeSettings(),t=mm(n._databaseId);return new NC(n._databaseId,!!e.ignoreUndefinedProperties,t)}function gI(n,e,t,r,i,o={}){let s=n.Dc(o.merge||o.mergeFields?2:0,e,t,i);mI("Data must be an object, but it was:",s,r);let a=wR(r,s),l,u;if(o.merge)l=new sr(s.fieldMask),u=s.fieldTransforms;else if(o.mergeFields){let f=[];for(let m of o.mergeFields){let _=VC(e,m,t);if(!s.contains(_))throw new G(j.INVALID_ARGUMENT,`Field '${_}' is specified in your field mask but missing from your input data.`);CR(f,_)||f.push(_)}l=new sr(f),u=s.fieldTransforms.filter(m=>l.covers(m.field))}else l=null,u=s.fieldTransforms;return new OC(new jn(a),l,u)}var sm=class n extends sa{_toFieldTransform(e){if(e.Ec!==2)throw e.Ec===1?e.wc(`${this._methodName}() can only appear at the top level of your update data`):e.wc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof n}};var FC=class n extends sa{_toFieldTransform(e){return new Vg(e.path,new Js)}isEqual(e){return e instanceof n}};var LC=class n extends sa{constructor(e,t){super(e),this.Cc=t}_toFieldTransform(e){let t=new na(e.serializer,RO(e.serializer,this.Cc));return new Vg(e.path,t)}isEqual(e){return e instanceof n&&this.Cc===e.Cc}};function _R(n,e,t,r){let i=n.Dc(1,e,t);mI("Data must be an object, but it was:",i,r);let o=[],s=jn.empty();zo(r,(l,u)=>{let f=vI(e,l,t);u=ze(u);let m=i.gc(f);if(u instanceof sm)o.push(f);else{let _=Id(u,m);_!=null&&(o.push(f),s.set(f,_))}});let a=new sr(o);return new om(s,a,i.fieldTransforms)}function yR(n,e,t,r,i,o){let s=n.Dc(1,e,t),a=[VC(e,r,t)],l=[i];if(o.length%2!=0)throw new G(j.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let _=0;_<o.length;_+=2)a.push(VC(e,o[_])),l.push(o[_+1]);let u=[],f=jn.empty();for(let _=a.length-1;_>=0;--_)if(!CR(u,a[_])){let E=a[_],x=l[_];x=ze(x);let F=s.gc(E);if(x instanceof sm)u.push(E);else{let L=Id(x,F);L!=null&&(u.push(E),f.set(E,L))}}let m=new sr(u);return new om(f,m,s.fieldTransforms)}function bR(n,e,t,r=!1){return Id(t,n.Dc(r?4:3,e))}function Id(n,e){if(ER(n=ze(n)))return mI("Unsupported field value:",e,n),wR(n,e);if(n instanceof sa)return(function(r,i){if(!vR(i.Ec))throw i.wc(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.wc(`${r._methodName}() is not currently supported inside arrays`);let o=r._toFieldTransform(i);o&&i.fieldTransforms.push(o)})(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.mc&&e.Ec!==4)throw e.wc("Nested arrays are not supported");return(function(r,i){let o=[],s=0;for(let a of r){let l=Id(a,i.yc(s));l==null&&(l={nullValue:"NULL_VALUE"}),o.push(l),s++}return{arrayValue:{values:o}}})(n,e)}return(function(r,i){if((r=ze(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return RO(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){let o=rt.fromDate(r);return{timestampValue:Hg(i.serializer,o)}}if(r instanceof rt){let o=new rt(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Hg(i.serializer,o)}}if(r instanceof Lo)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Fo)return{bytesValue:$O(i.serializer,r._byteString)};if(r instanceof kt){let o=i.databaseId,s=r.firestore._databaseId;if(!s.isEqual(o))throw i.wc(`Document reference is for database ${s.projectId}/${s.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:nI(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof Vo)return(function(s,a){return{mapValue:{fields:{[YC]:{stringValue:QC},[Nc]:{arrayValue:{values:s.toArray().map(u=>{if(typeof u!="number")throw a.wc("VectorValues must only contain numeric values.");return tI(a.serializer,u)})}}}}}})(r,i);throw i.wc(`Unsupported field value: ${lm(r)}`)})(n,e)}function wR(n,e){let t={};return pO(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):zo(n,(r,i)=>{let o=Id(i,e.Vc(r));o!=null&&(t[r]=o)}),{mapValue:{fields:t}}}function ER(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof rt||n instanceof Lo||n instanceof Fo||n instanceof kt||n instanceof sa||n instanceof Vo)}function mI(n,e,t){if(!ER(t)||!Jk(t)){let r=lm(t);throw r==="an object"?e.wc(n+" a custom object"):e.wc(n+" "+r)}}function VC(n,e,t){if((e=ze(e))instanceof oa)return e._internalPath;if(typeof e=="string")return vI(n,e);throw am("Field path arguments must be of type string or ",n,!1,void 0,t)}var bH=new RegExp("[~\\*/\\[\\]]");function vI(n,e,t){if(e.search(bH)>=0)throw am(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new oa(...e.split("."))._internalPath}catch{throw am(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function am(n,e,t,r,i){let o=r&&!r.isEmpty(),s=i!==void 0,a=`Function ${e}() called with invalid data`;t&&(a+=" (via `toFirestore()`)"),a+=". ";let l="";return(o||s)&&(l+=" (found",o&&(l+=` in field ${r}`),s&&(l+=` in document ${i}`),l+=")"),new G(j.INVALID_ARGUMENT,a+n+l)}function CR(n,e){return n.some(t=>t.isEqual(e))}var vd=class{constructor(e,t,r,i,o){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=i,this._converter=o}get id(){return this._key.path.lastSegment()}get ref(){return new kt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){let e=new UC(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){let t=this._document.data.field(ym("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}},UC=class extends vd{data(){return super.data()}};function ym(n,e){return typeof e=="string"?vI(n,e):e instanceof oa?e._internalPath:e._delegate._internalPath}function IR(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new G(j.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var _d=class{},Hc=class extends _d{};function SR(n,e,...t){let r=[];e instanceof _d&&r.push(e),r=r.concat(t),(function(o){let s=o.filter(l=>l instanceof jC).length,a=o.filter(l=>l instanceof cm).length;if(s>1||s>0&&a>0)throw new G(j.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(r);for(let i of r)n=i._apply(n);return n}var cm=class n extends Hc{constructor(e,t,r){super(),this._field=e,this._op=t,this._value=r,this.type="where"}static _create(e,t,r){return new n(e,t,r)}_apply(e){let t=this._parse(e);return PR(e._query,t),new ui(e.firestore,e.converter,DE(e._query,t))}_parse(e){let t=Kc(e.firestore);return(function(o,s,a,l,u,f,m){let _;if(u.isKeyField()){if(f==="array-contains"||f==="array-contains-any")throw new G(j.INVALID_ARGUMENT,`Invalid Query. You can't perform '${f}' queries on documentId().`);if(f==="in"||f==="not-in"){Yk(m,f);let x=[];for(let F of m)x.push(Kk(l,o,F));_={arrayValue:{values:x}}}else _=Kk(l,o,m)}else f!=="in"&&f!=="not-in"&&f!=="array-contains-any"||Yk(m,f),_=bR(a,s,m,f==="in"||f==="not-in");return Dt.create(u,f,_)})(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}};function TR(n,e,t){let r=e,i=ym("where",n);return cm._create(i,r,t)}var jC=class n extends _d{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new n(e,t)}_parse(e){let t=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return t.length===1?t[0]:Rr.create(t,this._getOperator())}_apply(e){let t=this._parse(e);return t.getFilters().length===0?e:((function(i,o){let s=i,a=o.getFlattenedFilters();for(let l of a)PR(s,l),s=DE(s,l)})(e._query,t),new ui(e.firestore,e.converter,DE(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}};var BC=class n extends Hc{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new n(e,t)}_apply(e){let t=(function(i,o,s){if(i.startAt!==null)throw new G(j.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(i.endAt!==null)throw new G(j.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Xs(o,s)})(e._query,this._field,this._direction);return new ui(e.firestore,e.converter,(function(i,o){let s=i.explicitOrderBy.concat([o]);return new qi(i.path,i.collectionGroup,s,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)})(e._query,t))}};function DR(n,e="asc"){let t=e,r=ym("orderBy",n);return BC._create(r,t)}var $C=class n extends Hc{constructor(e,t,r){super(),this.type=e,this._limit=t,this._limitType=r}static _create(e,t,r){return new n(e,t,r)}_apply(e){return new ui(e.firestore,e.converter,Lg(e._query,this._limit,this._limitType))}};function xR(n){return M$("limit",n),$C._create("limit",n,"F")}var HC=class n extends Hc{constructor(e,t,r){super(),this.type=e,this._docOrFields=t,this._inclusive=r}static _create(e,t,r){return new n(e,t,r)}_apply(e){let t=wH(e,this.type,this._docOrFields,this._inclusive);return new ui(e.firestore,e.converter,(function(i,o){return new qi(i.path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),i.limit,i.limitType,o,i.endAt)})(e._query,t))}};function MR(...n){return HC._create("startAfter",n,!1)}function wH(n,e,t,r){if(t[0]=ze(t[0]),t[0]instanceof vd)return(function(o,s,a,l,u){if(!l)throw new G(j.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${a}().`);let f=[];for(let m of Ac(o))if(m.field.isKeyField())f.push(Ng(s,l.key));else{let _=l.data.field(m.field);if(dm(_))throw new G(j.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+m.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(_===null){let E=m.field.canonicalString();throw new G(j.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${E}' (used as the orderBy) does not exist.`)}f.push(_)}return new Bo(f,u)})(n._query,n.firestore._databaseId,e,t[0]._document,r);{let i=Kc(n.firestore);return(function(s,a,l,u,f,m){let _=s.explicitOrderBy;if(f.length>_.length)throw new G(j.INVALID_ARGUMENT,`Too many arguments provided to ${u}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);let E=[];for(let x=0;x<f.length;x++){let F=f[x];if(_[x].field.isKeyField()){if(typeof F!="string")throw new G(j.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${u}(), but got a ${typeof F}`);if(!eI(s)&&F.indexOf("/")!==-1)throw new G(j.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${u}() must be a plain document ID, but '${F}' contains a slash.`);let L=s.path.child(Je.fromString(F));if(!ae.isDocumentKey(L))throw new G(j.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${u}() must result in a valid document path, but '${L}' is not because it contains an odd number of segments.`);let W=new ae(L);E.push(Ng(a,W))}else{let L=bR(l,u,F);E.push(L)}}return new Bo(E,m)})(n._query,n.firestore._databaseId,i,e,t,r)}}function Kk(n,e,t){if(typeof(t=ze(t))=="string"){if(t==="")throw new G(j.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!eI(e)&&t.indexOf("/")!==-1)throw new G(j.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);let r=e.path.child(Je.fromString(t));if(!ae.isDocumentKey(r))throw new G(j.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Ng(n,new ae(r))}if(t instanceof kt)return Ng(n,t._key);throw new G(j.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${lm(t)}.`)}function Yk(n,e){if(!Array.isArray(n)||n.length===0)throw new G(j.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function PR(n,e){let t=(function(i,o){for(let s of i)for(let a of s.getFlattenedFilters())if(o.indexOf(a.op)>=0)return a.op;return null})(n.filters,(function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(t!==null)throw t===e.op?new G(j.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new G(j.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}var zC=class{convertValue(e,t="none"){switch(jo(e)){case 0:return null;case 1:return e.booleanValue;case 2:return nt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(zi(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw le(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){let r={};return zo(e,(i,o)=>{r[i]=this.convertValue(o,t)}),r}convertVectorValue(e){var t,r,i;let o=(i=(r=(t=e.fields)===null||t===void 0?void 0:t[Nc].arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.map(s=>nt(s.doubleValue));return new Vo(o)}convertGeoPoint(e){return new Lo(nt(e.latitude),nt(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":let r=fm(e);return r==null?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(ld(e));default:return null}}convertTimestamp(e){let t=Hi(e);return new rt(t.seconds,t.nanos)}convertDocumentKey(e,t){let r=Je.fromString(e);Be(KO(r),9688,{name:e});let i=new Rg(r.get(1),r.get(3)),o=new ae(r.popFirst(5));return i.isEqual(t)||$i(`Document ${o} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),o}};function _I(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}var Gs=class{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}},Ks=class n extends vd{constructor(e,t,r,i,o,s){super(e,t,r,i,s),this._firestore=e,this._firestoreImpl=e,this.metadata=o}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){let t=new Oc(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){let r=this._document.data.field(ym("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new G(j.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");let e=this._document,t={};return t.type=n._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?t:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t)}};Ks._jsonSchemaVersion="firestore/documentSnapshot/1.0",Ks._jsonSchema={type:xt("string",Ks._jsonSchemaVersion),bundleSource:xt("string","DocumentSnapshot"),bundleName:xt("string"),bundle:xt("string")};var Oc=class extends Ks{data(e={}){return super.data(e)}},Ys=class n{constructor(e,t,r,i){this._firestore=e,this._userDataWriter=t,this._snapshot=i,this.metadata=new Gs(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){let e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new Oc(this._firestore,this._userDataWriter,r.key,r,new Gs(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){let t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new G(j.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=(function(i,o){if(i._snapshot.oldDocs.isEmpty()){let s=0;return i._snapshot.docChanges.map(a=>{let l=new Oc(i._firestore,i._userDataWriter,a.doc.key,a.doc,new Gs(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);return a.doc,{type:"added",doc:l,oldIndex:-1,newIndex:s++}})}{let s=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(a=>o||a.type!==3).map(a=>{let l=new Oc(i._firestore,i._userDataWriter,a.doc.key,a.doc,new Gs(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter),u=-1,f=-1;return a.type!==0&&(u=s.indexOf(a.doc.key),s=s.delete(a.doc.key)),a.type!==1&&(s=s.add(a.doc),f=s.indexOf(a.doc.key)),{type:EH(a.type),doc:l,oldIndex:u,newIndex:f}})}})(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new G(j.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");let e={};e.type=n._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=sd.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;let t=[],r=[],i=[];return this.docs.forEach(o=>{o._document!==null&&(t.push(o._document),r.push(this._userDataWriter.convertObjectMap(o._document.data.value.mapValue.fields,"previous")),i.push(o.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}};function EH(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return le(61501,{type:n})}}function AR(n){n=vn(n,kt);let e=vn(n.firestore,ar);return mH(Cd(e),n._key).then(t=>VR(e,n,t))}Ys._jsonSchemaVersion="firestore/querySnapshot/1.0",Ys._jsonSchema={type:xt("string",Ys._jsonSchemaVersion),bundleSource:xt("string","QuerySnapshot"),bundleName:xt("string"),bundle:xt("string")};var yd=class extends zC{constructor(e){super(),this.firestore=e}convertBytes(e){return new Fo(e)}convertReference(e){let t=this.convertDocumentKey(e,this.firestore._databaseId);return new kt(this.firestore,null,t)}};function kR(n){n=vn(n,ui);let e=vn(n.firestore,ar),t=Cd(e),r=new yd(e);return IR(n._query),vH(t,n._query).then(i=>new Ys(e,r,n,i))}function OR(n,e,t){n=vn(n,kt);let r=vn(n.firestore,ar),i=_I(n.converter,e,t);return Sd(r,[gI(Kc(r),"setDoc",n._key,i,n.converter!==null,t).toMutation(n._key,$n.none())])}function RR(n,e,t,...r){n=vn(n,kt);let i=vn(n.firestore,ar),o=Kc(i),s;return s=typeof(e=ze(e))=="string"||e instanceof oa?yR(o,"updateDoc",n._key,e,t,r):_R(o,"updateDoc",n._key,e),Sd(i,[s.toMutation(n._key,$n.exists(!0))])}function NR(n){return Sd(vn(n.firestore,ar),[new jc(n._key,$n.none())])}function FR(n,e){let t=vn(n.firestore,ar),r=pI(n),i=_I(n.converter,e);return Sd(t,[gI(Kc(n.firestore),"addDoc",r._key,i,n.converter!==null,{}).toMutation(r._key,$n.exists(!1))]).then(()=>r)}function LR(n,...e){var t,r,i;n=ze(n);let o={includeMetadataChanges:!1,source:"default"},s=0;typeof e[s]!="object"||Gk(e[s])||(o=e[s++]);let a={includeMetadataChanges:o.includeMetadataChanges,source:o.source};if(Gk(e[s])){let m=e[s];e[s]=(t=m.next)===null||t===void 0?void 0:t.bind(m),e[s+1]=(r=m.error)===null||r===void 0?void 0:r.bind(m),e[s+2]=(i=m.complete)===null||i===void 0?void 0:i.bind(m)}let l,u,f;if(n instanceof kt)u=vn(n.firestore,ar),f=hm(n._key.path),l={next:m=>{e[s]&&e[s](VR(u,n,m))},error:e[s+1],complete:e[s+2]};else{let m=vn(n,ui);u=vn(m.firestore,ar),f=m._query;let _=new yd(u);l={next:E=>{e[s]&&e[s](new Ys(u,_,m,E))},error:e[s+1],complete:e[s+2]},IR(n._query)}return(function(_,E,x,F){let L=new md(F),W=new gd(E,L,x);return _.asyncQueue.enqueueAndForget(()=>b(null,null,function*(){return lI(yield nm(_),W)})),()=>{L.Ou(),_.asyncQueue.enqueueAndForget(()=>b(null,null,function*(){return uI(yield nm(_),W)}))}})(Cd(u),f,a,l)}function Sd(n,e){return(function(r,i){let o=new kr;return r.asyncQueue.enqueueAndForget(()=>b(null,null,function*(){return oH(yield gH(r),i,o)})),o.promise})(Cd(n),e)}function VR(n,e,t){let r=t.docs.get(e._key),i=new yd(n);return new Ks(n,i,e._key,r,new Gs(t.hasPendingWrites,t.fromCache),e.converter)}var qC=class{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=Kc(e)}set(e,t,r){this._verifyNotCommitted();let i=iE(e,this._firestore),o=_I(i.converter,t,r),s=gI(this._dataReader,"WriteBatch.set",i._key,o,i.converter!==null,r);return this._mutations.push(s.toMutation(i._key,$n.none())),this}update(e,t,r,...i){this._verifyNotCommitted();let o=iE(e,this._firestore),s;return s=typeof(t=ze(t))=="string"||t instanceof oa?yR(this._dataReader,"WriteBatch.update",o._key,t,r,i):_R(this._dataReader,"WriteBatch.update",o._key,t),this._mutations.push(s.toMutation(o._key,$n.exists(!0))),this}delete(e){this._verifyNotCommitted();let t=iE(e,this._firestore);return this._mutations=this._mutations.concat(new jc(t._key,$n.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new G(j.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}};function iE(n,e){if((n=ze(n)).firestore!==e)throw new G(j.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}function bm(){return new FC("serverTimestamp")}function UR(n){return new LC("increment",n)}function jR(n){return Cd(n=vn(n,ar)),new qC(n,e=>Sd(n,e))}(function(e,t=!0){(function(i){zc=i})(Po),Gt(new mt("firestore",(r,{instanceIdentifier:i,options:o})=>{let s=r.getProvider("app").getImmediate(),a=new ar(new aE(r.getProvider("auth-internal")),new uE(s,r.getProvider("app-check-internal")),(function(u,f){if(!Object.prototype.hasOwnProperty.apply(u.options,["projectId"]))throw new G(j.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Rg(u.options.projectId,f)})(s,i),s);return o=Object.assign({useFetchStreams:t},o),a._setSettings(o),a},"PUBLIC").setMultipleInstances(!0)),Re(ik,ok,e),Re(ik,ok,"esm2017")})();var at=class{constructor(e){return e}},BR="firestore",yI=class{constructor(){return Ao(BR)}};var bI=new X("angularfire2.firestore-instances");function CH(n,e){let t=Bs(BR,n,e);return t&&new at(t)}function IH(n){return(e,t)=>{let r=e.runOutsideAngular(()=>n(t));return new at(r)}}var SH={provide:yI,deps:[[new qt,bI]]},TH={provide:at,useFactory:CH,deps:[[new qt,bI],Mr]};function $R(n,...e){return Re("angularfire",ir.full,"fst"),tn([TH,SH,{provide:bI,useFactory:IH(n),multi:!0,deps:[xe,Ke,ni,Fi,[new qt,ed],[new qt,Ec],...e]}])}var Yc=Ne(FR,!0,2);var vt=Ne(gR,!0,2);var Ki=Ne(NR,!0,2);var Ae=Ne(pI,!0,2);var ft=Ne(AR,!0);var Dn=Ne(kR,!0);var HR=Ne(mR,!0);var qo=Ne(UR,!0,2);var Td=Ne(xR,!0,2);var zR=Ne(LR,!0);var Yi=Ne(DR,!0,2),_n=Ne(SR,!0,2);var Hn=Ne(OR,!0,2);var qR=Ne(MR,!0,2);var $t=Ne(RR,!0,2);var Ot=Ne(TR,!0,2),WR=Ne(jR,!0,2);var it=class n{auth=k(Un);firestore=k(at);user$=_g(this.auth);user;constructor(){JA(this.auth,e=>{this.user=e})}googleLogin(){return b(this,null,function*(){let e=new jw,t=yield ek(this.auth,e);this.user=t.user;let r=t.user;return r&&(yield this.ensureProfile(r)),r})}logout(){return b(this,null,function*(){return tk(this.auth)})}ensureProfile(e){return b(this,null,function*(){let t=Ae(this.firestore,`profiles/${e.uid}`);if((yield ft(t)).exists())yield $t(t,{lastLoggedInAt:new Date,updatedAt:new Date});else{let i={id:e.uid,name:e.displayName??"",email:e.email??"",bio:"",photoURL:e.photoURL??"",nbFollowers:0,nbFollowed:0,streaks:0,nbViews:0,nbUpvotes:0,xp:0,level:1,isActive:!0,role:"user",createdAt:new Date,updatedAt:new Date,lastLoggedInAt:new Date,socialLinks:{}};yield Hn(t,i)}})}static \u0275fac=function(t){return new(t||n)};static \u0275prov=Q({token:n,factory:n.\u0275fac,providedIn:"root"})};var cr=class n{firestore=k(at);getProfile(e){return b(this,null,function*(){let t=Ae(this.firestore,`profiles/${e}`),r=yield ft(t);return r.exists()?r.data():null})}updateProfile(e,t){return b(this,null,function*(){let r=Ae(this.firestore,`profiles/${e}`);yield $t(r,ne(H({},t),{updatedAt:new Date}))})}awardUserXP(e,t,r){return b(this,null,function*(){let i=Ae(this.firestore,`profiles/${e}`);yield $t(i,{xp:qo(t),updatedAt:new Date}),yield this.logXPAward(e,t,r),yield this.checkLevelUp(e)})}checkLevelUp(e){return b(this,null,function*(){let t=yield this.getProfile(e);if(!t)return;let r=this.calculateXPForLevel(t.level+1);if(t.xp>=r){let i=Ae(this.firestore,`profiles/${e}`);yield $t(i,{level:qo(1),updatedAt:new Date})}})}calculateXPForLevel(e){return Math.floor(100*Math.pow(1.5,e-1))}logXPAward(e,t,r){return b(this,null,function*(){let i=Ae(vt(this.firestore,`profiles/${e}/xpLogs`));yield Hn(i,{amount:t,reason:r,timestamp:new Date,totalAfter:(yield this.getProfile(e))?.xp||0})})}static \u0275fac=function(t){return new(t||n)};static \u0275prov=Q({token:n,factory:n.\u0275fac,providedIn:"root"})};var Qc=class n{firestore=k(at);addComment(e,t){return b(this,null,function*(){let r=vt(this.firestore,"comments");yield Yc(r,ne(H({storyId:e},t),{createdAt:new Date,status:"active"}))})}getComments(e){return b(this,null,function*(){let t=vt(this.firestore,"comments"),r=_n(t,Ot("storyId","==",e),Ot("status","==","active"),Yi("createdAt","desc"));return(yield Dn(r)).docs.map(o=>H({id:o.id},o.data()))})}deleteOwnComment(e,t,r){return b(this,null,function*(){let i=Ae(this.firestore,`comments/${t}`),o=yield ft(i);if(o.exists()){let s=o.data();if(s?.storyId===e&&s?.userId===r)yield $t(i,{status:"deleted"});else throw new Error("Not authorized to delete this comment")}})}countComments(e){return b(this,null,function*(){let t=vt(this.firestore,"comments"),r=_n(t,Ot("storyId","==",e),Ot("status","==","active"));return(yield Dn(r)).size})}static \u0275fac=function(t){return new(t||n)};static \u0275prov=Q({token:n,factory:n.\u0275fac,providedIn:"root"})};var di=class n{firestore=k(at);createStory(e){return b(this,null,function*(){try{let t=ne(H({},e),{createdAt:new Date,updatedAt:new Date,stats:{readTime:this.calculateReadTime(e.content),wordCount:this.calculateWordCount(e.content),readCount:0,voteCount:0,commentCount:0}}),r=vt(this.firestore,"stories"),i=yield Yc(r,t);return yield $t(i,{id:i.id}),i.id}catch(t){throw console.error("Error creating story:",t),new Error("Failed to create story")}})}updateStory(e,t){return b(this,null,function*(){try{let r=Ae(this.firestore,`stories/${e}`);yield $t(r,H(ne(H({},t),{updatedAt:new Date}),t.content&&{"stats.readTime":this.calculateReadTime(t.content),"stats.wordCount":this.calculateWordCount(t.content)}))}catch(r){throw console.error("Error updating story:",r),new Error("Failed to update story")}})}getStory(e){return b(this,null,function*(){try{let t=Ae(this.firestore,`stories/${e}`),r=yield ft(t);if(r.exists()){let i=r.data();return H({id:r.id},i)}return null}catch(t){return console.error("Error getting story:",t),null}})}getDraftsByAuthor(e){return b(this,null,function*(){try{let t=vt(this.firestore,"stories"),r=_n(t,Ot("authorId","==",e),Ot("status","==","draft"),Yi("updatedAt","desc"));return(yield Dn(r)).docs.map(o=>H({id:o.id},o.data()))}catch(t){return console.error("Error getting drafts:",t),[]}})}getPublishedByAuthor(e){return b(this,null,function*(){try{let t=vt(this.firestore,"stories"),r=_n(t,Ot("authorId","==",e),Ot("status","==","published"),Yi("createdAt","desc"));return(yield Dn(r)).docs.map(o=>H({id:o.id},o.data()))}catch(t){return console.error("Error getting published stories:",t),[]}})}lastDoc=null;hasMore=!0;resetPagination(){this.lastDoc=null,this.hasMore=!0}getStories(e,t=!1){return b(this,null,function*(){if(!this.hasMore)return[];try{let r=vt(this.firestore,"stories"),i;this.lastDoc?i=_n(r,Ot("status","==","published"),Yi("createdAt","desc"),qR(this.lastDoc),Td(e)):i=_n(r,Ot("status","==","published"),Yi("createdAt","desc"),Td(e));let o=yield Dn(i),s=o.docs.map(a=>H({id:a.id},a.data()));return this.lastDoc=o.docs.length>0?o.docs[o.docs.length-1]:this.lastDoc,o.docs.length<e&&(this.hasMore=!1),t?s:[...s]}catch(r){return console.error("Error getting stories:",r),[]}})}calculateWordCount(e){return e?e.replace(/<[^>]*>/g,"").trim().split(/\s+/).filter(r=>r.length>0).length:0}calculateReadTime(e){let r=this.calculateWordCount(e);return Math.max(1,Math.ceil(r/200))}deleteStory(e){return b(this,null,function*(){try{let t=Ae(this.firestore,`stories/${e}`);yield Ki(t)}catch(t){throw console.error("Error deleting story:",t),new Error("Failed to delete story")}})}deleteDraft(e){return b(this,null,function*(){try{let t=yield this.getStory(e);if(!t)throw new Error("Story not found");if(t.status!=="draft")throw new Error("Cannot delete a published story using deleteDraft method");let r=Ae(this.firestore,`stories/${e}`);yield Ki(r)}catch(t){throw console.error("Error deleting draft:",t),new Error("Failed to delete draft")}})}static \u0275fac=function(t){return new(t||n)};static \u0275prov=Q({token:n,factory:n.\u0275fac,providedIn:"root"})};var Wo=class n{firestore=k(at);auth=k(Un);toggleVote(e){return b(this,null,function*(){let t=this.auth.currentUser;if(!t)throw console.error("\u274C User not authenticated"),new Error("Not authenticated");let r=Ae(this.firestore,`stories/${e}/votes/${t.uid}`);try{let i=yield ft(r),o=Ae(this.firestore,`stories/${e}`);if(i.exists())yield Ki(r),yield $t(o,{"stats.voteCount":qo(-1)});else{let s={storyId:e,userId:t.uid,createdAt:new Date};yield Hn(r,s),yield $t(o,{"stats.voteCount":qo(1)})}}catch(i){throw console.error("\u274C Error in toggleVote:",i),i}})}hasVoted(e){return b(this,null,function*(){let t=this.auth.currentUser;if(!t)return!1;try{let r=Ae(this.firestore,`stories/${e}/votes/${t.uid}`);return(yield ft(r)).exists()}catch(r){return console.error("\u274C Error checking vote status:",r),!1}})}countVotes(e){return b(this,null,function*(){try{let t=Ae(this.firestore,`stories/${e}`),r=yield ft(t);return r.exists()?r.data()?.stats?.voteCount??0:0}catch(t){return console.error("\u274C Error counting votes:",t),0}})}testPermissions(e){return b(this,null,function*(){let t=this.auth.currentUser;if(t){try{let r=Ae(this.firestore,`stories/${e}/votes/${t.uid}`),i=yield ft(r)}catch(r){console.error("\u274C Cannot read vote document:",r)}try{let r=Ae(this.firestore,`stories/${e}`),i=yield ft(r)}catch(r){console.error("\u274C Cannot read story document:",r)}}})}static \u0275fac=function(t){return new(t||n)};static \u0275prov=Q({token:n,factory:n.\u0275fac,providedIn:"root"})};var n2=(()=>{class n{_renderer;_elementRef;onChange=t=>{};onTouched=()=>{};constructor(t,r){this._renderer=t,this._elementRef=r}setProperty(t,r){this._renderer.setProperty(this._elementRef.nativeElement,t,r)}registerOnTouched(t){this.onTouched=t}registerOnChange(t){this.onChange=t}setDisabledState(t){this.setProperty("disabled",t)}static \u0275fac=function(r){return new(r||n)(ee(Jn),ee(rn))};static \u0275dir=Ye({type:n})}return n})(),II=(()=>{class n extends n2{static \u0275fac=(()=>{let t;return function(i){return(t||(t=qr(n)))(i||n)}})();static \u0275dir=Ye({type:n,features:[An]})}return n})(),Mm=new X("");var AH={provide:Mm,useExisting:qn(()=>lr),multi:!0};function kH(){let n=er()?er().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}var OH=new X(""),lr=(()=>{class n extends n2{_compositionMode;_composing=!1;constructor(t,r,i){super(t,r),this._compositionMode=i,this._compositionMode==null&&(this._compositionMode=!kH())}writeValue(t){let r=t??"";this.setProperty("value",r)}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}static \u0275fac=function(r){return new(r||n)(ee(Jn),ee(rn),ee(OH,8))};static \u0275dir=Ye({type:n,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(r,i){r&1&&$("input",function(s){return i._handleInput(s.target.value)})("blur",function(){return i.onTouched()})("compositionstart",function(){return i._compositionStart()})("compositionend",function(s){return i._compositionEnd(s.target.value)})},standalone:!1,features:[ki([AH]),An]})}return n})();function RH(n){return n==null||r2(n)===0}function r2(n){return n==null?null:Array.isArray(n)||typeof n=="string"?n.length:n instanceof Set?n.size:null}var Pm=new X(""),i2=new X("");function NH(n){return RH(n.value)?{required:!0}:null}function FH(n){return e=>{let t=e.value?.length??r2(e.value);return t!==null&&t>n?{maxlength:{requiredLength:n,actualLength:t}}:null}}function GR(n){return null}function o2(n){return n!=null}function s2(n){return _o(n)?Ge(n):n}function a2(n){let e={};return n.forEach(t=>{e=t!=null?H(H({},e),t):e}),Object.keys(e).length===0?null:e}function c2(n,e){return e.map(t=>t(n))}function LH(n){return!n.validate}function l2(n){return n.map(e=>LH(e)?e:t=>e.validate(t))}function VH(n){if(!n)return null;let e=n.filter(o2);return e.length==0?null:function(t){return a2(c2(t,e))}}function SI(n){return n!=null?VH(l2(n)):null}function UH(n){if(!n)return null;let e=n.filter(o2);return e.length==0?null:function(t){let r=c2(t,e).map(s2);return Vv(r).pipe(Ce(a2))}}function TI(n){return n!=null?UH(l2(n)):null}function KR(n,e){return n===null?[e]:Array.isArray(n)?[...n,e]:[n,e]}function jH(n){return n._rawValidators}function BH(n){return n._rawAsyncValidators}function wI(n){return n?Array.isArray(n)?n:[n]:[]}function Cm(n,e){return Array.isArray(n)?n.includes(e):n===e}function YR(n,e){let t=wI(e);return wI(n).forEach(i=>{Cm(t,i)||t.push(i)}),t}function QR(n,e){return wI(e).filter(t=>!Cm(n,t))}var Im=class{get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_composedValidatorFn;_composedAsyncValidatorFn;_rawValidators=[];_rawAsyncValidators=[];_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=SI(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=TI(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_onDestroyCallbacks=[];_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e=void 0){this.control&&this.control.reset(e)}hasError(e,t){return this.control?this.control.hasError(e,t):!1}getError(e,t){return this.control?this.control.getError(e,t):null}},Jc=class extends Im{name;get formDirective(){return null}get path(){return null}},kd=class extends Im{_parent=null;name=null;valueAccessor=null},Sm=class{_cd;constructor(e){this._cd=e}get isTouched(){return this._cd?.control?._touched?.(),!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return this._cd?.control?._pristine?.(),!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return this._cd?.control?._status?.(),!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return this._cd?._submitted?.(),!!this._cd?.submitted}},$H={"[class.ng-untouched]":"isUntouched","[class.ng-touched]":"isTouched","[class.ng-pristine]":"isPristine","[class.ng-dirty]":"isDirty","[class.ng-valid]":"isValid","[class.ng-invalid]":"isInvalid","[class.ng-pending]":"isPending"},Cve=ne(H({},$H),{"[class.ng-submitted]":"isSubmitted"}),fi=(()=>{class n extends Sm{constructor(t){super(t)}static \u0275fac=function(r){return new(r||n)(ee(kd,2))};static \u0275dir=Ye({type:n,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(r,i){r&2&&he("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)},standalone:!1,features:[An]})}return n})(),u2=(()=>{class n extends Sm{constructor(t){super(t)}static \u0275fac=function(r){return new(r||n)(ee(Jc,10))};static \u0275dir=Ye({type:n,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(r,i){r&2&&he("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)("ng-submitted",i.isSubmitted)},standalone:!1,features:[An]})}return n})();var Dd="VALID",Em="INVALID",Zc="PENDING",xd="DISABLED",Go=class{},Tm=class extends Go{value;source;constructor(e,t){super(),this.value=e,this.source=t}},Pd=class extends Go{pristine;source;constructor(e,t){super(),this.pristine=e,this.source=t}},Ad=class extends Go{touched;source;constructor(e,t){super(),this.touched=e,this.source=t}},Xc=class extends Go{status;source;constructor(e,t){super(),this.status=e,this.source=t}},EI=class extends Go{source;constructor(e){super(),this.source=e}},CI=class extends Go{source;constructor(e){super(),this.source=e}};function d2(n){return(Am(n)?n.validators:n)||null}function HH(n){return Array.isArray(n)?SI(n):n||null}function f2(n,e){return(Am(e)?e.asyncValidators:n)||null}function zH(n){return Array.isArray(n)?TI(n):n||null}function Am(n){return n!=null&&!Array.isArray(n)&&typeof n=="object"}function qH(n,e,t){let r=n.controls;if(!(e?Object.keys(r):r).length)throw new Z(1e3,"");if(!r[t])throw new Z(1001,"")}function WH(n,e,t){n._forEachChild((r,i)=>{if(t[i]===void 0)throw new Z(1002,"")})}var Dm=class{_pendingDirty=!1;_hasOwnPendingAsyncValidator=null;_pendingTouched=!1;_onCollectionChange=()=>{};_updateOn;_parent=null;_asyncValidationSubscription;_composedValidatorFn;_composedAsyncValidatorFn;_rawValidators;_rawAsyncValidators;value;constructor(e,t){this._assignValidators(e),this._assignAsyncValidators(t)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get status(){return Vt(this.statusReactive)}set status(e){Vt(()=>this.statusReactive.set(e))}_status=ic(()=>this.statusReactive());statusReactive=wn(void 0);get valid(){return this.status===Dd}get invalid(){return this.status===Em}get pending(){return this.status==Zc}get disabled(){return this.status===xd}get enabled(){return this.status!==xd}errors;get pristine(){return Vt(this.pristineReactive)}set pristine(e){Vt(()=>this.pristineReactive.set(e))}_pristine=ic(()=>this.pristineReactive());pristineReactive=wn(!0);get dirty(){return!this.pristine}get touched(){return Vt(this.touchedReactive)}set touched(e){Vt(()=>this.touchedReactive.set(e))}_touched=ic(()=>this.touchedReactive());touchedReactive=wn(!1);get untouched(){return!this.touched}_events=new We;events=this._events.asObservable();valueChanges;statusChanges;get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._assignValidators(e)}setAsyncValidators(e){this._assignAsyncValidators(e)}addValidators(e){this.setValidators(YR(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(YR(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(QR(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(QR(e,this._rawAsyncValidators))}hasValidator(e){return Cm(this._rawValidators,e)}hasAsyncValidator(e){return Cm(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){let t=this.touched===!1;this.touched=!0;let r=e.sourceControl??this;this._parent&&!e.onlySelf&&this._parent.markAsTouched(ne(H({},e),{sourceControl:r})),t&&e.emitEvent!==!1&&this._events.next(new Ad(!0,r))}markAllAsDirty(e={}){this.markAsDirty({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:this}),this._forEachChild(t=>t.markAllAsDirty(e))}markAllAsTouched(e={}){this.markAsTouched({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:this}),this._forEachChild(t=>t.markAllAsTouched(e))}markAsUntouched(e={}){let t=this.touched===!0;this.touched=!1,this._pendingTouched=!1;let r=e.sourceControl??this;this._forEachChild(i=>{i.markAsUntouched({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:r})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e,r),t&&e.emitEvent!==!1&&this._events.next(new Ad(!1,r))}markAsDirty(e={}){let t=this.pristine===!0;this.pristine=!1;let r=e.sourceControl??this;this._parent&&!e.onlySelf&&this._parent.markAsDirty(ne(H({},e),{sourceControl:r})),t&&e.emitEvent!==!1&&this._events.next(new Pd(!1,r))}markAsPristine(e={}){let t=this.pristine===!1;this.pristine=!0,this._pendingDirty=!1;let r=e.sourceControl??this;this._forEachChild(i=>{i.markAsPristine({onlySelf:!0,emitEvent:e.emitEvent})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e,r),t&&e.emitEvent!==!1&&this._events.next(new Pd(!0,r))}markAsPending(e={}){this.status=Zc;let t=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new Xc(this.status,t)),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.markAsPending(ne(H({},e),{sourceControl:t}))}disable(e={}){let t=this._parentMarkedDirty(e.onlySelf);this.status=xd,this.errors=null,this._forEachChild(i=>{i.disable(ne(H({},e),{onlySelf:!0}))}),this._updateValue();let r=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new Tm(this.value,r)),this._events.next(new Xc(this.status,r)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(ne(H({},e),{skipPristineCheck:t}),this),this._onDisabledChange.forEach(i=>i(!0))}enable(e={}){let t=this._parentMarkedDirty(e.onlySelf);this.status=Dd,this._forEachChild(r=>{r.enable(ne(H({},e),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors(ne(H({},e),{skipPristineCheck:t}),this),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(e,t){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine({},t),this._parent._updateTouched({},t))}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){if(this._setInitialStatus(),this._updateValue(),this.enabled){let r=this._cancelExistingSubscription();this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===Dd||this.status===Zc)&&this._runAsyncValidator(r,e.emitEvent)}let t=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new Tm(this.value,t)),this._events.next(new Xc(this.status,t)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(ne(H({},e),{sourceControl:t}))}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?xd:Dd}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e,t){if(this.asyncValidator){this.status=Zc,this._hasOwnPendingAsyncValidator={emitEvent:t!==!1,shouldHaveEmitted:e!==!1};let r=s2(this.asyncValidator(this));this._asyncValidationSubscription=r.subscribe(i=>{this._hasOwnPendingAsyncValidator=null,this.setErrors(i,{emitEvent:t,shouldHaveEmitted:e})})}}_cancelExistingSubscription(){if(this._asyncValidationSubscription){this._asyncValidationSubscription.unsubscribe();let e=(this._hasOwnPendingAsyncValidator?.emitEvent||this._hasOwnPendingAsyncValidator?.shouldHaveEmitted)??!1;return this._hasOwnPendingAsyncValidator=null,e}return!1}setErrors(e,t={}){this.errors=e,this._updateControlsErrors(t.emitEvent!==!1,this,t.shouldHaveEmitted)}get(e){let t=e;return t==null||(Array.isArray(t)||(t=t.split(".")),t.length===0)?null:t.reduce((r,i)=>r&&r._find(i),this)}getError(e,t){let r=t?this.get(t):this;return r&&r.errors?r.errors[e]:null}hasError(e,t){return!!this.getError(e,t)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e,t,r){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),(e||r)&&this._events.next(new Xc(this.status,t)),this._parent&&this._parent._updateControlsErrors(e,t,r)}_initObservables(){this.valueChanges=new et,this.statusChanges=new et}_calculateStatus(){return this._allControlsDisabled()?xd:this.errors?Em:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(Zc)?Zc:this._anyControlsHaveStatus(Em)?Em:Dd}_anyControlsHaveStatus(e){return this._anyControls(t=>t.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e,t){let r=!this._anyControlsDirty(),i=this.pristine!==r;this.pristine=r,this._parent&&!e.onlySelf&&this._parent._updatePristine(e,t),i&&this._events.next(new Pd(this.pristine,t))}_updateTouched(e={},t){this.touched=this._anyControlsTouched(),this._events.next(new Ad(this.touched,t)),this._parent&&!e.onlySelf&&this._parent._updateTouched(e,t)}_onDisabledChange=[];_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){Am(e)&&e.updateOn!=null&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){let t=this._parent&&this._parent.dirty;return!e&&!!t&&!this._parent._anyControlsDirty()}_find(e){return null}_assignValidators(e){this._rawValidators=Array.isArray(e)?e.slice():e,this._composedValidatorFn=HH(this._rawValidators)}_assignAsyncValidators(e){this._rawAsyncValidators=Array.isArray(e)?e.slice():e,this._composedAsyncValidatorFn=zH(this._rawAsyncValidators)}},xm=class extends Dm{constructor(e,t,r){super(d2(t),f2(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}controls;registerControl(e,t){return this.controls[e]?this.controls[e]:(this.controls[e]=t,t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange),t)}addControl(e,t,r={}){this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}removeControl(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}setControl(e,t,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],t&&this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,t={}){WH(this,!0,e),Object.keys(e).forEach(r=>{qH(this,!0,r),this.controls[r].setValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){e!=null&&(Object.keys(e).forEach(r=>{let i=this.controls[r];i&&i.patchValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e={},t={}){this._forEachChild((r,i)=>{r.reset(e?e[i]:null,{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t,this),this._updateTouched(t,this),this.updateValueAndValidity(t)}getRawValue(){return this._reduceChildren({},(e,t,r)=>(e[r]=t.getRawValue(),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(t,r)=>r._syncPendingControls()?!0:t);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){Object.keys(this.controls).forEach(t=>{let r=this.controls[t];r&&e(r,t)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(let[t,r]of Object.entries(this.controls))if(this.contains(t)&&e(r))return!0;return!1}_reduceValue(){let e={};return this._reduceChildren(e,(t,r,i)=>((r.enabled||this.disabled)&&(t[i]=r.value),t))}_reduceChildren(e,t){let r=e;return this._forEachChild((i,o)=>{r=t(r,i,o)}),r}_allControlsDisabled(){for(let e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(e){return this.controls.hasOwnProperty(e)?this.controls[e]:null}};var DI=new X("",{providedIn:"root",factory:()=>xI}),xI="always";function GH(n,e){return[...e.path,n]}function h2(n,e,t=xI){p2(n,e),e.valueAccessor.writeValue(n.value),(n.disabled||t==="always")&&e.valueAccessor.setDisabledState?.(n.disabled),YH(n,e),ZH(n,e),QH(n,e),KH(n,e)}function ZR(n,e){n.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function KH(n,e){if(e.valueAccessor.setDisabledState){let t=r=>{e.valueAccessor.setDisabledState(r)};n.registerOnDisabledChange(t),e._registerOnDestroy(()=>{n._unregisterOnDisabledChange(t)})}}function p2(n,e){let t=jH(n);e.validator!==null?n.setValidators(KR(t,e.validator)):typeof t=="function"&&n.setValidators([t]);let r=BH(n);e.asyncValidator!==null?n.setAsyncValidators(KR(r,e.asyncValidator)):typeof r=="function"&&n.setAsyncValidators([r]);let i=()=>n.updateValueAndValidity();ZR(e._rawValidators,i),ZR(e._rawAsyncValidators,i)}function YH(n,e){e.valueAccessor.registerOnChange(t=>{n._pendingValue=t,n._pendingChange=!0,n._pendingDirty=!0,n.updateOn==="change"&&g2(n,e)})}function QH(n,e){e.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,n.updateOn==="blur"&&n._pendingChange&&g2(n,e),n.updateOn!=="submit"&&n.markAsTouched()})}function g2(n,e){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}function ZH(n,e){let t=(r,i)=>{e.valueAccessor.writeValue(r),i&&e.viewToModelUpdate(r)};n.registerOnChange(t),e._registerOnDestroy(()=>{n._unregisterOnChange(t)})}function XH(n,e){n==null,p2(n,e)}function JH(n,e){if(!n.hasOwnProperty("model"))return!1;let t=n.model;return t.isFirstChange()?!0:!Object.is(e,t.currentValue)}function ez(n){return Object.getPrototypeOf(n.constructor)===II}function tz(n,e){n._syncPendingControls(),e.forEach(t=>{let r=t.control;r.updateOn==="submit"&&r._pendingChange&&(t.viewToModelUpdate(r._pendingValue),r._pendingChange=!1)})}function nz(n,e){if(!e)return null;Array.isArray(e);let t,r,i;return e.forEach(o=>{o.constructor===lr?t=o:ez(o)?r=o:i=o}),i||r||t||null}var rz={provide:Jc,useExisting:qn(()=>MI)},Md=Promise.resolve(),MI=(()=>{class n extends Jc{callSetDisabledState;get submitted(){return Vt(this.submittedReactive)}_submitted=ic(()=>this.submittedReactive());submittedReactive=wn(!1);_directives=new Set;form;ngSubmit=new et;options;constructor(t,r,i){super(),this.callSetDisabledState=i,this.form=new xm({},SI(t),TI(r))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(t){Md.then(()=>{let r=this._findContainer(t.path);t.control=r.registerControl(t.name,t.control),h2(t.control,t,this.callSetDisabledState),t.control.updateValueAndValidity({emitEvent:!1}),this._directives.add(t)})}getControl(t){return this.form.get(t.path)}removeControl(t){Md.then(()=>{let r=this._findContainer(t.path);r&&r.removeControl(t.name),this._directives.delete(t)})}addFormGroup(t){Md.then(()=>{let r=this._findContainer(t.path),i=new xm({});XH(i,t),r.registerControl(t.name,i),i.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(t){Md.then(()=>{let r=this._findContainer(t.path);r&&r.removeControl(t.name)})}getFormGroup(t){return this.form.get(t.path)}updateModel(t,r){Md.then(()=>{this.form.get(t.path).setValue(r)})}setValue(t){this.control.setValue(t)}onSubmit(t){return this.submittedReactive.set(!0),tz(this.form,this._directives),this.ngSubmit.emit(t),this.form._events.next(new EI(this.control)),t?.target?.method==="dialog"}onReset(){this.resetForm()}resetForm(t=void 0){this.form.reset(t),this.submittedReactive.set(!1),this.form._events.next(new CI(this.form))}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.form._updateOn=this.options.updateOn)}_findContainer(t){return t.pop(),t.length?this.form.get(t):this.form}static \u0275fac=function(r){return new(r||n)(ee(Pm,10),ee(i2,10),ee(DI,8))};static \u0275dir=Ye({type:n,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(r,i){r&1&&$("submit",function(s){return i.onSubmit(s)})("reset",function(){return i.onReset()})},inputs:{options:[0,"ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],standalone:!1,features:[ki([rz]),An]})}return n})();function XR(n,e){let t=n.indexOf(e);t>-1&&n.splice(t,1)}function JR(n){return typeof n=="object"&&n!==null&&Object.keys(n).length===2&&"value"in n&&"disabled"in n}var iz=class extends Dm{defaultValue=null;_onChange=[];_pendingValue;_pendingChange=!1;constructor(e=null,t,r){super(d2(t),f2(r,t)),this._applyFormState(e),this._setUpdateStrategy(t),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),Am(t)&&(t.nonNullable||t.initialValueIsDefault)&&(JR(e)?this.defaultValue=e.value:this.defaultValue=e)}setValue(e,t={}){this.value=this._pendingValue=e,this._onChange.length&&t.emitModelToViewChange!==!1&&this._onChange.forEach(r=>r(this.value,t.emitViewToModelChange!==!1)),this.updateValueAndValidity(t)}patchValue(e,t={}){this.setValue(e,t)}reset(e=this.defaultValue,t={}){this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){XR(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){XR(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return this.updateOn==="submit"&&(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),this._pendingChange)?(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),!0):!1}_applyFormState(e){JR(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}};var oz={provide:kd,useExisting:qn(()=>Nr)},e2=Promise.resolve(),Nr=(()=>{class n extends kd{_changeDetectorRef;callSetDisabledState;control=new iz;static ngAcceptInputType_isDisabled;_registered=!1;viewModel;name="";isDisabled;model;options;update=new et;constructor(t,r,i,o,s,a){super(),this._changeDetectorRef=s,this.callSetDisabledState=a,this._parent=t,this._setValidators(r),this._setAsyncValidators(i),this.valueAccessor=nz(this,o)}ngOnChanges(t){if(this._checkForErrors(),!this._registered||"name"in t){if(this._registered&&(this._checkName(),this.formDirective)){let r=t.name.previousValue;this.formDirective.removeControl({name:r,path:this._getPath(r)})}this._setUpControl()}"isDisabled"in t&&this._updateDisabled(t),JH(t,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!!(this.options&&this.options.standalone)}_setUpStandalone(){h2(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._checkName()}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),!this._isStandalone()&&this.name}_updateValue(t){e2.then(()=>{this.control.setValue(t,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(t){let r=t.isDisabled.currentValue,i=r!==0&&bo(r);e2.then(()=>{i&&!this.control.disabled?this.control.disable():!i&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(t){return this._parent?GH(t,this._parent):[t]}static \u0275fac=function(r){return new(r||n)(ee(Jc,9),ee(Pm,10),ee(i2,10),ee(Mm,10),ee(Oi,8),ee(DI,8))};static \u0275dir=Ye({type:n,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:[0,"disabled","isDisabled"],model:[0,"ngModel","model"],options:[0,"ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],standalone:!1,features:[ki([oz]),An,zr]})}return n})();var m2=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275dir=Ye({type:n,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""],standalone:!1})}return n})();var sz={provide:Mm,useExisting:qn(()=>km),multi:!0};function v2(n,e){return n==null?`${e}`:(e&&typeof e=="object"&&(e="Object"),`${n}: ${e}`.slice(0,50))}function az(n){return n.split(":")[0]}var km=(()=>{class n extends II{value;_optionMap=new Map;_idCounter=0;set compareWith(t){this._compareWith=t}_compareWith=Object.is;appRefInjector=k(Ai).injector;destroyRef=k(yr);cdr=k(Oi);_queuedWrite=!1;_writeValueAfterRender(){this._queuedWrite||this.appRefInjector.destroyed||(this._queuedWrite=!0,ou({write:()=>{this.destroyRef.destroyed||(this._queuedWrite=!1,this.writeValue(this.value))}},{injector:this.appRefInjector}))}writeValue(t){this.cdr.markForCheck(),this.value=t;let r=this._getOptionId(t),i=v2(r,t);this.setProperty("value",i)}registerOnChange(t){this.onChange=r=>{this.value=this._getOptionValue(r),t(this.value)}}_registerOption(){return(this._idCounter++).toString()}_getOptionId(t){for(let r of this._optionMap.keys())if(this._compareWith(this._optionMap.get(r),t))return r;return null}_getOptionValue(t){let r=az(t);return this._optionMap.has(r)?this._optionMap.get(r):t}static \u0275fac=(()=>{let t;return function(i){return(t||(t=qr(n)))(i||n)}})();static \u0275dir=Ye({type:n,selectors:[["select","formControlName","",3,"multiple",""],["select","formControl","",3,"multiple",""],["select","ngModel","",3,"multiple",""]],hostBindings:function(r,i){r&1&&$("change",function(s){return i.onChange(s.target.value)})("blur",function(){return i.onTouched()})},inputs:{compareWith:"compareWith"},standalone:!1,features:[ki([sz]),An]})}return n})(),_2=(()=>{class n{_element;_renderer;_select;id;constructor(t,r,i){this._element=t,this._renderer=r,this._select=i,this._select&&(this.id=this._select._registerOption())}set ngValue(t){this._select!=null&&(this._select._optionMap.set(this.id,t),this._setElementValue(v2(this.id,t)),this._select._writeValueAfterRender())}set value(t){this._setElementValue(t),this._select&&this._select._writeValueAfterRender()}_setElementValue(t){this._renderer.setProperty(this._element.nativeElement,"value",t)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select._writeValueAfterRender())}static \u0275fac=function(r){return new(r||n)(ee(rn),ee(Jn),ee(km,9))};static \u0275dir=Ye({type:n,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"},standalone:!1})}return n})(),cz={provide:Mm,useExisting:qn(()=>y2),multi:!0};function t2(n,e){return n==null?`${e}`:(typeof e=="string"&&(e=`'${e}'`),e&&typeof e=="object"&&(e="Object"),`${n}: ${e}`.slice(0,50))}function lz(n){return n.split(":")[0]}var y2=(()=>{class n extends II{value;_optionMap=new Map;_idCounter=0;set compareWith(t){this._compareWith=t}_compareWith=Object.is;writeValue(t){this.value=t;let r;if(Array.isArray(t)){let i=t.map(o=>this._getOptionId(o));r=(o,s)=>{o._setSelected(i.indexOf(s.toString())>-1)}}else r=(i,o)=>{i._setSelected(!1)};this._optionMap.forEach(r)}registerOnChange(t){this.onChange=r=>{let i=[],o=r.selectedOptions;if(o!==void 0){let s=o;for(let a=0;a<s.length;a++){let l=s[a],u=this._getOptionValue(l.value);i.push(u)}}else{let s=r.options;for(let a=0;a<s.length;a++){let l=s[a];if(l.selected){let u=this._getOptionValue(l.value);i.push(u)}}}this.value=i,t(i)}}_registerOption(t){let r=(this._idCounter++).toString();return this._optionMap.set(r,t),r}_getOptionId(t){for(let r of this._optionMap.keys())if(this._compareWith(this._optionMap.get(r)._value,t))return r;return null}_getOptionValue(t){let r=lz(t);return this._optionMap.has(r)?this._optionMap.get(r)._value:t}static \u0275fac=(()=>{let t;return function(i){return(t||(t=qr(n)))(i||n)}})();static \u0275dir=Ye({type:n,selectors:[["select","multiple","","formControlName",""],["select","multiple","","formControl",""],["select","multiple","","ngModel",""]],hostBindings:function(r,i){r&1&&$("change",function(s){return i.onChange(s.target)})("blur",function(){return i.onTouched()})},inputs:{compareWith:"compareWith"},standalone:!1,features:[ki([cz]),An]})}return n})(),b2=(()=>{class n{_element;_renderer;_select;id;_value;constructor(t,r,i){this._element=t,this._renderer=r,this._select=i,this._select&&(this.id=this._select._registerOption(this))}set ngValue(t){this._select!=null&&(this._value=t,this._setElementValue(t2(this.id,t)),this._select.writeValue(this._select.value))}set value(t){this._select?(this._value=t,this._setElementValue(t2(this.id,t)),this._select.writeValue(this._select.value)):this._setElementValue(t)}_setElementValue(t){this._renderer.setProperty(this._element.nativeElement,"value",t)}_setSelected(t){this._renderer.setProperty(this._element.nativeElement,"selected",t)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}static \u0275fac=function(r){return new(r||n)(ee(rn),ee(Jn),ee(y2,9))};static \u0275dir=Ye({type:n,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"},standalone:!1})}return n})();function uz(n){return typeof n=="number"?n:parseInt(n,10)}var w2=(()=>{class n{_validator=GR;_onChange;_enabled;ngOnChanges(t){if(this.inputName in t){let r=this.normalizeInput(t[this.inputName].currentValue);this._enabled=this.enabled(r),this._validator=this._enabled?this.createValidator(r):GR,this._onChange&&this._onChange()}}validate(t){return this._validator(t)}registerOnValidatorChange(t){this._onChange=t}enabled(t){return t!=null}static \u0275fac=function(r){return new(r||n)};static \u0275dir=Ye({type:n,features:[zr]})}return n})();var dz={provide:Pm,useExisting:qn(()=>ca),multi:!0};var ca=(()=>{class n extends w2{required;inputName="required";normalizeInput=bo;createValidator=t=>NH;enabled(t){return t}static \u0275fac=(()=>{let t;return function(i){return(t||(t=qr(n)))(i||n)}})();static \u0275dir=Ye({type:n,selectors:[["","required","","formControlName","",3,"type","checkbox"],["","required","","formControl","",3,"type","checkbox"],["","required","","ngModel","",3,"type","checkbox"]],hostVars:1,hostBindings:function(r,i){r&2&&pn("required",i._enabled?"":null)},inputs:{required:"required"},standalone:!1,features:[ki([dz]),An]})}return n})();var fz={provide:Pm,useExisting:qn(()=>la),multi:!0},la=(()=>{class n extends w2{maxlength;inputName="maxlength";normalizeInput=t=>uz(t);createValidator=t=>FH(t);static \u0275fac=(()=>{let t;return function(i){return(t||(t=qr(n)))(i||n)}})();static \u0275dir=Ye({type:n,selectors:[["","maxlength","","formControlName",""],["","maxlength","","formControl",""],["","maxlength","","ngModel",""]],hostVars:1,hostBindings:function(r,i){r&2&&pn("maxlength",i._enabled?i.maxlength:null)},inputs:{maxlength:"maxlength"},standalone:!1,features:[ki([fz]),An]})}return n})();var hz=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275mod=Er({type:n});static \u0275inj=Wn({})}return n})();var hi=(()=>{class n{static withConfig(t){return{ngModule:n,providers:[{provide:DI,useValue:t.callSetDisabledState??xI}]}}static \u0275fac=function(r){return new(r||n)};static \u0275mod=Er({type:n});static \u0275inj=Wn({imports:[hz]})}return n})();var el=class n{firestore=k(at);toggleBookmark(e){return b(this,null,function*(){let t=Ae(this.firestore,`bookmarks/${e.userId}_${e.storyId}`);(yield ft(t)).exists()?yield Ki(t):yield Hn(t,e)})}getUserBookmarks(e){return b(this,null,function*(){let t=vt(this.firestore,"bookmarks"),r=_n(t,Ot("userId","==",e));return(yield Dn(r)).docs.map(o=>o.data())})}static \u0275fac=function(t){return new(t||n)};static \u0275prov=Q({token:n,factory:n.\u0275fac,providedIn:"root"})};var gz=()=>[1,2,3,4,5],E2=n=>["/profile/",n],C2=n=>["/story/",n];function mz(n,e){if(n&1){let t=te();h(0,"button",22),$("click",function(){V(t);let i=S();return U(i.clearSearch())}),ce(),h(1,"svg",23),q(2,"line",24)(3,"line",25),p()()}}function vz(n,e){if(n&1){let t=te();h(0,"button",28),$("click",function(){let i=V(t).$implicit,o=S(2);return U(o.selectCategory(i))}),y(1),h(2,"span",34),y(3),p()()}if(n&2){let t=e.$implicit,r=S(2);he("active",r.selectedCategory===t),v(),ie(" ",t," "),v(2),K(r.getCategoryCount(t))}}function _z(n,e){if(n&1){let t=te();h(0,"div",26)(1,"div",27)(2,"button",28),$("click",function(){V(t);let i=S();return U(i.selectCategory(""))}),y(3," All Stories "),p(),B(4,vz,4,4,"button",29),p(),h(5,"button",30),$("click",function(){V(t);let i=S();return U(i.scrollSlider(-1))}),ce(),h(6,"svg",23),q(7,"polyline",31),p()(),Pe(),h(8,"button",32),$("click",function(){V(t);let i=S();return U(i.scrollSlider(1))}),ce(),h(9,"svg",23),q(10,"polyline",33),p()()()}if(n&2){let t=S();v(2),he("active",t.selectedCategory===""),v(2),C("ngForOf",t.availableCategories.slice(0,6))}}function yz(n,e){n&1&&(h(0,"div",37)(1,"div",38),q(2,"div",39),h(3,"div",40),q(4,"div",41)(5,"div",42),p()(),h(6,"div",43),q(7,"div",44)(8,"div",45)(9,"div",46)(10,"div",46)(11,"div",47),p()())}function bz(n,e){n&1&&(h(0,"div",35),B(1,yz,12,0,"div",36),p()),n&2&&(v(),C("ngForOf",Kr(1,gz)))}function wz(n,e){if(n&1&&q(0,"img",84),n&2){let t=S().$implicit;C("src",t.authorPhotoURL,st)("alt",t.authorName)}}function Ez(n,e){if(n&1&&(h(0,"span"),y(1),p()),n&2){let t=S().$implicit,r=S(2);v(),K(r.getAuthorInitials(t.authorName))}}function Cz(n,e){n&1&&(h(0,"span",59),y(1,"\u2022"),p())}function Iz(n,e){if(n&1&&(h(0,"span",85),y(1),p()),n&2){let t=S().$implicit,r=S(2);v(),K(r.getLanguageLabel(t.language))}}function Sz(n,e){if(n&1){let t=te();h(0,"button",86),$("click",function(i){V(t);let o=S().$implicit,s=S(2);return U(s.toggleBookmark(i,o))}),ce(),h(1,"svg",23),q(2,"path",87),p()()}if(n&2){let t=S().$implicit,r=S(2);he("bookmarked",r.isBookmarked(t.id))}}function Tz(n,e){if(n&1){let t=te();h(0,"article",50)(1,"div",51)(2,"div",52)(3,"div",53),B(4,wz,1,2,"img",54)(5,Ez,2,1,"span",55),p(),h(6,"div",56)(7,"h3",57),y(8),p(),h(9,"div",58)(10,"span"),y(11),p(),h(12,"span",59),y(13,"\u2022"),p(),h(14,"span"),y(15),p(),B(16,Cz,2,0,"span",60)(17,Iz,2,1,"span",61),p()()(),B(18,Sz,3,2,"button",62),p(),h(19,"div",63)(20,"div",64)(21,"span",65),y(22),p(),h(23,"h2",66),y(24),p()(),h(25,"p",67),y(26),p(),h(27,"div",68)(28,"span",69),y(29),p()()(),h(30,"div",70)(31,"div",71)(32,"button",72),ce(),h(33,"svg",73),q(34,"path",74),p(),Pe(),h(35,"span"),y(36),p()(),h(37,"button",75),ce(),h(38,"svg",23),q(39,"path",76),p(),Pe(),h(40,"span"),y(41),p()(),h(42,"button",77),$("click",function(i){let o=V(t).$implicit,s=S(2);return U(s.shareStory(i,o))}),ce(),h(43,"svg",23),q(44,"circle",78)(45,"circle",79)(46,"circle",80)(47,"line",81)(48,"line",82),p(),Pe(),h(49,"span"),y(50,"Share"),p()()(),h(51,"button",83),y(52,"Read Story"),p()()()}if(n&2){let t=e.$implicit,r=S(2);v(3),C("routerLink",On(21,E2,t.authorId)),v(),C("ngIf",t.authorPhotoURL),v(),C("ngIf",!t.authorPhotoURL),v(2),C("routerLink",On(23,E2,t.authorId)),v(),K(t.authorName),v(3),K(r.formatDate(t.createdAt)),v(4),ie("",r.getEstimatedReadTime(t.content)," min read"),v(),C("ngIf",t.language),v(),C("ngIf",t.language),v(),C("ngIf",r.currentUser),v(),C("routerLink",On(25,C2,t.id)),v(3),K(t.emoji),v(2),K(t.title),v(2),ie(" ",r.getContentSnippet(t.content,180)," "),v(2),pn("data-category",t.category),v(),ie(" ",t.category," "),v(3),C("disabled",!0),v(4),K(r.formatCount(t.stats.voteCount||0)),v(),C("disabled",!0),v(4),K(r.formatCount(t.stats.commentCount||0)),v(10),C("routerLink",On(27,C2,t.id))}}function Dz(n,e){if(n&1&&(h(0,"div",48),B(1,Tz,53,29,"article",49),p()),n&2){let t=S();v(),C("ngForOf",t.filteredStories)("ngForTrackBy",t.trackByStoryId)}}function xz(n,e){if(n&1){let t=te();h(0,"div",88)(1,"div",89)(2,"span",90),y(3,"\u{1F319}"),p()(),h(4,"h3"),y(5,"No stories found"),p(),h(6,"p"),y(7,"Try adjusting your search or explore different categories"),p(),h(8,"button",91),$("click",function(){V(t);let i=S();return U(i.clearAllFilters())}),y(9," Explore All Stories "),p()()}}function Mz(n,e){n&1&&(h(0,"span"),y(1,"Show More Stories"),p())}function Pz(n,e){n&1&&(h(0,"div",95),q(1,"span")(2,"span")(3,"span"),p())}function Az(n,e){if(n&1){let t=te();h(0,"div",92)(1,"button",93),$("click",function(){V(t);let i=S();return U(i.loadMoreStories())}),B(2,Mz,2,0,"span",55)(3,Pz,4,0,"div",94),p()()}if(n&2){let t=S();v(),C("disabled",t.isLoadingMore),v(),C("ngIf",!t.isLoadingMore),v(),C("ngIf",t.isLoadingMore)}}function kz(n,e){if(n&1){let t=te();h(0,"div",96)(1,"div",97),ce(),h(2,"svg",23),q(3,"circle",98)(4,"line",99)(5,"line",100),p(),Pe(),h(6,"span"),y(7),p()(),h(8,"button",101),$("click",function(){V(t);let i=S();return U(i.errorMessage="")}),y(9,"\xD7"),p()()}if(n&2){let t=S();he("show",t.errorMessage),v(7),K(t.errorMessage)}}var Rd=class n{storyService=k(di);voteService=k(Wo);commentService=k(Qc);bookmarkService=k(el);authService=k(it);profileService=k(cr);destroy$=new We;stories=[];isLoading=!0;isLoadingMore=!1;isLoadingStats=!1;errorMessage="";hasMoreStories=!0;currentUser=null;storiesPerPage=20;currentPage=1;searchQuery="";selectedCategory="";selectedLanguage="";sortType="newest";availableCategories=[];userBookmarks=[];bookmarkedStories=new Set;statsCache=new Map;CACHE_TTL=300*1e3;debounceTimeout;pendingStatsRequests=new Set;statsRequestQueue=[];ngOnInit(){this.setupAuthSubscription(),this.loadStoriesOptimized()}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete(),this.debounceTimeout&&clearTimeout(this.debounceTimeout)}setupAuthSubscription(){this.authService.user$.pipe(wi(this.destroy$)).subscribe(e=>{this.currentUser=e,e?this.loadUserBookmarks():(this.bookmarkedStories.clear(),this.userBookmarks=[])})}loadStoriesOptimized(e=!1){return b(this,null,function*(){try{e?this.isLoadingMore=!0:(this.isLoading=!0,this.errorMessage="",this.storyService.resetPagination());let t=yield this.storyService.getStories(this.storiesPerPage,e);t.length<this.storiesPerPage&&(this.hasMoreStories=!1);let r=t.map(i=>ne(H({},i),{stats:ne(H({},i.stats),{voteCount:i.stats.voteCount||0,commentCount:i.stats.commentCount||0})}));e?this.stories=[...this.stories,...r]:this.stories=r,this.updateAvailableCategories(),this.isLoading=!1,this.isLoadingMore=!1,this.loadStatsInBackground(t)}catch(t){console.error("Error loading stories:",t),this.errorMessage="Failed to load stories. Please try again later.",this.isLoading=!1,this.isLoadingMore=!1}})}loadStatsInBackground(e){return b(this,null,function*(){this.isLoadingStats=!0;try{for(let r=0;r<e.length;r+=5){let i=e.slice(r,r+5);yield this.loadStatsForChunk(i),r+5<e.length&&(yield new Promise(o=>setTimeout(o,100)))}}catch(t){console.error("Error loading stats:",t)}finally{this.isLoadingStats=!1}})}loadStatsForChunk(e){return b(this,null,function*(){let t=e.map(r=>b(this,null,function*(){let i=r.id,o=this.statsCache.get(i);if(o&&Date.now()-o.timestamp<this.CACHE_TTL){this.updateStoryStats(r.id,o.votes,o.comments);return}try{let[s,a]=yield Promise.all([this.voteService.countVotes(r.id),this.commentService.countComments(r.id)]);this.statsCache.set(i,{votes:s,comments:a,timestamp:Date.now()}),this.updateStoryStats(r.id,s,a)}catch(s){console.error(`Error loading stats for story ${r.id}:`,s)}}));yield Promise.all(t)})}updateStoryStats(e,t,r){let i=this.stories.findIndex(o=>o.id===e);i!==-1&&(this.stories[i]=ne(H({},this.stories[i]),{stats:ne(H({},this.stories[i].stats),{voteCount:t,commentCount:r})}))}loadUserBookmarks(){return b(this,null,function*(){if(this.currentUser?.uid)try{this.userBookmarks=yield this.bookmarkService.getUserBookmarks(this.currentUser.uid),this.bookmarkedStories.clear(),this.userBookmarks.forEach(e=>{this.bookmarkedStories.add(e.storyId)})}catch(e){console.error("Error loading user bookmarks:",e)}})}loadMoreStories(){return b(this,null,function*(){!this.hasMoreStories||this.isLoadingMore||(yield this.loadStoriesOptimized(!0))})}debounceSearch(){this.debounceTimeout&&clearTimeout(this.debounceTimeout),this.debounceTimeout=window.setTimeout(()=>{},300)}sortStories(e,t){switch(this.sortType){case"newest":return this.getDateValue(t.createdAt)-this.getDateValue(e.createdAt);case"oldest":return this.getDateValue(e.createdAt)-this.getDateValue(t.createdAt);case"az":return e.title.toLowerCase().localeCompare(t.title.toLowerCase());case"popular":case"trending":let r=e.stats.voteCount||0,i=t.stats.voteCount||0;return r!==i?i-r:this.getDateValue(t.createdAt)-this.getDateValue(e.createdAt);default:return 0}}getDateValue(e){return e instanceof Date?e.getTime():e&&typeof e.toDate=="function"?e.toDate().getTime():0}updateAvailableCategories(){let e=new Set(this.stories.map(t=>t.category).filter(Boolean));this.availableCategories=Array.from(e).sort()}get filteredStories(){return this.stories.filter(e=>{if(e.status!=="published")return!1;if(this.searchQuery){let t=this.searchQuery.toLowerCase();if(!(e.title.toLowerCase().includes(t)||e.content.toLowerCase().includes(t)||e.authorName.toLowerCase().includes(t)||e.tags&&e.tags.some(i=>i.toLowerCase().includes(t))))return!1}return!(this.selectedCategory&&e.category!==this.selectedCategory||this.selectedLanguage&&e.language!==this.selectedLanguage)}).sort((e,t)=>this.sortStories(e,t))}get paginatedStories(){return this.filteredStories}onSearchChange(){this.debounceSearch()}onFilterChange(){}onSortChange(){}clearSearch(){this.searchQuery="",this.onSearchChange()}clearAllFilters(){this.searchQuery="",this.selectedCategory="",this.selectedLanguage="",this.sortType="newest"}selectCategory(e){this.selectedCategory=e,this.onFilterChange()}toggleBookmark(e,t){return b(this,null,function*(){if(e.preventDefault(),e.stopPropagation(),!!this.currentUser?.uid)try{let r=this.isBookmarked(t.id);if(r?this.bookmarkedStories.delete(t.id):this.bookmarkedStories.add(t.id),r){let i=this.userBookmarks.find(o=>o.storyId===t.id);i&&(yield this.bookmarkService.toggleBookmark(i),this.userBookmarks=this.userBookmarks.filter(o=>o.id!==i.id))}else{let i={id:"",userId:this.currentUser.uid,storyId:t.id,title:t.title,authorName:t.authorName,emoji:t.emoji,category:t.category||"General",createdAt:new Date};yield this.bookmarkService.toggleBookmark(i),this.userBookmarks.push(ne(H({},i),{createdAt:new Date}))}}catch(r){console.error("Error toggling bookmark:",r),this.isBookmarked(t.id)?this.bookmarkedStories.delete(t.id):this.bookmarkedStories.add(t.id)}})}shareStory(e,t){if(e.preventDefault(),e.stopPropagation(),navigator.share)navigator.share({title:t.title,url:window.location.origin+"/story/"+t.id});else{let r=window.location.origin+"/story/"+t.id;navigator.clipboard.writeText(r).then(()=>{})}}scrollSlider(e){let t=document.querySelector(".quick-filters-slider");t&&t.scrollBy({left:e*200,behavior:"smooth"})}trackByStoryId(e,t){return t.id}getAuthorInitials(e){return e.split(" ").map(t=>t.charAt(0).toUpperCase()).join("").substring(0,2)}getCategoryCount(e){return this.stories.filter(t=>t.category===e).length}formatDate(e){try{let t=e instanceof Date?e:e.toDate(),i=Math.abs(new Date().getTime()-t.getTime()),o=Math.floor(i/(1e3*60*60*24)),s=Math.floor(i/(1e3*60*60));return s<1?"just now":s<24?`${s}h ago`:o<7?`${o}d ago`:t.toLocaleDateString("en-US",{month:"short",day:"numeric"})}catch{return"Unknown date"}}getEstimatedReadTime(e){let r=e.split(/\s+/).length;return Math.max(1,Math.ceil(r/200))}getContentSnippet(e,t=180){if(!e)return"";let r=e.replace(/<[^>]*>/g,"");return r.length>t?r.substring(0,t)+"...":r}getLanguageLabel(e){return{en:"English",ar:"\u0627\u0644\u0639\u0631\u0628\u064A\u0629",fr:"Fran\xE7ais"}[e]||e.toUpperCase()}formatCount(e){return e>=1e3?(e/1e3).toFixed(1)+"K":e.toString()}isBookmarked(e){return this.bookmarkedStories.has(e)}cleanupCache(){let e=Date.now();for(let[t,r]of this.statsCache.entries())e-r.timestamp>this.CACHE_TTL&&this.statsCache.delete(t)}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=Xe({type:n,selectors:[["app-stories"]],decls:25,vars:8,consts:[[1,"unposted-feed"],[1,"feed-header"],[1,"header-content"],[1,"brand"],[1,"moon-icon"],[1,"tagline"],[1,"header-actions"],[1,"search-container"],["viewBox","0 0 24 24","fill","none","stroke","currentColor",1,"search-icon"],["cx","11","cy","11","r","8"],["d","M21 21l-4.35-4.35"],["type","text","placeholder","Search stories...",1,"search-input",3,"ngModelChange","input","ngModel"],["class","search-clear",3,"click",4,"ngIf"],["routerLink","/write",1,"write-btn"],[1,"feed-container"],[1,"feed-content"],["class","quick-filters-container",4,"ngIf"],["class","loading-state",4,"ngIf"],["class","stories-feed",4,"ngIf"],["class","empty-state",4,"ngIf"],["class","load-more-container",4,"ngIf"],["class","error-toast",3,"show",4,"ngIf"],[1,"search-clear",3,"click"],["viewBox","0 0 24 24","fill","none","stroke","currentColor"],["x1","18","y1","6","x2","6","y2","18"],["x1","6","y1","6","x2","18","y2","18"],[1,"quick-filters-container"],[1,"quick-filters-slider"],[1,"filter-tag",3,"click"],["class","filter-tag",3,"active","click",4,"ngFor","ngForOf"],[1,"slider-nav","prev",3,"click"],["points","15,18 9,12 15,6"],[1,"slider-nav","next",3,"click"],["points","9,6 15,12 9,18"],[1,"tag-count"],[1,"loading-state"],["class","story-skeleton",4,"ngFor","ngForOf"],[1,"story-skeleton"],[1,"skeleton-header"],[1,"skeleton-avatar"],[1,"skeleton-meta"],[1,"skeleton-line","short"],[1,"skeleton-line","shorter"],[1,"skeleton-content"],[1,"skeleton-line","title"],[1,"skeleton-line","subtitle"],[1,"skeleton-line"],[1,"skeleton-line","medium"],[1,"stories-feed"],["class","story-card",4,"ngFor","ngForOf","ngForTrackBy"],[1,"story-card"],[1,"story-header"],[1,"author-info"],[1,"author-avatar",3,"routerLink"],[3,"src","alt",4,"ngIf"],[4,"ngIf"],[1,"author-details"],[1,"author-name",3,"routerLink"],[1,"story-meta"],[1,"separator"],["class","separator",4,"ngIf"],["class","language",4,"ngIf"],["class","bookmark-btn",3,"bookmarked","click",4,"ngIf"],[1,"story-content",3,"routerLink"],[1,"story-title-section"],[1,"story-emoji"],[1,"story-title"],[1,"story-preview"],[1,"story-category"],[1,"category-badge"],[1,"story-actions"],[1,"engagement-actions"],[1,"action-btn","upvote",3,"disabled"],["viewBox","0 0 24 24","width","24","height","24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round"],["d","M12 19V5M5 12l7-7 7 7"],[1,"action-btn","comment",3,"disabled"],["d","M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"],[1,"action-btn","share",3,"click"],["cx","18","cy","5","r","3"],["cx","6","cy","12","r","3"],["cx","18","cy","19","r","3"],["x1","8.59","y1","13.51","x2","15.42","y2","17.49"],["x1","15.41","y1","6.51","x2","8.59","y2","10.49"],[1,"read-more",3,"routerLink"],[3,"src","alt"],[1,"language"],[1,"bookmark-btn",3,"click"],["d","M19 21l-7-4-7 4V5a2 2 0 0 1 2-2h10a2 2 0 0 1 2 2v16z"],[1,"empty-state"],[1,"empty-illustration"],[1,"moon-icon","large"],[1,"explore-btn",3,"click"],[1,"load-more-container"],[1,"load-more-btn",3,"click","disabled"],["class","loading-dots",4,"ngIf"],[1,"loading-dots"],[1,"error-toast"],[1,"toast-content"],["cx","12","cy","12","r","10"],["x1","15","y1","9","x2","9","y2","15"],["x1","9","y1","9","x2","15","y2","15"],[1,"toast-close",3,"click"]],template:function(t,r){t&1&&(h(0,"div",0)(1,"header",1)(2,"div",2)(3,"div",3)(4,"span",4),y(5,"\u{1F319}"),p(),h(6,"span",5),y(7,"Where untold stories find their voice"),p()(),h(8,"div",6)(9,"div",7),ce(),h(10,"svg",8),q(11,"circle",9)(12,"path",10),p(),Pe(),h(13,"input",11),It("ngModelChange",function(o){return Pt(r.searchQuery,o)||(r.searchQuery=o),o}),$("input",function(){return r.onSearchChange()}),p(),B(14,mz,4,0,"button",12),p(),h(15,"button",13),y(16,"Write Story"),p()()()(),h(17,"main",14)(18,"div",15),B(19,_z,11,3,"div",16)(20,bz,2,2,"div",17)(21,Dz,2,2,"div",18)(22,xz,10,0,"div",19)(23,Az,4,3,"div",20),p()(),B(24,kz,10,3,"div",21),p()),t&2&&(v(13),Ct("ngModel",r.searchQuery),v(),C("ngIf",r.searchQuery),v(5),C("ngIf",!r.isLoading),v(),C("ngIf",r.isLoading),v(),C("ngIf",!r.isLoading),v(),C("ngIf",!r.isLoading&&r.filteredStories.length===0),v(),C("ngIf",!r.isLoading&&r.hasMoreStories&&r.filteredStories.length>0),v(),C("ngIf",r.errorMessage))},dependencies:[hi,lr,fi,Nr,xr,on,Sn,In,Rn],styles:['@font-face{font-family:Montserrat;font-style:normal;font-weight:300;font-display:swap;src:url(https://fonts.gstatic.com/s/montserrat/v31/JTUSjIg1_i6t8kCHKm459WRhyzbi.woff2) format("woff2");unicode-range:U+0460-052F,U+1C80-1C8A,U+20B4,U+2DE0-2DFF,U+A640-A69F,U+FE2E-FE2F}@font-face{font-family:Montserrat;font-style:normal;font-weight:300;font-display:swap;src:url(https://fonts.gstatic.com/s/montserrat/v31/JTUSjIg1_i6t8kCHKm459W1hyzbi.woff2) format("woff2");unicode-range:U+0301,U+0400-045F,U+0490-0491,U+04B0-04B1,U+2116}@font-face{font-family:Montserrat;font-style:normal;font-weight:300;font-display:swap;src:url(https://fonts.gstatic.com/s/montserrat/v31/JTUSjIg1_i6t8kCHKm459WZhyzbi.woff2) format("woff2");unicode-range:U+0102-0103,U+0110-0111,U+0128-0129,U+0168-0169,U+01A0-01A1,U+01AF-01B0,U+0300-0301,U+0303-0304,U+0308-0309,U+0323,U+0329,U+1EA0-1EF9,U+20AB}@font-face{font-family:Montserrat;font-style:normal;font-weight:300;font-display:swap;src:url(https://fonts.gstatic.com/s/montserrat/v31/JTUSjIg1_i6t8kCHKm459Wdhyzbi.woff2) format("woff2");unicode-range:U+0100-02BA,U+02BD-02C5,U+02C7-02CC,U+02CE-02D7,U+02DD-02FF,U+0304,U+0308,U+0329,U+1D00-1DBF,U+1E00-1E9F,U+1EF2-1EFF,U+2020,U+20A0-20AB,U+20AD-20C0,U+2113,U+2C60-2C7F,U+A720-A7FF}@font-face{font-family:Montserrat;font-style:normal;font-weight:300;font-display:swap;src:url(https://fonts.gstatic.com/s/montserrat/v31/JTUSjIg1_i6t8kCHKm459Wlhyw.woff2) format("woff2");unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+0304,U+0308,U+0329,U+2000-206F,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD}@font-face{font-family:Montserrat;font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/montserrat/v31/JTUSjIg1_i6t8kCHKm459WRhyzbi.woff2) format("woff2");unicode-range:U+0460-052F,U+1C80-1C8A,U+20B4,U+2DE0-2DFF,U+A640-A69F,U+FE2E-FE2F}@font-face{font-family:Montserrat;font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/montserrat/v31/JTUSjIg1_i6t8kCHKm459W1hyzbi.woff2) format("woff2");unicode-range:U+0301,U+0400-045F,U+0490-0491,U+04B0-04B1,U+2116}@font-face{font-family:Montserrat;font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/montserrat/v31/JTUSjIg1_i6t8kCHKm459WZhyzbi.woff2) format("woff2");unicode-range:U+0102-0103,U+0110-0111,U+0128-0129,U+0168-0169,U+01A0-01A1,U+01AF-01B0,U+0300-0301,U+0303-0304,U+0308-0309,U+0323,U+0329,U+1EA0-1EF9,U+20AB}@font-face{font-family:Montserrat;font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/montserrat/v31/JTUSjIg1_i6t8kCHKm459Wdhyzbi.woff2) format("woff2");unicode-range:U+0100-02BA,U+02BD-02C5,U+02C7-02CC,U+02CE-02D7,U+02DD-02FF,U+0304,U+0308,U+0329,U+1D00-1DBF,U+1E00-1E9F,U+1EF2-1EFF,U+2020,U+20A0-20AB,U+20AD-20C0,U+2113,U+2C60-2C7F,U+A720-A7FF}@font-face{font-family:Montserrat;font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/montserrat/v31/JTUSjIg1_i6t8kCHKm459Wlhyw.woff2) format("woff2");unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+0304,U+0308,U+0329,U+2000-206F,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD}@font-face{font-family:Montserrat;font-style:normal;font-weight:500;font-display:swap;src:url(https://fonts.gstatic.com/s/montserrat/v31/JTUSjIg1_i6t8kCHKm459WRhyzbi.woff2) format("woff2");unicode-range:U+0460-052F,U+1C80-1C8A,U+20B4,U+2DE0-2DFF,U+A640-A69F,U+FE2E-FE2F}@font-face{font-family:Montserrat;font-style:normal;font-weight:500;font-display:swap;src:url(https://fonts.gstatic.com/s/montserrat/v31/JTUSjIg1_i6t8kCHKm459W1hyzbi.woff2) format("woff2");unicode-range:U+0301,U+0400-045F,U+0490-0491,U+04B0-04B1,U+2116}@font-face{font-family:Montserrat;font-style:normal;font-weight:500;font-display:swap;src:url(https://fonts.gstatic.com/s/montserrat/v31/JTUSjIg1_i6t8kCHKm459WZhyzbi.woff2) format("woff2");unicode-range:U+0102-0103,U+0110-0111,U+0128-0129,U+0168-0169,U+01A0-01A1,U+01AF-01B0,U+0300-0301,U+0303-0304,U+0308-0309,U+0323,U+0329,U+1EA0-1EF9,U+20AB}@font-face{font-family:Montserrat;font-style:normal;font-weight:500;font-display:swap;src:url(https://fonts.gstatic.com/s/montserrat/v31/JTUSjIg1_i6t8kCHKm459Wdhyzbi.woff2) format("woff2");unicode-range:U+0100-02BA,U+02BD-02C5,U+02C7-02CC,U+02CE-02D7,U+02DD-02FF,U+0304,U+0308,U+0329,U+1D00-1DBF,U+1E00-1E9F,U+1EF2-1EFF,U+2020,U+20A0-20AB,U+20AD-20C0,U+2113,U+2C60-2C7F,U+A720-A7FF}@font-face{font-family:Montserrat;font-style:normal;font-weight:500;font-display:swap;src:url(https://fonts.gstatic.com/s/montserrat/v31/JTUSjIg1_i6t8kCHKm459Wlhyw.woff2) format("woff2");unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+0304,U+0308,U+0329,U+2000-206F,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD}@font-face{font-family:Montserrat;font-style:normal;font-weight:600;font-display:swap;src:url(https://fonts.gstatic.com/s/montserrat/v31/JTUSjIg1_i6t8kCHKm459WRhyzbi.woff2) format("woff2");unicode-range:U+0460-052F,U+1C80-1C8A,U+20B4,U+2DE0-2DFF,U+A640-A69F,U+FE2E-FE2F}@font-face{font-family:Montserrat;font-style:normal;font-weight:600;font-display:swap;src:url(https://fonts.gstatic.com/s/montserrat/v31/JTUSjIg1_i6t8kCHKm459W1hyzbi.woff2) format("woff2");unicode-range:U+0301,U+0400-045F,U+0490-0491,U+04B0-04B1,U+2116}@font-face{font-family:Montserrat;font-style:normal;font-weight:600;font-display:swap;src:url(https://fonts.gstatic.com/s/montserrat/v31/JTUSjIg1_i6t8kCHKm459WZhyzbi.woff2) format("woff2");unicode-range:U+0102-0103,U+0110-0111,U+0128-0129,U+0168-0169,U+01A0-01A1,U+01AF-01B0,U+0300-0301,U+0303-0304,U+0308-0309,U+0323,U+0329,U+1EA0-1EF9,U+20AB}@font-face{font-family:Montserrat;font-style:normal;font-weight:600;font-display:swap;src:url(https://fonts.gstatic.com/s/montserrat/v31/JTUSjIg1_i6t8kCHKm459Wdhyzbi.woff2) format("woff2");unicode-range:U+0100-02BA,U+02BD-02C5,U+02C7-02CC,U+02CE-02D7,U+02DD-02FF,U+0304,U+0308,U+0329,U+1D00-1DBF,U+1E00-1E9F,U+1EF2-1EFF,U+2020,U+20A0-20AB,U+20AD-20C0,U+2113,U+2C60-2C7F,U+A720-A7FF}@font-face{font-family:Montserrat;font-style:normal;font-weight:600;font-display:swap;src:url(https://fonts.gstatic.com/s/montserrat/v31/JTUSjIg1_i6t8kCHKm459Wlhyw.woff2) format("woff2");unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+0304,U+0308,U+0329,U+2000-206F,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD}@font-face{font-family:Montserrat;font-style:normal;font-weight:700;font-display:swap;src:url(https://fonts.gstatic.com/s/montserrat/v31/JTUSjIg1_i6t8kCHKm459WRhyzbi.woff2) format("woff2");unicode-range:U+0460-052F,U+1C80-1C8A,U+20B4,U+2DE0-2DFF,U+A640-A69F,U+FE2E-FE2F}@font-face{font-family:Montserrat;font-style:normal;font-weight:700;font-display:swap;src:url(https://fonts.gstatic.com/s/montserrat/v31/JTUSjIg1_i6t8kCHKm459W1hyzbi.woff2) format("woff2");unicode-range:U+0301,U+0400-045F,U+0490-0491,U+04B0-04B1,U+2116}@font-face{font-family:Montserrat;font-style:normal;font-weight:700;font-display:swap;src:url(https://fonts.gstatic.com/s/montserrat/v31/JTUSjIg1_i6t8kCHKm459WZhyzbi.woff2) format("woff2");unicode-range:U+0102-0103,U+0110-0111,U+0128-0129,U+0168-0169,U+01A0-01A1,U+01AF-01B0,U+0300-0301,U+0303-0304,U+0308-0309,U+0323,U+0329,U+1EA0-1EF9,U+20AB}@font-face{font-family:Montserrat;font-style:normal;font-weight:700;font-display:swap;src:url(https://fonts.gstatic.com/s/montserrat/v31/JTUSjIg1_i6t8kCHKm459Wdhyzbi.woff2) format("woff2");unicode-range:U+0100-02BA,U+02BD-02C5,U+02C7-02CC,U+02CE-02D7,U+02DD-02FF,U+0304,U+0308,U+0329,U+1D00-1DBF,U+1E00-1E9F,U+1EF2-1EFF,U+2020,U+20A0-20AB,U+20AD-20C0,U+2113,U+2C60-2C7F,U+A720-A7FF}@font-face{font-family:Montserrat;font-style:normal;font-weight:700;font-display:swap;src:url(https://fonts.gstatic.com/s/montserrat/v31/JTUSjIg1_i6t8kCHKm459Wlhyw.woff2) format("woff2");unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+0304,U+0308,U+0329,U+2000-206F,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD}*[_ngcontent-%COMP%]{margin:0;padding:0;box-sizing:border-box}body[_ngcontent-%COMP%]{font-family:Montserrat,-apple-system,BlinkMacSystemFont,sans-serif;line-height:1.6;color:#2e2e2e;background-color:#f5e1a5}.unposted-feed[_ngcontent-%COMP%]{min-height:100vh;background-color:#fefcf7;font-family:Montserrat,-apple-system,BlinkMacSystemFont,sans-serif}.feed-header[_ngcontent-%COMP%]{background:#fefcf7f2;-webkit-backdrop-filter:blur(12px);backdrop-filter:blur(12px);border-bottom:1px solid #f2efe9;position:sticky;top:0;z-index:100;padding:1rem 0}.header-content[_ngcontent-%COMP%]{max-width:900px;margin:0 auto;padding:0 2rem;display:flex;align-items:center;justify-content:space-between;gap:2rem}.brand[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.75rem}.moon-icon[_ngcontent-%COMP%]{font-size:1.5rem;opacity:.8}.moon-icon.large[_ngcontent-%COMP%]{font-size:3rem}.brand[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:1.75rem;font-weight:700;color:#2e2e2e;letter-spacing:-.5px;margin:0}.tagline[_ngcontent-%COMP%]{font-size:.75rem;color:#9a948c;font-weight:300;margin-left:.5rem}.header-actions[_ngcontent-%COMP%]{display:flex;align-items:center;gap:1.5rem}.search-container[_ngcontent-%COMP%]{position:relative;display:flex;align-items:center}.search-icon[_ngcontent-%COMP%]{position:absolute;left:1rem;width:16px;height:16px;color:#9a948c;z-index:1}.search-input[_ngcontent-%COMP%]{padding:.75rem 1rem .75rem 2.75rem;border:1px solid #e6e1d7;border-radius:18px;background:#fff;font-family:inherit;font-size:.875rem;width:280px;transition:all .25s cubic-bezier(.4,0,.2,1);color:#2e2e2e}.search-input[_ngcontent-%COMP%]:focus{outline:none;border-color:#f7c843;box-shadow:0 0 0 3px #e6b17a1a}.search-clear[_ngcontent-%COMP%]{position:absolute;right:.75rem;width:20px;height:20px;border:none;background:none;cursor:pointer;color:#9a948c;border-radius:50%;display:flex;align-items:center;justify-content:center;transition:all .25s cubic-bezier(.4,0,.2,1)}.search-clear[_ngcontent-%COMP%]:hover{background:#f2efe9;color:#5c554d}.filter-container[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5rem}.filter-icon[_ngcontent-%COMP%]{width:16px;height:16px;color:#9a948c}.filter-select[_ngcontent-%COMP%]{padding:.75rem 1rem;border:1px solid #e6e1d7;border-radius:18px;background:#fff;font-family:inherit;font-size:.875rem;cursor:pointer;color:#2e2e2e;transition:all .25s cubic-bezier(.4,0,.2,1)}.filter-select[_ngcontent-%COMP%]:focus{outline:none;border-color:#f7c843}.write-btn[_ngcontent-%COMP%]{padding:.75rem 1.5rem;background:#2e2e2e;color:#fff;border:none;border-radius:18px;font-weight:500;font-size:.875rem;cursor:pointer;transition:all .25s cubic-bezier(.4,0,.2,1);font-family:inherit}.write-btn[_ngcontent-%COMP%]:hover{background:#1a1a1a;transform:translateY(-1px)}.write-btn[_ngcontent-%COMP%]:disabled{background:#aaa;color:#666;cursor:not-allowed;transform:none;opacity:.6}.write-btn[_ngcontent-%COMP%]:disabled:hover{background:#aaa;transform:none}.action-btn[_ngcontent-%COMP%]:disabled{cursor:not-allowed}.feed-container[_ngcontent-%COMP%]{max-width:900px;margin:0 auto;padding:2.5rem 2rem}.feed-content[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:2rem}.quick-filters-container[_ngcontent-%COMP%]{position:relative;display:flex;align-items:center;padding:0 2rem;margin-bottom:1rem}.quick-filters-slider[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.75rem;overflow-x:auto;scroll-behavior:smooth;scrollbar-width:none;-ms-overflow-style:none;padding:.5rem 0;width:100%}.quick-filters-slider[_ngcontent-%COMP%]::-webkit-scrollbar{display:none}.slider-nav[_ngcontent-%COMP%]{position:absolute;top:50%;transform:translateY(-50%);width:32px;height:32px;border-radius:50%;background:#fff;border:1px solid #e6e1d7;display:flex;align-items:center;justify-content:center;cursor:pointer;z-index:10;transition:all .25s cubic-bezier(.4,0,.2,1);box-shadow:0 2px 8px #0000001a}.slider-nav[_ngcontent-%COMP%]:hover{border-color:#f7c843;background:#e6b17a0d}.slider-nav[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{width:16px;height:16px;color:#5c554d}.slider-nav.prev[_ngcontent-%COMP%]{left:0}.slider-nav.next[_ngcontent-%COMP%]{right:0}@media (max-width: 768px){.slider-nav[_ngcontent-%COMP%]{display:none}.quick-filters-container[_ngcontent-%COMP%]{padding:0}.quick-filters-slider[_ngcontent-%COMP%]{padding:.5rem 1rem}}.filter-tag[_ngcontent-%COMP%]{padding:.5rem 1rem;border:1px solid #e6e1d7;background:#fff;color:#5c554d;border-radius:18px;font-size:.8rem;font-weight:400;cursor:pointer;transition:all .25s cubic-bezier(.4,0,.2,1);font-family:inherit;display:flex;align-items:center;gap:.5rem}.filter-tag[_ngcontent-%COMP%]:hover{border-color:#f7c843;background:#e6b17a0d}.filter-tag.active[_ngcontent-%COMP%]{background:#f7c843;border-color:#f7c843;color:#fff}.tag-count[_ngcontent-%COMP%]{font-size:.7rem;opacity:.7;background:#fff3;padding:.1rem .4rem;border-radius:10px}.filter-tag.active[_ngcontent-%COMP%]   .tag-count[_ngcontent-%COMP%]{background:#ffffff4d}.loading-state[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:2rem}.story-skeleton[_ngcontent-%COMP%]{background:#fff;border-radius:14px;padding:2rem;border:1px solid #f2efe9}.skeleton-header[_ngcontent-%COMP%]{display:flex;align-items:center;gap:1rem;margin-bottom:1.5rem}.skeleton-avatar[_ngcontent-%COMP%]{width:48px;height:48px;border-radius:50%;background:linear-gradient(90deg,#f2efe9) 25%,#e6e1d7 50%,#f2efe9 75%;background-size:200% 100%;animation:_ngcontent-%COMP%_shimmer 1.5s infinite}.skeleton-meta[_ngcontent-%COMP%]{flex:1}.skeleton-line[_ngcontent-%COMP%]{height:.875rem;background:linear-gradient(90deg,#f2efe9) 25%,#e6e1d7 50%,#f2efe9 75%;background-size:200% 100%;animation:_ngcontent-%COMP%_shimmer 1.5s infinite;border-radius:4px;margin-bottom:.75rem}.skeleton-line.short[_ngcontent-%COMP%]{width:40%}.skeleton-line.shorter[_ngcontent-%COMP%]{width:25%}.skeleton-line.medium[_ngcontent-%COMP%]{width:70%}.skeleton-line.title[_ngcontent-%COMP%]{height:1.25rem;width:85%;margin-bottom:1rem}.skeleton-line.subtitle[_ngcontent-%COMP%]{width:60%;margin-bottom:1rem}.skeleton-content[_ngcontent-%COMP%]{display:flex;flex-direction:column}@keyframes _ngcontent-%COMP%_shimmer{0%{background-position:-200px 0}to{background-position:calc(200px + 100%) 0}}.stories-feed[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:2rem}.story-card[_ngcontent-%COMP%]{background:#fff;border-radius:14px;padding:1rem;border:1px solid #f2efe9;text-decoration:none;color:inherit;display:block;transition:all .25s cubic-bezier(.4,0,.2,1);position:relative}.story-header[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;margin-bottom:1.5rem}.author-info[_ngcontent-%COMP%]{display:flex;align-items:center;gap:1rem}.author-avatar[_ngcontent-%COMP%]{width:48px;height:48px;border-radius:50%;background:#f7c843;color:#fff;display:flex;align-items:center;justify-content:center;font-weight:600;font-size:.875rem;letter-spacing:.5px;cursor:pointer}.author-avatar[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;height:100%;border-radius:50%;object-fit:cover}.author-name[_ngcontent-%COMP%]{font-size:.95rem;font-weight:500;color:#2e2e2e;margin:0 0 .25rem;cursor:pointer}.author-name[_ngcontent-%COMP%]:hover{color:#f7c843}.story-meta[_ngcontent-%COMP%]{font-size:.8rem;color:#9a948c;display:flex;align-items:center;gap:.5rem}.separator[_ngcontent-%COMP%]{opacity:.5}.bookmark-btn[_ngcontent-%COMP%]{background:none;border:none;padding:.5rem;border-radius:6px;transition:all .25s cubic-bezier(.4,0,.2,1);color:#9a948c;cursor:pointer}.bookmark-btn[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{width:18px;height:18px}.bookmark-btn[_ngcontent-%COMP%]:hover{background:#f2efe9;color:#5c554d}.bookmark-btn.bookmarked[_ngcontent-%COMP%]{color:#f7c843}.bookmark-btn.bookmarked[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{fill:currentColor}.story-content[_ngcontent-%COMP%]{margin-bottom:1.5rem;cursor:pointer}.story-title-section[_ngcontent-%COMP%]{display:flex;align-items:flex-start;gap:.75rem;margin-bottom:1rem}.story-emoji[_ngcontent-%COMP%]{font-size:1.25rem;line-height:1;margin-top:.25rem}.story-title[_ngcontent-%COMP%]{font-size:1.5rem;font-weight:600;line-height:1.3;color:#2e2e2e;margin:0;letter-spacing:-.5px;flex:1}.story-subtitle[_ngcontent-%COMP%]{font-size:1rem;color:#5c554d;line-height:1.5;margin-bottom:1rem;font-style:italic;font-weight:300}.story-preview[_ngcontent-%COMP%]{font-size:.9rem;line-height:1.6;color:#9a948c;font-weight:300;margin-bottom:1rem}.story-category[_ngcontent-%COMP%]{display:flex;align-items:center;margin-top:.75rem}.category-badge[_ngcontent-%COMP%]{padding:.25rem .75rem;border-radius:18px;font-size:.7rem;font-weight:500;text-transform:uppercase;letter-spacing:.5px}.category-badge[data-category="Personal Growth"][_ngcontent-%COMP%]{color:#fef3c7;background:#92400e}.category-badge[data-category="Life Lessons"][_ngcontent-%COMP%]{color:#fce7f3;background:#9d174d}.category-badge[data-category="Cultural Heritage"][_ngcontent-%COMP%]{color:#e0f2fe;background:#0369a1}.category-badge[data-category="Travel & Adventure"][_ngcontent-%COMP%]{color:#dbeafe;background:#1e40af}.category-badge[data-category="Work & Career"][_ngcontent-%COMP%]{color:#f3e8ff;background:#6d28d9}.category-badge[data-category=Relationships][_ngcontent-%COMP%]{color:#ffe4e6;background:#be123c}.category-badge[data-category="Family Stories"][_ngcontent-%COMP%]{color:#dcfce7;background:#166534}.category-badge[data-category="Overcoming Challenges"][_ngcontent-%COMP%]{color:#fee2e2;background:#b91c1c}.category-badge[data-category="Creative Journey"][_ngcontent-%COMP%]{color:#ccfbf1;background:#0f766e}.category-badge[data-category="Social Impact"][_ngcontent-%COMP%]{color:#ede9fe;background:#5b21b6}.category-badge[data-category="Health & Wellness"][_ngcontent-%COMP%]{color:#fef9c3;background:#854d0e}.category-badge[data-category="Education & Learning"][_ngcontent-%COMP%]{color:#d1fae5;background:#047857}.category-badge[data-category="Dreams & Aspirations"][_ngcontent-%COMP%]{color:#fdf2f8;background:#9d174d}.category-badge[data-category="Unexpected Moments"][_ngcontent-%COMP%]{color:#e0f7fa;background:#00695c}.category-badge[data-category=Other][_ngcontent-%COMP%]{color:#f5f5f5;background:#374151}.story-actions[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;padding-top:1.5rem;border-top:1px solid #f2efe9}.engagement-actions[_ngcontent-%COMP%]{display:flex;align-items:center;gap:1.5rem}.action-btn[_ngcontent-%COMP%]{cursor:pointer;background:none;border:none;display:flex;align-items:center;gap:.5rem;padding:.5rem .75rem;border-radius:18px;font-size:.875rem;font-weight:400;color:#9a948c;transition:all .25s cubic-bezier(.4,0,.2,1);font-family:inherit}.action-btn[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{width:16px;height:16px}.action-btn[_ngcontent-%COMP%]:hover{background:#f2efe9;color:#5c554d}.action-btn.active[_ngcontent-%COMP%]{color:#f7c843}.action-btn.upvote.active[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{fill:currentColor}.read-more[_ngcontent-%COMP%]{background:#2e2e2e;color:#fff;border:none;padding:.75rem 1.5rem;border-radius:18px;font-size:.875rem;font-weight:500;cursor:pointer;transition:all .25s cubic-bezier(.4,0,.2,1);font-family:inherit}.read-more[_ngcontent-%COMP%]:hover{background:#1a1a1a;transform:translateY(-1px)}.empty-state[_ngcontent-%COMP%]{text-align:center;padding:4rem 2rem;background:#fff;border-radius:14px;border:1px solid #f2efe9}.empty-illustration[_ngcontent-%COMP%]{margin-bottom:1.5rem}.empty-state[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:1.25rem;font-weight:600;color:#2e2e2e;margin-bottom:.5rem}.empty-state[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:.95rem;color:#5c554d;margin-bottom:2rem}.explore-btn[_ngcontent-%COMP%]{padding:.75rem 2rem;background:#f7c843;color:#fff;border:none;border-radius:18px;font-weight:500;font-size:.875rem;cursor:pointer;transition:all .25s cubic-bezier(.4,0,.2,1);font-family:inherit}.explore-btn[_ngcontent-%COMP%]:hover{background:#e6b739;transform:translateY(-1px)}.load-more-container[_ngcontent-%COMP%]{text-align:center;padding-top:2rem}.load-more-btn[_ngcontent-%COMP%]{padding:1rem 2rem;background:#fff;border:1px solid #e6e1d7;border-radius:18px;color:#5c554d;font-weight:500;font-size:.875rem;cursor:pointer;transition:all .25s cubic-bezier(.4,0,.2,1);font-family:inherit}.load-more-btn[_ngcontent-%COMP%]:hover:not(:disabled){border-color:#f7c843;color:#f7c843;background:#e6b17a0d}.load-more-btn[_ngcontent-%COMP%]:disabled{opacity:.5;cursor:not-allowed}.loading-dots[_ngcontent-%COMP%]{display:flex;gap:4px;align-items:center;justify-content:center}.loading-dots[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{width:6px;height:6px;border-radius:50%;background:#9a948c;animation:_ngcontent-%COMP%_bounce 1.4s infinite ease-in-out both}.loading-dots[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:nth-child(1){animation-delay:-.32s}.loading-dots[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:nth-child(2){animation-delay:-.16s}@keyframes _ngcontent-%COMP%_bounce{0%,80%,to{transform:scale(0);opacity:.5}40%{transform:scale(1);opacity:1}}.error-toast[_ngcontent-%COMP%]{position:fixed;bottom:2rem;right:2rem;background:#fef2f2;border:1px solid #fecaca;border-radius:10px;padding:1rem 1.5rem;display:flex;align-items:center;gap:.75rem;box-shadow:0 8px 28px #00000014;transform:translate(100%);transition:transform .3s ease;z-index:1000;max-width:400px;font-family:inherit}.error-toast.show[_ngcontent-%COMP%]{transform:translate(0)}.toast-content[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5rem;flex:1}.toast-content[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{width:16px;height:16px;color:#dc2626;flex-shrink:0}.toast-content[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{color:#991b1b;font-size:.875rem;font-weight:400}.toast-close[_ngcontent-%COMP%]{background:none;border:none;color:#991b1b;cursor:pointer;font-size:1.25rem;line-height:1;padding:0;width:24px;height:24px;display:flex;align-items:center;justify-content:center;border-radius:50%;transition:all .25s cubic-bezier(.4,0,.2,1)}.toast-close[_ngcontent-%COMP%]:hover{background:#991b1b1a}@media (max-width: 768px){.header-content[_ngcontent-%COMP%]{padding:0 1rem;gap:1rem;flex-direction:column}.brand[_ngcontent-%COMP%]{justify-content:center;text-align:center}.brand[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:1.5rem}.tagline[_ngcontent-%COMP%]{display:block;margin-top:.25rem;margin-left:0}.header-actions[_ngcontent-%COMP%]{width:100%;justify-content:space-between;gap:1rem}.search-input[_ngcontent-%COMP%]{width:300px}.feed-container[_ngcontent-%COMP%]{padding:1.5rem 1rem}.story-card[_ngcontent-%COMP%]{padding:1.5rem}.story-title[_ngcontent-%COMP%]{font-size:1.25rem}.story-actions[_ngcontent-%COMP%]{flex-direction:column;align-items:stretch;gap:1rem}.engagement-actions[_ngcontent-%COMP%]{justify-content:space-around}.read-more[_ngcontent-%COMP%]{width:100%;justify-content:center}.quick-filters-slider[_ngcontent-%COMP%]{gap:.5rem;padding-bottom:.5rem}.filter-tag[_ngcontent-%COMP%]{flex-shrink:0;white-space:nowrap}}@media (max-width: 480px){.header-content[_ngcontent-%COMP%]{padding:0 .75rem}.brand[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:1.25rem}.search-input[_ngcontent-%COMP%]{width:160px;font-size:.8rem}.filter-select[_ngcontent-%COMP%]{font-size:.8rem;padding:.6rem .8rem}.write-btn[_ngcontent-%COMP%]{padding:.6rem 1rem;font-size:.8rem}.feed-container[_ngcontent-%COMP%]{padding:1rem .75rem}.story-card[_ngcontent-%COMP%]{padding:1.25rem}.author-avatar[_ngcontent-%COMP%]{width:40px;height:40px;font-size:.8rem}.story-title-section[_ngcontent-%COMP%]{flex-direction:column;gap:.5rem;align-items:flex-start}.story-title[_ngcontent-%COMP%]{font-size:1.125rem}.story-subtitle[_ngcontent-%COMP%], .story-preview[_ngcontent-%COMP%]{font-size:.85rem}.action-btn[_ngcontent-%COMP%]{font-size:.8rem;padding:.4rem .6rem}.read-more[_ngcontent-%COMP%]{font-size:.8rem;padding:.6rem 1.25rem}}@media (prefers-color-scheme: dark){.skeleton-avatar[_ngcontent-%COMP%], .skeleton-line[_ngcontent-%COMP%]{background:linear-gradient(90deg,#3a3833 25%,#4a463f,#3a3833 75%)}.feed-header[_ngcontent-%COMP%]{background:#1a1917f2}.category-badge[data-category="Personal Growth"][_ngcontent-%COMP%]{background:#fef3c7;color:#92400e}.category-badge[data-category="Life Lessons"][_ngcontent-%COMP%]{background:#fce7f3;color:#9d174d}.category-badge[data-category="Cultural Heritage"][_ngcontent-%COMP%]{background:#e0f2fe;color:#0369a1}.category-badge[data-category="Travel & Adventure"][_ngcontent-%COMP%]{background:#dbeafe;color:#1e40af}.category-badge[data-category="Work & Career"][_ngcontent-%COMP%]{background:#f3e8ff;color:#6d28d9}.category-badge[data-category=Relationships][_ngcontent-%COMP%]{background:#ffe4e6;color:#be123c}.category-badge[data-category="Family Stories"][_ngcontent-%COMP%]{background:#dcfce7;color:#166534}.category-badge[data-category="Overcoming Challenges"][_ngcontent-%COMP%]{background:#fee2e2;color:#b91c1c}.category-badge[data-category="Creative Journey"][_ngcontent-%COMP%]{background:#ccfbf1;color:#0f766e}.category-badge[data-category="Social Impact"][_ngcontent-%COMP%]{background:#ede9fe;color:#5b21b6}.category-badge[data-category="Health & Wellness"][_ngcontent-%COMP%]{background:#fef9c3;color:#854d0e}.category-badge[data-category="Education & Learning"][_ngcontent-%COMP%]{background:#d1fae5;color:#047857}.category-badge[data-category="Dreams & Aspirations"][_ngcontent-%COMP%]{background:#fdf2f8;color:#9d174d}.category-badge[data-category="Unexpected Moments"][_ngcontent-%COMP%]{background:#e0f7fa;color:#00695c}.category-badge[data-category=Other][_ngcontent-%COMP%]{background:#f5f5f5;color:#374151}}@media (prefers-reduced-motion: reduce){*[_ngcontent-%COMP%]{animation-duration:.01ms!important;animation-iteration-count:1!important;transition-duration:.01ms!important}}.story-card[_ngcontent-%COMP%]:focus, .filter-tag[_ngcontent-%COMP%]:focus, .action-btn[_ngcontent-%COMP%]:focus, .bookmark-btn[_ngcontent-%COMP%]:focus, .load-more-btn[_ngcontent-%COMP%]:focus, .search-input[_ngcontent-%COMP%]:focus, .filter-select[_ngcontent-%COMP%]:focus, .write-btn[_ngcontent-%COMP%]:focus{outline:2px solid #f7c843;outline-offset:2px}html[_ngcontent-%COMP%]{scroll-behavior:smooth}[_ngcontent-%COMP%]::selection{background:#e6b17a4d}.upvote-btn[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;border:none;background:none;cursor:pointer;color:#888;font-weight:500;transition:color .2s}.upvote-btn[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{transition:stroke .2s}.upvote-btn[_ngcontent-%COMP%]:hover, .upvote-btn.voted[_ngcontent-%COMP%]{color:#ff4500}.upvote-btn.voted[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{stroke:#ff4500}']})};var tl=class n{firestore=k(at);auth=k(Un);trackView(e){return b(this,null,function*(){try{let t=this.auth.currentUser,r;t?r=t.uid:r=`anon_${Date.now()}`;let i=Ae(this.firestore,`stories/${e}/views/${r}`);(yield ft(i)).exists()||(yield Hn(i,{storyId:e,userId:t?.uid||null,isAnonymous:!t,timestamp:bm()}),yield this.incrementStoryReadCount(e))}catch(t){console.error("Error tracking view:",t)}})}incrementStoryReadCount(e){return b(this,null,function*(){try{let t=Ae(this.firestore,"stories",e);yield $t(t,{"stats.readCount":qo(1)})}catch{try{let r=Ae(this.firestore,"stories",e);yield Hn(r,{stats:{readCount:1}},{merge:!0})}catch(r){console.error("Error setting story read count:",r)}}})}getViewCount(e){return b(this,null,function*(){try{let t=vt(this.firestore,`stories/${e}/views`);return(yield Dn(t)).size}catch(t){return console.error("Error getting view count:",t),0}})}hasUserViewed(e){return b(this,null,function*(){try{let t=this.auth.currentUser;if(!t)return!1;let r=Ae(this.firestore,`stories/${e}/views/${t.uid}`);return(yield ft(r)).exists()}catch(t){return console.error("Error checking if user viewed story:",t),!1}})}static \u0275fac=function(t){return new(t||n)};static \u0275prov=Q({token:n,factory:n.\u0275fac,providedIn:"root"})};var Om=class n{firestore=k(at);toggleFollow(e,t){return b(this,null,function*(){if(!e||!t)throw new Error("FollowerId or FollowingId is undefined");let r=Ae(this.firestore,`follows/${e}_${t}`);(yield ft(r)).exists()?yield Ki(r):yield Hn(r,{followerId:e,followedId:t,createdAt:bm()})})}isFollowing(e,t){return b(this,null,function*(){if(e===t)return!1;let r=Ae(this.firestore,`follows/${e}_${t}`);return(yield ft(r)).exists()})}getFollowers(e){return b(this,null,function*(){let t=_n(vt(this.firestore,"follows"),Ot("followedId","==",e));return(yield Dn(t)).docs.map(i=>i.data())})}getFollowing(e){return b(this,null,function*(){let t=_n(vt(this.firestore,"follows"),Ot("followerId","==",e));return(yield Dn(t)).docs.map(i=>i.data())})}static \u0275fac=function(t){return new(t||n)};static \u0275prov=Q({token:n,factory:n.\u0275fac,providedIn:"root"})};var ur=class n{constructor(e,t){this.firestore=e;this.authService=t;this.authService.user$.subscribe(r=>{r?this.startListening(r.uid):this.stopListening()})}notificationsSubject=new _t([]);unreadCountSubject=new _t(0);notifications$=this.notificationsSubject.asObservable();unreadCount$=this.unreadCountSubject.asObservable();unsubscribe;startListening(e){let t=vt(this.firestore,"notifications"),r=_n(t,Ot("userId","==",e),Yi("createdAt","desc"),Td(50));this.unsubscribe=zR(r,i=>{let o=[];i.forEach(a=>{let l=a.data();o.push({id:a.id,userId:l.userId,type:l.type,title:l.title,message:l.message,isRead:l.isRead,createdAt:l.createdAt?.toDate()||new Date,data:l.data||{}})}),this.notificationsSubject.next(o);let s=o.filter(a=>!a.isRead).length;this.unreadCountSubject.next(s)},i=>{console.error("Error listening to notifications:",i)})}stopListening(){this.unsubscribe&&this.unsubscribe(),this.notificationsSubject.next([]),this.unreadCountSubject.next(0)}createNotification(e){return b(this,null,function*(){try{let t=vt(this.firestore,"notifications");yield Yc(t,ne(H({},e),{createdAt:rt.now()}))}catch(t){throw console.error("Error creating notification:",t),t}})}markAsRead(e){return b(this,null,function*(){try{let t=Ae(this.firestore,"notifications",e);yield $t(t,{isRead:!0})}catch(t){throw console.error("Error marking notification as read:",t),t}})}markAllAsRead(){return b(this,null,function*(){if(yield this.authService.user)try{let r=this.notificationsSubject.value.filter(o=>!o.isRead);if(r.length===0)return;let i=WR(this.firestore);r.forEach(o=>{let s=Ae(this.firestore,"notifications",o.id);i.update(s,{isRead:!0})}),yield i.commit()}catch(t){throw console.error("Error marking all notifications as read:",t),t}})}notifyStoryLiked(e,t,r,i){return b(this,null,function*(){e&&(yield this.createNotification({userId:e,type:"like",title:"New like on your story",message:`${t} liked your story "${r}"`,isRead:!1,data:{storyId:i,fromUserName:t}}))})}notifyStoryCommented(e,t,r,i){return b(this,null,function*(){e&&(yield this.createNotification({userId:e,type:"comment",title:"New comment on your story",message:`${t} commented on your story "${r}"`,isRead:!1,data:{storyId:i,fromUserName:t}}))})}notifyNewFollower(e,t,r){return b(this,null,function*(){e&&(yield this.createNotification({userId:e,type:"follow",title:"New follower",message:`${t} started following you`,isRead:!1,data:{fromUserId:r,fromUserName:t}}))})}notifyStoryPublished(e,t,r){return b(this,null,function*(){e&&(yield this.createNotification({userId:e,type:"story_published",title:"Story published successfully",message:`Your story "${t}" has been published and is now live!`,isRead:!1,data:{storyId:r}}))})}notifyLevelUp(e,t,r){return b(this,null,function*(){if(!e)return;let i=t-r,o=i===1?`Congratulations! You've reached level ${t}!`:`Amazing! You jumped ${i} levels and reached level ${t}!`;yield this.createNotification({userId:e,type:"level_up",title:"Level Up!",message:o,isRead:!1,data:{newLevel:t,oldLevel:r,levelGain:i}})})}getCurrentNotifications(){return this.notificationsSubject.value}getCurrentUnreadCount(){return this.unreadCountSubject.value}ngOnDestroy(){this.stopListening()}static \u0275fac=function(t){return new(t||n)(re(at),re(it))};static \u0275prov=Q({token:n,factory:n.\u0275fac,providedIn:"root"})};var Nz=["nameInput"],Fz=["bioInput"],Lz=()=>[1,2,3,4,5],Vz=()=>[1,2,3,4];function Uz(n,e){n&1&&(h(0,"p"),y(1,"Loading your profile..."),p())}function jz(n,e){n&1&&(h(0,"p"),y(1,"Loading the profile..."),p())}function Bz(n,e){if(n&1&&(h(0,"div",11),q(1,"div",12),B(2,Uz,2,0,"p",13)(3,jz,2,0,"p",13),p()),n&2){let t=S();v(2),C("ngIf",t.isOwnProfile),v(),C("ngIf",!t.isOwnProfile)}}function $z(n,e){n&1&&(h(0,"span",53),y(1,"\u270F\uFE0F"),p())}function Hz(n,e){if(n&1){let t=te();h(0,"h1",51),$("click",function(){V(t);let i=S(2);return U(i.startEditingName())}),y(1),B(2,$z,2,0,"span",52),p()}if(n&2){let t=S(2);v(),ie(" ",t.userProfile.name||"Anonymous User"," "),v(),C("ngIf",t.isOwnProfile)}}function zz(n,e){if(n&1){let t=te();h(0,"div",54)(1,"input",55,2),It("ngModelChange",function(i){V(t);let o=S(2);return Pt(o.tempName,i)||(o.tempName=i),U(i)}),$("keydown",function(i){V(t);let o=S(2);return U(o.onKeyDown(i,"name-edit"))})("input",function(){V(t);let i=S(2);return U(i.onNameInput())}),p(),h(3,"div",56)(4,"button",57),$("click",function(){V(t);let i=S(2);return U(i.saveName())}),y(5),p(),h(6,"button",58),$("click",function(){V(t);let i=S(2);return U(i.cancelNameEdit())}),y(7,"Cancel"),p()()()}if(n&2){let t=S(2);v(),Ct("ngModel",t.tempName),v(3),C("disabled",t.savingProfile),v(),ie(" ",t.savingProfile?"Saving...":"Save"," ")}}function qz(n,e){n&1&&(h(0,"span",64),y(1,"\u26A0\uFE0F At Risk"),p())}function Wz(n,e){if(n&1&&(h(0,"small",65),y(1),p()),n&2){let t=S(3);v(),ie(" Last activity: ",t.formatDate(t.userProfile.lastWriteDate)," ")}}function Gz(n,e){if(n&1&&(h(0,"div",59)(1,"div",60)(2,"span",61),y(3),p(),y(4),B(5,qz,2,0,"span",62),p(),B(6,Wz,2,1,"small",63),p()),n&2){let t=S(2);v(),he("streak-warning",!t.isStreakCurrent()),v(2),K(t.getStreakIcon(t.userProfile.writingStreak)),v(),ie(" ",t.userProfile.writingStreak,"-day writing streak "),v(),C("ngIf",!t.isStreakCurrent()),v(),C("ngIf",t.userProfile.lastWriteDate)}}function Kz(n,e){if(n&1&&(h(0,"div",66)(1,"small",67),y(2),xy(3,"number"),p()()),n&2){let t=S(2);v(2),Cn("Level ",t.userProfile.level||1," \u2022 ",My(3,2,t.getXPProgress(),"1.1-1"),"% to next level")}}function Yz(n,e){n&1&&(h(0,"span",53),y(1,"\u270F\uFE0F"),p())}function Qz(n,e){if(n&1){let t=te();h(0,"p",68),$("click",function(){V(t);let i=S(2);return U(i.startEditingBio())}),y(1),B(2,Yz,2,0,"span",52),p()}if(n&2){let t=S(2);v(),ie(" ",t.userProfile.bio||"No bio added yet. Click to add one!"," "),v(),C("ngIf",t.isOwnProfile)}}function Zz(n,e){if(n&1){let t=te();h(0,"div",69)(1,"textarea",70,3),It("ngModelChange",function(i){V(t);let o=S(2);return Pt(o.tempBio,i)||(o.tempBio=i),U(i)}),$("keydown",function(i){V(t);let o=S(2);return U(o.onKeyDown(i,"bio-edit"))})("input",function(){V(t);let i=S(2);return U(i.onBioInput())}),p(),h(3,"div",56)(4,"button",57),$("click",function(){V(t);let i=S(2);return U(i.saveBio())}),y(5),p(),h(6,"button",58),$("click",function(){V(t);let i=S(2);return U(i.cancelBioEdit())}),y(7,"Cancel"),p()()()}if(n&2){let t=S(2);v(),Ct("ngModel",t.tempBio),v(3),C("disabled",t.savingProfile),v(),ie(" ",t.savingProfile?"Saving...":"Save"," ")}}function Xz(n,e){if(n&1){let t=te();h(0,"span",73),$("click",function(){V(t);let i=S(3);return U(i.startEditingSocial())}),y(1,"\u270F\uFE0F"),p()}}function Jz(n,e){if(n&1&&(h(0,"h4",71),y(1," Social Links "),B(2,Xz,2,0,"span",72),p()),n&2){let t=S(2);v(2),C("ngIf",t.isOwnProfile)}}function eq(n,e){if(n&1){let t=te();h(0,"div",77),$("click",function(){V(t);let i=S(3);return U(i.startEditingSocial())}),h(1,"span",78),y(2,"Add your social links"),p(),h(3,"span",53),y(4,"\u270F\uFE0F"),p()()}}function tq(n,e){if(n&1&&(h(0,"a",88),ce(),h(1,"svg",89),q(2,"path",90),p()()),n&2){let t=S(4);C("href",t.getSocialUrl("fb",t.userProfile.socialLinks.fb),st)}}function nq(n,e){if(n&1){let t=te();h(0,"button",91),$("click",function(){V(t);let i=S(4);return U(i.editSingleSocial("fb"))}),y(1," \u270F\uFE0F "),p()}}function rq(n,e){if(n&1&&(h(0,"a",92),ce(),h(1,"svg",89),q(2,"path",93),p()()),n&2){let t=S(4);C("href",t.getSocialUrl("ig",t.userProfile.socialLinks.ig),st)}}function iq(n,e){if(n&1){let t=te();h(0,"button",94),$("click",function(){V(t);let i=S(4);return U(i.editSingleSocial("ig"))}),y(1," \u270F\uFE0F "),p()}}function oq(n,e){if(n&1&&(h(0,"a",95),ce(),h(1,"svg",89),q(2,"path",96),p()()),n&2){let t=S(4);C("href",t.getSocialUrl("linkedin",t.userProfile.socialLinks.linkedin),st)}}function sq(n,e){if(n&1){let t=te();h(0,"button",97),$("click",function(){V(t);let i=S(4);return U(i.editSingleSocial("linkedin"))}),y(1," \u270F\uFE0F "),p()}}function aq(n,e){if(n&1){let t=te();h(0,"button",98),$("click",function(){V(t);let i=S(4);return U(i.startEditingSocial())}),ce(),h(1,"svg",99),q(2,"path",100),p(),Pe(),h(3,"span"),y(4,"Add social link"),p()()}}function cq(n,e){if(n&1&&(h(0,"div",79)(1,"div",80),B(2,tq,3,1,"a",81)(3,nq,2,0,"button",82),p(),h(4,"div",80),B(5,rq,3,1,"a",83)(6,iq,2,0,"button",84),p(),h(7,"div",80),B(8,oq,3,1,"a",85)(9,sq,2,0,"button",86),p(),B(10,aq,5,0,"button",87),p()),n&2){let t=S(3);v(2),C("ngIf",t.userProfile.socialLinks==null?null:t.userProfile.socialLinks.fb),v(),C("ngIf",(t.userProfile.socialLinks==null?null:t.userProfile.socialLinks.fb)&&t.isOwnProfile),v(2),C("ngIf",t.userProfile.socialLinks==null?null:t.userProfile.socialLinks.ig),v(),C("ngIf",(t.userProfile.socialLinks==null?null:t.userProfile.socialLinks.ig)&&t.isOwnProfile),v(2),C("ngIf",t.userProfile.socialLinks==null?null:t.userProfile.socialLinks.linkedin),v(),C("ngIf",(t.userProfile.socialLinks==null?null:t.userProfile.socialLinks.linkedin)&&t.isOwnProfile),v(),C("ngIf",t.isOwnProfile&&t.canAddMoreSocials())}}function lq(n,e){if(n&1&&(h(0,"div",74),B(1,eq,5,0,"div",75)(2,cq,11,7,"div",76),p()),n&2){let t=S(2);v(),C("ngIf",!t.hasSocialLinks()&&t.isOwnProfile),v(),C("ngIf",t.hasSocialLinks())}}function uq(n,e){if(n&1){let t=te();h(0,"button",113),$("click",function(){V(t);let i=S(4);return U(i.clearSocialInput("fb"))}),y(1," \u2715 "),p()}}function dq(n,e){if(n&1){let t=te();h(0,"div",107)(1,"label",108),ce(),h(2,"svg",89),q(3,"path",109),p(),y(4," Facebook "),p(),Pe(),h(5,"div",110)(6,"input",111,4),It("ngModelChange",function(i){V(t);let o=S(3);return Pt(o.tempSocialLinks.fb,i)||(o.tempSocialLinks.fb=i),U(i)}),$("input",function(i){V(t);let o=S(3);return U(o.onSocialInputChange("fb",i))}),p(),B(8,uq,2,0,"button",112),p()()}if(n&2){let t=S(3);v(6),Ct("ngModel",t.tempSocialLinks.fb),v(2),C("ngIf",t.tempSocialLinks.fb)}}function fq(n,e){if(n&1){let t=te();h(0,"button",113),$("click",function(){V(t);let i=S(4);return U(i.clearSocialInput("ig"))}),y(1," \u2715 "),p()}}function hq(n,e){if(n&1){let t=te();h(0,"div",107)(1,"label",114),ce(),h(2,"svg",89),q(3,"path",115),p(),y(4," Instagram "),p(),Pe(),h(5,"div",110)(6,"input",116,5),It("ngModelChange",function(i){V(t);let o=S(3);return Pt(o.tempSocialLinks.ig,i)||(o.tempSocialLinks.ig=i),U(i)}),$("input",function(i){V(t);let o=S(3);return U(o.onSocialInputChange("ig",i))}),p(),B(8,fq,2,0,"button",112),p()()}if(n&2){let t=S(3);v(6),Ct("ngModel",t.tempSocialLinks.ig),v(2),C("ngIf",t.tempSocialLinks.ig)}}function pq(n,e){if(n&1){let t=te();h(0,"button",113),$("click",function(){V(t);let i=S(4);return U(i.clearSocialInput("linkedin"))}),y(1," \u2715 "),p()}}function gq(n,e){if(n&1){let t=te();h(0,"div",107)(1,"label",117),ce(),h(2,"svg",89),q(3,"path",118),p(),y(4," LinkedIn "),p(),Pe(),h(5,"div",110)(6,"input",119,6),It("ngModelChange",function(i){V(t);let o=S(3);return Pt(o.tempSocialLinks.linkedin,i)||(o.tempSocialLinks.linkedin=i),U(i)}),$("input",function(i){V(t);let o=S(3);return U(o.onSocialInputChange("linkedin",i))}),p(),B(8,pq,2,0,"button",112),p()()}if(n&2){let t=S(3);v(6),Ct("ngModel",t.tempSocialLinks.linkedin),v(2),C("ngIf",t.tempSocialLinks.linkedin)}}function mq(n,e){if(n&1){let t=te();h(0,"button",120),$("click",function(){V(t);let i=S(3);return U(i.deleteSocialLink(i.editingSingleSocial))}),y(1," Remove Link "),p()}}function vq(n,e){if(n&1){let t=te();h(0,"div",101)(1,"div",102)(2,"h5",103),y(3),p(),h(4,"p",104),y(5,"Connect with your audience on social media"),p()(),B(6,dq,9,2,"div",105)(7,hq,9,2,"div",105)(8,gq,9,2,"div",105),h(9,"div",56)(10,"button",57),$("click",function(){V(t);let i=S(2);return U(i.saveSocialLinks())}),y(11),p(),h(12,"button",58),$("click",function(){V(t);let i=S(2);return U(i.cancelSocialEdit())}),y(13,"Cancel"),p(),B(14,mq,2,0,"button",106),p()()}if(n&2){let t=S(2);v(3),ie(" ",t.editingSingleSocial?"Edit Social Link":"Social Links"," "),v(3),C("ngIf",!t.editingSingleSocial||t.editingSingleSocial==="fb"),v(),C("ngIf",!t.editingSingleSocial||t.editingSingleSocial==="ig"),v(),C("ngIf",!t.editingSingleSocial||t.editingSingleSocial==="linkedin"),v(2),C("disabled",t.savingProfile),v(),ie(" ",t.savingProfile?"Saving...":"Save"," "),v(3),C("ngIf",t.editingSingleSocial)}}function _q(n,e){if(n&1&&(h(0,"div",123)(1,"span",124),y(2),p(),h(3,"span",125),y(4,"Drafts"),p()()),n&2){let t=S(3);v(2),K(t.drafts.length)}}function yq(n,e){if(n&1&&(h(0,"div",123)(1,"span",124),y(2),p(),h(3,"span",125),y(4,"Bookmarks"),p()()),n&2){let t=S(3);v(2),K(t.bookmarks.length)}}function bq(n,e){if(n&1&&(h(0,"div",123)(1,"span",124),y(2),p(),h(3,"span",125),y(4,"Total Views"),p()()),n&2){let t=S(3);v(2),K(t.formatNumber(t.userProfile.nbViews))}}function wq(n,e){if(n&1&&(h(0,"div",123)(1,"span",124),y(2),p(),h(3,"span",125),y(4,"Total Votes"),p()()),n&2){let t=S(3);v(2),K(t.formatNumber(t.userProfile.nbUpvotes))}}function Eq(n,e){if(n&1&&(h(0,"div",121),B(1,_q,5,1,"div",122),h(2,"div",123)(3,"span",124),y(4),p(),h(5,"span",125),y(6,"Articles"),p()(),B(7,yq,5,1,"div",122),h(8,"div",123)(9,"span",124),y(10),p(),h(11,"span",125),y(12,"Followers"),p()(),h(13,"div",123)(14,"span",124),y(15),p(),h(16,"span",125),y(17,"Following"),p()(),B(18,bq,5,1,"div",122)(19,wq,5,1,"div",122),p()),n&2){let t=S(2);v(),C("ngIf",t.isOwnProfile),v(3),K(t.stories.length),v(3),C("ngIf",t.isOwnProfile),v(3),K(t.formatNumber(t.userProfile.nbFollowers)||0),v(5),K(t.formatNumber(t.userProfile.nbFollowed)||0),v(3),C("ngIf",t.userProfile.nbViews>0),v(),C("ngIf",t.userProfile.nbUpvotes>0)}}function Cq(n,e){n&1&&q(0,"div",128)}function Iq(n,e){n&1&&(h(0,"div",126),B(1,Cq,1,0,"div",127),p()),n&2&&(v(),C("ngForOf",Kr(1,Lz)))}function Sq(n,e){n&1&&q(0,"span",132)}function Tq(n,e){if(n&1){let t=te();h(0,"div",129)(1,"button",130),$("click",function(){V(t);let i=S(2);return U(i.toggleFollow())}),B(2,Sq,1,0,"span",131),y(3),p()()}if(n&2){let t=S(2);v(),he("following",t.isFollowing),C("disabled",t.followLoading),v(),C("ngIf",t.followLoading),v(),ie(" ",t.followLoading?"Loading...":t.isFollowing?"Following":"Follow"," ")}}function Dq(n,e){if(n&1&&(h(0,"div",133)(1,"div",134)(2,"span",135),y(3,"\u2728"),p(),h(4,"span",136),y(5),p()()()),n&2){let t=S(2);v(5),K(t.getMotivationMessage())}}function xq(n,e){if(n&1&&(h(0,"div",149)(1,"div",150),q(2,"div",151),p(),h(3,"span",152),y(4),p()()),n&2){let t=S().$implicit;v(2),En("width",t.progress/t.requirement*100,"%"),v(2),Cn("",t.progress,"/",t.requirement)}}function Mq(n,e){n&1&&(h(0,"div",153)(1,"span",154),y(2,"\u2713"),p(),y(3," Unlocked "),p())}function Pq(n,e){if(n&1&&(h(0,"div",142)(1,"div",143),y(2),p(),h(3,"div",144)(4,"div",145),y(5),p(),h(6,"div",146),y(7),p(),B(8,xq,5,4,"div",147)(9,Mq,4,0,"div",148),p()()),n&2){let t=e.$implicit;he("unlocked",t.unlocked)("in-progress",!t.unlocked&&t.progress&&t.progress>0),C("title",t.description),v(2),K(t.icon),v(3),K(t.name),v(2),K(t.description),v(),C("ngIf",!t.unlocked&&t.progress!==void 0&&t.requirement),v(),C("ngIf",t.unlocked)}}function Aq(n,e){if(n&1&&(h(0,"div",137)(1,"h3",138),y(2," Achievements "),h(3,"span",139),y(4),p()(),h(5,"div",140),B(6,Pq,10,10,"div",141),p()()),n&2){let t=S(2);v(4),Cn("(",t.unlockedBadgesCount,"/",t.totalBadgesCount,")"),v(2),C("ngForOf",t.badges)("ngForTrackBy",t.trackByFn)}}function kq(n,e){n&1&&q(0,"div",158)}function Oq(n,e){n&1&&(h(0,"div",137)(1,"h3",138),y(2,"Achievements"),p(),h(3,"div",156),B(4,kq,1,0,"div",157),p()()),n&2&&(v(4),C("ngForOf",Kr(1,Vz)))}function Rq(n,e){if(n&1&&B(0,Oq,5,2,"div",155),n&2){let t=S(2);C("ngIf",t.loadingBadges)}}function Nq(n,e){if(n&1&&(h(0,"div",159)(1,"h3",138),y(2,"Community Impact"),p(),h(3,"div",160)(4,"div",161)(5,"span",162),y(6),p(),h(7,"span",163),y(8,"Total reads across stories"),p()(),h(9,"div",161)(10,"span",162),y(11),p(),h(12,"span",163),y(13,"Total votes on stories"),p()()()()),n&2){let t=S(2);v(6),K(t.formatNumber(t.userProfile.nbViews)),v(5),K(t.formatNumber(t.userProfile.nbUpvotes))}}function Fq(n,e){if(n&1){let t=te();h(0,"button",48),$("click",function(){V(t);let i=S(2);return U(i.setActiveTab("drafts"))}),y(1),p()}if(n&2){let t=S(2);he("active",t.activeTab==="drafts"),v(),ie(" Drafts (",t.drafts.length,") ")}}function Lq(n,e){if(n&1){let t=te();h(0,"button",48),$("click",function(){V(t);let i=S(2);return U(i.setActiveTab("bookmarks"))}),y(1),p()}if(n&2){let t=S(2);he("active",t.activeTab==="bookmarks"),v(),ie(" Bookmarks (",t.bookmarks.length,") ")}}function Vq(n,e){n&1&&(h(0,"div",170)(1,"span",171),y(2,"\u{1F4C5}"),p(),h(3,"span",172),y(4,"Start your writing streak!"),p()())}function Uq(n,e){if(n&1){let t=te();h(0,"button",175),$("click",function(){V(t);let i=S(4);return U(i.handleEmptyStateAction("drafts"))}),y(1),p()}if(n&2){let t=S(4);v(),ie(" ",t.getEmptyStateMessage("drafts").action," ")}}function jq(n,e){if(n&1&&(h(0,"div",167)(1,"div",168),y(2,"\u{1F4DD}"),p(),h(3,"h3"),y(4),p(),h(5,"p"),y(6),p(),h(7,"div",169)(8,"div",170)(9,"span",171),y(10,"\u{1F3AF}"),p(),h(11,"span",172),y(12,"+10 XP for creating every draft"),p()(),B(13,Vq,5,0,"div",173),p(),B(14,Uq,2,1,"button",174),p()),n&2){let t=S(3);v(4),K(t.getEmptyStateMessage("drafts").title),v(2),K(t.getEmptyStateMessage("drafts").subtitle),v(7),C("ngIf",t.userProfile.streaks==0),v(),C("ngIf",t.getEmptyStateMessage("drafts").action)}}function Bq(n,e){n&1&&(h(0,"span",186),y(1,"\u{1F680}"),p())}function $q(n,e){n&1&&q(0,"span",192)}function Hq(n,e){n&1&&(h(0,"span",193),y(1,"+25 XP"),p())}function zq(n,e){n&1&&(h(0,"span",186),y(1,"\u{1F5D1}"),p())}function qq(n,e){n&1&&q(0,"span",192)}function Wq(n,e){if(n&1){let t=te();h(0,"div",176)(1,"div",177)(2,"h2",178),y(3),p(),h(4,"h3",178),y(5),p()(),h(6,"p",179),y(7),p(),h(8,"div",180)(9,"span",181),y(10),p(),h(11,"div",182)(12,"span",183),y(13),p(),h(14,"span",183),y(15),p()(),h(16,"div",184)(17,"button",185),$("click",function(){let i=V(t).$implicit,o=S(3);return U(o.editDraft(i))}),h(18,"span",186),y(19,"\u270F\uFE0F"),p(),y(20," Edit "),p(),h(21,"button",187),$("click",function(){let i=V(t).$implicit,o=S(3);return U(o.publishDraft(i))}),B(22,Bq,2,0,"span",188)(23,$q,1,0,"span",189),y(24),B(25,Hq,2,0,"span",190),p(),h(26,"button",191),$("click",function(){let i=V(t).$implicit,o=S(3);return U(o.deleteDraft(i))}),B(27,zq,2,0,"span",188)(28,qq,1,0,"span",189),y(29),p()()()()}if(n&2){let t=e.$implicit,r=S(3);v(3),K(t.emoji),v(2),K(t.title),v(2),K(r.getExcerpt(t.content)),v(3),ie("Last modified ",r.formatDate(t.updatedAt)),v(3),ie("\u{1F4DD} ",t.stats.wordCount||0," words"),v(2),ie("\u23F1 ",t.stats.readTime||1," min read"),v(6),C("disabled",r.deletingItem===t.id),v(),C("ngIf",r.deletingItem!==t.id),v(),C("ngIf",r.deletingItem===t.id),v(),ie(" ",r.deletingItem===t.id?"Publishing...":"Publish"," "),v(),C("ngIf",r.deletingItem!==t.id),v(),C("disabled",r.deletingItem===t.id),v(),C("ngIf",r.deletingItem!==t.id),v(),C("ngIf",r.deletingItem===t.id),v(),ie(" ",r.deletingItem===t.id?"Deleting...":"Delete"," ")}}function Gq(n,e){if(n&1&&(h(0,"div",164),B(1,jq,15,4,"div",165)(2,Wq,30,15,"div",166),p()),n&2){let t=S(2);v(),C("ngIf",t.activeTab==="drafts"&&t.drafts.length===0),v(),C("ngForOf",t.drafts)("ngForTrackBy",t.trackByFn)}}function Kq(n,e){n&1&&(h(0,"div",169)(1,"div",170)(2,"span",171),y(3,"\u{1F680}"),p(),h(4,"span",172),y(5,"+25 XP for publishing your first story"),p()(),h(6,"div",170)(7,"span",171),y(8,"\u{1F3C6}"),p(),h(9,"span",172),y(10,'Unlock the "Author" achievement'),p()()())}function Yq(n,e){if(n&1){let t=te();h(0,"button",175),$("click",function(){V(t);let i=S(4);return U(i.handleEmptyStateAction("articles"))}),y(1," Start Writing "),p()}}function Qq(n,e){if(n&1&&(h(0,"div",167)(1,"div",168),y(2,"\u{1F4DA}"),p(),h(3,"h3"),y(4),p(),h(5,"p"),y(6),p(),B(7,Kq,11,0,"div",194)(8,Yq,2,0,"button",174),p()),n&2){let t=S(3);v(4),K(t.getEmptyStateMessage("articles").title),v(2),K(t.getEmptyStateMessage("articles").subtitle),v(),C("ngIf",t.isOwnProfile),v(),C("ngIf",t.isOwnProfile)}}function Zq(n,e){if(n&1&&(h(0,"span",200),y(1),p()),n&2){let t=e.$implicit;v(),K(t)}}function Xq(n,e){if(n&1&&(h(0,"div",198),B(1,Zq,2,1,"span",199),p()),n&2){let t=S().$implicit;v(),C("ngForOf",t.tags)}}function Jq(n,e){n&1&&(h(0,"span",186),y(1,"\u{1F5D1}"),p())}function eW(n,e){n&1&&q(0,"span",192)}function tW(n,e){if(n&1){let t=te();h(0,"button",191),$("click",function(){V(t);let i=S().$implicit,o=S(3);return U(o.deleteStory(i))}),B(1,Jq,2,0,"span",188)(2,eW,1,0,"span",189),y(3),p()}if(n&2){let t=S().$implicit,r=S(3);C("disabled",r.deletingItem===t.id),v(),C("ngIf",r.deletingItem!==t.id),v(),C("ngIf",r.deletingItem===t.id),v(),ie(" ",r.deletingItem===t.id?"Deleting...":"Delete"," ")}}function nW(n,e){if(n&1&&(h(0,"div",176)(1,"div",177)(2,"h2",178),y(3),p(),h(4,"h3",178),y(5),p()(),h(6,"p",179),y(7),p(),B(8,Xq,2,1,"div",195),h(9,"div",180)(10,"span",181),y(11),p(),h(12,"div",182)(13,"span",183),y(14),p(),h(15,"span",183),y(16),p(),h(17,"span",183),y(18),p()(),h(19,"div",184)(20,"a",196),y(21,"Read"),p(),B(22,tW,4,4,"button",197),p()()()),n&2){let t=e.$implicit,r=S(3);v(3),K(t.emoji),v(2),K(t.title),v(2),K(r.getExcerpt(t.content)),v(),C("ngIf",t.tags&&t.tags.length>0),v(3),ie("Published ",r.formatDate(t.createdAt)),v(3),ie("\u{1F441} ",t.stats.readCount||0," views"),v(2),ie("\u2B50 ",t.stats.voteCount||0," votes"),v(2),ie("\u23F1 ",t.stats.readTime||1," min read"),v(2),C("href","/story/"+t.id,st),v(2),C("ngIf",r.isOwnProfile)}}function rW(n,e){if(n&1&&(h(0,"div",164),B(1,Qq,9,4,"div",165)(2,nW,23,10,"div",166),p()),n&2){let t=S(2);v(),C("ngIf",t.activeTab==="articles"&&t.stories.length===0),v(),C("ngForOf",t.stories)("ngForTrackBy",t.trackByFn)}}function iW(n,e){if(n&1&&(h(0,"div",167)(1,"div",168),y(2,"\u{1F516}"),p(),h(3,"h3"),y(4),p(),h(5,"p"),y(6),p(),h(7,"div",169)(8,"span",172),y(9,"+5 XP for each bookmark!"),p()()()),n&2){let t=S(3);v(4),K(t.getEmptyStateMessage("bookmarks").title),v(2),K(t.getEmptyStateMessage("bookmarks").subtitle)}}function oW(n,e){if(n&1&&(h(0,"div",198)(1,"span",200),y(2),p()()),n&2){let t=S().$implicit;v(2),K(t.category)}}function sW(n,e){if(n&1){let t=te();h(0,"div",176)(1,"div",177)(2,"h3",178),y(3),p(),h(4,"span",201),y(5),p()(),B(6,oW,3,1,"div",195),h(7,"div",180)(8,"span",181),y(9),p(),h(10,"div",184)(11,"button",185),$("click",function(){let i=V(t).$implicit,o=S(3);return U(o.readBookmark(i))}),y(12,"Read"),p(),h(13,"button",202),y(14),p()()()()}if(n&2){let t=e.$implicit,r=S(3);v(3),K(t.title),v(2),ie("by ",t.authorName),v(),C("ngIf",t.category),v(3),ie("Saved ",r.formatDate(t.createdAt)),v(4),C("disabled",r.deletingItem===t.id),v(),ie(" ",r.deletingItem===t.id?"Removing...":"Remove"," ")}}function aW(n,e){if(n&1&&(h(0,"div",164),B(1,iW,10,2,"div",165)(2,sW,15,6,"div",166),p()),n&2){let t=S(2);v(),C("ngIf",t.bookmarks.length===0),v(),C("ngForOf",t.bookmarks)("ngForTrackBy",t.trackByFn)}}function cW(n,e){if(n&1){let t=te();h(0,"div",14)(1,"div",15)(2,"div",16)(3,"div",17),q(4,"img",18),h(5,"div",19)(6,"span",20),y(7),p()()()(),h(8,"div",21)(9,"div",22),B(10,Hz,3,2,"h1",23)(11,zz,8,3,"div",24),p(),B(12,Gz,7,6,"div",25),h(13,"div",26)(14,"div",27)(15,"span",28),y(16),p(),h(17,"span",29),y(18),p()(),h(19,"div",30),q(20,"div",31),p(),B(21,Kz,4,5,"div",32),p(),h(22,"div",33),B(23,Qz,3,2,"p",34)(24,Zz,8,3,"div",35),p(),h(25,"div",36),B(26,Jz,3,1,"h4",37)(27,lq,3,2,"div",38)(28,vq,15,7,"div",39),p(),B(29,Eq,20,7,"div",40)(30,Iq,2,2,"ng-template",null,0,Cr)(32,Tq,4,5,"div",41),p()(),B(33,Dq,6,1,"div",42)(34,Aq,7,4,"div",43)(35,Rq,1,1,"ng-template",null,1,Cr)(37,Nq,14,2,"div",44),h(38,"div",45)(39,"div",46),B(40,Fq,2,3,"button",47),h(41,"button",48),$("click",function(){V(t);let i=S();return U(i.setActiveTab("articles"))}),y(42),p(),B(43,Lq,2,3,"button",47),p()(),h(44,"div",49),B(45,Gq,3,3,"div",50)(46,rW,3,3,"div",50)(47,aW,3,3,"div",50),p()()}if(n&2){let t=kn(31),r=kn(36),i=S();v(4),C("src",i.userProfile.photoURL||i.defaultAvatar,st)("alt",i.userProfile.name),v(3),K(i.userProfile.level||1),v(3),C("ngIf",!i.editingName),v(),C("ngIf",i.editingName),v(),C("ngIf",i.userProfile.writingStreak&&i.userProfile.writingStreak>0),v(4),ie("",i.userProfile.xp||0," XP"),v(2),Cn("",i.getXPNeededForNextLevel()," XP to level ",(i.userProfile.level||1)+1),v(2),En("width",i.getXPProgress(),"%"),v(),C("ngIf",!i.loadingStats),v(2),C("ngIf",!i.editingBio),v(),C("ngIf",i.editingBio),v(2),C("ngIf",!i.editingSocial),v(),C("ngIf",!i.editingSocial),v(),C("ngIf",i.editingSocial),v(),C("ngIf",!i.loadingStats)("ngIfElse",t),v(3),C("ngIf",!i.isOwnProfile),v(),C("ngIf",i.getMotivationMessage()&&i.isOwnProfile),v(),C("ngIf",!i.loadingBadges&&i.badges.length>0&&i.badgesInitialized)("ngIfElse",r),v(3),C("ngIf",i.userProfile.nbViews||i.userProfile.nbUpvotes),v(3),C("ngIf",i.isOwnProfile),v(),he("active",i.activeTab==="articles"),v(),ie(" Articles (",i.stories.length,") "),v(),C("ngIf",i.isOwnProfile),v(2),C("ngIf",i.activeTab==="drafts"),v(),C("ngIf",i.activeTab==="articles"),v(),C("ngIf",i.activeTab==="bookmarks")}}function lW(n,e){if(n&1){let t=te();h(0,"div",203)(1,"div",204),y(2,"\u{1F614}"),p(),h(3,"h3"),y(4,"Profile not found"),p(),h(5,"p"),y(6,"There was an error loading this profile. Please try again."),p(),h(7,"button",205),$("click",function(){V(t);let i=S();return U(i.loadProfileDataOptimized())}),h(8,"span",206),y(9,"\u{1F504}"),p(),y(10," Try Again "),p()()}}var Nd=class n{constructor(e,t,r,i,o,s,a,l,u,f){this.profileService=e;this.route=t;this.viewsService=r;this.voteService=i;this.storyService=o;this.bookmarkService=s;this.authService=a;this.followService=l;this.router=u;this.notificationService=f}nameInput;bioInput;currentUser=yg().currentUser;userProfile=null;stories=[];drafts=[];bookmarks=[];activeTab="drafts";loading=!0;savingProfile=!1;loadingStats=!1;loadingBadges=!1;deletingItem=null;editingName=!1;editingBio=!1;tempName="";tempBio="";bioSaveTimeout=null;nameSaveTimeout=null;badges=[];isOwnProfile=!1;isFollowing=!1;followLoading=!1;xpProgress=0;nextLevelXP=0;currentLevelXP=0;streakUpdated=!1;badgesInitialized=!1;defaultAvatar="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTIwIiBoZWlnaHQ9IjEyMCIgdmlld0JveD0iMCAwIDEyMCAxMjAiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CjxyZWN0IHdpZHRoPSIxMjAiIGhlaWdodD0iMTIwIiByeD0iNjAiIGZpbGw9IiNlNmIxN2EiLz4KPHN2ZyB4PSIzMCIgeT0iMzAiIHdpZHRoPSI2MCIgaGVpZ2h0PSI2MCIgdmlld0JveD0iMCAwIDI0IDI0IiBmaWxsPSJub25lIiBzdHJva2U9IndoaXRlIiBzdHJva2Utd2lkdGg9IjEuNSI+CjxwYXRoIGQ9Im0zIDkgOS0xIDktMW0tMSAyIDEwIDEwaDEwbC04LTEwbS0xLTEwSDhsLTggMTB2MTBsOC0xMVoiLz4KPC9zdmc+Cjwvc3ZnPgo=";destroy$=new We;statsCache=new Map;CACHE_TTL=300*1e3;ngOnInit(){this.activeTab=this.getInitialTab(),this.route.paramMap.pipe(wi(this.destroy$),yt(e=>b(this,null,function*(){let t=e.get("id"),r=this.authService.user?.uid||this.currentUser?.uid;return this.isOwnProfile=!t||t===r,r?(!this.isOwnProfile&&this.activeTab!=="articles"&&(this.activeTab="articles"),yield this.loadProfileDataOptimized(t),se(null)):(console.error("Anonymous user must provide profile ID in route"),this.router.navigate(["/login"]),en)}))).subscribe()}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete(),this.bioSaveTimeout&&clearTimeout(this.bioSaveTimeout),this.nameSaveTimeout&&clearTimeout(this.nameSaveTimeout)}getInitialTab(){let e=sessionStorage.getItem("profileActiveTab");return this.isOwnProfile?e&&["drafts","articles","bookmarks"].includes(e)?e:"drafts":"articles"}loadProfileDataOptimized(e){return b(this,null,function*(){this.loading=!0;try{let t=this.authService.user?.uid||this.currentUser?.uid,r=e||t;if(!r){console.error("No user ID available for profile loading"),this.resetLoadingStates();return}yield this.loadCriticalData(r),this.loading=!1,yield this.loadSecondaryDataInBackground(r)}catch(t){console.error("Error loading profile:",t),this.userProfile=null,this.showNotification("Failed to load profile data","error"),this.resetLoadingStates()}})}loadContentData(e){return b(this,null,function*(){if(this.isOwnProfile){let[t,r,i]=yield Promise.all([this.storyService.getDraftsByAuthor(e),this.storyService.getPublishedByAuthor(e),this.bookmarkService.getUserBookmarks(e)]);return{drafts:t,stories:r,bookmarks:i}}else{let[t,r]=yield Promise.all([this.storyService.getPublishedByAuthor(e),this.bookmarkService.getUserBookmarks(e)]);return{drafts:[],stories:t,bookmarks:r}}})}loadSecondaryDataInBackground(e){return b(this,null,function*(){this.loadingStats=!0,this.loadingBadges=!0;try{let t=yield this.loadStatsWithCache(e);this.userProfile.nbViews=t.totalViews,this.userProfile.nbUpvotes=t.totalVotes,this.userProfile.nbFollowed=t.followingCount,this.userProfile.nbFollowers=t.followerCount,this.loadingStats=!1,this.isOwnProfile?yield this.processXPAndAchievements():(this.initializeBadges(),this.updateBadgeProgress(),this.calculateXPProgress()),this.loadingBadges=!1}catch(t){console.error("Error loading secondary data:",t),this.loadingStats=!1,this.loadingBadges=!1}})}processXPAndAchievements(){return b(this,null,function*(){try{yield this.updateWritingStreakOnLoad(),this.calculateXPProgress(),this.initializeBadges(),this.updateBadgeProgress()}catch(e){console.error("Error processing XP and achievements:",e)}})}loadStatsWithCache(e){return b(this,null,function*(){let t=`stats_${e}`,r=this.statsCache.get(t);if(r&&Date.now()-r.timestamp<this.CACHE_TTL)return r.data;let[i,o]=yield Promise.all([this.loadStoryStatsOptimized(),this.loadFollowStats(e)]),s={totalViews:i.totalViews,totalVotes:i.totalVotes,followerCount:o.followers,followingCount:o.following};return this.statsCache.set(t,{data:s,timestamp:Date.now()}),s})}loadStoryStatsOptimized(){return b(this,null,function*(){if(this.stories.length===0)return{totalViews:0,totalVotes:0};let e=10,t=0,r=0;for(let i=0;i<this.stories.length;i+=e){let s=this.stories.slice(i,i+e).map(l=>b(this,null,function*(){try{let[u,f]=yield Promise.all([this.viewsService.getViewCount(l.id),this.voteService.countVotes(l.id)]);return l.stats.readCount=u,l.stats.voteCount=f,{views:u,votes:f}}catch(u){return console.error("Error loading stats for story:",l.id,u),l.stats.readCount=0,l.stats.voteCount=0,{views:0,votes:0}}}));(yield Promise.all(s)).forEach(l=>{t+=l.views,r+=l.votes}),i+e<this.stories.length&&(yield new Promise(l=>setTimeout(l,100)))}return{totalViews:t,totalVotes:r}})}loadFollowStats(e){return b(this,null,function*(){try{let[t,r]=yield Promise.all([this.followService.getFollowers(e),this.followService.getFollowing(e)]);return{followers:t.length,following:r.length}}catch(t){return console.error("Error loading follow stats:",t),{followers:0,following:0}}})}checkFollowStatus(e){return b(this,null,function*(){if(this.currentUser)try{this.isFollowing=yield this.followService.isFollowing(this.currentUser.uid,e)}catch(t){console.error("Error checking follow status:",t)}})}resetLoadingStates(){this.loading=!1,this.loadingStats=!1,this.loadingBadges=!1}invalidateStatsCache(e){let t=`stats_${e}`;this.statsCache.delete(t)}publishDraft(e){return b(this,null,function*(){if(yield this.confirmAction("publish-draft",e.title)){this.deletingItem=e.id;try{yield this.storyService.updateStory(e.id,{status:"published"}),yield this.awardXP(25,"Published a story"),yield this.updateWritingStreak(),this.drafts=this.drafts.filter(t=>t.id!==e.id),this.stories.unshift(ne(H({},e),{status:"published"})),this.showNotification("Draft published successfully!","success"),this.currentUser&&this.invalidateStatsCache(this.currentUser.uid),this.updateBadgeProgress(),this.calculateXPProgress()}catch(t){console.error("Error publishing draft:",t),this.showNotification("Failed to publish draft","error")}finally{this.deletingItem=null}}})}toggleFollow(){return b(this,null,function*(){if(!this.currentUser||!this.userProfile||this.isOwnProfile)return;let e=this.currentUser.uid,t=this.userProfile.id,r=this.isFollowing;this.isFollowing=!this.isFollowing,this.userProfile.nbFollowers+=this.isFollowing?1:-1,this.followLoading=!0;try{yield this.followService.toggleFollow(e,t),this.isFollowing&&this.notificationService.notifyNewFollower(t,this.currentUser.displayName,e),this.showNotification(this.isFollowing?"Now following!":"Unfollowed","success"),this.invalidateStatsCache(t)}catch(i){this.isFollowing=r,this.userProfile.nbFollowers+=r?1:-1,this.showNotification("Failed to update follow status. Please try again.","error"),console.error("Error toggling follow:",i)}finally{this.followLoading=!1}})}showNotification(e,t="success"){let r=document.createElement("div");r.className=`notification notification-${t}`,r.textContent=e,r.style.cssText=`
      position: fixed;
      top: 20px;
      right: 20px;
      padding: 12px 20px;
      background: ${t==="error"?"#dc3545":t==="success"?"#28a745":"#007bff"};
      color: white;
      border-radius: 6px;
      z-index: 10000;
      opacity: 0;
      transition: opacity 0.3s ease;
    `,document.body.appendChild(r),setTimeout(()=>r.style.opacity="1",100),setTimeout(()=>{r.style.opacity="0",setTimeout(()=>document.body.removeChild(r),300)},3e3)}trackByFn(e,t){return t.id||e}setActiveTab(e){this.activeTab=e,sessionStorage.setItem("profileActiveTab",e)}confirmAction(e,t){return b(this,null,function*(){let r={"delete-draft":`Delete "${t}" draft? This cannot be undone.`,"delete-story":`Delete "${t}" story? This will permanently remove it from your published articles and cannot be undone.`,"remove-bookmark":`Remove "${t}" from bookmarks?`};return confirm(r[e]||`Are you sure you want to ${e}?`)})}onKeyDown(e,t){switch(t){case"name-edit":e.key==="Enter"?(e.preventDefault(),this.saveName()):e.key==="Escape"&&this.cancelNameEdit();break;case"bio-edit":e.key==="Enter"&&e.ctrlKey?(e.preventDefault(),this.saveBio()):e.key==="Escape"&&this.cancelBioEdit();break}}onNameInput(){clearTimeout(this.nameSaveTimeout),this.nameSaveTimeout=setTimeout(()=>{this.tempName!==(this.userProfile?.name||"")&&this.tempName.trim()&&this.autoSaveName()},2e3)}onBioInput(){clearTimeout(this.bioSaveTimeout),this.bioSaveTimeout=setTimeout(()=>{this.tempBio!==(this.userProfile?.bio||"")&&this.autoSaveBio()},2e3)}autoSaveName(){return b(this,null,function*(){try{yield this.saveName()}catch{this.showNotification("Failed to auto-save name","error")}})}autoSaveBio(){return b(this,null,function*(){try{yield this.saveBio()}catch{this.showNotification("Failed to auto-save bio","error")}})}getEmptyStateMessage(e){return{drafts:{title:"No drafts yet",subtitle:"Start writing your first draft to see it here.",action:"Create Draft"},articles:{title:this.isOwnProfile?"No published articles":"No articles yet",subtitle:this.isOwnProfile?"Publish your first draft to see it here.":"This user hasn't published any articles yet."},bookmarks:{title:"No bookmarks yet",subtitle:"Save interesting articles to read them later."}}[e]||{title:"Nothing here",subtitle:""}}handleEmptyStateAction(e){switch(e){case"drafts":this.createNewDraft();break;case"articles":this.isOwnProfile&&this.router.navigate(["/write"]);break}}getCurrentDate(){return new Date().toLocaleDateString("en-CA")}getYesterdayDate(){let e=new Date;return e.setDate(e.getDate()-1),e.toLocaleDateString("en-CA")}formatDateForComparison(e){return(e.toDate?e.toDate():new Date(e)).toLocaleDateString("en-CA")}awardStreakXP(e){return b(this,null,function*(){let t=0,r="";e%30===0?(t=200,r=`Maintained ${e}-day writing streak (monthly milestone)`):e%7===0?(t=50,r=`Maintained ${e}-day writing streak (weekly milestone)`):e===1?(t=10,r="Started a new writing streak"):(t=5,r=`Maintained ${e}-day writing streak`),t>0&&(yield this.awardXP(t,r))})}showStreakBrokenNotification(e){e>3&&this.showNotification(`Your ${e}-day writing streak was broken! Start a new one today!`,"info")}getStreakIcon(e){return e>=100?"\u{1F3C6}":e>=30?"\u{1F31F}":e>=7?"\u{1F525}":"\u{1F4C5}"}initializeBadges(){this.badges=[{id:"first-draft",name:"First Draft",description:"Created your first draft",icon:"\u{1F4DD}",unlocked:!0},{id:"first-publish",name:"Author",description:"Published your first story",icon:"\u{1F4DA}",unlocked:!1},{id:"prolific-writer",name:"Prolific Writer",description:"Published 5 stories",icon:"\u270D\uFE0F",unlocked:!1,progress:0,requirement:5},{id:"word-master",name:"Word Master",description:"Written 10,000 words total",icon:"\u{1F4D6}",unlocked:!1,progress:0,requirement:1e4},{id:"streak-novice",name:"Consistent Writer",description:"Maintained a 3-day writing streak",icon:"\u{1F4C5}",unlocked:!1,progress:0,requirement:3},{id:"streak-warrior",name:"Streak Warrior",description:"Maintained a 7-day writing streak",icon:"\u{1F525}",unlocked:!1,progress:0,requirement:7},{id:"streak-champion",name:"Streak Champion",description:"Maintained a 30-day writing streak",icon:"\u{1F3C6}",unlocked:!1,progress:0,requirement:30},{id:"streak-legend",name:"Writing Legend",description:"Maintained a 100-day writing streak",icon:"\u{1F31F}",unlocked:!1,progress:0,requirement:100},{id:"community-favorite",name:"Community Favorite",description:"Received 100 total votes",icon:"\u2B50",unlocked:!1,progress:0,requirement:100},{id:"bookworm",name:"Bookworm",description:"Bookmarked 20 stories",icon:"\u{1F516}",unlocked:!1,progress:0,requirement:20}],this.badgesInitialized=!0}updateBadgeProgress(){if(!this.userProfile||!this.badgesInitialized)return;let e=this.calculateTotalVotes(),t=0;if(this.badges.forEach(r=>{let i=r.unlocked;switch(r.id){case"first-draft":r.unlocked=this.drafts.length>0||this.stories.length>0;break;case"first-publish":r.unlocked=(this.stories.length||0)>0;break;case"prolific-writer":r.progress=Math.min(this.stories.length||0,r.requirement),r.unlocked=(this.stories.length||0)>=r.requirement;break;case"word-master":let o=this.calculateTotalWords();r.progress=Math.min(o,r.requirement),r.unlocked=o>=r.requirement;break;case"streak-novice":case"streak-warrior":case"streak-champion":case"streak-legend":let s=this.isStreakCurrent()&&this.userProfile?.writingStreak||0;r.progress=Math.min(s,r.requirement),r.unlocked=s>=r.requirement;break;case"community-favorite":r.progress=Math.min(e,r.requirement),r.unlocked=e>=r.requirement;break;case"bookworm":r.progress=Math.min(this.bookmarks.length||0,r.requirement),r.unlocked=(this.bookmarks.length||0)>=r.requirement;break}r.unlocked&&!i&&t++}),t>0&&this.isOwnProfile){let r=t===1?"New achievement unlocked!":`${t} new achievements unlocked!`;this.showNotification(r,"success")}}calculateTotalVotes(){return this.stories.reduce((e,t)=>e+(t.stats.voteCount||0),0)}calculateTotalViews(){return this.stories.reduce((e,t)=>e+(t.stats.readCount||0),0)}getXPStatusText(){if(!this.userProfile)return"";let e=this.userProfile.xp||0,t=this.userProfile.level||1,r=this.getXPNeededForNextLevel();return`Level ${t} \u2022 ${e} XP \u2022 ${r} to next level`}getDetailedXPInfo(){if(!this.userProfile)return"";let e=this.userProfile.xp||0,t=this.userProfile.level||1,r=this.getLevelXP(t),i=this.getNextLevelXP(),o=e-r,s=i-r;return`${o}/${s} XP in Level ${t}`}getMotivationMessage(){if(!this.userProfile||!this.isOwnProfile)return"";let e=this.userProfile.writingStreak||0,t=this.badges.filter(o=>o.unlocked).length,r=this.badges.length;if(e>0)return this.isStreakCurrent()?e===1?"You started a streak! Write again tomorrow to keep it going!":e<3?`Keep your ${e}-day streak alive! ${3-e} more days until your first streak badge!`:e<7?`Keep your ${e}-day streak alive! ${7-e} more days until Streak Warrior!`:e<30?`Amazing ${e}-day streak! ${30-e} more days until Streak Champion!`:e<100?`Incredible ${e}-day streak! ${100-e} more days until Writing Legend!`:`You're a Writing Legend with ${e} days! Keep the momentum going!`:"Your streak is about to break! Write something today to keep it going!";let i=this.badges.filter(o=>!o.unlocked&&o.progress!==void 0&&o.requirement!==void 0).sort((o,s)=>o.id.includes("streak")?-1:s.id.includes("streak")?1:s.progress/s.requirement-o.progress/o.requirement);if(i.length>0){let o=i[0];if(o.progress/o.requirement*100>=80)return`You're ${o.requirement-o.progress} away from "${o.name}"! ${this.getBadgeHint(o.id)}`}return this.drafts.length===0?"Start a writing streak today! Create your first draft!":this.stories.length===0&&this.drafts.length>0?"Publish a draft to start building your writing reputation!":t<r?`${r-t} achievements waiting! Consistency is key.`:"Keep up the great work! Your consistency is inspiring."}getBadgeHint(e){return{"streak-novice":"Write for 3 consecutive days!","streak-warrior":"Write every day for a full week!","streak-champion":"Maintain your daily writing for a month!","streak-legend":"The ultimate challenge - 100 days of writing!","prolific-writer":"Publish more stories to reach your goal!","word-master":"Keep writing - every word counts!","community-favorite":"Engage with the community to get more votes!",bookworm:"Discover and bookmark great content!"}[e]||""}formatNumber(e){return e==null?"0":e>=1e6?(e/1e6).toFixed(1)+"M":e>=1e3?(e/1e3).toFixed(1)+"K":e.toString()}startEditingName(){this.isOwnProfile&&(this.editingName=!0,this.tempName=this.userProfile?.displayName||"",setTimeout(()=>{this.nameInput?.nativeElement?.focus()}))}saveName(){return b(this,null,function*(){if(!(!this.userProfile||!this.tempName.trim()||!this.isOwnProfile)){this.savingProfile=!0;try{this.currentUser&&(yield this.profileService.updateProfile(this.currentUser.uid,{name:this.tempName.trim()})),this.userProfile&&(this.userProfile.displayName=this.tempName.trim()),this.editingName=!1,this.showNotification("Name updated successfully","success")}catch(e){console.error("Error updating name:",e),this.showNotification("Failed to update name","error")}finally{this.savingProfile=!1}}})}cancelNameEdit(){this.editingName=!1,this.tempName=""}startEditingBio(){this.isOwnProfile&&(this.editingBio=!0,this.tempBio=this.userProfile?.bio||"",setTimeout(()=>{this.bioInput?.nativeElement?.focus()}))}saveBio(){return b(this,null,function*(){if(!(!this.userProfile||!this.isOwnProfile)){this.savingProfile=!0;try{this.currentUser&&(yield this.profileService.updateProfile(this.currentUser.uid,{bio:this.tempBio.trim()})),this.userProfile&&(this.userProfile.bio=this.tempBio.trim()),this.editingBio=!1,this.showNotification("Bio updated successfully","success")}catch(e){console.error("Error updating bio:",e),this.showNotification("Failed to update bio","error")}finally{this.savingProfile=!1}}})}cancelBioEdit(){this.editingBio=!1,this.tempBio=""}createNewDraft(){return b(this,null,function*(){try{this.router.navigate(["/write"]),this.calculateXPProgress(),this.updateBadgeProgress()}catch(e){console.error("Error creating new draft:",e),this.showNotification("Failed to create draft","error")}})}editDraft(e){this.router.navigate(["/write",e.id])}readBookmark(e){e.storyId&&this.router.navigate(["/story/",e.storyId])}editBookmark(e){}formatDate(e){if(!e)return"";let t=e.toDate?e.toDate():new Date(e),i=new Date().getTime()-t.getTime(),o=Math.floor(i/(1e3*60*60*24));return o===0?"today":o===1?"yesterday":o<7?`${o} days ago`:o<30?`${Math.floor(o/7)} weeks ago`:o<365?`${Math.floor(o/30)} months ago`:`${Math.floor(o/365)} years ago`}getExcerpt(e,t=150){if(!e)return"";let r=e.replace(/<[^>]*>/g,"");return r.length>t?r.substring(0,t)+"...":r}calculateReadTime(e){if(!e)return 0;let t=e.trim().split(/\s+/).length;return Math.ceil(t/200)}get unlockedBadgesCount(){return this.badges?this.badges.filter(e=>e.unlocked).length:0}get totalBadgesCount(){return this.badges?this.badges.length:0}calculateLastWriteDayFromStories(){if(!this.stories||this.stories.length===0)return null;let e=this.stories.filter(t=>t.status==="published"&&t.createdAt).map(t=>{let r=t.createdAt;return r instanceof Date?r:r instanceof rt?r.toDate():new Date(r)}).sort((t,r)=>r.getTime()-t.getTime());return e.length>0?e[0]:null}calculateWritingStreakFromStories(){if(!this.stories||this.stories.length===0)return 0;let e=this.stories.filter(l=>l.status==="published"&&l.createdAt).map(l=>{let u=l.createdAt?l.createdAt:new Date(l.createdAt);return this.formatDateForComparison(u)}).sort().reverse();if(e.length===0)return 0;let t=this.getCurrentDate(),r=this.getYesterdayDate(),i=e[0];if(i!==t&&i!==r)return 0;let o=0,s=[...new Set(e)],a=i===t?t:r;for(let l of s)if(l===a){o++;let u=new Date(a);u.setDate(u.getDate()-1),a=u.toLocaleDateString("en-CA")}else break;return o}loadCriticalData(e){return b(this,null,function*(){let[t,r]=yield Promise.all([this.profileService.getProfile(e),this.loadContentData(e)]);if(!t)throw new Error("Profile not found");this.drafts=r.drafts,this.stories=r.stories,this.bookmarks=r.bookmarks;let i=this.calculateLastWriteDayFromStories(),o=this.calculateWritingStreakFromStories();this.userProfile=ne(H({},t),{nbUpvotes:0,nbViews:0,nbFollowed:0,nbFollowers:0,xp:t.xp||0,level:t.level||1,writingStreak:o,lastWriteDate:i?i.toISOString():null}),!this.isOwnProfile&&this.currentUser&&this.checkFollowStatus(e)})}updateWritingStreak(){return b(this,null,function*(){if(!(!this.currentUser||!this.isOwnProfile||!this.userProfile))try{let e=this.calculateWritingStreakFromStories(),t=this.calculateLastWriteDayFromStories();this.currentUser&&(yield this.profileService.updateProfile(this.currentUser.uid,{streaks:e,lastWriteDay:t||new Date}));let r=this.userProfile.writingStreak||0;this.userProfile.writingStreak=e,this.userProfile.lastWriteDate=t?t.toISOString():null,e>r&&(yield this.awardStreakXP(e))}catch(e){console.error("Error updating writing streak:",e)}})}updateWritingStreakOnLoad(){return b(this,null,function*(){if(!(!this.currentUser||!this.userProfile))try{let e=this.calculateWritingStreakFromStories(),t=this.calculateLastWriteDayFromStories(),r=this.userProfile.writingStreak||0;e!==r&&(yield this.profileService.updateProfile(this.currentUser.uid,{streaks:e,lastWriteDay:t||new Date}),e===0&&r>0&&this.showStreakBrokenNotification(r),this.userProfile.writingStreak=e,this.userProfile.lastWriteDate=t?t.toISOString():null,this.streakUpdated=!0)}catch(e){console.error("Error updating writing streak on load:",e)}})}isStreakCurrent(){let e=this.calculateLastWriteDayFromStories();if(!e)return!1;let t=new Date,r=new Date;r.setDate(r.getDate()-1);let i=this.formatDateForComparison(e),o=this.getCurrentDate(),s=this.getYesterdayDate();return i===o||i===s}calculateWordCount(e){return e?e.trim().split(/\s+/).length:0}calculateTotalWords(){return[...this.stories,...this.drafts].reduce((t,r)=>{let i=r.content||"";return t+this.calculateWordCount(i)},0)}getLevelXP(e){return e<=1?0:(e-1)*(e-1)*100}calculateLevel(e){return e<=0?1:Math.floor(Math.sqrt(e/100))+1}getNextLevelXP(){let e=this.userProfile?.level||1;return this.getLevelXP(e+1)}getXPProgress(){if(!this.userProfile)return 0;let e=this.userProfile.xp||0,t=this.userProfile.level||1,r=this.getLevelXP(t),o=this.getLevelXP(t+1)-r,s=e-r;return Math.max(0,Math.min(100,s/o*100))}getXPNeededForNextLevel(){if(!this.userProfile)return 100;let e=this.userProfile.xp||0,t=this.getNextLevelXP();return Math.max(0,t-e)}getCurrentLevelXPRange(){let e=this.userProfile?.level||1,t=this.getLevelXP(e);return this.getLevelXP(e+1)-t}calculateXPProgress(){if(!this.userProfile)return;let e=this.userProfile.xp||0,t=this.calculateLevel(e);this.userProfile.level!==t&&(this.userProfile.level=t),this.currentLevelXP=this.getLevelXP(t),this.nextLevelXP=this.getLevelXP(t+1),this.xpProgress=this.getXPProgress()}awardXP(e,t){return b(this,null,function*(){if(!(!this.currentUser||!this.userProfile))try{let r=this.userProfile.level||1,o=(this.userProfile.xp||0)+e,s=this.calculateLevel(o);yield this.profileService.awardUserXP(this.currentUser.uid,e,t),this.userProfile.xp=o,this.userProfile.level=s,this.calculateXPProgress(),s>r&&this.showLevelUpNotification(s,r)}catch(r){console.error("Error awarding XP:",r)}})}showLevelUpNotification(e,t){let r=e-t,i=r===1?`Level up! You're now level ${e}!`:`Amazing! You jumped ${r} levels to level ${e}!`;this.showNotification(i,"success")}debugXPSystem(){for(let e=1;e<=10;e++){let t=this.getLevelXP(e),r=this.calculateLevel(t),o=this.getLevelXP(e+1)-t}}deleteDraft(e){return b(this,null,function*(){if(yield this.confirmAction("delete-draft",e.title)){this.deletingItem=e.id;try{yield this.storyService.deleteDraft(e.id),this.drafts=this.drafts.filter(t=>t.id!==e.id),this.showNotification("Draft deleted successfully","success"),this.currentUser&&this.invalidateStatsCache(this.currentUser.uid)}catch(t){console.error("Error deleting draft:",t),this.showNotification("Failed to delete draft","error")}finally{this.deletingItem=null}}})}deleteStory(e){return b(this,null,function*(){if(yield this.confirmAction("delete-story",e.title)){this.deletingItem=e.id;try{yield this.storyService.deleteStory(e.id),this.stories=this.stories.filter(t=>t.id!==e.id),this.showNotification("Story deleted successfully","success"),this.currentUser&&this.invalidateStatsCache(this.currentUser.uid),this.updateBadgeProgress(),this.calculateXPProgress()}catch(t){console.error("Error deleting story:",t),this.showNotification("Failed to delete story","error")}finally{this.deletingItem=null}}})}editingSocial=!1;tempSocialLinks={};hasSocialLinks(){if(!this.userProfile?.socialLinks)return!1;let e=this.userProfile.socialLinks;return!!(e.fb||e.ig||e.linkedin)}startEditingSocial(){this.isOwnProfile&&(this.editingSocial=!0,this.tempSocialLinks={fb:this.userProfile?.socialLinks?.fb||"",ig:this.userProfile?.socialLinks?.ig||"",linkedin:this.userProfile?.socialLinks?.linkedin||""})}saveSocialLinks(){return b(this,null,function*(){if(!(!this.userProfile||!this.isOwnProfile)){this.savingProfile=!0;try{let e=this.validateAndCleanSocialLinks(this.tempSocialLinks);this.currentUser&&(yield this.profileService.updateProfile(this.currentUser.uid,{socialLinks:e})),this.userProfile.socialLinks=e,this.editingSocial=!1,this.showNotification("Social links updated successfully","success")}catch(e){console.error("Error updating social links:",e),this.showNotification("Failed to update social links","error")}finally{this.savingProfile=!1}}})}cancelSocialEdit(){this.editingSocial=!1,this.tempSocialLinks={}}validateAndCleanSocialLinks(e){let t={};return e.fb&&e.fb.trim()&&(t.fb=this.cleanSocialLink(e.fb.trim(),"facebook")),e.ig&&e.ig.trim()&&(t.ig=this.cleanSocialLink(e.ig.trim(),"instagram")),e.linkedin&&e.linkedin.trim()&&(t.linkedin=this.cleanSocialLink(e.linkedin.trim(),"linkedin")),t}cleanSocialLink(e,t){let r=e.replace(/^https?:\/\/(www\.)?/,"");switch(r=r.replace(/\/+$/,""),t){case"facebook":return r.startsWith("@")?r.substring(1):r.startsWith("facebook.com/")?r.substring(13):r.startsWith("m.facebook.com/")?r.substring(15):r;case"instagram":return r.startsWith("@")?r.substring(1):r.startsWith("instagram.com/")?r.substring(14):r;case"linkedin":return r.startsWith("linkedin.com/in/")?r.substring(16):r.startsWith("linkedin.com/company/")?r.substring(21):r.startsWith("linkedin.com/")?r.substring(13):r;default:return r}}getSocialUrl(e,t){if(!t)return"#";if(t.startsWith("http://")||t.startsWith("https://"))return t;switch(e){case"fb":return`https://facebook.com/${t}`;case"ig":return`https://instagram.com/${t}`;case"linkedin":return t.includes("/company/")||this.isCompanyLinkedIn(t)?`https://linkedin.com/company/${t}`:`https://linkedin.com/in/${t}`;default:return"#"}}isCompanyLinkedIn(e){let t=["company","corp","inc","ltd","llc","technologies","solutions","services","consulting","group"],r=e.toLowerCase();return t.some(i=>r.includes(i))}validateSocialLink(e,t){if(!t||!t.trim())return{valid:!0};let r=t.trim();if(r.length>100)return{valid:!1,message:"Link is too long"};switch(e){case"fb":if(this.containsInvalidChars(r,"facebook"))return{valid:!1,message:"Invalid characters in Facebook link"};break;case"ig":if(this.containsInvalidChars(r,"instagram"))return{valid:!1,message:"Invalid characters in Instagram link"};break;case"linkedin":if(this.containsInvalidChars(r,"linkedin"))return{valid:!1,message:"Invalid characters in LinkedIn link"};break}return{valid:!0}}containsInvalidChars(e,t){let r=e.replace(/^https?:\/\/(www\.|m\.)?/,"");return r=r.replace(/^@/,""),r=r.replace(new RegExp(`^${t}.com/`),""),/[<>{}|\\^`\[\]]/.test(r)}getSocialDisplayText(e,t){if(!t)return"";if(!t.includes("/")&&!t.includes("."))return`@${t}`;let r=this.cleanSocialLink(t,e);return r.length>20?`@${r.substring(0,17)}...`:`@${r}`}editingSingleSocial=null;editSingleSocial(e){this.isOwnProfile&&(this.editingSocial=!0,this.editingSingleSocial=e,this.tempSocialLinks={fb:e==="fb"&&this.userProfile?.socialLinks?.fb||"",ig:e==="ig"&&this.userProfile?.socialLinks?.ig||"",linkedin:e==="linkedin"&&this.userProfile?.socialLinks?.linkedin||""})}clearSocialInput(e){this.tempSocialLinks[e]=""}getSocialPlatformName(e){return{fb:"Facebook",ig:"Instagram",linkedin:"LinkedIn"}[e]}deleteSocialLink(e){return b(this,null,function*(){if(!(!this.isOwnProfile||!this.userProfile?.socialLinks)&&confirm(`Remove your ${this.getSocialPlatformName(e)} link?`)){this.savingProfile=!0;try{let t=H({},this.userProfile.socialLinks);delete t[e],this.currentUser&&(yield this.profileService.updateProfile(this.currentUser.uid,{socialLinks:t})),this.userProfile.socialLinks=t,this.editingSocial=!1,this.editingSingleSocial=null,this.showNotification("Social link removed successfully","success")}catch(t){console.error("Error deleting social link:",t),this.showNotification("Failed to remove social link","error")}finally{this.savingProfile=!1}}})}canAddMoreSocials(){if(!this.userProfile?.socialLinks)return!0;let e=this.userProfile.socialLinks;return[e.fb,e.ig,e.linkedin].filter(Boolean).length<3}onSocialInputChange(e,t){let r=t.target,i=this.validateSocialLink(e,r.value);r.classList.remove("valid","invalid"),r.value.trim()&&r.classList.add(i.valid?"valid":"invalid")}static \u0275fac=function(t){return new(t||n)(ee(cr),ee(Tn),ee(tl),ee(Wo),ee(di),ee(el),ee(it),ee(Om),ee(Ve),ee(ur))};static \u0275cmp=Xe({type:n,selectors:[["app-profile"]],viewQuery:function(t,r){if(t&1&&(yo(Nz,5),yo(Fz,5)),t&2){let i;Wr(i=Gr())&&(r.nameInput=i.first),Wr(i=Gr())&&(r.bioInput=i.first)}},decls:4,vars:3,consts:[["statsLoader",""],["badgesLoader",""],["nameInput",""],["bioInput",""],["facebookInput",""],["instagramInput",""],["linkedinInput",""],[1,"profile-container"],["class","loading-state",4,"ngIf"],["class","profile-content",4,"ngIf"],["class","error-state",4,"ngIf"],[1,"loading-state"],[1,"spinner"],[4,"ngIf"],[1,"profile-content"],[1,"profile-header"],[1,"avatar-section"],[1,"avatar-container"],[1,"avatar",3,"src","alt"],[1,"level-badge"],[1,"level-number"],[1,"profile-info"],[1,"name-section"],["class","user-name",3,"click",4,"ngIf"],["class","name-edit",4,"ngIf"],["class","streak-section",4,"ngIf"],[1,"xp-section"],[1,"xp-info"],[1,"xp-current"],[1,"xp-next"],[1,"xp-bar"],[1,"xp-progress"],["class","xp-details",4,"ngIf"],[1,"bio-section"],["class","user-bio",3,"click",4,"ngIf"],["class","bio-edit",4,"ngIf"],[1,"social-section"],["class","social-title",4,"ngIf"],["class","social-links-display",4,"ngIf"],["class","social-edit-form",4,"ngIf"],["class","user-stats",4,"ngIf","ngIfElse"],["class","follow-section",4,"ngIf"],["class","motivation-banner",4,"ngIf"],["class","badges-section",4,"ngIf","ngIfElse"],["class","community-section",4,"ngIf"],[1,"tabs-container"],[1,"tabs"],["class","tab",3,"active","click",4,"ngIf"],[1,"tab",3,"click"],[1,"content-container"],["class","content-section",4,"ngIf"],[1,"user-name",3,"click"],["class","edit-icon",4,"ngIf"],[1,"edit-icon"],[1,"name-edit"],["maxlength","50","placeholder","Enter your name",1,"name-input",3,"ngModelChange","keydown","input","ngModel"],[1,"edit-actions"],[1,"save-btn",3,"click","disabled"],[1,"cancel-btn",3,"click"],[1,"streak-section"],[1,"streak-indicator"],[1,"streak-icon"],["class","streak-status",4,"ngIf"],["class","streak-info",4,"ngIf"],[1,"streak-status"],[1,"streak-info"],[1,"xp-details"],[1,"level-info"],[1,"user-bio",3,"click"],[1,"bio-edit"],["rows","3","maxlength","200","placeholder","Tell us about yourself...",1,"bio-textarea",3,"ngModelChange","keydown","input","ngModel"],[1,"social-title"],["class","edit-icon",3,"click",4,"ngIf"],[1,"edit-icon",3,"click"],[1,"social-links-display"],["class","social-placeholder",3,"click",4,"ngIf"],["class","social-links-grid",4,"ngIf"],[1,"social-placeholder",3,"click"],[1,"placeholder-text"],[1,"social-links-grid"],[1,"social-link-wrapper"],["target","_blank","rel","noopener noreferrer","class","social-link facebook",3,"href",4,"ngIf"],["class","edit-social-btn","title","Edit Facebook link",3,"click",4,"ngIf"],["target","_blank","rel","noopener noreferrer","class","social-link instagram",3,"href",4,"ngIf"],["class","edit-social-btn","title","Edit Instagram link",3,"click",4,"ngIf"],["target","_blank","rel","noopener noreferrer","class","social-link linkedin",3,"href",4,"ngIf"],["class","edit-social-btn","title","Edit LinkedIn link",3,"click",4,"ngIf"],["class","add-social-btn","title","Add more social links",3,"click",4,"ngIf"],["target","_blank","rel","noopener noreferrer",1,"social-link","facebook",3,"href"],["viewBox","0 0 24 24","fill","currentColor",1,"social-icon"],["d",`M24 12.073c0-6.627-5.373-12-12-12s-12 
                      5.373-12 12c0 5.99 4.388 10.954 10.125 
                      11.854v-8.385H7.078v-3.47h3.047V9.43c0-3.007 
                      1.792-4.669 4.533-4.669 1.312 0 
                      2.686.235 2.686.235v2.953H15.83c-1.491 
                      0-1.956.925-1.956 1.874v2.25h3.328l-.532 
                      3.47h-2.796v8.385C19.612 23.027 
                      24 18.062 24 12.073z`],["title","Edit Facebook link",1,"edit-social-btn",3,"click"],["target","_blank","rel","noopener noreferrer",1,"social-link","instagram",3,"href"],["d",`M12 2.163c3.204 0 3.584.012 
                      4.85.07 3.252.148 4.771 1.691 
                      4.919 4.919.058 1.265.069 
                      1.645.069 4.849 0 3.205-.012 
                      3.584-.069 4.849-.149 3.225-1.664 
                      4.771-4.919 4.919-1.266.058-1.644.07-4.85.07-3.204 
                      0-3.584-.012-4.849-.07-3.26-.149-4.771-1.699-4.919-4.92-.058-1.265-.07-1.644-.07-4.849 
                      0-3.204.013-3.583.07-4.849.149-3.227 
                      1.664-4.771 4.919-4.919 1.266-.057 
                      1.645-.069 4.849-.069zM12 
                      7.001a5 5 0 1 0 0 10 5 5 0 
                      0 0 0-10zm6.406-2.684a1.44 
                      1.44 0 1 0 0 2.88 1.44 1.44 
                      0 0 0 0-2.88z`],["title","Edit Instagram link",1,"edit-social-btn",3,"click"],["target","_blank","rel","noopener noreferrer",1,"social-link","linkedin",3,"href"],["d",`M20.447 20.452h-3.554v-5.569c0-1.328-.027-3.037-1.852-3.037-1.853 
                      0-2.136 1.445-2.136 2.939v5.667H9.351V9h3.414v1.561h.046c.477-.9 
                      1.637-1.85 3.37-1.85 3.601 0 
                      4.267 2.37 4.267 5.455v6.286zM5.337 
                      7.433c-1.144 0-2.063-.926-2.063-2.065 
                      0-1.138.92-2.063 2.063-2.063 
                      1.14 0 2.064.925 2.064 
                      2.063 0 1.139-.925 2.065-2.064 
                      2.065zm1.782 13.019H3.555V9h3.564v11.452zM22.225 
                      0H1.771C.792 0 0 .774 0 1.729v20.542C0 
                      23.227.792 24 1.771 24h20.451C23.2 
                      24 24 23.227 24 22.271V1.729C24 
                      .774 23.2 0 22.222 0h.003z`],["title","Edit LinkedIn link",1,"edit-social-btn",3,"click"],["title","Add more social links",1,"add-social-btn",3,"click"],["viewBox","0 0 24 24","fill","currentColor",1,"add-icon"],["d","M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6v2z"],[1,"social-edit-form"],[1,"form-header"],[1,"form-title"],[1,"form-subtitle"],["class","social-input-group",4,"ngIf"],["class","delete-btn","title","Remove this social link",3,"click",4,"ngIf"],[1,"social-input-group"],["for","facebook-input",1,"social-input-label"],["d",`M24 12.073c0-6.627-5.373-12-12-12s-12 
                   5.373-12 12c0 5.99 4.388 10.954 10.125 
                   11.854v-8.385H7.078v-3.47h3.047V9.43c0-3.007 
                   1.792-4.669 4.533-4.669 1.312 0 
                   2.686.235 2.686.235v2.953H15.83c-1.491 
                   0-1.956.925-1.956 1.874v2.25h3.328l-.532 
                   3.47h-2.796v8.385C19.612 23.027 
                   24 18.062 24 12.073z`],[1,"input-with-actions"],["id","facebook-input","placeholder","facebook.com/yourprofile or @username","maxlength","100",1,"social-input",3,"ngModelChange","input","ngModel"],["type","button","class","clear-input-btn","title","Clear",3,"click",4,"ngIf"],["type","button","title","Clear",1,"clear-input-btn",3,"click"],["for","instagram-input",1,"social-input-label"],["d",`M12 2.163c3.204 0 3.584.012 
                   4.85.07 3.252.148 4.771 1.691 
                   4.919 4.919.058 1.265.069 
                   1.645.069 4.849 0 3.205-.012 
                   3.584-.069 4.849-.149 3.225-1.664 
                   4.771-4.919 4.919-1.266.058-1.644.07-4.85.07-3.204 
                   0-3.584-.012-4.849-.07-3.26-.149-4.771-1.699-4.919-4.92-.058-1.265-.07-1.644-.07-4.849 
                   0-3.204.013-3.583.07-4.849.149-3.227 
                   1.664-4.771 4.919-4.919 1.266-.057 
                   1.645-.069 4.849-.069zM12 
                   7.001a5 5 0 1 0 0 10 5 5 0 
                   0 0 0-10zm6.406-2.684a1.44 
                   1.44 0 1 0 0 2.88 1.44 1.44 
                   0 0 0 0-2.88z`],["id","instagram-input","placeholder","instagram.com/username or @username","maxlength","100",1,"social-input",3,"ngModelChange","input","ngModel"],["for","linkedin-input",1,"social-input-label"],["d",`M20.447 20.452h-3.554v-5.569c0-1.328-.027-3.037-1.852-3.037-1.853 
                   0-2.136 1.445-2.136 2.939v5.667H9.351V9h3.414v1.561h.046c.477-.9 
                   1.637-1.85 3.37-1.85 3.601 0 
                   4.267 2.37 4.267 5.455v6.286zM5.337 
                   7.433c-1.144 0-2.063-.926-2.063-2.065 
                   0-1.138.92-2.063 2.063-2.063 
                   1.14 0 2.064.925 2.064 
                   2.063 0 1.139-.925 2.065-2.064 
                   2.065zm1.782 13.019H3.555V9h3.564v11.452zM22.225 
                   0H1.771C.792 0 0 .774 0 1.729v20.542C0 
                   23.227.792 24 1.771 24h20.451C23.2 
                   24 24 23.227 24 22.271V1.729C24 
                   .774 23.2 0 22.222 0h.003z`],["id","linkedin-input","placeholder","linkedin.com/in/yourprofile or linkedin.com/company/yourcompany","maxlength","100",1,"social-input",3,"ngModelChange","input","ngModel"],["title","Remove this social link",1,"delete-btn",3,"click"],[1,"user-stats"],["class","stat",4,"ngIf"],[1,"stat"],[1,"stat-number"],[1,"stat-label"],[1,"stats-skeleton"],["class","skeleton-item",4,"ngFor","ngForOf"],[1,"skeleton-item"],[1,"follow-section"],[1,"follow-btn",3,"click","disabled"],["class","button-spinner",4,"ngIf"],[1,"button-spinner"],[1,"motivation-banner"],[1,"motivation-content"],[1,"motivation-icon"],[1,"motivation-text"],[1,"badges-section"],[1,"section-title"],[1,"achievement-count"],[1,"badges-grid"],["class","badge-item",3,"unlocked","in-progress","title",4,"ngFor","ngForOf","ngForTrackBy"],[1,"badge-item",3,"title"],[1,"badge-icon"],[1,"badge-info"],[1,"badge-name"],[1,"badge-description"],["class","badge-progress",4,"ngIf"],["class","badge-unlocked",4,"ngIf"],[1,"badge-progress"],[1,"progress-bar"],[1,"progress-fill"],[1,"progress-text"],[1,"badge-unlocked"],[1,"unlock-icon"],["class","badges-section",4,"ngIf"],[1,"badges-skeleton"],["class","badge-skeleton",4,"ngFor","ngForOf"],[1,"badge-skeleton"],[1,"community-section"],[1,"impact-stats"],[1,"impact-stat"],[1,"impact-number"],[1,"impact-label"],[1,"content-section"],["class","empty-state",4,"ngIf"],["class","content-card",4,"ngFor","ngForOf","ngForTrackBy"],[1,"empty-state"],[1,"empty-icon"],[1,"empty-rewards"],[1,"reward-item"],[1,"reward-icon"],[1,"reward-text"],["class","reward-item",4,"ngIf"],["class","create-btn",3,"click",4,"ngIf"],[1,"create-btn",3,"click"],[1,"content-card"],[1,"card-header"],[1,"card-title"],[1,"card-excerpt"],[1,"card-footer"],[1,"card-date"],[1,"card-stats"],[1,"stat-item"],[1,"card-actions"],[1,"action-btn",3,"click"],[1,"btn-icon"],[1,"action-btn","publish",3,"click","disabled"],["class","btn-icon",4,"ngIf"],["class","btn-spinner",4,"ngIf"],["class","btn-reward",4,"ngIf"],[1,"action-btn","danger",3,"click","disabled"],[1,"btn-spinner"],[1,"btn-reward"],["class","empty-rewards",4,"ngIf"],["class","bookmark-tags",4,"ngIf"],[1,"action-btn",2,"text-decoration","none",3,"href"],["class","action-btn danger",3,"disabled","click",4,"ngIf"],[1,"bookmark-tags"],["class","tag",4,"ngFor","ngForOf"],[1,"tag"],[1,"card-meta"],[1,"action-btn","danger",3,"disabled"],[1,"error-state"],[1,"error-icon"],[1,"retry-btn",3,"click"],[1,"retry-icon"]],template:function(t,r){t&1&&(h(0,"div",7),B(1,Bz,4,2,"div",8)(2,cW,48,32,"div",9)(3,lW,11,0,"div",10),p()),t&2&&(v(),C("ngIf",r.loading),v(),C("ngIf",!r.loading&&r.userProfile),v(),C("ngIf",!r.loading&&!r.userProfile))},dependencies:[hi,lr,fi,la,Nr,Sn,In,Rn,Ky],styles:['@charset "UTF-8";.profile-container[_ngcontent-%COMP%]{max-width:960px;margin:0 auto;padding:2rem;font-family:Inter,sans-serif;color:#333}.loading-state[_ngcontent-%COMP%]{text-align:center;font-size:1.2rem;color:#777}.spinner[_ngcontent-%COMP%]{border:4px solid rgba(0,0,0,.1);border-left-color:#f7c843;border-radius:50%;width:40px;height:40px;animation:_ngcontent-%COMP%_spin 1s linear infinite;margin:1rem auto}@keyframes _ngcontent-%COMP%_spin{to{transform:rotate(360deg)}}.error-message[_ngcontent-%COMP%]{text-align:center;font-size:1.2rem;color:#e74c3c;margin:2rem 0}.profile-header[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;margin-bottom:2rem;position:relative}.avatar-container[_ngcontent-%COMP%]{position:relative;display:inline-block}.avatar[_ngcontent-%COMP%]{width:128px;height:128px;border-radius:50%;object-fit:cover;border:3px solid #f7c843;transition:transform .3s}.avatar[_ngcontent-%COMP%]:hover{transform:scale(1.05)}.level-badge[_ngcontent-%COMP%]{position:absolute;bottom:0;right:0;background:#f7c843;color:#333;border-radius:50%;padding:.3rem .6rem;font-weight:700;font-size:.8rem;border:2px solid #fff}.profile-details[_ngcontent-%COMP%]{margin-top:1rem;text-align:center}.profile-name[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;gap:.5rem}.profile-name[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{margin:0;font-size:1.8rem}.edit-input[_ngcontent-%COMP%]{font-size:1.2rem;padding:.4rem}.profile-bio[_ngcontent-%COMP%]{margin-top:.5rem;color:#555;font-size:1rem}.editable-text[_ngcontent-%COMP%]{cursor:pointer;display:inline-block}.editable-text[_ngcontent-%COMP%]:hover{background:#edeae3;padding:0 .2rem;border-radius:4px}.edit-actions[_ngcontent-%COMP%]{display:flex;gap:.5rem;margin-top:.3rem}.btn[_ngcontent-%COMP%]{padding:.3rem .7rem;border:none;border-radius:4px;cursor:pointer;font-size:.9rem;transition:background .2s}.btn-save[_ngcontent-%COMP%]{background:#2ecc71;color:#fff}.btn-cancel[_ngcontent-%COMP%]{background:#e74c3c;color:#fff}.btn[_ngcontent-%COMP%]:hover{opacity:.9}.xp-section[_ngcontent-%COMP%]{margin:1.5rem 0;text-align:center}.progress-bar[_ngcontent-%COMP%]{background:#edeae3;border-radius:10px;overflow:hidden;height:20px;width:100%;margin:.5rem 0}.progress[_ngcontent-%COMP%]{background:#f7c843;height:100%;transition:width .3s}.streak[_ngcontent-%COMP%]{margin-top:.5rem;font-size:.9rem;color:#333;display:flex;align-items:center;justify-content:center;gap:.3rem}.achievements[_ngcontent-%COMP%]{margin:2rem 0}.achievements[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin-bottom:1rem}.badges[_ngcontent-%COMP%]{display:flex;gap:1rem;flex-wrap:wrap}.badge[_ngcontent-%COMP%]{background:#edeae3;padding:.6rem 1rem;border-radius:8px;text-align:center;flex:1;min-width:120px;transition:background .2s,transform .2s}.badge[_ngcontent-%COMP%]:hover{background:#f7c843;transform:translateY(-3px)}.stats[_ngcontent-%COMP%]{display:flex;justify-content:space-around;margin:2rem 0;flex-wrap:wrap;gap:1rem}.stat[_ngcontent-%COMP%]{background:#fdfcf9;padding:1rem;border-radius:8px;flex:1;min-width:120px;text-align:center;box-shadow:0 2px 4px #0000000d}.stat[_ngcontent-%COMP%]   .number[_ngcontent-%COMP%]{font-size:1.5rem;font-weight:700;color:#333}.stat[_ngcontent-%COMP%]   .label[_ngcontent-%COMP%]{color:#777;font-size:.9rem}.follow-button[_ngcontent-%COMP%]{margin-top:1rem}.btn-follow[_ngcontent-%COMP%]{background:#f7c843;padding:.6rem 1.2rem;border-radius:20px;font-weight:700;font-size:1rem}.btn-follow[_ngcontent-%COMP%]:hover{background:#e6b839}.motivation-banner[_ngcontent-%COMP%]{background:#f7c843;padding:1rem;border-radius:8px;text-align:center;margin:1.5rem 0;font-weight:700;color:#333}.tabs[_ngcontent-%COMP%]{display:flex;justify-content:center;gap:1rem;margin:2rem 0}.tabs[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding:.5rem 1.2rem;border:none;border-radius:20px;background:#edeae3;cursor:pointer;transition:background .2s}.tabs[_ngcontent-%COMP%]   button.active[_ngcontent-%COMP%]{background:#f7c843;font-weight:700}.tabs[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{background:#f7c843}.section-content[_ngcontent-%COMP%]{min-height:200px}.empty-state[_ngcontent-%COMP%]{text-align:center;color:#777;margin:2rem 0}.rewards[_ngcontent-%COMP%]{margin-top:1rem}.draft-card[_ngcontent-%COMP%], .article-card[_ngcontent-%COMP%], .bookmark-card[_ngcontent-%COMP%]{background:#fdfcf9;border:1px solid #edeae3;border-radius:8px;padding:1rem;margin-bottom:1rem;transition:box-shadow .2s}.draft-card[_ngcontent-%COMP%]:hover, .article-card[_ngcontent-%COMP%]:hover, .bookmark-card[_ngcontent-%COMP%]:hover{box-shadow:0 4px 8px #00000014}.draft-header[_ngcontent-%COMP%], .article-header[_ngcontent-%COMP%], .bookmark-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center}.draft-title[_ngcontent-%COMP%], .article-title[_ngcontent-%COMP%], .bookmark-title[_ngcontent-%COMP%]{font-size:1.1rem;font-weight:700}.draft-excerpt[_ngcontent-%COMP%], .article-excerpt[_ngcontent-%COMP%]{margin:.5rem 0;color:#555}.draft-actions[_ngcontent-%COMP%], .article-actions[_ngcontent-%COMP%], .bookmark-actions[_ngcontent-%COMP%]{margin-top:.5rem;display:flex;gap:.5rem}.draft-actions[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%], .article-actions[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%], .bookmark-actions[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{font-size:.8rem;padding:.3rem .7rem;background:#edeae3;border-radius:4px}.draft-actions[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]:hover, .article-actions[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]:hover, .bookmark-actions[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]:hover{background:#f7c843}.skeleton[_ngcontent-%COMP%]{background:linear-gradient(90deg,#edeae3 25%,#fdfcf9,#edeae3 75%);background-size:200% 100%;animation:_ngcontent-%COMP%_shimmer 1.5s infinite;border-radius:4px}.skeleton.avatar[_ngcontent-%COMP%]{width:128px;height:128px;border-radius:50%}.skeleton-text[_ngcontent-%COMP%]{height:16px;margin:.3rem 0}.skeleton-title[_ngcontent-%COMP%]{height:24px;margin:.5rem 0}.skeleton-stat[_ngcontent-%COMP%], .skeleton-badge[_ngcontent-%COMP%]{height:20px;width:80px;margin:.5rem}@keyframes _ngcontent-%COMP%_shimmer{to{background-position:-200% 0}}@media (max-width: 600px){.stats[_ngcontent-%COMP%], .badges[_ngcontent-%COMP%]{flex-direction:column}.tabs[_ngcontent-%COMP%]{flex-wrap:wrap}}.loading-state[_ngcontent-%COMP%], .error-state[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;min-height:400px;text-align:center}.spinner[_ngcontent-%COMP%]{width:40px;height:40px;border:4px solid #EDEAE3;border-top:4px solid #F7C843;border-radius:50%;animation:_ngcontent-%COMP%_spin 1s linear infinite;margin-bottom:1rem}@keyframes _ngcontent-%COMP%_spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}.profile-header[_ngcontent-%COMP%]{display:flex;gap:2rem;margin-bottom:2rem;background:#fff;padding:2rem;border-radius:16px;box-shadow:0 2px 8px #0000000a;border:1px solid #EDEAE3}.avatar-section[_ngcontent-%COMP%]{flex-shrink:0;position:relative}.avatar-container[_ngcontent-%COMP%]{position:relative;cursor:pointer;width:120px;height:120px;border-radius:50%;overflow:hidden;transition:all .2s ease}.avatar[_ngcontent-%COMP%]{width:100%;height:100%;object-fit:cover;border:3px solid #EDEAE3}.level-badge[_ngcontent-%COMP%]{position:absolute;bottom:-5px;right:-5px;width:36px;height:36px;background:linear-gradient(135deg,#f7c843,#edeae3);border:3px solid white;border-radius:50%;display:flex;align-items:center;justify-content:center;box-shadow:0 2px 8px #f7c8434d}.level-number[_ngcontent-%COMP%]{color:#2e2e2e;font-weight:700;font-size:.875rem}.profile-info[_ngcontent-%COMP%]{flex:1;min-width:0}.name-section[_ngcontent-%COMP%]{margin-bottom:1rem}.user-name[_ngcontent-%COMP%]{font-size:2rem;font-weight:700;color:#2e2e2e;margin:0;cursor:pointer;display:inline-flex;align-items:center;gap:.5rem;transition:color .2s ease}.user-name[_ngcontent-%COMP%]:hover{color:#f7c843}.edit-icon[_ngcontent-%COMP%]{font-size:1rem;opacity:0;transition:opacity .2s ease}.user-name[_ngcontent-%COMP%]:hover   .edit-icon[_ngcontent-%COMP%], .user-bio[_ngcontent-%COMP%]:hover   .edit-icon[_ngcontent-%COMP%]{opacity:1}.streak-section[_ngcontent-%COMP%]{margin-bottom:1rem}.streak-indicator[_ngcontent-%COMP%]{display:inline-flex;align-items:center;gap:.5rem;background:linear-gradient(135deg,#f7c843,#edeae3);color:#2e2e2e;padding:.5rem 1rem;border-radius:20px;font-size:.875rem;font-weight:600;box-shadow:0 2px 8px #f7c84333;margin-bottom:.5rem;transition:all .3s ease}.streak-indicator.streak-warning[_ngcontent-%COMP%]{background:linear-gradient(135deg,#ff6b6b,#feca57);animation:_ngcontent-%COMP%_pulse 2s infinite}@keyframes _ngcontent-%COMP%_pulse{0%,to{transform:scale(1)}50%{transform:scale(1.02)}}.streak-icon[_ngcontent-%COMP%]{font-size:1rem}.streak-status[_ngcontent-%COMP%]{font-size:.75rem;margin-left:.25rem}.streak-info[_ngcontent-%COMP%]{color:#666;font-size:.75rem}.xp-section[_ngcontent-%COMP%]{margin-bottom:1rem}.xp-info[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:.5rem;font-size:.875rem}.xp-current[_ngcontent-%COMP%]{font-weight:600;color:#2e2e2e}.xp-next[_ngcontent-%COMP%]{color:#666}.xp-bar[_ngcontent-%COMP%]{height:8px;background:#edeae3;border-radius:4px;overflow:hidden}.xp-progress[_ngcontent-%COMP%]{height:100%;background:linear-gradient(90deg,#f7c843,#edeae3);border-radius:4px;transition:width .3s ease}.follow-section[_ngcontent-%COMP%]{margin-top:1rem}.follow-btn[_ngcontent-%COMP%]{padding:.75rem 1.5rem;border-radius:8px;font-size:.875rem;font-weight:600;cursor:pointer;transition:all .2s ease;border:2px solid #F7C843;background:#f7c843;color:#2e2e2e}.follow-btn[_ngcontent-%COMP%]:hover{background:#edeae3}.follow-btn.following[_ngcontent-%COMP%]{background:transparent;color:#f7c843}.follow-btn.following[_ngcontent-%COMP%]:hover{background:#edeae3}.follow-btn[_ngcontent-%COMP%]:disabled{opacity:.6;cursor:not-allowed}.name-edit[_ngcontent-%COMP%], .bio-edit[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:.75rem}.name-input[_ngcontent-%COMP%]{font-size:2rem;font-weight:700;color:#2e2e2e;border:2px solid #F7C843;border-radius:8px;padding:.5rem;background:#fdfcf9;font-family:inherit;outline:none}.bio-section[_ngcontent-%COMP%]{margin-bottom:1.5rem}.user-bio[_ngcontent-%COMP%]{font-size:1.125rem;color:#666;line-height:1.6;margin:0;cursor:pointer;display:inline-flex;align-items:flex-start;gap:.5rem;transition:color .2s ease}.user-bio[_ngcontent-%COMP%]:hover{color:#2e2e2e}.bio-textarea[_ngcontent-%COMP%]{font-size:1.125rem;color:#2e2e2e;border:2px solid #F7C843;border-radius:8px;padding:.75rem;background:#fdfcf9;font-family:inherit;resize:vertical;outline:none;line-height:1.6;min-height:80px}.edit-actions[_ngcontent-%COMP%]{display:flex;gap:.5rem}.save-btn[_ngcontent-%COMP%], .cancel-btn[_ngcontent-%COMP%], .create-btn[_ngcontent-%COMP%], .retry-btn[_ngcontent-%COMP%]{padding:.5rem 1rem;border-radius:6px;font-size:.875rem;font-weight:500;cursor:pointer;transition:all .2s ease;border:none}.save-btn[_ngcontent-%COMP%], .create-btn[_ngcontent-%COMP%], .retry-btn[_ngcontent-%COMP%]{background:#f7c843;color:#2e2e2e}.save-btn[_ngcontent-%COMP%]:hover, .create-btn[_ngcontent-%COMP%]:hover, .retry-btn[_ngcontent-%COMP%]:hover{background:#edeae3}.save-btn[_ngcontent-%COMP%]:disabled{background:#666;cursor:not-allowed}.cancel-btn[_ngcontent-%COMP%]{background:#edeae3;color:#666}.cancel-btn[_ngcontent-%COMP%]:hover{background:#666;color:#fff}.user-stats[_ngcontent-%COMP%]{display:flex;gap:2rem;flex-wrap:wrap}.stat[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;text-align:center;min-width:80px}.stat-number[_ngcontent-%COMP%]{font-size:1.5rem;font-weight:700;color:#2e2e2e}.stat-label[_ngcontent-%COMP%]{font-size:.875rem;color:#666;text-transform:uppercase;letter-spacing:.05em}.motivation-banner[_ngcontent-%COMP%]{background:linear-gradient(135deg,#f7c843,#edeae3);border-radius:16px;padding:1.5rem;margin-bottom:2rem;border:1px solid #F7C843}.motivation-content[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.75rem;color:#2e2e2e;font-weight:500}.motivation-icon[_ngcontent-%COMP%]{font-size:1.25rem}.badges-section[_ngcontent-%COMP%], .community-section[_ngcontent-%COMP%]{background:#fff;border-radius:16px;padding:2rem;margin-bottom:2rem;box-shadow:0 2px 8px #0000000a;border:1px solid #EDEAE3}.section-title[_ngcontent-%COMP%]{font-size:1.25rem;font-weight:600;color:#2e2e2e;margin:0 0 1.5rem}.badges-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fill,minmax(200px,1fr));gap:1rem}.badge-item[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.75rem;padding:1rem;border-radius:12px;background:#edeae3;transition:all .2s ease;opacity:.5}.badge-item.unlocked[_ngcontent-%COMP%]{background:linear-gradient(135deg,#f7c843,#edeae3);opacity:1;transform:translateY(-2px);box-shadow:0 4px 12px #f7c84333}.badge-icon[_ngcontent-%COMP%]{font-size:1.5rem;width:40px;text-align:center}.badge-info[_ngcontent-%COMP%]{flex:1;min-width:0}.badge-name[_ngcontent-%COMP%]{font-weight:600;color:#2e2e2e;font-size:.875rem}.badge-progress[_ngcontent-%COMP%]{font-size:.75rem;color:#666;margin-top:.25rem}.impact-stats[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(200px,1fr));gap:2rem}.impact-stat[_ngcontent-%COMP%]{text-align:center}.impact-number[_ngcontent-%COMP%]{display:block;font-size:2rem;font-weight:700;color:#f7c843;margin-bottom:.5rem}.impact-label[_ngcontent-%COMP%]{color:#666;font-size:.875rem;line-height:1.4}.tabs-container[_ngcontent-%COMP%]{margin-bottom:2rem}.tabs[_ngcontent-%COMP%]{display:flex;background:#fff;border-radius:12px;padding:.25rem;box-shadow:0 2px 8px #0000000a;border:1px solid #EDEAE3}.tab[_ngcontent-%COMP%]{flex:1;padding:.875rem 1.5rem;background:none;border:none;border-radius:8px;font-size:.875rem;font-weight:500;color:#666;cursor:pointer;transition:all .2s ease}.tab[_ngcontent-%COMP%]:hover{color:#2e2e2e;background:#edeae3}.tab.active[_ngcontent-%COMP%]{color:#2e2e2e;background:#f7c843}.content-container[_ngcontent-%COMP%]{background:#fff;border-radius:16px;padding:2rem;box-shadow:0 2px 8px #0000000a;border:1px solid #EDEAE3}.content-section[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:1.5rem}.empty-state[_ngcontent-%COMP%]{text-align:center;padding:3rem 1rem;color:#666}.empty-state[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:1.25rem;margin:0 0 .5rem;color:#2e2e2e}.empty-state[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0 0 1rem;font-size:1rem}.empty-rewards[_ngcontent-%COMP%]{margin-bottom:1.5rem}.content-card[_ngcontent-%COMP%]{padding:1.5rem;border:1px solid #EDEAE3;border-radius:12px;background:#fdfcf9;transition:all .2s ease}.content-card[_ngcontent-%COMP%]:hover{border-color:#f7c843;box-shadow:0 2px 8px #f7c8431a}.card-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:flex-start;margin-bottom:.75rem}.card-title[_ngcontent-%COMP%]{font-size:1.125rem;font-weight:600;color:#2e2e2e;margin:0;line-height:1.4;flex:1}.card-meta[_ngcontent-%COMP%]{font-size:.875rem;color:#666;white-space:nowrap;margin-left:1rem}.card-excerpt[_ngcontent-%COMP%]{color:#666;line-height:1.6;margin:0 0 1rem}.bookmark-notes[_ngcontent-%COMP%]{color:#666;line-height:1.6;margin:.5rem 0;font-style:italic;background:#edeae3;padding:.75rem;border-radius:6px}.card-footer[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;font-size:.875rem;flex-wrap:wrap;gap:1rem}.card-date[_ngcontent-%COMP%]{color:#666}.card-stats[_ngcontent-%COMP%]{display:flex;gap:1rem;flex-wrap:wrap}.stat-item[_ngcontent-%COMP%]{color:#666;display:flex;align-items:center;gap:.25rem}.card-actions[_ngcontent-%COMP%]{display:flex;gap:.5rem;flex-wrap:wrap}.action-btn[_ngcontent-%COMP%]{padding:.375rem .875rem;border-radius:6px;font-size:.875rem;font-weight:500;cursor:pointer;transition:all .2s ease;border:1px solid #F7C843;background:#f7c843;color:#2e2e2e}.action-btn[_ngcontent-%COMP%]:hover{background:#edeae3;border-color:#edeae3}.action-btn.secondary[_ngcontent-%COMP%]{background:transparent;color:#f7c843}.action-btn.secondary[_ngcontent-%COMP%]:hover{background:#f7c843;color:#2e2e2e}.action-btn.danger[_ngcontent-%COMP%]{background:transparent;color:#dc3545;border-color:#dc3545}.action-btn.danger[_ngcontent-%COMP%]:hover{background:#dc3545;color:#fff}.bookmark-tags[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:.5rem;margin-bottom:1rem}.tag[_ngcontent-%COMP%]{padding:.25rem .5rem;background:#edeae3;color:#666;border-radius:4px;font-size:.75rem;font-weight:500}@media (max-width: 768px){.profile-container[_ngcontent-%COMP%]{padding:1rem}.profile-header[_ngcontent-%COMP%]{flex-direction:column;align-items:center;text-align:center;gap:1.5rem}.user-stats[_ngcontent-%COMP%]{justify-content:center;flex-wrap:wrap}.tabs[_ngcontent-%COMP%]{flex-direction:column}.card-header[_ngcontent-%COMP%]{flex-direction:column;gap:.5rem}.card-meta[_ngcontent-%COMP%]{margin-left:0}.card-footer[_ngcontent-%COMP%]{flex-direction:column;align-items:flex-start}.card-actions[_ngcontent-%COMP%]{width:100%;justify-content:flex-start}.badges-grid[_ngcontent-%COMP%]{grid-template-columns:1fr}.impact-stats[_ngcontent-%COMP%]{grid-template-columns:1fr;gap:1.5rem}.user-stats[_ngcontent-%COMP%]{gap:1rem}}.xp-section[_ngcontent-%COMP%]{margin:1rem 0}.xp-section[_ngcontent-%COMP%]   .xp-info[_ngcontent-%COMP%]{display:flex;justify-content:space-between;margin-bottom:.5rem;font-size:.9rem}.xp-section[_ngcontent-%COMP%]   .xp-bar[_ngcontent-%COMP%]{height:8px;background:#f0f0f0;border-radius:4px;overflow:hidden}.xp-section[_ngcontent-%COMP%]   .xp-bar[_ngcontent-%COMP%]   .xp-progress[_ngcontent-%COMP%]{height:100%;background:linear-gradient(90deg,#4caf50,#8bc34a);transition:width .3s ease}.xp-section[_ngcontent-%COMP%]   .level-info[_ngcontent-%COMP%]{color:#666;font-size:.8rem}.badge-item[_ngcontent-%COMP%]{opacity:.6;transition:all .3s ease}.badge-item.unlocked[_ngcontent-%COMP%]{opacity:1;transform:scale(1.02)}.badge-item.in-progress[_ngcontent-%COMP%]{opacity:.8}.badge-item[_ngcontent-%COMP%]   .progress-bar[_ngcontent-%COMP%]{height:4px;background:#f0f0f0;border-radius:2px;margin:.25rem 0}.badge-item[_ngcontent-%COMP%]   .progress-bar[_ngcontent-%COMP%]   .progress-fill[_ngcontent-%COMP%]{height:100%;background:#2196f3;border-radius:2px;transition:width .3s ease}.badge-item[_ngcontent-%COMP%]   .progress-text[_ngcontent-%COMP%]{font-size:.75rem;color:#666}.reward-item[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5rem;margin:.25rem 0}.reward-item[_ngcontent-%COMP%]   .reward-icon[_ngcontent-%COMP%]{font-size:.9rem}.reward-item[_ngcontent-%COMP%]   .reward-text[_ngcontent-%COMP%]{font-size:.85rem;color:#28a745}.btn-reward[_ngcontent-%COMP%]{font-size:.75rem;color:#28a745;margin-left:.25rem}.social-link[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5rem;padding:.5rem 1rem;border-radius:8px;text-decoration:none;transition:all .2s ease;font-size:.875rem;font-weight:500;border:1px solid transparent;position:relative}.social-icon[_ngcontent-%COMP%]{width:18px;height:18px;display:flex;align-items:center;justify-content:center;min-width:18px}.add-social-btn[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5rem;padding:.5rem 1rem;border:2px dashed #CCCCCC;background:transparent;color:#666;border-radius:8px;cursor:pointer;transition:all .2s ease;font-size:.875rem}.add-social-btn[_ngcontent-%COMP%]:hover{border-color:#f7c843;color:#2e2e2e;background:#f7c843}.add-icon[_ngcontent-%COMP%]{width:18px;height:18px}.social-input[_ngcontent-%COMP%]{width:100%;padding:.75rem 2.5rem .75rem .75rem;border:2px solid #EDEAE3;border-radius:8px;font-size:.875rem;background:#fff;transition:all .2s ease;outline:none}.edit-actions[_ngcontent-%COMP%]{display:flex;gap:.5rem;justify-content:flex-start;flex-wrap:wrap}.social-section[_ngcontent-%COMP%]{margin-bottom:1.5rem}.social-title[_ngcontent-%COMP%]{font-size:1rem;font-weight:600;color:#2e2e2e;margin:0 0 1rem;cursor:pointer;display:inline-flex;align-items:center;gap:.5rem;transition:color .2s ease}.social-title[_ngcontent-%COMP%]:hover{color:#f7c843}.social-title[_ngcontent-%COMP%]:hover   .edit-icon[_ngcontent-%COMP%]{opacity:1}.social-links-display[_ngcontent-%COMP%]{margin-bottom:1rem}.social-placeholder[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5rem;padding:1rem;background:#edeae3;border:2px dashed #CCCCCC;border-radius:8px;cursor:pointer;transition:all .2s ease;color:#666}.social-placeholder[_ngcontent-%COMP%]:hover{background:#f7c843;border-color:#f7c843;color:#2e2e2e}.placeholder-text[_ngcontent-%COMP%]{flex:1;font-size:.875rem}.social-links-grid[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:.75rem}.social-link[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5rem;padding:.5rem 1rem;border-radius:8px;text-decoration:none;transition:all .2s ease;font-size:.875rem;font-weight:500;border:1px solid transparent}.social-link[_ngcontent-%COMP%]:hover{transform:translateY(-2px);box-shadow:0 4px 8px #0000001a}.social-link.facebook[_ngcontent-%COMP%]{background:#1877f2;color:#fff}.social-link.facebook[_ngcontent-%COMP%]:hover{background:#166fe5}.social-link.instagram[_ngcontent-%COMP%]{background:linear-gradient(45deg,#f58529,#dd2a7b,#8134af,#515bd4);color:#fff}.social-link.instagram[_ngcontent-%COMP%]:hover{opacity:.9}.social-link.linkedin[_ngcontent-%COMP%]{background:#0a66c2;color:#fff}.social-link.linkedin[_ngcontent-%COMP%]:hover{background:#004182}.social-icon[_ngcontent-%COMP%]{font-size:1rem;display:flex;align-items:center;justify-content:center;min-width:20px}.social-label[_ngcontent-%COMP%]{white-space:nowrap}.social-edit-form[_ngcontent-%COMP%]{background:#fdfcf9;border:1px solid #EDEAE3;border-radius:12px;padding:1.5rem}.social-input-group[_ngcontent-%COMP%]{margin-bottom:1rem}.social-input-group[_ngcontent-%COMP%]:last-of-type{margin-bottom:1.5rem}.social-input-label[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5rem;margin-bottom:.5rem;font-size:.875rem;font-weight:500;color:#2e2e2e}.social-input[_ngcontent-%COMP%]{width:100%;padding:.75rem;border:2px solid #EDEAE3;border-radius:8px;font-size:.875rem;background:#fff;transition:all .2s ease;outline:none}.social-input[_ngcontent-%COMP%]:focus{border-color:#f7c843;box-shadow:0 0 0 3px #f7c8431a}.social-input[_ngcontent-%COMP%]::placeholder{color:#999;font-size:.8rem}.social-input.invalid[_ngcontent-%COMP%]{border-color:#dc3545}.social-input.valid[_ngcontent-%COMP%]{border-color:#28a745}.validation-message[_ngcontent-%COMP%]{font-size:.75rem;margin-top:.25rem;display:flex;align-items:center;gap:.25rem}.validation-message.error[_ngcontent-%COMP%]{color:#dc3545}.validation-message.success[_ngcontent-%COMP%]{color:#28a745}@media (max-width: 768px){.social-links-grid[_ngcontent-%COMP%]{flex-direction:column}.social-link[_ngcontent-%COMP%]{justify-content:center;width:100%}.social-edit-form[_ngcontent-%COMP%]{padding:1rem}}.social-skeleton[_ngcontent-%COMP%]{display:flex;gap:.75rem;margin:1rem 0}.social-skeleton-item[_ngcontent-%COMP%]{height:36px;width:120px;background:linear-gradient(90deg,#edeae3 25%,#fdfcf9,#edeae3 75%);background-size:200% 100%;animation:_ngcontent-%COMP%_shimmer 1.5s infinite;border-radius:8px}.social-empty-state[_ngcontent-%COMP%]{text-align:center;padding:2rem;color:#666;background:#fdfcf9;border:1px solid #EDEAE3;border-radius:12px}.social-empty-state[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{font-size:1.125rem;margin:0 0 .5rem;color:#2e2e2e}.social-empty-state[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0 0 1rem;font-size:.875rem}.input-with-validation[_ngcontent-%COMP%]{position:relative}.validation-icon[_ngcontent-%COMP%]{position:absolute;right:.75rem;top:50%;transform:translateY(-50%);font-size:.875rem}.validation-icon.valid[_ngcontent-%COMP%]{color:#28a745}.validation-icon.invalid[_ngcontent-%COMP%]{color:#dc3545}@keyframes _ngcontent-%COMP%_fadeInUp{0%{opacity:0;transform:translateY(10px)}to{opacity:1;transform:translateY(0)}}.social-link.new[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_fadeInUp .3s ease-out}.edit-icon[_ngcontent-%COMP%]{opacity:.6;transition:opacity .2s ease;cursor:pointer;font-size:.875rem}.social-link-wrapper[_ngcontent-%COMP%]{position:relative;display:inline-flex;align-items:center}.social-link-wrapper[_ngcontent-%COMP%]:hover   .edit-social-btn[_ngcontent-%COMP%]{opacity:1}.edit-social-btn[_ngcontent-%COMP%]{position:absolute;top:-8px;right:-8px;width:24px;height:24px;border:none;background:#f7c843;color:#2e2e2e;border-radius:50%;cursor:pointer;font-size:.75rem;display:flex;align-items:center;justify-content:center;opacity:0;transition:all .2s ease;box-shadow:0 2px 4px #0000001a;z-index:2}.edit-social-btn[_ngcontent-%COMP%]:hover{background:#edeae3;transform:scale(1.1)}.form-header[_ngcontent-%COMP%]{margin-bottom:1.5rem;text-align:center}.form-title[_ngcontent-%COMP%]{font-size:1.125rem;font-weight:600;color:#2e2e2e;margin:0 0 .5rem}.form-subtitle[_ngcontent-%COMP%]{font-size:.875rem;color:#666;margin:0}.input-with-actions[_ngcontent-%COMP%]{position:relative;display:flex;align-items:center}.clear-input-btn[_ngcontent-%COMP%]{position:absolute;right:.5rem;width:20px;height:20px;border:none;background:#ccc;color:#fff;border-radius:50%;cursor:pointer;font-size:.75rem;display:flex;align-items:center;justify-content:center;transition:all .2s ease}.clear-input-btn[_ngcontent-%COMP%]:hover{background:#999}.input-help[_ngcontent-%COMP%]{font-size:.75rem;color:#666;margin-top:.25rem;font-style:italic}.save-btn[_ngcontent-%COMP%], .cancel-btn[_ngcontent-%COMP%], .delete-btn[_ngcontent-%COMP%]{padding:.5rem 1rem;border-radius:6px;font-size:.875rem;font-weight:500;cursor:pointer;transition:all .2s ease;border:none;min-width:80px}.save-btn[_ngcontent-%COMP%]{background:#f7c843;color:#2e2e2e}.save-btn[_ngcontent-%COMP%]:hover{background:#edeae3}.save-btn[_ngcontent-%COMP%]:disabled{opacity:.6;cursor:not-allowed}.cancel-btn[_ngcontent-%COMP%]{background:#edeae3;color:#2e2e2e}.cancel-btn[_ngcontent-%COMP%]:hover{background:#ccc}.delete-btn[_ngcontent-%COMP%]{background:#dc3545;color:#fff}.delete-btn[_ngcontent-%COMP%]:hover{background:#c82333}.social-icon[_ngcontent-%COMP%]{width:18px;height:18px;display:flex;align-items:center;justify-content:center;min-width:18px;fill:currentColor}.social-input-label[_ngcontent-%COMP%]   .social-icon[_ngcontent-%COMP%]{width:16px;height:16px;opacity:.8}.add-icon[_ngcontent-%COMP%]{width:18px;height:18px;fill:currentColor}@media (max-width: 768px){.social-links-grid[_ngcontent-%COMP%]{flex-direction:column}.social-link[_ngcontent-%COMP%]{justify-content:center;width:100%}.social-edit-form[_ngcontent-%COMP%]{padding:1rem}.edit-actions[_ngcontent-%COMP%]{flex-direction:column;align-items:stretch}.save-btn[_ngcontent-%COMP%], .cancel-btn[_ngcontent-%COMP%], .delete-btn[_ngcontent-%COMP%]{width:100%;margin-bottom:.5rem}}.social-input[_ngcontent-%COMP%]:focus, .save-btn[_ngcontent-%COMP%]:focus, .cancel-btn[_ngcontent-%COMP%]:focus, .delete-btn[_ngcontent-%COMP%]:focus{outline:2px solid #F7C843;outline-offset:2px}.social-section.loading[_ngcontent-%COMP%]{opacity:.6;pointer-events:none}.social-link.updated[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_pulse .6s ease-out}@keyframes _ngcontent-%COMP%_pulse{0%{transform:scale(1)}50%{transform:scale(1.05)}to{transform:scale(1)}}@keyframes _ngcontent-%COMP%_shimmer{0%{background-position:-200% 0}to{background-position:200% 0}}']})};var Rm=class n{static \u0275fac=function(t){return new(t||n)};static \u0275cmp=Xe({type:n,selectors:[["app-about"]],decls:23,vars:0,consts:[[1,"about"],[1,"container"],[1,"about-title"],[1,"about-text"],[1,"highlight"],[1,"quote"],[1,"signature"]],template:function(t,r){t&1&&(tt(0,"section",0)(1,"div",1)(2,"h1",2),y(3,"\u{1F319} About Unposted"),gt(),tt(4,"p",3)(5,"span",4),y(6,"Unposted"),gt(),y(7," is your personal corner of the internet \u2014 a safe place for the words you've been keeping in drafts, notes, or your heart. Nothing here needs to be perfect or polished \u2014 it's about "),tt(8,"em"),y(9,"writing what you feel"),gt(),y(10,", "),tt(11,"em"),y(12,"sharing what matters"),gt(),y(13,", and giving your unposted words a home. "),gt(),tt(14,"blockquote",5),y(15,' "Some stories don\u2019t need to be finished to be worth sharing." '),gt(),tt(16,"p",3),y(17," Whether it\u2019s a thought, a poem, a half-written story, or a single sentence that carries meaning for you \u2014 it belongs here. Unposted is about "),tt(18,"span",4),y(19,"expression without pressure"),gt(),y(20,". "),gt(),tt(21,"div",6),y(22,"\u2014 The Unposted Team"),gt()()())},styles:["[_nghost-%COMP%]{display:block;background:#fdfcf9;color:#2e2e2e;line-height:1.75;font-family:Inter,Segoe UI,Tahoma,Geneva,Verdana,sans-serif}.container[_ngcontent-%COMP%]{padding:3rem 1.5rem;max-width:850px;margin:auto}.about-title[_ngcontent-%COMP%]{text-align:center;font-size:2.5rem;margin-bottom:2rem;font-weight:700;color:var(--text-primary)}.about-text[_ngcontent-%COMP%]{font-size:1.1rem;color:#444;margin-bottom:1.8rem}.highlight[_ngcontent-%COMP%]{color:var(--accent-color, #F7C843);font-weight:600}.quote[_ngcontent-%COMP%]{font-style:italic;color:#555;border-left:4px solid var(--accent-color, #F7C843);background:#f7c8430f;padding:1.2rem 1.5rem;border-radius:8px;margin:2.5rem 0;font-size:1.1rem}.signature[_ngcontent-%COMP%]{margin-top:2.5rem;text-align:right;font-style:italic;color:#666;font-size:.95rem}@media (max-width: 768px){.about-title[_ngcontent-%COMP%]{font-size:2rem}.about-text[_ngcontent-%COMP%], .quote[_ngcontent-%COMP%]{font-size:1rem}}"]})};var Nm=class n{authService=k(it);router=k(Ve);errorMessage="";isLoading=!1;onGoogleLogin(){return b(this,null,function*(){this.isLoading=!0,this.errorMessage="";try{yield this.authService.googleLogin(),this.router.navigate(["/stories"])}catch(e){console.error("Google login error:",e),this.errorMessage="Google login failed. Please try again."}finally{this.isLoading=!1}})}getErrorMessage(e){switch(e){case"auth/user-not-found":return"No account found with this email address.";case"auth/wrong-password":return"Incorrect password.";case"auth/invalid-email":return"Invalid email address.";case"auth/user-disabled":return"This account has been disabled.";case"auth/too-many-requests":return"Too many failed attempts. Please try again later.";default:return"Login failed. Please try again."}}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=Xe({type:n,selectors:[["app-login"]],decls:11,vars:1,consts:[[1,"login-container"],[1,"login-title"],["type","button",1,"google-button",3,"click","disabled"],["src","https://www.svgrepo.com/show/355037/google.svg","alt","Google Logo",1,"google-icon"],[1,"signup-text"],["href","/register"]],template:function(t,r){t&1&&(tt(0,"div",0)(1,"h2",1),y(2,"\u{1F511} Login"),gt(),tt(3,"button",2),rc("click",function(){return r.onGoogleLogin()}),tc(4,"img",3),tt(5,"span"),y(6,"Sign in with Google"),gt()(),tt(7,"p",4),y(8," Don\u2019t have an account? "),tt(9,"a",5),y(10,"Sign up"),gt()()()),t&2&&(v(3),nc("disabled",r.isLoading))},styles:["[_nghost-%COMP%]{display:flex;justify-content:center;align-items:center;min-height:70vh;background:#fdfcf9;font-family:Segoe UI,Tahoma,Geneva,Verdana,sans-serif}.login-container[_ngcontent-%COMP%]{background:#fff;padding:2rem;border-radius:12px;box-shadow:0 4px 15px #0000001a;width:100%;max-width:400px}.login-title[_ngcontent-%COMP%]{text-align:center;margin-bottom:1.5rem;font-size:1.8rem;font-weight:700;color:#2e2e2e}.form-group[_ngcontent-%COMP%]{margin-bottom:1.2rem}label[_ngcontent-%COMP%]{display:block;font-weight:600;margin-bottom:.5rem;color:#444}input[_ngcontent-%COMP%]{width:100%;padding:.8rem;border:1px solid #ddd;border-radius:8px;font-size:1rem;outline:none;transition:border .3s;box-sizing:border-box}input[_ngcontent-%COMP%]:focus{border-color:#f7c843;box-shadow:0 0 0 2px #f7c84333}.error-message[_ngcontent-%COMP%]{background:#fee;color:#c33;padding:.8rem;border-radius:8px;margin-bottom:1rem;font-size:.9rem;border:1px solid #fcc}.login-button[_ngcontent-%COMP%], .google-button[_ngcontent-%COMP%]{width:100%;padding:.9rem;font-size:1rem;font-weight:700;border:none;border-radius:8px;cursor:pointer;transition:background .3s;margin-bottom:1rem}.login-button[_ngcontent-%COMP%]{background:#f7c843;color:#2e2e2e}.login-button[_ngcontent-%COMP%]:disabled{background:#ddd;cursor:not-allowed}.login-button[_ngcontent-%COMP%]:hover:not(:disabled){background:#e5b935}.google-button[_ngcontent-%COMP%]{width:100%;padding:.9rem;font-size:1rem;font-weight:500;border:1px solid #dadce0;border-radius:8px;cursor:pointer;background:#fff;display:flex;align-items:center;justify-content:center;gap:.75rem;color:#3c4043;transition:all .2s ease}.google-button[_ngcontent-%COMP%]:hover:not(:disabled){background:#f7f8f8;box-shadow:0 1px 2px #3c404333}.google-button[_ngcontent-%COMP%]:disabled{opacity:.6;cursor:not-allowed}.google-icon[_ngcontent-%COMP%]{width:20px;height:20px}.signup-text[_ngcontent-%COMP%]{text-align:center;margin-top:1rem;font-size:.9rem;color:#555}.signup-text[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#f7c843;text-decoration:none;font-weight:700}"]})};var Fm=class n{authService=k(it);router=k(Ve);profileService=k(cr);errorMessage="";successMessage="";isLoading=!1;onGoogleRegister(){return b(this,null,function*(){this.isLoading=!0,this.errorMessage="";try{let e=yield this.authService.googleLogin();this.router.navigate(["/stories"])}catch(e){console.error("Google registration error:",e),this.errorMessage="Google registration failed. Please try again."}finally{this.isLoading=!1}})}getErrorMessage(e){switch(e){case"auth/email-already-in-use":return"An account with this email already exists.";case"auth/invalid-email":return"Invalid email address.";case"auth/operation-not-allowed":return"Email/password accounts are not enabled.";case"auth/weak-password":return"Password is too weak. Please choose a stronger password.";case"auth/account-exists-with-different-credential":return"An account already exists with this email using a different sign-in method.";default:return"Registration failed. Please try again."}}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=Xe({type:n,selectors:[["app-register"]],decls:11,vars:1,consts:[[1,"register-container"],[1,"register-title"],["type","button",1,"google-button",3,"click","disabled"],["src","https://www.svgrepo.com/show/355037/google.svg","alt","Google Logo",1,"google-icon"],[1,"login-text"],["href","/login"]],template:function(t,r){t&1&&(tt(0,"div",0)(1,"h2",1),y(2,"\u{1F4DD} Register"),gt(),tt(3,"button",2),rc("click",function(){return r.onGoogleRegister()}),tc(4,"img",3),tt(5,"span"),y(6,"Register with Google"),gt()(),tt(7,"p",4),y(8," Already have an account? "),tt(9,"a",5),y(10,"Login"),gt()()()),t&2&&(v(3),nc("disabled",r.isLoading))},styles:["[_nghost-%COMP%]{display:flex;justify-content:center;align-items:center;min-height:70vh;background:#fdfcf9;font-family:Segoe UI,Tahoma,Geneva,Verdana,sans-serif}.register-container[_ngcontent-%COMP%]{background:#fff;padding:2rem;border-radius:12px;box-shadow:0 4px 15px #0000001a;width:100%;max-width:400px}.register-title[_ngcontent-%COMP%]{text-align:center;margin-bottom:1.5rem;font-size:1.8rem;font-weight:700;color:#2e2e2e}.form-group[_ngcontent-%COMP%]{margin-bottom:1.2rem}label[_ngcontent-%COMP%]{display:block;font-weight:600;margin-bottom:.5rem;color:#444}input[_ngcontent-%COMP%]{width:100%;padding:.8rem;border:1px solid #ddd;border-radius:8px;font-size:1rem;outline:none;transition:border .3s;box-sizing:border-box}input[_ngcontent-%COMP%]:focus{border-color:#f7c843;box-shadow:0 0 0 2px #f7c84333}.password-hint[_ngcontent-%COMP%]{color:#666;font-size:.8rem;margin-top:.3rem;display:block}.error-message[_ngcontent-%COMP%]{background:#fee;color:#c33;padding:.8rem;border-radius:8px;margin-bottom:1rem;font-size:.9rem;border:1px solid #fcc}.success-message[_ngcontent-%COMP%]{background:#efe;color:#363;padding:.8rem;border-radius:8px;margin-bottom:1rem;font-size:.9rem;border:1px solid #cfc}.register-button[_ngcontent-%COMP%], .google-button[_ngcontent-%COMP%]{width:100%;padding:.9rem;font-size:1rem;font-weight:700;border:none;border-radius:8px;cursor:pointer;transition:background .3s;margin-bottom:1rem}.register-button[_ngcontent-%COMP%]{background:#f7c843;color:#2e2e2e}.register-button[_ngcontent-%COMP%]:disabled{background:#ddd;cursor:not-allowed}.register-button[_ngcontent-%COMP%]:hover:not(:disabled){background:#e5b935}.google-button[_ngcontent-%COMP%]{width:100%;padding:.9rem;font-size:1rem;font-weight:500;border:1px solid #dadce0;border-radius:8px;cursor:pointer;background:#fff;display:flex;align-items:center;justify-content:center;gap:.75rem;color:#3c4043;transition:all .2s ease}.google-button[_ngcontent-%COMP%]:hover:not(:disabled){background:#f7f8f8;box-shadow:0 1px 2px #3c404333}.google-button[_ngcontent-%COMP%]:disabled{opacity:.6;cursor:not-allowed}.google-icon[_ngcontent-%COMP%]{width:20px;height:20px}.login-text[_ngcontent-%COMP%]{text-align:center;margin-top:1rem;font-size:.9rem;color:#555}.login-text[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#f7c843;text-decoration:none;font-weight:700}"]})};var uW=["articleContent"],dW=()=>["/stories"],Ld=n=>["/profile/",n],fW=n=>({rtl:n});function hW(n,e){n&1&&(h(0,"div",6),q(1,"div",7),h(2,"p"),y(3,"Loading story..."),p()())}function pW(n,e){n&1&&(ce(),h(0,"svg",21),q(1,"path",59)(2,"circle",60),p())}function gW(n,e){if(n&1&&q(0,"img",61),n&2){let t=S(3);C("routerLink",On(3,Ld,t.story.authorId))("src",t.story.authorPhotoURL,st)("alt",t.story.authorName)}}function mW(n,e){n&1&&(h(0,"p"),y(1,"Sign in to show your appreciation!"),p())}function vW(n,e){n&1&&(h(0,"p"),y(1,"Help others discover great content!"),p())}function _W(n,e){n&1&&q(0,"span",62)}function yW(n,e){n&1&&(ce(),h(0,"svg",63),q(1,"path",64)(2,"path",65),p())}function bW(n,e){n&1&&(ce(),h(0,"svg",63),q(1,"path",66),p())}function wW(n,e){if(n&1){let t=te();h(0,"div",67)(1,"button",68),$("click",function(){V(t);let i=S(3);return U(i.setSortOrder("newest"))}),y(2," Newest first "),p(),h(3,"button",68),$("click",function(){V(t);let i=S(3);return U(i.setSortOrder("oldest"))}),y(4," Oldest first "),p()()}if(n&2){let t=S(3);v(),he("active",t.sortOrder==="newest"),v(2),he("active",t.sortOrder==="oldest")}}function EW(n,e){n&1&&(h(0,"div",69),q(1,"div",70),h(2,"span"),y(3,"Loading comments..."),p()())}function CW(n,e){n&1&&(h(0,"div",71)(1,"div",72),y(2,"\u{1F4AD}"),p(),h(3,"h3"),y(4,"Start the conversation"),p(),h(5,"p"),y(6,"Be the first to share your thoughts on this story!"),p()())}function IW(n,e){if(n&1&&q(0,"img",61),n&2){let t=S().$implicit,r=S(3);C("routerLink",On(3,Ld,r.story.authorId))("src",t.userPhotoURL,st)("alt",r.story.authorName)}}function SW(n,e){if(n&1&&(h(0,"div",84),y(1),p()),n&2){let t=S().$implicit,r=S(3);En("background",r.getAvatarColor(t.username)),C("routerLink",On(4,Ld,r.story.authorId)),v(),ie(" ",r.getInitials(t.username)," ")}}function TW(n,e){n&1&&(h(0,"span",85),y(1,"Author"),p())}function DW(n,e){if(n&1){let t=te();h(0,"button",86),$("click",function(){V(t);let i=S().$implicit,o=S(3);return U(o.deleteComment(i.id))}),ce(),h(1,"svg",21),q(2,"polyline",87)(3,"path",88),p()()}}function xW(n,e){if(n&1&&(h(0,"div",73)(1,"div",74)(2,"div",75),B(3,IW,1,5,"img",19)(4,SW,2,6,"div",76),h(5,"div",77)(6,"span",78),y(7),p(),h(8,"div",79),y(9),p()(),B(10,TW,2,0,"span",80),p(),h(11,"div",81),B(12,DW,4,0,"button",82),p()(),h(13,"div",83),y(14),p()()),n&2){let t=e.$implicit,r=e.index,i=S(3);En("animation-delay",r*100,"ms"),v(3),C("ngIf",t.userPhotoURL),v(),C("ngIf",!t.userPhotoURL),v(2),C("routerLink",On(10,Ld,i.story.authorId)),v(),K(t.username||"Anonymous"),v(2),K(i.formatDate(t.createdAt)),v(),C("ngIf",t.userId===i.story.authorId),v(2),C("ngIf",i.canDeleteComment(t)),v(2),K(t.content)}}function MW(n,e){n&1&&(h(0,"div",89)(1,"div",90),y(2,"\u{1F510}"),p(),h(3,"h3"),y(4,"Join the Discussion"),p(),h(5,"p"),y(6,"Please "),h(7,"a",91),y(8,"sign in"),p(),y(9," to share your thoughts and engage with the community."),p()())}function PW(n,e){if(n&1&&q(0,"img",102),n&2){let t=S(4);C("src",t.currentUser.photoURL,st)("alt",t.story.authorName)}}function AW(n,e){if(n&1&&(h(0,"div",103),y(1),p()),n&2){let t=S(4);En("background",t.getAvatarColor(t.currentUser.displayName)),v(),ie(" ",t.getInitials(t.currentUser.displayName||t.currentUser.email)," ")}}function kW(n,e){if(n&1){let t=te();h(0,"button",104),$("click",function(){V(t);let i=S(4);return U(i.clearComment())}),y(1," Cancel "),p()}}function OW(n,e){n&1&&q(0,"span",62)}function RW(n,e){n&1&&(ce(),h(0,"svg",63),q(1,"line",105)(2,"polygon",106),p())}function NW(n,e){if(n&1){let t=te();h(0,"div",92)(1,"div",93),B(2,PW,1,2,"img",94)(3,AW,2,3,"div",95),h(4,"h3"),y(5,"Share your thoughts"),p()(),h(6,"div",96)(7,"textarea",97),It("ngModelChange",function(i){V(t);let o=S(3);return Pt(o.commentText,i)||(o.commentText=i),U(i)}),$("input",function(i){V(t);let o=S(3);return U(o.adjustTextareaHeight(i))}),y(8,"            "),p(),h(9,"div",98),y(10),p()(),h(11,"div",99),B(12,kW,2,0,"button",100),h(13,"button",101),$("click",function(){V(t);let i=S(3);return U(i.addComment())}),B(14,OW,1,0,"span",39)(15,RW,3,0,"svg",44),y(16),p()()()}if(n&2){let t=S(3);v(2),C("ngIf",t.currentUser.photoURL),v(),C("ngIf",!t.currentUser.photoURL),v(4),Ct("ngModel",t.commentText),v(2),he("warning",t.commentText&&t.commentText.length>450)("danger",t.commentText&&t.commentText.length>=500),v(),ie(" ",(t.commentText==null?null:t.commentText.length)||0," / 500 "),v(2),C("ngIf",t.commentText==null?null:t.commentText.trim()),v(),C("disabled",!(t.commentText!=null&&t.commentText.trim())||t.commentSubmitting||((t.commentText==null?null:t.commentText.length)||0)>500),v(),C("ngIf",t.commentSubmitting),v(),C("ngIf",!t.commentSubmitting),v(),ie(" ",t.commentSubmitting?"Posting...":"Post Comment"," ")}}function FW(n,e){if(n&1&&(h(0,"div",107),ce(),h(1,"svg",10),q(2,"path",108)(3,"polyline",109),p(),y(4),p()),n&2){let t=S(3);v(4),ie(" ",t.successMessage," ")}}function LW(n,e){if(n&1&&(h(0,"div",110),ce(),h(1,"svg",10),q(2,"circle",22)(3,"line",111)(4,"line",112),p(),y(5),p()),n&2){let t=S(3);v(5),ie(" ",t.errorMessage," ")}}function VW(n,e){if(n&1){let t=te();h(0,"div",8)(1,"button",9),ce(),h(2,"svg",10),q(3,"path",11),p(),y(4," Back to Stories "),p(),Pe(),h(5,"div",12)(6,"div",13),y(7),p(),h(8,"div",14),y(9),p(),h(10,"h1",15),y(11),p(),h(12,"div",16)(13,"div",17),B(14,pW,3,0,"svg",18)(15,gW,1,5,"img",19),h(16,"span",20),y(17),p()(),h(18,"div",17),ce(),h(19,"svg",21),q(20,"circle",22)(21,"polyline",23),p(),Pe(),h(22,"span"),y(23),p()(),h(24,"div",17),ce(),h(25,"svg",21),q(26,"path",24)(27,"circle",25),p(),Pe(),h(28,"span"),y(29),p()(),h(30,"div",17),ce(),h(31,"svg",21),q(32,"path",26),p(),Pe(),h(33,"span"),y(34),p()()()(),q(35,"div",27),h(36,"div",28,0),$("scroll",function(){V(t);let i=S(2);return U(i.updateReadingProgress())}),q(38,"div",29),p(),h(39,"div",30)(40,"div",31)(41,"div",32)(42,"h3"),y(43,"\u{1F4A1} Found this thought-provoking?"),p(),B(44,mW,2,0,"p",33)(45,vW,2,0,"p",33),p(),h(46,"div",34)(47,"div",35)(48,"div",36),y(49),p(),h(50,"div",37),y(51),p()(),h(52,"button",38),$("click",function(){V(t);let i=S(2);return U(i.toggleUpvote())}),B(53,_W,1,0,"span",39),ce(),h(54,"svg",10),q(55,"path",40),p(),y(56),p()()(),Pe(),h(57,"div",41)(58,"h4"),y(59,"Share this story"),p(),h(60,"div",42)(61,"button",43),$("click",function(){V(t);let i=S(2);return U(i.copyLink())}),B(62,yW,3,0,"svg",44)(63,bW,2,0,"svg",44),y(64),p()()()(),h(65,"div",45)(66,"div",46)(67,"h2",47),ce(),h(68,"svg",48),q(69,"path",26),p(),y(70," Discussion "),p(),Pe(),h(71,"span",49),y(72),p()(),B(73,wW,5,4,"div",50)(74,EW,4,0,"div",51)(75,CW,7,0,"div",52)(76,xW,15,12,"div",53),p(),h(77,"div",54),B(78,MW,10,0,"div",55)(79,NW,17,13,"div",56),p(),B(80,FW,5,1,"div",57)(81,LW,6,1,"div",58),p()}if(n&2){let t=S(2);v(),C("routerLink",Kr(46,dW)),v(5),he("pulse",!t.isLoading),v(),K(t.story.emoji||"\u{1F4D6}"),v(),pn("data-category",t.story.category),v(),K(t.story.category||"Story"),v(2),K(t.story.title),v(3),C("ngIf",!t.story.authorPhotoURL),v(),C("ngIf",t.story.authorPhotoURL),v(),C("routerLink",On(47,Ld,t.story.authorId)),v(),K(t.story.authorName||"Anonymous"),v(6),K(t.story.createdAt?t.formatDate(t.story.createdAt):"Recently"),v(6),Cn("",t.formatViewCount(t.story.stats.readCount)," ",t.story.stats.readCount===1?"view":"views"),v(5),Cn("",t.comments.length," ",t.comments.length===1?"comment":"comments"),v(),En("width",t.readingProgress,"%"),v(),C("ngClass",On(49,fW,t.isArabic(t.story.content))),v(2),C("innerHTML",t.formatContent(t.story.content),q_),v(6),C("ngIf",!t.currentUser),v(),C("ngIf",t.currentUser),v(4),K(t.story.stats.voteCount),v(2),K(t.story.stats.voteCount===1?"upvote":"upvotes"),v(),he("voted",t.hasUpvoted)("disabled",!t.currentUser),C("disabled",!t.currentUser||t.votingInProgress),v(),C("ngIf",t.votingInProgress),v(3),ie(" ",t.hasUpvoted?"Upvoted":"Upvote"," "),v(5),he("copied",t.linkCopied),v(),C("ngIf",!t.linkCopied),v(),C("ngIf",t.linkCopied),v(),ie(" ",t.linkCopied?"Copied!":"Copy Link"," "),v(8),K(t.comments.length),v(),C("ngIf",t.comments.length>0),v(),C("ngIf",t.commentsLoading),v(),C("ngIf",!t.commentsLoading&&t.comments.length===0),v(),C("ngForOf",t.sortedComments)("ngForTrackBy",t.trackComment),v(2),C("ngIf",!t.currentUser),v(),C("ngIf",t.currentUser),v(),C("ngIf",t.successMessage),v(),C("ngIf",t.errorMessage)}}function UW(n,e){if(n&1&&(h(0,"div",3),B(1,hW,4,0,"div",4)(2,VW,82,51,"div",5),p()),n&2){let t=S();v(),C("ngIf",t.isLoading),v(),C("ngIf",!t.isLoading)}}function jW(n,e){if(n&1){let t=te();h(0,"div",113)(1,"div",114),y(2,"\u{1F4DA}"),p(),h(3,"h2"),y(4,"Story Not Found"),p(),h(5,"p"),y(6,"The story you're looking for doesn't exist or may have been removed."),p(),h(7,"button",115),$("click",function(){V(t);let i=S();return U(i.goBack())}),ce(),h(8,"svg",63),q(9,"path",11),p(),y(10," Back to Stories "),p()()}}var Fd=class n{storyService=k(di);commentsService=k(Qc);votesService=k(Wo);viewsService=k(tl);authService=k(it);route=k(Tn);router=k(Ve);notificationService=k(ur);profileService=k(cr);storyId;articleContent;story=null;comments=[];currentUser=null;isLoading=!0;commentsLoading=!0;commentSubmitting=!1;votingInProgress=!1;upvoteCount=0;hasUpvoted=!1;viewCount=0;viewTracked=!1;commentText="";errorMessage="";successMessage="";readingProgress=0;sortOrder="newest";linkCopied=!1;ngOnInit(){this.route.params.subscribe(e=>{let t=e.id;t?(this.storyId=t,this.loadStory(t)):(this.errorMessage="No story ID provided",this.isLoading=!1)}),this.authService.user$.subscribe(e=>{this.currentUser=e,e&&this.loadUserVoteStatus()}),window.addEventListener("scroll",this.updateReadingProgress.bind(this))}ngOnDestroy(){this.currentUser&&(this.currentUser=null),window.removeEventListener("scroll",this.updateReadingProgress.bind(this))}loadStory(e){return b(this,null,function*(){try{this.isLoading=!0,this.errorMessage="";let t=e||this.route.snapshot.params.id;if(!t)throw new Error("No story ID provided");if(this.story=yield this.storyService.getStory(t),!this.story){this.errorMessage="Story not found. It may have been deleted or moved.";return}yield Promise.all([this.loadComments(),this.currentUser?this.loadUserVoteStatus():Promise.resolve()]),setTimeout(()=>this.trackView(),3e3)}catch(t){console.error("Error loading story:",t),this.errorMessage="Failed to load story. Please check your connection and try again."}finally{this.isLoading=!1}})}loadComments(){return b(this,null,function*(){try{this.commentsLoading=!0,this.comments=yield this.commentsService.getComments(this.storyId)}catch(e){console.error("Error loading comments:",e)}finally{this.commentsLoading=!1}})}loadVoteCount(){return b(this,null,function*(){try{this.upvoteCount=yield this.votesService.countVotes(this.storyId)}catch(e){console.error("Error loading vote count:",e)}})}loadViewCount(){return b(this,null,function*(){try{this.viewCount=yield this.viewsService.getViewCount(this.storyId)}catch(e){console.error("Error loading view count:",e)}})}trackView(){return b(this,null,function*(){if(!(this.viewTracked||!this.story))try{yield this.viewsService.trackView(this.storyId),this.viewTracked=!0,yield this.loadViewCount()}catch(e){console.error("Error tracking view:",e)}})}loadUserVoteStatus(){return b(this,null,function*(){if(this.currentUser)try{this.hasUpvoted=yield this.votesService.hasVoted(this.storyId)}catch(e){console.error("Error loading vote status:",e)}})}toggleUpvote(){return b(this,null,function*(){if(!this.currentUser||this.votingInProgress)return;this.votingInProgress=!0;let e=this.hasUpvoted,t=this.upvoteCount;try{this.hasUpvoted=!this.hasUpvoted,this.story.stats.voteCount+=this.hasUpvoted?1:-1,this.hasUpvoted&&(this.notificationService.notifyStoryLiked(this.story.authorId,this.currentUser.displayName,this.story.title,this.storyId),this.profileService.awardUserXP(this.currentUser.uid,1,"liked a story")),yield this.votesService.toggleVote(this.storyId),this.successMessage=this.hasUpvoted?"Thanks for your upvote!":"Upvote removed",setTimeout(()=>this.successMessage="",3e3),yield this.loadVoteCount()}catch(r){console.error("Error toggling vote:",r),this.hasUpvoted=e,this.upvoteCount=t,this.errorMessage="Failed to update vote. Please try again.",setTimeout(()=>this.errorMessage="",5e3)}finally{this.votingInProgress=!1}})}addComment(){return b(this,null,function*(){if(!(!this.currentUser||!this.commentText.trim()||this.commentSubmitting)){this.commentSubmitting=!0,this.errorMessage="";try{let e={userId:this.currentUser.uid,username:this.currentUser.displayName,userPhotoURL:this.currentUser.photoURL,content:this.commentText.trim()};yield this.commentsService.addComment(this.storyId,e),this.notificationService.notifyStoryCommented(this.story.authorId,this.currentUser.displayName,this.story.title,this.storyId),this.profileService.awardUserXP(this.currentUser.uid,2,"commented a story"),this.commentText="",this.successMessage="Comment posted successfully!",setTimeout(()=>this.successMessage="",3e3),yield this.loadComments()}catch(e){console.error("Error adding comment:",e),this.errorMessage="Failed to post comment. Please try again.",setTimeout(()=>this.errorMessage="",5e3)}finally{this.commentSubmitting=!1}}})}deleteComment(e){return b(this,null,function*(){if(this.currentUser&&confirm("Are you sure you want to delete this comment? This action cannot be undone."))try{yield this.commentsService.deleteOwnComment(this.storyId,e,this.currentUser.uid),this.successMessage="Comment deleted successfully",setTimeout(()=>this.successMessage="",3e3),yield this.loadComments()}catch(t){console.error("Error deleting comment:",t),this.errorMessage="Failed to delete comment. Please try again.",setTimeout(()=>this.errorMessage="",5e3)}})}clearComment(){this.commentText=""}canDeleteComment(e){return this.currentUser?e.userId===this.currentUser.uid:!1}trackComment(e,t){return t.id||e.toString()}getInitials(e){return e?e.split(" ").map(t=>t.charAt(0)).join("").toUpperCase().substring(0,2):"\u{1F464}"}getAvatarColor(e){if(!e)return"#f7a600";let t=["#f7a600","#e74c3c","#3498db","#2ecc71","#9b59b6","#f39c12","#1abc9c","#34495e","#e67e22","#95a5a6"],r=e.split("").reduce((i,o)=>i+o.charCodeAt(0),0);return t[r%t.length]}setSortOrder(e){this.sortOrder=e}get sortedComments(){return[...this.comments].sort((e,t)=>{let r=s=>s?s instanceof Date?s.getTime():"toDate"in s&&typeof s.toDate=="function"?s.toDate().getTime():0:0,i=r(e.createdAt),o=r(t.createdAt);return this.sortOrder==="newest"?o-i:i-o})}updateReadingProgress(){let e=this.articleContent?.nativeElement;if(!e)return;let t=window.scrollY,r=e.offsetTop,i=e.offsetHeight,o=window.innerHeight,s=Math.max(0,Math.min(100,(t-r+o)/i*100));this.readingProgress=s}adjustTextareaHeight(e){let t=e.target;t.style.height="auto",t.style.height=Math.min(t.scrollHeight,200)+"px"}goBack(){window.history.length>1?window.history.back():this.router.navigate(["/stories"])}copyLink(){return b(this,null,function*(){try{yield navigator.clipboard.writeText(window.location.href),this.linkCopied=!0,setTimeout(()=>this.linkCopied=!1,2e3)}catch(e){console.error("Failed to copy link:",e);let t=document.createElement("textarea");t.value=window.location.href,document.body.appendChild(t),t.select(),document.execCommand("copy"),document.body.removeChild(t),this.linkCopied=!0,setTimeout(()=>this.linkCopied=!1,2e3)}})}isArabic(e){return e?/[\u0600-\u06FF]/.test(e):!1}formatDate(e){if(!e)return"Recently";try{let t=e.toDate?e.toDate():new Date(e),r=new Date,i=Math.floor((r.getTime()-t.getTime())/(1e3*60));return i<1?"Just now":i<60?`${i}m ago`:i<1440?`${Math.floor(i/60)}h ago`:i<10080?`${Math.floor(i/1440)}d ago`:new Intl.DateTimeFormat("en",{month:"short",day:"numeric",year:t.getFullYear()!==r.getFullYear()?"numeric":void 0}).format(t)}catch{return"Recently"}}formatViewCount(e){return e<1e3?e.toString():e<1e6?(e/1e3).toFixed(1)+"K":(e/1e6).toFixed(1)+"M"}formatContent(e){return e?e.split(/\n\s*\n/).map(t=>{let r=t.trim();return r?`<p>${r.replace(/\n/g,"<br>")}</p>`:""}).filter(t=>t).join(""):""}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=Xe({type:n,selectors:[["app-story"]],viewQuery:function(t,r){if(t&1&&yo(uW,5),t&2){let i;Wr(i=Gr())&&(r.articleContent=i.first)}},inputs:{storyId:"storyId"},decls:2,vars:2,consts:[["articleContent",""],["class","article-container",4,"ngIf"],["class","not-found",4,"ngIf"],[1,"article-container"],["class","loading-state",4,"ngIf"],["class","fade-in",4,"ngIf"],[1,"loading-state"],[1,"modern-spinner"],[1,"fade-in"],[1,"back-button",3,"routerLink"],["width","20","height","20","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2"],["d","M19 12H5M12 19l-7-7 7-7"],[1,"hero-section"],[1,"article-emoji"],[1,"category-badge"],[1,"article-title"],[1,"article-meta"],[1,"meta-item"],["width","16","height","16","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2",4,"ngIf"],["style","cursor: pointer;",3,"routerLink","src","alt",4,"ngIf"],[2,"cursor","pointer",3,"routerLink"],["width","16","height","16","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2"],["cx","12","cy","12","r","10"],["points","12,6 12,12 16,14"],["d","M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"],["cx","12","cy","12","r","3"],["d","M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"],[1,"reading-progress"],[1,"article-content",3,"scroll","ngClass"],[3,"innerHTML"],[1,"engagement-section"],[1,"upvote-card"],[1,"upvote-header"],[4,"ngIf"],[1,"vote-container"],[1,"vote-display"],[1,"vote-count"],[1,"vote-label"],[1,"modern-upvote-button",3,"click","disabled"],["class","button-spinner",4,"ngIf"],["d","M14 9V5a3 3 0 0 0-3-3l-4 9v11h11.28a2 2 0 0 0 2-1.7l1.38-9a2 2 0 0 0-2-2.3zM7 22H4a2 2 0 0 1-2-2v-7a2 2 0 0 1 2-2h3"],[1,"share-section"],[1,"share-buttons"],[1,"share-btn","copy",3,"click"],["width","18","height","18","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2",4,"ngIf"],[1,"comments-section"],[1,"comments-header"],[1,"comments-title"],["width","24","height","24","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2"],[1,"comments-count"],["class","comments-controls",4,"ngIf"],["class","comments-loading",4,"ngIf"],["class","comments-empty",4,"ngIf"],["class","comment-item",3,"animation-delay",4,"ngFor","ngForOf","ngForTrackBy"],[1,"comment-form-card"],["class","auth-prompt",4,"ngIf"],["class","comment-form",4,"ngIf"],["class","success-message fade-in",4,"ngIf"],["class","error-message fade-in",4,"ngIf"],["d","M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"],["cx","12","cy","7","r","4"],[2,"cursor","pointer",3,"routerLink","src","alt"],[1,"button-spinner"],["width","18","height","18","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2"],["d","M10 13a5 5 0 007.54.54l3-3a5 5 0 00-7.07-7.07l-1.72 1.71"],["d","M14 11a5 5 0 00-7.54-.54l-3 3a5 5 0 007.07 7.07l1.71-1.71"],["d","M20 6L9 17l-5-5"],[1,"comments-controls"],[1,"sort-btn",3,"click"],[1,"comments-loading"],[1,"modern-spinner","small"],[1,"comments-empty"],[1,"empty-icon"],[1,"comment-item"],[1,"comment-header"],[1,"comment-author"],["style","cursor: pointer;","class","author-avatar",3,"routerLink","background",4,"ngIf"],[1,"author-info"],[1,"author-name",2,"cursor","pointer",3,"routerLink"],[1,"comment-date"],["class","author-badge",4,"ngIf"],[1,"comment-actions"],["class","delete-btn","title","Delete comment",3,"click",4,"ngIf"],[1,"comment-content"],[1,"author-avatar",2,"cursor","pointer",3,"routerLink"],[1,"author-badge"],["title","Delete comment",1,"delete-btn",3,"click"],["points","3,6 5,6 21,6"],["d","m19,6v14a2,2 0 0,1 -2,2H7a2,2 0 0,1 -2,-2V6m3,0V4a2,2 0 0,1 2,-2h4a2,2 0 0,1 2,2v2"],[1,"auth-prompt"],[1,"auth-icon"],["routerLink","/login",1,"auth-link"],[1,"comment-form"],[1,"form-header"],[3,"src","alt",4,"ngIf"],["class","user-avatar",3,"background",4,"ngIf"],[1,"form-group"],["placeholder","What did you think about this story? Share your perspective...","maxlength","500","rows","4","required","",1,"modern-textarea",3,"ngModelChange","input","ngModel"],[1,"character-count"],[1,"form-actions"],["class","secondary-btn",3,"click",4,"ngIf"],[1,"primary-btn",3,"click","disabled"],[3,"src","alt"],[1,"user-avatar"],[1,"secondary-btn",3,"click"],["x1","22","y1","2","x2","11","y2","13"],["points","22,2 15,22 11,13 2,9 22,2"],[1,"success-message","fade-in"],["d","M22 11.08V12a10 10 0 1 1-5.93-9.14"],["points","22,4 12,14.01 9,11.01"],[1,"error-message","fade-in"],["x1","15","y1","9","x2","9","y2","15"],["x1","9","y1","9","x2","15","y2","15"],[1,"not-found"],[1,"not-found-icon"],[1,"primary-btn",3,"click"]],template:function(t,r){t&1&&B(0,UW,3,2,"div",1)(1,jW,11,0,"div",2),t&2&&(C("ngIf",r.story),v(),C("ngIf",!r.story&&!r.isLoading))},dependencies:[Sn,Ms,In,Rn,hi,lr,fi,ca,la,Nr,on],styles:['[_nghost-%COMP%]{--primary-color: #f7a600;--primary-hover: #e59500;--success-color: #10b981;--error-color: #ef4444;--warning-color: #f59e0b;--text-primary: #292929;--text-secondary: #757575;--text-muted: #9ca3af;--bg-primary: #ffffff;--bg-secondary: #f9fafb;--bg-elevated: #ffffff;--border-color: #e5e7eb;--border-hover: #d1d5db;--shadow-sm: 0 1px 3px 0 rgba(0, 0, 0, .1);--shadow-md: 0 4px 6px -1px rgba(0, 0, 0, .1), 0 2px 4px -1px rgba(0, 0, 0, .06);--shadow-lg: 0 10px 15px -3px rgba(0, 0, 0, .1), 0 4px 6px -2px rgba(0, 0, 0, .05);--radius-sm: 4px;--radius-md: 8px;--radius-lg: 12px;--transition: all .3s cubic-bezier(.4, 0, .2, 1)}.article-container[_ngcontent-%COMP%]{max-width:680px;margin:0 auto;padding:2rem 1rem}@keyframes _ngcontent-%COMP%_fadeIn{0%{opacity:0;transform:translateY(20px)}to{opacity:1;transform:translateY(0)}}@keyframes _ngcontent-%COMP%_slideInUp{0%{opacity:0;transform:translateY(30px)}to{opacity:1;transform:translateY(0)}}@keyframes _ngcontent-%COMP%_spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}@keyframes _ngcontent-%COMP%_pulse{0%,to{transform:scale(1)}50%{transform:scale(1.05)}}.fade-in[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_fadeIn .6s ease-out}.slide-in[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_slideInUp .4s ease-out}.pulse[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_pulse 2s infinite}.back-button[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5rem;padding:.75rem 1rem;background:var(--bg-secondary);border:1px solid var(--border-color);border-radius:var(--radius-md);color:var(--text-secondary);font-weight:500;cursor:pointer;transition:var(--transition);margin-bottom:2rem;text-decoration:none}.back-button[_ngcontent-%COMP%]:hover{background:var(--bg-elevated);color:var(--text-primary);border-color:var(--border-hover);box-shadow:var(--shadow-sm)}.hero-section[_ngcontent-%COMP%]{text-align:center;margin-bottom:3rem;padding:2rem 0}.article-emoji[_ngcontent-%COMP%]{font-size:3.5rem;margin-bottom:1.5rem;display:block}.article-title[_ngcontent-%COMP%]{font-size:clamp(2rem,5vw,2.8rem);margin-bottom:1.5rem;font-weight:700;line-height:1.2;color:var(--text-primary);letter-spacing:-.5px}.article-meta[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;justify-content:center;gap:1.2rem;color:var(--text-secondary);font-size:.9rem;margin-top:1.5rem}.meta-item[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.4rem}.meta-item[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{opacity:.7}.reading-progress[_ngcontent-%COMP%]{position:fixed;top:0;left:0;height:3px;background:linear-gradient(90deg,var(--primary-color),var(--primary-hover));z-index:1000;transition:width .3s ease}.article-content[_ngcontent-%COMP%]{font-size:1.2rem;text-align:left;line-height:1.7;margin:3rem 0;color:var(--text-primary);font-family:Georgia,serif}.article-content[_ngcontent-%COMP%]   [_ngcontent-%COMP%]:deep(p){margin-bottom:1.8rem;letter-spacing:-.03px}.article-content.rtl[_ngcontent-%COMP%]{text-align:right;direction:rtl}.loading-state[_ngcontent-%COMP%], .comments-loading[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;gap:1rem;padding:3rem;color:var(--text-secondary)}.comments-loading[_ngcontent-%COMP%]{flex-direction:row;justify-content:center;padding:2rem}.modern-spinner[_ngcontent-%COMP%]{width:40px;height:40px;border:3px solid var(--bg-secondary);border-top:3px solid var(--primary-color);border-radius:50%;animation:_ngcontent-%COMP%_spin 1s linear infinite}.modern-spinner.small[_ngcontent-%COMP%]{width:20px;height:20px;border-width:2px}.button-spinner[_ngcontent-%COMP%]{display:inline-block;width:16px;height:16px;border:2px solid transparent;border-top:2px solid currentColor;border-radius:50%;animation:_ngcontent-%COMP%_spin 1s linear infinite;margin-right:.5rem}.engagement-section[_ngcontent-%COMP%]{display:grid;gap:2rem;margin:3rem 0;border-top:1px solid var(--border-color);padding-top:2rem}.upvote-card[_ngcontent-%COMP%]{background:var(--bg-elevated);border-radius:var(--radius-md);padding:1.5rem;text-align:center}.upvote-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0 0 .5rem;color:var(--text-primary);font-size:1.1rem;font-weight:600}.upvote-header[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0 0 1.5rem;color:var(--text-secondary);font-size:.9rem}.vote-container[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;gap:2rem}.vote-display[_ngcontent-%COMP%]{text-align:center}.vote-count[_ngcontent-%COMP%]{font-size:1.8rem;font-weight:700;color:var(--primary-color);line-height:1}.vote-label[_ngcontent-%COMP%]{font-size:.875rem;color:var(--text-muted);margin-top:.25rem}.modern-upvote-button[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5rem;padding:.8rem 1.5rem;background:transparent;color:var(--text-secondary);border:1px solid var(--border-color);border-radius:var(--radius-md);font-size:.95rem;font-weight:500;cursor:pointer;transition:var(--transition)}.modern-upvote-button[_ngcontent-%COMP%]:hover:not(:disabled){background:var(--bg-secondary);border-color:var(--border-hover)}.modern-upvote-button.voted[_ngcontent-%COMP%]{background:var(--primary-color);color:#fff;border-color:var(--primary-color)}.modern-upvote-button.disabled[_ngcontent-%COMP%]{background:var(--text-muted);cursor:not-allowed;transform:none}.modern-upvote-button[_ngcontent-%COMP%]:disabled{opacity:.7;cursor:not-allowed;transform:none}.share-section[_ngcontent-%COMP%]{background:var(--bg-secondary);border-radius:var(--radius-md);padding:1.5rem;text-align:center}.share-section[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{margin:0 0 1rem;color:var(--text-primary);font-size:1rem}.share-buttons[_ngcontent-%COMP%]{display:flex;gap:1rem;justify-content:center}.share-btn[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5rem;padding:.75rem 1.5rem;border:1px solid var(--border-color);border-radius:var(--radius-md);background:var(--bg-primary);color:var(--text-secondary);font-size:.875rem;font-weight:500;cursor:pointer;transition:var(--transition)}.share-btn[_ngcontent-%COMP%]:hover{background:var(--bg-elevated);border-color:var(--border-hover);transform:translateY(-1px);box-shadow:var(--shadow-sm)}.share-btn.twitter[_ngcontent-%COMP%]:hover{color:#1da1f2;border-color:#1da1f2}.share-btn.copy.copied[_ngcontent-%COMP%]{color:var(--success-color);border-color:var(--success-color);background:#f0fdf4}.comments-section[_ngcontent-%COMP%]{margin:4rem 0;border-top:1px solid var(--border-color);padding-top:2rem}.comments-header[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;margin-bottom:2rem}.comments-title[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.75rem;font-size:1.3rem;font-weight:700;margin:0;color:var(--text-primary)}.comments-count[_ngcontent-%COMP%]{background:linear-gradient(135deg,var(--primary-color),var(--primary-hover));color:#fff;padding:.375rem .75rem;border-radius:50px;font-size:.875rem;font-weight:600}.comments-controls[_ngcontent-%COMP%]{display:flex;gap:1rem;margin-bottom:2rem}.sort-btn[_ngcontent-%COMP%]{padding:.5rem 1rem;border:1px solid var(--border-color);border-radius:var(--radius-sm);background:var(--bg-primary);color:var(--text-secondary);font-size:.875rem;cursor:pointer;transition:var(--transition)}.sort-btn.active[_ngcontent-%COMP%], .sort-btn[_ngcontent-%COMP%]:hover{background:var(--primary-color);color:#fff;border-color:var(--primary-color)}.comments-empty[_ngcontent-%COMP%]{text-align:center;padding:4rem 2rem;color:var(--text-secondary);background:var(--bg-secondary);border-radius:var(--radius-md)}.empty-icon[_ngcontent-%COMP%]{font-size:3rem;margin-bottom:1rem}.comments-empty[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0 0 .5rem;color:var(--text-primary)}.comment-item[_ngcontent-%COMP%]{background:var(--bg-elevated);border:1px solid var(--border-color);border-radius:var(--radius-md);padding:1.5rem;margin-bottom:1.5rem;transition:var(--transition);animation:_ngcontent-%COMP%_slideInUp .4s ease-out forwards}.comment-item[_ngcontent-%COMP%]:hover{box-shadow:var(--shadow-md);border-color:var(--border-hover)}.comment-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:flex-start;margin-bottom:1rem}.comment-author[_ngcontent-%COMP%]{display:flex;align-items:center;gap:1rem}.author-avatar[_ngcontent-%COMP%]{width:40px;height:40px;background:var(--primary-color);border-radius:50%;display:flex;align-items:center;justify-content:center;font-weight:600;color:#fff;flex-shrink:0;font-size:.875rem}.author-info[_ngcontent-%COMP%]{display:flex;flex-direction:column}.author-name[_ngcontent-%COMP%]{font-weight:600;color:var(--text-primary);font-size:.9rem}.comment-date[_ngcontent-%COMP%]{font-size:.75rem;color:var(--text-muted);margin-top:.25rem}.author-badge[_ngcontent-%COMP%]{background:linear-gradient(135deg,var(--primary-color),var(--primary-hover));color:#fff;padding:.25rem .5rem;border-radius:12px;font-size:.7rem;font-weight:600;text-transform:uppercase;letter-spacing:.025em;margin-left:.5rem}.comment-content[_ngcontent-%COMP%]{text-align:left;line-height:1.6;color:var(--text-primary);font-size:1rem;margin-top:1rem}.comment-actions[_ngcontent-%COMP%]{display:flex;gap:.5rem}.delete-btn[_ngcontent-%COMP%]{background:none;border:none;cursor:pointer;padding:.5rem;border-radius:var(--radius-sm);color:var(--text-muted);transition:var(--transition);display:flex;align-items:center;justify-content:center}.delete-btn[_ngcontent-%COMP%]:hover{color:var(--error-color);background:#fef2f2}.comment-form-card[_ngcontent-%COMP%]{background:var(--bg-elevated);border:1px solid var(--border-color);border-radius:var(--radius-md);padding:2rem;margin-top:2rem}.auth-prompt[_ngcontent-%COMP%]{text-align:center;padding:2rem;color:var(--text-secondary)}.auth-icon[_ngcontent-%COMP%]{font-size:2.5rem;margin-bottom:1rem}.auth-prompt[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0 0 .5rem;color:var(--text-primary);font-size:1.25rem}.auth-link[_ngcontent-%COMP%]{color:var(--primary-color);text-decoration:none;font-weight:600;transition:var(--transition)}.auth-link[_ngcontent-%COMP%]:hover{text-decoration:underline;color:var(--primary-hover)}.comment-form[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_fadeIn .5s ease-out}.form-header[_ngcontent-%COMP%]{display:flex;align-items:center;gap:1rem;margin-bottom:1.5rem}.form-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0;color:var(--text-primary);font-size:1.125rem;font-weight:600}.user-avatar[_ngcontent-%COMP%]{width:36px;height:36px;background:var(--primary-color);border-radius:50%;display:flex;align-items:center;justify-content:center;font-weight:600;color:#fff;font-size:.875rem}.form-group[_ngcontent-%COMP%]{margin-bottom:1.5rem}.modern-textarea[_ngcontent-%COMP%]{width:100%;padding:1rem;border-radius:var(--radius-md);border:1px solid var(--border-color);font-family:inherit;font-size:1rem;transition:var(--transition);resize:vertical;min-height:120px;line-height:1.5}.modern-textarea[_ngcontent-%COMP%]:focus{outline:none;border-color:var(--primary-color);box-shadow:0 0 0 2px #f7a4001a}.character-count[_ngcontent-%COMP%]{font-size:.75rem;color:var(--text-muted);text-align:right;margin-top:.5rem;transition:var(--transition)}.character-count.warning[_ngcontent-%COMP%]{color:var(--warning-color);font-weight:500}.character-count.danger[_ngcontent-%COMP%]{color:var(--error-color);font-weight:600}.form-actions[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;gap:1rem}.primary-btn[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5rem;padding:.8rem 1.5rem;border:none;border-radius:var(--radius-md);background:var(--primary-color);color:#fff;font-weight:500;font-size:.95rem;cursor:pointer;transition:var(--transition)}.primary-btn[_ngcontent-%COMP%]:hover:not(:disabled){background:var(--primary-hover);transform:translateY(-1px)}.primary-btn[_ngcontent-%COMP%]:disabled{background:var(--text-muted);cursor:not-allowed;transform:none}.secondary-btn[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5rem;padding:.8rem 1.5rem;border:1px solid var(--border-color);border-radius:var(--radius-md);background:var(--bg-primary);color:var(--text-secondary);font-weight:500;font-size:.95rem;cursor:pointer;transition:var(--transition)}.secondary-btn[_ngcontent-%COMP%]:hover{border-color:var(--border-hover);background:var(--bg-secondary);color:var(--text-primary)}.success-message[_ngcontent-%COMP%], .error-message[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.75rem;padding:1rem 1.25rem;border-radius:var(--radius-md);margin:1.5rem 0;font-weight:500;font-size:.95rem}.success-message[_ngcontent-%COMP%]{background:#f0fdf4;color:var(--success-color);border:1px solid #bbf7d0}.error-message[_ngcontent-%COMP%]{background:#fef2f2;color:var(--error-color);border:1px solid #fecaca}.not-found[_ngcontent-%COMP%]{text-align:center;padding:4rem 2rem;color:var(--text-secondary)}.not-found-icon[_ngcontent-%COMP%]{font-size:4rem;margin-bottom:1.5rem}.not-found[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{color:var(--text-primary);margin-bottom:1rem;font-size:1.75rem}.not-found[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin-bottom:2rem;font-size:1.1rem}.category-badge[data-category="Personal Growth"][_ngcontent-%COMP%]{color:#fef3c7;background:#92400e}.category-badge[data-category="Life Lessons"][_ngcontent-%COMP%]{color:#fce7f3;background:#9d174d}.category-badge[data-category="Cultural Heritage"][_ngcontent-%COMP%]{color:#e0f2fe;background:#0369a1}.category-badge[data-category="Travel & Adventure"][_ngcontent-%COMP%]{color:#dbeafe;background:#1e40af}.category-badge[data-category="Work & Career"][_ngcontent-%COMP%]{color:#f3e8ff;background:#6d28d9}.category-badge[data-category=Relationships][_ngcontent-%COMP%]{color:#ffe4e6;background:#be123c}.category-badge[data-category="Family Stories"][_ngcontent-%COMP%]{color:#dcfce7;background:#166534}.category-badge[data-category="Overcoming Challenges"][_ngcontent-%COMP%]{color:#fee2e2;background:#b91c1c}.category-badge[data-category="Creative Journey"][_ngcontent-%COMP%]{color:#ccfbf1;background:#0f766e}.category-badge[data-category="Social Impact"][_ngcontent-%COMP%]{color:#ede9fe;background:#5b21b6}.category-badge[data-category="Health & Wellness"][_ngcontent-%COMP%]{color:#fef9c3;background:#854d0e}.category-badge[data-category="Education & Learning"][_ngcontent-%COMP%]{color:#d1fae5;background:#047857}.category-badge[data-category="Dreams & Aspirations"][_ngcontent-%COMP%]{color:#fdf2f8;background:#9d174d}.category-badge[data-category="Unexpected Moments"][_ngcontent-%COMP%]{color:#e0f7fa;background:#00695c}.category-badge[data-category=Other][_ngcontent-%COMP%]{color:#f5f5f5;background:#374151}.category-badge[_ngcontent-%COMP%]{display:inline-block;padding:.35rem .75rem;border-radius:50px;font-size:.75rem;font-weight:600;text-transform:uppercase;letter-spacing:.025em;margin-bottom:1.5rem}@media (max-width: 768px){.article-container[_ngcontent-%COMP%]{padding:1rem}.article-title[_ngcontent-%COMP%]{font-size:2rem}.article-content[_ngcontent-%COMP%]{font-size:1.1rem;line-height:1.65}.article-meta[_ngcontent-%COMP%]{flex-direction:column;gap:.75rem}.vote-container[_ngcontent-%COMP%]{flex-direction:column;gap:1.5rem}.share-buttons[_ngcontent-%COMP%]{flex-direction:column}.comment-header[_ngcontent-%COMP%]{flex-direction:column;align-items:flex-start;gap:1rem}.comment-actions[_ngcontent-%COMP%]{align-self:flex-end}.form-actions[_ngcontent-%COMP%]{flex-direction:column-reverse}.comments-controls[_ngcontent-%COMP%]{flex-direction:column;gap:.5rem}}@media (max-width: 480px){.hero-section[_ngcontent-%COMP%]{padding:1rem 0}.article-emoji[_ngcontent-%COMP%]{font-size:3rem}.modern-upvote-button[_ngcontent-%COMP%]{padding:.75rem 1.5rem;font-size:.9rem}.comment-form-card[_ngcontent-%COMP%]{padding:1.5rem}}.meta-item[_ngcontent-%COMP%]   img[_ngcontent-%COMP%], .comment-author[_ngcontent-%COMP%]   img[_ngcontent-%COMP%], .form-header[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:3rem;height:100%;border-radius:50%}']})};var BW=["contentEditor"];function $W(n,e){n&1&&(h(0,"div",5)(1,"div",6)(2,"div",7),y(3,"\u270D\uFE0F"),p(),h(4,"h1"),y(5,"Start writing"),p(),h(6,"p"),y(7,"Join thousands of writers sharing their stories"),p(),h(8,"div",8)(9,"a",9),y(10,"Sign In"),p(),h(11,"a",10),y(12,"Create Account"),p()()()())}function HW(n,e){n&1&&(h(0,"div",11),q(1,"div",12),p())}function zW(n,e){if(n&1){let t=te();h(0,"div",63)(1,"div",64)(2,"div",65),y(3,"\u{1F4C4}"),p(),h(4,"div",66)(5,"h3"),y(6,"Previous draft found"),p(),h(7,"p"),y(8,"We found an unsaved draft from your last session. Would you like to continue?"),p()(),h(9,"div",67)(10,"button",68),$("click",function(){V(t);let i=S(2);return U(i.restoreDraft())}),y(11,"Restore"),p(),h(12,"button",69),$("click",function(){V(t);let i=S(2);return U(i.dismissDraftRecovery())}),y(13,"Start fresh"),p()()()()}}function qW(n,e){n&1&&(h(0,"span"),y(1,"Auto-saving..."),p())}function WW(n,e){if(n&1&&(h(0,"span"),y(1),p()),n&2){let t=S(3);v(),ie("Saved ",t.getTimeSince())}}function GW(n,e){n&1&&(h(0,"span",74),y(1,"Save failed"),p())}function KW(n,e){n&1&&(h(0,"span"),y(1,"Saved"),p())}function YW(n,e){if(n&1&&(h(0,"div",70),q(1,"span",71),B(2,qW,2,0,"span",72)(3,WW,2,1,"span",72)(4,GW,2,0,"span",73)(5,KW,2,0,"span",72),p()),n&2){let t=S(2);v(),he("pulse",t.autoSaveStatus==="saving")("error",t.autoSaveStatus==="error"),v(),C("ngIf",t.autoSaveStatus==="saving"),v(),C("ngIf",t.autoSaveStatus==="saved"),v(),C("ngIf",t.autoSaveStatus==="error"),v(),C("ngIf",t.autoSaveStatus==="idle"&&t.isDraftSaved)}}function QW(n,e){if(n&1&&(h(0,"div",75)(1,"div",76),q(2,"div",77),p(),h(3,"span",78),y(4),p()()),n&2){let t=S(2);v(2),En("width",t.getWritingProgress().percentage,"%"),v(2),Cn("",t.getWritingProgress().completed,"/",t.getWritingProgress().total," requirements complete")}}function ZW(n,e){if(n&1&&(h(0,"div",79),y(1),p()),n&2){let t=S(2);he("warning",t.getTitleCharacterInfo().isWarning)("error",t.getTitleCharacterInfo().isError),v(),Cn(" ",t.getTitleCharacterInfo().count,"/",t.getTitleCharacterInfo().limit," ")}}function XW(n,e){n&1&&(h(0,"div",80),y(1," Tell your story... "),p())}function JW(n,e){if(n&1&&(h(0,"div",81)(1,"span"),y(2),p(),h(3,"span",82),y(4,"\u2022"),p(),h(5,"span"),y(6),p()()),n&2){let t=S(2);v(2),ie("",t.getWordCount()," words"),v(4),ie("",t.getReadTime()," min read")}}function eG(n,e){if(n&1&&(h(0,"div",113),q(1,"img",114),p()),n&2){let t=S(3);v(),C("src",t.formData.coverImg,st)}}function tG(n,e){if(n&1&&(h(0,"option",115),y(1),p()),n&2){let t=e.$implicit;C("value",t),v(),K(t)}}function nG(n,e){if(n&1&&(h(0,"option",115),y(1),p()),n&2){let t=e.$implicit;C("value",t.value),v(),K(t.label)}}function rG(n,e){if(n&1){let t=te();h(0,"button",118),$("click",function(){let i=V(t).$implicit,o=S(4);return U(o.selectEmoji(i))}),y(1),p()}if(n&2){let t=e.$implicit;v(),ie(" ",t," ")}}function iG(n,e){if(n&1&&(h(0,"div",116),B(1,rG,2,1,"button",117),p()),n&2){let t=S(3);v(),C("ngForOf",t.emojiSuggestions)}}function oG(n,e){if(n&1){let t=te();h(0,"span",121),y(1),h(2,"button",122),$("click",function(){let i=V(t).$implicit,o=S(4);return U(o.removeTag(i))}),y(3,"\xD7"),p()()}if(n&2){let t=e.$implicit;v(),ie(" ",t," ")}}function sG(n,e){if(n&1&&(h(0,"div",119),B(1,oG,4,1,"span",120),p()),n&2){let t=S(3);v(),C("ngForOf",t.selectedTags)}}function aG(n,e){if(n&1){let t=te();h(0,"button",127),$("click",function(){let i=V(t).$implicit,o=S(4);return U(o.selectSuggestedTag(i))}),y(1),p()}if(n&2){let t=e.$implicit;v(),ie(" + ",t," ")}}function cG(n,e){if(n&1&&(h(0,"div",123)(1,"label",124),y(2,"Suggested tags:"),p(),h(3,"div",125),B(4,aG,2,1,"button",126),p()()),n&2){let t=S(3);v(4),C("ngForOf",t.suggestedTags)}}function lG(n,e){if(n&1){let t=te();h(0,"div",83),$("click",function(){V(t);let i=S(2);return U(i.closePublishModal())}),h(1,"div",84),$("click",function(i){return V(t),U(i.stopPropagation())}),h(2,"div",85)(3,"h2"),y(4,"Story preview"),p(),h(5,"button",86),$("click",function(){V(t);let i=S(2);return U(i.closePublishModal())}),y(6,"\xD7"),p()(),h(7,"div",87)(8,"div",88),B(9,eG,2,1,"div",89),h(10,"h1",90),y(11),p(),h(12,"div",91)(13,"div",92),q(14,"img",93),h(15,"span",94),y(16),p()(),h(17,"div",95),y(18),p()()(),h(19,"div",96)(20,"div",97)(21,"label"),y(22,"Category *"),p(),h(23,"select",98),It("ngModelChange",function(i){V(t);let o=S(2);return Pt(o.formData.category,i)||(o.formData.category=i),U(i)}),h(24,"option",99),y(25,"Choose a category"),p(),B(26,tG,2,2,"option",100),p()(),h(27,"div",101)(28,"div",97)(29,"label"),y(30,"Language *"),p(),h(31,"select",102),It("ngModelChange",function(i){V(t);let o=S(2);return Pt(o.formData.language,i)||(o.formData.language=i),U(i)}),h(32,"option",99),y(33,"Select language"),p(),B(34,nG,2,2,"option",100),p()(),h(35,"div",97)(36,"label"),y(37,"Emoji *"),p(),h(38,"div",103)(39,"input",104),It("ngModelChange",function(i){V(t);let o=S(2);return Pt(o.formData.emoji,i)||(o.formData.emoji=i),U(i)}),$("focus",function(){V(t);let i=S(2);return U(i.showEmojiSuggestions=!0)})("blur",function(){V(t);let i=S(2);return U(i.hideEmojiSuggestions())}),p(),B(40,iG,2,1,"div",105),p()()(),h(41,"div",97)(42,"label"),y(43,"Tags (optional)"),p(),h(44,"div",106),B(45,sG,2,1,"div",107)(46,cG,5,1,"div",108),h(47,"input",109),It("ngModelChange",function(i){V(t);let o=S(2);return Pt(o.tagsInput,i)||(o.tagsInput=i),U(i)}),$("keydown.enter",function(i){V(t);let o=S(2);return U(o.addTag(i))}),p(),h(48,"small",110),y(49),p()()()()(),h(50,"div",111)(51,"button",112),$("click",function(){V(t);let i=S(2);return U(i.closePublishModal())}),y(52,"Cancel"),p(),h(53,"button",23),$("click",function(){V(t);let i=S(2);return U(i.submitStory())}),y(54),p()()()()}if(n&2){let t=S(2);v(9),C("ngIf",t.formData.coverImg),v(2),K(t.formData.title||"Untitled Story"),v(3),C("src",t.getUserAvatar(),st)("alt",t.getUserName()),v(2),K(t.getUserName()),v(2),Cn(" ",t.getWordCount()," words \u2022 ",t.getReadTime()," min read "),v(5),Ct("ngModel",t.formData.category),v(3),C("ngForOf",t.categories),v(5),Ct("ngModel",t.formData.language),v(3),C("ngForOf",t.languages),v(5),Ct("ngModel",t.formData.emoji),v(),C("ngIf",t.showEmojiSuggestions),v(5),C("ngIf",t.selectedTags.length>0),v(),C("ngIf",t.suggestedTags.length>0),v(),Ct("ngModel",t.tagsInput),C("disabled",t.selectedTags.length>=5),v(2),ie("",t.selectedTags.length,"/5 tags \u2022 Press Enter to add"),v(4),C("disabled",!t.isValidForPublish()||t.isSubmitting),v(),ie(" ",t.isSubmitting?"Publishing...":"Publish now"," ")}}function uG(n,e){if(n&1){let t=te();h(0,"div",128)(1,"div",129),ce(),h(2,"svg",38),q(3,"circle",130)(4,"line",131)(5,"line",132),p()(),Pe(),h(6,"div",133)(7,"div",134),y(8),p()(),h(9,"button",135),$("click",function(){V(t);let i=S(2);return U(i.clearMessages())}),y(10,"\xD7"),p()()}if(n&2){let t=S(2);he("visible",!!t.errorMessage),v(8),K(t.errorMessage)}}function dG(n,e){if(n&1){let t=te();h(0,"div",136)(1,"div",129),ce(),h(2,"svg",38),q(3,"polyline",137),p()(),Pe(),h(4,"div",133)(5,"div",134),y(6),p()(),h(7,"button",135),$("click",function(){V(t);let i=S(2);return U(i.clearMessages())}),y(8,"\xD7"),p()()}if(n&2){let t=S(2);he("visible",!!t.successMessage),v(6),K(t.successMessage)}}function fG(n,e){if(n&1){let t=te();h(0,"div",13),B(1,zW,14,0,"div",14),h(2,"div",15)(3,"div",16)(4,"button",17),$("click",function(){V(t);let i=S();return U(i.navigateHome())}),h(5,"span",18),y(6,"\u270D\uFE0F"),p(),h(7,"span",19),y(8,"Write"),p()(),B(9,YW,6,8,"div",20),p(),h(10,"div",21)(11,"button",22),$("click",function(){V(t);let i=S();return U(i.saveDraft())}),y(12),p(),h(13,"button",23),$("click",function(){V(t);let i=S();return U(i.openPublishModal())}),y(14," Publish "),p(),h(15,"div",24),q(16,"img",25),p()()(),B(17,QW,5,4,"div",26),h(18,"div",27)(19,"div",28)(20,"div",29)(21,"textarea",30,0),It("ngModelChange",function(i){V(t);let o=S();return Pt(o.formData.title,i)||(o.formData.title=i),U(i)}),$("input",function(){V(t);let i=kn(22),o=S();return U(o.adjustTextareaHeight(i))}),p(),B(23,ZW,2,6,"div",31),p(),h(24,"div",32)(25,"div",33)(26,"button",34),$("click",function(){V(t);let i=S();return U(i.formatText("bold"))}),h(27,"strong"),y(28,"B"),p()(),h(29,"button",35),$("click",function(){V(t);let i=S();return U(i.formatText("italic"))}),h(30,"em"),y(31,"I"),p()()(),q(32,"div",36),h(33,"div",33)(34,"button",37),$("click",function(){V(t);let i=S();return U(i.insertLink())}),ce(),h(35,"svg",38),q(36,"path",39)(37,"path",40),p()(),Pe(),h(38,"button",41),$("click",function(){V(t);let i=S();return U(i.formatText("formatBlock","h2"))}),h(39,"strong"),y(40,"H2"),p()()(),q(41,"div",36),h(42,"div",33)(43,"button",42),$("click",function(){V(t);let i=S();return U(i.formatText("insertUnorderedList"))}),ce(),h(44,"svg",38),q(45,"line",43)(46,"line",44)(47,"line",45)(48,"line",46)(49,"line",47)(50,"line",48),p()(),Pe(),h(51,"button",49),$("click",function(){V(t);let i=S();return U(i.formatText("insertOrderedList"))}),ce(),h(52,"svg",38),q(53,"line",50)(54,"line",51)(55,"line",52)(56,"path",53)(57,"path",54)(58,"path",55)(59,"path",56),p()()()(),Pe(),h(60,"div",57,1),$("input",function(i){V(t);let o=S();return U(o.onContentInput(i))})("focus",function(){V(t);let i=S();return U(i.onEditorFocus())})("blur",function(){V(t);let i=S();return U(i.onEditorBlur())})("keydown",function(i){V(t);let o=S();return U(o.onEditorKeydown(i))})("keyup",function(i){V(t);let o=S();return U(o.onEditorKeyup(i))})("paste",function(i){V(t);let o=S();return U(o.onEditorPaste(i))}),B(62,XW,2,0,"div",58),p(),B(63,JW,7,2,"div",59),p()(),B(64,lG,55,20,"div",60)(65,uG,11,3,"div",61)(66,dG,9,3,"div",62),p()}if(n&2){let t=S();v(),C("ngIf",t.showDraftRecovery),v(8),C("ngIf",t.autoSaveStatus!=="idle"||t.isDraftSaved),v(2),he("saving",t.isSubmitting&&t.formData.status==="draft"),C("disabled",!t.canSave()||t.isSubmitting),v(),ie(" ",t.isSubmitting&&t.formData.status==="draft"?"Saving...":"Save draft"," "),v(),C("disabled",!t.canSave()||t.isSubmitting),v(3),C("src",t.getUserAvatar(),st)("alt",t.getUserName()),v(),C("ngIf",t.getWritingProgress().shouldShow),v(4),Ct("ngModel",t.formData.title),v(2),C("ngIf",t.getTitleCharacterInfo().shouldShow),v(),he("visible",t.showToolbar),v(2),he("active",t.isFormatActive("bold")),v(3),he("active",t.isFormatActive("italic")),v(31),he("rtl",t.isRTL),pn("dir",t.isRTL?"rtl":"ltr"),v(2),C("ngIf",!t.formData.content||t.formData.content.length===0),v(),C("ngIf",t.formData.content&&t.formData.content.length>0),v(),C("ngIf",t.showPublishModal),v(),C("ngIf",t.errorMessage),v(),C("ngIf",t.successMessage)}}var Lm=class n{contentEditor;storyService=k(di);authService=k(it);router=k(Ve);profileService=k(cr);notificationService=k(ur);currentUser=null;authLoading=!0;isSubmitting=!1;successMessage="";errorMessage="";tagsInput="";selectedTags=[];suggestedTags=[];showPublishModal=!1;showCoverOptions=!1;showToolbar=!1;showEmojiSuggestions=!1;showDraftRecovery=!1;isDraftSaved=!1;isRTL=!1;autoSaveStatus="idle";lastSavedTime=null;recoveredDraft=null;selectionRange=null;toolbarTimeout;isInitialized=!1;retryCount=0;maxRetries=2;emojiSuggestions=["\u{1F4DD}","\u270D\uFE0F","\u{1F4D6}","\u{1F4AD}","\u{1F31F}","\u2764\uFE0F","\u{1F525}","\u{1F4A1}","\u{1F3AF}","\u{1F680}","\u{1F308}","\u2728","\u{1F4AA}","\u{1F64F}","\u{1F60A}","\u{1F389}","\u{1F30D}","\u{1F3D4}\uFE0F","\u{1F30A}","\u{1F3A8}","\u{1F3B5}","\u{1F4DA}","\u2B50","\u{1F4AB}"];categories=["Personal Growth","Life Lessons","Cultural Heritage","Travel & Adventure","Work & Career","Relationships","Family Stories","Overcoming Challenges","Creative Journey","Social Impact","Health & Wellness","Education & Learning","Dreams & Aspirations","Unexpected Moments","Other"];languages=[{value:"en",label:"English"},{value:"ar",label:"\u0627\u0644\u0639\u0631\u0628\u064A\u0629"},{value:"fr",label:"Fran\xE7ais"},{value:"mixed",label:"Mixed Languages"}];formData={category:"",language:"",emoji:"",title:"",content:"",coverImg:"",status:"published",tags:[]};userSubscription;autoSaveInterval;ngOnInit(){this.userSubscription=this.authService.user$.subscribe(e=>{this.currentUser=e,this.authLoading=!1,e&&(this.formData.authorId=e.uid,this.formData.authorName=e.displayName||e.email?.split("@")[0]||"Anonymous",this.formData.authorPhotoURL=e.photoURL||"")}),this.checkForExistingDraft(),this.setupAutoSave(),this.setupKeyboardShortcuts()}ngAfterViewInit(){this.initializeEditor()}ngOnDestroy(){this.userSubscription&&this.userSubscription.unsubscribe(),this.autoSaveInterval&&clearInterval(this.autoSaveInterval),this.toolbarTimeout&&clearTimeout(this.toolbarTimeout),document.removeEventListener("selectionchange",this.handleSelectionChange.bind(this)),this.clearMessages()}checkForExistingDraft(){let e=localStorage.getItem("story-draft");if(e&&e!=="{}")try{let t=JSON.parse(e);(t.title||t.content&&t.content.length>20)&&(this.recoveredDraft=t,this.showDraftRecovery=!0,this.showSuccess("Previous draft found. Restore it or start fresh."))}catch(t){console.error("Error checking draft:",t)}}restoreDraft(){this.recoveredDraft&&(this.formData=H(H({},this.formData),this.recoveredDraft),this.selectedTags=this.recoveredDraft.tags||[],this.showDraftRecovery=!1,this.contentEditor?.nativeElement&&this.formData.content&&(this.contentEditor.nativeElement.innerHTML=this.formData.content),this.showSuccess("Draft restored successfully!"))}dismissDraftRecovery(){this.showDraftRecovery=!1,localStorage.removeItem("story-draft"),this.recoveredDraft=null}setupAutoSave(){this.autoSaveInterval=window.setInterval(()=>{if(this.canSave()&&!this.isSubmitting&&!this.showDraftRecovery){this.autoSaveStatus="saving";try{this.saveDraftToLocal(),this.autoSaveStatus="saved",this.lastSavedTime=new Date,setTimeout(()=>{this.autoSaveStatus="idle"},2e3)}catch(e){this.autoSaveStatus="error",console.error("Auto-save failed:",e)}}},3e4)}getTimeSince(){if(!this.lastSavedTime)return"";let t=Math.floor((new Date().getTime()-this.lastSavedTime.getTime())/1e3);return t<60?"just now":t<3600?`${Math.floor(t/60)}m ago`:`${Math.floor(t/3600)}h ago`}getTitleCharacterInfo(){let e=this.formData.title?.length||0,t=200,r=e/t*100;return{count:e,limit:t,percentage:r,isWarning:r>=80,isError:r>=95,shouldShow:r>=70}}getWritingProgress(){let e={hasTitle:!!this.formData.title&&this.formData.title.length>=3,hasContent:!!this.formData.content&&this.formData.content.length>=100,hasCategory:!!this.formData.category,hasLanguage:!!this.formData.language,hasEmoji:!!this.formData.emoji,hasMinimumWords:this.getWordCount()>=50},t=Object.values(e).filter(Boolean).length,r=Object.keys(e).length;return{percentage:Math.round(t/r*100),completed:t,total:r,requirements:e,shouldShow:this.formData.title||this.formData.content}}generateTagSuggestions(){let e=this.formData.content?.toLowerCase()||"",t=this.formData.title?.toLowerCase()||"",r=this.formData.category?.toLowerCase()||"",i=`${t} ${e} ${r}`,o={travel:["adventure","journey","exploration","culture"],work:["career","professional","business","leadership"],family:["relationships","love","home","parenting"],personal:["growth","self-improvement","reflection","mindfulness"],creative:["art","design","inspiration","creativity"],health:["wellness","fitness","mental-health","lifestyle"],learning:["education","knowledge","skills","development"],challenge:["resilience","strength","perseverance","courage"],story:["narrative","experience","life-lessons","wisdom"]};this.suggestedTags=[],Object.entries(o).forEach(([s,a])=>{i.includes(s)&&this.suggestedTags.push(...a)}),this.suggestedTags=[...new Set(this.suggestedTags)].filter(s=>!this.selectedTags.includes(s)).slice(0,5)}selectSuggestedTag(e){this.selectedTags.length<5&&!this.selectedTags.includes(e)&&(this.selectedTags.push(e),this.generateTagSuggestions())}submitWithRetry(e){return b(this,null,function*(){let t=0;for(;t<=this.maxRetries;)try{return yield e()}catch(r){if(t++,t>this.maxRetries)throw r;this.showError(`Connection issue. Retrying... (${this.maxRetries-t+1} attempts left)`),yield new Promise(i=>setTimeout(i,1e3*t))}})}initializeEditor(){if(this.isInitialized||!this.contentEditor?.nativeElement)return;let e=this.contentEditor.nativeElement;this.formData.content?e.innerHTML=this.formData.content:e.innerHTML="<p><br></p>",e.setAttribute("spellcheck","true"),e.setAttribute("autocomplete","off"),e.setAttribute("autocorrect","on"),e.setAttribute("autocapitalize","sentences"),document.execCommand("defaultParagraphSeparator",!1,"p"),this.isInitialized=!0}navigateHome(){this.router.navigate(["/"])}getUserName(){return this.currentUser?this.currentUser.displayName||this.currentUser.email?.split("@")[0]||"Writer":""}getUserAvatar(){return this.currentUser?this.currentUser.photoURL||`https://ui-avatars.com/api/?name=${encodeURIComponent(this.getUserName())}&background=f7c843&color=fff`:"/assets/default-avatar.png"}getWordCount(){return this.formData.content?this.formData.content.replace(/<[^>]*>/g,"").trim().split(/\s+/).filter(t=>t.length>0).length:0}getReadTime(){let t=this.getWordCount();return Math.max(1,Math.ceil(t/200))}canSave(){return!!(this.formData.title&&this.formData.content&&this.formData.content.length>=10)}isValidForPublish(){return!!(this.formData.title&&this.formData.content&&this.formData.category&&this.formData.language&&this.formData.emoji)}onCoverImageSelected(e){let t=e.target.files[0];if(t){if(t.size>5*1024*1024){this.showError("Image size must be less than 5MB");return}if(!t.type.startsWith("image/")){this.showError("Please select a valid image file");return}let r=new FileReader;r.onload=i=>{this.formData.coverImg=i.target?.result},r.readAsDataURL(t)}}removeCover(){this.formData.coverImg="",this.showCoverOptions=!1}changeCover(){document.querySelector('input[type="file"]')?.click()}adjustTextareaHeight(e){e.style.height="auto",e.style.height=e.scrollHeight+"px"}onContentInput(e){let t=e.target,r=t.innerHTML,i=t.textContent||"",s=/[\u0590-\u05FF\u0600-\u06FF\u0750-\u077F]/.test(i);s!==this.isRTL&&(this.isRTL=s),this.formData.content!==r&&(this.formData.content=r,this.formData.content&&this.formData.content.length>100&&this.generateTagSuggestions())}onEditorKeydown(e){e.key==="Enter"&&!e.shiftKey&&(e.preventDefault(),document.execCommand("formatBlock",!1,"p"),document.execCommand("insertParagraph",!1),setTimeout(()=>{this.cleanupEditorContent()},0)),e.key==="Tab"&&(e.preventDefault(),document.execCommand("insertText",!1,"    "))}onEditorKeyup(e){this.updateContentFromEditor(),e.key==="Escape"&&(this.showToolbar=!1)}onEditorFocus(){document.addEventListener("selectionchange",this.handleSelectionChange.bind(this))}onEditorBlur(){document.removeEventListener("selectionchange",this.handleSelectionChange.bind(this)),this.hideToolbarDelayed()}handleSelectionChange(){let e=window.getSelection();if(!e||e.rangeCount===0||e.isCollapsed){this.hideToolbarDelayed();return}let t=e.getRangeAt(0),r=this.contentEditor?.nativeElement;if(!r||!r.contains(t.commonAncestorContainer)){this.hideToolbarDelayed();return}t.toString().trim().length>0?(this.selectionRange=t.cloneRange(),this.showToolbarAtSelection()):this.hideToolbarDelayed()}showToolbarAtSelection(){this.toolbarTimeout&&clearTimeout(this.toolbarTimeout),this.showToolbar=!0,setTimeout(()=>{this.updateToolbarPosition()},0)}formatText(e,t){if(this.selectionRange){let r=window.getSelection();r&&(r.removeAllRanges(),r.addRange(this.selectionRange))}document.execCommand(e,!1,t),this.updateContentFromEditor(),this.contentEditor?.nativeElement.focus(),this.hideToolbarDelayed()}hideToolbarDelayed(){this.toolbarTimeout&&clearTimeout(this.toolbarTimeout),this.toolbarTimeout=window.setTimeout(()=>{this.showToolbar=!1,this.selectionRange=null},150)}updateToolbarPosition(){if(!this.selectionRange)return;let e=this.selectionRange.getBoundingClientRect(),t=document.querySelector(".editor-toolbar");if(t){let r=t.getBoundingClientRect(),i=window.innerWidth,o=e.top-r.height-10,s=e.left+e.width/2-r.width/2;s<10&&(s=10),s+r.width>i-10&&(s=i-r.width-10),o<10&&(o=e.bottom+10),t.style.position="fixed",t.style.top=`${o}px`,t.style.left=`${s}px`,t.style.transform="none"}}insertLink(){let e=prompt("Enter URL:");e&&e.trim()&&this.formatText("createLink",e)}isFormatActive(e){try{return document.queryCommandState(e)}catch{return!1}}updateContentFromEditor(){if(this.contentEditor?.nativeElement){let e=this.contentEditor.nativeElement.innerHTML;this.formData.content=e}}onEditorPaste(e){e.preventDefault();let t=e.clipboardData?.getData("text/plain")||"";t&&(document.execCommand("insertText",!1,t),this.updateContentFromEditor())}cleanupEditorContent(){if(!this.contentEditor?.nativeElement)return;let e=this.contentEditor.nativeElement,t=e.innerHTML;if(t=t.replace(/<div><br><\/div>/g,"<p><br></p>").replace(/<div>/g,"<p>").replace(/<\/div>/g,"</p>").replace(/<p><\/p>/g,"<p><br></p>").replace(/&nbsp;/g," ").trim(),t!==e.innerHTML){let r=window.getSelection(),i=r?.rangeCount?r.getRangeAt(0):null;if(e.innerHTML=t,i&&e.lastChild)try{let o=document.createRange();o.setStart(e.lastChild,e.lastChild.textContent?.length||0),o.collapse(!0),r?.removeAllRanges(),r?.addRange(o)}catch{e.focus()}this.formData.content=t}}addTag(e){e.preventDefault();let t=this.tagsInput.trim();t&&!this.selectedTags.includes(t)&&this.selectedTags.length<5&&(this.selectedTags.push(t),this.tagsInput="",this.generateTagSuggestions())}removeTag(e){this.selectedTags=this.selectedTags.filter(t=>t!==e),this.generateTagSuggestions()}selectEmoji(e){this.formData.emoji=e,this.showEmojiSuggestions=!1}hideEmojiSuggestions(){setTimeout(()=>{this.showEmojiSuggestions=!1},150)}openPublishModal(){this.canSave()&&(this.generateTagSuggestions(),this.showPublishModal=!0,document.body.style.overflow="hidden")}closePublishModal(){this.showPublishModal=!1,document.body.style.overflow=""}submitStory(){return b(this,null,function*(){if(!(!this.currentUser||this.isSubmitting||!this.isValidForPublish())){this.isSubmitting=!0,this.clearMessages(),this.formData.status="published";try{yield this.submitWithRetry(()=>b(this,null,function*(){let e={title:this.formData.title,content:this.formData.content,category:this.formData.category,language:this.formData.language,emoji:this.formData.emoji,coverImg:this.formData.coverImg||"",status:"published",tags:this.selectedTags,authorId:this.currentUser.uid,authorName:this.currentUser.displayName||this.currentUser.email?.split("@")[0]||"Anonymous",authorPhotoURL:this.currentUser.photoURL||""},t=yield this.storyService.createStory(e);this.notificationService.notifyStoryPublished(this.currentUser.uid,this.formData.title,t),this.profileService.awardUserXP(this.currentUser.uid,25,"posted a story")})),this.showSuccess("Story published successfully!"),this.closePublishModal(),localStorage.removeItem("story-draft"),setTimeout(()=>{this.router.navigate(["/"])},2e3)}catch(e){console.error("Error publishing story:",e),this.showError("Failed to publish story after multiple attempts. Please check your connection and try again.")}finally{this.isSubmitting=!1}}})}saveDraft(){return b(this,null,function*(){if(!(!this.currentUser||this.isSubmitting||!this.canSave())){this.isSubmitting=!0,this.clearMessages(),this.formData.status="draft";try{yield this.submitWithRetry(()=>b(this,null,function*(){let e={title:this.formData.title,content:this.formData.content,category:this.formData.category||"",language:this.formData.language||"",emoji:this.formData.emoji||"\u{1F4DD}",coverImg:this.formData.coverImg||"",status:"draft",tags:this.selectedTags,authorId:this.currentUser.uid,authorName:this.currentUser.displayName||this.currentUser.email?.split("@")[0]||"Anonymous",authorPhotoURL:this.currentUser.photoURL||""};return this.profileService.awardUserXP(this.currentUser.uid,10,"saved a draft"),yield this.storyService.createStory(e)})),this.showSuccess("Draft saved successfully!"),this.closePublishModal(),localStorage.removeItem("story-draft"),setTimeout(()=>{this.router.navigate(["/profile"])},2e3)}catch(e){console.error("Error saving draft:",e),this.showError("Failed to save draft after multiple attempts. Please check your connection and try again.")}finally{this.isSubmitting=!1}}})}saveDraftToLocal(){let e=ne(H({},this.formData),{tags:this.selectedTags,timestamp:new Date().toISOString()});localStorage.setItem("story-draft",JSON.stringify(e))}setupKeyboardShortcuts(){document.addEventListener("keydown",e=>{if(e.ctrlKey||e.metaKey)switch(e.key){case"s":e.preventDefault(),this.canSave()&&this.saveDraft();break;case"Enter":e.preventDefault(),this.canSave()&&this.openPublishModal();break}})}showSuccess(e){this.successMessage=e,setTimeout(()=>{this.successMessage=""},5e3)}showError(e){this.errorMessage=e,setTimeout(()=>{this.errorMessage=""},8e3)}clearMessages(){this.successMessage="",this.errorMessage=""}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=Xe({type:n,selectors:[["app-write"]],viewQuery:function(t,r){if(t&1&&yo(BW,5),t&2){let i;Wr(i=Gr())&&(r.contentEditor=i.first)}},decls:3,vars:3,consts:[["titleTextarea",""],["contentEditor",""],["class","auth-required",4,"ngIf"],["class","loading-state",4,"ngIf"],["class","write-container",4,"ngIf"],[1,"auth-required"],[1,"auth-container"],[1,"auth-icon"],[1,"auth-buttons"],["routerLink","/login",1,"btn-primary"],["routerLink","/register",1,"btn-outline"],[1,"loading-state"],[1,"loading-spinner"],[1,"write-container"],["class","draft-recovery-banner",4,"ngIf"],[1,"top-bar"],[1,"top-bar-left"],[1,"logo-btn",3,"click"],[1,"logo-icon"],[1,"logo-text"],["class","draft-status",4,"ngIf"],[1,"top-bar-right"],[1,"btn-ghost",3,"click","disabled"],[1,"btn-publish",3,"click","disabled"],[1,"user-avatar"],[3,"src","alt"],["class","progress-container",4,"ngIf"],[1,"main-content"],[1,"story-content"],[1,"title-container"],["placeholder","Title","rows","1","maxlength","200","required","",1,"title-input",3,"ngModelChange","input","ngModel"],["class","character-count",3,"warning","error",4,"ngIf"],[1,"editor-toolbar"],[1,"toolbar-group"],["type","button","title","Bold (Ctrl+B)",3,"click"],["type","button","title","Italic (Ctrl+I)",3,"click"],[1,"toolbar-divider"],["type","button","title","Link (Ctrl+K)",3,"click"],["width","20","height","20","viewBox","0 0 24 24","fill","none","stroke","currentColor"],["d","10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"],["d","14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"],["type","button","title","Heading",3,"click"],["type","button","title","Bullet List",3,"click"],["x1","8","y1","6","x2","21","y2","6"],["x1","8","y1","12","x2","21","y2","12"],["x1","8","y1","18","x2","21","y2","18"],["x1","3","y1","6","x2","3.01","y2","6"],["x1","3","y1","12","x2","3.01","y2","12"],["x1","3","y1","18","x2","3.01","y2","18"],["type","button","title","Numbered List",3,"click"],["x1","10","y1","6","x2","21","y2","6"],["x1","10","y1","12","x2","21","y2","12"],["x1","10","y1","18","x2","21","y2","18"],["d","4 6h1v4"],["d","4 10h2l-2 2h2"],["d","6 14v2h-2"],["d","4 16h2"],["contenteditable","true",1,"content-editor",3,"input","focus","blur","keydown","keyup","paste"],["class","editor-placeholder",4,"ngIf"],["class","writing-stats",4,"ngIf"],["class","modal-overlay",3,"click",4,"ngIf"],["class","toast error-toast",3,"visible",4,"ngIf"],["class","toast success-toast",3,"visible",4,"ngIf"],[1,"draft-recovery-banner"],[1,"recovery-content"],[1,"recovery-icon"],[1,"recovery-text"],[1,"recovery-actions"],[1,"btn-recovery-restore",3,"click"],[1,"btn-recovery-dismiss",3,"click"],[1,"draft-status"],[1,"status-dot"],[4,"ngIf"],["class","error-text",4,"ngIf"],[1,"error-text"],[1,"progress-container"],[1,"progress-bar"],[1,"progress-fill"],[1,"progress-text"],[1,"character-count"],[1,"editor-placeholder"],[1,"writing-stats"],[1,"stat-divider"],[1,"modal-overlay",3,"click"],[1,"publish-modal",3,"click"],[1,"modal-header"],[1,"modal-close",3,"click"],[1,"modal-content"],[1,"story-preview"],["class","preview-cover",4,"ngIf"],[1,"preview-title"],[1,"preview-meta"],[1,"author-info"],[1,"author-avatar",3,"src","alt"],[1,"author-name"],[1,"story-stats"],[1,"publish-options"],[1,"form-group"],["name","category","required","",1,"select-input",3,"ngModelChange","ngModel"],["value","","disabled",""],[3,"value",4,"ngFor","ngForOf"],[1,"form-row"],["name","language","required","",1,"select-input",3,"ngModelChange","ngModel"],[1,"emoji-container"],["type","text","name","emoji","placeholder","\u{1F4DD}","maxlength","2","required","",1,"emoji-input",3,"ngModelChange","focus","blur","ngModel"],["class","emoji-suggestions",4,"ngIf"],[1,"tags-section"],["class","selected-tags",4,"ngIf"],["class","suggested-tags",4,"ngIf"],["type","text","name","tags","placeholder","Add up to 5 tags...",1,"tags-input",3,"ngModelChange","keydown.enter","ngModel","disabled"],[1,"tags-help"],[1,"modal-actions"],[1,"btn-outline",3,"click"],[1,"preview-cover"],["alt","Cover",3,"src"],[3,"value"],[1,"emoji-suggestions"],["type","button","class","emoji-option",3,"click",4,"ngFor","ngForOf"],["type","button",1,"emoji-option",3,"click"],[1,"selected-tags"],["class","tag-chip",4,"ngFor","ngForOf"],[1,"tag-chip"],["type","button",1,"tag-remove",3,"click"],[1,"suggested-tags"],[1,"suggestions-label"],[1,"suggestions-list"],["type","button","class","tag-suggestion",3,"click",4,"ngFor","ngForOf"],["type","button",1,"tag-suggestion",3,"click"],[1,"toast","error-toast"],[1,"toast-icon"],["cx","12","cy","12","r","10"],["x1","15","y1","9","x2","9","y2","15"],["x1","9","y1","9","x2","15","y2","15"],[1,"toast-content"],[1,"toast-message"],[1,"toast-dismiss",3,"click"],[1,"toast","success-toast"],["points","20,6 9,17 4,12"]],template:function(t,r){t&1&&B(0,$W,13,0,"div",2)(1,HW,2,0,"div",3)(2,fG,67,26,"div",4),t&2&&(C("ngIf",!r.currentUser&&!r.authLoading),v(),C("ngIf",r.authLoading),v(),C("ngIf",r.currentUser&&!r.authLoading))},dependencies:[Sn,In,Rn,hi,_2,b2,lr,km,fi,ca,la,Nr,xr,on],styles:[`[_nghost-%COMP%]{--primary: #1a8917;--primary-hover: #156b13;--text-primary: #242424;--text-secondary: #6b6b6b;--text-muted: #8b8b8b;--border-light: #e6e6e6;--border-medium: #d1d1d1;--background: #ffffff;--background-secondary: #f9f9f9;--shadow-light: 0 1px 3px rgba(0,0,0,.05);--shadow-medium: 0 4px 12px rgba(0,0,0,.1);--shadow-heavy: 0 8px 24px rgba(0,0,0,.15);--radius: 6px;--font-serif: Charter, Georgia, serif;--font-sans: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif}.progress-container[_ngcontent-%COMP%]{margin:1rem 0 2rem}.progress-bar[_ngcontent-%COMP%]{height:6px;background:var(--border-light);border-radius:3px;overflow:hidden}.progress-fill[_ngcontent-%COMP%]{height:100%;background:var(--primary);transition:width .3s ease}.progress-text[_ngcontent-%COMP%]{display:block;margin-top:.5rem;font-size:.85rem;color:var(--text-secondary)}.draft-recovery-banner[_ngcontent-%COMP%]{background:#fff8e6;border:1px solid #ffe4a3;border-radius:var(--radius);margin:1rem auto 2rem;padding:1rem 1.5rem}.recovery-content[_ngcontent-%COMP%]{display:flex;align-items:center;gap:1rem}.recovery-icon[_ngcontent-%COMP%]{font-size:1.5rem}.recovery-text[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0;font-size:1rem;font-weight:600}.recovery-text[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;color:var(--text-secondary);font-size:.9rem}.recovery-actions[_ngcontent-%COMP%]{margin-left:auto;display:flex;gap:.5rem}.btn-recovery-restore[_ngcontent-%COMP%]{background:var(--primary);border:none;padding:.5rem 1rem;border-radius:var(--radius);color:#fff;cursor:pointer}.btn-recovery-dismiss[_ngcontent-%COMP%]{background:transparent;border:1px solid var(--border-medium);padding:.5rem 1rem;border-radius:var(--radius);cursor:pointer}.character-count[_ngcontent-%COMP%]{font-size:.85rem;color:var(--text-muted);margin-top:.25rem}.character-count.warning[_ngcontent-%COMP%]{color:#d67c00}.character-count.error[_ngcontent-%COMP%]{color:#d60000}.tags-section[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:.5rem}.tag-chip[_ngcontent-%COMP%]{background:var(--background-secondary);padding:.25rem .75rem;border-radius:16px;font-size:.85rem;display:inline-flex;align-items:center;gap:.25rem}.tag-remove[_ngcontent-%COMP%]{border:none;background:none;cursor:pointer;font-size:1rem;line-height:1}.suggested-tags[_ngcontent-%COMP%]{font-size:.85rem;color:var(--text-secondary)}.suggestions-list[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:.5rem;margin-top:.25rem}.tag-suggestion[_ngcontent-%COMP%]{border:1px solid var(--border-medium);background:#fff;padding:.25rem .75rem;border-radius:16px;cursor:pointer;font-size:.85rem}.tag-suggestion[_ngcontent-%COMP%]:hover{border-color:var(--primary);color:var(--primary-dark)}.tags-input[_ngcontent-%COMP%]{border:1px solid var(--border-medium);border-radius:var(--radius);padding:.5rem .75rem;outline:none}.tags-help[_ngcontent-%COMP%]{font-size:.8rem;color:var(--text-muted)}.emoji-suggestions[_ngcontent-%COMP%]{position:absolute;top:110%;left:0;right:0;background:#fff;border:1px solid var(--border-medium);border-radius:var(--radius);box-shadow:var(--shadow-medium);display:flex;flex-wrap:wrap;padding:.5rem;gap:.5rem;z-index:50}.emoji-option[_ngcontent-%COMP%]{font-size:1.25rem;border:none;background:transparent;cursor:pointer;transition:transform .1s}.emoji-option[_ngcontent-%COMP%]:hover{transform:scale(1.2)}.toast[_ngcontent-%COMP%]{position:fixed;bottom:1rem;right:1rem;display:flex;align-items:center;gap:.75rem;padding:.75rem 1rem;border-radius:var(--radius);box-shadow:var(--shadow-medium);opacity:0;transform:translateY(10px);pointer-events:none;transition:all .3s ease;min-width:250px;max-width:350px;z-index:3000}.toast.visible[_ngcontent-%COMP%]{opacity:1;transform:translateY(0);pointer-events:auto}.toast-icon[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{width:20px;height:20px}.toast-content[_ngcontent-%COMP%]{flex:1}.toast-dismiss[_ngcontent-%COMP%]{border:none;background:none;font-size:1.2rem;cursor:pointer}.error-toast[_ngcontent-%COMP%]{background:#ffecec;border:1px solid #ffb8b8;color:#d60000}.success-toast[_ngcontent-%COMP%]{background:#e9ffe9;border:1px solid #9fd89f;color:#0f7d0f}.auth-required[_ngcontent-%COMP%]{min-height:100vh;display:flex;align-items:center;justify-content:center;background:linear-gradient(135deg,#f7c843,#f7a600);font-family:var(--font-sans)}.auth-container[_ngcontent-%COMP%]{text-align:center;background:#fff;padding:3rem 2rem;border-radius:12px;box-shadow:var(--shadow-heavy);max-width:400px}.auth-icon[_ngcontent-%COMP%]{font-size:3rem;margin-bottom:1rem}.auth-container[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:2rem;font-weight:700;margin-bottom:.5rem;color:var(--text-primary)}.auth-container[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:var(--text-secondary);margin-bottom:2rem;font-size:1.1rem}.auth-buttons[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:1rem}.loading-state[_ngcontent-%COMP%]{min-height:100vh;display:flex;align-items:center;justify-content:center;background:var(--background)}.loading-spinner[_ngcontent-%COMP%]{width:40px;height:40px;border:3px solid var(--border-light);border-top:3px solid var(--primary);border-radius:50%;animation:_ngcontent-%COMP%_spin 1s linear infinite}@keyframes _ngcontent-%COMP%_spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}.write-container[_ngcontent-%COMP%]{min-height:100vh;background:var(--background);font-family:var(--font-sans)}.top-bar[_ngcontent-%COMP%]{position:sticky;top:0;background:#fffffff2;-webkit-backdrop-filter:blur(8px);backdrop-filter:blur(8px);border-bottom:1px solid var(--border-light);padding:.75rem 2rem;display:flex;justify-content:space-between;align-items:center;z-index:100}.top-bar-left[_ngcontent-%COMP%]{display:flex;align-items:center;gap:1.5rem}.logo-btn[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5rem;border:none;background:none;font-size:1.2rem;font-weight:600;color:var(--text-primary);cursor:pointer;padding:.5rem 0}.logo-icon[_ngcontent-%COMP%]{font-size:1.5rem}.draft-status[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5rem;font-size:.9rem;color:var(--text-secondary)}.status-dot[_ngcontent-%COMP%]{width:8px;height:8px;border-radius:50%;background:var(--primary);animation:_ngcontent-%COMP%_pulse 2s infinite}@keyframes _ngcontent-%COMP%_pulse{0%,to{opacity:1}50%{opacity:.5}}.top-bar-right[_ngcontent-%COMP%]{display:flex;align-items:center;gap:1rem}.user-avatar[_ngcontent-%COMP%]{width:36px;height:36px;border-radius:50%;overflow:hidden}.user-avatar[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;height:100%;object-fit:cover}.main-content[_ngcontent-%COMP%]{max-width:740px;margin:0 auto;padding:2rem}.story-content[_ngcontent-%COMP%]{position:relative}.cover-section[_ngcontent-%COMP%]{margin-bottom:2rem}.cover-container[_ngcontent-%COMP%]{position:relative;border-radius:var(--radius);overflow:hidden;background:var(--background-secondary)}.cover-image[_ngcontent-%COMP%]{width:100%;height:300px;object-fit:cover;display:block}.cover-overlay[_ngcontent-%COMP%]{position:absolute;top:1rem;right:1rem;display:flex;gap:.5rem;opacity:0;transition:opacity .2s}.cover-container[_ngcontent-%COMP%]:hover   .cover-overlay[_ngcontent-%COMP%]{opacity:1}.btn-cover-action[_ngcontent-%COMP%]{padding:.5rem 1rem;background:#000000b3;color:#fff;border:none;border-radius:var(--radius);font-size:.9rem;cursor:pointer;transition:background .2s}.btn-cover-action[_ngcontent-%COMP%]:hover{background:#000000e6}.cover-upload-area[_ngcontent-%COMP%]{height:200px;border:2px dashed var(--border-medium);border-radius:var(--radius);display:flex;align-items:center;justify-content:center;cursor:pointer;transition:all .2s;background:var(--background-secondary)}.cover-upload-area[_ngcontent-%COMP%]:hover{border-color:var(--primary);background:#1a89170d}.upload-content[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;gap:.5rem;color:var(--text-secondary)}.upload-content[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{width:32px;height:32px}.add-cover-btn[_ngcontent-%COMP%]{display:inline-flex;align-items:center;gap:.5rem;padding:.75rem 1rem;border:1px solid var(--border-medium);background:var(--background);border-radius:var(--radius);color:var(--text-secondary);font-size:.9rem;cursor:pointer;margin-bottom:2rem;transition:all .2s}.add-cover-btn[_ngcontent-%COMP%]:hover{border-color:var(--primary);color:var(--primary)}.title-container[_ngcontent-%COMP%]{margin-bottom:1rem}.title-input[_ngcontent-%COMP%]{width:100%;font-family:var(--font-serif);font-size:2.5rem;font-weight:700;line-height:1.2;color:var(--text-primary);border:none;outline:none;background:transparent;resize:none;overflow:hidden}.title-input[_ngcontent-%COMP%]::placeholder{color:var(--text-muted)}.subtitle-container[_ngcontent-%COMP%]{margin-bottom:2rem}.subtitle-input[_ngcontent-%COMP%]{width:100%;font-family:var(--font-serif);font-size:1.4rem;font-weight:400;line-height:1.4;color:var(--text-secondary);border:none;outline:none;background:transparent;resize:none;overflow:hidden}.subtitle-input[_ngcontent-%COMP%]::placeholder{color:var(--text-muted)}.editor-toolbar[_ngcontent-%COMP%]{position:fixed;display:flex;align-items:center;background:var(--text-primary);border-radius:6px;padding:.5rem;box-shadow:var(--shadow-heavy);opacity:0;visibility:hidden;transition:all .2s;z-index:1000;pointer-events:none;user-select:none;-webkit-user-select:none;-webkit-touch-callout:none;-webkit-tap-highlight-color:transparent}.editor-toolbar.visible[_ngcontent-%COMP%]{opacity:1;visibility:visible;pointer-events:auto}.toolbar-group[_ngcontent-%COMP%]{display:flex}.toolbar-divider[_ngcontent-%COMP%]{width:1px;height:24px;background:#fff3;margin:0 .5rem}.editor-toolbar[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;width:32px;height:32px;border:none;background:none;color:#fff;border-radius:4px;cursor:pointer;transition:background .2s;position:relative}.editor-toolbar[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover, .editor-toolbar[_ngcontent-%COMP%]   button.active[_ngcontent-%COMP%]{background:#fff3}.content-editor[_ngcontent-%COMP%]{font-family:var(--font-serif);font-size:1.25rem;line-height:1.6;color:var(--text-primary);min-height:300px;padding:1rem 0;outline:none;position:relative}.content-editor[_ngcontent-%COMP%]:empty:before{content:"";position:absolute;top:1rem;left:0;right:0;pointer-events:none}.editor-placeholder[_ngcontent-%COMP%]{position:absolute;top:1rem;left:0;right:0;font-family:var(--font-serif);font-size:1.25rem;color:var(--text-muted);pointer-events:none;font-style:italic;z-index:1}.content-editor[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%], .content-editor[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-weight:700;margin:2rem 0 1rem;line-height:1.2}.content-editor[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:2rem}.content-editor[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:1.6rem}.content-editor[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin-bottom:1rem}.content-editor[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%], .content-editor[_ngcontent-%COMP%]   ol[_ngcontent-%COMP%]{margin-bottom:1rem;padding-left:2rem}.content-editor[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{margin-bottom:.5rem}.content-editor.rtl[_ngcontent-%COMP%]{direction:rtl;text-align:right}.writing-stats[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5rem;margin-top:2rem;padding-top:2rem;border-top:1px solid var(--border-light);font-size:.9rem;color:var(--text-secondary)}.stat-divider[_ngcontent-%COMP%]{color:var(--text-muted)}.btn-primary[_ngcontent-%COMP%]{background:#f7a600;color:#fff;border:none;padding:.75rem 1.5rem;border-radius:var(--radius);font-weight:600;cursor:pointer;transition:background .2s;text-decoration:none;display:inline-block;text-align:center}.btn-primary[_ngcontent-%COMP%]:hover:not(:disabled){background:#f7c843}.btn-outline[_ngcontent-%COMP%]{background:transparent;color:#f7c843;border:1px solid #f7c843;padding:.75rem 1.5rem;border-radius:var(--radius);font-weight:600;cursor:pointer;transition:all .2s;text-decoration:none;display:inline-block;text-align:center}.btn-outline[_ngcontent-%COMP%]:hover:not(:disabled){background:#f7a600;color:#fff}.btn-ghost[_ngcontent-%COMP%]{background:none;color:var(--text-secondary);border:none;padding:.75rem 1rem;border-radius:var(--radius);cursor:pointer;transition:all .2s;font-weight:500}.btn-ghost[_ngcontent-%COMP%]:hover:not(:disabled){background:var(--background-secondary);color:var(--text-primary)}.btn-ghost.saving[_ngcontent-%COMP%]{color:var(--primary)}.btn-publish[_ngcontent-%COMP%]{background:#f7c843;color:#fff;border:none;padding:.75rem 1.5rem;border-radius:24px;font-weight:600;cursor:pointer;transition:background .2s}.btn-publish[_ngcontent-%COMP%]:hover:not(:disabled){background:#f7a600}.btn-primary[_ngcontent-%COMP%]:disabled, .btn-outline[_ngcontent-%COMP%]:disabled, .btn-ghost[_ngcontent-%COMP%]:disabled, .btn-publish[_ngcontent-%COMP%]:disabled{opacity:.6;cursor:not-allowed}.modal-overlay[_ngcontent-%COMP%]{position:fixed;inset:0;background:#00000080;display:flex;align-items:center;justify-content:center;z-index:2000;padding:2rem}.publish-modal[_ngcontent-%COMP%]{background:#fff;border-radius:12px;box-shadow:var(--shadow-heavy);max-width:600px;width:100%;max-height:90vh;overflow-y:auto;animation:_ngcontent-%COMP%_modalSlideUp .3s ease-out}@keyframes _ngcontent-%COMP%_modalSlideUp{0%{opacity:0;transform:translateY(20px)}to{opacity:1;transform:translateY(0)}}.modal-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:1.5rem 2rem;border-bottom:1px solid var(--border-light)}.modal-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:0;font-size:1.5rem;font-weight:600}.modal-close[_ngcontent-%COMP%]{border:none;background:none;font-size:1.5rem;cursor:pointer;color:var(--text-secondary);padding:0;width:32px;height:32px;border-radius:50%;display:flex;align-items:center;justify-content:center;transition:background .2s}.modal-close[_ngcontent-%COMP%]:hover{background:var(--background-secondary)}.modal-content[_ngcontent-%COMP%]{padding:2rem}.modal-actions[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;gap:1rem;padding:1.5rem 2rem;border-top:1px solid var(--border-light)}.story-preview[_ngcontent-%COMP%]{margin-bottom:2rem;padding:1.5rem;background:var(--background-secondary);border-radius:var(--radius)}.preview-cover[_ngcontent-%COMP%]{margin-bottom:1rem;border-radius:var(--radius);overflow:hidden}.preview-cover[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;height:200px;object-fit:cover}.preview-title[_ngcontent-%COMP%]{font-size:1.8rem;font-weight:700;margin-bottom:.5rem;color:var(--text-primary)}.preview-subtitle[_ngcontent-%COMP%]{font-size:1.1rem;color:var(--text-secondary);margin-bottom:1rem}.preview-meta[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;font-size:.9rem;color:var(--text-secondary)}.author-info[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5rem}.author-avatar[_ngcontent-%COMP%]{width:24px;height:24px;border-radius:50%;object-fit:cover}.publish-options[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:1.5rem}.form-group[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:.5rem}.form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-weight:600;color:var(--text-primary);font-size:.9rem}.form-row[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 1fr;gap:1rem}.select-input[_ngcontent-%COMP%]{padding:.75rem 2.5rem .75rem .75rem;border:1px solid var(--border-medium);border-radius:var(--radius);background:#fff;font-size:1rem;outline:none;transition:border-color .2s;appearance:none;background-image:url("data:image/svg+xml;charset=UTF-8,%3csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='none' stroke='currentColor' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'%3e%3cpolyline points='6,9 12,15 18,9'%3e%3c/polyline%3e%3c/svg%3e");background-repeat:no-repeat;background-position:right .75rem center;background-size:16px}.select-input[_ngcontent-%COMP%]:focus{border-color:var(--primary);box-shadow:0 0 0 3px #1a89171a}.emoji-container[_ngcontent-%COMP%]{position:relative}.emoji-input[_ngcontent-%COMP%]{padding:.75rem;border:1px solid var(--border-medium);border-radius:var(--radius);background:#fff;font-size:1.5rem;text-align:center;outline:none;transition:border-color .2s;width:100%}.emoji-input[_ngcontent-%COMP%]:focus{border-color:var(--primary);box-shadow:0 0 0 3px #1a89171a}.emoji-suggestions[_ngcontent-%COMP%]{position:absolute;top:100%;left:0;right:0;background:#fff;border:1px solid var(--border-medium);border-radius:var(--radius);box-shadow:var(--shadow-medium);max-height:200px;overflow-y:auto;z-index:10;display:grid;grid-template-columns:repeat(6,1fr);gap:.25rem;padding:.5rem;margin-top:.25rem}.emoji-option[_ngcontent-%COMP%]{border:none;background:none;font-size:1.2rem;padding:.5rem;cursor:pointer;border-radius:4px;transition:background .2s;aspect-ratio:1;display:flex;align-items:center;justify-content:center}.emoji-option[_ngcontent-%COMP%]:hover{background:var(--background-secondary)}.tags-section[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:.75rem}.selected-tags[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:.5rem}.tag-chip[_ngcontent-%COMP%]{display:inline-flex;align-items:center;background:var(--background-secondary);color:var(--text-primary);padding:.375rem .75rem;border-radius:16px;font-size:.85rem;gap:.375rem;border:1px solid var(--border-light)}.tag-remove[_ngcontent-%COMP%]{border:none;background:none;color:var(--text-secondary);cursor:pointer;font-size:1rem;padding:0;line-height:1;width:16px;height:16px;border-radius:50%;display:flex;align-items:center;justify-content:center;transition:all .2s}.tag-remove[_ngcontent-%COMP%]:hover{background:var(--border-medium);color:var(--text-primary)}.tags-input[_ngcontent-%COMP%]{padding:.75rem;border:1px solid var(--border-medium);border-radius:var(--radius);background:#fff;font-size:1rem;outline:none;transition:border-color .2s}.tags-input[_ngcontent-%COMP%]:focus{border-color:var(--primary);box-shadow:0 0 0 3px #1a89171a}.toast[_ngcontent-%COMP%]{position:fixed;bottom:2rem;right:2rem;display:flex;align-items:center;gap:.75rem;padding:1rem 1.5rem;border-radius:var(--radius);font-weight:500;box-shadow:var(--shadow-medium);transform:translate(400px);transition:transform .3s ease-out;z-index:3000;max-width:400px}.toast.visible[_ngcontent-%COMP%]{transform:translate(0)}.error-toast[_ngcontent-%COMP%]{background:#fef2f2;color:#dc2626;border:1px solid #fecaca}.success-toast[_ngcontent-%COMP%]{background:#f0fdf4;color:#16a34a;border:1px solid #bbf7d0}@media (max-width: 768px){.top-bar[_ngcontent-%COMP%]{padding:.75rem 1rem}.main-content[_ngcontent-%COMP%]{padding:1rem}.title-input[_ngcontent-%COMP%]{font-size:2rem}.subtitle-input[_ngcontent-%COMP%]{font-size:1.2rem}.content-editor[_ngcontent-%COMP%]{font-family:var(--font-serif);font-size:1.25rem;line-height:1.6;color:var(--text-primary);min-height:300px;padding:1rem 0;outline:none;position:relative}.modal-overlay[_ngcontent-%COMP%]{padding:1rem}.modal-content[_ngcontent-%COMP%], .modal-header[_ngcontent-%COMP%], .modal-actions[_ngcontent-%COMP%]{padding-left:1rem;padding-right:1rem}.form-row[_ngcontent-%COMP%]{grid-template-columns:1fr}.cover-image[_ngcontent-%COMP%]{height:200px}.toast[_ngcontent-%COMP%]{bottom:1rem;right:1rem;left:1rem;max-width:none}}@media (max-width: 480px){.top-bar-left[_ngcontent-%COMP%]   .logo-text[_ngcontent-%COMP%]{display:none}.title-input[_ngcontent-%COMP%]{font-size:1.75rem}.editor-toolbar[_ngcontent-%COMP%]{position:fixed;bottom:10rem;left:50%;transform:translate(-50%);top:auto;margin:0;width:90%;justify-content:center;opacity:1;visibility:visible;pointer-events:auto;background:var(--background-secondary);box-shadow:var(--shadow-medium);border:1px solid var(--border-light)}.editor-toolbar[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{color:var(--text-primary);width:44px;height:44px}.editor-toolbar[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover, .editor-toolbar[_ngcontent-%COMP%]   button.active[_ngcontent-%COMP%]{background:var(--border-light)}.toolbar-divider[_ngcontent-%COMP%]{background:var(--border-medium);height:32px;margin:0 .25rem}.content-editor[_ngcontent-%COMP%]{margin-bottom:4rem}}.content-editor[_ngcontent-%COMP%]{-webkit-user-select:auto;-webkit-touch-callout:default;-webkit-tap-highlight-color:rgba(0,0,0,.1)}@media (max-width: 768px){.btn-ghost[_ngcontent-%COMP%], .btn-publish[_ngcontent-%COMP%]{padding:.875rem 1.25rem;min-height:44px}.toolbar-group[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{min-width:44px;min-height:44px}.editor-toolbar[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover, .editor-toolbar[_ngcontent-%COMP%]   button.active[_ngcontent-%COMP%]{background:var(--border-light)}}`]})};function hG(n,e){if(n&1&&(h(0,"span",19),y(1),p()),n&2){let t=S();v(),K(t.unreadCount)}}function pG(n,e){if(n&1){let t=te();h(0,"button",20),$("click",function(){V(t);let i=S();return U(i.markAllAsRead())}),y(1," Mark all read "),p()}}function gG(n,e){n&1&&(h(0,"div",21),q(1,"div",22),h(2,"p"),y(3,"Loading notifications..."),p()())}function mG(n,e){n&1&&(h(0,"div",35),q(1,"div",36),p())}function vG(n,e){if(n&1){let t=te();h(0,"div",25),$("click",function(){let i=V(t).$implicit,o=S(2);return U(o.onNotificationClick(i))}),h(1,"div",26)(2,"span"),y(3),p()(),h(4,"div",27)(5,"div",28),y(6),p(),h(7,"div",29),y(8),p(),h(9,"div",30),y(10),p()(),B(11,mG,2,0,"div",31),h(12,"div",32),ce(),h(13,"svg",33),q(14,"path",34),p()()()}if(n&2){let t=e.$implicit,r=S(2);he("unread",!t.isRead)("read",t.isRead),v(),C("ngClass","icon-"+t.type),v(2),K(r.getNotificationIcon(t.type)),v(3),K(t.title),v(2),K(t.message),v(2),K(r.getTimeAgo(t.createdAt)),v(),C("ngIf",!t.isRead)}}function _G(n,e){if(n&1&&(h(0,"div",23),B(1,vG,15,10,"div",24),p()),n&2){let t=S();v(),C("ngForOf",t.filteredNotifications)("ngForTrackBy",t.trackByNotificationId)}}function yG(n,e){n&1&&(h(0,"span"),y(1,"\u{1F514}"),p())}function bG(n,e){n&1&&(h(0,"span"),y(1,"\u2705"),p())}function wG(n,e){n&1&&(h(0,"span"),y(1,"No notifications yet"),p())}function EG(n,e){n&1&&(h(0,"span"),y(1,"All caught up!"),p())}function CG(n,e){n&1&&(h(0,"span"),y(1," When you get likes, comments, or follows, they'll appear here. "),p())}function IG(n,e){n&1&&(h(0,"span"),y(1," You've read all your notifications. Great job staying updated! "),p())}function SG(n,e){n&1&&(h(0,"a",43),y(1," Explore Stories "),p())}function TG(n,e){if(n&1){let t=te();h(0,"button",44),$("click",function(){V(t);let i=S(2);return U(i.setFilter("all"))}),y(1," View All Notifications "),p()}}function DG(n,e){if(n&1&&(h(0,"div",37)(1,"div",38),B(2,yG,2,0,"span",18)(3,bG,2,0,"span",18),p(),h(4,"h3",39),B(5,wG,2,0,"span",18)(6,EG,2,0,"span",18),p(),h(7,"p",40),B(8,CG,2,0,"span",18)(9,IG,2,0,"span",18),p(),B(10,SG,2,0,"a",41)(11,TG,2,0,"button",42),p()),n&2){let t=S();v(2),C("ngIf",t.selectedFilter==="all"),v(),C("ngIf",t.selectedFilter==="unread"),v(2),C("ngIf",t.selectedFilter==="all"),v(),C("ngIf",t.selectedFilter==="unread"),v(2),C("ngIf",t.selectedFilter==="all"),v(),C("ngIf",t.selectedFilter==="unread"),v(),C("ngIf",t.selectedFilter==="all"),v(),C("ngIf",t.selectedFilter==="unread")}}function xG(n,e){if(n&1&&(Qh(0),y(1),Zh()),n&2){let t=S();v(),ie(" ",t.trackByNotificationId(0,t.notifications[0]),`
`)}}var Vm=class n{constructor(e,t,r){this.notificationService=e;this.authService=t;this.router=r}notifications=[];unreadCount=0;user=null;loading=!0;selectedFilter="all";notificationsSubscription;unreadCountSubscription;userSubscription;ngOnInit(){this.userSubscription=this.authService.user$.subscribe(e=>{this.user=e,e||this.router.navigate(["/login"])}),this.notificationsSubscription=this.notificationService.notifications$.subscribe(e=>{this.notifications=e,this.loading=!1}),this.unreadCountSubscription=this.notificationService.unreadCount$.subscribe(e=>{this.unreadCount=e})}ngOnDestroy(){this.notificationsSubscription&&this.notificationsSubscription.unsubscribe(),this.unreadCountSubscription&&this.unreadCountSubscription.unsubscribe(),this.userSubscription&&this.userSubscription.unsubscribe()}get filteredNotifications(){return this.selectedFilter==="unread"?this.notifications.filter(e=>!e.isRead):this.notifications}markAllAsRead(){return b(this,null,function*(){try{yield this.notificationService.markAllAsRead()}catch(e){console.error("Error marking all notifications as read:",e)}})}markAsRead(e){return b(this,null,function*(){try{yield this.notificationService.markAsRead(e)}catch(t){console.error("Error marking notification as read:",t)}})}onNotificationClick(e){return b(this,null,function*(){e.isRead||(yield this.markAsRead(e.id)),this.navigateFromNotification(e)})}navigateFromNotification(e){switch(e.type){case"like":case"comment":e.data?.storyId&&this.router.navigate(["/story",e.data.storyId]);break;case"follow":e.data?.fromUserId&&this.router.navigate(["/profile",e.data.fromUserId]);break;case"story_published":e.data?.storyId?this.router.navigate(["/story",e.data.storyId]):this.router.navigate(["/my-stories"]);break;default:break}}setFilter(e){this.selectedFilter=e}getTimeAgo(e){let r=Math.floor((new Date().getTime()-e.getTime())/1e3);if(r<60)return"Just now";let i=Math.floor(r/60);if(i<60)return`${i}m ago`;let o=Math.floor(i/60);if(o<24)return`${o}h ago`;let s=Math.floor(o/24);if(s<7)return`${s}d ago`;let a=Math.floor(s/7);if(a<4)return`${a}w ago`;let l=Math.floor(s/30);return l<12?`${l}mo ago`:`${Math.floor(s/365)}y ago`}getNotificationIcon(e){switch(e){case"like":return"\u2764\uFE0F";case"comment":return"\u{1F4AC}";case"follow":return"\u{1F464}";case"story_published":return"\u2705";default:return"\u{1F514}"}}goBack(){window.history.back()}trackByNotificationId(e,t){return t.id}static \u0275fac=function(t){return new(t||n)(ee(ur),ee(it),ee(Ve))};static \u0275cmp=Xe({type:n,selectors:[["app-notifications"]],decls:28,vars:12,consts:[[1,"notifications-header"],[1,"header-content"],[1,"back-btn",3,"click"],["width","24","height","24","viewBox","0 0 24 24","fill","none","xmlns","http://www.w3.org/2000/svg"],["d","M19 12H5","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round"],["d","M12 19L5 12L12 5","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round"],[1,"back-text"],[1,"page-title"],[1,"title-icon"],["class","unread-badge",4,"ngIf"],["class","mark-all-read-btn",3,"click",4,"ngIf"],[1,"filter-tabs"],[1,"filter-tab",3,"click"],[1,"tab-count"],[1,"notifications-container"],["class","loading-state",4,"ngIf"],["class","notifications-list",4,"ngIf"],["class","empty-state",4,"ngIf"],[4,"ngIf"],[1,"unread-badge"],[1,"mark-all-read-btn",3,"click"],[1,"loading-state"],[1,"loading-spinner"],[1,"notifications-list"],["class","notification-item",3,"unread","read","click",4,"ngFor","ngForOf","ngForTrackBy"],[1,"notification-item",3,"click"],[1,"notification-icon",3,"ngClass"],[1,"notification-content"],[1,"notification-title"],[1,"notification-message"],[1,"notification-time"],["class","notification-status",4,"ngIf"],[1,"notification-arrow"],["width","16","height","16","viewBox","0 0 24 24","fill","none","xmlns","http://www.w3.org/2000/svg"],["d","M9 18L15 12L9 6","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round"],[1,"notification-status"],[1,"unread-dot"],[1,"empty-state"],[1,"empty-icon"],[1,"empty-title"],[1,"empty-description"],["routerLink","/stories","class","cta-button",4,"ngIf"],["class","cta-button secondary",3,"click",4,"ngIf"],["routerLink","/stories",1,"cta-button"],[1,"cta-button","secondary",3,"click"]],template:function(t,r){t&1&&(h(0,"div",0)(1,"div",1)(2,"button",2),$("click",function(){return r.goBack()}),ce(),h(3,"svg",3),q(4,"path",4)(5,"path",5),p(),Pe(),h(6,"span",6),y(7,"Back"),p()(),h(8,"h1",7)(9,"span",8),y(10,"\u{1F514}"),p(),y(11," Notifications "),B(12,hG,2,1,"span",9),p(),B(13,pG,2,0,"button",10),p()(),h(14,"div",11)(15,"button",12),$("click",function(){return r.setFilter("all")}),y(16," All "),h(17,"span",13),y(18),p()(),h(19,"button",12),$("click",function(){return r.setFilter("unread")}),y(20," Unread "),h(21,"span",13),y(22),p()()(),h(23,"div",14),B(24,gG,4,0,"div",15)(25,_G,2,2,"div",16)(26,DG,12,8,"div",17),p(),B(27,xG,2,1,"ng-container",18)),t&2&&(v(12),C("ngIf",r.unreadCount>0),v(),C("ngIf",r.unreadCount>0),v(2),he("active",r.selectedFilter==="all"),v(3),ie("(",r.notifications.length,")"),v(),he("active",r.selectedFilter==="unread"),v(3),ie("(",r.unreadCount,")"),v(2),C("ngIf",r.loading),v(),C("ngIf",!r.loading&&r.filteredNotifications.length>0),v(),C("ngIf",!r.loading&&r.filteredNotifications.length===0),v(),C("ngIf",!1))},dependencies:[Sn,Ms,In,Rn,xr,on],styles:["[_nghost-%COMP%]{--main-color: #ffc107;--text-dark: #2c3e50;--border-color: #e9ecef;--hover-bg: #f8f9fa;--unread-bg: #fff8e1;--unread-dot: #2196f3;--card-shadow: 0 2px 4px rgba(0,0,0,.1);--success-color: #4caf50;--danger-color: #f44336}.notifications-header[_ngcontent-%COMP%]{position:sticky;top:0;background:#fff;border-bottom:1px solid var(--border-color);z-index:100;box-shadow:0 2px 4px #0000000d}.notifications-header[_ngcontent-%COMP%]   .header-content[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;padding:1rem 2rem;max-width:1200px;margin:0 auto}@media (max-width: 768px){.notifications-header[_ngcontent-%COMP%]   .header-content[_ngcontent-%COMP%]{padding:1rem}}.back-btn[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5rem;background:none;border:none;color:var(--text-dark);cursor:pointer;padding:.5rem;border-radius:8px;transition:all .3s ease;font-size:.9rem}.back-btn[_ngcontent-%COMP%]:hover{background:var(--hover-bg);color:var(--main-color)}@media (max-width: 480px){.back-btn[_ngcontent-%COMP%]   .back-text[_ngcontent-%COMP%]{display:none}}.page-title[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5rem;font-size:1.5rem;font-weight:700;color:var(--text-dark);margin:0}@media (max-width: 480px){.page-title[_ngcontent-%COMP%]{font-size:1.2rem}}.page-title[_ngcontent-%COMP%]   .title-icon[_ngcontent-%COMP%]{font-size:1.2rem}.page-title[_ngcontent-%COMP%]   .unread-badge[_ngcontent-%COMP%]{background:var(--danger-color);color:#fff;font-size:.7rem;padding:.2rem .5rem;border-radius:12px;font-weight:600;min-width:20px;text-align:center}.mark-all-read-btn[_ngcontent-%COMP%]{background:var(--main-color);color:var(--text-dark);border:none;padding:.6rem 1rem;border-radius:8px;font-weight:600;cursor:pointer;transition:all .3s ease;font-size:.85rem}.mark-all-read-btn[_ngcontent-%COMP%]:hover{background:#e0a800;transform:translateY(-1px)}@media (max-width: 480px){.mark-all-read-btn[_ngcontent-%COMP%]{padding:.5rem .8rem;font-size:.8rem}}.filter-tabs[_ngcontent-%COMP%]{display:flex;background:#fff;border-bottom:1px solid var(--border-color);padding:0 2rem;max-width:1200px;margin:0 auto}@media (max-width: 768px){.filter-tabs[_ngcontent-%COMP%]{padding:0 1rem}}.filter-tab[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5rem;background:none;border:none;padding:1rem 1.5rem;cursor:pointer;color:#666;font-weight:500;border-bottom:3px solid transparent;transition:all .3s ease}.filter-tab[_ngcontent-%COMP%]:hover{color:var(--main-color);background:var(--hover-bg)}.filter-tab.active[_ngcontent-%COMP%]{color:var(--main-color);border-bottom-color:var(--main-color);font-weight:600}.filter-tab[_ngcontent-%COMP%]   .tab-count[_ngcontent-%COMP%]{font-size:.8rem;color:#999}@media (max-width: 480px){.filter-tab[_ngcontent-%COMP%]{padding:.8rem 1rem;font-size:.9rem}}.notifications-container[_ngcontent-%COMP%]{max-width:1200px;margin:0 auto;padding:2rem;min-height:calc(100vh - 180px)}@media (max-width: 768px){.notifications-container[_ngcontent-%COMP%]{padding:1rem;min-height:calc(100vh - 160px)}}.loading-state[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;padding:4rem 2rem;text-align:center;color:#666}.loading-state[_ngcontent-%COMP%]   .loading-spinner[_ngcontent-%COMP%]{width:40px;height:40px;border:3px solid #f3f3f3;border-top:3px solid var(--main-color);border-radius:50%;animation:_ngcontent-%COMP%_spin 1s linear infinite;margin-bottom:1rem}.loading-state[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;font-size:.9rem}@keyframes _ngcontent-%COMP%_spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}.notifications-list[_ngcontent-%COMP%]{background:#fff;border-radius:12px;border:1px solid var(--border-color);overflow:hidden;box-shadow:var(--card-shadow)}.notification-item[_ngcontent-%COMP%]{display:flex;align-items:flex-start;gap:1rem;padding:1.25rem;border-bottom:1px solid #f0f0f0;cursor:pointer;transition:all .3s ease;position:relative}.notification-item[_ngcontent-%COMP%]:last-child{border-bottom:none}.notification-item[_ngcontent-%COMP%]:hover{background:var(--hover-bg);transform:translateY(-1px)}.notification-item.unread[_ngcontent-%COMP%]{background:var(--unread-bg);border-left:4px solid var(--main-color)}.notification-item.unread[_ngcontent-%COMP%]:hover{background:#fff3c4}.notification-item.read[_ngcontent-%COMP%]{opacity:.8}@media (max-width: 480px){.notification-item[_ngcontent-%COMP%]{gap:.8rem;padding:1rem}}.notification-icon[_ngcontent-%COMP%]{width:48px;height:48px;border-radius:50%;background:#f5f5f5;display:flex;align-items:center;justify-content:center;font-size:1.5rem;flex-shrink:0}.notification-icon.icon-like[_ngcontent-%COMP%]{background:#ffe8e8}.notification-icon.icon-comment[_ngcontent-%COMP%]{background:#e8f4fd}.notification-icon.icon-follow[_ngcontent-%COMP%]{background:#f0f8ff}.notification-icon.icon-story_published[_ngcontent-%COMP%]{background:#e8f5e8}@media (max-width: 480px){.notification-icon[_ngcontent-%COMP%]{width:40px;height:40px;font-size:1.2rem}}.notification-content[_ngcontent-%COMP%]{flex:1;min-width:0}.notification-content[_ngcontent-%COMP%]   .notification-title[_ngcontent-%COMP%]{font-weight:600;color:var(--text-dark);margin-bottom:.5rem;line-height:1.4}@media (max-width: 480px){.notification-content[_ngcontent-%COMP%]   .notification-title[_ngcontent-%COMP%]{font-size:.9rem}}.notification-content[_ngcontent-%COMP%]   .notification-message[_ngcontent-%COMP%]{color:#666;font-size:.9rem;line-height:1.4;margin-bottom:.5rem}@media (max-width: 480px){.notification-content[_ngcontent-%COMP%]   .notification-message[_ngcontent-%COMP%]{font-size:.85rem}}.notification-content[_ngcontent-%COMP%]   .notification-time[_ngcontent-%COMP%]{color:#999;font-size:.8rem;font-weight:500}.notification-status[_ngcontent-%COMP%]{flex-shrink:0}.notification-status[_ngcontent-%COMP%]   .unread-dot[_ngcontent-%COMP%]{width:8px;height:8px;background:var(--unread-dot);border-radius:50%;box-shadow:0 0 0 3px #2196f333}.notification-arrow[_ngcontent-%COMP%]{color:#ccc;flex-shrink:0;margin-left:auto}@media (max-width: 480px){.notification-arrow[_ngcontent-%COMP%]{display:none}}.empty-state[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;text-align:center;padding:4rem 2rem;background:#fff;border-radius:12px;border:1px solid var(--border-color);box-shadow:var(--card-shadow)}.empty-state[_ngcontent-%COMP%]   .empty-icon[_ngcontent-%COMP%]{font-size:4rem;margin-bottom:1.5rem;opacity:.7}.empty-state[_ngcontent-%COMP%]   .empty-title[_ngcontent-%COMP%]{color:var(--text-dark);font-size:1.5rem;font-weight:600;margin-bottom:.8rem}@media (max-width: 480px){.empty-state[_ngcontent-%COMP%]   .empty-title[_ngcontent-%COMP%]{font-size:1.3rem}}.empty-state[_ngcontent-%COMP%]   .empty-description[_ngcontent-%COMP%]{color:#666;font-size:1rem;line-height:1.6;max-width:400px;margin-bottom:2rem}@media (max-width: 480px){.empty-state[_ngcontent-%COMP%]   .empty-description[_ngcontent-%COMP%]{font-size:.9rem}}.cta-button[_ngcontent-%COMP%]{display:inline-flex;align-items:center;gap:.5rem;background:var(--main-color);color:var(--text-dark);text-decoration:none;padding:.8rem 1.5rem;border-radius:8px;font-weight:600;transition:all .3s ease;border:none;cursor:pointer;font-size:.9rem}.cta-button[_ngcontent-%COMP%]:hover{background:#e0a800;transform:translateY(-2px);box-shadow:0 4px 12px #ffc1074d}.cta-button.secondary[_ngcontent-%COMP%]{background:#f8f9fa;color:#666;border:1px solid var(--border-color)}.cta-button.secondary[_ngcontent-%COMP%]:hover{background:#e9ecef;transform:translateY(-2px);box-shadow:0 4px 12px #0000001a}@media (max-width: 768px){.notifications-header[_ngcontent-%COMP%]   .header-content[_ngcontent-%COMP%]{gap:1rem}.page-title[_ngcontent-%COMP%]{flex:1;justify-content:center}.mark-all-read-btn[_ngcontent-%COMP%]{position:absolute;right:1rem}}@media (max-width: 768px){.notifications-container[_ngcontent-%COMP%]{padding-bottom:100px}}"]})};var Um=()=>{let n=k(it),e=k(Ve);return n.user?!0:(e.navigate(["/login"]),!1)};var AI=()=>{let n=k(it),e=k(Ve);return n.user$.pipe(Mt(t=>t!==void 0),hr(1),Ce(t=>t?e.createUrlTree(["/stories"]):!0))};var I2=[{path:"",component:Rd,title:"Stories - Unposted"},{path:"stories",component:Rd,title:"Stories - Unposted"},{path:"story/:id",component:Fd,title:"Story - Unposted"},{path:"story",component:Fd,title:"Story - Unposted"},{path:"article",redirectTo:"/stories",pathMatch:"full"},{path:"about",component:Rm,title:"About - Unposted"},{path:"notifications",component:Vm,canActivate:[Um],title:"Notifications - Unposted"},{path:"write",component:Lm,title:"Write - Unposted"},{path:"profile",component:Nd,canActivate:[Um],title:"Profile - Unposted"},{path:"profile/:id",component:Nd,canActivate:[Um],title:"Profile - Unposted"},{path:"login",component:Nm,canActivate:[AI],title:"Login - Unposted"},{path:"register",component:Fm,canActivate:[AI],title:"Register - Unposted"},{path:"**",redirectTo:"/stories"}];var D2="@firebase/installations",NI="0.6.18";var x2=1e4,M2=`w:${NI}`,P2="FIS_v2",MG="https://firebaseinstallations.googleapis.com/v1",PG=3600*1e3,AG="installations",kG="Installations";var OG={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."},da=new mn(AG,kG,OG);function A2(n){return n instanceof Wt&&n.code.includes("request-failed")}function k2({projectId:n}){return`${MG}/projects/${n}/installations`}function O2(n){return{token:n.token,requestStatus:2,expiresIn:NG(n.expiresIn),creationTime:Date.now()}}function R2(n,e){return b(this,null,function*(){let r=(yield e.json()).error;return da.create("request-failed",{requestName:n,serverCode:r.code,serverMessage:r.message,serverStatus:r.status})})}function N2({apiKey:n}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":n})}function RG(n,{refreshToken:e}){let t=N2(n);return t.append("Authorization",FG(e)),t}function F2(n){return b(this,null,function*(){let e=yield n();return e.status>=500&&e.status<600?n():e})}function NG(n){return Number(n.replace("s","000"))}function FG(n){return`${P2} ${n}`}function LG(r,i){return b(this,arguments,function*({appConfig:n,heartbeatServiceProvider:e},{fid:t}){let o=k2(n),s=N2(n),a=e.getImmediate({optional:!0});if(a){let m=yield a.getHeartbeatsHeader();m&&s.append("x-firebase-client",m)}let l={fid:t,authVersion:P2,appId:n.appId,sdkVersion:M2},u={method:"POST",headers:s,body:JSON.stringify(l)},f=yield F2(()=>fetch(o,u));if(f.ok){let m=yield f.json();return{fid:m.fid||t,registrationStatus:2,refreshToken:m.refreshToken,authToken:O2(m.authToken)}}else throw yield R2("Create Installation",f)})}function L2(n){return new Promise(e=>{setTimeout(e,n)})}function VG(n){return btoa(String.fromCharCode(...n)).replace(/\+/g,"-").replace(/\//g,"_")}var UG=/^[cdef][\w-]{21}$/,RI="";function jG(){try{let n=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(n),n[0]=112+n[0]%16;let t=BG(n);return UG.test(t)?t:RI}catch{return RI}}function BG(n){return VG(n).substr(0,22)}function Bm(n){return`${n.appName}!${n.appId}`}var V2=new Map;function U2(n,e){let t=Bm(n);j2(t,e),$G(t,e)}function j2(n,e){let t=V2.get(n);if(t)for(let r of t)r(e)}function $G(n,e){let t=HG();t&&t.postMessage({key:n,fid:e}),zG()}var ua=null;function HG(){return!ua&&"BroadcastChannel"in self&&(ua=new BroadcastChannel("[Firebase] FID Change"),ua.onmessage=n=>{j2(n.data.key,n.data.fid)}),ua}function zG(){V2.size===0&&ua&&(ua.close(),ua=null)}var qG="firebase-installations-database",WG=1,fa="firebase-installations-store",kI=null;function FI(){return kI||(kI=Gp(qG,WG,{upgrade:(n,e)=>{switch(e){case 0:n.createObjectStore(fa)}}})),kI}function jm(n,e){return b(this,null,function*(){let t=Bm(n),i=(yield FI()).transaction(fa,"readwrite"),o=i.objectStore(fa),s=yield o.get(t);return yield o.put(e,t),yield i.done,(!s||s.fid!==e.fid)&&U2(n,e.fid),e})}function B2(n){return b(this,null,function*(){let e=Bm(n),r=(yield FI()).transaction(fa,"readwrite");yield r.objectStore(fa).delete(e),yield r.done})}function $m(n,e){return b(this,null,function*(){let t=Bm(n),i=(yield FI()).transaction(fa,"readwrite"),o=i.objectStore(fa),s=yield o.get(t),a=e(s);return a===void 0?yield o.delete(t):yield o.put(a,t),yield i.done,a&&(!s||s.fid!==a.fid)&&U2(n,a.fid),a})}function LI(n){return b(this,null,function*(){let e,t=yield $m(n.appConfig,r=>{let i=GG(r),o=KG(n,i);return e=o.registrationPromise,o.installationEntry});return t.fid===RI?{installationEntry:yield e}:{installationEntry:t,registrationPromise:e}})}function GG(n){let e=n||{fid:jG(),registrationStatus:0};return $2(e)}function KG(n,e){if(e.registrationStatus===0){if(!navigator.onLine){let i=Promise.reject(da.create("app-offline"));return{installationEntry:e,registrationPromise:i}}let t={fid:e.fid,registrationStatus:1,registrationTime:Date.now()},r=YG(n,t);return{installationEntry:t,registrationPromise:r}}else return e.registrationStatus===1?{installationEntry:e,registrationPromise:QG(n)}:{installationEntry:e}}function YG(n,e){return b(this,null,function*(){try{let t=yield LG(n,e);return jm(n.appConfig,t)}catch(t){throw A2(t)&&t.customData.serverCode===409?yield B2(n.appConfig):yield jm(n.appConfig,{fid:e.fid,registrationStatus:0}),t}})}function QG(n){return b(this,null,function*(){let e=yield S2(n.appConfig);for(;e.registrationStatus===1;)yield L2(100),e=yield S2(n.appConfig);if(e.registrationStatus===0){let{installationEntry:t,registrationPromise:r}=yield LI(n);return r||t}return e})}function S2(n){return $m(n,e=>{if(!e)throw da.create("installation-not-found");return $2(e)})}function $2(n){return ZG(n)?{fid:n.fid,registrationStatus:0}:n}function ZG(n){return n.registrationStatus===1&&n.registrationTime+x2<Date.now()}function XG(r,i){return b(this,arguments,function*({appConfig:n,heartbeatServiceProvider:e},t){let o=JG(n,t),s=RG(n,t),a=e.getImmediate({optional:!0});if(a){let m=yield a.getHeartbeatsHeader();m&&s.append("x-firebase-client",m)}let l={installation:{sdkVersion:M2,appId:n.appId}},u={method:"POST",headers:s,body:JSON.stringify(l)},f=yield F2(()=>fetch(o,u));if(f.ok){let m=yield f.json();return O2(m)}else throw yield R2("Generate Auth Token",f)})}function JG(n,{fid:e}){return`${k2(n)}/${e}/authTokens:generate`}function VI(n,e=!1){return b(this,null,function*(){let t,r=yield $m(n.appConfig,o=>{if(!H2(o))throw da.create("not-registered");let s=o.authToken;if(!e&&nK(s))return o;if(s.requestStatus===1)return t=eK(n,e),o;{if(!navigator.onLine)throw da.create("app-offline");let a=iK(o);return t=tK(n,a),a}});return t?yield t:r.authToken})}function eK(n,e){return b(this,null,function*(){let t=yield T2(n.appConfig);for(;t.authToken.requestStatus===1;)yield L2(100),t=yield T2(n.appConfig);let r=t.authToken;return r.requestStatus===0?VI(n,e):r})}function T2(n){return $m(n,e=>{if(!H2(e))throw da.create("not-registered");let t=e.authToken;return oK(t)?Object.assign(Object.assign({},e),{authToken:{requestStatus:0}}):e})}function tK(n,e){return b(this,null,function*(){try{let t=yield XG(n,e),r=Object.assign(Object.assign({},e),{authToken:t});return yield jm(n.appConfig,r),t}catch(t){if(A2(t)&&(t.customData.serverCode===401||t.customData.serverCode===404))yield B2(n.appConfig);else{let r=Object.assign(Object.assign({},e),{authToken:{requestStatus:0}});yield jm(n.appConfig,r)}throw t}})}function H2(n){return n!==void 0&&n.registrationStatus===2}function nK(n){return n.requestStatus===2&&!rK(n)}function rK(n){let e=Date.now();return e<n.creationTime||n.creationTime+n.expiresIn<e+PG}function iK(n){let e={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},n),{authToken:e})}function oK(n){return n.requestStatus===1&&n.requestTime+x2<Date.now()}function sK(n){return b(this,null,function*(){let e=n,{installationEntry:t,registrationPromise:r}=yield LI(e);return r?r.catch(console.error):VI(e).catch(console.error),t.fid})}function aK(n,e=!1){return b(this,null,function*(){let t=n;return yield cK(t),(yield VI(t,e)).token})}function cK(n){return b(this,null,function*(){let{registrationPromise:e}=yield LI(n);e&&(yield e)})}function lK(n){if(!n||!n.options)throw OI("App Configuration");if(!n.name)throw OI("App Name");let e=["projectId","apiKey","appId"];for(let t of e)if(!n.options[t])throw OI(t);return{appName:n.name,projectId:n.options.projectId,apiKey:n.options.apiKey,appId:n.options.appId}}function OI(n){return da.create("missing-app-config-values",{valueName:n})}var z2="installations",uK="installations-internal",dK=n=>{let e=n.getProvider("app").getImmediate(),t=lK(e),r=rr(e,"heartbeat");return{app:e,appConfig:t,heartbeatServiceProvider:r,_delete:()=>Promise.resolve()}},fK=n=>{let e=n.getProvider("app").getImmediate(),t=rr(e,z2).getImmediate();return{getId:()=>sK(t),getToken:i=>aK(t,i)}};function hK(){Gt(new mt(z2,dK,"PUBLIC")),Gt(new mt(uK,fK,"PRIVATE"))}hK();Re(D2,NI);Re(D2,NI,"esm2017");var Hm="analytics",pK="firebase_id",gK="origin",mK=60*1e3,vK="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",qI="https://www.googletagmanager.com/gtag/js";var yn=new nr("@firebase/analytics");var _K={"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-initialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."},zn=new mn("analytics","Analytics",_K);function yK(n){if(!n.startsWith(qI)){let e=zn.create("invalid-gtag-resource",{gtagURL:n});return yn.warn(e.message),""}return n}function Z2(n){return Promise.all(n.map(e=>e.catch(t=>t)))}function bK(n,e){let t;return window.trustedTypes&&(t=window.trustedTypes.createPolicy(n,e)),t}function wK(n,e){let t=bK("firebase-js-sdk-policy",{createScriptURL:yK}),r=document.createElement("script"),i=`${qI}?l=${n}&id=${e}`;r.src=t?t?.createScriptURL(i):i,r.async=!0,document.head.appendChild(r)}function EK(n){let e=[];return Array.isArray(window[n])?e=window[n]:window[n]=e,e}function CK(n,e,t,r,i,o){return b(this,null,function*(){let s=r[i];try{if(s)yield e[s];else{let l=(yield Z2(t)).find(u=>u.measurementId===i);l&&(yield e[l.appId])}}catch(a){yn.error(a)}n("config",i,o)})}function IK(n,e,t,r,i){return b(this,null,function*(){try{let o=[];if(i&&i.send_to){let s=i.send_to;Array.isArray(s)||(s=[s]);let a=yield Z2(t);for(let l of s){let u=a.find(m=>m.measurementId===l),f=u&&e[u.appId];if(f)o.push(f);else{o=[];break}}}o.length===0&&(o=Object.values(e)),yield Promise.all(o),n("event",r,i||{})}catch(o){yn.error(o)}})}function SK(n,e,t,r){function i(o,...s){return b(this,null,function*(){try{if(o==="event"){let[a,l]=s;yield IK(n,e,t,a,l)}else if(o==="config"){let[a,l]=s;yield CK(n,e,t,r,a,l)}else if(o==="consent"){let[a,l]=s;n("consent",a,l)}else if(o==="get"){let[a,l,u]=s;n("get",a,l,u)}else if(o==="set"){let[a]=s;n("set",a)}else n(o,...s)}catch(a){yn.error(a)}})}return i}function TK(n,e,t,r,i){let o=function(...s){window[r].push(arguments)};return window[i]&&typeof window[i]=="function"&&(o=window[i]),window[i]=SK(o,n,e,t),{gtagCore:o,wrappedGtag:window[i]}}function DK(n){let e=window.document.getElementsByTagName("script");for(let t of Object.values(e))if(t.src&&t.src.includes(qI)&&t.src.includes(n))return t;return null}var xK=30,MK=1e3,jI=class{constructor(e={},t=MK){this.throttleMetadata=e,this.intervalMillis=t}getThrottleMetadata(e){return this.throttleMetadata[e]}setThrottleMetadata(e,t){this.throttleMetadata[e]=t}deleteThrottleMetadata(e){delete this.throttleMetadata[e]}},X2=new jI;function PK(n){return new Headers({Accept:"application/json","x-goog-api-key":n})}function AK(n){return b(this,null,function*(){var e;let{appId:t,apiKey:r}=n,i={method:"GET",headers:PK(r)},o=vK.replace("{app-id}",t),s=yield fetch(o,i);if(s.status!==200&&s.status!==304){let a="";try{let l=yield s.json();!((e=l.error)===null||e===void 0)&&e.message&&(a=l.error.message)}catch{}throw zn.create("config-fetch-failed",{httpStatus:s.status,responseMessage:a})}return s.json()})}function kK(r){return b(this,arguments,function*(n,e=X2,t){let{appId:i,apiKey:o,measurementId:s}=n.options;if(!i)throw zn.create("no-app-id");if(!o){if(s)return{measurementId:s,appId:i};throw zn.create("no-api-key")}let a=e.getThrottleMetadata(i)||{backoffCount:0,throttleEndTimeMillis:Date.now()},l=new BI;return setTimeout(()=>b(null,null,function*(){l.abort()}),t!==void 0?t:mK),J2({appId:i,apiKey:o,measurementId:s},a,l,e)})}function J2(o,s,a){return b(this,arguments,function*(n,{throttleEndTimeMillis:e,backoffCount:t},r,i=X2){var l;let{appId:u,measurementId:f}=n;try{yield OK(r,e)}catch(m){if(f)return yn.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${f} provided in the "measurementId" field in the local Firebase config. [${m?.message}]`),{appId:u,measurementId:f};throw m}try{let m=yield AK(n);return i.deleteThrottleMetadata(u),m}catch(m){let _=m;if(!RK(_)){if(i.deleteThrottleMetadata(u),f)return yn.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${f} provided in the "measurementId" field in the local Firebase config. [${_?.message}]`),{appId:u,measurementId:f};throw m}let E=Number((l=_?.customData)===null||l===void 0?void 0:l.httpStatus)===503?zp(t,i.intervalMillis,xK):zp(t,i.intervalMillis),x={throttleEndTimeMillis:Date.now()+E,backoffCount:t+1};return i.setThrottleMetadata(u,x),yn.debug(`Calling attemptFetch again in ${E} millis`),J2(n,x,r,i)}})}function OK(n,e){return new Promise((t,r)=>{let i=Math.max(e-Date.now(),0),o=setTimeout(t,i);n.addEventListener(()=>{clearTimeout(o),r(zn.create("fetch-throttle",{throttleEndTimeMillis:e}))})})}function RK(n){if(!(n instanceof Wt)||!n.customData)return!1;let e=Number(n.customData.httpStatus);return e===429||e===500||e===503||e===504}var BI=class{constructor(){this.listeners=[]}addEventListener(e){this.listeners.push(e)}abort(){this.listeners.forEach(e=>e())}};var $I;function NK(n,e,t,r,i){return b(this,null,function*(){if(i&&i.global){n("event",t,r);return}else{let o=yield e,s=Object.assign(Object.assign({},r),{send_to:o});n("event",t,s)}})}function FK(n,e,t,r){return b(this,null,function*(){if(r&&r.global)return n("set",{user_id:t}),Promise.resolve();{let i=yield e;n("config",i,{update:!0,user_id:t})}})}var HI;function LK(n){HI=n}function VK(n){$I=n}function UK(){return b(this,null,function*(){if(xo())try{yield ju()}catch(n){return yn.warn(zn.create("indexeddb-unavailable",{errorInfo:n?.toString()}).message),!1}else return yn.warn(zn.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;return!0})}function jK(n,e,t,r,i,o,s){return b(this,null,function*(){var a;let l=kK(n);l.then(E=>{t[E.measurementId]=E.appId,n.options.measurementId&&E.measurementId!==n.options.measurementId&&yn.warn(`The measurement ID in the local Firebase config (${n.options.measurementId}) does not match the measurement ID fetched from the server (${E.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(E=>yn.error(E)),e.push(l);let u=UK().then(E=>{if(E)return r.getId()}),[f,m]=yield Promise.all([l,u]);DK(o)||wK(o,f.measurementId),HI&&(i("consent","default",HI),LK(void 0)),i("js",new Date);let _=(a=s?.config)!==null&&a!==void 0?a:{};return _[gK]="firebase",_.update=!0,m!=null&&(_[pK]=m),i("config",f.measurementId,_),$I&&(i("set",$I),VK(void 0)),f.measurementId})}var zI=class{constructor(e){this.app=e}_delete(){return delete nl[this.app.options.appId],Promise.resolve()}},nl={},q2=[],W2={},UI="dataLayer",BK="gtag",G2,WI,K2=!1;function $K(){let n=[];if(Uu()&&n.push("This is a browser extension environment."),zb()||n.push("Cookies are not available."),n.length>0){let e=n.map((r,i)=>`(${i+1}) ${r}`).join(" "),t=zn.create("invalid-analytics-context",{errorInfo:e});yn.warn(t.message)}}function HK(n,e,t){$K();let r=n.options.appId;if(!r)throw zn.create("no-app-id");if(!n.options.apiKey)if(n.options.measurementId)yn.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${n.options.measurementId} provided in the "measurementId" field in the local Firebase config.`);else throw zn.create("no-api-key");if(nl[r]!=null)throw zn.create("already-exists",{id:r});if(!K2){EK(UI);let{wrappedGtag:o,gtagCore:s}=TK(nl,q2,W2,UI,BK);WI=o,G2=s,K2=!0}return nl[r]=jK(n,q2,W2,e,G2,UI,t),new zI(n)}function eN(n=ti()){n=ze(n);let e=rr(n,Hm);return e.isInitialized()?e.getImmediate():tN(n)}function tN(n,e={}){let t=rr(n,Hm);if(t.isInitialized()){let i=t.getImmediate();if(tr(e,t.getOptions()))return i;throw zn.create("already-initialized")}return t.initialize({options:e})}function nN(){return b(this,null,function*(){if(Uu()||!zb()||!xo())return!1;try{return yield ju()}catch{return!1}})}function rN(n,e,t){n=ze(n),FK(WI,nl[n.app.options.appId],e,t).catch(r=>yn.error(r))}function GI(n,e,t,r){n=ze(n),NK(WI,nl[n.app.options.appId],e,t,r).catch(i=>yn.error(i))}var Y2="@firebase/analytics",Q2="0.10.17";function zK(){Gt(new mt(Hm,(e,{options:t})=>{let r=e.getProvider("app").getImmediate(),i=e.getProvider("installations-internal").getImmediate();return HK(r,i,t)},"PUBLIC")),Gt(new mt("analytics-internal",n,"PRIVATE")),Re(Y2,Q2),Re(Y2,Q2,"esm2017");function n(e){try{let t=e.getProvider(Hm).getImmediate();return{logEvent:(r,i,o)=>GI(t,r,i,o)}}catch(t){throw zn.create("interop-component-reg-failed",{reason:t})}}}zK();var ha=class{constructor(e){return e}},sN="analytics",YI=class{constructor(){return Ao(sN)}};var aN=Ne(eN,!0);var cN=Ne(nN,!1),qK=Ne(GI,!1,2);var WK=Ne(rN,!0,2);var ZI=(()=>{class n{initialized;disposables=[];constructor(t,r,i){Re("angularfire",ir.full,"user-tracking");let o;this.initialized=r.runOutsideAngular(()=>new Promise(s=>{o=s})),cN().then(()=>{let s=i.get(ha);s?this.disposables=[_g(t).subscribe(a=>{WK(s,a?.uid),o()})]:o()})}ngOnDestroy(){this.disposables.forEach(t=>t.unsubscribe())}static \u0275fac=function(r){return new(r||n)(re(Un),re(xe),re(Ke))};static \u0275prov=Q({token:n,factory:n.\u0275fac})}return n})(),GK="firebase_event_origin",KK="firebase_previous_class",YK="firebase_previous_id",QK="firebase_previous_screen",ZK="firebase_screen_class",iN="firebase_screen_id",XK="firebase_screen",QI="outlet",JK="page_path",eY="page_title",Vd="screen_class",oN="screen_name",tY="screen_view",nY="auto",rY="#",iY=Math.floor(Math.random()*(2**32-1))-2**31,KI={},oY=n=>{let e=[n[Vd],n[QI]].join(rY);if(KI.hasOwnProperty(e))return KI[e];{let t=iY++;return KI[e]=t,t}},sY=(n,e,t)=>n.events.pipe(Mt(i=>i instanceof hc)).pipe(yt(i=>{let s=n.parseUrl(n.url.replace(/(?:\().+(?:\))/g,_=>_.replace("://",":///"))).root.children[i.snapshot.outlet]?.toString()||"",a=n.routerState.root.children.map(_=>_).find(_=>_.outlet===i.snapshot.outlet);if(!a)return se(null);let l=a;for(;l.firstChild;)l=l.firstChild;let u=l.pathFromRoot.map(_=>_.routeConfig?.path).filter(_=>_).join("/")||"/",f={[oN]:u,[JK]:`/${s}`,[GK]:nY,[XK]:u,[QI]:i.snapshot.outlet};e&&(f[eY]=e.getTitle());let m=a.component;if(m){if(m===Ou){let _=i.snapshot;for(;_.firstChild;)_=_.firstChild;m=_.component}}else m=i.snapshot.component;if(typeof m=="string")return se(ne(H({},f),{[Vd]:m}));if(m){let _=t.resolveComponentFactory(m);return se(ne(H({},f),{[Vd]:_.selector}))}return se(null)}),Mt(i=>!!i),Ce(i=>H({[ZK]:i[Vd],[iN]:oY(i)},i)),jv(i=>i[QI]),ot(i=>i.pipe(Uv((o,s)=>JSON.stringify(o)===JSON.stringify(s)),Al(void 0),$v(),Ce(([o,s])=>o?H({[KK]:o[Vd],[QK]:o[oN],[YK]:o[iN]},s):s)))),lN=(()=>{class n{disposable;constructor(t,r,i,o,s,a){Re("angularfire",ir.full,"screen-tracking"),cN().then(()=>{let l=a.get(ha);!t||!l||o.runOutsideAngular(()=>{this.disposable=sY(t,r,i).pipe(yt(u=>b(this,null,function*(){return s&&(yield s.initialized),qK(l,tY,u)}))).subscribe()})})}ngOnDestroy(){this.disposable&&this.disposable.unsubscribe()}static \u0275fac=function(r){return new(r||n)(re(Ve,8),re(dp,8),re(Is),re(xe),re(ZI,8),re(Ke))};static \u0275prov=Q({token:n,factory:n.\u0275fac})}return n})(),XI=new X("angularfire2.analytics-instances");function aY(n,e,t){if(!Xy(t))return null;let r=Bs(sN,n,e);return r&&new ha(r)}function cY(n){return(e,t,r)=>{if(!Xy(r))return null;let i=e.runOutsideAngular(()=>n(t));return new ha(i)}}var lY={provide:YI,deps:[[new qt,XI]]},uY={provide:ha,useFactory:aY,deps:[[new qt,XI],Mr,wr]};function uN(n,...e){return Re("angularfire",ir.full,"analytics"),tn([uY,lY,{provide:XI,useFactory:cY(n),multi:!0,deps:[xe,Ke,wr,ni,Fi,...e]}])}var dN={providers:[K0(),ky({eventCoalescing:!0}),Nb(I2),ZP(()=>XP({projectId:"unposted-v2",appId:"1:273897103513:web:eb0c3937d204d537f49808",storageBucket:"unposted-v2.firebasestorage.app",apiKey:"AIzaSyC8DqjESQ0w90Yv9RINgAlSLRFK1QMmGlg",authDomain:"unposted-v2.firebaseapp.com",messagingSenderId:"273897103513",measurementId:"G-SN4RKRJDK8"})),XA(()=>yg()),uN(()=>aN()),lN,ZI,$R(()=>HR())]};var zm=class n{static \u0275fac=function(t){return new(t||n)};static \u0275cmp=Xe({type:n,selectors:[["app-footer"]],decls:15,vars:0,consts:[[1,"container"],[1,"brand"],[1,"tagline"],[1,"links"],["href","https://instagram.com/unpostedtn","target","_blank","rel","noopener noreferrer"],["routerLink","/about",2,"cursor","pointer"],[1,"bottom"]],template:function(t,r){t&1&&(h(0,"footer")(1,"div",0)(2,"div",1)(3,"h3"),y(4,"\u{1F319} Unposted"),p(),h(5,"p",2),y(6,"Where hidden words find their voice."),p()(),h(7,"div",3)(8,"a",4),y(9," Instagram "),p(),h(10,"a",5),y(11,"About"),p()()(),h(12,"div",6)(13,"p"),y(14,"\xA9 2025 Unposted. All rights reserved."),p()()())},dependencies:[xr,on],styles:["footer[_ngcontent-%COMP%]{background:#fff;border-top:1px solid var(--border-light);padding:2rem 1.5rem;color:var(--text-secondary);font-family:Inter,sans-serif}.container[_ngcontent-%COMP%]{max-width:1100px;margin:0 auto;display:flex;flex-direction:column;align-items:center;text-align:center;gap:1.5rem}.brand[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:1.3rem;font-weight:600;color:var(--text-primary);margin:0}.tagline[_ngcontent-%COMP%]{font-size:.9rem;color:var(--text-muted);margin-top:.3rem}.links[_ngcontent-%COMP%]{display:flex;gap:1.2rem;flex-wrap:wrap;justify-content:center}.links[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{text-decoration:none;color:var(--text-secondary);font-size:.9rem;transition:color .2s ease}.links[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{color:var(--main-color)}.bottom[_ngcontent-%COMP%]{margin-top:2rem;text-align:center;font-size:.8rem;color:var(--text-muted)}@media (min-width: 768px){.container[_ngcontent-%COMP%]{flex-direction:row;justify-content:space-between;text-align:left}}"]})};var dY=()=>({exact:!0});function fY(n,e){if(n&1&&(h(0,"span",49),y(1),p()),n&2){let t=S(2);v(),ie(" ",t.getBadgeDisplay()," ")}}function hY(n,e){if(n&1){let t=te();h(0,"div",45),$("click",function(){V(t);let i=S();return U(i.toggleNotifications())}),ce(),h(1,"svg",22),q(2,"path",46)(3,"path",47),p(),B(4,fY,2,1,"span",48),p()}if(n&2){let t=S();he("has-notifications",t.hasUnreadNotifications),v(4),C("ngIf",t.hasUnreadNotifications)}}function pY(n,e){if(n&1){let t=te();h(0,"button",50),$("click",function(){V(t);let i=S();return U(i.markNotificationsAsRead())}),y(1," Mark all as read "),p()}}function gY(n,e){n&1&&(h(0,"span"),y(1,"\u2764\uFE0F"),p())}function mY(n,e){n&1&&(h(0,"span"),y(1,"\u{1F4AC}"),p())}function vY(n,e){n&1&&(h(0,"span"),y(1,"\u{1F464}"),p())}function _Y(n,e){n&1&&(h(0,"span"),y(1,"\u2705"),p())}function yY(n,e){n&1&&(h(0,"div",61),q(1,"div",62),p())}function bY(n,e){if(n&1){let t=te();h(0,"div",53),$("click",function(){let i=V(t).$implicit,o=S(2);return U(o.onNotificationClick(i))}),h(1,"div",54),B(2,gY,2,0,"span",55)(3,mY,2,0,"span",55)(4,vY,2,0,"span",55)(5,_Y,2,0,"span",55),p(),h(6,"div",56)(7,"div",57),y(8),p(),h(9,"div",58),y(10),p(),h(11,"div",59),y(12),p()(),B(13,yY,2,0,"div",60),p()}if(n&2){let t=e.$implicit,r=S(2);he("unread",!t.isRead)("read",t.isRead),v(),C("ngClass","icon-"+t.type),v(),C("ngIf",t.type==="like"),v(),C("ngIf",t.type==="comment"),v(),C("ngIf",t.type==="follow"),v(),C("ngIf",t.type==="story_published"),v(3),K(t.title),v(2),K(t.message),v(2),K(r.getTimeAgo(t.createdAt)),v(),C("ngIf",!t.isRead)}}function wY(n,e){if(n&1&&(h(0,"div",51),B(1,bY,14,13,"div",52),p()),n&2){let t=S();v(),C("ngForOf",t.notifications)}}function EY(n,e){n&1&&(h(0,"div",63)(1,"div",64),y(2,"\u{1F514}"),p(),h(3,"div",65),y(4,"No notifications yet"),p()())}function CY(n,e){n&1&&(h(0,"div",66)(1,"a",67),y(2,"Sign In"),p(),h(3,"a",68),y(4,"Sign Up"),p()())}function IY(n,e){if(n&1&&q(0,"img",83),n&2){let t=S(2);C("src",t.user==null?null:t.user.photoURL,st)}}function SY(n,e){if(n&1&&y(0),n&2){let t=S(2);K(t.getUserInitial())}}function TY(n,e){if(n&1&&q(0,"img",83),n&2){let t=S(2);C("src",t.user==null?null:t.user.photoURL,st)}}function DY(n,e){if(n&1&&y(0),n&2){let t=S(2);K(t.getUserInitial())}}function xY(n,e){if(n&1){let t=te();h(0,"div",69)(1,"div",70),$("click",function(){V(t);let i=S();return U(i.toggleUserMenu())}),h(2,"div",71),B(3,IY,1,1,"img",72)(4,SY,1,1,"ng-template",null,3,Cr),p(),h(6,"span",73),y(7),p(),h(8,"span",74),y(9,"\u25BC"),p()(),h(10,"div",75)(11,"div",76),B(12,TY,1,1,"img",72)(13,DY,1,1,"ng-template",null,3,Cr),h(15,"div")(16,"div",77),y(17),p(),h(18,"div",78),y(19),p()()(),q(20,"hr"),h(21,"a",79),$("click",function(){V(t);let i=S();return U(i.closeUserMenu())}),h(22,"span"),y(23,"\u{1F464}"),p(),y(24," Profile "),p(),h(25,"a",80),$("click",function(){V(t);let i=S();return U(i.closeUserMenu())}),h(26,"span"),y(27,"\u{1F4D6}"),p(),y(28," My Stories "),p(),h(29,"a",81),$("click",function(){V(t);let i=S();return U(i.closeUserMenu())}),h(30,"span"),y(31,"\u2699\uFE0F"),p(),y(32," Settings "),p(),q(33,"hr"),h(34,"button",82),$("click",function(){V(t);let i=S();return U(i.logout())}),h(35,"span"),y(36,"\u{1F6AA}"),p(),y(37," Sign Out "),p()()()}if(n&2){let t=kn(5),r=S();v(3),C("ngIf",r.user==null?null:r.user.photoURL)("ngIfElse",t),v(4),K(r.getUserName()),v(),he("rotated",r.userMenuOpen),v(2),he("active",r.userMenuOpen),v(2),C("ngIf",r.user==null?null:r.user.photoURL)("ngIfElse",t),v(5),K(r.getUserName()),v(2),K(r.user==null?null:r.user.email)}}function MY(n,e){if(n&1&&(h(0,"span",86),y(1),p()),n&2){let t=S(2);v(),ie(" ",t.getBadgeDisplay()," ")}}function PY(n,e){if(n&1&&(h(0,"div",84)(1,"div",21),ce(),h(2,"svg",22),q(3,"path",46)(4,"path",47),p(),B(5,MY,2,1,"span",85),p(),Pe(),h(6,"span",25),y(7,"Notifications"),p()()),n&2){let t=S();he("has-notifications",t.hasUnreadNotifications),v(5),C("ngIf",t.hasUnreadNotifications)}}function AY(n,e){n&1&&(h(0,"a",87)(1,"div",21),ce(),h(2,"svg",22),q(3,"circle",88)(4,"path",89)(5,"path",90),p()(),Pe(),h(6,"span",25),y(7,"About"),p()())}function kY(n,e){if(n&1&&q(0,"img",83),n&2){let t=S(2);C("src",t.user==null?null:t.user.photoURL,st)}}function OY(n,e){if(n&1&&y(0),n&2){let t=S(2);K(t.getUserInitial())}}function RY(n,e){if(n&1){let t=te();h(0,"div",91)(1,"div",92),$("click",function(){V(t);let i=S();return U(i.toggleMobileUserMenu())}),h(2,"div",93),B(3,kY,1,1,"img",72)(4,OY,1,1,"ng-template",null,3,Cr),p()(),h(6,"span",25),y(7,"Profile"),p()()}if(n&2){let t=kn(5),r=S();v(3),C("ngIf",r.user==null?null:r.user.photoURL)("ngIfElse",t)}}function NY(n,e){n&1&&(h(0,"a",94)(1,"div",21),ce(),h(2,"svg",22),q(3,"path",95)(4,"path",96)(5,"path",97),p()(),Pe(),h(6,"span",25),y(7,"Sign In"),p()())}function FY(n,e){if(n&1&&q(0,"img",83),n&2){let t=S(2);C("src",t.user==null?null:t.user.photoURL,st)}}function LY(n,e){if(n&1&&y(0),n&2){let t=S(2);K(t.getUserInitial())}}function VY(n,e){if(n&1){let t=te();h(0,"div",98),$("click",function(){V(t);let i=S();return U(i.closeMobileUserMenu())}),h(1,"div",99),$("click",function(i){return V(t),U(i.stopPropagation())}),h(2,"div",100),B(3,FY,1,1,"img",72)(4,LY,1,1,"ng-template",null,4,Cr),h(6,"div",101)(7,"div",77),y(8),p(),h(9,"div",78),y(10),p()(),h(11,"button",102),$("click",function(){V(t);let i=S();return U(i.closeMobileUserMenu())}),y(12,"\xD7"),p()(),h(13,"div",103)(14,"a",104),$("click",function(){V(t);let i=S();return U(i.closeMobileUserMenu())}),h(15,"span",105),y(16,"\u{1F464}"),p(),h(17,"span"),y(18,"Profile"),p()(),h(19,"a",106),$("click",function(){V(t);let i=S();return U(i.closeMobileUserMenu())}),h(20,"span",105),y(21,"\u{1F4D6}"),p(),h(22,"span"),y(23,"My Stories"),p()(),h(24,"a",107),$("click",function(){V(t);let i=S();return U(i.closeMobileUserMenu())}),h(25,"span",105),y(26,"\u2699\uFE0F"),p(),h(27,"span"),y(28,"Settings"),p()(),h(29,"button",108),$("click",function(){V(t);let i=S();return U(i.logout())}),h(30,"span",105),y(31,"\u{1F6AA}"),p(),h(32,"span"),y(33,"Sign Out"),p()()()()()}if(n&2){let t=kn(5),r=S();he("active",r.mobileUserMenuOpen),v(3),C("ngIf",r.user==null?null:r.user.photoURL)("ngIfElse",t),v(5),K(r.getUserName()),v(2),K(r.user==null?null:r.user.email)}}var qm=class n{constructor(e,t,r){this.authService=e;this.notificationService=t;this.router=r}userMenuOpen=!1;mobileUserMenuOpen=!1;showAnnouncement=!0;user=null;notificationsOpen=!1;notificationsMOpen=!1;notifications=[];unreadCount=0;userSubscription;notificationsSubscription;unreadCountSubscription;isOpen=!1;closeModalEvent=new et;subscribeEvent=new et;ngOnInit(){this.userSubscription=this.authService.user$.subscribe(e=>{this.user=e}),this.notificationsSubscription=this.notificationService.notifications$.subscribe(e=>{this.notifications=e}),this.unreadCountSubscription=this.notificationService.unreadCount$.subscribe(e=>{this.unreadCount=e}),document.addEventListener("click",e=>{let t=e.target;!t?.closest(".navbar-right")&&!t?.closest(".mobile-user-menu")&&!t?.closest(".profile-nav")&&(this.userMenuOpen=!1,this.mobileUserMenuOpen=!1)})}ngOnDestroy(){this.userSubscription&&this.userSubscription.unsubscribe(),this.notificationsSubscription&&this.notificationsSubscription.unsubscribe(),this.unreadCountSubscription&&this.unreadCountSubscription.unsubscribe()}toggleUserMenu(){this.userMenuOpen=!this.userMenuOpen}closeUserMenu(){this.userMenuOpen=!1}toggleMobileUserMenu(){this.mobileUserMenuOpen=!this.mobileUserMenuOpen}closeMobileUserMenu(){this.mobileUserMenuOpen=!1}getUserInitial(){return this.user?this.user.displayName?this.user.displayName.charAt(0).toUpperCase():this.user.email?this.user.email.charAt(0).toUpperCase():"U":"U"}getUserName(){return this.user?this.user.displayName?this.user.displayName:this.user.email?this.user.email.split("@")[0]:"User":"User"}logout(){return b(this,null,function*(){try{yield this.authService.logout(),this.closeUserMenu(),this.closeMobileUserMenu()}catch(e){console.error("Logout error:",e)}})}email="";openSubscribeModal(e){e.preventDefault(),this.isOpen=!0}closeModal(){this.isOpen=!1,this.closeModalEvent.emit()}onOverlayClick(e){e.target===e.currentTarget&&this.closeModal()}onSubmit(){this.email&&(this.subscribeEvent.emit(this.email),this.email="",this.closeModal())}toggleNotifications(){this.notificationsOpen=!this.notificationsOpen}closeNotifications(){this.notificationsOpen=!1}toggleNotificationsM(){this.notificationsOpen=!this.notificationsOpen}closeNotificationsM(){this.notificationsOpen=!1}markNotificationsAsRead(){return b(this,null,function*(){try{yield this.notificationService.markAllAsRead()}catch(e){console.error("Error marking notifications as read:",e)}})}onNotificationClick(e){return b(this,null,function*(){if(!e.isRead)try{yield this.notificationService.markAsRead(e.id)}catch(t){console.error("Error marking notification as read:",t)}this.navigateFromNotification(e),this.closeNotifications()})}navigateFromNotification(e){switch(e.type){case"like":case"comment":e.data?.storyId&&this.router.navigate(["/story",e.data.storyId]);break;case"follow":e.data?.fromUserId&&this.router.navigate(["/profile",e.data.fromUserId]);break;case"story_published":e.data?.storyId?this.router.navigate(["/story",e.data.storyId]):this.router.navigate(["/my-stories"]);break;default:break}}onDocumentClick(e){let t=e.target,r=document.querySelector(".notification-bell"),i=document.querySelector(".notification-dropdown");this.notificationsOpen&&!r?.contains(t)&&!i?.contains(t)&&this.closeNotifications()}getTimeAgo(e){let r=Math.floor((new Date().getTime()-e.getTime())/1e3);if(r<60)return"Just now";let i=Math.floor(r/60);if(i<60)return`${i}m ago`;let o=Math.floor(i/60);if(o<24)return`${o}h ago`;let s=Math.floor(o/24);if(s<7)return`${s}d ago`;let a=Math.floor(s/7);if(a<4)return`${a}w ago`;let l=Math.floor(s/30);return l<12?`${l}mo ago`:`${Math.floor(s/365)}y ago`}getBadgeDisplay(){return this.unreadCount===0?"":this.unreadCount>99?"99+":this.unreadCount.toString()}get hasUnreadNotifications(){return this.unreadCount>0}static \u0275fac=function(t){return new(t||n)(ee(it),ee(ur),ee(Ve))};static \u0275cmp=Xe({type:n,selectors:[["app-navbar"]],hostBindings:function(t,r){t&1&&$("click",function(o){return r.onDocumentClick(o)},K_)},inputs:{isOpen:"isOpen"},outputs:{closeModalEvent:"closeModalEvent",subscribeEvent:"subscribeEvent"},decls:62,vars:20,consts:[["noNotifications",""],["authButtons",""],["subscribeForm","ngForm"],["initials",""],["initialsLarge",""],[1,"navbar","desktop-navbar"],["routerLink","/",1,"navbar-logo"],[1,"navbar-right"],[1,"nav-links"],["class","notification-bell",3,"has-notifications","click",4,"ngIf"],[1,"notification-dropdown"],[1,"notification-header"],["class","mark-all-read",3,"click",4,"ngIf"],["class","notification-list",4,"ngIf","ngIfElse"],[1,"notification-footer"],["routerLink","/notifications",3,"click"],["class","navbar-buttons",4,"ngIf"],["class","navbar-buttons logged-in",4,"ngIf"],[1,"bottom-nav","mobile-navbar"],[1,"bottom-nav-container"],["routerLink","/stories","routerLinkActive","active",1,"nav-item",3,"routerLinkActiveOptions"],[1,"nav-icon"],["width","24","height","24","viewBox","0 0 24 24","fill","none","xmlns","http://www.w3.org/2000/svg"],["d","M3 9L12 2L21 9V20C21 20.5304 20.7893 21.0391 20.4142 21.4142C20.0391 21.7893 19.5304 22 19 22H5C4.46957 22 3.96086 21.7893 3.58579 21.4142C3.21071 21.0391 3 20.5304 3 20V9Z","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round"],["d","M9 22V12H15V22","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round"],[1,"nav-label"],["routerLink","/write","routerLinkActive","active",1,"nav-item"],["d","M11 4H4C3.46957 4 2.96086 4.21071 2.58579 4.58579C2.21071 4.96086 2 5.46957 2 6V20C2 20.5304 2.21071 21.0391 2.58579 21.4142C2.96086 21.7893 3.46957 22 4 22H18C18.5304 22 19.0391 21.7893 19.4142 21.4142C19.7893 21.0391 20 20.5304 20 20V13","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round"],["d","M18.5 2.49998C18.8978 2.10216 19.4374 1.87866 20 1.87866C20.5626 1.87866 21.1022 2.10216 21.5 2.49998C21.8978 2.89781 22.1213 3.43737 22.1213 3.99998C22.1213 4.56259 21.8978 5.10216 21.5 5.49998L12 15L8 16L9 12L18.5 2.49998Z","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round"],["routerLink","/notifications","routerLinkActive","active","class","nav-item notification-bell",3,"has-notifications",4,"ngIf"],["routerLink","/about","routerLinkActive","active","class","nav-item",4,"ngIf"],["class","nav-item profile-nav",4,"ngIf","ngIfElse"],["class","mobile-user-overlay",3,"active","click",4,"ngIf"],["role","dialog","aria-labelledby","modal-title","aria-modal","true",1,"modal",3,"click"],["role","document",1,"modal-content"],["aria-label","Close Subscription Form",1,"close-modal",3,"click"],["id","modal-title"],["action","https://formsubmit.co/unposted.infos@gmail.com","method","POST","target","_blank",3,"ngSubmit"],["for","email-subscribe"],[1,"required"],["type","email","id","email-subscribe","name","email","placeholder","Enter your email","required","",3,"ngModelChange","ngModel"],["type","text","name","_honey",2,"display","none"],["type","hidden","name","_captcha","value","false"],["type","hidden","name","_next","value","https://un-posted.github.io/unposted/pages/thank-you.html"],["type","submit",3,"disabled"],[1,"notification-bell",3,"click"],["d","M18 8C18 6.4087 17.3679 4.88258 16.2426 3.75736C15.1174 2.63214 13.5913 2 12 2C10.4087 2 8.88258 2.63214 7.75736 3.75736C6.63214 4.88258 6 6.4087 6 8C6 15 3 17 3 17H21C21 17 18 15 18 8Z","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round"],["d","M13.73 21C13.5542 21.3031 13.3019 21.5547 12.9982 21.7295C12.6946 21.9044 12.3504 21.9965 12 21.9965C11.6496 21.9965 11.3054 21.9044 11.0018 21.7295C10.6981 21.5547 10.4458 21.3031 10.27 21","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round"],["class","notification-badge",4,"ngIf"],[1,"notification-badge"],[1,"mark-all-read",3,"click"],[1,"notification-list"],["class","notification-item",3,"unread","read","click",4,"ngFor","ngForOf"],[1,"notification-item",3,"click"],[1,"notification-icon",3,"ngClass"],[4,"ngIf"],[1,"notification-content"],[1,"notification-title"],[1,"notification-message"],[1,"notification-time"],["class","notification-status",4,"ngIf"],[1,"notification-status"],[1,"unread-dot"],[1,"no-notifications"],[1,"no-notifications-icon"],[1,"no-notifications-text"],[1,"navbar-buttons"],["routerLink","/login",1,"auth-btn"],["routerLink","/register",1,"auth-btn","signup"],[1,"navbar-buttons","logged-in"],[1,"user-profile",3,"click"],[1,"user-avatar"],["alt","User Avatar",3,"src",4,"ngIf","ngIfElse"],[1,"username"],[1,"dropdown-arrow"],[1,"user-menu"],[1,"user-info"],[1,"user-display-name"],[1,"user-email"],["routerLink","/profile",3,"click"],["routerLink","/my-stories",3,"click"],["routerLink","/settings",3,"click"],[1,"logout-btn",3,"click"],["alt","User Avatar",3,"src"],["routerLink","/notifications","routerLinkActive","active",1,"nav-item","notification-bell"],["class","mobile-notification-badge",4,"ngIf"],[1,"mobile-notification-badge"],["routerLink","/about","routerLinkActive","active",1,"nav-item"],["cx","12","cy","12","r","10","stroke","currentColor","stroke-width","2"],["d","M9.09 9C9.3251 8.33167 9.78915 7.76811 10.4 7.40913C11.0108 7.05016 11.7289 6.91894 12.4272 7.03871C13.1255 7.15849 13.7588 7.52152 14.2151 8.06353C14.6713 8.60553 14.9211 9.29152 14.92 10C14.92 12 11.92 13 11.92 13","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round"],["d","M12 17H12.01","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round"],[1,"nav-item","profile-nav"],[1,"nav-icon","profile-icon",3,"click"],[1,"user-avatar-mobile"],["routerLink","/login",1,"nav-item","auth-nav"],["d","M15 3H19C19.5304 3 20.0391 3.21071 20.4142 3.58579C20.7893 3.96086 21 4.46957 21 5V19C21 19.5304 20.7893 20.0391 20.4142 20.4142C20.0391 20.7893 19.5304 21 19 21H15","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round"],["d","M10 17L15 12L10 7","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round"],["d","M15 12H3","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round"],[1,"mobile-user-overlay",3,"click"],[1,"mobile-user-menu",3,"click"],[1,"mobile-user-header"],[1,"user-details"],[1,"close-mobile-menu",3,"click"],[1,"mobile-menu-items"],["routerLink","/profile",1,"mobile-menu-item",3,"click"],[1,"item-icon"],["routerLink","/my-stories",1,"mobile-menu-item",3,"click"],["routerLink","/settings",1,"mobile-menu-item",3,"click"],[1,"mobile-menu-item","logout-item",3,"click"]],template:function(t,r){if(t&1){let i=te();h(0,"nav",5)(1,"a",6)(2,"span"),y(3,"\u{1F319}"),p(),h(4,"span"),y(5,"Unposted"),p()(),h(6,"div",7),q(7,"div",8),B(8,hY,5,3,"div",9),h(9,"div",10)(10,"div",11)(11,"h3"),y(12,"Notifications"),p(),B(13,pY,2,0,"button",12),p(),B(14,wY,2,1,"div",13)(15,EY,5,0,"ng-template",null,0,Cr),h(17,"div",14)(18,"a",15),$("click",function(){return V(i),U(r.closeNotifications())}),y(19,"View all notifications"),p()()(),B(20,CY,5,0,"div",16)(21,xY,38,11,"div",17),p()(),h(22,"nav",18)(23,"div",19)(24,"a",20)(25,"div",21),ce(),h(26,"svg",22),q(27,"path",23)(28,"path",24),p()(),Pe(),h(29,"span",25),y(30,"Home"),p()(),h(31,"a",26)(32,"div",21),ce(),h(33,"svg",22),q(34,"path",27)(35,"path",28),p()(),Pe(),h(36,"span",25),y(37,"Write"),p()(),B(38,PY,8,3,"div",29)(39,AY,8,0,"a",30)(40,RY,8,2,"div",31)(41,NY,8,0,"ng-template",null,1,Cr),p()(),B(43,VY,34,6,"div",32),h(44,"div",33),$("click",function(s){return V(i),U(r.onOverlayClick(s))}),h(45,"div",34)(46,"button",35),$("click",function(){return V(i),U(r.closeModal())}),y(47," \xD7 "),p(),h(48,"h2",36),y(49,"Subscribe to Our Newsletter"),p(),h(50,"form",37,2),$("ngSubmit",function(){return V(i),U(r.onSubmit())}),h(52,"label",38),y(53," Email Address "),h(54,"span",39),y(55,"*"),p()(),h(56,"input",40),It("ngModelChange",function(s){return V(i),Pt(r.email,s)||(r.email=s),U(s)}),p(),q(57,"input",41)(58,"input",42)(59,"input",43),h(60,"button",44),y(61," Subscribe "),p()()()()}if(t&2){let i=kn(16),o=kn(42),s=kn(51);v(8),C("ngIf",r.user),v(),he("active",r.notificationsOpen),v(4),C("ngIf",r.hasUnreadNotifications),v(),C("ngIf",r.notifications.length>0)("ngIfElse",i),v(6),C("ngIf",!r.user),v(),C("ngIf",r.user),v(3),C("routerLinkActiveOptions",Kr(19,dY)),v(14),C("ngIf",r.user),v(),C("ngIf",!r.user),v(),C("ngIf",r.user)("ngIfElse",o),v(3),C("ngIf",r.user&&r.mobileUserMenuOpen),v(),En("display",r.isOpen?"flex":"none"),pn("aria-hidden",!r.isOpen),v(12),Ct("ngModel",r.email),v(4),C("disabled",!s.valid)}},dependencies:[xr,on,Rb,hi,m2,lr,fi,u2,ca,Nr,MI,Sn,Ms,In,Rn],styles:['@charset "UTF-8";.user-info[_ngcontent-%COMP%]   img[_ngcontent-%COMP%], .mobile-user-header[_ngcontent-%COMP%]   img[_ngcontent-%COMP%], .user-avatar[_ngcontent-%COMP%]   img[_ngcontent-%COMP%], .user-avatar-large[_ngcontent-%COMP%]   img[_ngcontent-%COMP%], .user-avatar-mobile[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;height:100%;border-radius:50%;object-fit:cover}.desktop-navbar[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:1rem 2rem;background:#fff;border-bottom:1px solid #eee;box-shadow:0 2px 4px #00000005;position:relative}.navbar-logo[_ngcontent-%COMP%]{font-size:1.5rem;font-weight:700;color:#000;text-decoration:none;display:flex;align-items:center;gap:.5rem}.navbar-right[_ngcontent-%COMP%]{display:flex;align-items:center;gap:2rem;position:relative}.nav-links[_ngcontent-%COMP%]{display:flex;gap:2rem;font-size:.95rem}.nav-links[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{text-decoration:none;color:var(--text-dark);transition:all .3s ease;padding:.5rem 0}.nav-links[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover, .nav-links[_ngcontent-%COMP%]   a.active[_ngcontent-%COMP%]{color:var(--main-color)}.nav-links[_ngcontent-%COMP%]   a.active[_ngcontent-%COMP%]{font-weight:600}.notification-bell[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;width:40px;height:40px;border-radius:50%;cursor:pointer;transition:all .3s ease;color:#666;position:relative}.notification-bell[_ngcontent-%COMP%]:hover{background:#f5f5f5;color:var(--main-color);transform:translateY(-1px)}.notification-bell[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{width:20px;height:20px}.notification-bell[_ngcontent-%COMP%]   .notification-badge[_ngcontent-%COMP%]{position:absolute;top:6px;right:6px;background:#dc3545;color:#fff;border-radius:10px;min-width:18px;height:18px;display:flex;align-items:center;justify-content:center;font-size:.7rem;font-weight:600;padding:0 4px;border:2px solid white;box-shadow:0 2px 4px #0000001a;z-index:10}.notification-bell.has-notifications[_ngcontent-%COMP%]   .notification-badge[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_pulse-badge 2s infinite}.mobile-notification-badge[_ngcontent-%COMP%]{position:absolute;top:2px;right:2px;background:#dc3545;color:#fff;border-radius:8px;width:16px;height:16px;display:flex;align-items:center;justify-content:center;font-size:.6rem;font-weight:600;padding:0 3px;border:1px solid white;box-shadow:0 1px 3px #0003;z-index:10}@keyframes _ngcontent-%COMP%_pulse-badge{0%{transform:scale(1);opacity:1}50%{transform:scale(1.1);opacity:.8}to{transform:scale(1);opacity:1}}.navbar-buttons[_ngcontent-%COMP%]{display:flex;align-items:center;gap:1rem}.navbar-buttons.logged-in[_ngcontent-%COMP%]{position:relative}.auth-btn[_ngcontent-%COMP%]{text-decoration:none;color:var(--text-dark);padding:.6rem 1rem;border-radius:6px;font-weight:500;transition:all .3s ease;font-size:.9rem}.auth-btn[_ngcontent-%COMP%]:hover{background:#f5f5f5}.auth-btn.signup[_ngcontent-%COMP%]{background:var(--main-color);color:var(--text-dark);font-weight:600}.auth-btn.signup[_ngcontent-%COMP%]:hover{background:#f7a600}.user-profile[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5rem;cursor:pointer;padding:.5rem;border-radius:8px;transition:background .3s ease}.user-profile[_ngcontent-%COMP%]:hover{background:#f5f5f5}.user-avatar[_ngcontent-%COMP%]{width:32px;height:32px;border-radius:50%;background:var(--main-color);color:var(--text-dark);display:flex;align-items:center;justify-content:center;font-weight:700;font-size:.9rem}.user-avatar-large[_ngcontent-%COMP%]{width:40px;height:40px;border-radius:50%;background:var(--main-color);color:var(--text-dark);display:flex;align-items:center;justify-content:center;font-weight:700;font-size:1.1rem}.username[_ngcontent-%COMP%]{font-weight:500;color:var(--text-dark);font-size:.9rem}.dropdown-arrow[_ngcontent-%COMP%]{font-size:.7rem;color:#666;transition:transform .3s ease}.dropdown-arrow.rotated[_ngcontent-%COMP%]{transform:rotate(180deg)}.user-menu[_ngcontent-%COMP%]{position:absolute;top:100%;right:0;background:#fff;border:1px solid #eee;border-radius:8px;box-shadow:0 4px 12px #0000001a;min-width:220px;transform:translateY(-10px);opacity:0;visibility:hidden;transition:all .3s ease;z-index:1000;margin-top:.5rem}.user-menu.active[_ngcontent-%COMP%]{transform:translateY(0);opacity:1;visibility:visible}.user-info[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.8rem;padding:1rem}.user-display-name[_ngcontent-%COMP%]{font-weight:600;color:var(--text-dark);font-size:.9rem}.user-email[_ngcontent-%COMP%]{color:#666;font-size:.8rem}.user-menu[_ngcontent-%COMP%]   hr[_ngcontent-%COMP%]{margin:0;border:none;border-top:1px solid #eee}.user-menu[_ngcontent-%COMP%]   a[_ngcontent-%COMP%], .user-menu[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.8rem;padding:.8rem 1rem;text-decoration:none;color:var(--text-dark);font-size:.9rem;transition:background .3s ease;border:none;background:none;width:100%;text-align:left;cursor:pointer}.user-menu[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover, .user-menu[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{background:#f5f5f5}.logout-btn[_ngcontent-%COMP%]{color:#dc3545!important}.logout-btn[_ngcontent-%COMP%]:hover{background:#fff5f5!important}.mobile-navbar[_ngcontent-%COMP%]{display:none}.bottom-nav[_ngcontent-%COMP%]{position:fixed;bottom:0;left:0;right:0;background:#fffffff2;backdrop-filter:blur(10px);-webkit-backdrop-filter:blur(10px);border-top:1px solid rgba(0,0,0,.1);z-index:1000;box-shadow:0 -2px 20px #0000001a}.bottom-nav-container[_ngcontent-%COMP%]{display:flex;justify-content:space-around;align-items:center;padding:.5rem 1rem 1rem;max-width:100%}.nav-item[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;gap:.25rem;padding:.5rem;border-radius:12px;text-decoration:none;color:#666;transition:all .3s ease;min-width:60px;position:relative;cursor:pointer}.nav-item[_ngcontent-%COMP%]:hover, .nav-item.active[_ngcontent-%COMP%]{color:var(--main-color);background:#ffc1001a}.nav-item.active[_ngcontent-%COMP%]{transform:translateY(-2px)}.nav-item.active[_ngcontent-%COMP%]   .nav-icon[_ngcontent-%COMP%]{transform:scale(1.1)}.nav-icon[_ngcontent-%COMP%]{width:24px;height:24px;display:flex;align-items:center;justify-content:center;transition:transform .3s ease;position:relative}.nav-icon[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{width:100%;height:100%}.nav-label[_ngcontent-%COMP%]{font-size:.7rem;font-weight:500;text-align:center}.profile-icon[_ngcontent-%COMP%]{cursor:pointer}.user-avatar-mobile[_ngcontent-%COMP%]{width:24px;height:24px;border-radius:50%;background:var(--main-color);color:var(--text-dark);display:flex;align-items:center;justify-content:center;font-weight:700;font-size:.7rem}.mobile-user-overlay[_ngcontent-%COMP%]{position:fixed;inset:0;background:#00000080;z-index:10000;display:flex;align-items:flex-end;opacity:0;visibility:hidden;transition:all .3s ease}.mobile-user-overlay.active[_ngcontent-%COMP%]{opacity:1;visibility:visible}.mobile-user-menu[_ngcontent-%COMP%]{width:100%;background:#fff;border-radius:20px 20px 0 0;max-height:70vh;transform:translateY(100%);transition:transform .4s cubic-bezier(.25,.46,.45,.94)}.mobile-user-overlay.active[_ngcontent-%COMP%]   .mobile-user-menu[_ngcontent-%COMP%]{transform:translateY(0)}.mobile-user-header[_ngcontent-%COMP%]{display:flex;align-items:center;gap:1rem;padding:1.5rem 1.5rem 1rem;border-bottom:1px solid #eee;position:relative}.user-details[_ngcontent-%COMP%]{flex:1}.close-mobile-menu[_ngcontent-%COMP%]{position:absolute;top:1rem;right:1rem;background:none;border:none;font-size:1.5rem;color:#666;cursor:pointer;padding:.5rem;border-radius:50%;transition:background .3s ease}.close-mobile-menu[_ngcontent-%COMP%]:hover{background:#f5f5f5}.mobile-menu-items[_ngcontent-%COMP%]{padding:1rem 0}.mobile-menu-item[_ngcontent-%COMP%]{display:flex;align-items:center;gap:1rem;padding:1rem 1.5rem;text-decoration:none;color:var(--text-dark);font-size:1rem;transition:background .3s ease;border:none;background:none;width:100%;text-align:left;cursor:pointer}.mobile-menu-item[_ngcontent-%COMP%]:hover{background:#f5f5f5}.mobile-menu-item.logout-item[_ngcontent-%COMP%]{color:#dc3545}.mobile-menu-item.logout-item[_ngcontent-%COMP%]:hover{background:#fff5f5}.item-icon[_ngcontent-%COMP%]{font-size:1.2rem;width:24px;text-align:center}.modal[_ngcontent-%COMP%]{position:fixed;inset:0;background:#00000080;display:flex;justify-content:center;align-items:center;z-index:9999;font-family:Segoe UI,Tahoma,Geneva,Verdana,sans-serif}.modal-content[_ngcontent-%COMP%]{background:#fff;padding:2rem;border-radius:12px;max-width:400px;width:90%;position:relative;box-shadow:var(--card-shadow)}.close-modal[_ngcontent-%COMP%]{position:absolute;top:.5rem;right:1rem;background:transparent;border:none;font-size:2rem;line-height:1;color:var(--main-color);cursor:pointer;font-weight:700;transition:color .3s ease}.close-modal[_ngcontent-%COMP%]:hover{color:#f7a600}h2[_ngcontent-%COMP%]{color:var(--main-color);margin-bottom:1rem}label[_ngcontent-%COMP%]{font-weight:600;display:block;margin-bottom:.5rem}.required[_ngcontent-%COMP%]{color:red}input[_ngcontent-%COMP%]{padding:.7rem 1rem;border-radius:8px;border:1.5px solid #ccc;font-size:1rem;width:100%;margin-bottom:1rem}input[_ngcontent-%COMP%]:focus{outline:none;border-color:var(--main-color)}button[type=submit][_ngcontent-%COMP%]{background:var(--main-color);color:var(--text-dark);padding:.8rem 1.5rem;font-weight:700;border:nothing;border-radius:8px;cursor:pointer;width:100%;transition:background-color .3s ease}button[type=submit][_ngcontent-%COMP%]:hover:not(:disabled){background:#f7a600}button[type=submit][_ngcontent-%COMP%]:disabled{opacity:.6;cursor:not-allowed}.notification-bell[_ngcontent-%COMP%]{position:relative;cursor:pointer;display:flex;align-items:center;justify-content:center}.notification-bell[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{width:24px;height:24px}.notification-badge[_ngcontent-%COMP%], .mobile-notification-badge[_ngcontent-%COMP%]{position:absolute;top:0;right:0;background:#f44336;color:#fff;font-size:.7rem;font-weight:700;padding:2px 6px;border-radius:999px;line-height:1}.notification-dropdown[_ngcontent-%COMP%]{position:absolute;top:calc(100% + .5rem);right:0;width:350px;max-height:80vh;background:#fff;border:1px solid #ddd;border-radius:10px;box-shadow:0 6px 20px #00000026;overflow-y:auto;z-index:1500;opacity:0;visibility:hidden;transform:translateY(10px);transition:all .2s ease-in-out}.notification-dropdown.active[_ngcontent-%COMP%]{opacity:1;visibility:visible;transform:translateY(0)}.notification-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:.75rem 1rem;border-bottom:1px solid #eee}.notification-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:1rem;font-weight:700;margin:0}.notification-header[_ngcontent-%COMP%]   .mark-all-read[_ngcontent-%COMP%]{font-size:.8rem;background:none;border:none;color:#007bff;cursor:pointer}.notification-header[_ngcontent-%COMP%]   .mark-all-read[_ngcontent-%COMP%]:hover{text-decoration:underline}.notification-list[_ngcontent-%COMP%]{max-height:60vh;overflow-y:auto}.notification-item[_ngcontent-%COMP%]{display:flex;align-items:flex-start;gap:.75rem;padding:.75rem 1rem;border-bottom:1px solid #f0f0f0;cursor:pointer;transition:background .2s}.notification-item[_ngcontent-%COMP%]:hover{background:#f9f9f9}.notification-item.unread[_ngcontent-%COMP%]{background:#fdf7e3}.notification-item[_ngcontent-%COMP%]   .notification-icon[_ngcontent-%COMP%]{font-size:1.2rem}.notification-item[_ngcontent-%COMP%]   .notification-content[_ngcontent-%COMP%]{flex:1}.notification-item[_ngcontent-%COMP%]   .notification-content[_ngcontent-%COMP%]   .notification-title[_ngcontent-%COMP%]{font-weight:600;margin-bottom:.25rem}.notification-item[_ngcontent-%COMP%]   .notification-content[_ngcontent-%COMP%]   .notification-message[_ngcontent-%COMP%]{font-size:.9rem;color:#555;margin-bottom:.25rem}.notification-item[_ngcontent-%COMP%]   .notification-content[_ngcontent-%COMP%]   .notification-time[_ngcontent-%COMP%]{font-size:.8rem;color:#999}.notification-item[_ngcontent-%COMP%]   .notification-status[_ngcontent-%COMP%]   .unread-dot[_ngcontent-%COMP%]{width:8px;height:8px;background:#007bff;border-radius:50%}.no-notifications[_ngcontent-%COMP%]{text-align:center;padding:2rem 1rem;color:#777}.no-notifications[_ngcontent-%COMP%]   .no-notifications-icon[_ngcontent-%COMP%]{font-size:2rem;margin-bottom:.5rem}.notification-footer[_ngcontent-%COMP%]{padding:.75rem 1rem;text-align:center;border-top:1px solid #eee}.notification-footer[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#007bff;font-size:.9rem}.notification-footer[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{text-decoration:underline}@media (max-width: 768px){.bottom-nav[_ngcontent-%COMP%]   .notification-dropdown[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:100%;height:100%;max-height:none;border-radius:0;border:none;box-shadow:none;background:#fff;z-index:3000;opacity:0;visibility:hidden;transform:translateY(20px);transition:all .3s ease-in-out}.notification-dropdown.active[_ngcontent-%COMP%]{opacity:1;visibility:visible;transform:translateY(0)}.notification-header[_ngcontent-%COMP%]{position:sticky;top:0;background:#fff;border-bottom:1px solid #eee;z-index:10;padding:1rem}.notification-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:1.2rem}.notification-header[_ngcontent-%COMP%]   .mark-all-read[_ngcontent-%COMP%]{font-size:.9rem}.notification-list[_ngcontent-%COMP%]{max-height:calc(100% - 60px);overflow-y:auto}.notification-footer[_ngcontent-%COMP%]{position:sticky;bottom:0;background:#fff;border-top:1px solid #eee;padding:1rem}.desktop-navbar[_ngcontent-%COMP%]{display:none}.mobile-navbar[_ngcontent-%COMP%]{display:block}.notification-dropdown[_ngcontent-%COMP%]{right:1rem;left:1rem;width:auto}.notification-bell[_ngcontent-%COMP%]{position:relative}.bottom-nav[_ngcontent-%COMP%]   .notification-dropdown[_ngcontent-%COMP%]{position:absolute;top:110%;right:0;width:320px;background:#fff;border:1px solid #eee;border-radius:12px;box-shadow:0 4px 12px #0000001a;opacity:0;transform:translateY(-10px);pointer-events:none;transition:all .3s ease;z-index:2000}.bottom-nav[_ngcontent-%COMP%]   .notification-dropdown.active[_ngcontent-%COMP%]{opacity:1;transform:translateY(0);pointer-events:auto}}@media (max-width: 768px) and (max-width: 768px){.bottom-nav[_ngcontent-%COMP%]   .notification-dropdown[_ngcontent-%COMP%]{left:0;right:0;width:calc(100vw - 2rem);margin:0 auto}}@media (min-width: 769px){.mobile-navbar[_ngcontent-%COMP%], .mobile-user-overlay[_ngcontent-%COMP%]{display:none!important}}']})};var Wm=class n{title=wn("unposted");static \u0275fac=function(t){return new(t||n)};static \u0275cmp=Xe({type:n,selectors:[["app-root"]],decls:3,vars:0,template:function(t,r){t&1&&q(0,"app-navbar")(1,"router-outlet")(2,"app-footer")},dependencies:[Au,zm,qm],encapsulation:2})};ab(Wm,dN).catch(n=>console.error(n));
