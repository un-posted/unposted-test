var dF=Object.defineProperty,fF=Object.defineProperties;var hF=Object.getOwnPropertyDescriptors;var vS=Object.getOwnPropertySymbols,pF=Object.getPrototypeOf,gF=Object.prototype.hasOwnProperty,mF=Object.prototype.propertyIsEnumerable,vF=Reflect.get;var _S=(n,e,t)=>e in n?dF(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,H=(n,e)=>{for(var t in e||={})gF.call(e,t)&&_S(n,t,e[t]);if(vS)for(var t of vS(e))mF.call(e,t)&&_S(n,t,e[t]);return n},re=(n,e)=>fF(n,hF(e));var ro=(n,e,t)=>vF(pF(n),t,e);var y=(n,e,t)=>new Promise((r,i)=>{var o=c=>{try{a(t.next(c))}catch(u){i(u)}},s=c=>{try{a(t.throw(c))}catch(u){i(u)}},a=c=>c.done?r(c.value):Promise.resolve(c.value).then(o,s);a((t=t.apply(n,e)).next())});var Tv;function uf(){return Tv}function Br(n){let e=Tv;return Tv=n,e}var yS=Symbol("NotFound");function Ca(n){return n===yS||n?.name==="\u0275NotFound"}function gf(n,e){return Object.is(n,e)}var Jt=null,df=!1,Dv=1,_F=null,en=Symbol("SIGNAL");function Ee(n){let e=Jt;return Jt=n,e}function mf(){return Jt}var is={version:0,lastCleanEpoch:0,dirty:!1,producers:void 0,producersTail:void 0,consumers:void 0,consumersTail:void 0,recomputing:!1,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,kind:"unknown",producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{}};function Ia(n){if(df)throw new Error("");if(Jt===null)return;Jt.consumerOnSignalRead(n);let e=Jt.producersTail;if(e!==void 0&&e.producer===n)return;let t,r=Jt.recomputing;if(r&&(t=e!==void 0?e.nextProducer:Jt.producers,t!==void 0&&t.producer===n)){Jt.producersTail=t,t.lastReadVersion=n.version;return}let i=n.consumersTail;if(i!==void 0&&i.consumer===Jt&&(!r||bF(i,Jt)))return;let o=Ta(Jt),s={producer:n,consumer:Jt,nextProducer:t,prevConsumer:i,lastReadVersion:n.version,nextConsumer:void 0};Jt.producersTail=s,e!==void 0?e.nextProducer=s:Jt.producers=s,o&&wS(n,s)}function bS(){Dv++}function vf(n){if(!(Ta(n)&&!n.dirty)&&!(!n.dirty&&n.lastCleanEpoch===Dv)){if(!n.producerMustRecompute(n)&&!Ml(n)){pf(n);return}n.producerRecomputeValue(n),pf(n)}}function xv(n){if(n.consumers===void 0)return;let e=df;df=!0;try{for(let t=n.consumers;t!==void 0;t=t.nextConsumer){let r=t.consumer;r.dirty||yF(r)}}finally{df=e}}function Mv(){return Jt?.consumerAllowSignalWrites!==!1}function yF(n){n.dirty=!0,xv(n),n.consumerMarkedDirty?.(n)}function pf(n){n.dirty=!1,n.lastCleanEpoch=Dv}function os(n){return n&&(n.producersTail=void 0,n.recomputing=!0),Ee(n)}function Sa(n,e){if(Ee(e),!n)return;n.recomputing=!1;let t=n.producersTail,r=t!==void 0?t.nextProducer:n.producers;if(r!==void 0){if(Ta(n))do r=Pv(r);while(r!==void 0);t!==void 0?t.nextProducer=void 0:n.producers=void 0}}function Ml(n){for(let e=n.producers;e!==void 0;e=e.nextProducer){let t=e.producer,r=e.lastReadVersion;if(r!==t.version||(vf(t),r!==t.version))return!0}return!1}function Pl(n){if(Ta(n)){let e=n.producers;for(;e!==void 0;)e=Pv(e)}n.producers=void 0,n.producersTail=void 0,n.consumers=void 0,n.consumersTail=void 0}function wS(n,e){let t=n.consumersTail,r=Ta(n);if(t!==void 0?(e.nextConsumer=t.nextConsumer,t.nextConsumer=e):(e.nextConsumer=void 0,n.consumers=e),e.prevConsumer=t,n.consumersTail=e,!r)for(let i=n.producers;i!==void 0;i=i.nextProducer)wS(i.producer,i)}function Pv(n){let e=n.producer,t=n.nextProducer,r=n.nextConsumer,i=n.prevConsumer;if(n.nextConsumer=void 0,n.prevConsumer=void 0,r!==void 0?r.prevConsumer=i:e.consumersTail=i,i!==void 0)i.nextConsumer=r;else if(e.consumers=r,!Ta(e)){let o=e.producers;for(;o!==void 0;)o=Pv(o)}return t}function Ta(n){return n.consumerIsAlwaysLive||n.consumers!==void 0}function _f(n){_F?.(n)}function bF(n,e){let t=e.producersTail;if(t!==void 0){let r=e.producers;do{if(r===n)return!0;if(r===t)break;r=r.nextProducer}while(r!==void 0)}return!1}function yf(n,e){let t=Object.create(wF);t.computation=n,e!==void 0&&(t.equal=e);let r=()=>{if(vf(t),Ia(t),t.value===xl)throw t.error;return t.value};return r[en]=t,_f(t),r}var ff=Symbol("UNSET"),hf=Symbol("COMPUTING"),xl=Symbol("ERRORED"),wF=re(H({},is),{value:ff,dirty:!0,error:null,equal:gf,kind:"computed",producerMustRecompute(n){return n.value===ff||n.value===hf},producerRecomputeValue(n){if(n.value===hf)throw new Error("");let e=n.value;n.value=hf;let t=os(n),r,i=!1;try{r=n.computation(),Ee(null),i=e!==ff&&e!==xl&&r!==xl&&n.equal(e,r)}catch(o){r=xl,n.error=o}finally{Sa(n,t)}if(i){n.value=e;return}n.value=r,n.version++}});function EF(){throw new Error}var ES=EF;function CS(n){ES(n)}function Av(n){ES=n}var CF=null;function kv(n,e){let t=Object.create(bf);t.value=n,e!==void 0&&(t.equal=e);let r=()=>IS(t);return r[en]=t,_f(t),[r,s=>Da(t,s),s=>Ov(t,s)]}function IS(n){return Ia(n),n.value}function Da(n,e){Mv()||CS(n),n.equal(n.value,e)||(n.value=e,IF(n))}function Ov(n,e){Mv()||CS(n),Da(n,e(n.value))}var bf=re(H({},is),{equal:gf,value:void 0,kind:"signal"});function IF(n){n.version++,bS(),xv(n),CF?.(n)}function ve(n){return typeof n=="function"}function xa(n){let t=n(r=>{Error.call(r),r.stack=new Error().stack});return t.prototype=Object.create(Error.prototype),t.prototype.constructor=t,t}var wf=xa(n=>function(t){n(this),this.message=t?`${t.length} errors occurred during unsubscription:
${t.map((r,i)=>`${i+1}) ${r.toString()}`).join(`
  `)}`:"",this.name="UnsubscriptionError",this.errors=t});function ss(n,e){if(n){let t=n.indexOf(e);0<=t&&n.splice(t,1)}}var dt=class n{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;let{_parentage:t}=this;if(t)if(this._parentage=null,Array.isArray(t))for(let o of t)o.remove(this);else t.remove(this);let{initialTeardown:r}=this;if(ve(r))try{r()}catch(o){e=o instanceof wf?o.errors:[o]}let{_finalizers:i}=this;if(i){this._finalizers=null;for(let o of i)try{SS(o)}catch(s){e=e??[],s instanceof wf?e=[...e,...s.errors]:e.push(s)}}if(e)throw new wf(e)}}add(e){var t;if(e&&e!==this)if(this.closed)SS(e);else{if(e instanceof n){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=(t=this._finalizers)!==null&&t!==void 0?t:[]).push(e)}}_hasParent(e){let{_parentage:t}=this;return t===e||Array.isArray(t)&&t.includes(e)}_addParent(e){let{_parentage:t}=this;this._parentage=Array.isArray(t)?(t.push(e),t):t?[t,e]:e}_removeParent(e){let{_parentage:t}=this;t===e?this._parentage=null:Array.isArray(t)&&ss(t,e)}remove(e){let{_finalizers:t}=this;t&&ss(t,e),e instanceof n&&e._removeParent(this)}};dt.EMPTY=(()=>{let n=new dt;return n.closed=!0,n})();var Rv=dt.EMPTY;function Ef(n){return n instanceof dt||n&&"closed"in n&&ve(n.remove)&&ve(n.add)&&ve(n.unsubscribe)}function SS(n){ve(n)?n():n.unsubscribe()}var gr={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1};var Ma={setTimeout(n,e,...t){let{delegate:r}=Ma;return r?.setTimeout?r.setTimeout(n,e,...t):setTimeout(n,e,...t)},clearTimeout(n){let{delegate:e}=Ma;return(e?.clearTimeout||clearTimeout)(n)},delegate:void 0};function Cf(n){Ma.setTimeout(()=>{let{onUnhandledError:e}=gr;if(e)e(n);else throw n})}function Al(){}var TS=Nv("C",void 0,void 0);function DS(n){return Nv("E",void 0,n)}function xS(n){return Nv("N",n,void 0)}function Nv(n,e,t){return{kind:n,value:e,error:t}}var as=null;function Pa(n){if(gr.useDeprecatedSynchronousErrorHandling){let e=!as;if(e&&(as={errorThrown:!1,error:null}),n(),e){let{errorThrown:t,error:r}=as;if(as=null,t)throw r}}else n()}function MS(n){gr.useDeprecatedSynchronousErrorHandling&&as&&(as.errorThrown=!0,as.error=n)}var cs=class extends dt{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,Ef(e)&&e.add(this)):this.destination=DF}static create(e,t,r){return new Aa(e,t,r)}next(e){this.isStopped?Lv(xS(e),this):this._next(e)}error(e){this.isStopped?Lv(DS(e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?Lv(TS,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}},SF=Function.prototype.bind;function Fv(n,e){return SF.call(n,e)}var Vv=class{constructor(e){this.partialObserver=e}next(e){let{partialObserver:t}=this;if(t.next)try{t.next(e)}catch(r){If(r)}}error(e){let{partialObserver:t}=this;if(t.error)try{t.error(e)}catch(r){If(r)}else If(e)}complete(){let{partialObserver:e}=this;if(e.complete)try{e.complete()}catch(t){If(t)}}},Aa=class extends cs{constructor(e,t,r){super();let i;if(ve(e)||!e)i={next:e??void 0,error:t??void 0,complete:r??void 0};else{let o;this&&gr.useDeprecatedNextContext?(o=Object.create(e),o.unsubscribe=()=>this.unsubscribe(),i={next:e.next&&Fv(e.next,o),error:e.error&&Fv(e.error,o),complete:e.complete&&Fv(e.complete,o)}):i=e}this.destination=new Vv(i)}};function If(n){gr.useDeprecatedSynchronousErrorHandling?MS(n):Cf(n)}function TF(n){throw n}function Lv(n,e){let{onStoppedNotification:t}=gr;t&&Ma.setTimeout(()=>t(n,e))}var DF={closed:!0,next:Al,error:TF,complete:Al};var ka=typeof Symbol=="function"&&Symbol.observable||"@@observable";function hn(n){return n}function Uv(...n){return jv(n)}function jv(n){return n.length===0?hn:n.length===1?n[0]:function(t){return n.reduce((r,i)=>i(r),t)}}var ge=(()=>{class n{constructor(t){t&&(this._subscribe=t)}lift(t){let r=new n;return r.source=this,r.operator=t,r}subscribe(t,r,i){let o=MF(t)?t:new Aa(t,r,i);return Pa(()=>{let{operator:s,source:a}=this;o.add(s?s.call(o,a):a?this._subscribe(o):this._trySubscribe(o))}),o}_trySubscribe(t){try{return this._subscribe(t)}catch(r){t.error(r)}}forEach(t,r){return r=PS(r),new r((i,o)=>{let s=new Aa({next:a=>{try{t(a)}catch(c){o(c),s.unsubscribe()}},error:o,complete:i});this.subscribe(s)})}_subscribe(t){var r;return(r=this.source)===null||r===void 0?void 0:r.subscribe(t)}[ka](){return this}pipe(...t){return jv(t)(this)}toPromise(t){return t=PS(t),new t((r,i)=>{let o;this.subscribe(s=>o=s,s=>i(s),()=>r(o))})}}return n.create=e=>new n(e),n})();function PS(n){var e;return(e=n??gr.Promise)!==null&&e!==void 0?e:Promise}function xF(n){return n&&ve(n.next)&&ve(n.error)&&ve(n.complete)}function MF(n){return n&&n instanceof cs||xF(n)&&Ef(n)}function Bv(n){return ve(n?.lift)}function Ie(n){return e=>{if(Bv(e))return e.lift(function(t){try{return n(t,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function ye(n,e,t,r,i){return new kl(n,e,t,r,i)}var kl=class extends cs{constructor(e,t,r,i,o,s){super(e),this.onFinalize=o,this.shouldUnsubscribe=s,this._next=t?function(a){try{t(a)}catch(c){e.error(c)}}:super._next,this._error=i?function(a){try{i(a)}catch(c){e.error(c)}finally{this.unsubscribe()}}:super._error,this._complete=r?function(){try{r()}catch(a){e.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){let{closed:t}=this;super.unsubscribe(),!t&&((e=this.onFinalize)===null||e===void 0||e.call(this))}}};function Oa(){return Ie((n,e)=>{let t=null;n._refCount++;let r=ye(e,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount){t=null;return}let i=n._connection,o=t;t=null,i&&(!o||i===o)&&i.unsubscribe(),e.unsubscribe()});n.subscribe(r),r.closed||(t=n.connect())})}var Ra=class extends ge{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._subject=null,this._refCount=0,this._connection=null,Bv(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){let e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;let{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new dt;let t=this.getSubject();e.add(this.source.subscribe(ye(t,void 0,()=>{this._teardown(),t.complete()},r=>{this._teardown(),t.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=dt.EMPTY)}return e}refCount(){return Oa()(this)}};var AS=xa(n=>function(){n(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var Ke=(()=>{class n extends ge{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(t){let r=new Sf(this,this);return r.operator=t,r}_throwIfClosed(){if(this.closed)throw new AS}next(t){Pa(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(let r of this.currentObservers)r.next(t)}})}error(t){Pa(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=t;let{observers:r}=this;for(;r.length;)r.shift().error(t)}})}complete(){Pa(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;let{observers:t}=this;for(;t.length;)t.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var t;return((t=this.observers)===null||t===void 0?void 0:t.length)>0}_trySubscribe(t){return this._throwIfClosed(),super._trySubscribe(t)}_subscribe(t){return this._throwIfClosed(),this._checkFinalizedStatuses(t),this._innerSubscribe(t)}_innerSubscribe(t){let{hasError:r,isStopped:i,observers:o}=this;return r||i?Rv:(this.currentObservers=null,o.push(t),new dt(()=>{this.currentObservers=null,ss(o,t)}))}_checkFinalizedStatuses(t){let{hasError:r,thrownError:i,isStopped:o}=this;r?t.error(i):o&&t.complete()}asObservable(){let t=new ge;return t.source=this,t}}return n.create=(e,t)=>new Sf(e,t),n})(),Sf=class extends Ke{constructor(e,t){super(),this.destination=e,this.source=t}next(e){var t,r;(r=(t=this.destination)===null||t===void 0?void 0:t.next)===null||r===void 0||r.call(t,e)}error(e){var t,r;(r=(t=this.destination)===null||t===void 0?void 0:t.error)===null||r===void 0||r.call(t,e)}complete(){var e,t;(t=(e=this.destination)===null||e===void 0?void 0:e.complete)===null||t===void 0||t.call(e)}_subscribe(e){var t,r;return(r=(t=this.source)===null||t===void 0?void 0:t.subscribe(e))!==null&&r!==void 0?r:Rv}};var yt=class extends Ke{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){let t=super._subscribe(e);return!t.closed&&e.next(this._value),t}getValue(){let{hasError:e,thrownError:t,_value:r}=this;if(e)throw t;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}};var $v={now(){return($v.delegate||Date).now()},delegate:void 0};var Tf=class extends dt{constructor(e,t){super()}schedule(e,t=0){return this}};var Ol={setInterval(n,e,...t){let{delegate:r}=Ol;return r?.setInterval?r.setInterval(n,e,...t):setInterval(n,e,...t)},clearInterval(n){let{delegate:e}=Ol;return(e?.clearInterval||clearInterval)(n)},delegate:void 0};var Na=class extends Tf{constructor(e,t){super(e,t),this.scheduler=e,this.work=t,this.pending=!1}schedule(e,t=0){var r;if(this.closed)return this;this.state=e;let i=this.id,o=this.scheduler;return i!=null&&(this.id=this.recycleAsyncId(o,i,t)),this.pending=!0,this.delay=t,this.id=(r=this.id)!==null&&r!==void 0?r:this.requestAsyncId(o,this.id,t),this}requestAsyncId(e,t,r=0){return Ol.setInterval(e.flush.bind(e,this),r)}recycleAsyncId(e,t,r=0){if(r!=null&&this.delay===r&&this.pending===!1)return t;t!=null&&Ol.clearInterval(t)}execute(e,t){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;let r=this._execute(e,t);if(r)return r;this.pending===!1&&this.id!=null&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(e,t){let r=!1,i;try{this.work(e)}catch(o){r=!0,i=o||new Error("Scheduled action threw falsy error")}if(r)return this.unsubscribe(),i}unsubscribe(){if(!this.closed){let{id:e,scheduler:t}=this,{actions:r}=t;this.work=this.state=this.scheduler=null,this.pending=!1,ss(r,this),e!=null&&(this.id=this.recycleAsyncId(t,e,null)),this.delay=null,super.unsubscribe()}}};var Fa=class n{constructor(e,t=n.now){this.schedulerActionCtor=e,this.now=t}schedule(e,t=0,r){return new this.schedulerActionCtor(this,e).schedule(r,t)}};Fa.now=$v.now;var La=class extends Fa{constructor(e,t=Fa.now){super(e,t),this.actions=[],this._active=!1}flush(e){let{actions:t}=this;if(this._active){t.push(e);return}let r;this._active=!0;do if(r=e.execute(e.state,e.delay))break;while(e=t.shift());if(this._active=!1,r){for(;e=t.shift();)e.unsubscribe();throw r}}};var Hv=new La(Na);var Df=class extends Na{constructor(e,t){super(e,t),this.scheduler=e,this.work=t}schedule(e,t=0){return t>0?super.schedule(e,t):(this.delay=t,this.state=e,this.scheduler.flush(this),this)}execute(e,t){return t>0||this.closed?super.execute(e,t):this._execute(e,t)}requestAsyncId(e,t,r=0){return r!=null&&r>0||r==null&&this.delay>0?super.requestAsyncId(e,t,r):(e.flush(this),0)}};var xf=class extends La{};var zv=new xf(Df);var tn=new ge(n=>n.complete());function kS(n){return n&&ve(n.schedule)}function OS(n){return n[n.length-1]}function Mf(n){return ve(OS(n))?n.pop():void 0}function io(n){return kS(OS(n))?n.pop():void 0}function Pf(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(n);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(n,r[i])&&(t[r[i]]=n[r[i]]);return t}function NS(n,e,t,r){function i(o){return o instanceof t?o:new t(function(s){s(o)})}return new(t||(t=Promise))(function(o,s){function a(f){try{u(r.next(f))}catch(m){s(m)}}function c(f){try{u(r.throw(f))}catch(m){s(m)}}function u(f){f.done?o(f.value):i(f.value).then(a,c)}u((r=r.apply(n,e||[])).next())})}function RS(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function ls(n){return this instanceof ls?(this.v=n,this):new ls(n)}function FS(n,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=t.apply(n,e||[]),i,o=[];return i=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),a("next"),a("throw"),a("return",s),i[Symbol.asyncIterator]=function(){return this},i;function s(E){return function(x){return Promise.resolve(x).then(E,m)}}function a(E,x){r[E]&&(i[E]=function(V){return new Promise(function(U,W){o.push([E,V,U,W])>1||c(E,V)})},x&&(i[E]=x(i[E])))}function c(E,x){try{u(r[E](x))}catch(V){_(o[0][3],V)}}function u(E){E.value instanceof ls?Promise.resolve(E.value.v).then(f,m):_(o[0][2],E)}function f(E){c("next",E)}function m(E){c("throw",E)}function _(E,x){E(x),o.shift(),o.length&&c(o[0][0],o[0][1])}}function LS(n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=n[Symbol.asyncIterator],t;return e?e.call(n):(n=typeof RS=="function"?RS(n):n[Symbol.iterator](),t={},r("next"),r("throw"),r("return"),t[Symbol.asyncIterator]=function(){return this},t);function r(o){t[o]=n[o]&&function(s){return new Promise(function(a,c){s=n[o](s),i(a,c,s.done,s.value)})}}function i(o,s,a,c){Promise.resolve(c).then(function(u){o({value:u,done:a})},s)}}var Af=n=>n&&typeof n.length=="number"&&typeof n!="function";function kf(n){return ve(n?.then)}function Of(n){return ve(n[ka])}function Rf(n){return Symbol.asyncIterator&&ve(n?.[Symbol.asyncIterator])}function Nf(n){return new TypeError(`You provided ${n!==null&&typeof n=="object"?"an invalid object":`'${n}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}function PF(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var Ff=PF();function Lf(n){return ve(n?.[Ff])}function Vf(n){return FS(this,arguments,function*(){let t=n.getReader();try{for(;;){let{value:r,done:i}=yield ls(t.read());if(i)return yield ls(void 0);yield yield ls(r)}}finally{t.releaseLock()}})}function Uf(n){return ve(n?.getReader)}function ft(n){if(n instanceof ge)return n;if(n!=null){if(Of(n))return AF(n);if(Af(n))return kF(n);if(kf(n))return OF(n);if(Rf(n))return VS(n);if(Lf(n))return RF(n);if(Uf(n))return NF(n)}throw Nf(n)}function AF(n){return new ge(e=>{let t=n[ka]();if(ve(t.subscribe))return t.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function kF(n){return new ge(e=>{for(let t=0;t<n.length&&!e.closed;t++)e.next(n[t]);e.complete()})}function OF(n){return new ge(e=>{n.then(t=>{e.closed||(e.next(t),e.complete())},t=>e.error(t)).then(null,Cf)})}function RF(n){return new ge(e=>{for(let t of n)if(e.next(t),e.closed)return;e.complete()})}function VS(n){return new ge(e=>{FF(n,e).catch(t=>e.error(t))})}function NF(n){return VS(Vf(n))}function FF(n,e){var t,r,i,o;return NS(this,void 0,void 0,function*(){try{for(t=LS(n);r=yield t.next(),!r.done;){let s=r.value;if(e.next(s),e.closed)return}}catch(s){i={error:s}}finally{try{r&&!r.done&&(o=t.return)&&(yield o.call(t))}finally{if(i)throw i.error}}e.complete()})}function Sn(n,e,t,r=0,i=!1){let o=e.schedule(function(){t(),i?n.add(this.schedule(null,r)):this.unsubscribe()},r);if(n.add(o),!i)return o}function oo(n,e=0){return Ie((t,r)=>{t.subscribe(ye(r,i=>Sn(r,n,()=>r.next(i),e),()=>Sn(r,n,()=>r.complete(),e),i=>Sn(r,n,()=>r.error(i),e)))})}function so(n,e=0){return Ie((t,r)=>{r.add(n.schedule(()=>t.subscribe(r),e))})}function US(n,e){return ft(n).pipe(so(e),oo(e))}function jS(n,e){return ft(n).pipe(so(e),oo(e))}function BS(n,e){return new ge(t=>{let r=0;return e.schedule(function(){r===n.length?t.complete():(t.next(n[r++]),t.closed||this.schedule())})})}function $S(n,e){return new ge(t=>{let r;return Sn(t,e,()=>{r=n[Ff](),Sn(t,e,()=>{let i,o;try{({value:i,done:o}=r.next())}catch(s){t.error(s);return}o?t.complete():t.next(i)},0,!0)}),()=>ve(r?.return)&&r.return()})}function jf(n,e){if(!n)throw new Error("Iterable cannot be null");return new ge(t=>{Sn(t,e,()=>{let r=n[Symbol.asyncIterator]();Sn(t,e,()=>{r.next().then(i=>{i.done?t.complete():t.next(i.value)})},0,!0)})})}function HS(n,e){return jf(Vf(n),e)}function zS(n,e){if(n!=null){if(Of(n))return US(n,e);if(Af(n))return BS(n,e);if(kf(n))return jS(n,e);if(Rf(n))return jf(n,e);if(Lf(n))return $S(n,e);if(Uf(n))return HS(n,e)}throw Nf(n)}function Ye(n,e){return e?zS(n,e):ft(n)}function se(...n){let e=io(n);return Ye(n,e)}function Va(n,e){let t=ve(n)?n:()=>n,r=i=>i.error(t());return new ge(e?i=>e.schedule(r,0,i):r)}function qv(n){return!!n&&(n instanceof ge||ve(n.lift)&&ve(n.subscribe))}var yi=xa(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});function Ce(n,e){return Ie((t,r)=>{let i=0;t.subscribe(ye(r,o=>{r.next(n.call(e,o,i++))}))})}var{isArray:LF}=Array;function VF(n,e){return LF(e)?n(...e):n(e)}function Bf(n){return Ce(e=>VF(n,e))}var{isArray:UF}=Array,{getPrototypeOf:jF,prototype:BF,keys:$F}=Object;function $f(n){if(n.length===1){let e=n[0];if(UF(e))return{args:e,keys:null};if(HF(e)){let t=$F(e);return{args:t.map(r=>e[r]),keys:t}}}return{args:n,keys:null}}function HF(n){return n&&typeof n=="object"&&jF(n)===BF}function Hf(n,e){return n.reduce((t,r,i)=>(t[r]=e[i],t),{})}function Rl(...n){let e=io(n),t=Mf(n),{args:r,keys:i}=$f(n);if(r.length===0)return Ye([],e);let o=new ge(zF(r,e,i?s=>Hf(i,s):hn));return t?o.pipe(Bf(t)):o}function zF(n,e,t=hn){return r=>{qS(e,()=>{let{length:i}=n,o=new Array(i),s=i,a=i;for(let c=0;c<i;c++)qS(e,()=>{let u=Ye(n[c],e),f=!1;u.subscribe(ye(r,m=>{o[c]=m,f||(f=!0,a--),a||r.next(t(o.slice()))},()=>{--s||r.complete()}))},r)},r)}}function qS(n,e,t){n?Sn(t,n,e):e()}function WS(n,e,t,r,i,o,s,a){let c=[],u=0,f=0,m=!1,_=()=>{m&&!c.length&&!u&&e.complete()},E=V=>u<r?x(V):c.push(V),x=V=>{o&&e.next(V),u++;let U=!1;ft(t(V,f++)).subscribe(ye(e,W=>{i?.(W),o?E(W):e.next(W)},()=>{U=!0},void 0,()=>{if(U)try{for(u--;c.length&&u<r;){let W=c.shift();s?Sn(e,s,()=>x(W)):x(W)}_()}catch(W){e.error(W)}}))};return n.subscribe(ye(e,E,()=>{m=!0,_()})),()=>{a?.()}}function st(n,e,t=1/0){return ve(e)?st((r,i)=>Ce((o,s)=>e(r,o,i,s))(ft(n(r,i))),t):(typeof e=="number"&&(t=e),Ie((r,i)=>WS(r,i,n,t)))}function ao(n=1/0){return st(hn,n)}function GS(){return ao(1)}function Ua(...n){return GS()(Ye(n,io(n)))}function Nl(n){return new ge(e=>{ft(n()).subscribe(e)})}function Wv(...n){let e=Mf(n),{args:t,keys:r}=$f(n),i=new ge(o=>{let{length:s}=t;if(!s){o.complete();return}let a=new Array(s),c=s,u=s;for(let f=0;f<s;f++){let m=!1;ft(t[f]).subscribe(ye(o,_=>{m||(m=!0,u--),a[f]=_},()=>c--,void 0,()=>{(!c||!m)&&(u||o.next(r?Hf(r,a):a),o.complete())}))}});return e?i.pipe(Bf(e)):i}function Tt(n,e){return Ie((t,r)=>{let i=0;t.subscribe(ye(r,o=>n.call(e,o,i++)&&r.next(o)))})}function bi(n){return Ie((e,t)=>{let r=null,i=!1,o;r=e.subscribe(ye(t,void 0,void 0,s=>{o=ft(n(s,bi(n)(e))),r?(r.unsubscribe(),r=null,o.subscribe(t)):i=!0})),i&&(r.unsubscribe(),r=null,o.subscribe(t))})}function KS(n,e,t,r,i){return(o,s)=>{let a=t,c=e,u=0;o.subscribe(ye(s,f=>{let m=u++;c=a?n(c,f,m):(a=!0,f),r&&s.next(c)},i&&(()=>{a&&s.next(c),s.complete()})))}}function wi(n,e){return ve(e)?st(n,e,1):st(n,1)}function co(n){return Ie((e,t)=>{let r=!1;e.subscribe(ye(t,i=>{r=!0,t.next(i)},()=>{r||t.next(n),t.complete()}))})}function mr(n){return n<=0?()=>tn:Ie((e,t)=>{let r=0;e.subscribe(ye(t,i=>{++r<=n&&(t.next(i),n<=r&&t.complete())}))})}function Gv(n,e=hn){return n=n??qF,Ie((t,r)=>{let i,o=!0;t.subscribe(ye(r,s=>{let a=e(s);(o||!n(i,a))&&(o=!1,i=a,r.next(s))}))})}function qF(n,e){return n===e}function zf(n=WF){return Ie((e,t)=>{let r=!1;e.subscribe(ye(t,i=>{r=!0,t.next(i)},()=>r?t.complete():t.error(n())))})}function WF(){return new yi}function Fl(n){return Ie((e,t)=>{try{e.subscribe(t)}finally{t.add(n)}})}function Ei(n,e){let t=arguments.length>=2;return r=>r.pipe(n?Tt((i,o)=>n(i,o,r)):hn,mr(1),t?co(e):zf(()=>new yi))}function Kv(n,e,t,r){return Ie((i,o)=>{let s;!e||typeof e=="function"?s=e:{duration:t,element:s,connector:r}=e;let a=new Map,c=x=>{a.forEach(x),x(o)},u=x=>c(V=>V.error(x)),f=0,m=!1,_=new kl(o,x=>{try{let V=n(x),U=a.get(V);if(!U){a.set(V,U=r?r():new Ke);let W=E(V,U);if(o.next(W),t){let oe=ye(U,()=>{U.complete(),oe?.unsubscribe()},void 0,void 0,()=>a.delete(V));_.add(ft(t(W)).subscribe(oe))}}U.next(s?s(x):x)}catch(V){u(V)}},()=>c(x=>x.complete()),u,()=>a.clear(),()=>(m=!0,f===0));i.subscribe(_);function E(x,V){let U=new ge(W=>{f++;let oe=V.subscribe(W);return()=>{oe.unsubscribe(),--f===0&&m&&_.unsubscribe()}});return U.key=x,U}})}function ja(n){return n<=0?()=>tn:Ie((e,t)=>{let r=[];e.subscribe(ye(t,i=>{r.push(i),n<r.length&&r.shift()},()=>{for(let i of r)t.next(i);t.complete()},void 0,()=>{r=null}))})}function Yv(n,e){let t=arguments.length>=2;return r=>r.pipe(n?Tt((i,o)=>n(i,o,r)):hn,ja(1),t?co(e):zf(()=>new yi))}function Qv(){return Ie((n,e)=>{let t,r=!1;n.subscribe(ye(e,i=>{let o=t;t=i,r&&e.next([o,i]),r=!0}))})}function Zv(n,e){return Ie(KS(n,e,arguments.length>=2,!0))}function Ll(...n){let e=io(n);return Ie((t,r)=>{(e?Ua(n,t,e):Ua(n,t)).subscribe(r)})}function bt(n,e){return Ie((t,r)=>{let i=null,o=0,s=!1,a=()=>s&&!i&&r.complete();t.subscribe(ye(r,c=>{i?.unsubscribe();let u=0,f=o++;ft(n(c,f)).subscribe(i=ye(r,m=>r.next(e?e(c,m,f,u++):m),()=>{i=null,a()}))},()=>{s=!0,a()}))})}function Ci(n){return Ie((e,t)=>{ft(n).subscribe(ye(t,()=>t.complete(),Al)),!t.closed&&e.subscribe(t)})}function kt(n,e,t){let r=ve(n)||e||t?{next:n,error:e,complete:t}:n;return r?Ie((i,o)=>{var s;(s=r.subscribe)===null||s===void 0||s.call(r);let a=!0;i.subscribe(ye(o,c=>{var u;(u=r.next)===null||u===void 0||u.call(r,c),o.next(c)},()=>{var c;a=!1,(c=r.complete)===null||c===void 0||c.call(r),o.complete()},c=>{var u;a=!1,(u=r.error)===null||u===void 0||u.call(r,c),o.error(c)},()=>{var c,u;a&&((c=r.unsubscribe)===null||c===void 0||c.call(r)),(u=r.finalize)===null||u===void 0||u.call(r)}))}):hn}function YS(n){let e=Ee(null);try{return n()}finally{Ee(e)}}var Yf="https://angular.dev/best-practices/security#preventing-cross-site-scripting-xss",X=class extends Error{code;constructor(e,t){super(ps(e,t)),this.code=e}};function GF(n){return`NG0${Math.abs(n)}`}function ps(n,e){return`${GF(n)}${e?": "+e:""}`}var _r=globalThis;function Ue(n){for(let e in n)if(n[e]===Ue)return e;throw Error("")}function XS(n,e){for(let t in e)e.hasOwnProperty(t)&&!n.hasOwnProperty(t)&&(n[t]=e[t])}function Si(n){if(typeof n=="string")return n;if(Array.isArray(n))return`[${n.map(Si).join(", ")}]`;if(n==null)return""+n;let e=n.overriddenName||n.name;if(e)return`${e}`;let t=n.toString();if(t==null)return""+t;let r=t.indexOf(`
`);return r>=0?t.slice(0,r):t}function u0(n,e){return n?e?`${n} ${e}`:n:e||""}var KF=Ue({__forward_ref__:Ue});function Fn(n){return n.__forward_ref__=Fn,n.toString=function(){return Si(this())},n}function Ht(n){return d0(n)?n():n}function d0(n){return typeof n=="function"&&n.hasOwnProperty(KF)&&n.__forward_ref__===Fn}function JS(n,e){n==null&&f0(e,n,null,"!=")}function f0(n,e,t,r){throw new Error(`ASSERTION ERROR: ${n}`+(r==null?"":` [Expected=> ${t} ${r} ${e} <=Actual]`))}function Q(n){return{token:n.token,providedIn:n.providedIn||null,factory:n.factory,value:void 0}}function Gn(n){return{providers:n.providers||[],imports:n.imports||[]}}function $l(n){return YF(n,Qf)}function h0(n){return $l(n)!==null}function YF(n,e){return n.hasOwnProperty(e)&&n[e]||null}function QF(n){let e=n?.[Qf]??null;return e||null}function Jv(n){return n&&n.hasOwnProperty(Wf)?n[Wf]:null}var Qf=Ue({\u0275prov:Ue}),Wf=Ue({\u0275inj:Ue}),J=class{_desc;ngMetadataName="InjectionToken";\u0275prov;constructor(e,t){this._desc=e,this.\u0275prov=void 0,typeof t=="number"?this.__NG_ELEMENT_ID__=t:t!==void 0&&(this.\u0275prov=Q({token:this,providedIn:t.providedIn||"root",factory:t.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}};function p0(n){return n&&!!n.\u0275providers}var g0=Ue({\u0275cmp:Ue}),m0=Ue({\u0275dir:Ue}),v0=Ue({\u0275pipe:Ue}),_0=Ue({\u0275mod:Ue}),jl=Ue({\u0275fac:Ue}),gs=Ue({__NG_ELEMENT_ID__:Ue}),QS=Ue({__NG_ENV_ID__:Ue});function fo(n){return typeof n=="string"?n:n==null?"":String(n)}function Gf(n){return typeof n=="function"?n.name||n.toString():typeof n=="object"&&n!=null&&typeof n.type=="function"?n.type.name||n.type.toString():fo(n)}var y0=Ue({ngErrorCode:Ue}),eT=Ue({ngErrorMessage:Ue}),Ul=Ue({ngTokenPath:Ue});function b0(n,e){return tT("",-200,e)}function Zf(n,e){throw new X(-201,!1)}function ZF(n,e){n[Ul]??=[];let t=n[Ul],r;typeof e=="object"&&"multi"in e&&e?.multi===!0?(JS(e.provide,"Token with multi: true should have a provide property"),r=Gf(e.provide)):r=Gf(e),t[0]!==r&&n[Ul].unshift(r)}function XF(n,e){let t=n[Ul],r=n[y0],i=n[eT]||n.message;return n.message=eL(i,r,t,e),n}function tT(n,e,t){let r=new X(e,n);return r[y0]=e,r[eT]=n,t&&(r[Ul]=t),r}function JF(n){return n[y0]}function eL(n,e,t=[],r=null){let i="";t&&t.length>1&&(i=` Path: ${t.join(" -> ")}.`);let o=r?` Source: ${r}.`:"";return ps(e,`${n}${o}${i}`)}var e0;function nT(){return e0}function pn(n){let e=e0;return e0=n,e}function w0(n,e,t){let r=$l(n);if(r&&r.providedIn=="root")return r.value===void 0?r.value=r.factory():r.value;if(t&8)return null;if(e!==void 0)return e;Zf(n,"Injector")}var tL={},us=tL,t0="__NG_DI_FLAG__",n0=class{injector;constructor(e){this.injector=e}retrieve(e,t){let r=ds(t)||0;try{return this.injector.get(e,r&8?null:us,r)}catch(i){if(Ca(i))return i;throw i}}};function nL(n,e=0){let t=uf();if(t===void 0)throw new X(-203,!1);if(t===null)return w0(n,void 0,e);{let r=rL(e),i=t.retrieve(n,r);if(Ca(i)){if(r.optional)return null;throw i}return i}}function ie(n,e=0){return(nT()||nL)(Ht(n),e)}function k(n,e){return ie(n,ds(e))}function ds(n){return typeof n>"u"||typeof n=="number"?n:0|(n.optional&&8)|(n.host&&1)|(n.self&&2)|(n.skipSelf&&4)}function rL(n){return{optional:!!(n&8),host:!!(n&1),self:!!(n&2),skipSelf:!!(n&4)}}function r0(n){let e=[];for(let t=0;t<n.length;t++){let r=Ht(n[t]);if(Array.isArray(r)){if(r.length===0)throw new X(900,!1);let i,o=0;for(let s=0;s<r.length;s++){let a=r[s],c=iL(a);typeof c=="number"?c===-1?i=a.token:o|=c:i=a}e.push(ie(i,o))}else e.push(ie(r))}return e}function E0(n,e){return n[t0]=e,n.prototype[t0]=e,n}function iL(n){return n[t0]}function lo(n,e){let t=n.hasOwnProperty(jl);return t?n[jl]:null}function rT(n,e,t){if(n.length!==e.length)return!1;for(let r=0;r<n.length;r++){let i=n[r],o=e[r];if(t&&(i=t(i),o=t(o)),o!==i)return!1}return!0}function iT(n){return n.flat(Number.POSITIVE_INFINITY)}function Xf(n,e){n.forEach(t=>Array.isArray(t)?Xf(t,e):e(t))}function C0(n,e,t){e>=n.length?n.push(t):n.splice(e,0,t)}function Hl(n,e){return e>=n.length-1?n.pop():n.splice(e,1)[0]}function oT(n,e,t,r){let i=n.length;if(i==e)n.push(t,r);else if(i===1)n.push(r,n[0]),n[0]=t;else{for(i--,n.push(n[i-1],n[i]);i>e;){let o=i-2;n[i]=n[o],i--}n[e]=t,n[e+1]=r}}function sT(n,e,t){let r=$a(n,e);return r>=0?n[r|1]=t:(r=~r,oT(n,r,e,t)),r}function Jf(n,e){let t=$a(n,e);if(t>=0)return n[t|1]}function $a(n,e){return oL(n,e,1)}function oL(n,e,t){let r=0,i=n.length>>t;for(;i!==r;){let o=r+(i-r>>1),s=n[o<<t];if(e===s)return o<<t;s>e?i=o:r=o+1}return~(i<<t)}var ho={},Nn=[],Di=new J(""),I0=new J("",-1),S0=new J(""),Bl=class{get(e,t=us){if(t===us){let i=tT("",-201);throw i.name="\u0275NotFound",i}return t}};function T0(n){return n[_0]||null}function xi(n){return n[g0]||null}function D0(n){return n[m0]||null}function aT(n){return n[v0]||null}function nn(n){return{\u0275providers:n}}function cT(n){return nn([{provide:Di,multi:!0,useValue:n}])}function lT(...n){return{\u0275providers:x0(!0,n),\u0275fromNgModule:!0}}function x0(n,...e){let t=[],r=new Set,i,o=s=>{t.push(s)};return Xf(e,s=>{let a=s;Kf(a,o,[],r)&&(i||=[],i.push(a))}),i!==void 0&&uT(i,o),t}function uT(n,e){for(let t=0;t<n.length;t++){let{ngModule:r,providers:i}=n[t];M0(i,o=>{e(o,r)})}}function Kf(n,e,t,r){if(n=Ht(n),!n)return!1;let i=null,o=Jv(n),s=!o&&xi(n);if(!o&&!s){let c=n.ngModule;if(o=Jv(c),o)i=c;else return!1}else{if(s&&!s.standalone)return!1;i=n}let a=r.has(i);if(s){if(a)return!1;if(r.add(i),s.dependencies){let c=typeof s.dependencies=="function"?s.dependencies():s.dependencies;for(let u of c)Kf(u,e,t,r)}}else if(o){if(o.imports!=null&&!a){r.add(i);let u;try{Xf(o.imports,f=>{Kf(f,e,t,r)&&(u||=[],u.push(f))})}finally{}u!==void 0&&uT(u,e)}if(!a){let u=lo(i)||(()=>new i);e({provide:i,useFactory:u,deps:Nn},i),e({provide:S0,useValue:i,multi:!0},i),e({provide:Di,useValue:()=>ie(i),multi:!0},i)}let c=o.providers;if(c!=null&&!a){let u=n;M0(c,f=>{e(f,u)})}}else return!1;return i!==n&&n.providers!==void 0}function M0(n,e){for(let t of n)p0(t)&&(t=t.\u0275providers),Array.isArray(t)?M0(t,e):e(t)}var sL=Ue({provide:String,useValue:Ue});function dT(n){return n!==null&&typeof n=="object"&&sL in n}function aL(n){return!!(n&&n.useExisting)}function cL(n){return!!(n&&n.useFactory)}function fs(n){return typeof n=="function"}function fT(n){return!!n.useClass}var zl=new J(""),qf={},ZS={},Xv;function ql(){return Xv===void 0&&(Xv=new Bl),Xv}var mt=class{},hs=class extends mt{parent;source;scopes;records=new Map;_ngOnDestroyHooks=new Set;_onDestroyHooks=[];get destroyed(){return this._destroyed}_destroyed=!1;injectorDefTypes;constructor(e,t,r,i){super(),this.parent=t,this.source=r,this.scopes=i,o0(e,s=>this.processProvider(s)),this.records.set(I0,Ba(void 0,this)),i.has("environment")&&this.records.set(mt,Ba(void 0,this));let o=this.records.get(zl);o!=null&&typeof o.value=="string"&&this.scopes.add(o.value),this.injectorDefTypes=new Set(this.get(S0,Nn,{self:!0}))}retrieve(e,t){let r=ds(t)||0;try{return this.get(e,us,r)}catch(i){if(Ca(i))return i;throw i}}destroy(){Vl(this),this._destroyed=!0;let e=Ee(null);try{for(let r of this._ngOnDestroyHooks)r.ngOnDestroy();let t=this._onDestroyHooks;this._onDestroyHooks=[];for(let r of t)r()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),Ee(e)}}onDestroy(e){return Vl(this),this._onDestroyHooks.push(e),()=>this.removeOnDestroy(e)}runInContext(e){Vl(this);let t=Br(this),r=pn(void 0),i;try{return e()}finally{Br(t),pn(r)}}get(e,t=us,r){if(Vl(this),e.hasOwnProperty(QS))return e[QS](this);let i=ds(r),o,s=Br(this),a=pn(void 0);try{if(!(i&4)){let u=this.records.get(e);if(u===void 0){let f=hL(e)&&$l(e);f&&this.injectableDefInScope(f)?u=Ba(i0(e),qf):u=null,this.records.set(e,u)}if(u!=null)return this.hydrate(e,u,i)}let c=i&2?ql():this.parent;return t=i&8&&t===us?null:t,c.get(e,t)}catch(c){let u=JF(c);throw u===-200||u===-201?new X(u,null):c}finally{pn(a),Br(s)}}resolveInjectorInitializers(){let e=Ee(null),t=Br(this),r=pn(void 0),i;try{let o=this.get(Di,Nn,{self:!0});for(let s of o)s()}finally{Br(t),pn(r),Ee(e)}}toString(){let e=[],t=this.records;for(let r of t.keys())e.push(Si(r));return`R3Injector[${e.join(", ")}]`}processProvider(e){e=Ht(e);let t=fs(e)?e:Ht(e&&e.provide),r=uL(e);if(!fs(e)&&e.multi===!0){let i=this.records.get(t);i||(i=Ba(void 0,qf,!0),i.factory=()=>r0(i.multi),this.records.set(t,i)),t=e,i.multi.push(e)}this.records.set(t,r)}hydrate(e,t,r){let i=Ee(null);try{if(t.value===ZS)throw b0(Si(e));return t.value===qf&&(t.value=ZS,t.value=t.factory(void 0,r)),typeof t.value=="object"&&t.value&&fL(t.value)&&this._ngOnDestroyHooks.add(t.value),t.value}finally{Ee(i)}}injectableDefInScope(e){if(!e.providedIn)return!1;let t=Ht(e.providedIn);return typeof t=="string"?t==="any"||this.scopes.has(t):this.injectorDefTypes.has(t)}removeOnDestroy(e){let t=this._onDestroyHooks.indexOf(e);t!==-1&&this._onDestroyHooks.splice(t,1)}};function i0(n){let e=$l(n),t=e!==null?e.factory:lo(n);if(t!==null)return t;if(n instanceof J)throw new X(204,!1);if(n instanceof Function)return lL(n);throw new X(204,!1)}function lL(n){if(n.length>0)throw new X(204,!1);let t=QF(n);return t!==null?()=>t.factory(n):()=>new n}function uL(n){if(dT(n))return Ba(void 0,n.useValue);{let e=P0(n);return Ba(e,qf)}}function P0(n,e,t){let r;if(fs(n)){let i=Ht(n);return lo(i)||i0(i)}else if(dT(n))r=()=>Ht(n.useValue);else if(cL(n))r=()=>n.useFactory(...r0(n.deps||[]));else if(aL(n))r=(i,o)=>ie(Ht(n.useExisting),o!==void 0&&o&8?8:void 0);else{let i=Ht(n&&(n.useClass||n.provide));if(dL(n))r=()=>new i(...r0(n.deps));else return lo(i)||i0(i)}return r}function Vl(n){if(n.destroyed)throw new X(205,!1)}function Ba(n,e,t=!1){return{factory:n,value:e,multi:t?[]:void 0}}function dL(n){return!!n.deps}function fL(n){return n!==null&&typeof n=="object"&&typeof n.ngOnDestroy=="function"}function hL(n){return typeof n=="function"||typeof n=="object"&&n.ngMetadataName==="InjectionToken"}function o0(n,e){for(let t of n)Array.isArray(t)?o0(t,e):t&&p0(t)?o0(t.\u0275providers,e):e(t)}function wt(n,e){let t;n instanceof hs?(Vl(n),t=n):t=new n0(n);let r,i=Br(t),o=pn(void 0);try{return e()}finally{Br(i),pn(o)}}function hT(){return nT()!==void 0||uf()!=null}var yr=0,ue=1,pe=2,Ot=3,Kn=4,Yn=5,Wl=6,Ha=7,rn=8,ms=9,$r=10,at=11,za=12,A0=13,vs=14,Qn=15,po=16,_s=17,Hr=18,Gl=19,k0=20,Ii=21,eh=22,Kl=23,Ln=24,ys=25,Rt=26,pT=1;var go=7,Yl=8,bs=9,gn=10;function zr(n){return Array.isArray(n)&&typeof n[pT]=="object"}function br(n){return Array.isArray(n)&&n[pT]===!0}function O0(n){return(n.flags&4)!==0}function mo(n){return n.componentOffset>-1}function qa(n){return(n.flags&1)===1}function qr(n){return!!n.template}function Wa(n){return(n[pe]&512)!==0}function ws(n){return(n[pe]&256)===256}var R0="svg",gT="math";function Zn(n){for(;Array.isArray(n);)n=n[yr];return n}function N0(n,e){return Zn(e[n])}function wr(n,e){return Zn(e[n.index])}function th(n,e){return n.data[e]}function F0(n,e){return n[e]}function L0(n,e,t,r){t>=n.data.length&&(n.data[t]=null,n.blueprint[t]=null),e[t]=r}function Xn(n,e){let t=e[n];return zr(t)?t:t[yr]}function mT(n){return(n[pe]&4)===4}function nh(n){return(n[pe]&128)===128}function vT(n){return br(n[Ot])}function Es(n,e){return e==null?null:n[e]}function V0(n){n[_s]=0}function U0(n){n[pe]&1024||(n[pe]|=1024,nh(n)&&Ga(n))}function _T(n,e){for(;n>0;)e=e[vs],n--;return e}function Ql(n){return!!(n[pe]&9216||n[Ln]?.dirty)}function rh(n){n[$r].changeDetectionScheduler?.notify(8),n[pe]&64&&(n[pe]|=1024),Ql(n)&&Ga(n)}function Ga(n){n[$r].changeDetectionScheduler?.notify(0);let e=uo(n);for(;e!==null&&!(e[pe]&8192||(e[pe]|=8192,!nh(e)));)e=uo(e)}function j0(n,e){if(ws(n))throw new X(911,!1);n[Ii]===null&&(n[Ii]=[]),n[Ii].push(e)}function yT(n,e){if(n[Ii]===null)return;let t=n[Ii].indexOf(e);t!==-1&&n[Ii].splice(t,1)}function uo(n){let e=n[Ot];return br(e)?e[Ot]:e}function B0(n){return n[Ha]??=[]}function $0(n){return n.cleanup??=[]}function bT(n,e,t,r){let i=B0(e);i.push(t),n.firstCreatePass&&$0(n).push(r,i.length-1)}var be={lFrame:RT(null),bindingsEnabled:!0,skipHydrationRootTNode:null},Zl=(function(n){return n[n.Off=0]="Off",n[n.Exhaustive=1]="Exhaustive",n[n.OnlyDirtyViews=2]="OnlyDirtyViews",n})(Zl||{}),pL=0,s0=!1;function wT(){return be.lFrame.elementDepthCount}function ET(){be.lFrame.elementDepthCount++}function H0(){be.lFrame.elementDepthCount--}function ih(){return be.bindingsEnabled}function CT(){return be.skipHydrationRootTNode!==null}function z0(n){return be.skipHydrationRootTNode===n}function q0(){be.skipHydrationRootTNode=null}function Te(){return be.lFrame.lView}function Nt(){return be.lFrame.tView}function N(n){return be.lFrame.contextLView=n,n[rn]}function F(n){return be.lFrame.contextLView=null,n}function Dt(){let n=W0();for(;n!==null&&n.type===64;)n=n.parent;return n}function W0(){return be.lFrame.currentTNode}function IT(){let n=be.lFrame,e=n.currentTNode;return n.isParent?e:e.parent}function Ka(n,e){let t=be.lFrame;t.currentTNode=n,t.isParent=e}function G0(){return be.lFrame.isParent}function ST(){be.lFrame.isParent=!1}function TT(){return be.lFrame.contextLView}function K0(n){f0("Must never be called in production mode"),pL=n}function Y0(){return s0}function Q0(n){let e=s0;return s0=n,e}function oh(){let n=be.lFrame,e=n.bindingRootIndex;return e===-1&&(e=n.bindingRootIndex=n.tView.bindingStartIndex),e}function DT(){return be.lFrame.bindingIndex}function xT(n){return be.lFrame.bindingIndex=n}function Xl(){return be.lFrame.bindingIndex++}function Z0(n){let e=be.lFrame,t=e.bindingIndex;return e.bindingIndex=e.bindingIndex+n,t}function MT(){return be.lFrame.inI18n}function PT(n,e){let t=be.lFrame;t.bindingIndex=t.bindingRootIndex=n,sh(e)}function AT(){return be.lFrame.currentDirectiveIndex}function sh(n){be.lFrame.currentDirectiveIndex=n}function kT(n){let e=be.lFrame.currentDirectiveIndex;return e===-1?null:n[e]}function X0(){return be.lFrame.currentQueryIndex}function ah(n){be.lFrame.currentQueryIndex=n}function gL(n){let e=n[ue];return e.type===2?e.declTNode:e.type===1?n[Yn]:null}function J0(n,e,t){if(t&4){let i=e,o=n;for(;i=i.parent,i===null&&!(t&1);)if(i=gL(o),i===null||(o=o[vs],i.type&10))break;if(i===null)return!1;e=i,n=o}let r=be.lFrame=OT();return r.currentTNode=e,r.lView=n,!0}function ch(n){let e=OT(),t=n[ue];be.lFrame=e,e.currentTNode=t.firstChild,e.lView=n,e.tView=t,e.contextLView=n,e.bindingIndex=t.bindingStartIndex,e.inI18n=!1}function OT(){let n=be.lFrame,e=n===null?null:n.child;return e===null?RT(n):e}function RT(n){let e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:n,child:null,inI18n:!1};return n!==null&&(n.child=e),e}function NT(){let n=be.lFrame;return be.lFrame=n.parent,n.currentTNode=null,n.lView=null,n}var e_=NT;function lh(){let n=NT();n.isParent=!0,n.tView=null,n.selectedIndex=-1,n.contextLView=null,n.elementDepthCount=0,n.currentDirectiveIndex=-1,n.currentNamespace=null,n.bindingRootIndex=-1,n.bindingIndex=-1,n.currentQueryIndex=0}function FT(n){return(be.lFrame.contextLView=_T(n,be.lFrame.contextLView))[rn]}function vo(){return be.lFrame.selectedIndex}function _o(n){be.lFrame.selectedIndex=n}function uh(){let n=be.lFrame;return th(n.tView,n.selectedIndex)}function ce(){be.lFrame.currentNamespace=R0}function Ae(){mL()}function mL(){be.lFrame.currentNamespace=null}function LT(){return be.lFrame.currentNamespace}var VT=!0;function dh(){return VT}function Jl(n){VT=n}var vL={elements:void 0};function fh(){return vL}function a0(n,e=null,t=null,r){let i=t_(n,e,t,r);return i.resolveInjectorInitializers(),i}function t_(n,e=null,t=null,r,i=new Set){let o=[t||Nn,lT(n)];return r=r||(typeof n=="object"?void 0:Si(n)),new hs(o,e||ql(),r||null,i)}var Qe=class n{static THROW_IF_NOT_FOUND=us;static NULL=new Bl;static create(e,t){if(Array.isArray(e))return a0({name:""},t,e,"");{let r=e.name??"";return a0({name:r},e.parent,e.providers,r)}}static \u0275prov=Q({token:n,providedIn:"any",factory:()=>ie(I0)});static __NG_ELEMENT_ID__=-1},vt=new J(""),Er=(()=>{class n{static __NG_ELEMENT_ID__=_L;static __NG_ENV_ID__=t=>t}return n})(),c0=class extends Er{_lView;constructor(e){super(),this._lView=e}get destroyed(){return ws(this._lView)}onDestroy(e){let t=this._lView;return j0(t,e),()=>yT(t,e)}};function _L(){return new c0(Te())}var vr=class{_console=console;handleError(e){this._console.error("ERROR",e)}},mn=new J("",{providedIn:"root",factory:()=>{let n=k(mt),e;return t=>{n.destroyed&&!e?setTimeout(()=>{throw t}):(e??=n.get(vr),e.handleError(t))}}}),UT={provide:Di,useValue:()=>void k(vr),multi:!0},yL=new J("",{providedIn:"root",factory:()=>{let n=k(vt).defaultView;if(!n)return;let e=k(mn),t=o=>{e(o.reason),o.preventDefault()},r=o=>{o.error?e(o.error):e(new Error(o.message,{cause:o})),o.preventDefault()},i=()=>{n.addEventListener("unhandledrejection",t),n.addEventListener("error",r)};typeof Zone<"u"?Zone.root.run(i):i(),k(Er).onDestroy(()=>{n.removeEventListener("error",r),n.removeEventListener("unhandledrejection",t)})}});function n_(){return nn([cT(()=>void k(yL))])}function r_(n){return typeof n=="function"&&n[en]!==void 0}function Tn(n,e){let[t,r,i]=kv(n,e?.equal),o=t,s=o[en];return o.set=r,o.update=i,o.asReadonly=jT.bind(o),o}function jT(){let n=this[en];if(n.readonlyFn===void 0){let e=()=>this();e[en]=n,n.readonlyFn=e}return n.readonlyFn}function i_(n){return r_(n)&&typeof n.set=="function"}var Ti=class{},eu=new J("",{providedIn:"root",factory:()=>!1});var o_=new J(""),s_=new J("");var hh=(()=>{class n{view;node;constructor(t,r){this.view=t,this.node=r}static __NG_ELEMENT_ID__=bL}return n})();function bL(){return new hh(Te(),Dt())}var Wr=(()=>{class n{taskId=0;pendingTasks=new Set;destroyed=!1;pendingTask=new yt(!1);get hasPendingTasks(){return this.destroyed?!1:this.pendingTask.value}get hasPendingTasksObservable(){return this.destroyed?new ge(t=>{t.next(!1),t.complete()}):this.pendingTask}add(){!this.hasPendingTasks&&!this.destroyed&&this.pendingTask.next(!0);let t=this.taskId++;return this.pendingTasks.add(t),t}has(t){return this.pendingTasks.has(t)}remove(t){this.pendingTasks.delete(t),this.pendingTasks.size===0&&this.hasPendingTasks&&this.pendingTask.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this.hasPendingTasks&&this.pendingTask.next(!1),this.destroyed=!0,this.pendingTask.unsubscribe()}static \u0275prov=Q({token:n,providedIn:"root",factory:()=>new n})}return n})(),Ya=(()=>{class n{internalPendingTasks=k(Wr);scheduler=k(Ti);errorHandler=k(mn);add(){let t=this.internalPendingTasks.add();return()=>{this.internalPendingTasks.has(t)&&(this.scheduler.notify(11),this.internalPendingTasks.remove(t))}}run(t){let r=this.add();t().catch(this.errorHandler).finally(r)}static \u0275prov=Q({token:n,providedIn:"root",factory:()=>new n})}return n})();function tu(...n){}var a_=(()=>{class n{static \u0275prov=Q({token:n,providedIn:"root",factory:()=>new l0})}return n})(),l0=class{dirtyEffectCount=0;queues=new Map;add(e){this.enqueue(e),this.schedule(e)}schedule(e){e.dirty&&this.dirtyEffectCount++}remove(e){let t=e.zone,r=this.queues.get(t);r.has(e)&&(r.delete(e),e.dirty&&this.dirtyEffectCount--)}enqueue(e){let t=e.zone;this.queues.has(t)||this.queues.set(t,new Set);let r=this.queues.get(t);r.has(e)||r.add(e)}flush(){for(;this.dirtyEffectCount>0;){let e=!1;for(let[t,r]of this.queues)t===null?e||=this.flushQueue(r):e||=t.run(()=>this.flushQueue(r));e||(this.dirtyEffectCount=0)}}flushQueue(e){let t=!1;for(let r of e)r.dirty&&(this.dirtyEffectCount--,t=!0,r.run());return t}};function tc(n){return{toString:n}.toString()}var ph="__parameters__";function TL(n){return function(...t){if(n){let r=n(...t);for(let i in r)this[i]=r[i]}}}function ED(n,e,t){return tc(()=>{let r=TL(e);function i(...o){if(this instanceof i)return r.apply(this,o),this;let s=new i(...o);return a.annotation=s,a;function a(c,u,f){let m=c.hasOwnProperty(ph)?c[ph]:Object.defineProperty(c,ph,{value:[]})[ph];for(;m.length<=f;)m.push(null);return(m[f]=m[f]||[]).push(s),c}}return i.prototype.ngMetadataName=n,i.annotationCls=i,i})}var zt=E0(ED("Optional"),8);var CD=E0(ED("SkipSelf"),4);function DL(n){return typeof n=="function"}var Ch=class{previousValue;currentValue;firstChange;constructor(e,t,r){this.previousValue=e,this.currentValue=t,this.firstChange=r}isFirstChange(){return this.firstChange}};function ID(n,e,t,r){e!==null?e.applyValueToInputSignal(e,r):n[t]=r}var Yr=(()=>{let n=()=>SD;return n.ngInherit=!0,n})();function SD(n){return n.type.prototype.ngOnChanges&&(n.setInput=ML),xL}function xL(){let n=DD(this),e=n?.current;if(e){let t=n.previous;if(t===ho)n.previous=e;else for(let r in e)t[r]=e[r];n.current=null,this.ngOnChanges(e)}}function ML(n,e,t,r,i){let o=this.declaredInputs[r],s=DD(n)||PL(n,{previous:ho,current:null}),a=s.current||(s.current={}),c=s.previous,u=c[o];a[o]=new Ch(u&&u.currentValue,t,c===ho),ID(n,e,i,t)}var TD="__ngSimpleChanges__";function DD(n){return n[TD]||null}function PL(n,e){return n[TD]=e}var BT=[];var He=function(n,e=null,t){for(let r=0;r<BT.length;r++){let i=BT[r];i(n,e,t)}};function AL(n,e,t){let{ngOnChanges:r,ngOnInit:i,ngDoCheck:o}=e.type.prototype;if(r){let s=SD(e);(t.preOrderHooks??=[]).push(n,s),(t.preOrderCheckHooks??=[]).push(n,s)}i&&(t.preOrderHooks??=[]).push(0-n,i),o&&((t.preOrderHooks??=[]).push(n,o),(t.preOrderCheckHooks??=[]).push(n,o))}function xD(n,e){for(let t=e.directiveStart,r=e.directiveEnd;t<r;t++){let o=n.data[t].type.prototype,{ngAfterContentInit:s,ngAfterContentChecked:a,ngAfterViewInit:c,ngAfterViewChecked:u,ngOnDestroy:f}=o;s&&(n.contentHooks??=[]).push(-t,s),a&&((n.contentHooks??=[]).push(t,a),(n.contentCheckHooks??=[]).push(t,a)),c&&(n.viewHooks??=[]).push(-t,c),u&&((n.viewHooks??=[]).push(t,u),(n.viewCheckHooks??=[]).push(t,u)),f!=null&&(n.destroyHooks??=[]).push(t,f)}}function yh(n,e,t){MD(n,e,3,t)}function bh(n,e,t,r){(n[pe]&3)===t&&MD(n,e,t,r)}function c_(n,e){let t=n[pe];(t&3)===e&&(t&=16383,t+=1,n[pe]=t)}function MD(n,e,t,r){let i=r!==void 0?n[_s]&65535:0,o=r??-1,s=e.length-1,a=0;for(let c=i;c<s;c++)if(typeof e[c+1]=="number"){if(a=e[c],r!=null&&a>=r)break}else e[c]<0&&(n[_s]+=65536),(a<o||o==-1)&&(kL(n,t,e,c),n[_s]=(n[_s]&4294901760)+c+2),c++}function $T(n,e){He(4,n,e);let t=Ee(null);try{e.call(n)}finally{Ee(t),He(5,n,e)}}function kL(n,e,t,r){let i=t[r]<0,o=t[r+1],s=i?-t[r]:t[r],a=n[s];i?n[pe]>>14<n[_s]>>16&&(n[pe]&3)===e&&(n[pe]+=16384,$T(a,o)):$T(a,o)}var Za=-1,Ss=class{factory;name;injectImpl;resolving=!1;canSeeViewProviders;multi;componentProviders;index;providerFactory;constructor(e,t,r,i){this.factory=e,this.name=i,this.canSeeViewProviders=t,this.injectImpl=r}};function OL(n){return(n.flags&8)!==0}function RL(n){return(n.flags&16)!==0}function NL(n,e,t){let r=0;for(;r<t.length;){let i=t[r];if(typeof i=="number"){if(i!==0)break;r++;let o=t[r++],s=t[r++],a=t[r++];n.setAttribute(e,s,a,o)}else{let o=i,s=t[++r];FL(o)?n.setProperty(e,o,s):n.setAttribute(e,o,s),r++}}return r}function PD(n){return n===3||n===4||n===6}function FL(n){return n.charCodeAt(0)===64}function Xa(n,e){if(!(e===null||e.length===0))if(n===null||n.length===0)n=e.slice();else{let t=-1;for(let r=0;r<e.length;r++){let i=e[r];typeof i=="number"?t=i:t===0||(t===-1||t===2?HT(n,t,i,null,e[++r]):HT(n,t,i,null,null))}}return n}function HT(n,e,t,r,i){let o=0,s=n.length;if(e===-1)s=-1;else for(;o<n.length;){let a=n[o++];if(typeof a=="number"){if(a===e){s=-1;break}else if(a>e){s=o-1;break}}}for(;o<n.length;){let a=n[o];if(typeof a=="number")break;if(a===t){i!==null&&(n[o+1]=i);return}o++,i!==null&&o++}s!==-1&&(n.splice(s,0,e),o=s+1),n.splice(o++,0,t),i!==null&&n.splice(o++,0,i)}function AD(n){return n!==Za}function Ih(n){return n&32767}function LL(n){return n>>16}function Sh(n,e){let t=LL(n),r=e;for(;t>0;)r=r[vs],t--;return r}var y_=!0;function Th(n){let e=y_;return y_=n,e}var VL=256,kD=VL-1,OD=5,UL=0,Gr={};function jL(n,e,t){let r;typeof t=="string"?r=t.charCodeAt(0)||0:t.hasOwnProperty(gs)&&(r=t[gs]),r==null&&(r=t[gs]=UL++);let i=r&kD,o=1<<i;e.data[n+(i>>OD)]|=o}function Dh(n,e){let t=RD(n,e);if(t!==-1)return t;let r=e[ue];r.firstCreatePass&&(n.injectorIndex=e.length,l_(r.data,n),l_(e,null),l_(r.blueprint,null));let i=W_(n,e),o=n.injectorIndex;if(AD(i)){let s=Ih(i),a=Sh(i,e),c=a[ue].data;for(let u=0;u<8;u++)e[o+u]=a[s+u]|c[s+u]}return e[o+8]=i,o}function l_(n,e){n.push(0,0,0,0,0,0,0,0,e)}function RD(n,e){return n.injectorIndex===-1||n.parent&&n.parent.injectorIndex===n.injectorIndex||e[n.injectorIndex+8]===null?-1:n.injectorIndex}function W_(n,e){if(n.parent&&n.parent.injectorIndex!==-1)return n.parent.injectorIndex;let t=0,r=null,i=e;for(;i!==null;){if(r=UD(i),r===null)return Za;if(t++,i=i[vs],r.injectorIndex!==-1)return r.injectorIndex|t<<16}return Za}function b_(n,e,t){jL(n,e,t)}function BL(n,e){if(e==="class")return n.classes;if(e==="style")return n.styles;let t=n.attrs;if(t){let r=t.length,i=0;for(;i<r;){let o=t[i];if(PD(o))break;if(o===0)i=i+2;else if(typeof o=="number")for(i++;i<r&&typeof t[i]=="string";)i++;else{if(o===e)return t[i+1];i=i+2}}}return null}function ND(n,e,t){if(t&8||n!==void 0)return n;Zf(e,"NodeInjector")}function FD(n,e,t,r){if(t&8&&r===void 0&&(r=null),(t&3)===0){let i=n[ms],o=pn(void 0);try{return i?i.get(e,r,t&8):w0(e,r,t&8)}finally{pn(o)}}return ND(r,e,t)}function LD(n,e,t,r=0,i){if(n!==null){if(e[pe]&2048&&!(r&2)){let s=qL(n,e,t,r,Gr);if(s!==Gr)return s}let o=VD(n,e,t,r,Gr);if(o!==Gr)return o}return FD(e,t,r,i)}function VD(n,e,t,r,i){let o=HL(t);if(typeof o=="function"){if(!J0(e,n,r))return r&1?ND(i,t,r):FD(e,t,r,i);try{let s;if(s=o(r),s==null&&!(r&8))Zf(t);else return s}finally{e_()}}else if(typeof o=="number"){let s=null,a=RD(n,e),c=Za,u=r&1?e[Qn][Yn]:null;for((a===-1||r&4)&&(c=a===-1?W_(n,e):e[a+8],c===Za||!qT(r,!1)?a=-1:(s=e[ue],a=Ih(c),e=Sh(c,e)));a!==-1;){let f=e[ue];if(zT(o,a,f.data)){let m=$L(a,e,t,s,r,u);if(m!==Gr)return m}c=e[a+8],c!==Za&&qT(r,e[ue].data[a+8]===u)&&zT(o,a,e)?(s=f,a=Ih(c),e=Sh(c,e)):a=-1}}return i}function $L(n,e,t,r,i,o){let s=e[ue],a=s.data[n+8],c=r==null?mo(a)&&y_:r!=s&&(a.type&3)!==0,u=i&1&&o===a,f=wh(a,s,t,c,u);return f!==null?iu(e,s,f,a,i):Gr}function wh(n,e,t,r,i){let o=n.providerIndexes,s=e.data,a=o&1048575,c=n.directiveStart,u=n.directiveEnd,f=o>>20,m=r?a:a+f,_=i?a+f:u;for(let E=m;E<_;E++){let x=s[E];if(E<c&&t===x||E>=c&&x.type===t)return E}if(i){let E=s[c];if(E&&qr(E)&&E.type===t)return c}return null}function iu(n,e,t,r,i){let o=n[t],s=e.data;if(o instanceof Ss){let a=o;if(a.resolving){let E=Gf(s[t]);throw b0(E)}let c=Th(a.canSeeViewProviders);a.resolving=!0;let u=s[t].type||s[t],f,m=a.injectImpl?pn(a.injectImpl):null,_=J0(n,r,0);try{o=n[t]=a.factory(void 0,i,s,n,r),e.firstCreatePass&&t>=r.directiveStart&&AL(t,s[t],e)}finally{m!==null&&pn(m),Th(c),a.resolving=!1,e_()}}return o}function HL(n){if(typeof n=="string")return n.charCodeAt(0)||0;let e=n.hasOwnProperty(gs)?n[gs]:void 0;return typeof e=="number"?e>=0?e&kD:zL:e}function zT(n,e,t){let r=1<<n;return!!(t[e+(n>>OD)]&r)}function qT(n,e){return!(n&2)&&!(n&1&&e)}var Is=class{_tNode;_lView;constructor(e,t){this._tNode=e,this._lView=t}get(e,t,r){return LD(this._tNode,this._lView,e,ds(r),t)}};function zL(){return new Is(Dt(),Te())}function Ir(n){return tc(()=>{let e=n.prototype.constructor,t=e[jl]||w_(e),r=Object.prototype,i=Object.getPrototypeOf(n.prototype).constructor;for(;i&&i!==r;){let o=i[jl]||w_(i);if(o&&o!==t)return o;i=Object.getPrototypeOf(i)}return o=>new o})}function w_(n){return d0(n)?()=>{let e=w_(Ht(n));return e&&e()}:lo(n)}function qL(n,e,t,r,i){let o=n,s=e;for(;o!==null&&s!==null&&s[pe]&2048&&!Wa(s);){let a=VD(o,s,t,r|2,Gr);if(a!==Gr)return a;let c=o.parent;if(!c){let u=s[k0];if(u){let f=u.get(t,Gr,r);if(f!==Gr)return f}c=UD(s),s=s[vs]}o=c}return i}function UD(n){let e=n[ue],t=e.type;return t===2?e.declTNode:t===1?n[Yn]:null}function cu(n){return BL(Dt(),n)}function WL(){return nc(Dt(),Te())}function nc(n,e){return new on(wr(n,e))}var on=(()=>{class n{nativeElement;constructor(t){this.nativeElement=t}static __NG_ELEMENT_ID__=WL}return n})();function GL(n){return n instanceof on?n.nativeElement:n}function KL(){return this._results[Symbol.iterator]()}var xh=class{_emitDistinctChangesOnly;dirty=!0;_onDirty=void 0;_results=[];_changesDetected=!1;_changes=void 0;length=0;first=void 0;last=void 0;get changes(){return this._changes??=new Ke}constructor(e=!1){this._emitDistinctChangesOnly=e}get(e){return this._results[e]}map(e){return this._results.map(e)}filter(e){return this._results.filter(e)}find(e){return this._results.find(e)}reduce(e,t){return this._results.reduce(e,t)}forEach(e){this._results.forEach(e)}some(e){return this._results.some(e)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(e,t){this.dirty=!1;let r=iT(e);(this._changesDetected=!rT(this._results,r,t))&&(this._results=r,this.length=r.length,this.last=r[this.length-1],this.first=r[0])}notifyOnChanges(){this._changes!==void 0&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.next(this)}onDirty(e){this._onDirty=e}setDirty(){this.dirty=!0,this._onDirty?.()}destroy(){this._changes!==void 0&&(this._changes.complete(),this._changes.unsubscribe())}[Symbol.iterator]=KL};function jD(n){return(n.flags&128)===128}var G_=(function(n){return n[n.OnPush=0]="OnPush",n[n.Default=1]="Default",n})(G_||{}),BD=new Map,YL=0;function QL(){return YL++}function ZL(n){BD.set(n[Gl],n)}function E_(n){BD.delete(n[Gl])}var WT="__ngContext__";function Ja(n,e){zr(e)?(n[WT]=e[Gl],ZL(e)):n[WT]=e}function $D(n){return zD(n[za])}function HD(n){return zD(n[Kn])}function zD(n){for(;n!==null&&!br(n);)n=n[Kn];return n}var C_;function K_(n){C_=n}function Y_(){if(C_!==void 0)return C_;if(typeof document<"u")return document;throw new X(210,!1)}var $h=new J("",{providedIn:"root",factory:()=>XL}),XL="ng",Hh=new J(""),Sr=new J("",{providedIn:"platform",factory:()=>"unknown"});var zh=new J("",{providedIn:"root",factory:()=>Y_().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});var JL="h",eV="b";var qD=!1,WD=new J("",{providedIn:"root",factory:()=>qD});var Q_=new J("");var tV=(n,e,t,r)=>{};function nV(n,e,t,r){tV(n,e,t,r)}function Z_(n){return(n.flags&32)===32}var rV=()=>null;function GD(n,e,t=!1){return rV(n,e,t)}function KD(n,e){let t=n.contentQueries;if(t!==null){let r=Ee(null);try{for(let i=0;i<t.length;i+=2){let o=t[i],s=t[i+1];if(s!==-1){let a=n.data[s];ah(o),a.contentQueries(2,e[s],s)}}}finally{Ee(r)}}}function I_(n,e,t){ah(0);let r=Ee(null);try{e(n,t)}finally{Ee(r)}}function X_(n,e,t){if(O0(e)){let r=Ee(null);try{let i=e.directiveStart,o=e.directiveEnd;for(let s=i;s<o;s++){let a=n.data[s];if(a.contentQueries){let c=t[s];a.contentQueries(1,c,s)}}}finally{Ee(r)}}}var Mi=(function(n){return n[n.Emulated=0]="Emulated",n[n.None=2]="None",n[n.ShadowDom=3]="ShadowDom",n})(Mi||{}),gh;function iV(){if(gh===void 0&&(gh=null,_r.trustedTypes))try{gh=_r.trustedTypes.createPolicy("angular",{createHTML:n=>n,createScript:n=>n,createScriptURL:n=>n})}catch{}return gh}function qh(n){return iV()?.createHTML(n)||n}var mh;function YD(){if(mh===void 0&&(mh=null,_r.trustedTypes))try{mh=_r.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:n=>n,createScript:n=>n,createScriptURL:n=>n})}catch{}return mh}function GT(n){return YD()?.createHTML(n)||n}function KT(n){return YD()?.createScriptURL(n)||n}var Mh=class{changingThisBreaksApplicationSecurity;constructor(e){this.changingThisBreaksApplicationSecurity=e}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${Yf})`}};function rc(n){return n instanceof Mh?n.changingThisBreaksApplicationSecurity:n}function Wh(n,e){let t=QD(n);if(t!=null&&t!==e){if(t==="ResourceURL"&&e==="URL")return!0;throw new Error(`Required a safe ${e}, got a ${t} (see ${Yf})`)}return t===e}function QD(n){return n instanceof Mh&&n.getTypeName()||null}function oV(n){let e=new T_(n);return sV()?new S_(e):e}var S_=class{inertDocumentHelper;constructor(e){this.inertDocumentHelper=e}getInertBodyElement(e){e="<body><remove></remove>"+e;try{let t=new window.DOMParser().parseFromString(qh(e),"text/html").body;return t===null?this.inertDocumentHelper.getInertBodyElement(e):(t.firstChild?.remove(),t)}catch{return null}}},T_=class{defaultDoc;inertDocument;constructor(e){this.defaultDoc=e,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert")}getInertBodyElement(e){let t=this.inertDocument.createElement("template");return t.innerHTML=qh(e),t}};function sV(){try{return!!new window.DOMParser().parseFromString(qh(""),"text/html")}catch{return!1}}var aV=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;function J_(n){return n=String(n),n.match(aV)?n:"unsafe:"+n}function Pi(n){let e={};for(let t of n.split(","))e[t]=!0;return e}function lu(...n){let e={};for(let t of n)for(let r in t)t.hasOwnProperty(r)&&(e[r]=!0);return e}var ZD=Pi("area,br,col,hr,img,wbr"),XD=Pi("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),JD=Pi("rp,rt"),cV=lu(JD,XD),lV=lu(XD,Pi("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),uV=lu(JD,Pi("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),YT=lu(ZD,lV,uV,cV),ex=Pi("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),dV=Pi("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,srcset,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),fV=Pi("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext"),hV=lu(ex,dV,fV),pV=Pi("script,style,template"),D_=class{sanitizedSomething=!1;buf=[];sanitizeChildren(e){let t=e.firstChild,r=!0,i=[];for(;t;){if(t.nodeType===Node.ELEMENT_NODE?r=this.startElement(t):t.nodeType===Node.TEXT_NODE?this.chars(t.nodeValue):this.sanitizedSomething=!0,r&&t.firstChild){i.push(t),t=vV(t);continue}for(;t;){t.nodeType===Node.ELEMENT_NODE&&this.endElement(t);let o=mV(t);if(o){t=o;break}t=i.pop()}}return this.buf.join("")}startElement(e){let t=QT(e).toLowerCase();if(!YT.hasOwnProperty(t))return this.sanitizedSomething=!0,!pV.hasOwnProperty(t);this.buf.push("<"),this.buf.push(t);let r=e.attributes;for(let i=0;i<r.length;i++){let o=r.item(i),s=o.name,a=s.toLowerCase();if(!hV.hasOwnProperty(a)){this.sanitizedSomething=!0;continue}let c=o.value;ex[a]&&(c=J_(c)),this.buf.push(" ",s,'="',ZT(c),'"')}return this.buf.push(">"),!0}endElement(e){let t=QT(e).toLowerCase();YT.hasOwnProperty(t)&&!ZD.hasOwnProperty(t)&&(this.buf.push("</"),this.buf.push(t),this.buf.push(">"))}chars(e){this.buf.push(ZT(e))}};function gV(n,e){return(n.compareDocumentPosition(e)&Node.DOCUMENT_POSITION_CONTAINED_BY)!==Node.DOCUMENT_POSITION_CONTAINED_BY}function mV(n){let e=n.nextSibling;if(e&&n!==e.previousSibling)throw tx(e);return e}function vV(n){let e=n.firstChild;if(e&&gV(n,e))throw tx(e);return e}function QT(n){let e=n.nodeName;return typeof e=="string"?e:"FORM"}function tx(n){return new Error(`Failed to sanitize html because the element is clobbered: ${n.outerHTML}`)}var _V=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,yV=/([^\#-~ |!])/g;function ZT(n){return n.replace(/&/g,"&amp;").replace(_V,function(e){let t=e.charCodeAt(0),r=e.charCodeAt(1);return"&#"+((t-55296)*1024+(r-56320)+65536)+";"}).replace(yV,function(e){return"&#"+e.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}var vh;function nx(n,e){let t=null;try{vh=vh||oV(n);let r=e?String(e):"";t=vh.getInertBodyElement(r);let i=5,o=r;do{if(i===0)throw new Error("Failed to sanitize html because the input is unstable");i--,r=o,o=t.innerHTML,t=vh.getInertBodyElement(r)}while(r!==o);let a=new D_().sanitizeChildren(XT(t)||t);return qh(a)}finally{if(t){let r=XT(t)||t;for(;r.firstChild;)r.firstChild.remove()}}}function XT(n){return"content"in n&&bV(n)?n.content:null}function bV(n){return n.nodeType===Node.ELEMENT_NODE&&n.nodeName==="TEMPLATE"}var uu=(function(n){return n[n.NONE=0]="NONE",n[n.HTML=1]="HTML",n[n.STYLE=2]="STYLE",n[n.SCRIPT=3]="SCRIPT",n[n.URL=4]="URL",n[n.RESOURCE_URL=5]="RESOURCE_URL",n})(uu||{});function ey(n){let e=ny();return e?GT(e.sanitize(uu.HTML,n)||""):Wh(n,"HTML")?GT(rc(n)):nx(Y_(),fo(n))}function ct(n){let e=ny();return e?e.sanitize(uu.URL,n)||"":Wh(n,"URL")?rc(n):J_(fo(n))}function rx(n){let e=ny();if(e)return KT(e.sanitize(uu.RESOURCE_URL,n)||"");if(Wh(n,"ResourceURL"))return KT(rc(n));throw new X(904,!1)}function wV(n,e){return e==="src"&&(n==="embed"||n==="frame"||n==="iframe"||n==="media"||n==="script")||e==="href"&&(n==="base"||n==="link")?rx:ct}function ty(n,e,t){return wV(e,t)(n)}function ny(){let n=Te();return n&&n[$r].sanitizer}var EV=/^>|^->|<!--|-->|--!>|<!-$/g,CV=/(<|>)/g,IV="\u200B$1\u200B";function SV(n){return n.replace(EV,e=>e.replace(CV,IV))}function ry(n){return n.ownerDocument}function ix(n){return n instanceof Function?n():n}function TV(n,e,t){let r=n.length;for(;;){let i=n.indexOf(e,t);if(i===-1)return i;if(i===0||n.charCodeAt(i-1)<=32){let o=e.length;if(i+o===r||n.charCodeAt(i+o)<=32)return i}t=i+1}}var ox="ng-template";function DV(n,e,t,r){let i=0;if(r){for(;i<e.length&&typeof e[i]=="string";i+=2)if(e[i]==="class"&&TV(e[i+1].toLowerCase(),t,0)!==-1)return!0}else if(iy(n))return!1;if(i=e.indexOf(1,i),i>-1){let o;for(;++i<e.length&&typeof(o=e[i])=="string";)if(o.toLowerCase()===t)return!0}return!1}function iy(n){return n.type===4&&n.value!==ox}function xV(n,e,t){let r=n.type===4&&!t?ox:n.value;return e===r}function MV(n,e,t){let r=4,i=n.attrs,o=i!==null?kV(i):0,s=!1;for(let a=0;a<e.length;a++){let c=e[a];if(typeof c=="number"){if(!s&&!Cr(r)&&!Cr(c))return!1;if(s&&Cr(c))continue;s=!1,r=c|r&1;continue}if(!s)if(r&4){if(r=2|r&1,c!==""&&!xV(n,c,t)||c===""&&e.length===1){if(Cr(r))return!1;s=!0}}else if(r&8){if(i===null||!DV(n,i,c,t)){if(Cr(r))return!1;s=!0}}else{let u=e[++a],f=PV(c,i,iy(n),t);if(f===-1){if(Cr(r))return!1;s=!0;continue}if(u!==""){let m;if(f>o?m="":m=i[f+1].toLowerCase(),r&2&&u!==m){if(Cr(r))return!1;s=!0}}}}return Cr(r)||s}function Cr(n){return(n&1)===0}function PV(n,e,t,r){if(e===null)return-1;let i=0;if(r||!t){let o=!1;for(;i<e.length;){let s=e[i];if(s===n)return i;if(s===3||s===6)o=!0;else if(s===1||s===2){let a=e[++i];for(;typeof a=="string";)a=e[++i];continue}else{if(s===4)break;if(s===0){i+=4;continue}}i+=o?1:2}return-1}else return OV(e,n)}function AV(n,e,t=!1){for(let r=0;r<e.length;r++)if(MV(n,e[r],t))return!0;return!1}function kV(n){for(let e=0;e<n.length;e++){let t=n[e];if(PD(t))return e}return n.length}function OV(n,e){let t=n.indexOf(4);if(t>-1)for(t++;t<n.length;){let r=n[t];if(typeof r=="number")return-1;if(r===e)return t;t++}return-1}function JT(n,e){return n?":not("+e.trim()+")":e}function RV(n){let e=n[0],t=1,r=2,i="",o=!1;for(;t<n.length;){let s=n[t];if(typeof s=="string")if(r&2){let a=n[++t];i+="["+s+(a.length>0?'="'+a+'"':"")+"]"}else r&8?i+="."+s:r&4&&(i+=" "+s);else i!==""&&!Cr(s)&&(e+=JT(o,i),i=""),r=s,o=o||!Cr(r);t++}return i!==""&&(e+=JT(o,i)),e}function NV(n){return n.map(RV).join(",")}function FV(n){let e=[],t=[],r=1,i=2;for(;r<n.length;){let o=n[r];if(typeof o=="string")i===2?o!==""&&e.push(o,n[++r]):i===8&&t.push(o);else{if(!Cr(i))break;i=o}r++}return t.length&&e.push(1,...t),e}var Jn={};function LV(n,e){return n.createText(e)}function VV(n,e,t){n.setValue(e,t)}function UV(n,e){return n.createComment(SV(e))}function sx(n,e,t){return n.createElement(e,t)}function Ph(n,e,t,r,i){n.insertBefore(e,t,r,i)}function ax(n,e,t){n.appendChild(e,t)}function eD(n,e,t,r,i){r!==null?Ph(n,e,t,r,i):ax(n,e,t)}function jV(n,e,t){n.removeChild(null,e,t)}function BV(n,e,t){n.setAttribute(e,"style",t)}function $V(n,e,t){t===""?n.removeAttribute(e,"class"):n.setAttribute(e,"class",t)}function cx(n,e,t){let{mergedAttrs:r,classes:i,styles:o}=t;r!==null&&NL(n,e,r),i!==null&&$V(n,e,i),o!==null&&BV(n,e,o)}function oy(n,e,t,r,i,o,s,a,c,u,f){let m=Rt+r,_=m+i,E=HV(m,_),x=typeof u=="function"?u():u;return E[ue]={type:n,blueprint:E,template:t,queries:null,viewQuery:a,declTNode:e,data:E.slice().fill(null,m),bindingStartIndex:m,expandoStartIndex:_,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:typeof o=="function"?o():o,pipeRegistry:typeof s=="function"?s():s,firstChild:null,schemas:c,consts:x,incompleteFirstPass:!1,ssrId:f}}function HV(n,e){let t=[];for(let r=0;r<e;r++)t.push(r<n?null:Jn);return t}function zV(n){let e=n.tView;return e===null||e.incompleteFirstPass?n.tView=oy(1,null,n.template,n.decls,n.vars,n.directiveDefs,n.pipeDefs,n.viewQuery,n.schemas,n.consts,n.id):e}function sy(n,e,t,r,i,o,s,a,c,u,f){let m=e.blueprint.slice();return m[yr]=i,m[pe]=r|4|128|8|64|1024,(u!==null||n&&n[pe]&2048)&&(m[pe]|=2048),V0(m),m[Ot]=m[vs]=n,m[rn]=t,m[$r]=s||n&&n[$r],m[at]=a||n&&n[at],m[ms]=c||n&&n[ms]||null,m[Yn]=o,m[Gl]=QL(),m[Wl]=f,m[k0]=u,m[Qn]=e.type==2?n[Qn]:m,m}function qV(n,e,t){let r=wr(e,n),i=zV(t),o=n[$r].rendererFactory,s=ay(n,sy(n,i,null,lx(t),r,e,null,o.createRenderer(r,t),null,null,null));return n[e.index]=s}function lx(n){let e=16;return n.signals?e=4096:n.onPush&&(e=64),e}function ux(n,e,t,r){if(t===0)return-1;let i=e.length;for(let o=0;o<t;o++)e.push(r),n.blueprint.push(r),n.data.push(null);return i}function ay(n,e){return n[za]?n[A0][Kn]=e:n[za]=e,n[A0]=e,e}function v(n=1){dx(Nt(),Te(),vo()+n,!1)}function dx(n,e,t,r){if(!r)if((e[pe]&3)===3){let o=n.preOrderCheckHooks;o!==null&&yh(e,o,t)}else{let o=n.preOrderHooks;o!==null&&bh(e,o,0,t)}_o(t)}var Gh=(function(n){return n[n.None=0]="None",n[n.SignalBased=1]="SignalBased",n[n.HasDecoratorInputTransform=2]="HasDecoratorInputTransform",n})(Gh||{});function x_(n,e,t,r){let i=Ee(null);try{let[o,s,a]=n.inputs[t],c=null;(s&Gh.SignalBased)!==0&&(c=e[o][en]),c!==null&&c.transformFn!==void 0?r=c.transformFn(r):a!==null&&(r=a.call(e,r)),n.setInput!==null?n.setInput(e,c,r,t,o):ID(e,c,o,r)}finally{Ee(i)}}var Kr=(function(n){return n[n.Important=1]="Important",n[n.DashCase=2]="DashCase",n})(Kr||{}),WV;function cy(n,e){return WV(n,e)}function Qa(n,e,t,r,i){if(r!=null){let o,s=!1;br(r)?o=r:zr(r)&&(s=!0,r=r[yr]);let a=Zn(r);n===0&&t!==null?i==null?ax(e,t,a):Ph(e,t,a,i||null,!0):n===1&&t!==null?Ph(e,t,a,i||null,!0):n===2?jV(e,a,s):n===3&&e.destroyNode(a),o!=null&&i3(e,n,o,t,i)}}function GV(n,e){fx(n,e),e[yr]=null,e[Yn]=null}function KV(n,e,t,r,i,o){r[yr]=i,r[Yn]=e,Kh(n,r,t,1,i,o)}function fx(n,e){e[$r].changeDetectionScheduler?.notify(9),Kh(n,e,e[at],2,null,null)}function YV(n){let e=n[za];if(!e)return u_(n[ue],n);for(;e;){let t=null;if(zr(e))t=e[za];else{let r=e[gn];r&&(t=r)}if(!t){for(;e&&!e[Kn]&&e!==n;)zr(e)&&u_(e[ue],e),e=e[Ot];e===null&&(e=n),zr(e)&&u_(e[ue],e),t=e&&e[Kn]}e=t}}function ly(n,e){let t=n[bs],r=t.indexOf(e);t.splice(r,1)}function hx(n,e){if(ws(e))return;let t=e[at];t.destroyNode&&Kh(n,e,t,3,null,null),YV(e)}function u_(n,e){if(ws(e))return;let t=Ee(null);try{e[pe]&=-129,e[pe]|=256,e[Ln]&&Pl(e[Ln]),ZV(n,e),QV(n,e),e[ue].type===1&&e[at].destroy();let r=e[po];if(r!==null&&br(e[Ot])){r!==e[Ot]&&ly(r,e);let i=e[Hr];i!==null&&i.detachView(n)}E_(e)}finally{Ee(t)}}function QV(n,e){let t=n.cleanup,r=e[Ha];if(t!==null)for(let s=0;s<t.length-1;s+=2)if(typeof t[s]=="string"){let a=t[s+3];a>=0?r[a]():r[-a].unsubscribe(),s+=2}else{let a=r[t[s+1]];t[s].call(a)}r!==null&&(e[Ha]=null);let i=e[Ii];if(i!==null){e[Ii]=null;for(let s=0;s<i.length;s++){let a=i[s];a()}}let o=e[Kl];if(o!==null){e[Kl]=null;for(let s of o)s.destroy()}}function ZV(n,e){let t;if(n!=null&&(t=n.destroyHooks)!=null)for(let r=0;r<t.length;r+=2){let i=e[t[r]];if(!(i instanceof Ss)){let o=t[r+1];if(Array.isArray(o))for(let s=0;s<o.length;s+=2){let a=i[o[s]],c=o[s+1];He(4,a,c);try{c.call(a)}finally{He(5,a,c)}}else{He(4,i,o);try{o.call(i)}finally{He(5,i,o)}}}}}function XV(n,e,t){return JV(n,e.parent,t)}function JV(n,e,t){let r=e;for(;r!==null&&r.type&168;)e=r,r=e.parent;if(r===null)return t[yr];if(mo(r)){let{encapsulation:i}=n.data[r.directiveStart+r.componentOffset];if(i===Mi.None||i===Mi.Emulated)return null}return wr(r,t)}function e3(n,e,t){return n3(n,e,t)}function t3(n,e,t){return n.type&40?wr(n,t):null}var n3=t3,tD;function uy(n,e,t,r){let i=XV(n,r,e),o=e[at],s=r.parent||e[Yn],a=e3(s,r,e);if(i!=null)if(Array.isArray(t))for(let c=0;c<t.length;c++)eD(o,i,t[c],a,!1);else eD(o,i,t,a,!1);tD!==void 0&&tD(o,r,e,t,i)}function nu(n,e){if(e!==null){let t=e.type;if(t&3)return wr(e,n);if(t&4)return M_(-1,n[e.index]);if(t&8){let r=e.child;if(r!==null)return nu(n,r);{let i=n[e.index];return br(i)?M_(-1,i):Zn(i)}}else{if(t&128)return nu(n,e.next);if(t&32)return cy(e,n)()||Zn(n[e.index]);{let r=px(n,e);if(r!==null){if(Array.isArray(r))return r[0];let i=uo(n[Qn]);return nu(i,r)}else return nu(n,e.next)}}}return null}function px(n,e){if(e!==null){let r=n[Qn][Yn],i=e.projection;return r.projection[i]}return null}function M_(n,e){let t=gn+n+1;if(t<e.length){let r=e[t],i=r[ue].firstChild;if(i!==null)return nu(r,i)}return e[go]}function dy(n,e,t,r,i,o,s){for(;t!=null;){if(t.type===128){t=t.next;continue}let a=r[t.index],c=t.type;if(s&&e===0&&(a&&Ja(Zn(a),r),t.flags|=2),!Z_(t))if(c&8)dy(n,e,t.child,r,i,o,!1),Qa(e,n,i,a,o);else if(c&32){let u=cy(t,r),f;for(;f=u();)Qa(e,n,i,f,o);Qa(e,n,i,a,o)}else c&16?r3(n,e,r,t,i,o):Qa(e,n,i,a,o);t=s?t.projectionNext:t.next}}function Kh(n,e,t,r,i,o){dy(t,r,n.firstChild,e,i,o,!1)}function r3(n,e,t,r,i,o){let s=t[Qn],c=s[Yn].projection[r.projection];if(Array.isArray(c))for(let u=0;u<c.length;u++){let f=c[u];Qa(e,n,i,f,o)}else{let u=c,f=s[Ot];jD(r)&&(u.flags|=128),dy(n,e,u,f,i,o,!0)}}function i3(n,e,t,r,i){let o=t[go],s=Zn(t);o!==s&&Qa(e,n,r,o,i);for(let a=gn;a<t.length;a++){let c=t[a];Kh(c[ue],c,n,e,r,o)}}function o3(n,e,t,r,i){if(e)i?n.addClass(t,r):n.removeClass(t,r);else{let o=r.indexOf("-")===-1?void 0:Kr.DashCase;i==null?n.removeStyle(t,r,o):(typeof i=="string"&&i.endsWith("!important")&&(i=i.slice(0,-10),o|=Kr.Important),n.setStyle(t,r,i,o))}}function gx(n,e,t,r,i){let o=vo(),s=r&2;try{_o(-1),s&&e.length>Rt&&dx(n,e,Rt,!1),He(s?2:0,i,t),t(r,i)}finally{_o(o),He(s?3:1,i,t)}}function Yh(n,e,t){f3(n,e,t),(t.flags&64)===64&&h3(n,e,t)}function Qh(n,e,t=wr){let r=e.localNames;if(r!==null){let i=e.index+1;for(let o=0;o<r.length;o+=2){let s=r[o+1],a=s===-1?t(e,n):n[s];n[i++]=a}}}function s3(n,e,t,r){let o=r.get(WD,qD)||t===Mi.ShadowDom,s=n.selectRootElement(e,o);return a3(s),s}function a3(n){c3(n)}var c3=()=>null;function l3(n){return n==="class"?"className":n==="for"?"htmlFor":n==="formaction"?"formAction":n==="innerHtml"?"innerHTML":n==="readonly"?"readOnly":n==="tabindex"?"tabIndex":n}function mx(n,e,t,r,i,o){let s=e[ue];if(gy(n,s,e,t,r)){mo(n)&&d3(e,n.index);return}n.type&3&&(t=l3(t)),u3(n,e,t,r,i,o)}function u3(n,e,t,r,i,o){if(n.type&3){let s=wr(n,e);r=o!=null?o(r,n.value||"",t):r,i.setProperty(s,t,r)}else n.type&12}function d3(n,e){let t=Xn(e,n);t[pe]&16||(t[pe]|=64)}function f3(n,e,t){let r=t.directiveStart,i=t.directiveEnd;mo(t)&&qV(e,t,n.data[r+t.componentOffset]),n.firstCreatePass||Dh(t,e);let o=t.initialInputs;for(let s=r;s<i;s++){let a=n.data[s],c=iu(e,n,s,t);if(Ja(c,e),o!==null&&v3(e,s-r,c,a,t,o),qr(a)){let u=Xn(t.index,e);u[rn]=iu(e,n,s,t)}}}function h3(n,e,t){let r=t.directiveStart,i=t.directiveEnd,o=t.index,s=AT();try{_o(o);for(let a=r;a<i;a++){let c=n.data[a],u=e[a];sh(a),(c.hostBindings!==null||c.hostVars!==0||c.hostAttrs!==null)&&p3(c,u)}}finally{_o(-1),sh(s)}}function p3(n,e){n.hostBindings!==null&&n.hostBindings(1,e)}function fy(n,e){let t=n.directiveRegistry,r=null;if(t)for(let i=0;i<t.length;i++){let o=t[i];AV(e,o.selectors,!1)&&(r??=[],qr(o)?r.unshift(o):r.push(o))}return r}function g3(n,e,t,r,i,o){let s=wr(n,e);m3(e[at],s,o,n.value,t,r,i)}function m3(n,e,t,r,i,o,s){if(o==null)n.removeAttribute(e,i,t);else{let a=s==null?fo(o):s(o,r||"",i);n.setAttribute(e,i,a,t)}}function v3(n,e,t,r,i,o){let s=o[e];if(s!==null)for(let a=0;a<s.length;a+=2){let c=s[a],u=s[a+1];x_(r,t,c,u)}}function hy(n,e,t,r,i){let o=Rt+t,s=e[ue],a=i(s,e,n,r,t);e[o]=a,Ka(n,!0);let c=n.type===2;return c?(cx(e[at],a,n),(wT()===0||qa(n))&&Ja(a,e),ET()):Ja(a,e),dh()&&(!c||!Z_(n))&&uy(s,e,a,n),n}function py(n){let e=n;return G0()?ST():(e=e.parent,Ka(e,!1)),e}function _3(n,e){let t=n[ms];if(!t)return;t.get(mn,null)?.(e)}function gy(n,e,t,r,i){let o=n.inputs?.[r],s=n.hostDirectiveInputs?.[r],a=!1;if(s)for(let c=0;c<s.length;c+=2){let u=s[c],f=s[c+1],m=e.data[u];x_(m,t[u],f,i),a=!0}if(o)for(let c of o){let u=t[c],f=e.data[c];x_(f,u,r,i),a=!0}return a}function y3(n,e){let t=Xn(e,n),r=t[ue];b3(r,t);let i=t[yr];i!==null&&t[Wl]===null&&(t[Wl]=GD(i,t[ms])),He(18),my(r,t,t[rn]),He(19,t[rn])}function b3(n,e){for(let t=e.length;t<n.blueprint.length;t++)e.push(n.blueprint[t])}function my(n,e,t){ch(e);try{let r=n.viewQuery;r!==null&&I_(1,r,t);let i=n.template;i!==null&&gx(n,e,i,1,t),n.firstCreatePass&&(n.firstCreatePass=!1),e[Hr]?.finishViewCreation(n),n.staticContentQueries&&KD(n,e),n.staticViewQueries&&I_(2,n.viewQuery,t);let o=n.components;o!==null&&w3(e,o)}catch(r){throw n.firstCreatePass&&(n.incompleteFirstPass=!0,n.firstCreatePass=!1),r}finally{e[pe]&=-5,lh()}}function w3(n,e){for(let t=0;t<e.length;t++)y3(n,e[t])}function E3(n,e,t,r){let i=Ee(null);try{let o=e.tView,a=n[pe]&4096?4096:16,c=sy(n,o,t,a,null,e,null,null,r?.injector??null,r?.embeddedViewInjector??null,r?.dehydratedView??null),u=n[e.index];c[po]=u;let f=n[Hr];return f!==null&&(c[Hr]=f.createEmbeddedView(o)),my(o,c,t),c}finally{Ee(i)}}function nD(n,e){return!e||e.firstChild===null||jD(n)}var rD=!1,C3=new J("");function ou(n,e,t,r,i=!1){for(;t!==null;){if(t.type===128){t=i?t.projectionNext:t.next;continue}let o=e[t.index];o!==null&&r.push(Zn(o)),br(o)&&vx(o,r);let s=t.type;if(s&8)ou(n,e,t.child,r);else if(s&32){let a=cy(t,e),c;for(;c=a();)r.push(c)}else if(s&16){let a=px(e,t);if(Array.isArray(a))r.push(...a);else{let c=uo(e[Qn]);ou(c[ue],c,a,r,!0)}}t=i?t.projectionNext:t.next}return r}function vx(n,e){for(let t=gn;t<n.length;t++){let r=n[t],i=r[ue].firstChild;i!==null&&ou(r[ue],r,i,e)}n[go]!==n[yr]&&e.push(n[go])}function _x(n){if(n[ys]!==null){for(let e of n[ys])e.impl.addSequence(e);n[ys].length=0}}var yx=[];function I3(n){return n[Ln]??S3(n)}function S3(n){let e=yx.pop()??Object.create(D3);return e.lView=n,e}function T3(n){n.lView[Ln]!==n&&(n.lView=null,yx.push(n))}var D3=re(H({},is),{consumerIsAlwaysLive:!0,kind:"template",consumerMarkedDirty:n=>{Ga(n.lView)},consumerOnSignalRead(){this.lView[Ln]=this}});function x3(n){let e=n[Ln]??Object.create(M3);return e.lView=n,e}var M3=re(H({},is),{consumerIsAlwaysLive:!0,kind:"template",consumerMarkedDirty:n=>{let e=uo(n.lView);for(;e&&!bx(e[ue]);)e=uo(e);e&&U0(e)},consumerOnSignalRead(){this.lView[Ln]=this}});function bx(n){return n.type!==2}function wx(n){if(n[Kl]===null)return;let e=!0;for(;e;){let t=!1;for(let r of n[Kl])r.dirty&&(t=!0,r.zone===null||Zone.current===r.zone?r.run():r.zone.run(()=>r.run()));e=t&&!!(n[pe]&8192)}}var P3=100;function vy(n,e=0){let r=n[$r].rendererFactory,i=!1;i||r.begin?.();try{A3(n,e)}finally{i||r.end?.()}}function A3(n,e){let t=Y0();try{Q0(!0),P_(n,e);let r=0;for(;Ql(n);){if(r===P3)throw new X(103,!1);r++,P_(n,1)}}finally{Q0(t)}}function Ex(n,e){K0(e?Zl.Exhaustive:Zl.OnlyDirtyViews);try{vy(n)}finally{K0(Zl.Off)}}function k3(n,e,t,r){if(ws(e))return;let i=e[pe],o=!1,s=!1;ch(e);let a=!0,c=null,u=null;o||(bx(n)?(u=I3(e),c=os(u)):mf()===null?(a=!1,u=x3(e),c=os(u)):e[Ln]&&(Pl(e[Ln]),e[Ln]=null));try{V0(e),xT(n.bindingStartIndex),t!==null&&gx(n,e,t,2,r);let f=(i&3)===3;if(!o)if(f){let E=n.preOrderCheckHooks;E!==null&&yh(e,E,null)}else{let E=n.preOrderHooks;E!==null&&bh(e,E,0,null),c_(e,0)}if(s||O3(e),wx(e),Cx(e,0),n.contentQueries!==null&&KD(n,e),!o)if(f){let E=n.contentCheckHooks;E!==null&&yh(e,E)}else{let E=n.contentHooks;E!==null&&bh(e,E,1),c_(e,1)}N3(n,e);let m=n.components;m!==null&&Sx(e,m,0);let _=n.viewQuery;if(_!==null&&I_(2,_,r),!o)if(f){let E=n.viewCheckHooks;E!==null&&yh(e,E)}else{let E=n.viewHooks;E!==null&&bh(e,E,2),c_(e,2)}if(n.firstUpdatePass===!0&&(n.firstUpdatePass=!1),e[eh]){for(let E of e[eh])E();e[eh]=null}o||(_x(e),e[pe]&=-73)}catch(f){throw o||Ga(e),f}finally{u!==null&&(Sa(u,c),a&&T3(u)),lh()}}function Cx(n,e){for(let t=$D(n);t!==null;t=HD(t))for(let r=gn;r<t.length;r++){let i=t[r];Ix(i,e)}}function O3(n){for(let e=$D(n);e!==null;e=HD(e)){if(!(e[pe]&2))continue;let t=e[bs];for(let r=0;r<t.length;r++){let i=t[r];U0(i)}}}function R3(n,e,t){He(18);let r=Xn(e,n);Ix(r,t),He(19,r[rn])}function Ix(n,e){nh(n)&&P_(n,e)}function P_(n,e){let r=n[ue],i=n[pe],o=n[Ln],s=!!(e===0&&i&16);if(s||=!!(i&64&&e===0),s||=!!(i&1024),s||=!!(o?.dirty&&Ml(o)),s||=!1,o&&(o.dirty=!1),n[pe]&=-9217,s)k3(r,n,r.template,n[rn]);else if(i&8192){let a=Ee(null);try{wx(n),Cx(n,1);let c=r.components;c!==null&&Sx(n,c,1),_x(n)}finally{Ee(a)}}}function Sx(n,e,t){for(let r=0;r<e.length;r++)R3(n,e[r],t)}function N3(n,e){let t=n.hostBindingOpCodes;if(t!==null)try{for(let r=0;r<t.length;r++){let i=t[r];if(i<0)_o(~i);else{let o=i,s=t[++r],a=t[++r];PT(s,o);let c=e[o];He(24,c),a(2,c),He(25,c)}}}finally{_o(-1)}}function _y(n,e){let t=Y0()?64:1088;for(n[$r].changeDetectionScheduler?.notify(e);n;){n[pe]|=t;let r=uo(n);if(Wa(n)&&!r)return n;n=r}return null}function Tx(n,e,t,r){return[n,!0,0,e,null,r,null,t,null,null]}function F3(n,e,t,r=!0){let i=e[ue];if(L3(i,e,n,t),r){let s=M_(t,n),a=e[at],c=a.parentNode(n[go]);c!==null&&KV(i,n[Yn],a,e,c,s)}let o=e[Wl];o!==null&&o.firstChild!==null&&(o.firstChild=null)}function A_(n,e){if(n.length<=gn)return;let t=gn+e,r=n[t];if(r){let i=r[po];i!==null&&i!==n&&ly(i,r),e>0&&(n[t-1][Kn]=r[Kn]);let o=Hl(n,gn+e);GV(r[ue],r);let s=o[Hr];s!==null&&s.detachView(o[ue]),r[Ot]=null,r[Kn]=null,r[pe]&=-129}return r}function L3(n,e,t,r){let i=gn+r,o=t.length;r>0&&(t[i-1][Kn]=e),r<o-gn?(e[Kn]=t[i],C0(t,gn+r,e)):(t.push(e),e[Kn]=null),e[Ot]=t;let s=e[po];s!==null&&t!==s&&Dx(s,e);let a=e[Hr];a!==null&&a.insertView(n),rh(e),e[pe]|=128}function Dx(n,e){let t=n[bs],r=e[Ot];if(zr(r))n[pe]|=2;else{let i=r[Ot][Qn];e[Qn]!==i&&(n[pe]|=2)}t===null?n[bs]=[e]:t.push(e)}var yo=class{_lView;_cdRefInjectingView;_appRef=null;_attachedToViewContainer=!1;exhaustive;get rootNodes(){let e=this._lView,t=e[ue];return ou(t,e,t.firstChild,[])}constructor(e,t){this._lView=e,this._cdRefInjectingView=t}get context(){return this._lView[rn]}set context(e){this._lView[rn]=e}get destroyed(){return ws(this._lView)}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){let e=this._lView[Ot];if(br(e)){let t=e[Yl],r=t?t.indexOf(this):-1;r>-1&&(A_(e,r),Hl(t,r))}this._attachedToViewContainer=!1}hx(this._lView[ue],this._lView)}onDestroy(e){j0(this._lView,e)}markForCheck(){_y(this._cdRefInjectingView||this._lView,4)}detach(){this._lView[pe]&=-129}reattach(){rh(this._lView),this._lView[pe]|=128}detectChanges(){this._lView[pe]|=1024,vy(this._lView)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new X(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null;let e=Wa(this._lView),t=this._lView[po];t!==null&&!e&&ly(t,this._lView),fx(this._lView[ue],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new X(902,!1);this._appRef=e;let t=Wa(this._lView),r=this._lView[po];r!==null&&!t&&Dx(r,this._lView),rh(this._lView)}};var bo=(()=>{class n{_declarationLView;_declarationTContainer;elementRef;static __NG_ELEMENT_ID__=V3;constructor(t,r,i){this._declarationLView=t,this._declarationTContainer=r,this.elementRef=i}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(t,r){return this.createEmbeddedViewImpl(t,r)}createEmbeddedViewImpl(t,r,i){let o=E3(this._declarationLView,this._declarationTContainer,t,{embeddedViewInjector:r,dehydratedView:i});return new yo(o)}}return n})();function V3(){return Zh(Dt(),Te())}function Zh(n,e){return n.type&4?new bo(e,n,nc(n,e)):null}function Xh(n,e,t,r,i){let o=n.data[e];if(o===null)o=U3(n,e,t,r,i),MT()&&(o.flags|=32);else if(o.type&64){o.type=t,o.value=r,o.attrs=i;let s=IT();o.injectorIndex=s===null?-1:s.injectorIndex}return Ka(o,!0),o}function U3(n,e,t,r,i){let o=W0(),s=G0(),a=s?o:o&&o.parent,c=n.data[e]=B3(n,a,t,e,r,i);return j3(n,c,o,s),c}function j3(n,e,t,r){n.firstChild===null&&(n.firstChild=e),t!==null&&(r?t.child==null&&e.parent!==null&&(t.child=e):t.next===null&&(t.next=e,e.prev=t))}function B3(n,e,t,r,i,o){let s=e?e.injectorIndex:-1,a=0;return CT()&&(a|=128),{type:t,index:r,insertBeforeIndex:null,injectorIndex:s,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:a,providerIndexes:0,value:i,attrs:o,mergedAttrs:null,localNames:null,initialInputs:null,inputs:null,hostDirectiveInputs:null,outputs:null,hostDirectiveOutputs:null,directiveToIndex:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}var yie=new RegExp(`^(\\d+)*(${eV}|${JL})*(.*)`);var $3=()=>null;function iD(n,e){return $3(n,e)}var xx=class{},Jh=class{},k_=class{resolveComponentFactory(e){throw new X(917,!1)}},Ps=class{static NULL=new k_},Ts=class{},er=(()=>{class n{destroyNode=null;static __NG_ELEMENT_ID__=()=>H3()}return n})();function H3(){let n=Te(),e=Dt(),t=Xn(e.index,n);return(zr(t)?t:n)[at]}var Mx=(()=>{class n{static \u0275prov=Q({token:n,providedIn:"root",factory:()=>null})}return n})();var Eh={},O_=class{injector;parentInjector;constructor(e,t){this.injector=e,this.parentInjector=t}get(e,t,r){let i=this.injector.get(e,Eh,r);return i!==Eh||t===Eh?i:this.parentInjector.get(e,t,r)}};function Ah(n,e,t){let r=t?n.styles:null,i=t?n.classes:null,o=0;if(e!==null)for(let s=0;s<e.length;s++){let a=e[s];if(typeof a=="number")o=a;else if(o==1)i=u0(i,a);else if(o==2){let c=a,u=e[++s];r=u0(r,c+": "+u+";")}}t?n.styles=r:n.stylesWithoutHost=r,t?n.classes=i:n.classesWithoutHost=i}function ne(n,e=0){let t=Te();if(t===null)return ie(n,e);let r=Dt();return LD(r,t,Ht(n),e)}function yy(){let n="invalid";throw new Error(n)}function Px(n,e,t,r,i){let o=r===null?null:{"":-1},s=i(n,t);if(s!==null){let a=s,c=null,u=null;for(let f of s)if(f.resolveHostDirectives!==null){[a,c,u]=f.resolveHostDirectives(s);break}W3(n,e,t,a,o,c,u)}o!==null&&r!==null&&z3(t,r,o)}function z3(n,e,t){let r=n.localNames=[];for(let i=0;i<e.length;i+=2){let o=t[e[i+1]];if(o==null)throw new X(-301,!1);r.push(e[i],o)}}function q3(n,e,t){e.componentOffset=t,(n.components??=[]).push(e.index)}function W3(n,e,t,r,i,o,s){let a=r.length,c=!1;for(let _=0;_<a;_++){let E=r[_];!c&&qr(E)&&(c=!0,q3(n,t,_)),b_(Dh(t,e),n,E.type)}X3(t,n.data.length,a);for(let _=0;_<a;_++){let E=r[_];E.providersResolver&&E.providersResolver(E)}let u=!1,f=!1,m=ux(n,e,a,null);a>0&&(t.directiveToIndex=new Map);for(let _=0;_<a;_++){let E=r[_];if(t.mergedAttrs=Xa(t.mergedAttrs,E.hostAttrs),K3(n,t,e,m,E),Z3(m,E,i),s!==null&&s.has(E)){let[V,U]=s.get(E);t.directiveToIndex.set(E.type,[m,V+t.directiveStart,U+t.directiveStart])}else(o===null||!o.has(E))&&t.directiveToIndex.set(E.type,m);E.contentQueries!==null&&(t.flags|=4),(E.hostBindings!==null||E.hostAttrs!==null||E.hostVars!==0)&&(t.flags|=64);let x=E.type.prototype;!u&&(x.ngOnChanges||x.ngOnInit||x.ngDoCheck)&&((n.preOrderHooks??=[]).push(t.index),u=!0),!f&&(x.ngOnChanges||x.ngDoCheck)&&((n.preOrderCheckHooks??=[]).push(t.index),f=!0),m++}G3(n,t,o)}function G3(n,e,t){for(let r=e.directiveStart;r<e.directiveEnd;r++){let i=n.data[r];if(t===null||!t.has(i))oD(0,e,i,r),oD(1,e,i,r),aD(e,r,!1);else{let o=t.get(i);sD(0,e,o,r),sD(1,e,o,r),aD(e,r,!0)}}}function oD(n,e,t,r){let i=n===0?t.inputs:t.outputs;for(let o in i)if(i.hasOwnProperty(o)){let s;n===0?s=e.inputs??={}:s=e.outputs??={},s[o]??=[],s[o].push(r),Ax(e,o)}}function sD(n,e,t,r){let i=n===0?t.inputs:t.outputs;for(let o in i)if(i.hasOwnProperty(o)){let s=i[o],a;n===0?a=e.hostDirectiveInputs??={}:a=e.hostDirectiveOutputs??={},a[s]??=[],a[s].push(r,o),Ax(e,s)}}function Ax(n,e){e==="class"?n.flags|=8:e==="style"&&(n.flags|=16)}function aD(n,e,t){let{attrs:r,inputs:i,hostDirectiveInputs:o}=n;if(r===null||!t&&i===null||t&&o===null||iy(n)){n.initialInputs??=[],n.initialInputs.push(null);return}let s=null,a=0;for(;a<r.length;){let c=r[a];if(c===0){a+=4;continue}else if(c===5){a+=2;continue}else if(typeof c=="number")break;if(!t&&i.hasOwnProperty(c)){let u=i[c];for(let f of u)if(f===e){s??=[],s.push(c,r[a+1]);break}}else if(t&&o.hasOwnProperty(c)){let u=o[c];for(let f=0;f<u.length;f+=2)if(u[f]===e){s??=[],s.push(u[f+1],r[a+1]);break}}a+=2}n.initialInputs??=[],n.initialInputs.push(s)}function K3(n,e,t,r,i){n.data[r]=i;let o=i.factory||(i.factory=lo(i.type,!0)),s=new Ss(o,qr(i),ne,null);n.blueprint[r]=s,t[r]=s,Y3(n,e,r,ux(n,t,i.hostVars,Jn),i)}function Y3(n,e,t,r,i){let o=i.hostBindings;if(o){let s=n.hostBindingOpCodes;s===null&&(s=n.hostBindingOpCodes=[]);let a=~e.index;Q3(s)!=a&&s.push(a),s.push(t,r,o)}}function Q3(n){let e=n.length;for(;e>0;){let t=n[--e];if(typeof t=="number"&&t<0)return t}return 0}function Z3(n,e,t){if(t){if(e.exportAs)for(let r=0;r<e.exportAs.length;r++)t[e.exportAs[r]]=n;qr(e)&&(t[""]=n)}}function X3(n,e,t){n.flags|=1,n.directiveStart=e,n.directiveEnd=e+t,n.providerIndexes=e}function by(n,e,t,r,i,o,s,a){let c=e[ue],u=c.consts,f=Es(u,s),m=Xh(c,n,t,r,f);return o&&Px(c,e,m,Es(u,a),i),m.mergedAttrs=Xa(m.mergedAttrs,m.attrs),m.attrs!==null&&Ah(m,m.attrs,!1),m.mergedAttrs!==null&&Ah(m,m.mergedAttrs,!0),c.queries!==null&&c.queries.elementStart(c,m),m}function wy(n,e){xD(n,e),O0(e)&&n.queries.elementEnd(e)}function J3(n,e,t,r,i,o){let s=e.consts,a=Es(s,i),c=Xh(e,n,t,r,a);if(c.mergedAttrs=Xa(c.mergedAttrs,c.attrs),o!=null){let u=Es(s,o);c.localNames=[];for(let f=0;f<u.length;f+=2)c.localNames.push(u[f],-1)}return c.attrs!==null&&Ah(c,c.attrs,!1),c.mergedAttrs!==null&&Ah(c,c.mergedAttrs,!0),e.queries!==null&&e.queries.elementStart(e,c),c}function Ey(n){return Ox(n)?Array.isArray(n)||!(n instanceof Map)&&Symbol.iterator in n:!1}function kx(n,e){if(Array.isArray(n))for(let t=0;t<n.length;t++)e(n[t]);else{let t=n[Symbol.iterator](),r;for(;!(r=t.next()).done;)e(r.value)}}function Ox(n){return n!==null&&(typeof n=="function"||typeof n=="object")}function Cy(n,e,t){return n[e]=t}function e4(n,e){return n[e]}function wo(n,e,t){if(t===Jn)return!1;let r=n[e];return Object.is(r,t)?!1:(n[e]=t,!0)}function Rx(n,e,t,r){let i=wo(n,e,t);return wo(n,e+1,r)||i}function d_(n,e,t){return function r(i){let o=mo(n)?Xn(n.index,e):e;_y(o,5);let s=e[rn],a=cD(e,s,t,i),c=r.__ngNextListenerFn__;for(;c;)a=cD(e,s,c,i)&&a,c=c.__ngNextListenerFn__;return a}}function cD(n,e,t,r){let i=Ee(null);try{return He(6,e,t),t(r)!==!1}catch(o){return _3(n,o),!1}finally{He(7,e,t),Ee(i)}}function t4(n,e,t,r,i,o,s,a){let c=qa(n),u=!1,f=null;if(!r&&c&&(f=n4(e,t,o,n.index)),f!==null){let m=f.__ngLastListenerFn__||f;m.__ngNextListenerFn__=s,f.__ngLastListenerFn__=s,u=!0}else{let m=wr(n,t),_=r?r(m):m;nV(t,_,o,a);let E=i.listen(_,o,a),x=r?V=>r(Zn(V[n.index])):n.index;Nx(x,e,t,o,a,E,!1)}return u}function n4(n,e,t,r){let i=n.cleanup;if(i!=null)for(let o=0;o<i.length-1;o+=2){let s=i[o];if(s===t&&i[o+1]===r){let a=e[Ha],c=i[o+2];return a&&a.length>c?a[c]:null}typeof s=="string"&&(o+=2)}return null}function Nx(n,e,t,r,i,o,s){let a=e.firstCreatePass?$0(e):null,c=B0(t),u=c.length;c.push(i,o),a&&a.push(r,n,u,(u+1)*(s?-1:1))}function lD(n,e,t,r,i,o){let s=e[t],a=e[ue],u=a.data[t].outputs[r],m=s[u].subscribe(o);Nx(n.index,a,e,i,o,m,!0)}var R_=Symbol("BINDING");var kh=class extends Ps{ngModule;constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){let t=xi(e);return new Ds(t,this.ngModule)}};function r4(n){return Object.keys(n).map(e=>{let[t,r,i]=n[e],o={propName:t,templateName:e,isSignal:(r&Gh.SignalBased)!==0};return i&&(o.transform=i),o})}function i4(n){return Object.keys(n).map(e=>({propName:n[e],templateName:e}))}function o4(n,e,t){let r=e instanceof mt?e:e?.injector;return r&&n.getStandaloneInjector!==null&&(r=n.getStandaloneInjector(r)||r),r?new O_(t,r):t}function s4(n){let e=n.get(Ts,null);if(e===null)throw new X(407,!1);let t=n.get(Mx,null),r=n.get(Ti,null);return{rendererFactory:e,sanitizer:t,changeDetectionScheduler:r,ngReflect:!1}}function a4(n,e){let t=Fx(n);return sx(e,t,t==="svg"?R0:t==="math"?gT:null)}function Fx(n){return(n.selectors[0][0]||"div").toLowerCase()}var Ds=class extends Jh{componentDef;ngModule;selector;componentType;ngContentSelectors;isBoundToModule;cachedInputs=null;cachedOutputs=null;get inputs(){return this.cachedInputs??=r4(this.componentDef.inputs),this.cachedInputs}get outputs(){return this.cachedOutputs??=i4(this.componentDef.outputs),this.cachedOutputs}constructor(e,t){super(),this.componentDef=e,this.ngModule=t,this.componentType=e.type,this.selector=NV(e.selectors),this.ngContentSelectors=e.ngContentSelectors??[],this.isBoundToModule=!!t}create(e,t,r,i,o,s){He(22);let a=Ee(null);try{let c=this.componentDef,u=c4(r,c,s,o),f=o4(c,i||this.ngModule,e),m=s4(f),_=m.rendererFactory.createRenderer(null,c),E=r?s3(_,r,c.encapsulation,f):a4(c,_),x=s?.some(uD)||o?.some(W=>typeof W!="function"&&W.bindings.some(uD)),V=sy(null,u,null,512|lx(c),null,null,m,_,f,null,GD(E,f,!0));V[Rt]=E,ch(V);let U=null;try{let W=by(Rt,V,2,"#host",()=>u.directiveRegistry,!0,0);E&&(cx(_,E,W),Ja(E,V)),Yh(u,V,W),X_(u,W,V),wy(u,W),t!==void 0&&u4(W,this.ngContentSelectors,t),U=Xn(W.index,V),V[rn]=U[rn],my(u,V,null)}catch(W){throw U!==null&&E_(U),E_(V),W}finally{He(23),lh()}return new Oh(this.componentType,V,!!x)}finally{Ee(a)}}};function c4(n,e,t,r){let i=n?["ng-version","20.2.1"]:FV(e.selectors[0]),o=null,s=null,a=0;if(t)for(let f of t)a+=f[R_].requiredVars,f.create&&(f.targetIdx=0,(o??=[]).push(f)),f.update&&(f.targetIdx=0,(s??=[]).push(f));if(r)for(let f=0;f<r.length;f++){let m=r[f];if(typeof m!="function")for(let _ of m.bindings){a+=_[R_].requiredVars;let E=f+1;_.create&&(_.targetIdx=E,(o??=[]).push(_)),_.update&&(_.targetIdx=E,(s??=[]).push(_))}}let c=[e];if(r)for(let f of r){let m=typeof f=="function"?f:f.type,_=D0(m);c.push(_)}return oy(0,null,l4(o,s),1,a,c,null,null,null,[i],null)}function l4(n,e){return!n&&!e?null:t=>{if(t&1&&n)for(let r of n)r.create();if(t&2&&e)for(let r of e)r.update()}}function uD(n){let e=n[R_].kind;return e==="input"||e==="twoWay"}var Oh=class extends xx{_rootLView;_hasInputBindings;instance;hostView;changeDetectorRef;componentType;location;previousInputValues=null;_tNode;constructor(e,t,r){super(),this._rootLView=t,this._hasInputBindings=r,this._tNode=th(t[ue],Rt),this.location=nc(this._tNode,t),this.instance=Xn(this._tNode.index,t)[rn],this.hostView=this.changeDetectorRef=new yo(t,void 0),this.componentType=e}setInput(e,t){this._hasInputBindings;let r=this._tNode;if(this.previousInputValues??=new Map,this.previousInputValues.has(e)&&Object.is(this.previousInputValues.get(e),t))return;let i=this._rootLView,o=gy(r,i[ue],i,e,t);this.previousInputValues.set(e,t);let s=Xn(r.index,i);_y(s,1)}get injector(){return new Is(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}};function u4(n,e,t){let r=n.projection=[];for(let i=0;i<e.length;i++){let o=t[i];r.push(o!=null&&o.length?Array.from(o):null)}}var Ai=(()=>{class n{static __NG_ELEMENT_ID__=d4}return n})();function d4(){let n=Dt();return Vx(n,Te())}var f4=Ai,Lx=class extends f4{_lContainer;_hostTNode;_hostLView;constructor(e,t,r){super(),this._lContainer=e,this._hostTNode=t,this._hostLView=r}get element(){return nc(this._hostTNode,this._hostLView)}get injector(){return new Is(this._hostTNode,this._hostLView)}get parentInjector(){let e=W_(this._hostTNode,this._hostLView);if(AD(e)){let t=Sh(e,this._hostLView),r=Ih(e),i=t[ue].data[r+8];return new Is(i,t)}else return new Is(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){let t=dD(this._lContainer);return t!==null&&t[e]||null}get length(){return this._lContainer.length-gn}createEmbeddedView(e,t,r){let i,o;typeof r=="number"?i=r:r!=null&&(i=r.index,o=r.injector);let s=iD(this._lContainer,e.ssrId),a=e.createEmbeddedViewImpl(t||{},o,s);return this.insertImpl(a,i,nD(this._hostTNode,s)),a}createComponent(e,t,r,i,o,s,a){let c=e&&!DL(e),u;if(c)u=t;else{let U=t||{};u=U.index,r=U.injector,i=U.projectableNodes,o=U.environmentInjector||U.ngModuleRef,s=U.directives,a=U.bindings}let f=c?e:new Ds(xi(e)),m=r||this.parentInjector;if(!o&&f.ngModule==null){let W=(c?m:this.parentInjector).get(mt,null);W&&(o=W)}let _=xi(f.componentType??{}),E=iD(this._lContainer,_?.id??null),x=E?.firstChild??null,V=f.create(m,i,x,o,s,a);return this.insertImpl(V.hostView,u,nD(this._hostTNode,E)),V}insert(e,t){return this.insertImpl(e,t,!0)}insertImpl(e,t,r){let i=e._lView;if(vT(i)){let a=this.indexOf(e);if(a!==-1)this.detach(a);else{let c=i[Ot],u=new Lx(c,c[Yn],c[Ot]);u.detach(u.indexOf(e))}}let o=this._adjustIndex(t),s=this._lContainer;return F3(s,i,o,r),e.attachToViewContainerRef(),C0(f_(s),o,e),e}move(e,t){return this.insert(e,t)}indexOf(e){let t=dD(this._lContainer);return t!==null?t.indexOf(e):-1}remove(e){let t=this._adjustIndex(e,-1),r=A_(this._lContainer,t);r&&(Hl(f_(this._lContainer),t),hx(r[ue],r))}detach(e){let t=this._adjustIndex(e,-1),r=A_(this._lContainer,t);return r&&Hl(f_(this._lContainer),t)!=null?new yo(r):null}_adjustIndex(e,t=0){return e??this.length+t}};function dD(n){return n[Yl]}function f_(n){return n[Yl]||(n[Yl]=[])}function Vx(n,e){let t,r=e[n.index];return br(r)?t=r:(t=Tx(r,e,null,n),e[n.index]=t,ay(e,t)),p4(t,e,n,r),new Lx(t,n,e)}function h4(n,e){let t=n[at],r=t.createComment(""),i=wr(e,n),o=t.parentNode(i);return Ph(t,o,r,t.nextSibling(i),!1),r}var p4=v4,g4=()=>!1;function m4(n,e,t){return g4(n,e,t)}function v4(n,e,t,r){if(n[go])return;let i;t.type&8?i=Zn(r):i=h4(e,t),n[go]=i}var N_=class n{queryList;matches=null;constructor(e){this.queryList=e}clone(){return new n(this.queryList)}setDirty(){this.queryList.setDirty()}},F_=class n{queries;constructor(e=[]){this.queries=e}createEmbeddedView(e){let t=e.queries;if(t!==null){let r=e.contentQueries!==null?e.contentQueries[0]:t.length,i=[];for(let o=0;o<r;o++){let s=t.getByIndex(o),a=this.queries[s.indexInDeclarationView];i.push(a.clone())}return new n(i)}return null}insertView(e){this.dirtyQueriesWithMatches(e)}detachView(e){this.dirtyQueriesWithMatches(e)}finishViewCreation(e){this.dirtyQueriesWithMatches(e)}dirtyQueriesWithMatches(e){for(let t=0;t<this.queries.length;t++)Iy(e,t).matches!==null&&this.queries[t].setDirty()}},Rh=class{flags;read;predicate;constructor(e,t,r=null){this.flags=t,this.read=r,typeof e=="string"?this.predicate=S4(e):this.predicate=e}},L_=class n{queries;constructor(e=[]){this.queries=e}elementStart(e,t){for(let r=0;r<this.queries.length;r++)this.queries[r].elementStart(e,t)}elementEnd(e){for(let t=0;t<this.queries.length;t++)this.queries[t].elementEnd(e)}embeddedTView(e){let t=null;for(let r=0;r<this.length;r++){let i=t!==null?t.length:0,o=this.getByIndex(r).embeddedTView(e,i);o&&(o.indexInDeclarationView=r,t!==null?t.push(o):t=[o])}return t!==null?new n(t):null}template(e,t){for(let r=0;r<this.queries.length;r++)this.queries[r].template(e,t)}getByIndex(e){return this.queries[e]}get length(){return this.queries.length}track(e){this.queries.push(e)}},V_=class n{metadata;matches=null;indexInDeclarationView=-1;crossesNgTemplate=!1;_declarationNodeIndex;_appliesToNextNode=!0;constructor(e,t=-1){this.metadata=e,this._declarationNodeIndex=t}elementStart(e,t){this.isApplyingToNode(t)&&this.matchTNode(e,t)}elementEnd(e){this._declarationNodeIndex===e.index&&(this._appliesToNextNode=!1)}template(e,t){this.elementStart(e,t)}embeddedTView(e,t){return this.isApplyingToNode(e)?(this.crossesNgTemplate=!0,this.addMatch(-e.index,t),new n(this.metadata)):null}isApplyingToNode(e){if(this._appliesToNextNode&&(this.metadata.flags&1)!==1){let t=this._declarationNodeIndex,r=e.parent;for(;r!==null&&r.type&8&&r.index!==t;)r=r.parent;return t===(r!==null?r.index:-1)}return this._appliesToNextNode}matchTNode(e,t){let r=this.metadata.predicate;if(Array.isArray(r))for(let i=0;i<r.length;i++){let o=r[i];this.matchTNodeWithReadOption(e,t,_4(t,o)),this.matchTNodeWithReadOption(e,t,wh(t,e,o,!1,!1))}else r===bo?t.type&4&&this.matchTNodeWithReadOption(e,t,-1):this.matchTNodeWithReadOption(e,t,wh(t,e,r,!1,!1))}matchTNodeWithReadOption(e,t,r){if(r!==null){let i=this.metadata.read;if(i!==null)if(i===on||i===Ai||i===bo&&t.type&4)this.addMatch(t.index,-2);else{let o=wh(t,e,i,!1,!1);o!==null&&this.addMatch(t.index,o)}else this.addMatch(t.index,r)}}addMatch(e,t){this.matches===null?this.matches=[e,t]:this.matches.push(e,t)}};function _4(n,e){let t=n.localNames;if(t!==null){for(let r=0;r<t.length;r+=2)if(t[r]===e)return t[r+1]}return null}function y4(n,e){return n.type&11?nc(n,e):n.type&4?Zh(n,e):null}function b4(n,e,t,r){return t===-1?y4(e,n):t===-2?w4(n,e,r):iu(n,n[ue],t,e)}function w4(n,e,t){if(t===on)return nc(e,n);if(t===bo)return Zh(e,n);if(t===Ai)return Vx(e,n)}function Ux(n,e,t,r){let i=e[Hr].queries[r];if(i.matches===null){let o=n.data,s=t.matches,a=[];for(let c=0;s!==null&&c<s.length;c+=2){let u=s[c];if(u<0)a.push(null);else{let f=o[u];a.push(b4(e,f,s[c+1],t.metadata.read))}}i.matches=a}return i.matches}function U_(n,e,t,r){let i=n.queries.getByIndex(t),o=i.matches;if(o!==null){let s=Ux(n,e,i,t);for(let a=0;a<o.length;a+=2){let c=o[a];if(c>0)r.push(s[a/2]);else{let u=o[a+1],f=e[-c];for(let m=gn;m<f.length;m++){let _=f[m];_[po]===_[Ot]&&U_(_[ue],_,u,r)}if(f[bs]!==null){let m=f[bs];for(let _=0;_<m.length;_++){let E=m[_];U_(E[ue],E,u,r)}}}}}return r}function E4(n,e){return n[Hr].queries[e].queryList}function jx(n,e,t){let r=new xh((t&4)===4);return bT(n,e,r,r.destroy),(e[Hr]??=new F_).queries.push(new N_(r))-1}function C4(n,e,t){let r=Nt();return r.firstCreatePass&&(Bx(r,new Rh(n,e,t),-1),(e&2)===2&&(r.staticViewQueries=!0)),jx(r,Te(),e)}function I4(n,e,t,r){let i=Nt();if(i.firstCreatePass){let o=Dt();Bx(i,new Rh(e,t,r),o.index),T4(i,n),(t&2)===2&&(i.staticContentQueries=!0)}return jx(i,Te(),t)}function S4(n){return n.split(",").map(e=>e.trim())}function Bx(n,e,t){n.queries===null&&(n.queries=new L_),n.queries.track(new V_(e,t))}function T4(n,e){let t=n.contentQueries||(n.contentQueries=[]),r=t.length?t[t.length-1]:-1;e!==r&&t.push(n.queries.length-1,e)}function Iy(n,e){return n.queries.getByIndex(e)}function D4(n,e){let t=n[ue],r=Iy(t,e);return r.crossesNgTemplate?U_(t,n,e,[]):Ux(t,n,r,e)}var fD=new Set;function As(n){fD.has(n)||(fD.add(n),performance?.mark?.("mark_feature_usage",{detail:{feature:n}}))}var xs=class{},ep=class{};var Nh=class extends xs{ngModuleType;_parent;_bootstrapComponents=[];_r3Injector;instance;destroyCbs=[];componentFactoryResolver=new kh(this);constructor(e,t,r,i=!0){super(),this.ngModuleType=e,this._parent=t;let o=T0(e);this._bootstrapComponents=ix(o.bootstrap),this._r3Injector=t_(e,t,[{provide:xs,useValue:this},{provide:Ps,useValue:this.componentFactoryResolver},...r],Si(e),new Set(["environment"])),i&&this.resolveInjectorInitializers()}resolveInjectorInitializers(){this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(this.ngModuleType)}get injector(){return this._r3Injector}destroy(){let e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(t=>t()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}},Fh=class extends ep{moduleType;constructor(e){super(),this.moduleType=e}create(e){return new Nh(this.moduleType,e,[])}};var su=class extends xs{injector;componentFactoryResolver=new kh(this);instance=null;constructor(e){super();let t=new hs([...e.providers,{provide:xs,useValue:this},{provide:Ps,useValue:this.componentFactoryResolver}],e.parent||ql(),e.debugName,new Set(["environment"]));this.injector=t,e.runEnvironmentInitializers&&t.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(e){this.injector.onDestroy(e)}};function ic(n,e,t=null){return new su({providers:n,parent:e,debugName:t,runEnvironmentInitializers:!0}).injector}var x4=(()=>{class n{_injector;cachedInjectors=new Map;constructor(t){this._injector=t}getOrCreateStandaloneInjector(t){if(!t.standalone)return null;if(!this.cachedInjectors.has(t)){let r=x0(!1,t.type),i=r.length>0?ic([r],this._injector,`Standalone[${t.type.name}]`):null;this.cachedInjectors.set(t,i)}return this.cachedInjectors.get(t)}ngOnDestroy(){try{for(let t of this.cachedInjectors.values())t!==null&&t.destroy()}finally{this.cachedInjectors.clear()}}static \u0275prov=Q({token:n,providedIn:"environment",factory:()=>new n(ie(mt))})}return n})();function et(n){return tc(()=>{let e=$x(n),t=re(H({},e),{decls:n.decls,vars:n.vars,template:n.template,consts:n.consts||null,ngContentSelectors:n.ngContentSelectors,onPush:n.changeDetection===G_.OnPush,directiveDefs:null,pipeDefs:null,dependencies:e.standalone&&n.dependencies||null,getStandaloneInjector:e.standalone?i=>i.get(x4).getOrCreateStandaloneInjector(t):null,getExternalStyles:null,signals:n.signals??!1,data:n.data||{},encapsulation:n.encapsulation||Mi.Emulated,styles:n.styles||Nn,_:null,schemas:n.schemas||null,tView:null,id:""});e.standalone&&As("NgStandalone"),Hx(t);let r=n.dependencies;return t.directiveDefs=hD(r,M4),t.pipeDefs=hD(r,aT),t.id=k4(t),t})}function M4(n){return xi(n)||D0(n)}function Tr(n){return tc(()=>({type:n.type,bootstrap:n.bootstrap||Nn,declarations:n.declarations||Nn,imports:n.imports||Nn,exports:n.exports||Nn,transitiveCompileScopes:null,schemas:n.schemas||null,id:n.id||null}))}function P4(n,e){if(n==null)return ho;let t={};for(let r in n)if(n.hasOwnProperty(r)){let i=n[r],o,s,a,c;Array.isArray(i)?(a=i[0],o=i[1],s=i[2]??o,c=i[3]||null):(o=i,s=i,a=Gh.None,c=null),t[o]=[r,a,c],e[o]=s}return t}function A4(n){if(n==null)return ho;let e={};for(let t in n)n.hasOwnProperty(t)&&(e[n[t]]=t);return e}function Ze(n){return tc(()=>{let e=$x(n);return Hx(e),e})}function Sy(n){return{type:n.type,name:n.name,factory:null,pure:n.pure!==!1,standalone:n.standalone??!0,onDestroy:n.type.prototype.ngOnDestroy||null}}function $x(n){let e={};return{type:n.type,providersResolver:null,factory:null,hostBindings:n.hostBindings||null,hostVars:n.hostVars||0,hostAttrs:n.hostAttrs||null,contentQueries:n.contentQueries||null,declaredInputs:e,inputConfig:n.inputs||ho,exportAs:n.exportAs||null,standalone:n.standalone??!0,signals:n.signals===!0,selectors:n.selectors||Nn,viewQuery:n.viewQuery||null,features:n.features||null,setInput:null,resolveHostDirectives:null,hostDirectives:null,inputs:P4(n.inputs,e),outputs:A4(n.outputs),debugInfo:null}}function Hx(n){n.features?.forEach(e=>e(n))}function hD(n,e){return n?()=>{let t=typeof n=="function"?n():n,r=[];for(let i of t){let o=e(i);o!==null&&r.push(o)}return r}:null}function k4(n){let e=0,t=typeof n.consts=="function"?"":n.consts,r=[n.selectors,n.ngContentSelectors,n.hostVars,n.hostAttrs,t,n.vars,n.decls,n.encapsulation,n.standalone,n.signals,n.exportAs,JSON.stringify(n.inputs),JSON.stringify(n.outputs),Object.getOwnPropertyNames(n.type.prototype),!!n.contentQueries,!!n.viewQuery];for(let o of r.join("|"))e=Math.imul(31,e)+o.charCodeAt(0)<<0;return e+=2147483648,"c"+e}function O4(n){return Object.getPrototypeOf(n.prototype).constructor}function Dn(n){let e=O4(n.type),t=!0,r=[n];for(;e;){let i;if(qr(n))i=e.\u0275cmp||e.\u0275dir;else{if(e.\u0275cmp)throw new X(903,!1);i=e.\u0275dir}if(i){if(t){r.push(i);let s=n;s.inputs=h_(n.inputs),s.declaredInputs=h_(n.declaredInputs),s.outputs=h_(n.outputs);let a=i.hostBindings;a&&V4(n,a);let c=i.viewQuery,u=i.contentQueries;if(c&&F4(n,c),u&&L4(n,u),R4(n,i),XS(n.outputs,i.outputs),qr(i)&&i.data.animation){let f=n.data;f.animation=(f.animation||[]).concat(i.data.animation)}}let o=i.features;if(o)for(let s=0;s<o.length;s++){let a=o[s];a&&a.ngInherit&&a(n),a===Dn&&(t=!1)}}e=Object.getPrototypeOf(e)}N4(r)}function R4(n,e){for(let t in e.inputs){if(!e.inputs.hasOwnProperty(t)||n.inputs.hasOwnProperty(t))continue;let r=e.inputs[t];r!==void 0&&(n.inputs[t]=r,n.declaredInputs[t]=e.declaredInputs[t])}}function N4(n){let e=0,t=null;for(let r=n.length-1;r>=0;r--){let i=n[r];i.hostVars=e+=i.hostVars,i.hostAttrs=Xa(i.hostAttrs,t=Xa(t,i.hostAttrs))}}function h_(n){return n===ho?{}:n===Nn?[]:n}function F4(n,e){let t=n.viewQuery;t?n.viewQuery=(r,i)=>{e(r,i),t(r,i)}:n.viewQuery=e}function L4(n,e){let t=n.contentQueries;t?n.contentQueries=(r,i,o)=>{e(r,i,o),t(r,i,o)}:n.contentQueries=e}function V4(n,e){let t=n.hostBindings;t?n.hostBindings=(r,i)=>{e(r,i),t(r,i)}:n.hostBindings=e}function U4(n,e,t,r,i,o,s,a){if(t.firstCreatePass){n.mergedAttrs=Xa(n.mergedAttrs,n.attrs);let f=n.tView=oy(2,n,i,o,s,t.directiveRegistry,t.pipeRegistry,null,t.schemas,t.consts,null);t.queries!==null&&(t.queries.template(t,n),f.queries=t.queries.embeddedTView(n))}a&&(n.flags|=a),Ka(n,!1);let c=B4(t,e,n,r);dh()&&uy(t,e,c,n),Ja(c,e);let u=Tx(c,e,c,n);e[r+Rt]=u,ay(e,u),m4(u,n,e)}function j4(n,e,t,r,i,o,s,a,c,u,f){let m=t+Rt,_;return e.firstCreatePass?(_=Xh(e,m,4,s||null,a||null),ih()&&Px(e,n,_,Es(e.consts,u),fy),xD(e,_)):_=e.data[m],U4(_,n,e,t,r,i,o,c),qa(_)&&Yh(e,n,_),u!=null&&Qh(n,_,f),_}function j(n,e,t,r,i,o,s,a){let c=Te(),u=Nt(),f=Es(u.consts,o);return j4(c,u,n,e,t,r,i,f,void 0,s,a),j}var B4=$4;function $4(n,e,t,r){return Jl(!0),e[at].createComment("")}var tp=(function(n){return n[n.CHANGE_DETECTION=0]="CHANGE_DETECTION",n[n.AFTER_NEXT_RENDER=1]="AFTER_NEXT_RENDER",n})(tp||{}),ks=new J(""),zx=!1,j_=class extends Ke{__isAsync;destroyRef=void 0;pendingTasks=void 0;constructor(e=!1){super(),this.__isAsync=e,hT()&&(this.destroyRef=k(Er,{optional:!0})??void 0,this.pendingTasks=k(Wr,{optional:!0})??void 0)}emit(e){let t=Ee(null);try{super.next(e)}finally{Ee(t)}}subscribe(e,t,r){let i=e,o=t||(()=>null),s=r;if(e&&typeof e=="object"){let c=e;i=c.next?.bind(c),o=c.error?.bind(c),s=c.complete?.bind(c)}this.__isAsync&&(o=this.wrapInTimeout(o),i&&(i=this.wrapInTimeout(i)),s&&(s=this.wrapInTimeout(s)));let a=super.subscribe({next:i,error:o,complete:s});return e instanceof dt&&e.add(a),a}wrapInTimeout(e){return t=>{let r=this.pendingTasks?.add();setTimeout(()=>{try{e(t)}finally{r!==void 0&&this.pendingTasks?.remove(r)}})}}},nt=j_;function qx(n){let e,t;function r(){n=tu;try{t!==void 0&&typeof cancelAnimationFrame=="function"&&cancelAnimationFrame(t),e!==void 0&&clearTimeout(e)}catch{}}return e=setTimeout(()=>{n(),r()}),typeof requestAnimationFrame=="function"&&(t=requestAnimationFrame(()=>{n(),r()})),()=>r()}function pD(n){return queueMicrotask(()=>n()),()=>{n=tu}}var Ty="isAngularZone",Lh=Ty+"_ID",H4=0,xe=class n{hasPendingMacrotasks=!1;hasPendingMicrotasks=!1;isStable=!0;onUnstable=new nt(!1);onMicrotaskEmpty=new nt(!1);onStable=new nt(!1);onError=new nt(!1);constructor(e){let{enableLongStackTrace:t=!1,shouldCoalesceEventChangeDetection:r=!1,shouldCoalesceRunChangeDetection:i=!1,scheduleInRootZone:o=zx}=e;if(typeof Zone>"u")throw new X(908,!1);Zone.assertZonePatched();let s=this;s._nesting=0,s._outer=s._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(s._inner=s._inner.fork(new Zone.TaskTrackingZoneSpec)),t&&Zone.longStackTraceZoneSpec&&(s._inner=s._inner.fork(Zone.longStackTraceZoneSpec)),s.shouldCoalesceEventChangeDetection=!i&&r,s.shouldCoalesceRunChangeDetection=i,s.callbackScheduled=!1,s.scheduleInRootZone=o,W4(s)}static isInAngularZone(){return typeof Zone<"u"&&Zone.current.get(Ty)===!0}static assertInAngularZone(){if(!n.isInAngularZone())throw new X(909,!1)}static assertNotInAngularZone(){if(n.isInAngularZone())throw new X(909,!1)}run(e,t,r){return this._inner.run(e,t,r)}runTask(e,t,r,i){let o=this._inner,s=o.scheduleEventTask("NgZoneEvent: "+i,e,z4,tu,tu);try{return o.runTask(s,t,r)}finally{o.cancelTask(s)}}runGuarded(e,t,r){return this._inner.runGuarded(e,t,r)}runOutsideAngular(e){return this._outer.run(e)}},z4={};function Dy(n){if(n._nesting==0&&!n.hasPendingMicrotasks&&!n.isStable)try{n._nesting++,n.onMicrotaskEmpty.emit(null)}finally{if(n._nesting--,!n.hasPendingMicrotasks)try{n.runOutsideAngular(()=>n.onStable.emit(null))}finally{n.isStable=!0}}}function q4(n){if(n.isCheckStableRunning||n.callbackScheduled)return;n.callbackScheduled=!0;function e(){qx(()=>{n.callbackScheduled=!1,B_(n),n.isCheckStableRunning=!0,Dy(n),n.isCheckStableRunning=!1})}n.scheduleInRootZone?Zone.root.run(()=>{e()}):n._outer.run(()=>{e()}),B_(n)}function W4(n){let e=()=>{q4(n)},t=H4++;n._inner=n._inner.fork({name:"angular",properties:{[Ty]:!0,[Lh]:t,[Lh+t]:!0},onInvokeTask:(r,i,o,s,a,c)=>{if(G4(c))return r.invokeTask(o,s,a,c);try{return gD(n),r.invokeTask(o,s,a,c)}finally{(n.shouldCoalesceEventChangeDetection&&s.type==="eventTask"||n.shouldCoalesceRunChangeDetection)&&e(),mD(n)}},onInvoke:(r,i,o,s,a,c,u)=>{try{return gD(n),r.invoke(o,s,a,c,u)}finally{n.shouldCoalesceRunChangeDetection&&!n.callbackScheduled&&!K4(c)&&e(),mD(n)}},onHasTask:(r,i,o,s)=>{r.hasTask(o,s),i===o&&(s.change=="microTask"?(n._hasPendingMicrotasks=s.microTask,B_(n),Dy(n)):s.change=="macroTask"&&(n.hasPendingMacrotasks=s.macroTask))},onHandleError:(r,i,o,s)=>(r.handleError(o,s),n.runOutsideAngular(()=>n.onError.emit(s)),!1)})}function B_(n){n._hasPendingMicrotasks||(n.shouldCoalesceEventChangeDetection||n.shouldCoalesceRunChangeDetection)&&n.callbackScheduled===!0?n.hasPendingMicrotasks=!0:n.hasPendingMicrotasks=!1}function gD(n){n._nesting++,n.isStable&&(n.isStable=!1,n.onUnstable.emit(null))}function mD(n){n._nesting--,Dy(n)}var Vh=class{hasPendingMicrotasks=!1;hasPendingMacrotasks=!1;isStable=!0;onUnstable=new nt;onMicrotaskEmpty=new nt;onStable=new nt;onError=new nt;run(e,t,r){return e.apply(t,r)}runGuarded(e,t,r){return e.apply(t,r)}runOutsideAngular(e){return e()}runTask(e,t,r,i){return e.apply(t,r)}};function G4(n){return Wx(n,"__ignore_ng_zone__")}function K4(n){return Wx(n,"__scheduler_tick__")}function Wx(n,e){return!Array.isArray(n)||n.length!==1?!1:n[0]?.data?.[e]===!0}var xy=(()=>{class n{impl=null;execute(){this.impl?.execute()}static \u0275prov=Q({token:n,providedIn:"root",factory:()=>new n})}return n})(),Gx=[0,1,2,3],Kx=(()=>{class n{ngZone=k(xe);scheduler=k(Ti);errorHandler=k(vr,{optional:!0});sequences=new Set;deferredRegistrations=new Set;executing=!1;constructor(){k(ks,{optional:!0})}execute(){let t=this.sequences.size>0;t&&He(16),this.executing=!0;for(let r of Gx)for(let i of this.sequences)if(!(i.erroredOrDestroyed||!i.hooks[r]))try{i.pipelinedValue=this.ngZone.runOutsideAngular(()=>this.maybeTrace(()=>{let o=i.hooks[r];return o(i.pipelinedValue)},i.snapshot))}catch(o){i.erroredOrDestroyed=!0,this.errorHandler?.handleError(o)}this.executing=!1;for(let r of this.sequences)r.afterRun(),r.once&&(this.sequences.delete(r),r.destroy());for(let r of this.deferredRegistrations)this.sequences.add(r);this.deferredRegistrations.size>0&&this.scheduler.notify(7),this.deferredRegistrations.clear(),t&&He(17)}register(t){let{view:r}=t;r!==void 0?((r[ys]??=[]).push(t),Ga(r),r[pe]|=8192):this.executing?this.deferredRegistrations.add(t):this.addSequence(t)}addSequence(t){this.sequences.add(t),this.scheduler.notify(7)}unregister(t){this.executing&&this.sequences.has(t)?(t.erroredOrDestroyed=!0,t.pipelinedValue=void 0,t.once=!0):(this.sequences.delete(t),this.deferredRegistrations.delete(t))}maybeTrace(t,r){return r?r.run(tp.AFTER_NEXT_RENDER,t):t()}static \u0275prov=Q({token:n,providedIn:"root",factory:()=>new n})}return n})(),Uh=class{impl;hooks;view;once;snapshot;erroredOrDestroyed=!1;pipelinedValue=void 0;unregisterOnDestroy;constructor(e,t,r,i,o,s=null){this.impl=e,this.hooks=t,this.view=r,this.once=i,this.snapshot=s,this.unregisterOnDestroy=o?.onDestroy(()=>this.destroy())}afterRun(){this.erroredOrDestroyed=!1,this.pipelinedValue=void 0,this.snapshot?.dispose(),this.snapshot=null}destroy(){this.impl.unregister(this),this.unregisterOnDestroy?.();let e=this.view?.[ys];e&&(this.view[ys]=e.filter(t=>t!==this))}};function du(n,e){let t=e?.injector??k(Qe);return As("NgAfterNextRender"),Q4(n,t,e,!0)}function Y4(n){return n instanceof Function?[void 0,void 0,n,void 0]:[n.earlyRead,n.write,n.mixedReadWrite,n.read]}function Q4(n,e,t,r){let i=e.get(xy);i.impl??=e.get(Kx);let o=e.get(ks,null,{optional:!0}),s=t?.manualCleanup!==!0?e.get(Er):null,a=e.get(hh,null,{optional:!0}),c=new Uh(i.impl,Y4(n),a?.view,r,s,o?.snapshot(null));return i.impl.register(c),c}var My=(()=>{class n{log(t){console.log(t)}warn(t){console.warn(t)}static \u0275fac=function(r){return new(r||n)};static \u0275prov=Q({token:n,factory:n.\u0275fac,providedIn:"platform"})}return n})();var Py=new J("");function Eo(n){return!!n&&typeof n.then=="function"}function Ay(n){return!!n&&typeof n.subscribe=="function"}var ky=new J("");function np(n){return nn([{provide:ky,multi:!0,useValue:n}])}var Oy=(()=>{class n{resolve;reject;initialized=!1;done=!1;donePromise=new Promise((t,r)=>{this.resolve=t,this.reject=r});appInits=k(ky,{optional:!0})??[];injector=k(Qe);constructor(){}runInitializers(){if(this.initialized)return;let t=[];for(let i of this.appInits){let o=wt(this.injector,i);if(Eo(o))t.push(o);else if(Ay(o)){let s=new Promise((a,c)=>{o.subscribe({complete:a,error:c})});t.push(s)}}let r=()=>{this.done=!0,this.resolve()};Promise.all(t).then(()=>{r()}).catch(i=>{this.reject(i)}),t.length===0&&r(),this.initialized=!0}static \u0275fac=function(r){return new(r||n)};static \u0275prov=Q({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),fu=new J("");function Yx(){Av(()=>{let n="";throw new X(600,n)})}function Qx(n){return n.isBoundToModule}var Z4=10;var ki=(()=>{class n{_runningTick=!1;_destroyed=!1;_destroyListeners=[];_views=[];internalErrorHandler=k(mn);afterRenderManager=k(xy);zonelessEnabled=k(eu);rootEffectScheduler=k(a_);dirtyFlags=0;tracingSnapshot=null;allTestViews=new Set;autoDetectTestViews=new Set;includeAllTestViews=!1;afterTick=new Ke;get allViews(){return[...(this.includeAllTestViews?this.allTestViews:this.autoDetectTestViews).keys(),...this._views]}get destroyed(){return this._destroyed}componentTypes=[];components=[];internalPendingTask=k(Wr);get isStable(){return this.internalPendingTask.hasPendingTasksObservable.pipe(Ce(t=>!t))}constructor(){k(ks,{optional:!0})}whenStable(){let t;return new Promise(r=>{t=this.isStable.subscribe({next:i=>{i&&r()}})}).finally(()=>{t.unsubscribe()})}_injector=k(mt);_rendererFactory=null;get injector(){return this._injector}bootstrap(t,r){return this.bootstrapImpl(t,r)}bootstrapImpl(t,r,i=Qe.NULL){return this._injector.get(xe).run(()=>{He(10);let s=t instanceof Jh;if(!this._injector.get(Oy).done){let x="";throw new X(405,x)}let c;s?c=t:c=this._injector.get(Ps).resolveComponentFactory(t),this.componentTypes.push(c.componentType);let u=Qx(c)?void 0:this._injector.get(xs),f=r||c.selector,m=c.create(i,[],f,u),_=m.location.nativeElement,E=m.injector.get(Py,null);return E?.registerApplication(_),m.onDestroy(()=>{this.detachView(m.hostView),ru(this.components,m),E?.unregisterApplication(_)}),this._loadComponent(m),He(11,m),m})}tick(){this.zonelessEnabled||(this.dirtyFlags|=1),this._tick()}_tick(){He(12),this.tracingSnapshot!==null?this.tracingSnapshot.run(tp.CHANGE_DETECTION,this.tickImpl):this.tickImpl()}tickImpl=()=>{if(this._runningTick)throw new X(101,!1);let t=Ee(null);try{this._runningTick=!0,this.synchronize()}finally{this._runningTick=!1,this.tracingSnapshot?.dispose(),this.tracingSnapshot=null,Ee(t),this.afterTick.next(),He(13)}};synchronize(){this._rendererFactory===null&&!this._injector.destroyed&&(this._rendererFactory=this._injector.get(Ts,null,{optional:!0}));let t=0;for(;this.dirtyFlags!==0&&t++<Z4;)He(14),this.synchronizeOnce(),He(15)}synchronizeOnce(){this.dirtyFlags&16&&(this.dirtyFlags&=-17,this.rootEffectScheduler.flush());let t=!1;if(this.dirtyFlags&7){let r=!!(this.dirtyFlags&1);this.dirtyFlags&=-8,this.dirtyFlags|=8;for(let{_lView:i}of this.allViews){if(!r&&!Ql(i))continue;let o=r&&!this.zonelessEnabled?0:1;vy(i,o),t=!0}if(this.dirtyFlags&=-5,this.syncDirtyFlagsWithViews(),this.dirtyFlags&23)return}t||(this._rendererFactory?.begin?.(),this._rendererFactory?.end?.()),this.dirtyFlags&8&&(this.dirtyFlags&=-9,this.afterRenderManager.execute()),this.syncDirtyFlagsWithViews()}syncDirtyFlagsWithViews(){if(this.allViews.some(({_lView:t})=>Ql(t))){this.dirtyFlags|=2;return}else this.dirtyFlags&=-8}attachView(t){let r=t;this._views.push(r),r.attachToAppRef(this)}detachView(t){let r=t;ru(this._views,r),r.detachFromAppRef()}_loadComponent(t){this.attachView(t.hostView);try{this.tick()}catch(i){this.internalErrorHandler(i)}this.components.push(t),this._injector.get(fu,[]).forEach(i=>i(t))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(t=>t()),this._views.slice().forEach(t=>t.destroy())}finally{this._destroyed=!0,this._views=[],this._destroyListeners=[]}}onDestroy(t){return this._destroyListeners.push(t),()=>ru(this._destroyListeners,t)}destroy(){if(this._destroyed)throw new X(406,!1);let t=this._injector;t.destroy&&!t.destroyed&&t.destroy()}get viewCount(){return this._views.length}static \u0275fac=function(r){return new(r||n)};static \u0275prov=Q({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function ru(n,e){let t=n.indexOf(e);t>-1&&n.splice(t,1)}function sn(n,e,t,r){let i=Te(),o=Xl();if(wo(i,o,e)){let s=Nt(),a=uh();g3(a,i,n,e,t,r)}return sn}var Ry=new J("",{providedIn:"root",factory:()=>!1}),Ny=new J("",{providedIn:"root",factory:()=>X4}),X4=4e3;var Tie=typeof document<"u"&&typeof document?.documentElement?.getAnimations=="function";function C(n,e,t){let r=Te(),i=Xl();if(wo(r,i,e)){let o=Nt(),s=uh();mx(s,r,n,e,r[at],t)}return C}function vD(n,e,t,r,i){gy(e,n,t,i?"class":"style",r)}function h(n,e,t,r){let i=Te(),o=i[ue],s=n+Rt,a=o.firstCreatePass?by(s,i,2,e,fy,ih(),t,r):o.data[s];if(hy(a,i,n,e,Zx),qa(a)){let c=i[ue];Yh(c,i,a),X_(c,a,i)}return r!=null&&Qh(i,a),h}function p(){let n=Nt(),e=Dt(),t=py(e);return n.firstCreatePass&&wy(n,t),z0(t)&&q0(),H0(),t.classesWithoutHost!=null&&OL(t)&&vD(n,t,Te(),t.classesWithoutHost,!0),t.stylesWithoutHost!=null&&RL(t)&&vD(n,t,Te(),t.stylesWithoutHost,!1),p}function z(n,e,t,r){return h(n,e,t,r),p(),z}function Dr(n,e,t,r){let i=Te(),o=i[ue],s=n+Rt,a=o.firstCreatePass?J3(s,o,2,e,t,r):o.data[s];return hy(a,i,n,e,Zx),r!=null&&Qh(i,a),Dr}function tr(){let n=Dt(),e=py(n);return z0(e)&&q0(),H0(),tr}var Zx=(n,e,t,r,i)=>(Jl(!0),sx(e[at],r,LT()));function rp(n,e,t){let r=Te(),i=r[ue],o=n+Rt,s=i.firstCreatePass?by(o,r,8,"ng-container",fy,ih(),e,t):i.data[o];if(hy(s,r,n,"ng-container",J4),qa(s)){let a=r[ue];Yh(a,r,s),X_(a,s,r)}return t!=null&&Qh(r,s),rp}function ip(){let n=Nt(),e=Dt(),t=py(e);return n.firstCreatePass&&wy(n,t),ip}var J4=(n,e,t,r,i)=>(Jl(!0),UV(e[at],""));function Z(){return Te()}var Cs=void 0;function eU(n){let e=Math.floor(Math.abs(n)),t=n.toString().replace(/^[^.]*\.?/,"").length;return e===1&&t===0?1:5}var tU=["en",[["a","p"],["AM","PM"],Cs],[["AM","PM"],Cs,Cs],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],Cs,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],Cs,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",Cs,"{1} 'at' {0}",Cs],[".",",",";","%","+","-","E","\xD7","\u2030","\u221E","NaN",":"],["#,##0.###","#,##0%","\xA4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",eU],p_={};function op(n){let e=nU(n),t=_D(e);if(t)return t;let r=e.split("-")[0];if(t=_D(r),t)return t;if(r==="en")return tU;throw new X(701,!1)}function _D(n){return n in p_||(p_[n]=_r.ng&&_r.ng.common&&_r.ng.common.locales&&_r.ng.common.locales[n]),p_[n]}var Os=(function(n){return n[n.LocaleId=0]="LocaleId",n[n.DayPeriodsFormat=1]="DayPeriodsFormat",n[n.DayPeriodsStandalone=2]="DayPeriodsStandalone",n[n.DaysFormat=3]="DaysFormat",n[n.DaysStandalone=4]="DaysStandalone",n[n.MonthsFormat=5]="MonthsFormat",n[n.MonthsStandalone=6]="MonthsStandalone",n[n.Eras=7]="Eras",n[n.FirstDayOfWeek=8]="FirstDayOfWeek",n[n.WeekendRange=9]="WeekendRange",n[n.DateFormat=10]="DateFormat",n[n.TimeFormat=11]="TimeFormat",n[n.DateTimeFormat=12]="DateTimeFormat",n[n.NumberSymbols=13]="NumberSymbols",n[n.NumberFormats=14]="NumberFormats",n[n.CurrencyCode=15]="CurrencyCode",n[n.CurrencySymbol=16]="CurrencySymbol",n[n.CurrencyName=17]="CurrencyName",n[n.Currencies=18]="Currencies",n[n.Directionality=19]="Directionality",n[n.PluralCase=20]="PluralCase",n[n.ExtraData=21]="ExtraData",n})(Os||{});function nU(n){return n.toLowerCase().replace(/_/g,"-")}var hu="en-US";var rU=hu;function Xx(n){typeof n=="string"&&(rU=n.toLowerCase().replace(/_/g,"-"))}function B(n,e,t){let r=Te(),i=Nt(),o=Dt();return Jx(i,r,r[at],o,n,e,t),B}function Jx(n,e,t,r,i,o,s){let a=!0,c=null;if((r.type&3||s)&&(c??=d_(r,e,o),t4(r,n,e,s,t,i,o,c)&&(a=!1)),a){let u=r.outputs?.[i],f=r.hostDirectiveOutputs?.[i];if(f&&f.length)for(let m=0;m<f.length;m+=2){let _=f[m],E=f[m+1];c??=d_(r,e,o),lD(r,e,_,E,i,c)}if(u&&u.length)for(let m of u)c??=d_(r,e,o),lD(r,e,m,i,i,c)}}function I(n=1){return FT(n)}function Fy(n,e,t,r){I4(n,e,t,r)}function Co(n,e,t){C4(n,e,t)}function Qr(n){let e=Te(),t=Nt(),r=X0();ah(r+1);let i=Iy(t,r);if(n.dirty&&mT(e)===((i.metadata.flags&2)===2)){if(i.matches===null)n.reset([]);else{let o=D4(e,r);n.reset(o,GL),n.notifyOnChanges()}return!0}return!1}function Zr(){return E4(Te(),X0())}function qt(n){let e=TT();return F0(e,Rt+n)}function _h(n,e){return n<<17|e<<2}function Ms(n){return n>>17&32767}function iU(n){return(n&2)==2}function oU(n,e){return n&131071|e<<17}function $_(n){return n|2}function ec(n){return(n&131068)>>2}function g_(n,e){return n&-131069|e<<2}function sU(n){return(n&1)===1}function H_(n){return n|1}function aU(n,e,t,r,i,o){let s=o?e.classBindings:e.styleBindings,a=Ms(s),c=ec(s);n[r]=t;let u=!1,f;if(Array.isArray(t)){let m=t;f=m[1],(f===null||$a(m,f)>0)&&(u=!0)}else f=t;if(i)if(c!==0){let _=Ms(n[a+1]);n[r+1]=_h(_,a),_!==0&&(n[_+1]=g_(n[_+1],r)),n[a+1]=oU(n[a+1],r)}else n[r+1]=_h(a,0),a!==0&&(n[a+1]=g_(n[a+1],r)),a=r;else n[r+1]=_h(c,0),a===0?a=r:n[c+1]=g_(n[c+1],r),c=r;u&&(n[r+1]=$_(n[r+1])),yD(n,f,r,!0),yD(n,f,r,!1),cU(e,f,n,r,o),s=_h(a,c),o?e.classBindings=s:e.styleBindings=s}function cU(n,e,t,r,i){let o=i?n.residualClasses:n.residualStyles;o!=null&&typeof e=="string"&&$a(o,e)>=0&&(t[r+1]=H_(t[r+1]))}function yD(n,e,t,r){let i=n[t+1],o=e===null,s=r?Ms(i):ec(i),a=!1;for(;s!==0&&(a===!1||o);){let c=n[s],u=n[s+1];lU(c,e)&&(a=!0,n[s+1]=r?H_(u):$_(u)),s=r?Ms(u):ec(u)}a&&(n[t+1]=r?$_(i):H_(i))}function lU(n,e){return n===null||e==null||(Array.isArray(n)?n[1]:n)===e?!0:Array.isArray(n)&&typeof e=="string"?$a(n,e)>=0:!1}function xn(n,e,t){return eM(n,e,t,!1),xn}function he(n,e){return eM(n,e,null,!0),he}function eM(n,e,t,r){let i=Te(),o=Nt(),s=Z0(2);if(o.firstUpdatePass&&dU(o,n,s,r),e!==Jn&&wo(i,s,e)){let a=o.data[vo()];mU(o,a,i,i[at],n,i[s+1]=vU(e,t),r,s)}}function uU(n,e){return e>=n.expandoStartIndex}function dU(n,e,t,r){let i=n.data;if(i[t+1]===null){let o=i[vo()],s=uU(n,t);_U(o,r)&&e===null&&!s&&(e=!1),e=fU(i,o,e,r),aU(i,o,e,t,s,r)}}function fU(n,e,t,r){let i=kT(n),o=r?e.residualClasses:e.residualStyles;if(i===null)(r?e.classBindings:e.styleBindings)===0&&(t=m_(null,n,e,t,r),t=au(t,e.attrs,r),o=null);else{let s=e.directiveStylingLast;if(s===-1||n[s]!==i)if(t=m_(i,n,e,t,r),o===null){let c=hU(n,e,r);c!==void 0&&Array.isArray(c)&&(c=m_(null,n,e,c[1],r),c=au(c,e.attrs,r),pU(n,e,r,c))}else o=gU(n,e,r)}return o!==void 0&&(r?e.residualClasses=o:e.residualStyles=o),t}function hU(n,e,t){let r=t?e.classBindings:e.styleBindings;if(ec(r)!==0)return n[Ms(r)]}function pU(n,e,t,r){let i=t?e.classBindings:e.styleBindings;n[Ms(i)]=r}function gU(n,e,t){let r,i=e.directiveEnd;for(let o=1+e.directiveStylingLast;o<i;o++){let s=n[o].hostAttrs;r=au(r,s,t)}return au(r,e.attrs,t)}function m_(n,e,t,r,i){let o=null,s=t.directiveEnd,a=t.directiveStylingLast;for(a===-1?a=t.directiveStart:a++;a<s&&(o=e[a],r=au(r,o.hostAttrs,i),o!==n);)a++;return n!==null&&(t.directiveStylingLast=a),r}function au(n,e,t){let r=t?1:2,i=-1;if(e!==null)for(let o=0;o<e.length;o++){let s=e[o];typeof s=="number"?i=s:i===r&&(Array.isArray(n)||(n=n===void 0?[]:["",n]),sT(n,s,t?!0:e[++o]))}return n===void 0?null:n}function mU(n,e,t,r,i,o,s,a){if(!(e.type&3))return;let c=n.data,u=c[a+1],f=sU(u)?bD(c,e,t,i,ec(u),s):void 0;if(!jh(f)){jh(o)||iU(u)&&(o=bD(c,null,t,i,a,s));let m=N0(vo(),t);o3(r,s,m,i,o)}}function bD(n,e,t,r,i,o){let s=e===null,a;for(;i>0;){let c=n[i],u=Array.isArray(c),f=u?c[1]:c,m=f===null,_=t[i+1];_===Jn&&(_=m?Nn:void 0);let E=m?Jf(_,r):f===r?_:void 0;if(u&&!jh(E)&&(E=Jf(c,r)),jh(E)&&(a=E,s))return a;let x=n[i+1];i=s?Ms(x):ec(x)}if(e!==null){let c=o?e.residualClasses:e.residualStyles;c!=null&&(a=Jf(c,r))}return a}function jh(n){return n!==void 0}function vU(n,e){return n==null||n===""||(typeof e=="string"?n=n+e:typeof n=="object"&&(n=Si(rc(n)))),n}function _U(n,e){return(n.flags&(e?8:16))!==0}function b(n,e=""){let t=Te(),r=Nt(),i=n+Rt,o=r.firstCreatePass?Xh(r,i,1,e,null):r.data[i],s=yU(r,t,o,e,n);t[i]=s,dh()&&uy(r,t,s,o),Ka(o,!1)}var yU=(n,e,t,r,i)=>(Jl(!0),LV(e[at],r));function bU(n,e,t,r=""){return wo(n,Xl(),t)?e+fo(t)+r:Jn}function wU(n,e,t,r,i,o=""){let s=DT(),a=Rx(n,s,t,i);return Z0(2),a?e+fo(t)+r+fo(i)+o:Jn}function K(n){return ee("",n),K}function ee(n,e,t){let r=Te(),i=bU(r,n,e,t);return i!==Jn&&tM(r,vo(),i),ee}function Mn(n,e,t,r,i){let o=Te(),s=wU(o,n,e,t,r,i);return s!==Jn&&tM(o,vo(),s),Mn}function tM(n,e,t){let r=N0(e,n);VV(n[at],r,t)}function qe(n,e,t){i_(e)&&(e=e());let r=Te(),i=Xl();if(wo(r,i,e)){let o=Nt(),s=uh();mx(s,r,n,e,r[at],t)}return qe}function Xe(n,e){let t=i_(n);return t&&n.set(e),t}function We(n,e){let t=Te(),r=Nt(),i=Dt();return Jx(r,t,t[at],i,n,e),We}function EU(n,e,t){let r=Nt();if(r.firstCreatePass){let i=qr(n);z_(t,r.data,r.blueprint,i,!0),z_(e,r.data,r.blueprint,i,!1)}}function z_(n,e,t,r,i){if(n=Ht(n),Array.isArray(n))for(let o=0;o<n.length;o++)z_(n[o],e,t,r,i);else{let o=Nt(),s=Te(),a=Dt(),c=fs(n)?n:Ht(n.provide),u=P0(n),f=a.providerIndexes&1048575,m=a.directiveStart,_=a.providerIndexes>>20;if(fs(n)||!n.multi){let E=new Ss(u,i,ne,null),x=__(c,e,i?f:f+_,m);x===-1?(b_(Dh(a,s),o,c),v_(o,n,e.length),e.push(c),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),t.push(E),s.push(E)):(t[x]=E,s[x]=E)}else{let E=__(c,e,f+_,m),x=__(c,e,f,f+_),V=E>=0&&t[E],U=x>=0&&t[x];if(i&&!U||!i&&!V){b_(Dh(a,s),o,c);let W=SU(i?IU:CU,t.length,i,r,u,n);!i&&U&&(t[x].providerFactory=W),v_(o,n,e.length,0),e.push(c),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),t.push(W),s.push(W)}else{let W=nM(t[i?x:E],u,!i&&r);v_(o,n,E>-1?E:x,W)}!i&&r&&U&&t[x].componentProviders++}}}function v_(n,e,t,r){let i=fs(e),o=fT(e);if(i||o){let c=(o?Ht(e.useClass):e).prototype.ngOnDestroy;if(c){let u=n.destroyHooks||(n.destroyHooks=[]);if(!i&&e.multi){let f=u.indexOf(t);f===-1?u.push(t,[r,c]):u[f+1].push(r,c)}else u.push(t,c)}}}function nM(n,e,t){return t&&n.componentProviders++,n.multi.push(e)-1}function __(n,e,t,r){for(let i=t;i<r;i++)if(e[i]===n)return i;return-1}function CU(n,e,t,r,i){return q_(this.multi,[])}function IU(n,e,t,r,i){let o=this.multi,s;if(this.providerFactory){let a=this.providerFactory.componentProviders,c=iu(r,r[ue],this.providerFactory.index,i);s=c.slice(0,a),q_(o,s);for(let u=a;u<c.length;u++)s.push(c[u])}else s=[],q_(o,s);return s}function q_(n,e){for(let t=0;t<n.length;t++){let r=n[t];e.push(r())}return e}function SU(n,e,t,r,i,o){let s=new Ss(n,t,ne,null);return s.multi=[],s.index=e,s.componentProviders=0,nM(s,i,r&&!t),s}function Xr(n,e=[]){return t=>{t.providersResolver=(r,i)=>EU(r,i?i(n):n,e)}}function Jr(n,e,t){let r=oh()+n,i=Te();return i[r]===Jn?Cy(i,r,t?e.call(t):e()):e4(i,r)}function Vn(n,e,t,r){return TU(Te(),oh(),n,e,t,r)}function rM(n,e){let t=n[e];return t===Jn?void 0:t}function TU(n,e,t,r,i,o){let s=e+t;return wo(n,s,i)?Cy(n,s+1,o?r.call(o,i):r(i)):rM(n,s+1)}function DU(n,e,t,r,i,o,s){let a=e+t;return Rx(n,a,i,o)?Cy(n,a+2,s?r.call(s,i,o):r(i,o)):rM(n,a+2)}function Ly(n,e){let t=Nt(),r,i=n+Rt;t.firstCreatePass?(r=xU(e,t.pipeRegistry),t.data[i]=r,r.onDestroy&&(t.destroyHooks??=[]).push(i,r.onDestroy)):r=t.data[i];let o=r.factory||(r.factory=lo(r.type,!0)),s,a=pn(ne);try{let c=Th(!1),u=o();return Th(c),L0(t,Te(),i,u),u}finally{pn(a)}}function xU(n,e){if(e)for(let t=e.length-1;t>=0;t--){let r=e[t];if(n===r.name)return r}}function Vy(n,e,t,r){let i=n+Rt,o=Te(),s=F0(o,i);return MU(o,i)?DU(o,oh(),e,s.transform,t,r,s):s.transform(t,r)}function MU(n,e){return n[ue].data[e].pure}function xr(n,e){return Zh(n,e)}var Bh=class{ngModuleFactory;componentFactories;constructor(e,t){this.ngModuleFactory=e,this.componentFactories=t}},Uy=(()=>{class n{compileModuleSync(t){return new Fh(t)}compileModuleAsync(t){return Promise.resolve(this.compileModuleSync(t))}compileModuleAndAllComponentsSync(t){let r=this.compileModuleSync(t),i=T0(t),o=ix(i.declarations).reduce((s,a)=>{let c=xi(a);return c&&s.push(new Ds(c)),s},[]);return new Bh(r,o)}compileModuleAndAllComponentsAsync(t){return Promise.resolve(this.compileModuleAndAllComponentsSync(t))}clearCache(){}clearCacheFor(t){}getModuleId(t){}static \u0275fac=function(r){return new(r||n)};static \u0275prov=Q({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var PU=(()=>{class n{zone=k(xe);changeDetectionScheduler=k(Ti);applicationRef=k(ki);applicationErrorHandler=k(mn);_onMicrotaskEmptySubscription;initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.changeDetectionScheduler.runningTick||this.zone.run(()=>{try{this.applicationRef.dirtyFlags|=1,this.applicationRef._tick()}catch(t){this.applicationErrorHandler(t)}})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}static \u0275fac=function(r){return new(r||n)};static \u0275prov=Q({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),iM=new J("",{factory:()=>!1});function jy({ngZoneFactory:n,ignoreChangesOutsideZone:e,scheduleInRootZone:t}){return n??=()=>new xe(re(H({},$y()),{scheduleInRootZone:t})),[{provide:xe,useFactory:n},{provide:Di,multi:!0,useFactory:()=>{let r=k(PU,{optional:!0});return()=>r.initialize()}},{provide:Di,multi:!0,useFactory:()=>{let r=k(AU);return()=>{r.initialize()}}},e===!0?{provide:o_,useValue:!0}:[],{provide:s_,useValue:t??zx},{provide:mn,useFactory:()=>{let r=k(xe),i=k(mt),o;return s=>{r.runOutsideAngular(()=>{i.destroyed&&!o?setTimeout(()=>{throw s}):(o??=i.get(vr),o.handleError(s))})}}}]}function By(n){let e=n?.ignoreChangesOutsideZone,t=n?.scheduleInRootZone,r=jy({ngZoneFactory:()=>{let i=$y(n);return i.scheduleInRootZone=t,i.shouldCoalesceEventChangeDetection&&As("NgZone_CoalesceEvent"),new xe(i)},ignoreChangesOutsideZone:e,scheduleInRootZone:t});return nn([{provide:iM,useValue:!0},{provide:eu,useValue:!1},r])}function $y(n){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:n?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:n?.runCoalescing??!1}}var AU=(()=>{class n{subscription=new dt;initialized=!1;zone=k(xe);pendingTasks=k(Wr);initialize(){if(this.initialized)return;this.initialized=!0;let t=null;!this.zone.isStable&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(t=this.pendingTasks.add()),this.zone.runOutsideAngular(()=>{this.subscription.add(this.zone.onStable.subscribe(()=>{xe.assertNotInAngularZone(),queueMicrotask(()=>{t!==null&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(this.pendingTasks.remove(t),t=null)})}))}),this.subscription.add(this.zone.onUnstable.subscribe(()=>{xe.assertInAngularZone(),t??=this.pendingTasks.add()}))}ngOnDestroy(){this.subscription.unsubscribe()}static \u0275fac=function(r){return new(r||n)};static \u0275prov=Q({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var oM=(()=>{class n{applicationErrorHandler=k(mn);appRef=k(ki);taskService=k(Wr);ngZone=k(xe);zonelessEnabled=k(eu);tracing=k(ks,{optional:!0});disableScheduling=k(o_,{optional:!0})??!1;zoneIsDefined=typeof Zone<"u"&&!!Zone.root.run;schedulerTickApplyArgs=[{data:{__scheduler_tick__:!0}}];subscriptions=new dt;angularZoneId=this.zoneIsDefined?this.ngZone._inner?.get(Lh):null;scheduleInRootZone=!this.zonelessEnabled&&this.zoneIsDefined&&(k(s_,{optional:!0})??!1);cancelScheduledCallback=null;useMicrotaskScheduler=!1;runningTick=!1;pendingRenderTaskId=null;constructor(){this.subscriptions.add(this.appRef.afterTick.subscribe(()=>{this.runningTick||this.cleanup()})),this.subscriptions.add(this.ngZone.onUnstable.subscribe(()=>{this.runningTick||this.cleanup()})),this.disableScheduling||=!this.zonelessEnabled&&(this.ngZone instanceof Vh||!this.zoneIsDefined)}notify(t){if(!this.zonelessEnabled&&t===5)return;let r=!1;switch(t){case 0:{this.appRef.dirtyFlags|=2;break}case 3:case 2:case 4:case 5:case 1:{this.appRef.dirtyFlags|=4;break}case 6:{this.appRef.dirtyFlags|=2,r=!0;break}case 12:{this.appRef.dirtyFlags|=16,r=!0;break}case 13:{this.appRef.dirtyFlags|=2,r=!0;break}case 11:{r=!0;break}case 9:case 8:case 7:case 10:default:this.appRef.dirtyFlags|=8}if(this.appRef.tracingSnapshot=this.tracing?.snapshot(this.appRef.tracingSnapshot)??null,!this.shouldScheduleTick(r))return;let i=this.useMicrotaskScheduler?pD:qx;this.pendingRenderTaskId=this.taskService.add(),this.scheduleInRootZone?this.cancelScheduledCallback=Zone.root.run(()=>i(()=>this.tick())):this.cancelScheduledCallback=this.ngZone.runOutsideAngular(()=>i(()=>this.tick()))}shouldScheduleTick(t){return!(this.disableScheduling&&!t||this.appRef.destroyed||this.pendingRenderTaskId!==null||this.runningTick||this.appRef._runningTick||!this.zonelessEnabled&&this.zoneIsDefined&&Zone.current.get(Lh+this.angularZoneId))}tick(){if(this.runningTick||this.appRef.destroyed)return;if(this.appRef.dirtyFlags===0){this.cleanup();return}!this.zonelessEnabled&&this.appRef.dirtyFlags&7&&(this.appRef.dirtyFlags|=1);let t=this.taskService.add();try{this.ngZone.run(()=>{this.runningTick=!0,this.appRef._tick()},void 0,this.schedulerTickApplyArgs)}catch(r){this.taskService.remove(t),this.applicationErrorHandler(r)}finally{this.cleanup()}this.useMicrotaskScheduler=!0,pD(()=>{this.useMicrotaskScheduler=!1,this.taskService.remove(t)})}ngOnDestroy(){this.subscriptions.unsubscribe(),this.cleanup()}cleanup(){if(this.runningTick=!1,this.cancelScheduledCallback?.(),this.cancelScheduledCallback=null,this.pendingRenderTaskId!==null){let t=this.pendingRenderTaskId;this.pendingRenderTaskId=null,this.taskService.remove(t)}}static \u0275fac=function(r){return new(r||n)};static \u0275prov=Q({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function kU(){return typeof $localize<"u"&&$localize.locale||hu}var pu=new J("",{providedIn:"root",factory:()=>k(pu,{optional:!0,skipSelf:!0})||kU()});function Ft(n){return YS(n)}function oc(n,e){return yf(n,e?.equal)}var sM=class{[en];constructor(e){this[en]=e}destroy(){this[en].destroy()}};var dM=Symbol("InputSignalNode#UNSET"),zU=re(H({},bf),{transformFn:void 0,applyValueToInputSignal(n,e){Da(n,e)}});function fM(n,e){let t=Object.create(zU);t.value=n,t.transformFn=e?.transform;function r(){if(Ia(t),t.value===dM){let i=null;throw new X(-950,i)}return t.value}return r[en]=t,r}var ap=class{attributeName;constructor(e){this.attributeName=e}__NG_ELEMENT_ID__=()=>cu(this.attributeName);toString(){return`HostAttributeToken ${this.attributeName}`}},qU=new J("");qU.__NG_ELEMENT_ID__=n=>{let e=Dt();if(e===null)throw new X(204,!1);if(e.type&2)return e.value;if(n&8)return null;throw new X(204,!1)};function aM(n,e){return fM(n,e)}function WU(n){return fM(dM,n)}var hM=(aM.required=WU,aM);var Rs=class{full;major;minor;patch;constructor(e){this.full=e;let t=e.split(".");this.major=t[0],this.minor=t[1],this.patch=t.slice(2).join(".")}},pM=new Rs("20.2.1");var Hy=new J(""),GU=new J("");function gu(n){return!n.moduleRef}function KU(n){let e=gu(n)?n.r3Injector:n.moduleRef.injector,t=e.get(xe);return t.run(()=>{gu(n)?n.r3Injector.resolveInjectorInitializers():n.moduleRef.resolveInjectorInitializers();let r=e.get(mn),i;if(t.runOutsideAngular(()=>{i=t.onError.subscribe({next:r})}),gu(n)){let o=()=>e.destroy(),s=n.platformInjector.get(Hy);s.add(o),e.onDestroy(()=>{i.unsubscribe(),s.delete(o)})}else{let o=()=>n.moduleRef.destroy(),s=n.platformInjector.get(Hy);s.add(o),n.moduleRef.onDestroy(()=>{ru(n.allPlatformModules,n.moduleRef),i.unsubscribe(),s.delete(o)})}return QU(r,t,()=>{let o=e.get(Wr),s=o.add(),a=e.get(Oy);return a.runInitializers(),a.donePromise.then(()=>{let c=e.get(pu,hu);if(Xx(c||hu),!e.get(GU,!0))return gu(n)?e.get(ki):(n.allPlatformModules.push(n.moduleRef),n.moduleRef);if(gu(n)){let f=e.get(ki);return n.rootComponent!==void 0&&f.bootstrap(n.rootComponent),f}else return YU?.(n.moduleRef,n.allPlatformModules),n.moduleRef}).finally(()=>void o.remove(s))})})}var YU;function QU(n,e,t){try{let r=t();return Eo(r)?r.catch(i=>{throw e.runOutsideAngular(()=>n(i)),i}):r}catch(r){throw e.runOutsideAngular(()=>n(r)),r}}var sp=null;function ZU(n=[],e){return Qe.create({name:e,providers:[{provide:zl,useValue:"platform"},{provide:Hy,useValue:new Set([()=>sp=null])},...n]})}function XU(n=[]){if(sp)return sp;let e=ZU(n);return sp=e,Yx(),JU(e),e}function JU(n){let e=n.get(Hh,null);wt(n,()=>{e?.forEach(t=>t())})}function Ky(){return!1}var Oi=(()=>{class n{static __NG_ELEMENT_ID__=e5}return n})();function e5(n){return t5(Dt(),Te(),(n&16)===16)}function t5(n,e,t){if(mo(n)&&!t){let r=Xn(n.index,e);return new yo(r,r)}else if(n.type&175){let r=e[Qn];return new yo(r,e)}return null}var zy=class{constructor(){}supports(e){return Ey(e)}create(e){return new qy(e)}},n5=(n,e)=>e,qy=class{length=0;collection;_linkedRecords=null;_unlinkedRecords=null;_previousItHead=null;_itHead=null;_itTail=null;_additionsHead=null;_additionsTail=null;_movesHead=null;_movesTail=null;_removalsHead=null;_removalsTail=null;_identityChangesHead=null;_identityChangesTail=null;_trackByFn;constructor(e){this._trackByFn=e||n5}forEachItem(e){let t;for(t=this._itHead;t!==null;t=t._next)e(t)}forEachOperation(e){let t=this._itHead,r=this._removalsHead,i=0,o=null;for(;t||r;){let s=!r||t&&t.currentIndex<cM(r,i,o)?t:r,a=cM(s,i,o),c=s.currentIndex;if(s===r)i--,r=r._nextRemoved;else if(t=t._next,s.previousIndex==null)i++;else{o||(o=[]);let u=a-i,f=c-i;if(u!=f){for(let _=0;_<u;_++){let E=_<o.length?o[_]:o[_]=0,x=E+_;f<=x&&x<u&&(o[_]=E+1)}let m=s.previousIndex;o[m]=f-u}}a!==c&&e(s,a,c)}}forEachPreviousItem(e){let t;for(t=this._previousItHead;t!==null;t=t._nextPrevious)e(t)}forEachAddedItem(e){let t;for(t=this._additionsHead;t!==null;t=t._nextAdded)e(t)}forEachMovedItem(e){let t;for(t=this._movesHead;t!==null;t=t._nextMoved)e(t)}forEachRemovedItem(e){let t;for(t=this._removalsHead;t!==null;t=t._nextRemoved)e(t)}forEachIdentityChange(e){let t;for(t=this._identityChangesHead;t!==null;t=t._nextIdentityChange)e(t)}diff(e){if(e==null&&(e=[]),!Ey(e))throw new X(900,!1);return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let t=this._itHead,r=!1,i,o,s;if(Array.isArray(e)){this.length=e.length;for(let a=0;a<this.length;a++)o=e[a],s=this._trackByFn(a,o),t===null||!Object.is(t.trackById,s)?(t=this._mismatch(t,o,s,a),r=!0):(r&&(t=this._verifyReinsertion(t,o,s,a)),Object.is(t.item,o)||this._addIdentityChange(t,o)),t=t._next}else i=0,kx(e,a=>{s=this._trackByFn(i,a),t===null||!Object.is(t.trackById,s)?(t=this._mismatch(t,a,s,i),r=!0):(r&&(t=this._verifyReinsertion(t,a,s,i)),Object.is(t.item,a)||this._addIdentityChange(t,a)),t=t._next,i++}),this.length=i;return this._truncate(t),this.collection=e,this.isDirty}get isDirty(){return this._additionsHead!==null||this._movesHead!==null||this._removalsHead!==null||this._identityChangesHead!==null}_reset(){if(this.isDirty){let e;for(e=this._previousItHead=this._itHead;e!==null;e=e._next)e._nextPrevious=e._next;for(e=this._additionsHead;e!==null;e=e._nextAdded)e.previousIndex=e.currentIndex;for(this._additionsHead=this._additionsTail=null,e=this._movesHead;e!==null;e=e._nextMoved)e.previousIndex=e.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(e,t,r,i){let o;return e===null?o=this._itTail:(o=e._prev,this._remove(e)),e=this._unlinkedRecords===null?null:this._unlinkedRecords.get(r,null),e!==null?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._reinsertAfter(e,o,i)):(e=this._linkedRecords===null?null:this._linkedRecords.get(r,i),e!==null?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._moveAfter(e,o,i)):e=this._addAfter(new Wy(t,r),o,i)),e}_verifyReinsertion(e,t,r,i){let o=this._unlinkedRecords===null?null:this._unlinkedRecords.get(r,null);return o!==null?e=this._reinsertAfter(o,e._prev,i):e.currentIndex!=i&&(e.currentIndex=i,this._addToMoves(e,i)),e}_truncate(e){for(;e!==null;){let t=e._next;this._addToRemovals(this._unlink(e)),e=t}this._unlinkedRecords!==null&&this._unlinkedRecords.clear(),this._additionsTail!==null&&(this._additionsTail._nextAdded=null),this._movesTail!==null&&(this._movesTail._nextMoved=null),this._itTail!==null&&(this._itTail._next=null),this._removalsTail!==null&&(this._removalsTail._nextRemoved=null),this._identityChangesTail!==null&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(e,t,r){this._unlinkedRecords!==null&&this._unlinkedRecords.remove(e);let i=e._prevRemoved,o=e._nextRemoved;return i===null?this._removalsHead=o:i._nextRemoved=o,o===null?this._removalsTail=i:o._prevRemoved=i,this._insertAfter(e,t,r),this._addToMoves(e,r),e}_moveAfter(e,t,r){return this._unlink(e),this._insertAfter(e,t,r),this._addToMoves(e,r),e}_addAfter(e,t,r){return this._insertAfter(e,t,r),this._additionsTail===null?this._additionsTail=this._additionsHead=e:this._additionsTail=this._additionsTail._nextAdded=e,e}_insertAfter(e,t,r){let i=t===null?this._itHead:t._next;return e._next=i,e._prev=t,i===null?this._itTail=e:i._prev=e,t===null?this._itHead=e:t._next=e,this._linkedRecords===null&&(this._linkedRecords=new cp),this._linkedRecords.put(e),e.currentIndex=r,e}_remove(e){return this._addToRemovals(this._unlink(e))}_unlink(e){this._linkedRecords!==null&&this._linkedRecords.remove(e);let t=e._prev,r=e._next;return t===null?this._itHead=r:t._next=r,r===null?this._itTail=t:r._prev=t,e}_addToMoves(e,t){return e.previousIndex===t||(this._movesTail===null?this._movesTail=this._movesHead=e:this._movesTail=this._movesTail._nextMoved=e),e}_addToRemovals(e){return this._unlinkedRecords===null&&(this._unlinkedRecords=new cp),this._unlinkedRecords.put(e),e.currentIndex=null,e._nextRemoved=null,this._removalsTail===null?(this._removalsTail=this._removalsHead=e,e._prevRemoved=null):(e._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=e),e}_addIdentityChange(e,t){return e.item=t,this._identityChangesTail===null?this._identityChangesTail=this._identityChangesHead=e:this._identityChangesTail=this._identityChangesTail._nextIdentityChange=e,e}},Wy=class{item;trackById;currentIndex=null;previousIndex=null;_nextPrevious=null;_prev=null;_next=null;_prevDup=null;_nextDup=null;_prevRemoved=null;_nextRemoved=null;_nextAdded=null;_nextMoved=null;_nextIdentityChange=null;constructor(e,t){this.item=e,this.trackById=t}},Gy=class{_head=null;_tail=null;add(e){this._head===null?(this._head=this._tail=e,e._nextDup=null,e._prevDup=null):(this._tail._nextDup=e,e._prevDup=this._tail,e._nextDup=null,this._tail=e)}get(e,t){let r;for(r=this._head;r!==null;r=r._nextDup)if((t===null||t<=r.currentIndex)&&Object.is(r.trackById,e))return r;return null}remove(e){let t=e._prevDup,r=e._nextDup;return t===null?this._head=r:t._nextDup=r,r===null?this._tail=t:r._prevDup=t,this._head===null}},cp=class{map=new Map;put(e){let t=e.trackById,r=this.map.get(t);r||(r=new Gy,this.map.set(t,r)),r.add(e)}get(e,t){let r=e,i=this.map.get(r);return i?i.get(e,t):null}remove(e){let t=e.trackById;return this.map.get(t).remove(e)&&this.map.delete(t),e}get isEmpty(){return this.map.size===0}clear(){this.map.clear()}};function cM(n,e,t){let r=n.previousIndex;if(r===null)return r;let i=0;return t&&r<t.length&&(i=t[r]),r+e+i}function lM(){return new Yy([new zy])}var Yy=(()=>{class n{factories;static \u0275prov=Q({token:n,providedIn:"root",factory:lM});constructor(t){this.factories=t}static create(t,r){if(r!=null){let i=r.factories.slice();t=t.concat(i)}return new n(t)}static extend(t){return{provide:n,useFactory:r=>n.create(t,r||lM()),deps:[[n,new CD,new zt]]}}find(t){let r=this.factories.find(i=>i.supports(t));if(r!=null)return r;throw new X(901,!1)}}return n})();function gM(n){He(8);try{let{rootComponent:e,appProviders:t,platformProviders:r}=n,i=XU(r),o=[jy({}),{provide:Ti,useExisting:oM},UT,...t||[]],s=new su({providers:o,parent:i,debugName:"",runEnvironmentInitializers:!1});return KU({r3Injector:s.injector,platformInjector:i,rootComponent:e})}catch(e){return Promise.reject(e)}finally{He(9)}}function Io(n){return typeof n=="boolean"?n:n!=null&&n!=="false"}function mM(n){let e=xi(n);if(!e)return null;let t=new Ds(e);return{get selector(){return t.selector},get type(){return t.componentType},get inputs(){return t.inputs},get outputs(){return t.outputs},get ngContentSelectors(){return t.ngContentSelectors},get isStandalone(){return e.standalone},get isSignal(){return e.signals}}}var yM=null;function nr(){return yM}function Qy(n){yM??=n}var mu=class{},vu=(()=>{class n{historyGo(t){throw new Error("")}static \u0275fac=function(r){return new(r||n)};static \u0275prov=Q({token:n,factory:()=>k(bM),providedIn:"platform"})}return n})(),Zy=new J(""),bM=(()=>{class n extends vu{_location;_history;_doc=k(vt);constructor(){super(),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return nr().getBaseHref(this._doc)}onPopState(t){let r=nr().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",t,!1),()=>r.removeEventListener("popstate",t)}onHashChange(t){let r=nr().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",t,!1),()=>r.removeEventListener("hashchange",t)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(t){this._location.pathname=t}pushState(t,r,i){this._history.pushState(t,r,i)}replaceState(t,r,i){this._history.replaceState(t,r,i)}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}static \u0275fac=function(r){return new(r||n)};static \u0275prov=Q({token:n,factory:()=>new n,providedIn:"platform"})}return n})();function lp(n,e){return n?e?n.endsWith("/")?e.startsWith("/")?n+e.slice(1):n+e:e.startsWith("/")?n+e:`${n}/${e}`:n:e}function vM(n){let e=n.search(/#|\?|$/);return n[e-1]==="/"?n.slice(0,e-1)+n.slice(e):n}function Pr(n){return n&&n[0]!=="?"?`?${n}`:n}var Ar=(()=>{class n{historyGo(t){throw new Error("")}static \u0275fac=function(r){return new(r||n)};static \u0275prov=Q({token:n,factory:()=>k(dp),providedIn:"root"})}return n})(),up=new J(""),dp=(()=>{class n extends Ar{_platformLocation;_baseHref;_removeListenerFns=[];constructor(t,r){super(),this._platformLocation=t,this._baseHref=r??this._platformLocation.getBaseHrefFromDOM()??k(vt).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return lp(this._baseHref,t)}path(t=!1){let r=this._platformLocation.pathname+Pr(this._platformLocation.search),i=this._platformLocation.hash;return i&&t?`${r}${i}`:r}pushState(t,r,i,o){let s=this.prepareExternalUrl(i+Pr(o));this._platformLocation.pushState(t,r,s)}replaceState(t,r,i,o){let s=this.prepareExternalUrl(i+Pr(o));this._platformLocation.replaceState(t,r,s)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}static \u0275fac=function(r){return new(r||n)(ie(vu),ie(up,8))};static \u0275prov=Q({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),So=(()=>{class n{_subject=new Ke;_basePath;_locationStrategy;_urlChangeListeners=[];_urlChangeSubscription=null;constructor(t){this._locationStrategy=t;let r=this._locationStrategy.getBaseHref();this._basePath=o5(vM(_M(r))),this._locationStrategy.onPopState(i=>{this._subject.next({url:this.path(!0),pop:!0,state:i.state,type:i.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(t=!1){return this.normalize(this._locationStrategy.path(t))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(t,r=""){return this.path()==this.normalize(t+Pr(r))}normalize(t){return n.stripTrailingSlash(i5(this._basePath,_M(t)))}prepareExternalUrl(t){return t&&t[0]!=="/"&&(t="/"+t),this._locationStrategy.prepareExternalUrl(t)}go(t,r="",i=null){this._locationStrategy.pushState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+Pr(r)),i)}replaceState(t,r="",i=null){this._locationStrategy.replaceState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+Pr(r)),i)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(t=0){this._locationStrategy.historyGo?.(t)}onUrlChange(t){return this._urlChangeListeners.push(t),this._urlChangeSubscription??=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)}),()=>{let r=this._urlChangeListeners.indexOf(t);this._urlChangeListeners.splice(r,1),this._urlChangeListeners.length===0&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(t="",r){this._urlChangeListeners.forEach(i=>i(t,r))}subscribe(t,r,i){return this._subject.subscribe({next:t,error:r??void 0,complete:i??void 0})}static normalizeQueryParams=Pr;static joinWithSlash=lp;static stripTrailingSlash=vM;static \u0275fac=function(r){return new(r||n)(ie(Ar))};static \u0275prov=Q({token:n,factory:()=>r5(),providedIn:"root"})}return n})();function r5(){return new So(ie(Ar))}function i5(n,e){if(!n||!e.startsWith(n))return e;let t=e.substring(n.length);return t===""||["/",";","?","#"].includes(t[0])?t:e}function _M(n){return n.replace(/\/index.html$/,"")}function o5(n){if(new RegExp("^(https?:)?//").test(n)){let[,t]=n.split(/\/\/[^\/]+/);return t}return n}var tb=(()=>{class n extends Ar{_platformLocation;_baseHref="";_removeListenerFns=[];constructor(t,r){super(),this._platformLocation=t,r!=null&&(this._baseHref=r)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}path(t=!1){let r=this._platformLocation.hash??"#";return r.length>0?r.substring(1):r}prepareExternalUrl(t){let r=lp(this._baseHref,t);return r.length>0?"#"+r:r}pushState(t,r,i,o){let s=this.prepareExternalUrl(i+Pr(o))||this._platformLocation.pathname;this._platformLocation.pushState(t,r,s)}replaceState(t,r,i,o){let s=this.prepareExternalUrl(i+Pr(o))||this._platformLocation.pathname;this._platformLocation.replaceState(t,r,s)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}static \u0275fac=function(r){return new(r||n)(ie(vu),ie(up,8))};static \u0275prov=Q({token:n,factory:n.\u0275fac})}return n})();var nb=(function(n){return n[n.Decimal=0]="Decimal",n[n.Percent=1]="Percent",n[n.Currency=2]="Currency",n[n.Scientific=3]="Scientific",n})(nb||{});var ei={Decimal:0,Group:1,List:2,PercentSign:3,PlusSign:4,MinusSign:5,Exponential:6,SuperscriptingExponent:7,PerMille:8,Infinity:9,NaN:10,TimeSeparator:11,CurrencyDecimal:12,CurrencyGroup:13};function sc(n,e){let t=op(n),r=t[Os.NumberSymbols][e];if(typeof r>"u"){if(e===ei.CurrencyDecimal)return t[Os.NumberSymbols][ei.Decimal];if(e===ei.CurrencyGroup)return t[Os.NumberSymbols][ei.Group]}return r}function SM(n,e){return op(n)[Os.NumberFormats][e]}var s5=/^(\d+)?\.((\d+)(-(\d+))?)?$/,wM=22,fp=".",_u="0",a5=";",c5=",",Xy="#";function l5(n,e,t,r,i,o,s=!1){let a="",c=!1;if(!isFinite(n))a=sc(t,ei.Infinity);else{let u=f5(n);s&&(u=d5(u));let f=e.minInt,m=e.minFrac,_=e.maxFrac;if(o){let oe=o.match(s5);if(oe===null)throw new X(2306,!1);let fe=oe[1],Fe=oe[3],At=oe[5];fe!=null&&(f=Jy(fe)),Fe!=null&&(m=Jy(Fe)),At!=null?_=Jy(At):Fe!=null&&m>_&&(_=m)}h5(u,m,_);let E=u.digits,x=u.integerLen,V=u.exponent,U=[];for(c=E.every(oe=>!oe);x<f;x++)E.unshift(0);for(;x<0;x++)E.unshift(0);x>0?U=E.splice(x,E.length):(U=E,E=[0]);let W=[];for(E.length>=e.lgSize&&W.unshift(E.splice(-e.lgSize,E.length).join(""));E.length>e.gSize;)W.unshift(E.splice(-e.gSize,E.length).join(""));E.length&&W.unshift(E.join("")),a=W.join(sc(t,r)),U.length&&(a+=sc(t,i)+U.join("")),V&&(a+=sc(t,ei.Exponential)+"+"+V)}return n<0&&!c?a=e.negPre+a+e.negSuf:a=e.posPre+a+e.posSuf,a}function TM(n,e,t){let r=SM(e,nb.Decimal),i=u5(r,sc(e,ei.MinusSign));return l5(n,i,e,ei.Group,ei.Decimal,t)}function u5(n,e="-"){let t={minInt:1,minFrac:0,maxFrac:0,posPre:"",posSuf:"",negPre:"",negSuf:"",gSize:0,lgSize:0},r=n.split(a5),i=r[0],o=r[1],s=i.indexOf(fp)!==-1?i.split(fp):[i.substring(0,i.lastIndexOf(_u)+1),i.substring(i.lastIndexOf(_u)+1)],a=s[0],c=s[1]||"";t.posPre=a.substring(0,a.indexOf(Xy));for(let f=0;f<c.length;f++){let m=c.charAt(f);m===_u?t.minFrac=t.maxFrac=f+1:m===Xy?t.maxFrac=f+1:t.posSuf+=m}let u=a.split(c5);if(t.gSize=u[1]?u[1].length:0,t.lgSize=u[2]||u[1]?(u[2]||u[1]).length:0,o){let f=i.length-t.posPre.length-t.posSuf.length,m=o.indexOf(Xy);t.negPre=o.substring(0,m).replace(/'/g,""),t.negSuf=o.slice(m+f).replace(/'/g,"")}else t.negPre=e+t.posPre,t.negSuf=t.posSuf;return t}function d5(n){if(n.digits[0]===0)return n;let e=n.digits.length-n.integerLen;return n.exponent?n.exponent+=2:(e===0?n.digits.push(0,0):e===1&&n.digits.push(0),n.integerLen+=2),n}function f5(n){let e=Math.abs(n)+"",t=0,r,i,o,s,a;for((i=e.indexOf(fp))>-1&&(e=e.replace(fp,"")),(o=e.search(/e/i))>0?(i<0&&(i=o),i+=+e.slice(o+1),e=e.substring(0,o)):i<0&&(i=e.length),o=0;e.charAt(o)===_u;o++);if(o===(a=e.length))r=[0],i=1;else{for(a--;e.charAt(a)===_u;)a--;for(i-=o,r=[],s=0;o<=a;o++,s++)r[s]=Number(e.charAt(o))}return i>wM&&(r=r.splice(0,wM-1),t=i-1,i=1),{digits:r,exponent:t,integerLen:i}}function h5(n,e,t){if(e>t)throw new X(2307,!1);let r=n.digits,i=r.length-n.integerLen,o=Math.min(Math.max(e,i),t),s=o+n.integerLen,a=r[s];if(s>0){r.splice(Math.max(n.integerLen,s));for(let m=s;m<r.length;m++)r[m]=0}else{i=Math.max(0,i),n.integerLen=1,r.length=Math.max(1,s=o+1),r[0]=0;for(let m=1;m<s;m++)r[m]=0}if(a>=5)if(s-1<0){for(let m=0;m>s;m--)r.unshift(0),n.integerLen++;r.unshift(1),n.integerLen++}else r[s-1]++;for(;i<Math.max(0,o);i++)r.push(0);let c=o!==0,u=e+n.integerLen,f=r.reduceRight(function(m,_,E,x){return _=_+m,x[E]=_<10?_:_-10,c&&(x[E]===0&&E>=u?x.pop():c=!1),_>=10?1:0},0);f&&(r.unshift(f),n.integerLen++)}function Jy(n){let e=parseInt(n);if(isNaN(e))throw new X(2305,!1);return e}var eb=/\s+/,EM=[],Ns=(()=>{class n{_ngEl;_renderer;initialClasses=EM;rawClass;stateMap=new Map;constructor(t,r){this._ngEl=t,this._renderer=r}set klass(t){this.initialClasses=t!=null?t.trim().split(eb):EM}set ngClass(t){this.rawClass=typeof t=="string"?t.trim().split(eb):t}ngDoCheck(){for(let r of this.initialClasses)this._updateState(r,!0);let t=this.rawClass;if(Array.isArray(t)||t instanceof Set)for(let r of t)this._updateState(r,!0);else if(t!=null)for(let r of Object.keys(t))this._updateState(r,!!t[r]);this._applyStateDiff()}_updateState(t,r){let i=this.stateMap.get(t);i!==void 0?(i.enabled!==r&&(i.changed=!0,i.enabled=r),i.touched=!0):this.stateMap.set(t,{enabled:r,changed:!0,touched:!0})}_applyStateDiff(){for(let t of this.stateMap){let r=t[0],i=t[1];i.changed?(this._toggleClass(r,i.enabled),i.changed=!1):i.touched||(i.enabled&&this._toggleClass(r,!1),this.stateMap.delete(r)),i.touched=!1}}_toggleClass(t,r){t=t.trim(),t.length>0&&t.split(eb).forEach(i=>{r?this._renderer.addClass(this._ngEl.nativeElement,i):this._renderer.removeClass(this._ngEl.nativeElement,i)})}static \u0275fac=function(r){return new(r||n)(ne(on),ne(er))};static \u0275dir=Ze({type:n,selectors:[["","ngClass",""]],inputs:{klass:[0,"class","klass"],ngClass:"ngClass"}})}return n})();var hp=class{$implicit;ngForOf;index;count;constructor(e,t,r,i){this.$implicit=e,this.ngForOf=t,this.index=r,this.count=i}get first(){return this.index===0}get last(){return this.index===this.count-1}get even(){return this.index%2===0}get odd(){return!this.even}},Pn=(()=>{class n{_viewContainer;_template;_differs;set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}_ngForOf=null;_ngForOfDirty=!0;_differ=null;_trackByFn;constructor(t,r,i){this._viewContainer=t,this._template=r,this._differs=i}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;let t=this._ngForOf;!this._differ&&t&&(this._differ=this._differs.find(t).create(this.ngForTrackBy))}if(this._differ){let t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){let r=this._viewContainer;t.forEachOperation((i,o,s)=>{if(i.previousIndex==null)r.createEmbeddedView(this._template,new hp(i.item,this._ngForOf,-1,-1),s===null?void 0:s);else if(s==null)r.remove(o===null?void 0:o);else if(o!==null){let a=r.get(o);r.move(a,s),CM(a,i)}});for(let i=0,o=r.length;i<o;i++){let a=r.get(i).context;a.index=i,a.count=o,a.ngForOf=this._ngForOf}t.forEachIdentityChange(i=>{let o=r.get(i.currentIndex);CM(o,i)})}static ngTemplateContextGuard(t,r){return!0}static \u0275fac=function(r){return new(r||n)(ne(Ai),ne(bo),ne(Yy))};static \u0275dir=Ze({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"}})}return n})();function CM(n,e){n.context.$implicit=e.item}var Wt=(()=>{class n{_viewContainer;_context=new pp;_thenTemplateRef=null;_elseTemplateRef=null;_thenViewRef=null;_elseViewRef=null;constructor(t,r){this._viewContainer=t,this._thenTemplateRef=r}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){IM(t,!1),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){IM(t,!1),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngIfUseIfTypeGuard;static ngTemplateGuard_ngIf;static ngTemplateContextGuard(t,r){return!0}static \u0275fac=function(r){return new(r||n)(ne(Ai),ne(bo))};static \u0275dir=Ze({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"}})}return n})(),pp=class{$implicit=null;ngIf=null};function IM(n,e){if(n&&!n.createEmbeddedView)throw new X(2020,!1)}function p5(n,e){return new X(2100,!1)}var rb=(()=>{class n{_locale;constructor(t){this._locale=t}transform(t,r,i){if(!g5(t))return null;i||=this._locale;try{let o=m5(t);return TM(o,i,r)}catch(o){throw p5(n,o.message)}}static \u0275fac=function(r){return new(r||n)(ne(pu,16))};static \u0275pipe=Sy({name:"number",type:n,pure:!0})}return n})();function g5(n){return!(n==null||n===""||n!==n)}function m5(n){if(typeof n=="string"&&!isNaN(Number(n)-parseFloat(n)))return Number(n);if(typeof n!="number")throw new X(2309,!1);return n}var Lt=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275mod=Tr({type:n});static \u0275inj=Gn({})}return n})();function ib(n,e){e=encodeURIComponent(e);for(let t of n.split(";")){let r=t.indexOf("="),[i,o]=r==-1?[t,""]:[t.slice(0,r),t.slice(r+1)];if(i.trim()===e)return decodeURIComponent(o)}return null}var yu=class{};var sb="browser";function ab(n){return n===sb}var DM=(()=>{class n{static \u0275prov=Q({token:n,providedIn:"root",factory:()=>new ob(k(vt),window)})}return n})(),ob=class{document;window;offset=()=>[0,0];constructor(e,t){this.document=e,this.window=t}setOffset(e){Array.isArray(e)?this.offset=()=>e:this.offset=e}getScrollPosition(){return[this.window.scrollX,this.window.scrollY]}scrollToPosition(e,t){this.window.scrollTo(re(H({},t),{left:e[0],top:e[1]}))}scrollToAnchor(e,t){let r=v5(this.document,e);r&&(this.scrollToElement(r,t),r.focus())}setHistoryScrollRestoration(e){try{this.window.history.scrollRestoration=e}catch{console.warn(ps(2400,!1))}}scrollToElement(e,t){let r=e.getBoundingClientRect(),i=r.left+this.window.pageXOffset,o=r.top+this.window.pageYOffset,s=this.offset();this.window.scrollTo(re(H({},t),{left:i-s[0],top:o-s[1]}))}};function v5(n,e){let t=n.getElementById(e)||n.getElementsByName(e)[0];if(t)return t;if(typeof n.createTreeWalker=="function"&&n.body&&typeof n.body.attachShadow=="function"){let r=n.createTreeWalker(n.body,NodeFilter.SHOW_ELEMENT),i=r.currentNode;for(;i;){let o=i.shadowRoot;if(o){let s=o.getElementById(e)||o.querySelector(`[name="${e}"]`);if(s)return s}i=r.nextNode()}}return null}var mp=new J(""),fb=(()=>{class n{_zone;_plugins;_eventNameToPlugin=new Map;constructor(t,r){this._zone=r,t.forEach(i=>{i.manager=this}),this._plugins=t.slice().reverse()}addEventListener(t,r,i,o){return this._findPluginFor(r).addEventListener(t,r,i,o)}getZone(){return this._zone}_findPluginFor(t){let r=this._eventNameToPlugin.get(t);if(r)return r;if(r=this._plugins.find(o=>o.supports(t)),!r)throw new X(5101,!1);return this._eventNameToPlugin.set(t,r),r}static \u0275fac=function(r){return new(r||n)(ie(mp),ie(xe))};static \u0275prov=Q({token:n,factory:n.\u0275fac})}return n})(),bu=class{_doc;constructor(e){this._doc=e}manager},cb="ng-app-id";function xM(n){for(let e of n)e.remove()}function MM(n,e){let t=e.createElement("style");return t.textContent=n,t}function _5(n,e,t,r){let i=n.head?.querySelectorAll(`style[${cb}="${e}"],link[${cb}="${e}"]`);if(i)for(let o of i)o.removeAttribute(cb),o instanceof HTMLLinkElement?r.set(o.href.slice(o.href.lastIndexOf("/")+1),{usage:0,elements:[o]}):o.textContent&&t.set(o.textContent,{usage:0,elements:[o]})}function ub(n,e){let t=e.createElement("link");return t.setAttribute("rel","stylesheet"),t.setAttribute("href",n),t}var hb=(()=>{class n{doc;appId;nonce;inline=new Map;external=new Map;hosts=new Set;constructor(t,r,i,o={}){this.doc=t,this.appId=r,this.nonce=i,_5(t,r,this.inline,this.external),this.hosts.add(t.head)}addStyles(t,r){for(let i of t)this.addUsage(i,this.inline,MM);r?.forEach(i=>this.addUsage(i,this.external,ub))}removeStyles(t,r){for(let i of t)this.removeUsage(i,this.inline);r?.forEach(i=>this.removeUsage(i,this.external))}addUsage(t,r,i){let o=r.get(t);o?o.usage++:r.set(t,{usage:1,elements:[...this.hosts].map(s=>this.addElement(s,i(t,this.doc)))})}removeUsage(t,r){let i=r.get(t);i&&(i.usage--,i.usage<=0&&(xM(i.elements),r.delete(t)))}ngOnDestroy(){for(let[,{elements:t}]of[...this.inline,...this.external])xM(t);this.hosts.clear()}addHost(t){this.hosts.add(t);for(let[r,{elements:i}]of this.inline)i.push(this.addElement(t,MM(r,this.doc)));for(let[r,{elements:i}]of this.external)i.push(this.addElement(t,ub(r,this.doc)))}removeHost(t){this.hosts.delete(t)}addElement(t,r){return this.nonce&&r.setAttribute("nonce",this.nonce),t.appendChild(r)}static \u0275fac=function(r){return new(r||n)(ie(vt),ie($h),ie(zh,8),ie(Sr))};static \u0275prov=Q({token:n,factory:n.\u0275fac})}return n})(),lb={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/Math/MathML"},pb=/%COMP%/g;var AM="%COMP%",y5=`_nghost-${AM}`,b5=`_ngcontent-${AM}`,w5=!0,E5=new J("",{providedIn:"root",factory:()=>w5});function C5(n){return b5.replace(pb,n)}function I5(n){return y5.replace(pb,n)}function kM(n,e){return e.map(t=>t.replace(pb,n))}var gb=(()=>{class n{eventManager;sharedStylesHost;appId;removeStylesOnCompDestroy;doc;platformId;ngZone;nonce;animationDisabled;maxAnimationTimeout;tracingService;rendererByCompId=new Map;defaultRenderer;platformIsServer;registry;constructor(t,r,i,o,s,a,c,u=null,f,m,_=null){this.eventManager=t,this.sharedStylesHost=r,this.appId=i,this.removeStylesOnCompDestroy=o,this.doc=s,this.platformId=a,this.ngZone=c,this.nonce=u,this.animationDisabled=f,this.maxAnimationTimeout=m,this.tracingService=_,this.platformIsServer=!1,this.defaultRenderer=new wu(t,s,c,this.platformIsServer,this.tracingService,this.registry=fh(),this.maxAnimationTimeout)}createRenderer(t,r){if(!t||!r)return this.defaultRenderer;let i=this.getOrCreateRenderer(t,r);return i instanceof gp?i.applyToHost(t):i instanceof Eu&&i.applyStyles(),i}getOrCreateRenderer(t,r){let i=this.rendererByCompId,o=i.get(r.id);if(!o){let s=this.doc,a=this.ngZone,c=this.eventManager,u=this.sharedStylesHost,f=this.removeStylesOnCompDestroy,m=this.platformIsServer,_=this.tracingService;switch(r.encapsulation){case Mi.Emulated:o=new gp(c,u,r,this.appId,f,s,a,m,_,this.registry,this.animationDisabled,this.maxAnimationTimeout);break;case Mi.ShadowDom:return new db(c,u,t,r,s,a,this.nonce,m,_,this.registry,this.maxAnimationTimeout);default:o=new Eu(c,u,r,f,s,a,m,_,this.registry,this.animationDisabled,this.maxAnimationTimeout);break}i.set(r.id,o)}return o}ngOnDestroy(){this.rendererByCompId.clear()}componentReplaced(t){this.rendererByCompId.delete(t)}static \u0275fac=function(r){return new(r||n)(ie(fb),ie(hb),ie($h),ie(E5),ie(vt),ie(Sr),ie(xe),ie(zh),ie(Ry),ie(Ny),ie(ks,8))};static \u0275prov=Q({token:n,factory:n.\u0275fac})}return n})(),wu=class{eventManager;doc;ngZone;platformIsServer;tracingService;registry;maxAnimationTimeout;data=Object.create(null);throwOnSyntheticProps=!0;constructor(e,t,r,i,o,s,a){this.eventManager=e,this.doc=t,this.ngZone=r,this.platformIsServer=i,this.tracingService=o,this.registry=s,this.maxAnimationTimeout=a}destroy(){}destroyNode=null;createElement(e,t){return t?this.doc.createElementNS(lb[t]||t,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,t){(PM(e)?e.content:e).appendChild(t)}insertBefore(e,t,r){e&&(PM(e)?e.content:e).insertBefore(t,r)}removeChild(e,t){let{elements:r}=this.registry;if(r){r.animate(t,()=>t.remove(),this.maxAnimationTimeout);return}t.remove()}selectRootElement(e,t){let r=typeof e=="string"?this.doc.querySelector(e):e;if(!r)throw new X(-5104,!1);return t||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,r,i){if(i){t=i+":"+t;let o=lb[i];o?e.setAttributeNS(o,t,r):e.setAttribute(t,r)}else e.setAttribute(t,r)}removeAttribute(e,t,r){if(r){let i=lb[r];i?e.removeAttributeNS(i,t):e.removeAttribute(`${r}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,r,i){i&(Kr.DashCase|Kr.Important)?e.style.setProperty(t,r,i&Kr.Important?"important":""):e.style[t]=r}removeStyle(e,t,r){r&Kr.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,r){e!=null&&(e[t]=r)}setValue(e,t){e.nodeValue=t}listen(e,t,r,i){if(typeof e=="string"&&(e=nr().getGlobalEventTarget(this.doc,e),!e))throw new X(5102,!1);let o=this.decoratePreventDefault(r);return this.tracingService?.wrapEventListener&&(o=this.tracingService.wrapEventListener(e,t,o)),this.eventManager.addEventListener(e,t,o,i)}decoratePreventDefault(e){return t=>{if(t==="__ngUnwrap__")return e;e(t)===!1&&t.preventDefault()}}};function PM(n){return n.tagName==="TEMPLATE"&&n.content!==void 0}var db=class extends wu{sharedStylesHost;hostEl;shadowRoot;constructor(e,t,r,i,o,s,a,c,u,f,m){super(e,o,s,c,u,f,m),this.sharedStylesHost=t,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);let _=i.styles;_=kM(i.id,_);for(let x of _){let V=document.createElement("style");a&&V.setAttribute("nonce",a),V.textContent=x,this.shadowRoot.appendChild(V)}let E=i.getExternalStyles?.();if(E)for(let x of E){let V=ub(x,o);a&&V.setAttribute("nonce",a),this.shadowRoot.appendChild(V)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,r){return super.insertBefore(this.nodeOrShadowRoot(e),t,r)}removeChild(e,t){return super.removeChild(null,t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}},Eu=class extends wu{sharedStylesHost;removeStylesOnCompDestroy;styles;styleUrls;_animationDisabled;constructor(e,t,r,i,o,s,a,c,u,f,m,_){super(e,o,s,a,c,u,m),this.sharedStylesHost=t,this.removeStylesOnCompDestroy=i,this._animationDisabled=f;let E=r.styles;this.styles=_?kM(_,E):E,this.styleUrls=r.getExternalStyles?.(_)}applyStyles(){this.sharedStylesHost.addStyles(this.styles,this.styleUrls)}destroy(){if(this.removeStylesOnCompDestroy){if(!this._animationDisabled&&this.registry.elements){this.ngZone.runOutsideAngular(()=>{setTimeout(()=>{this.sharedStylesHost.removeStyles(this.styles,this.styleUrls)},this.maxAnimationTimeout)});return}this.sharedStylesHost.removeStyles(this.styles,this.styleUrls)}}},gp=class extends Eu{contentAttr;hostAttr;constructor(e,t,r,i,o,s,a,c,u,f,m,_){let E=i+"-"+r.id;super(e,t,r,o,s,a,c,u,f,m,_,E),this.contentAttr=C5(E),this.hostAttr=I5(E)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,t){let r=super.createElement(e,t);return super.setAttribute(r,this.contentAttr,""),r}};var vp=class n extends mu{supportsDOMEvents=!0;static makeCurrent(){Qy(new n)}onAndCancel(e,t,r,i){return e.addEventListener(t,r,i),()=>{e.removeEventListener(t,r,i)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.remove()}createElement(e,t){return t=t||this.getDefaultDocument(),t.createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return t==="window"?window:t==="document"?e:t==="body"?e.body:null}getBaseHref(e){let t=S5();return t==null?null:T5(t)}resetBaseElement(){Cu=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return ib(document.cookie,e)}},Cu=null;function S5(){return Cu=Cu||document.head.querySelector("base"),Cu?Cu.getAttribute("href"):null}function T5(n){return new URL(n,document.baseURI).pathname}var D5=(()=>{class n{build(){return new XMLHttpRequest}static \u0275fac=function(r){return new(r||n)};static \u0275prov=Q({token:n,factory:n.\u0275fac})}return n})(),RM=(()=>{class n extends bu{constructor(t){super(t)}supports(t){return!0}addEventListener(t,r,i,o){return t.addEventListener(r,i,o),()=>this.removeEventListener(t,r,i,o)}removeEventListener(t,r,i,o){return t.removeEventListener(r,i,o)}static \u0275fac=function(r){return new(r||n)(ie(vt))};static \u0275prov=Q({token:n,factory:n.\u0275fac})}return n})(),OM=["alt","control","meta","shift"],x5={"\b":"Backspace","	":"Tab","\x7F":"Delete","\x1B":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},M5={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey},NM=(()=>{class n extends bu{constructor(t){super(t)}supports(t){return n.parseEventName(t)!=null}addEventListener(t,r,i,o){let s=n.parseEventName(r),a=n.eventCallback(s.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>nr().onAndCancel(t,s.domEventName,a,o))}static parseEventName(t){let r=t.toLowerCase().split("."),i=r.shift();if(r.length===0||!(i==="keydown"||i==="keyup"))return null;let o=n._normalizeKey(r.pop()),s="",a=r.indexOf("code");if(a>-1&&(r.splice(a,1),s="code."),OM.forEach(u=>{let f=r.indexOf(u);f>-1&&(r.splice(f,1),s+=u+".")}),s+=o,r.length!=0||o.length===0)return null;let c={};return c.domEventName=i,c.fullKey=s,c}static matchEventFullKeyCode(t,r){let i=x5[t.key]||t.key,o="";return r.indexOf("code.")>-1&&(i=t.code,o="code."),i==null||!i?!1:(i=i.toLowerCase(),i===" "?i="space":i==="."&&(i="dot"),OM.forEach(s=>{if(s!==i){let a=M5[s];a(t)&&(o+=s+".")}}),o+=i,o===r)}static eventCallback(t,r,i){return o=>{n.matchEventFullKeyCode(o,t)&&i.runGuarded(()=>r(o))}}static _normalizeKey(t){return t==="esc"?"escape":t}static \u0275fac=function(r){return new(r||n)(ie(vt))};static \u0275prov=Q({token:n,factory:n.\u0275fac})}return n})();function mb(n,e){let t=H({rootComponent:n},P5(e));return gM(t)}function P5(n){return{appProviders:[...N5,...n?.providers??[]],platformProviders:R5}}function A5(){vp.makeCurrent()}function k5(){return new vr}function O5(){return K_(document),document}var R5=[{provide:Sr,useValue:sb},{provide:Hh,useValue:A5,multi:!0},{provide:vt,useFactory:O5}];var N5=[{provide:zl,useValue:"root"},{provide:vr,useFactory:k5},{provide:mp,useClass:RM,multi:!0,deps:[vt]},{provide:mp,useClass:NM,multi:!0,deps:[vt]},gb,hb,fb,{provide:Ts,useExisting:gb},{provide:yu,useClass:D5},[]];var _p=(()=>{class n{_doc;constructor(t){this._doc=t}getTitle(){return this._doc.title}setTitle(t){this._doc.title=t||""}static \u0275fac=function(r){return new(r||n)(ie(vt))};static \u0275prov=Q({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var we="primary",Fu=Symbol("RouteTitle"),wb=class{params;constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){let t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){let t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}};function Vs(n){return new wb(n)}function zM(n,e,t){let r=t.path.split("/");if(r.length>n.length||t.pathMatch==="full"&&(e.hasChildren()||r.length<n.length))return null;let i={};for(let o=0;o<r.length;o++){let s=r[o],a=n[o];if(s[0]===":")i[s.substring(1)]=a;else if(s!==a.path)return null}return{consumed:n.slice(0,r.length),posParams:i}}function F5(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!ti(n[t],e[t]))return!1;return!0}function ti(n,e){let t=n?Eb(n):void 0,r=e?Eb(e):void 0;if(!t||!r||t.length!=r.length)return!1;let i;for(let o=0;o<t.length;o++)if(i=t[o],!qM(n[i],e[i]))return!1;return!0}function Eb(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}function qM(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;let t=[...n].sort(),r=[...e].sort();return t.every((i,o)=>r[o]===i)}else return n===e}function WM(n){return n.length>0?n[n.length-1]:null}function Ni(n){return qv(n)?n:Eo(n)?Ye(Promise.resolve(n)):se(n)}var L5={exact:KM,subset:YM},GM={exact:V5,subset:U5,ignored:()=>!0};function LM(n,e,t){return L5[t.paths](n.root,e.root,t.matrixParams)&&GM[t.queryParams](n.queryParams,e.queryParams)&&!(t.fragment==="exact"&&n.fragment!==e.fragment)}function V5(n,e){return ti(n,e)}function KM(n,e,t){if(!Fs(n.segments,e.segments)||!wp(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(let r in e.children)if(!n.children[r]||!KM(n.children[r],e.children[r],t))return!1;return!0}function U5(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>qM(n[t],e[t]))}function YM(n,e,t){return QM(n,e,e.segments,t)}function QM(n,e,t,r){if(n.segments.length>t.length){let i=n.segments.slice(0,t.length);return!(!Fs(i,t)||e.hasChildren()||!wp(i,t,r))}else if(n.segments.length===t.length){if(!Fs(n.segments,t)||!wp(n.segments,t,r))return!1;for(let i in e.children)if(!n.children[i]||!YM(n.children[i],e.children[i],r))return!1;return!0}else{let i=t.slice(0,n.segments.length),o=t.slice(n.segments.length);return!Fs(n.segments,i)||!wp(n.segments,i,r)||!n.children[we]?!1:QM(n.children[we],e,o,r)}}function wp(n,e,t){return e.every((r,i)=>GM[t](n[i].parameters,r.parameters))}var ri=class{root;queryParams;fragment;_queryParamMap;constructor(e=new Le([],{}),t={},r=null){this.root=e,this.queryParams=t,this.fragment=r}get queryParamMap(){return this._queryParamMap??=Vs(this.queryParams),this._queryParamMap}toString(){return $5.serialize(this)}},Le=class{segments;children;parent=null;constructor(e,t){this.segments=e,this.children=t,Object.values(t).forEach(r=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return Ep(this)}},To=class{path;parameters;_parameterMap;constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap??=Vs(this.parameters),this._parameterMap}toString(){return XM(this)}};function j5(n,e){return Fs(n,e)&&n.every((t,r)=>ti(t.parameters,e[r].parameters))}function Fs(n,e){return n.length!==e.length?!1:n.every((t,r)=>t.path===e[r].path)}function B5(n,e){let t=[];return Object.entries(n.children).forEach(([r,i])=>{r===we&&(t=t.concat(e(i,r)))}),Object.entries(n.children).forEach(([r,i])=>{r!==we&&(t=t.concat(e(i,r)))}),t}var Us=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275prov=Q({token:n,factory:()=>new Do,providedIn:"root"})}return n})(),Do=class{parse(e){let t=new Ib(e);return new ri(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){let t=`/${Iu(e.root,!0)}`,r=q5(e.queryParams),i=typeof e.fragment=="string"?`#${H5(e.fragment)}`:"";return`${t}${r}${i}`}},$5=new Do;function Ep(n){return n.segments.map(e=>XM(e)).join("/")}function Iu(n,e){if(!n.hasChildren())return Ep(n);if(e){let t=n.children[we]?Iu(n.children[we],!1):"",r=[];return Object.entries(n.children).forEach(([i,o])=>{i!==we&&r.push(`${i}:${Iu(o,!1)}`)}),r.length>0?`${t}(${r.join("//")})`:t}else{let t=B5(n,(r,i)=>i===we?[Iu(n.children[we],!1)]:[`${i}:${Iu(r,!1)}`]);return Object.keys(n.children).length===1&&n.children[we]!=null?`${Ep(n)}/${t[0]}`:`${Ep(n)}/(${t.join("//")})`}}function ZM(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function yp(n){return ZM(n).replace(/%3B/gi,";")}function H5(n){return encodeURI(n)}function Cb(n){return ZM(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function Cp(n){return decodeURIComponent(n)}function VM(n){return Cp(n.replace(/\+/g,"%20"))}function XM(n){return`${Cb(n.path)}${z5(n.parameters)}`}function z5(n){return Object.entries(n).map(([e,t])=>`;${Cb(e)}=${Cb(t)}`).join("")}function q5(n){let e=Object.entries(n).map(([t,r])=>Array.isArray(r)?r.map(i=>`${yp(t)}=${yp(i)}`).join("&"):`${yp(t)}=${yp(r)}`).filter(t=>t);return e.length?`?${e.join("&")}`:""}var W5=/^[^\/()?;#]+/;function vb(n){let e=n.match(W5);return e?e[0]:""}var G5=/^[^\/()?;=#]+/;function K5(n){let e=n.match(G5);return e?e[0]:""}var Y5=/^[^=?&#]+/;function Q5(n){let e=n.match(Y5);return e?e[0]:""}var Z5=/^[^&#]+/;function X5(n){let e=n.match(Z5);return e?e[0]:""}var Ib=class{url;remaining;constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),this.remaining===""||this.peekStartsWith("?")||this.peekStartsWith("#")?new Le([],{}):new Le([],this.parseChildren())}parseQueryParams(){let e={};if(this.consumeOptional("?"))do this.parseQueryParam(e);while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(this.remaining==="")return{};this.consumeOptional("/");let e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(r[we]=new Le(e,t)),r}parseSegment(){let e=vb(this.remaining);if(e===""&&this.peekStartsWith(";"))throw new X(4009,!1);return this.capture(e),new To(Cp(e),this.parseMatrixParams())}parseMatrixParams(){let e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){let t=K5(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){let i=vb(this.remaining);i&&(r=i,this.capture(r))}e[Cp(t)]=Cp(r)}parseQueryParam(e){let t=Q5(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){let s=X5(this.remaining);s&&(r=s,this.capture(r))}let i=VM(t),o=VM(r);if(e.hasOwnProperty(i)){let s=e[i];Array.isArray(s)||(s=[s],e[i]=s),s.push(o)}else e[i]=o}parseParens(e){let t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){let r=vb(this.remaining),i=this.remaining[r.length];if(i!=="/"&&i!==")"&&i!==";")throw new X(4010,!1);let o;r.indexOf(":")>-1?(o=r.slice(0,r.indexOf(":")),this.capture(o),this.capture(":")):e&&(o=we);let s=this.parseChildren();t[o]=Object.keys(s).length===1?s[we]:new Le([],s),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return this.peekStartsWith(e)?(this.remaining=this.remaining.substring(e.length),!0):!1}capture(e){if(!this.consumeOptional(e))throw new X(4011,!1)}};function JM(n){return n.segments.length>0?new Le([],{[we]:n}):n}function eP(n){let e={};for(let[r,i]of Object.entries(n.children)){let o=eP(i);if(r===we&&o.segments.length===0&&o.hasChildren())for(let[s,a]of Object.entries(o.children))e[s]=a;else(o.segments.length>0||o.hasChildren())&&(e[r]=o)}let t=new Le(n.segments,e);return J5(t)}function J5(n){if(n.numberOfChildren===1&&n.children[we]){let e=n.children[we];return new Le(n.segments.concat(e.segments),e.children)}return n}function xo(n){return n instanceof ri}function tP(n,e,t=null,r=null){let i=nP(n);return rP(i,e,t,r)}function nP(n){let e;function t(o){let s={};for(let c of o.children){let u=t(c);s[c.outlet]=u}let a=new Le(o.url,s);return o===n&&(e=a),a}let r=t(n.root),i=JM(r);return e??i}function rP(n,e,t,r){let i=n;for(;i.parent;)i=i.parent;if(e.length===0)return _b(i,i,i,t,r);let o=ej(e);if(o.toRoot())return _b(i,i,new Le([],{}),t,r);let s=tj(o,i,n),a=s.processChildren?Tu(s.segmentGroup,s.index,o.commands):oP(s.segmentGroup,s.index,o.commands);return _b(i,s.segmentGroup,a,t,r)}function Ip(n){return typeof n=="object"&&n!=null&&!n.outlets&&!n.segmentPath}function xu(n){return typeof n=="object"&&n!=null&&n.outlets}function _b(n,e,t,r,i){let o={};r&&Object.entries(r).forEach(([c,u])=>{o[c]=Array.isArray(u)?u.map(f=>`${f}`):`${u}`});let s;n===e?s=t:s=iP(n,e,t);let a=JM(eP(s));return new ri(a,o,i)}function iP(n,e,t){let r={};return Object.entries(n.children).forEach(([i,o])=>{o===e?r[i]=t:r[i]=iP(o,e,t)}),new Le(n.segments,r)}var Sp=class{isAbsolute;numberOfDoubleDots;commands;constructor(e,t,r){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=r,e&&r.length>0&&Ip(r[0]))throw new X(4003,!1);let i=r.find(xu);if(i&&i!==WM(r))throw new X(4004,!1)}toRoot(){return this.isAbsolute&&this.commands.length===1&&this.commands[0]=="/"}};function ej(n){if(typeof n[0]=="string"&&n.length===1&&n[0]==="/")return new Sp(!0,0,n);let e=0,t=!1,r=n.reduce((i,o,s)=>{if(typeof o=="object"&&o!=null){if(o.outlets){let a={};return Object.entries(o.outlets).forEach(([c,u])=>{a[c]=typeof u=="string"?u.split("/"):u}),[...i,{outlets:a}]}if(o.segmentPath)return[...i,o.segmentPath]}return typeof o!="string"?[...i,o]:s===0?(o.split("/").forEach((a,c)=>{c==0&&a==="."||(c==0&&a===""?t=!0:a===".."?e++:a!=""&&i.push(a))}),i):[...i,o]},[]);return new Sp(t,e,r)}var lc=class{segmentGroup;processChildren;index;constructor(e,t,r){this.segmentGroup=e,this.processChildren=t,this.index=r}};function tj(n,e,t){if(n.isAbsolute)return new lc(e,!0,0);if(!t)return new lc(e,!1,NaN);if(t.parent===null)return new lc(t,!0,0);let r=Ip(n.commands[0])?0:1,i=t.segments.length-1+r;return nj(t,i,n.numberOfDoubleDots)}function nj(n,e,t){let r=n,i=e,o=t;for(;o>i;){if(o-=i,r=r.parent,!r)throw new X(4005,!1);i=r.segments.length}return new lc(r,!1,i-o)}function rj(n){return xu(n[0])?n[0].outlets:{[we]:n}}function oP(n,e,t){if(n??=new Le([],{}),n.segments.length===0&&n.hasChildren())return Tu(n,e,t);let r=ij(n,e,t),i=t.slice(r.commandIndex);if(r.match&&r.pathIndex<n.segments.length){let o=new Le(n.segments.slice(0,r.pathIndex),{});return o.children[we]=new Le(n.segments.slice(r.pathIndex),n.children),Tu(o,0,i)}else return r.match&&i.length===0?new Le(n.segments,{}):r.match&&!n.hasChildren()?Sb(n,e,t):r.match?Tu(n,0,i):Sb(n,e,t)}function Tu(n,e,t){if(t.length===0)return new Le(n.segments,{});{let r=rj(t),i={};if(Object.keys(r).some(o=>o!==we)&&n.children[we]&&n.numberOfChildren===1&&n.children[we].segments.length===0){let o=Tu(n.children[we],e,t);return new Le(n.segments,o.children)}return Object.entries(r).forEach(([o,s])=>{typeof s=="string"&&(s=[s]),s!==null&&(i[o]=oP(n.children[o],e,s))}),Object.entries(n.children).forEach(([o,s])=>{r[o]===void 0&&(i[o]=s)}),new Le(n.segments,i)}}function ij(n,e,t){let r=0,i=e,o={match:!1,pathIndex:0,commandIndex:0};for(;i<n.segments.length;){if(r>=t.length)return o;let s=n.segments[i],a=t[r];if(xu(a))break;let c=`${a}`,u=r<t.length-1?t[r+1]:null;if(i>0&&c===void 0)break;if(c&&u&&typeof u=="object"&&u.outlets===void 0){if(!jM(c,u,s))return o;r+=2}else{if(!jM(c,{},s))return o;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}function Sb(n,e,t){let r=n.segments.slice(0,e),i=0;for(;i<t.length;){let o=t[i];if(xu(o)){let c=oj(o.outlets);return new Le(r,c)}if(i===0&&Ip(t[0])){let c=n.segments[e];r.push(new To(c.path,UM(t[0]))),i++;continue}let s=xu(o)?o.outlets[we]:`${o}`,a=i<t.length-1?t[i+1]:null;s&&a&&Ip(a)?(r.push(new To(s,UM(a))),i+=2):(r.push(new To(s,{})),i++)}return new Le(r,{})}function oj(n){let e={};return Object.entries(n).forEach(([t,r])=>{typeof r=="string"&&(r=[r]),r!==null&&(e[t]=Sb(new Le([],{}),0,r))}),e}function UM(n){let e={};return Object.entries(n).forEach(([t,r])=>e[t]=`${r}`),e}function jM(n,e,t){return n==t.path&&ti(e,t.parameters)}var uc="imperative",xt=(function(n){return n[n.NavigationStart=0]="NavigationStart",n[n.NavigationEnd=1]="NavigationEnd",n[n.NavigationCancel=2]="NavigationCancel",n[n.NavigationError=3]="NavigationError",n[n.RoutesRecognized=4]="RoutesRecognized",n[n.ResolveStart=5]="ResolveStart",n[n.ResolveEnd=6]="ResolveEnd",n[n.GuardsCheckStart=7]="GuardsCheckStart",n[n.GuardsCheckEnd=8]="GuardsCheckEnd",n[n.RouteConfigLoadStart=9]="RouteConfigLoadStart",n[n.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",n[n.ChildActivationStart=11]="ChildActivationStart",n[n.ChildActivationEnd=12]="ChildActivationEnd",n[n.ActivationStart=13]="ActivationStart",n[n.ActivationEnd=14]="ActivationEnd",n[n.Scroll=15]="Scroll",n[n.NavigationSkipped=16]="NavigationSkipped",n})(xt||{}),jn=class{id;url;constructor(e,t){this.id=e,this.url=t}},Mo=class extends jn{type=xt.NavigationStart;navigationTrigger;restoredState;constructor(e,t,r="imperative",i=null){super(e,t),this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}},Bn=class extends jn{urlAfterRedirects;type=xt.NavigationEnd;constructor(e,t,r){super(e,t),this.urlAfterRedirects=r}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}},vn=(function(n){return n[n.Redirect=0]="Redirect",n[n.SupersededByNewNavigation=1]="SupersededByNewNavigation",n[n.NoDataFromResolver=2]="NoDataFromResolver",n[n.GuardRejected=3]="GuardRejected",n[n.Aborted=4]="Aborted",n})(vn||{}),fc=(function(n){return n[n.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",n[n.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",n})(fc||{}),ni=class extends jn{reason;code;type=xt.NavigationCancel;constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}},ii=class extends jn{reason;code;type=xt.NavigationSkipped;constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i}},hc=class extends jn{error;target;type=xt.NavigationError;constructor(e,t,r,i){super(e,t),this.error=r,this.target=i}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}},Mu=class extends jn{urlAfterRedirects;state;type=xt.RoutesRecognized;constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Tp=class extends jn{urlAfterRedirects;state;type=xt.GuardsCheckStart;constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Dp=class extends jn{urlAfterRedirects;state;shouldActivate;type=xt.GuardsCheckEnd;constructor(e,t,r,i,o){super(e,t),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=o}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}},xp=class extends jn{urlAfterRedirects;state;type=xt.ResolveStart;constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Mp=class extends jn{urlAfterRedirects;state;type=xt.ResolveEnd;constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Pp=class{route;type=xt.RouteConfigLoadStart;constructor(e){this.route=e}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}},Ap=class{route;type=xt.RouteConfigLoadEnd;constructor(e){this.route=e}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}},kp=class{snapshot;type=xt.ChildActivationStart;constructor(e){this.snapshot=e}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Op=class{snapshot;type=xt.ChildActivationEnd;constructor(e){this.snapshot=e}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Rp=class{snapshot;type=xt.ActivationStart;constructor(e){this.snapshot=e}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},pc=class{snapshot;type=xt.ActivationEnd;constructor(e){this.snapshot=e}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},gc=class{routerEvent;position;anchor;type=xt.Scroll;constructor(e,t,r){this.routerEvent=e,this.position=t,this.anchor=r}toString(){let e=this.position?`${this.position[0]}, ${this.position[1]}`:null;return`Scroll(anchor: '${this.anchor}', position: '${e}')`}},Pu=class{},mc=class{url;navigationBehaviorOptions;constructor(e,t){this.url=e,this.navigationBehaviorOptions=t}};function sj(n){return!(n instanceof Pu)&&!(n instanceof mc)}function aj(n,e){return n.providers&&!n._injector&&(n._injector=ic(n.providers,e,`Route: ${n.path}`)),n._injector??e}function kr(n){return n.outlet||we}function cj(n,e){let t=n.filter(r=>kr(r)===e);return t.push(...n.filter(r=>kr(r)!==e)),t}function yc(n){if(!n)return null;if(n.routeConfig?._injector)return n.routeConfig._injector;for(let e=n.parent;e;e=e.parent){let t=e.routeConfig;if(t?._loadedInjector)return t._loadedInjector;if(t?._injector)return t._injector}return null}var Np=class{rootInjector;outlet=null;route=null;children;attachRef=null;get injector(){return yc(this.route?.snapshot)??this.rootInjector}constructor(e){this.rootInjector=e,this.children=new js(this.rootInjector)}},js=(()=>{class n{rootInjector;contexts=new Map;constructor(t){this.rootInjector=t}onChildOutletCreated(t,r){let i=this.getOrCreateContext(t);i.outlet=r,this.contexts.set(t,i)}onChildOutletDestroyed(t){let r=this.getContext(t);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){let t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let r=this.getContext(t);return r||(r=new Np(this.rootInjector),this.contexts.set(t,r)),r}getContext(t){return this.contexts.get(t)||null}static \u0275fac=function(r){return new(r||n)(ie(mt))};static \u0275prov=Q({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),Fp=class{_root;constructor(e){this._root=e}get root(){return this._root.value}parent(e){let t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){let t=Tb(e,this._root);return t?t.children.map(r=>r.value):[]}firstChild(e){let t=Tb(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){let t=Db(e,this._root);return t.length<2?[]:t[t.length-2].children.map(i=>i.value).filter(i=>i!==e)}pathFromRoot(e){return Db(e,this._root).map(t=>t.value)}};function Tb(n,e){if(n===e.value)return e;for(let t of e.children){let r=Tb(n,t);if(r)return r}return null}function Db(n,e){if(n===e.value)return[e];for(let t of e.children){let r=Db(n,t);if(r.length)return r.unshift(e),r}return[]}var Un=class{value;children;constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}};function cc(n){let e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}var Au=class extends Fp{snapshot;constructor(e,t){super(e),this.snapshot=t,Nb(this,e)}toString(){return this.snapshot.toString()}};function sP(n){let e=lj(n),t=new yt([new To("",{})]),r=new yt({}),i=new yt({}),o=new yt({}),s=new yt(""),a=new An(t,r,o,s,i,we,n,e.root);return a.snapshot=e.root,new Au(new Un(a,[]),e)}function lj(n){let e={},t={},r={},o=new Ls([],e,r,"",t,we,n,null,{});return new ku("",new Un(o,[]))}var An=class{urlSubject;paramsSubject;queryParamsSubject;fragmentSubject;dataSubject;outlet;component;snapshot;_futureSnapshot;_routerState;_paramMap;_queryParamMap;title;url;params;queryParams;fragment;data;constructor(e,t,r,i,o,s,a,c){this.urlSubject=e,this.paramsSubject=t,this.queryParamsSubject=r,this.fragmentSubject=i,this.dataSubject=o,this.outlet=s,this.component=a,this._futureSnapshot=c,this.title=this.dataSubject?.pipe(Ce(u=>u[Fu]))??se(void 0),this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=o}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=this.params.pipe(Ce(e=>Vs(e))),this._paramMap}get queryParamMap(){return this._queryParamMap??=this.queryParams.pipe(Ce(e=>Vs(e))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}};function Lp(n,e,t="emptyOnly"){let r,{routeConfig:i}=n;return e!==null&&(t==="always"||i?.path===""||!e.component&&!e.routeConfig?.loadComponent)?r={params:H(H({},e.params),n.params),data:H(H({},e.data),n.data),resolve:H(H(H(H({},n.data),e.data),i?.data),n._resolvedData)}:r={params:H({},n.params),data:H({},n.data),resolve:H(H({},n.data),n._resolvedData??{})},i&&cP(i)&&(r.resolve[Fu]=i.title),r}var Ls=class{url;params;queryParams;fragment;data;outlet;component;routeConfig;_resolve;_resolvedData;_routerState;_paramMap;_queryParamMap;get title(){return this.data?.[Fu]}constructor(e,t,r,i,o,s,a,c,u){this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=o,this.outlet=s,this.component=a,this.routeConfig=c,this._resolve=u}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=Vs(this.params),this._paramMap}get queryParamMap(){return this._queryParamMap??=Vs(this.queryParams),this._queryParamMap}toString(){let e=this.url.map(r=>r.toString()).join("/"),t=this.routeConfig?this.routeConfig.path:"";return`Route(url:'${e}', path:'${t}')`}},ku=class extends Fp{url;constructor(e,t){super(t),this.url=e,Nb(this,t)}toString(){return aP(this._root)}};function Nb(n,e){e.value._routerState=n,e.children.forEach(t=>Nb(n,t))}function aP(n){let e=n.children.length>0?` { ${n.children.map(aP).join(", ")} } `:"";return`${n.value}${e}`}function yb(n){if(n.snapshot){let e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,ti(e.queryParams,t.queryParams)||n.queryParamsSubject.next(t.queryParams),e.fragment!==t.fragment&&n.fragmentSubject.next(t.fragment),ti(e.params,t.params)||n.paramsSubject.next(t.params),F5(e.url,t.url)||n.urlSubject.next(t.url),ti(e.data,t.data)||n.dataSubject.next(t.data)}else n.snapshot=n._futureSnapshot,n.dataSubject.next(n._futureSnapshot.data)}function xb(n,e){let t=ti(n.params,e.params)&&j5(n.url,e.url),r=!n.parent!=!e.parent;return t&&!r&&(!n.parent||xb(n.parent,e.parent))}function cP(n){return typeof n.title=="string"||n.title===null}var lP=new J(""),Lu=(()=>{class n{activated=null;get activatedComponentRef(){return this.activated}_activatedRoute=null;name=we;activateEvents=new nt;deactivateEvents=new nt;attachEvents=new nt;detachEvents=new nt;routerOutletData=hM(void 0);parentContexts=k(js);location=k(Ai);changeDetector=k(Oi);inputBinder=k(Vu,{optional:!0});supportsBindingToComponentInputs=!0;ngOnChanges(t){if(t.name){let{firstChange:r,previousValue:i}=t.name;if(r)return;this.isTrackedInParentContexts(i)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(i)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(t){return this.parentContexts.getContext(t)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;let t=this.parentContexts.getContext(this.name);t?.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new X(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new X(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new X(4012,!1);this.location.detach();let t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,r){this.activated=t,this._activatedRoute=r,this.location.insert(t.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){let t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,r){if(this.isActivated)throw new X(4013,!1);this._activatedRoute=t;let i=this.location,s=t.snapshot.component,a=this.parentContexts.getOrCreateContext(this.name).children,c=new Mb(t,a,i.injector,this.routerOutletData);this.activated=i.createComponent(s,{index:i.length,injector:c,environmentInjector:r}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}static \u0275fac=function(r){return new(r||n)};static \u0275dir=Ze({type:n,selectors:[["router-outlet"]],inputs:{name:"name",routerOutletData:[1,"routerOutletData"]},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],features:[Yr]})}return n})(),Mb=class{route;childContexts;parent;outletData;constructor(e,t,r,i){this.route=e,this.childContexts=t,this.parent=r,this.outletData=i}get(e,t){return e===An?this.route:e===js?this.childContexts:e===lP?this.outletData:this.parent.get(e,t)}},Vu=new J(""),Fb=(()=>{class n{outletDataSubscriptions=new Map;bindActivatedRouteToOutletComponent(t){this.unsubscribeFromRouteData(t),this.subscribeToRouteData(t)}unsubscribeFromRouteData(t){this.outletDataSubscriptions.get(t)?.unsubscribe(),this.outletDataSubscriptions.delete(t)}subscribeToRouteData(t){let{activatedRoute:r}=t,i=Rl([r.queryParams,r.params,r.data]).pipe(bt(([o,s,a],c)=>(a=H(H(H({},o),s),a),c===0?se(a):Promise.resolve(a)))).subscribe(o=>{if(!t.isActivated||!t.activatedComponentRef||t.activatedRoute!==r||r.component===null){this.unsubscribeFromRouteData(t);return}let s=mM(r.component);if(!s){this.unsubscribeFromRouteData(t);return}for(let{templateName:a}of s.inputs)t.activatedComponentRef.setInput(a,o[a])});this.outletDataSubscriptions.set(t,i)}static \u0275fac=function(r){return new(r||n)};static \u0275prov=Q({token:n,factory:n.\u0275fac})}return n})(),Uu=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275cmp=et({type:n,selectors:[["ng-component"]],exportAs:["emptyRouterOutlet"],decls:1,vars:0,template:function(r,i){r&1&&z(0,"router-outlet")},dependencies:[Lu],encapsulation:2})}return n})();function Lb(n){let e=n.children&&n.children.map(Lb),t=e?re(H({},n),{children:e}):H({},n);return!t.component&&!t.loadComponent&&(e||t.loadChildren)&&t.outlet&&t.outlet!==we&&(t.component=Uu),t}function uj(n,e,t){let r=Ou(n,e._root,t?t._root:void 0);return new Au(r,e)}function Ou(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){let r=t.value;r._futureSnapshot=e.value;let i=dj(n,e,t);return new Un(r,i)}else{if(n.shouldAttach(e.value)){let o=n.retrieve(e.value);if(o!==null){let s=o.route;return s.value._futureSnapshot=e.value,s.children=e.children.map(a=>Ou(n,a)),s}}let r=fj(e.value),i=e.children.map(o=>Ou(n,o));return new Un(r,i)}}function dj(n,e,t){return e.children.map(r=>{for(let i of t.children)if(n.shouldReuseRoute(r.value,i.value.snapshot))return Ou(n,r,i);return Ou(n,r)})}function fj(n){return new An(new yt(n.url),new yt(n.params),new yt(n.queryParams),new yt(n.fragment),new yt(n.data),n.outlet,n.component,n)}var vc=class{redirectTo;navigationBehaviorOptions;constructor(e,t){this.redirectTo=e,this.navigationBehaviorOptions=t}},uP="ngNavigationCancelingError";function Vp(n,e){let{redirectTo:t,navigationBehaviorOptions:r}=xo(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,i=dP(!1,vn.Redirect);return i.url=t,i.navigationBehaviorOptions=r,i}function dP(n,e){let t=new Error(`NavigationCancelingError: ${n||""}`);return t[uP]=!0,t.cancellationCode=e,t}function hj(n){return fP(n)&&xo(n.url)}function fP(n){return!!n&&n[uP]}var pj=(n,e,t,r)=>Ce(i=>(new Pb(e,i.targetRouterState,i.currentRouterState,t,r).activate(n),i)),Pb=class{routeReuseStrategy;futureState;currState;forwardEvent;inputBindingEnabled;constructor(e,t,r,i,o){this.routeReuseStrategy=e,this.futureState=t,this.currState=r,this.forwardEvent=i,this.inputBindingEnabled=o}activate(e){let t=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,r,e),yb(this.futureState.root),this.activateChildRoutes(t,r,e)}deactivateChildRoutes(e,t,r){let i=cc(t);e.children.forEach(o=>{let s=o.value.outlet;this.deactivateRoutes(o,i[s],r),delete i[s]}),Object.values(i).forEach(o=>{this.deactivateRouteAndItsChildren(o,r)})}deactivateRoutes(e,t,r){let i=e.value,o=t?t.value:null;if(i===o)if(i.component){let s=r.getContext(i.outlet);s&&this.deactivateChildRoutes(e,t,s.children)}else this.deactivateChildRoutes(e,t,r);else o&&this.deactivateRouteAndItsChildren(t,r)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){let r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,o=cc(e);for(let s of Object.values(o))this.deactivateRouteAndItsChildren(s,i);if(r&&r.outlet){let s=r.outlet.detach(),a=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:s,route:e,contexts:a})}}deactivateRouteAndOutlet(e,t){let r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,o=cc(e);for(let s of Object.values(o))this.deactivateRouteAndItsChildren(s,i);r&&(r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated()),r.attachRef=null,r.route=null)}activateChildRoutes(e,t,r){let i=cc(t);e.children.forEach(o=>{this.activateRoutes(o,i[o.value.outlet],r),this.forwardEvent(new pc(o.value.snapshot))}),e.children.length&&this.forwardEvent(new Op(e.value.snapshot))}activateRoutes(e,t,r){let i=e.value,o=t?t.value:null;if(yb(i),i===o)if(i.component){let s=r.getOrCreateContext(i.outlet);this.activateChildRoutes(e,t,s.children)}else this.activateChildRoutes(e,t,r);else if(i.component){let s=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){let a=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),s.children.onOutletReAttached(a.contexts),s.attachRef=a.componentRef,s.route=a.route.value,s.outlet&&s.outlet.attach(a.componentRef,a.route.value),yb(a.route.value),this.activateChildRoutes(e,null,s.children)}else s.attachRef=null,s.route=i,s.outlet&&s.outlet.activateWith(i,s.injector),this.activateChildRoutes(e,null,s.children)}else this.activateChildRoutes(e,null,r)}},Up=class{path;route;constructor(e){this.path=e,this.route=this.path[this.path.length-1]}},dc=class{component;route;constructor(e,t){this.component=e,this.route=t}};function gj(n,e,t){let r=n._root,i=e?e._root:null;return Su(r,i,t,[r.value])}function mj(n){let e=n.routeConfig?n.routeConfig.canActivateChild:null;return!e||e.length===0?null:{node:n,guards:e}}function bc(n,e){let t=Symbol(),r=e.get(n,t);return r===t?typeof n=="function"&&!h0(n)?n:e.get(n):r}function Su(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let o=cc(e);return n.children.forEach(s=>{vj(s,o[s.value.outlet],t,r.concat([s.value]),i),delete o[s.value.outlet]}),Object.entries(o).forEach(([s,a])=>Du(a,t.getContext(s),i)),i}function vj(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let o=n.value,s=e?e.value:null,a=t?t.getContext(n.value.outlet):null;if(s&&o.routeConfig===s.routeConfig){let c=_j(s,o,o.routeConfig.runGuardsAndResolvers);c?i.canActivateChecks.push(new Up(r)):(o.data=s.data,o._resolvedData=s._resolvedData),o.component?Su(n,e,a?a.children:null,r,i):Su(n,e,t,r,i),c&&a&&a.outlet&&a.outlet.isActivated&&i.canDeactivateChecks.push(new dc(a.outlet.component,s))}else s&&Du(e,a,i),i.canActivateChecks.push(new Up(r)),o.component?Su(n,null,a?a.children:null,r,i):Su(n,null,t,r,i);return i}function _j(n,e,t){if(typeof t=="function")return t(n,e);switch(t){case"pathParamsChange":return!Fs(n.url,e.url);case"pathParamsOrQueryParamsChange":return!Fs(n.url,e.url)||!ti(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!xb(n,e)||!ti(n.queryParams,e.queryParams);case"paramsChange":default:return!xb(n,e)}}function Du(n,e,t){let r=cc(n),i=n.value;Object.entries(r).forEach(([o,s])=>{i.component?e?Du(s,e.children.getContext(o),t):Du(s,null,t):Du(s,e,t)}),i.component?e&&e.outlet&&e.outlet.isActivated?t.canDeactivateChecks.push(new dc(e.outlet.component,i)):t.canDeactivateChecks.push(new dc(null,i)):t.canDeactivateChecks.push(new dc(null,i))}function ju(n){return typeof n=="function"}function yj(n){return typeof n=="boolean"}function bj(n){return n&&ju(n.canLoad)}function wj(n){return n&&ju(n.canActivate)}function Ej(n){return n&&ju(n.canActivateChild)}function Cj(n){return n&&ju(n.canDeactivate)}function Ij(n){return n&&ju(n.canMatch)}function hP(n){return n instanceof yi||n?.name==="EmptyError"}var bp=Symbol("INITIAL_VALUE");function _c(){return bt(n=>Rl(n.map(e=>e.pipe(mr(1),Ll(bp)))).pipe(Ce(e=>{for(let t of e)if(t!==!0){if(t===bp)return bp;if(t===!1||Sj(t))return t}return!0}),Tt(e=>e!==bp),mr(1)))}function Sj(n){return xo(n)||n instanceof vc}function Tj(n,e){return st(t=>{let{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:o,canDeactivateChecks:s}}=t;return s.length===0&&o.length===0?se(re(H({},t),{guardsResult:!0})):Dj(s,r,i,n).pipe(st(a=>a&&yj(a)?xj(r,o,n,e):se(a)),Ce(a=>re(H({},t),{guardsResult:a})))})}function Dj(n,e,t,r){return Ye(n).pipe(st(i=>Oj(i.component,i.route,t,e,r)),Ei(i=>i!==!0,!0))}function xj(n,e,t,r){return Ye(e).pipe(wi(i=>Ua(Pj(i.route.parent,r),Mj(i.route,r),kj(n,i.path,t),Aj(n,i.route,t))),Ei(i=>i!==!0,!0))}function Mj(n,e){return n!==null&&e&&e(new Rp(n)),se(!0)}function Pj(n,e){return n!==null&&e&&e(new kp(n)),se(!0)}function Aj(n,e,t){let r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||r.length===0)return se(!0);let i=r.map(o=>Nl(()=>{let s=yc(e)??t,a=bc(o,s),c=wj(a)?a.canActivate(e,n):wt(s,()=>a(e,n));return Ni(c).pipe(Ei())}));return se(i).pipe(_c())}function kj(n,e,t){let r=e[e.length-1],o=e.slice(0,e.length-1).reverse().map(s=>mj(s)).filter(s=>s!==null).map(s=>Nl(()=>{let a=s.guards.map(c=>{let u=yc(s.node)??t,f=bc(c,u),m=Ej(f)?f.canActivateChild(r,n):wt(u,()=>f(r,n));return Ni(m).pipe(Ei())});return se(a).pipe(_c())}));return se(o).pipe(_c())}function Oj(n,e,t,r,i){let o=e&&e.routeConfig?e.routeConfig.canDeactivate:null;if(!o||o.length===0)return se(!0);let s=o.map(a=>{let c=yc(e)??i,u=bc(a,c),f=Cj(u)?u.canDeactivate(n,e,t,r):wt(c,()=>u(n,e,t,r));return Ni(f).pipe(Ei())});return se(s).pipe(_c())}function Rj(n,e,t,r){let i=e.canLoad;if(i===void 0||i.length===0)return se(!0);let o=i.map(s=>{let a=bc(s,n),c=bj(a)?a.canLoad(e,t):wt(n,()=>a(e,t));return Ni(c)});return se(o).pipe(_c(),pP(r))}function pP(n){return Uv(kt(e=>{if(typeof e!="boolean")throw Vp(n,e)}),Ce(e=>e===!0))}function Nj(n,e,t,r){let i=e.canMatch;if(!i||i.length===0)return se(!0);let o=i.map(s=>{let a=bc(s,n),c=Ij(a)?a.canMatch(e,t):wt(n,()=>a(e,t));return Ni(c)});return se(o).pipe(_c(),pP(r))}var Ru=class{segmentGroup;constructor(e){this.segmentGroup=e||null}},Nu=class extends Error{urlTree;constructor(e){super(),this.urlTree=e}};function ac(n){return Va(new Ru(n))}function Fj(n){return Va(new X(4e3,!1))}function Lj(n){return Va(dP(!1,vn.GuardRejected))}var Ab=class{urlSerializer;urlTree;constructor(e,t){this.urlSerializer=e,this.urlTree=t}lineralizeSegments(e,t){let r=[],i=t.root;for(;;){if(r=r.concat(i.segments),i.numberOfChildren===0)return se(r);if(i.numberOfChildren>1||!i.children[we])return Fj(`${e.redirectTo}`);i=i.children[we]}}applyRedirectCommands(e,t,r,i,o){return Vj(t,i,o).pipe(Ce(s=>{if(s instanceof ri)throw new Nu(s);let a=this.applyRedirectCreateUrlTree(s,this.urlSerializer.parse(s),e,r);if(s[0]==="/")throw new Nu(a);return a}))}applyRedirectCreateUrlTree(e,t,r,i){let o=this.createSegmentGroup(e,t.root,r,i);return new ri(o,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){let r={};return Object.entries(e).forEach(([i,o])=>{if(typeof o=="string"&&o[0]===":"){let a=o.substring(1);r[i]=t[a]}else r[i]=o}),r}createSegmentGroup(e,t,r,i){let o=this.createSegments(e,t.segments,r,i),s={};return Object.entries(t.children).forEach(([a,c])=>{s[a]=this.createSegmentGroup(e,c,r,i)}),new Le(o,s)}createSegments(e,t,r,i){return t.map(o=>o.path[0]===":"?this.findPosParam(e,o,i):this.findOrReturn(o,r))}findPosParam(e,t,r){let i=r[t.path.substring(1)];if(!i)throw new X(4001,!1);return i}findOrReturn(e,t){let r=0;for(let i of t){if(i.path===e.path)return t.splice(r),i;r++}return e}};function Vj(n,e,t){if(typeof n=="string")return se(n);let r=n,{queryParams:i,fragment:o,routeConfig:s,url:a,outlet:c,params:u,data:f,title:m}=e;return Ni(wt(t,()=>r({params:u,data:f,queryParams:i,fragment:o,routeConfig:s,url:a,outlet:c,title:m})))}var kb={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function Uj(n,e,t,r,i){let o=gP(n,e,t);return o.matched?(r=aj(e,r),Nj(r,e,t,i).pipe(Ce(s=>s===!0?o:H({},kb)))):se(o)}function gP(n,e,t){if(e.path==="**")return jj(t);if(e.path==="")return e.pathMatch==="full"&&(n.hasChildren()||t.length>0)?H({},kb):{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};let i=(e.matcher||zM)(t,n,e);if(!i)return H({},kb);let o={};Object.entries(i.posParams??{}).forEach(([a,c])=>{o[a]=c.path});let s=i.consumed.length>0?H(H({},o),i.consumed[i.consumed.length-1].parameters):o;return{matched:!0,consumedSegments:i.consumed,remainingSegments:t.slice(i.consumed.length),parameters:s,positionalParamSegments:i.posParams??{}}}function jj(n){return{matched:!0,parameters:n.length>0?WM(n).parameters:{},consumedSegments:n,remainingSegments:[],positionalParamSegments:{}}}function BM(n,e,t,r){return t.length>0&&Hj(n,t,r)?{segmentGroup:new Le(e,$j(r,new Le(t,n.children))),slicedSegments:[]}:t.length===0&&zj(n,t,r)?{segmentGroup:new Le(n.segments,Bj(n,t,r,n.children)),slicedSegments:t}:{segmentGroup:new Le(n.segments,n.children),slicedSegments:t}}function Bj(n,e,t,r){let i={};for(let o of t)if(Bp(n,e,o)&&!r[kr(o)]){let s=new Le([],{});i[kr(o)]=s}return H(H({},r),i)}function $j(n,e){let t={};t[we]=e;for(let r of n)if(r.path===""&&kr(r)!==we){let i=new Le([],{});t[kr(r)]=i}return t}function Hj(n,e,t){return t.some(r=>Bp(n,e,r)&&kr(r)!==we)}function zj(n,e,t){return t.some(r=>Bp(n,e,r))}function Bp(n,e,t){return(n.hasChildren()||e.length>0)&&t.pathMatch==="full"?!1:t.path===""}function qj(n,e,t){return e.length===0&&!n.children[t]}var Ob=class{};function Wj(n,e,t,r,i,o,s="emptyOnly"){return new Rb(n,e,t,r,i,s,o).recognize()}var Gj=31,Rb=class{injector;configLoader;rootComponentType;config;urlTree;paramsInheritanceStrategy;urlSerializer;applyRedirects;absoluteRedirectCount=0;allowRedirects=!0;constructor(e,t,r,i,o,s,a){this.injector=e,this.configLoader=t,this.rootComponentType=r,this.config=i,this.urlTree=o,this.paramsInheritanceStrategy=s,this.urlSerializer=a,this.applyRedirects=new Ab(this.urlSerializer,this.urlTree)}noMatchError(e){return new X(4002,`'${e.segmentGroup}'`)}recognize(){let e=BM(this.urlTree.root,[],[],this.config).segmentGroup;return this.match(e).pipe(Ce(({children:t,rootSnapshot:r})=>{let i=new Un(r,t),o=new ku("",i),s=tP(r,[],this.urlTree.queryParams,this.urlTree.fragment);return s.queryParams=this.urlTree.queryParams,o.url=this.urlSerializer.serialize(s),{state:o,tree:s}}))}match(e){let t=new Ls([],Object.freeze({}),Object.freeze(H({},this.urlTree.queryParams)),this.urlTree.fragment,Object.freeze({}),we,this.rootComponentType,null,{});return this.processSegmentGroup(this.injector,this.config,e,we,t).pipe(Ce(r=>({children:r,rootSnapshot:t})),bi(r=>{if(r instanceof Nu)return this.urlTree=r.urlTree,this.match(r.urlTree.root);throw r instanceof Ru?this.noMatchError(r):r}))}processSegmentGroup(e,t,r,i,o){return r.segments.length===0&&r.hasChildren()?this.processChildren(e,t,r,o):this.processSegment(e,t,r,r.segments,i,!0,o).pipe(Ce(s=>s instanceof Un?[s]:[]))}processChildren(e,t,r,i){let o=[];for(let s of Object.keys(r.children))s==="primary"?o.unshift(s):o.push(s);return Ye(o).pipe(wi(s=>{let a=r.children[s],c=cj(t,s);return this.processSegmentGroup(e,c,a,s,i)}),Zv((s,a)=>(s.push(...a),s)),co(null),Yv(),st(s=>{if(s===null)return ac(r);let a=mP(s);return Kj(a),se(a)}))}processSegment(e,t,r,i,o,s,a){return Ye(t).pipe(wi(c=>this.processSegmentAgainstRoute(c._injector??e,t,c,r,i,o,s,a).pipe(bi(u=>{if(u instanceof Ru)return se(null);throw u}))),Ei(c=>!!c),bi(c=>{if(hP(c))return qj(r,i,o)?se(new Ob):ac(r);throw c}))}processSegmentAgainstRoute(e,t,r,i,o,s,a,c){return kr(r)!==s&&(s===we||!Bp(i,o,r))?ac(i):r.redirectTo===void 0?this.matchSegmentAgainstRoute(e,i,r,o,s,c):this.allowRedirects&&a?this.expandSegmentAgainstRouteUsingRedirect(e,i,t,r,o,s,c):ac(i)}expandSegmentAgainstRouteUsingRedirect(e,t,r,i,o,s,a){let{matched:c,parameters:u,consumedSegments:f,positionalParamSegments:m,remainingSegments:_}=gP(t,i,o);if(!c)return ac(t);typeof i.redirectTo=="string"&&i.redirectTo[0]==="/"&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>Gj&&(this.allowRedirects=!1));let E=new Ls(o,u,Object.freeze(H({},this.urlTree.queryParams)),this.urlTree.fragment,$M(i),kr(i),i.component??i._loadedComponent??null,i,HM(i)),x=Lp(E,a,this.paramsInheritanceStrategy);return E.params=Object.freeze(x.params),E.data=Object.freeze(x.data),this.applyRedirects.applyRedirectCommands(f,i.redirectTo,m,E,e).pipe(bt(U=>this.applyRedirects.lineralizeSegments(i,U)),st(U=>this.processSegment(e,r,t,U.concat(_),s,!1,a)))}matchSegmentAgainstRoute(e,t,r,i,o,s){let a=Uj(t,r,i,e,this.urlSerializer);return r.path==="**"&&(t.children={}),a.pipe(bt(c=>c.matched?(e=r._injector??e,this.getChildConfig(e,r,i).pipe(bt(({routes:u})=>{let f=r._loadedInjector??e,{parameters:m,consumedSegments:_,remainingSegments:E}=c,x=new Ls(_,m,Object.freeze(H({},this.urlTree.queryParams)),this.urlTree.fragment,$M(r),kr(r),r.component??r._loadedComponent??null,r,HM(r)),V=Lp(x,s,this.paramsInheritanceStrategy);x.params=Object.freeze(V.params),x.data=Object.freeze(V.data);let{segmentGroup:U,slicedSegments:W}=BM(t,_,E,u);if(W.length===0&&U.hasChildren())return this.processChildren(f,u,U,x).pipe(Ce(fe=>new Un(x,fe)));if(u.length===0&&W.length===0)return se(new Un(x,[]));let oe=kr(r)===o;return this.processSegment(f,u,U,W,oe?we:o,!0,x).pipe(Ce(fe=>new Un(x,fe instanceof Un?[fe]:[])))}))):ac(t)))}getChildConfig(e,t,r){return t.children?se({routes:t.children,injector:e}):t.loadChildren?t._loadedRoutes!==void 0?se({routes:t._loadedRoutes,injector:t._loadedInjector}):Rj(e,t,r,this.urlSerializer).pipe(st(i=>i?this.configLoader.loadChildren(e,t).pipe(kt(o=>{t._loadedRoutes=o.routes,t._loadedInjector=o.injector})):Lj(t))):se({routes:[],injector:e})}};function Kj(n){n.sort((e,t)=>e.value.outlet===we?-1:t.value.outlet===we?1:e.value.outlet.localeCompare(t.value.outlet))}function Yj(n){let e=n.value.routeConfig;return e&&e.path===""}function mP(n){let e=[],t=new Set;for(let r of n){if(!Yj(r)){e.push(r);continue}let i=e.find(o=>r.value.routeConfig===o.value.routeConfig);i!==void 0?(i.children.push(...r.children),t.add(i)):e.push(r)}for(let r of t){let i=mP(r.children);e.push(new Un(r.value,i))}return e.filter(r=>!t.has(r))}function $M(n){return n.data||{}}function HM(n){return n.resolve||{}}function Qj(n,e,t,r,i,o){return st(s=>Wj(n,e,t,r,s.extractedUrl,i,o).pipe(Ce(({state:a,tree:c})=>re(H({},s),{targetSnapshot:a,urlAfterRedirects:c}))))}function Zj(n,e){return st(t=>{let{targetSnapshot:r,guards:{canActivateChecks:i}}=t;if(!i.length)return se(t);let o=new Set(i.map(c=>c.route)),s=new Set;for(let c of o)if(!s.has(c))for(let u of vP(c))s.add(u);let a=0;return Ye(s).pipe(wi(c=>o.has(c)?Xj(c,r,n,e):(c.data=Lp(c,c.parent,n).resolve,se(void 0))),kt(()=>a++),ja(1),st(c=>a===s.size?se(t):tn))})}function vP(n){let e=n.children.map(t=>vP(t)).flat();return[n,...e]}function Xj(n,e,t,r){let i=n.routeConfig,o=n._resolve;return i?.title!==void 0&&!cP(i)&&(o[Fu]=i.title),Nl(()=>(n.data=Lp(n,n.parent,t).resolve,Jj(o,n,e,r).pipe(Ce(s=>(n._resolvedData=s,n.data=H(H({},n.data),s),null)))))}function Jj(n,e,t,r){let i=Eb(n);if(i.length===0)return se({});let o={};return Ye(i).pipe(st(s=>e6(n[s],e,t,r).pipe(Ei(),kt(a=>{if(a instanceof vc)throw Vp(new Do,a);o[s]=a}))),ja(1),Ce(()=>o),bi(s=>hP(s)?tn:Va(s)))}function e6(n,e,t,r){let i=yc(e)??r,o=bc(n,i),s=o.resolve?o.resolve(e,t):wt(i,()=>o(e,t));return Ni(s)}function bb(n){return bt(e=>{let t=n(e);return t?Ye(t).pipe(Ce(()=>e)):se(e)})}var Vb=(()=>{class n{buildTitle(t){let r,i=t.root;for(;i!==void 0;)r=this.getResolvedTitleForRoute(i)??r,i=i.children.find(o=>o.outlet===we);return r}getResolvedTitleForRoute(t){return t.data[Fu]}static \u0275fac=function(r){return new(r||n)};static \u0275prov=Q({token:n,factory:()=>k(_P),providedIn:"root"})}return n})(),_P=(()=>{class n extends Vb{title;constructor(t){super(),this.title=t}updateTitle(t){let r=this.buildTitle(t);r!==void 0&&this.title.setTitle(r)}static \u0275fac=function(r){return new(r||n)(ie(_p))};static \u0275prov=Q({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),Po=new J("",{providedIn:"root",factory:()=>({})}),Bs=new J(""),$p=(()=>{class n{componentLoaders=new WeakMap;childrenLoaders=new WeakMap;onLoadStartListener;onLoadEndListener;compiler=k(Uy);loadComponent(t,r){if(this.componentLoaders.get(r))return this.componentLoaders.get(r);if(r._loadedComponent)return se(r._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(r);let i=Ni(wt(t,()=>r.loadComponent())).pipe(Ce(bP),bt(wP),kt(s=>{this.onLoadEndListener&&this.onLoadEndListener(r),r._loadedComponent=s}),Fl(()=>{this.componentLoaders.delete(r)})),o=new Ra(i,()=>new Ke).pipe(Oa());return this.componentLoaders.set(r,o),o}loadChildren(t,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return se({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);let o=yP(r,this.compiler,t,this.onLoadEndListener).pipe(Fl(()=>{this.childrenLoaders.delete(r)})),s=new Ra(o,()=>new Ke).pipe(Oa());return this.childrenLoaders.set(r,s),s}static \u0275fac=function(r){return new(r||n)};static \u0275prov=Q({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function yP(n,e,t,r){return Ni(wt(t,()=>n.loadChildren())).pipe(Ce(bP),bt(wP),st(i=>i instanceof ep||Array.isArray(i)?se(i):Ye(e.compileModuleAsync(i))),Ce(i=>{r&&r(n);let o,s,a=!1;return Array.isArray(i)?(s=i,a=!0):(o=i.create(t).injector,s=o.get(Bs,[],{optional:!0,self:!0}).flat()),{routes:s.map(Lb),injector:o}}))}function t6(n){return n&&typeof n=="object"&&"default"in n}function bP(n){return t6(n)?n.default:n}function wP(n){return se(n)}var Hp=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275prov=Q({token:n,factory:()=>k(n6),providedIn:"root"})}return n})(),n6=(()=>{class n{shouldProcessUrl(t){return!0}extract(t){return t}merge(t,r){return t}static \u0275fac=function(r){return new(r||n)};static \u0275prov=Q({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),Ub=new J(""),jb=new J("");function EP(n,e,t){let r=n.get(jb),i=n.get(vt);if(!i.startViewTransition||r.skipNextTransition)return r.skipNextTransition=!1,new Promise(u=>setTimeout(u));let o,s=new Promise(u=>{o=u}),a=i.startViewTransition(()=>(o(),r6(n)));a.ready.catch(u=>{});let{onViewTransitionCreated:c}=r;return c&&wt(n,()=>c({transition:a,from:e,to:t})),s}function r6(n){return new Promise(e=>{du({read:()=>setTimeout(e)},{injector:n})})}var Bb=new J(""),zp=(()=>{class n{currentNavigation=Tn(null,{equal:()=>!1});currentTransition=null;lastSuccessfulNavigation=null;events=new Ke;transitionAbortWithErrorSubject=new Ke;configLoader=k($p);environmentInjector=k(mt);destroyRef=k(Er);urlSerializer=k(Us);rootContexts=k(js);location=k(So);inputBindingEnabled=k(Vu,{optional:!0})!==null;titleStrategy=k(Vb);options=k(Po,{optional:!0})||{};paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly";urlHandlingStrategy=k(Hp);createViewTransition=k(Ub,{optional:!0});navigationErrorHandler=k(Bb,{optional:!0});navigationId=0;get hasRequestedNavigation(){return this.navigationId!==0}transitions;afterPreactivation=()=>se(void 0);rootComponentType=null;destroyed=!1;constructor(){let t=i=>this.events.next(new Pp(i)),r=i=>this.events.next(new Ap(i));this.configLoader.onLoadEndListener=r,this.configLoader.onLoadStartListener=t,this.destroyRef.onDestroy(()=>{this.destroyed=!0})}complete(){this.transitions?.complete()}handleNavigationRequest(t){let r=++this.navigationId;Ft(()=>{this.transitions?.next(re(H({},t),{extractedUrl:this.urlHandlingStrategy.extract(t.rawUrl),targetSnapshot:null,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null,abortController:new AbortController,id:r}))})}setupNavigations(t){return this.transitions=new yt(null),this.transitions.pipe(Tt(r=>r!==null),bt(r=>{let i=!1;return se(r).pipe(bt(o=>{if(this.navigationId>r.id)return this.cancelNavigationTransition(r,"",vn.SupersededByNewNavigation),tn;this.currentTransition=r,this.currentNavigation.set({id:o.id,initialUrl:o.rawUrl,extractedUrl:o.extractedUrl,targetBrowserUrl:typeof o.extras.browserUrl=="string"?this.urlSerializer.parse(o.extras.browserUrl):o.extras.browserUrl,trigger:o.source,extras:o.extras,previousNavigation:this.lastSuccessfulNavigation?re(H({},this.lastSuccessfulNavigation),{previousNavigation:null}):null,abort:()=>o.abortController.abort()});let s=!t.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl(),a=o.extras.onSameUrlNavigation??t.onSameUrlNavigation;if(!s&&a!=="reload")return this.events.next(new ii(o.id,this.urlSerializer.serialize(o.rawUrl),"",fc.IgnoredSameUrlNavigation)),o.resolve(!1),tn;if(this.urlHandlingStrategy.shouldProcessUrl(o.rawUrl))return se(o).pipe(bt(c=>(this.events.next(new Mo(c.id,this.urlSerializer.serialize(c.extractedUrl),c.source,c.restoredState)),c.id!==this.navigationId?tn:Promise.resolve(c))),Qj(this.environmentInjector,this.configLoader,this.rootComponentType,t.config,this.urlSerializer,this.paramsInheritanceStrategy),kt(c=>{r.targetSnapshot=c.targetSnapshot,r.urlAfterRedirects=c.urlAfterRedirects,this.currentNavigation.update(f=>(f.finalUrl=c.urlAfterRedirects,f));let u=new Mu(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects),c.targetSnapshot);this.events.next(u)}));if(s&&this.urlHandlingStrategy.shouldProcessUrl(o.currentRawUrl)){let{id:c,extractedUrl:u,source:f,restoredState:m,extras:_}=o,E=new Mo(c,this.urlSerializer.serialize(u),f,m);this.events.next(E);let x=sP(this.rootComponentType).snapshot;return this.currentTransition=r=re(H({},o),{targetSnapshot:x,urlAfterRedirects:u,extras:re(H({},_),{skipLocationChange:!1,replaceUrl:!1})}),this.currentNavigation.update(V=>(V.finalUrl=u,V)),se(r)}else return this.events.next(new ii(o.id,this.urlSerializer.serialize(o.extractedUrl),"",fc.IgnoredByUrlHandlingStrategy)),o.resolve(!1),tn}),kt(o=>{let s=new Tp(o.id,this.urlSerializer.serialize(o.extractedUrl),this.urlSerializer.serialize(o.urlAfterRedirects),o.targetSnapshot);this.events.next(s)}),Ce(o=>(this.currentTransition=r=re(H({},o),{guards:gj(o.targetSnapshot,o.currentSnapshot,this.rootContexts)}),r)),Tj(this.environmentInjector,o=>this.events.next(o)),kt(o=>{if(r.guardsResult=o.guardsResult,o.guardsResult&&typeof o.guardsResult!="boolean")throw Vp(this.urlSerializer,o.guardsResult);let s=new Dp(o.id,this.urlSerializer.serialize(o.extractedUrl),this.urlSerializer.serialize(o.urlAfterRedirects),o.targetSnapshot,!!o.guardsResult);this.events.next(s)}),Tt(o=>o.guardsResult?!0:(this.cancelNavigationTransition(o,"",vn.GuardRejected),!1)),bb(o=>{if(o.guards.canActivateChecks.length!==0)return se(o).pipe(kt(s=>{let a=new xp(s.id,this.urlSerializer.serialize(s.extractedUrl),this.urlSerializer.serialize(s.urlAfterRedirects),s.targetSnapshot);this.events.next(a)}),bt(s=>{let a=!1;return se(s).pipe(Zj(this.paramsInheritanceStrategy,this.environmentInjector),kt({next:()=>a=!0,complete:()=>{a||this.cancelNavigationTransition(s,"",vn.NoDataFromResolver)}}))}),kt(s=>{let a=new Mp(s.id,this.urlSerializer.serialize(s.extractedUrl),this.urlSerializer.serialize(s.urlAfterRedirects),s.targetSnapshot);this.events.next(a)}))}),bb(o=>{let s=a=>{let c=[];if(a.routeConfig?.loadComponent){let u=yc(a)??this.environmentInjector;c.push(this.configLoader.loadComponent(u,a.routeConfig).pipe(kt(f=>{a.component=f}),Ce(()=>{})))}for(let u of a.children)c.push(...s(u));return c};return Rl(s(o.targetSnapshot.root)).pipe(co(null),mr(1))}),bb(()=>this.afterPreactivation()),bt(()=>{let{currentSnapshot:o,targetSnapshot:s}=r,a=this.createViewTransition?.(this.environmentInjector,o.root,s.root);return a?Ye(a).pipe(Ce(()=>r)):se(r)}),Ce(o=>{let s=uj(t.routeReuseStrategy,o.targetSnapshot,o.currentRouterState);return this.currentTransition=r=re(H({},o),{targetRouterState:s}),this.currentNavigation.update(a=>(a.targetRouterState=s,a)),r}),kt(()=>{this.events.next(new Pu)}),pj(this.rootContexts,t.routeReuseStrategy,o=>this.events.next(o),this.inputBindingEnabled),mr(1),Ci(new ge(o=>{let s=r.abortController.signal,a=()=>o.next();return s.addEventListener("abort",a),()=>s.removeEventListener("abort",a)}).pipe(Tt(()=>!i&&!r.targetRouterState),kt(()=>{this.cancelNavigationTransition(r,r.abortController.signal.reason+"",vn.Aborted)}))),kt({next:o=>{i=!0,this.lastSuccessfulNavigation=Ft(this.currentNavigation),this.events.next(new Bn(o.id,this.urlSerializer.serialize(o.extractedUrl),this.urlSerializer.serialize(o.urlAfterRedirects))),this.titleStrategy?.updateTitle(o.targetRouterState.snapshot),o.resolve(!0)},complete:()=>{i=!0}}),Ci(this.transitionAbortWithErrorSubject.pipe(kt(o=>{throw o}))),Fl(()=>{i||this.cancelNavigationTransition(r,"",vn.SupersededByNewNavigation),this.currentTransition?.id===r.id&&(this.currentNavigation.set(null),this.currentTransition=null)}),bi(o=>{if(this.destroyed)return r.resolve(!1),tn;if(i=!0,fP(o))this.events.next(new ni(r.id,this.urlSerializer.serialize(r.extractedUrl),o.message,o.cancellationCode)),hj(o)?this.events.next(new mc(o.url,o.navigationBehaviorOptions)):r.resolve(!1);else{let s=new hc(r.id,this.urlSerializer.serialize(r.extractedUrl),o,r.targetSnapshot??void 0);try{let a=wt(this.environmentInjector,()=>this.navigationErrorHandler?.(s));if(a instanceof vc){let{message:c,cancellationCode:u}=Vp(this.urlSerializer,a);this.events.next(new ni(r.id,this.urlSerializer.serialize(r.extractedUrl),c,u)),this.events.next(new mc(a.redirectTo,a.navigationBehaviorOptions))}else throw this.events.next(s),o}catch(a){this.options.resolveNavigationPromiseOnError?r.resolve(!1):r.reject(a)}}return tn}))}))}cancelNavigationTransition(t,r,i){let o=new ni(t.id,this.urlSerializer.serialize(t.extractedUrl),r,i);this.events.next(o),t.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){let t=this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))),r=Ft(this.currentNavigation),i=r?.targetBrowserUrl??r?.extractedUrl;return t.toString()!==i?.toString()&&!r?.extras.skipLocationChange}static \u0275fac=function(r){return new(r||n)};static \u0275prov=Q({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function i6(n){return n!==uc}var CP=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275prov=Q({token:n,factory:()=>k(o6),providedIn:"root"})}return n})(),jp=class{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}},o6=(()=>{class n extends jp{static \u0275fac=(()=>{let t;return function(i){return(t||(t=Ir(n)))(i||n)}})();static \u0275prov=Q({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),IP=(()=>{class n{urlSerializer=k(Us);options=k(Po,{optional:!0})||{};canceledNavigationResolution=this.options.canceledNavigationResolution||"replace";location=k(So);urlHandlingStrategy=k(Hp);urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred";currentUrlTree=new ri;getCurrentUrlTree(){return this.currentUrlTree}rawUrlTree=this.currentUrlTree;getRawUrlTree(){return this.rawUrlTree}createBrowserPath({finalUrl:t,initialUrl:r,targetBrowserUrl:i}){let o=t!==void 0?this.urlHandlingStrategy.merge(t,r):r,s=i??o;return s instanceof ri?this.urlSerializer.serialize(s):s}commitTransition({targetRouterState:t,finalUrl:r,initialUrl:i}){r&&t?(this.currentUrlTree=r,this.rawUrlTree=this.urlHandlingStrategy.merge(r,i),this.routerState=t):this.rawUrlTree=i}routerState=sP(null);getRouterState(){return this.routerState}stateMemento=this.createStateMemento();updateStateMemento(){this.stateMemento=this.createStateMemento()}createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}resetInternalState({finalUrl:t}){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t??this.rawUrlTree)}static \u0275fac=function(r){return new(r||n)};static \u0275prov=Q({token:n,factory:()=>k(s6),providedIn:"root"})}return n})(),s6=(()=>{class n extends IP{currentPageId=0;lastSuccessfulId=-1;restoredState(){return this.location.getState()}get browserPageId(){return this.canceledNavigationResolution!=="computed"?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}registerNonRouterCurrentEntryChangeListener(t){return this.location.subscribe(r=>{r.type==="popstate"&&setTimeout(()=>{t(r.url,r.state,"popstate")})})}handleRouterEvent(t,r){t instanceof Mo?this.updateStateMemento():t instanceof ii?this.commitTransition(r):t instanceof Mu?this.urlUpdateStrategy==="eager"&&(r.extras.skipLocationChange||this.setBrowserUrl(this.createBrowserPath(r),r)):t instanceof Pu?(this.commitTransition(r),this.urlUpdateStrategy==="deferred"&&!r.extras.skipLocationChange&&this.setBrowserUrl(this.createBrowserPath(r),r)):t instanceof ni&&t.code!==vn.SupersededByNewNavigation&&t.code!==vn.Redirect?this.restoreHistory(r):t instanceof hc?this.restoreHistory(r,!0):t instanceof Bn&&(this.lastSuccessfulId=t.id,this.currentPageId=this.browserPageId)}setBrowserUrl(t,{extras:r,id:i}){let{replaceUrl:o,state:s}=r;if(this.location.isCurrentPathEqualTo(t)||o){let a=this.browserPageId,c=H(H({},s),this.generateNgRouterState(i,a));this.location.replaceState(t,"",c)}else{let a=H(H({},s),this.generateNgRouterState(i,this.browserPageId+1));this.location.go(t,"",a)}}restoreHistory(t,r=!1){if(this.canceledNavigationResolution==="computed"){let i=this.browserPageId,o=this.currentPageId-i;o!==0?this.location.historyGo(o):this.getCurrentUrlTree()===t.finalUrl&&o===0&&(this.resetInternalState(t),this.resetUrlToCurrentUrlTree())}else this.canceledNavigationResolution==="replace"&&(r&&this.resetInternalState(t),this.resetUrlToCurrentUrlTree())}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.getRawUrlTree()),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(t,r){return this.canceledNavigationResolution==="computed"?{navigationId:t,\u0275routerPageId:r}:{navigationId:t}}static \u0275fac=(()=>{let t;return function(i){return(t||(t=Ir(n)))(i||n)}})();static \u0275prov=Q({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function qp(n,e){n.events.pipe(Tt(t=>t instanceof Bn||t instanceof ni||t instanceof hc||t instanceof ii),Ce(t=>t instanceof Bn||t instanceof ii?0:(t instanceof ni?t.code===vn.Redirect||t.code===vn.SupersededByNewNavigation:!1)?2:1),Tt(t=>t!==2),mr(1)).subscribe(()=>{e()})}var a6={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},c6={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"},Ve=(()=>{class n{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}disposed=!1;nonRouterCurrentEntryChangeSubscription;console=k(My);stateManager=k(IP);options=k(Po,{optional:!0})||{};pendingTasks=k(Wr);urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred";navigationTransitions=k(zp);urlSerializer=k(Us);location=k(So);urlHandlingStrategy=k(Hp);injector=k(mt);_events=new Ke;get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}navigated=!1;routeReuseStrategy=k(CP);onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore";config=k(Bs,{optional:!0})?.flat()??[];componentInputBindingEnabled=!!k(Vu,{optional:!0});currentNavigation=this.navigationTransitions.currentNavigation.asReadonly();constructor(){this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this).subscribe({error:t=>{this.console.warn(t)}}),this.subscribeToNavigationEvents()}eventsSubscription=new dt;subscribeToNavigationEvents(){let t=this.navigationTransitions.events.subscribe(r=>{try{let i=this.navigationTransitions.currentTransition,o=Ft(this.navigationTransitions.currentNavigation);if(i!==null&&o!==null){if(this.stateManager.handleRouterEvent(r,o),r instanceof ni&&r.code!==vn.Redirect&&r.code!==vn.SupersededByNewNavigation)this.navigated=!0;else if(r instanceof Bn)this.navigated=!0;else if(r instanceof mc){let s=r.navigationBehaviorOptions,a=this.urlHandlingStrategy.merge(r.url,i.currentRawUrl),c=H({browserUrl:i.extras.browserUrl,info:i.extras.info,skipLocationChange:i.extras.skipLocationChange,replaceUrl:i.extras.replaceUrl||this.urlUpdateStrategy==="eager"||i6(i.source)},s);this.scheduleNavigation(a,uc,null,c,{resolve:i.resolve,reject:i.reject,promise:i.promise})}}sj(r)&&this._events.next(r)}catch(i){this.navigationTransitions.transitionAbortWithErrorSubject.next(i)}});this.eventsSubscription.add(t)}resetRootComponentType(t){this.routerState.root.component=t,this.navigationTransitions.rootComponentType=t}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),uc,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription??=this.stateManager.registerNonRouterCurrentEntryChangeListener((t,r,i)=>{this.navigateToSyncWithBrowser(t,i,r)})}navigateToSyncWithBrowser(t,r,i){let o={replaceUrl:!0},s=i?.navigationId?i:null;if(i){let c=H({},i);delete c.navigationId,delete c.\u0275routerPageId,Object.keys(c).length!==0&&(o.state=c)}let a=this.parseUrl(t);this.scheduleNavigation(a,r,s,o).catch(c=>{this.disposed||this.injector.get(mn)(c)})}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return Ft(this.navigationTransitions.currentNavigation)}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(t){this.config=t.map(Lb),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this._events.unsubscribe(),this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(t,r={}){let{relativeTo:i,queryParams:o,fragment:s,queryParamsHandling:a,preserveFragment:c}=r,u=c?this.currentUrlTree.fragment:s,f=null;switch(a??this.options.defaultQueryParamsHandling){case"merge":f=H(H({},this.currentUrlTree.queryParams),o);break;case"preserve":f=this.currentUrlTree.queryParams;break;default:f=o||null}f!==null&&(f=this.removeEmptyProps(f));let m;try{let _=i?i.snapshot:this.routerState.snapshot.root;m=nP(_)}catch{(typeof t[0]!="string"||t[0][0]!=="/")&&(t=[]),m=this.currentUrlTree.root}return rP(m,t,f,u??null)}navigateByUrl(t,r={skipLocationChange:!1}){let i=xo(t)?t:this.parseUrl(t),o=this.urlHandlingStrategy.merge(i,this.rawUrlTree);return this.scheduleNavigation(o,uc,null,r)}navigate(t,r={skipLocationChange:!1}){return l6(t),this.navigateByUrl(this.createUrlTree(t,r),r)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){try{return this.urlSerializer.parse(t)}catch{return this.urlSerializer.parse("/")}}isActive(t,r){let i;if(r===!0?i=H({},a6):r===!1?i=H({},c6):i=r,xo(t))return LM(this.currentUrlTree,t,i);let o=this.parseUrl(t);return LM(this.currentUrlTree,o,i)}removeEmptyProps(t){return Object.entries(t).reduce((r,[i,o])=>(o!=null&&(r[i]=o),r),{})}scheduleNavigation(t,r,i,o,s){if(this.disposed)return Promise.resolve(!1);let a,c,u;s?(a=s.resolve,c=s.reject,u=s.promise):u=new Promise((m,_)=>{a=m,c=_});let f=this.pendingTasks.add();return qp(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(f))}),this.navigationTransitions.handleNavigationRequest({source:r,restoredState:i,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:t,extras:o,resolve:a,reject:c,promise:u,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),u.catch(m=>Promise.reject(m))}static \u0275fac=function(r){return new(r||n)};static \u0275prov=Q({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function l6(n){for(let e=0;e<n.length;e++)if(n[e]==null)throw new X(4008,!1)}var an=(()=>{class n{router;route;tabIndexAttribute;renderer;el;locationStrategy;reactiveHref=Tn(null);get href(){return Ft(this.reactiveHref)}set href(t){this.reactiveHref.set(t)}target;queryParams;fragment;queryParamsHandling;state;info;relativeTo;isAnchorElement;subscription;onChanges=new Ke;applicationErrorHandler=k(mn);options=k(Po,{optional:!0});constructor(t,r,i,o,s,a){this.router=t,this.route=r,this.tabIndexAttribute=i,this.renderer=o,this.el=s,this.locationStrategy=a,this.reactiveHref.set(k(new ap("href"),{optional:!0}));let c=s.nativeElement.tagName?.toLowerCase();this.isAnchorElement=c==="a"||c==="area"||!!(typeof customElements=="object"&&customElements.get(c)?.observedAttributes?.includes?.("href")),this.isAnchorElement?this.setTabIndexIfNotOnNativeEl("0"):this.subscribeToNavigationEventsIfNecessary()}subscribeToNavigationEventsIfNecessary(){if(this.subscription!==void 0||!this.isAnchorElement)return;let t=this.preserveFragment,r=i=>i==="merge"||i==="preserve";t||=r(this.queryParamsHandling),t||=!this.queryParamsHandling&&!r(this.options?.defaultQueryParamsHandling),t&&(this.subscription=this.router.events.subscribe(i=>{i instanceof Bn&&this.updateHref()}))}preserveFragment=!1;skipLocationChange=!1;replaceUrl=!1;setTabIndexIfNotOnNativeEl(t){this.tabIndexAttribute!=null||this.isAnchorElement||this.applyAttributeValue("tabindex",t)}ngOnChanges(t){this.isAnchorElement&&(this.updateHref(),this.subscribeToNavigationEventsIfNecessary()),this.onChanges.next(this)}routerLinkInput=null;set routerLink(t){t==null?(this.routerLinkInput=null,this.setTabIndexIfNotOnNativeEl(null)):(xo(t)?this.routerLinkInput=t:this.routerLinkInput=Array.isArray(t)?t:[t],this.setTabIndexIfNotOnNativeEl("0"))}onClick(t,r,i,o,s){let a=this.urlTree;if(a===null||this.isAnchorElement&&(t!==0||r||i||o||s||typeof this.target=="string"&&this.target!="_self"))return!0;let c={skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state,info:this.info};return this.router.navigateByUrl(a,c)?.catch(u=>{this.applicationErrorHandler(u)}),!this.isAnchorElement}ngOnDestroy(){this.subscription?.unsubscribe()}updateHref(){let t=this.urlTree;this.reactiveHref.set(t!==null&&this.locationStrategy?this.locationStrategy?.prepareExternalUrl(this.router.serializeUrl(t))??"":null)}applyAttributeValue(t,r){let i=this.renderer,o=this.el.nativeElement;r!==null?i.setAttribute(o,t,r):i.removeAttribute(o,t)}get urlTree(){return this.routerLinkInput===null?null:xo(this.routerLinkInput)?this.routerLinkInput:this.router.createUrlTree(this.routerLinkInput,{relativeTo:this.relativeTo!==void 0?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}static \u0275fac=function(r){return new(r||n)(ne(Ve),ne(An),cu("tabindex"),ne(er),ne(on),ne(Ar))};static \u0275dir=Ze({type:n,selectors:[["","routerLink",""]],hostVars:2,hostBindings:function(r,i){r&1&&B("click",function(s){return i.onClick(s.button,s.ctrlKey,s.shiftKey,s.altKey,s.metaKey)}),r&2&&sn("href",i.reactiveHref(),ty)("target",i.target)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",info:"info",relativeTo:"relativeTo",preserveFragment:[2,"preserveFragment","preserveFragment",Io],skipLocationChange:[2,"skipLocationChange","skipLocationChange",Io],replaceUrl:[2,"replaceUrl","replaceUrl",Io],routerLink:"routerLink"},features:[Yr]})}return n})(),Hb=(()=>{class n{router;element;renderer;cdr;link;links;classes=[];routerEventsSubscription;linkInputChangesSubscription;_isActive=!1;get isActive(){return this._isActive}routerLinkActiveOptions={exact:!1};ariaCurrentWhenActive;isActiveChange=new nt;constructor(t,r,i,o,s){this.router=t,this.element=r,this.renderer=i,this.cdr=o,this.link=s,this.routerEventsSubscription=t.events.subscribe(a=>{a instanceof Bn&&this.update()})}ngAfterContentInit(){se(this.links.changes,se(null)).pipe(ao()).subscribe(t=>{this.update(),this.subscribeToEachLinkOnChanges()})}subscribeToEachLinkOnChanges(){this.linkInputChangesSubscription?.unsubscribe();let t=[...this.links.toArray(),this.link].filter(r=>!!r).map(r=>r.onChanges);this.linkInputChangesSubscription=Ye(t).pipe(ao()).subscribe(r=>{this._isActive!==this.isLinkActive(this.router)(r)&&this.update()})}set routerLinkActive(t){let r=Array.isArray(t)?t:t.split(" ");this.classes=r.filter(i=>!!i)}ngOnChanges(t){this.update()}ngOnDestroy(){this.routerEventsSubscription.unsubscribe(),this.linkInputChangesSubscription?.unsubscribe()}update(){!this.links||!this.router.navigated||queueMicrotask(()=>{let t=this.hasActiveLinks();this.classes.forEach(r=>{t?this.renderer.addClass(this.element.nativeElement,r):this.renderer.removeClass(this.element.nativeElement,r)}),t&&this.ariaCurrentWhenActive!==void 0?this.renderer.setAttribute(this.element.nativeElement,"aria-current",this.ariaCurrentWhenActive.toString()):this.renderer.removeAttribute(this.element.nativeElement,"aria-current"),this._isActive!==t&&(this._isActive=t,this.cdr.markForCheck(),this.isActiveChange.emit(t))})}isLinkActive(t){let r=u6(this.routerLinkActiveOptions)?this.routerLinkActiveOptions:this.routerLinkActiveOptions.exact||!1;return i=>{let o=i.urlTree;return o?t.isActive(o,r):!1}}hasActiveLinks(){let t=this.isLinkActive(this.router);return this.link&&t(this.link)||this.links.some(t)}static \u0275fac=function(r){return new(r||n)(ne(Ve),ne(on),ne(er),ne(Oi),ne(an,8))};static \u0275dir=Ze({type:n,selectors:[["","routerLinkActive",""]],contentQueries:function(r,i,o){if(r&1&&Fy(o,an,5),r&2){let s;Qr(s=Zr())&&(i.links=s)}},inputs:{routerLinkActiveOptions:"routerLinkActiveOptions",ariaCurrentWhenActive:"ariaCurrentWhenActive",routerLinkActive:"routerLinkActive"},outputs:{isActiveChange:"isActiveChange"},exportAs:["routerLinkActive"],features:[Yr]})}return n})();function u6(n){return!!n.paths}var Bu=class{};var SP=(()=>{class n{router;injector;preloadingStrategy;loader;subscription;constructor(t,r,i,o){this.router=t,this.injector=r,this.preloadingStrategy=i,this.loader=o}setUpPreloading(){this.subscription=this.router.events.pipe(Tt(t=>t instanceof Bn),wi(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,r){let i=[];for(let o of r){o.providers&&!o._injector&&(o._injector=ic(o.providers,t,`Route: ${o.path}`));let s=o._injector??t,a=o._loadedInjector??s;(o.loadChildren&&!o._loadedRoutes&&o.canLoad===void 0||o.loadComponent&&!o._loadedComponent)&&i.push(this.preloadConfig(s,o)),(o.children||o._loadedRoutes)&&i.push(this.processRoutes(a,o.children??o._loadedRoutes))}return Ye(i).pipe(ao())}preloadConfig(t,r){return this.preloadingStrategy.preload(r,()=>{let i;r.loadChildren&&r.canLoad===void 0?i=this.loader.loadChildren(t,r):i=se(null);let o=i.pipe(st(s=>s===null?se(void 0):(r._loadedRoutes=s.routes,r._loadedInjector=s.injector,this.processRoutes(s.injector??t,s.routes))));if(r.loadComponent&&!r._loadedComponent){let s=this.loader.loadComponent(t,r);return Ye([o,s]).pipe(ao())}else return o})}static \u0275fac=function(r){return new(r||n)(ie(Ve),ie(mt),ie(Bu),ie($p))};static \u0275prov=Q({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),TP=new J(""),d6=(()=>{class n{urlSerializer;transitions;viewportScroller;zone;options;routerEventsSubscription;scrollEventsSubscription;lastId=0;lastSource=uc;restoredId=0;store={};constructor(t,r,i,o,s={}){this.urlSerializer=t,this.transitions=r,this.viewportScroller=i,this.zone=o,this.options=s,s.scrollPositionRestoration||="disabled",s.anchorScrolling||="disabled"}init(){this.options.scrollPositionRestoration!=="disabled"&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(t=>{t instanceof Mo?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof Bn?(this.lastId=t.id,this.scheduleScrollEvent(t,this.urlSerializer.parse(t.urlAfterRedirects).fragment)):t instanceof ii&&t.code===fc.IgnoredSameUrlNavigation&&(this.lastSource=void 0,this.restoredId=0,this.scheduleScrollEvent(t,this.urlSerializer.parse(t.url).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(t=>{t instanceof gc&&(t.position?this.options.scrollPositionRestoration==="top"?this.viewportScroller.scrollToPosition([0,0]):this.options.scrollPositionRestoration==="enabled"&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&this.options.anchorScrolling==="enabled"?this.viewportScroller.scrollToAnchor(t.anchor):this.options.scrollPositionRestoration!=="disabled"&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,r){this.zone.runOutsideAngular(()=>y(this,null,function*(){yield new Promise(i=>{setTimeout(i),typeof requestAnimationFrame<"u"&&requestAnimationFrame(i)}),this.zone.run(()=>{this.transitions.events.next(new gc(t,this.lastSource==="popstate"?this.store[this.restoredId]:null,r))})}))}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}static \u0275fac=function(r){yy()};static \u0275prov=Q({token:n,factory:n.\u0275fac})}return n})();function zb(n,...e){return nn([{provide:Bs,multi:!0,useValue:n},[],{provide:An,useFactory:DP,deps:[Ve]},{provide:fu,multi:!0,useFactory:xP},e.map(t=>t.\u0275providers)])}function DP(n){return n.routerState.root}function $u(n,e){return{\u0275kind:n,\u0275providers:e}}function xP(){let n=k(Qe);return e=>{let t=n.get(ki);if(e!==t.components[0])return;let r=n.get(Ve),i=n.get(MP);n.get(qb)===1&&r.initialNavigation(),n.get(kP,null,{optional:!0})?.setUpPreloading(),n.get(TP,null,{optional:!0})?.init(),r.resetRootComponentType(t.componentTypes[0]),i.closed||(i.next(),i.complete(),i.unsubscribe())}}var MP=new J("",{factory:()=>new Ke}),qb=new J("",{providedIn:"root",factory:()=>1});function PP(){let n=[{provide:Q_,useValue:!0},{provide:qb,useValue:0},np(()=>{let e=k(Qe);return e.get(Zy,Promise.resolve()).then(()=>new Promise(r=>{let i=e.get(Ve),o=e.get(MP);qp(i,()=>{r(!0)}),e.get(zp).afterPreactivation=()=>(r(!0),o.closed?se(void 0):o),i.initialNavigation()}))})];return $u(2,n)}function AP(){let n=[np(()=>{k(Ve).setUpLocationChangeListener()}),{provide:qb,useValue:2}];return $u(3,n)}var kP=new J("");function OP(n){return $u(0,[{provide:kP,useExisting:SP},{provide:Bu,useExisting:n}])}function RP(){return $u(8,[Fb,{provide:Vu,useExisting:Fb}])}function NP(n){As("NgRouterViewTransitions");let e=[{provide:Ub,useValue:EP},{provide:jb,useValue:H({skipNextTransition:!!n?.skipInitialTransition},n)}];return $u(9,e)}var FP=[So,{provide:Us,useClass:Do},Ve,js,{provide:An,useFactory:DP,deps:[Ve]},$p,[]],Or=(()=>{class n{constructor(){}static forRoot(t,r){return{ngModule:n,providers:[FP,[],{provide:Bs,multi:!0,useValue:t},[],r?.errorHandler?{provide:Bb,useValue:r.errorHandler}:[],{provide:Po,useValue:r||{}},r?.useHash?h6():p6(),f6(),r?.preloadingStrategy?OP(r.preloadingStrategy).\u0275providers:[],r?.initialNavigation?g6(r):[],r?.bindToComponentInputs?RP().\u0275providers:[],r?.enableViewTransitions?NP().\u0275providers:[],m6()]}}static forChild(t){return{ngModule:n,providers:[{provide:Bs,multi:!0,useValue:t}]}}static \u0275fac=function(r){return new(r||n)};static \u0275mod=Tr({type:n});static \u0275inj=Gn({})}return n})();function f6(){return{provide:TP,useFactory:()=>{let n=k(DM),e=k(xe),t=k(Po),r=k(zp),i=k(Us);return t.scrollOffset&&n.setOffset(t.scrollOffset),new d6(i,r,n,e,t)}}}function h6(){return{provide:Ar,useClass:tb}}function p6(){return{provide:Ar,useClass:dp}}function g6(n){return[n.initialNavigation==="disabled"?AP().\u0275providers:[],n.initialNavigation==="enabledBlocking"?PP().\u0275providers:[]]}var $b=new J("");function m6(){return[{provide:$b,useFactory:xP},{provide:fu,multi:!0,useExisting:$b}]}var LP=()=>{};var jP=function(n){let e=[],t=0;for(let r=0;r<n.length;r++){let i=n.charCodeAt(r);i<128?e[t++]=i:i<2048?(e[t++]=i>>6|192,e[t++]=i&63|128):(i&64512)===55296&&r+1<n.length&&(n.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(n.charCodeAt(++r)&1023),e[t++]=i>>18|240,e[t++]=i>>12&63|128,e[t++]=i>>6&63|128,e[t++]=i&63|128):(e[t++]=i>>12|224,e[t++]=i>>6&63|128,e[t++]=i&63|128)}return e},v6=function(n){let e=[],t=0,r=0;for(;t<n.length;){let i=n[t++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){let o=n[t++];e[r++]=String.fromCharCode((i&31)<<6|o&63)}else if(i>239&&i<365){let o=n[t++],s=n[t++],a=n[t++],c=((i&7)<<18|(o&63)<<12|(s&63)<<6|a&63)-65536;e[r++]=String.fromCharCode(55296+(c>>10)),e[r++]=String.fromCharCode(56320+(c&1023))}else{let o=n[t++],s=n[t++];e[r++]=String.fromCharCode((i&15)<<12|(o&63)<<6|s&63)}}return e.join("")},Wp={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();let t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<n.length;i+=3){let o=n[i],s=i+1<n.length,a=s?n[i+1]:0,c=i+2<n.length,u=c?n[i+2]:0,f=o>>2,m=(o&3)<<4|a>>4,_=(a&15)<<2|u>>6,E=u&63;c||(E=64,s||(_=64)),r.push(t[f],t[m],t[_],t[E])}return r.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(jP(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):v6(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();let t=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<n.length;){let o=t[n.charAt(i++)],a=i<n.length?t[n.charAt(i)]:0;++i;let u=i<n.length?t[n.charAt(i)]:64;++i;let m=i<n.length?t[n.charAt(i)]:64;if(++i,o==null||a==null||u==null||m==null)throw new Gb;let _=o<<2|a>>4;if(r.push(_),u!==64){let E=a<<4&240|u>>2;if(r.push(E),m!==64){let x=u<<6&192|m;r.push(x)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}},Gb=class extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}},_6=function(n){let e=jP(n);return Wp.encodeByteArray(e,!0)},zu=function(n){return _6(n).replace(/\./g,"")},Gp=function(n){try{return Wp.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function Yb(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}var y6=()=>Yb().__FIREBASE_DEFAULTS__,b6=()=>{if(typeof process>"u"||typeof process.env>"u")return;let n=process.env.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},w6=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}let e=n&&Gp(n[1]);return e&&JSON.parse(e)},Kp=()=>{try{return LP()||y6()||b6()||w6()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},Qb=n=>{var e,t;return(t=(e=Kp())===null||e===void 0?void 0:e.emulatorHosts)===null||t===void 0?void 0:t[n]},BP=n=>{let e=Qb(n);if(!e)return;let t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);let r=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),r]:[e.substring(0,t),r]},Zb=()=>{var n;return(n=Kp())===null||n===void 0?void 0:n.config},Xb=n=>{var e;return(e=Kp())===null||e===void 0?void 0:e[`_${n}`]};var Hs=class{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,r)=>{t?this.reject(t):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,r))}}};function Ao(n){try{return(n.startsWith("http://")||n.startsWith("https://")?new URL(n).hostname:n).endsWith(".cloudworkstations.dev")}catch{return!1}}function Yp(n){return y(this,null,function*(){return(yield fetch(n,{credentials:"include"})).ok})}function $P(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');let t={alg:"none",type:"JWT"},r=e||"demo-project",i=n.iat||0,o=n.sub||n.user_id;if(!o)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");let s=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:o,user_id:o,firebase:{sign_in_provider:"custom",identities:{}}},n);return[zu(JSON.stringify(t)),zu(JSON.stringify(s)),""].join(".")}var Hu={};function E6(){let n={prod:[],emulator:[]};for(let e of Object.keys(Hu))Hu[e]?n.emulator.push(e):n.prod.push(e);return n}function C6(n){let e=document.getElementById(n),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",n),t=!0),{created:t,element:e}}var VP=!1;function Qp(n,e){if(typeof window>"u"||typeof document>"u"||!Ao(window.location.host)||Hu[n]===e||Hu[n]||VP)return;Hu[n]=e;function t(_){return`__firebase__banner__${_}`}let r="__firebase__banner",o=E6().prod.length>0;function s(){let _=document.getElementById(r);_&&_.remove()}function a(_){_.style.display="flex",_.style.background="#7faaf0",_.style.position="fixed",_.style.bottom="5px",_.style.left="5px",_.style.padding=".5em",_.style.borderRadius="5px",_.style.alignItems="center"}function c(_,E){_.setAttribute("width","24"),_.setAttribute("id",E),_.setAttribute("height","24"),_.setAttribute("viewBox","0 0 24 24"),_.setAttribute("fill","none"),_.style.marginLeft="-6px"}function u(){let _=document.createElement("span");return _.style.cursor="pointer",_.style.marginLeft="16px",_.style.fontSize="24px",_.innerHTML=" &times;",_.onclick=()=>{VP=!0,s()},_}function f(_,E){_.setAttribute("id",E),_.innerText="Learn more",_.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",_.setAttribute("target","__blank"),_.style.paddingLeft="5px",_.style.textDecoration="underline"}function m(){let _=C6(r),E=t("text"),x=document.getElementById(E)||document.createElement("span"),V=t("learnmore"),U=document.getElementById(V)||document.createElement("a"),W=t("preprendIcon"),oe=document.getElementById(W)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(_.created){let fe=_.element;a(fe),f(U,V);let Fe=u();c(oe,W),fe.append(oe,x,U,Fe),document.body.appendChild(fe)}o?(x.innerText="Preview backend disconnected.",oe.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(oe.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,x.innerText="Preview backend running in this workspace."),x.setAttribute("id",E)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",m):m()}function Vt(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function HP(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Vt())}function I6(){var n;let e=(n=Kp())===null||n===void 0?void 0:n.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function zP(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function qu(){let n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function qP(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function WP(){let n=Vt();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}function GP(){return!I6()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function ko(){try{return typeof indexedDB=="object"}catch{return!1}}function Wu(){return new Promise((n,e)=>{try{let t=!0,r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),t||self.indexedDB.deleteDatabase(r),n(!0)},i.onupgradeneeded=()=>{t=!1},i.onerror=()=>{var o;e(((o=i.error)===null||o===void 0?void 0:o.message)||"")}}catch(t){e(t)}})}function Jb(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}var S6="FirebaseError",Gt=class n extends Error{constructor(e,t,r){super(t),this.code=e,this.customData=r,this.name=S6,Object.setPrototypeOf(this,n.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,_n.prototype.create)}},_n=class{constructor(e,t,r){this.service=e,this.serviceName=t,this.errors=r}create(e,...t){let r=t[0]||{},i=`${this.service}/${e}`,o=this.errors[e],s=o?T6(o,r):"Error",a=`${this.serviceName}: ${s} (${i}).`;return new Gt(i,a,r)}};function T6(n,e){return n.replace(D6,(t,r)=>{let i=e[r];return i!=null?String(i):`<${r}?>`})}var D6=/\{\$([^}]+)}/g;function KP(n){for(let e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function rr(n,e){if(n===e)return!0;let t=Object.keys(n),r=Object.keys(e);for(let i of t){if(!r.includes(i))return!1;let o=n[i],s=e[i];if(UP(o)&&UP(s)){if(!rr(o,s))return!1}else if(o!==s)return!1}for(let i of r)if(!t.includes(i))return!1;return!0}function UP(n){return n!==null&&typeof n=="object"}function wc(n){let e=[];for(let[t,r]of Object.entries(n))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function Ec(n){let e={};return n.replace(/^\?/,"").split("&").forEach(r=>{if(r){let[i,o]=r.split("=");e[decodeURIComponent(i)]=decodeURIComponent(o)}}),e}function Cc(n){let e=n.indexOf("?");if(!e)return"";let t=n.indexOf("#",e);return n.substring(e,t>0?t:void 0)}function YP(n,e){let t=new Kb(n,e);return t.subscribe.bind(t)}var Kb=class{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,r){let i;if(e===void 0&&t===void 0&&r===void 0)throw new Error("Missing Observer.");x6(e,["next","error","complete"])?i=e:i={next:e,error:t,complete:r},i.next===void 0&&(i.next=Wb),i.error===void 0&&(i.error=Wb),i.complete===void 0&&(i.complete=Wb);let o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),o}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}};function x6(n,e){if(typeof n!="object"||n===null)return!1;for(let t of e)if(t in n&&typeof n[t]=="function")return!0;return!1}function Wb(){}var M6=1e3,P6=2,A6=14400*1e3,k6=.5;function Zp(n,e=M6,t=P6){let r=e*Math.pow(t,n),i=Math.round(k6*r*(Math.random()-.5)*2);return Math.min(A6,r+i)}function ze(n){return n&&n._delegate?n._delegate:n}var _t=class{constructor(e,t,r){this.name=e,this.instanceFactory=t,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}};var zs="[DEFAULT]";var ew=class{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){let t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){let r=new Hs;if(this.instancesDeferred.set(t,r),this.isInitialized(t)||this.shouldAutoInitialize())try{let i=this.getOrInitializeService({instanceIdentifier:t});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;let r=this.normalizeInstanceIdentifier(e?.identifier),i=(t=e?.optional)!==null&&t!==void 0?t:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(o){if(i)return null;throw o}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(R6(e))try{this.getOrInitializeService({instanceIdentifier:zs})}catch{}for(let[t,r]of this.instancesDeferred.entries()){let i=this.normalizeInstanceIdentifier(t);try{let o=this.getOrInitializeService({instanceIdentifier:i});r.resolve(o)}catch{}}}}clearInstance(e=zs){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}delete(){return y(this,null,function*(){let e=Array.from(this.instances.values());yield Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])})}isComponentSet(){return this.component!=null}isInitialized(e=zs){return this.instances.has(e)}getOptions(e=zs){return this.instancesOptions.get(e)||{}}initialize(e={}){let{options:t={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);let i=this.getOrInitializeService({instanceIdentifier:r,options:t});for(let[o,s]of this.instancesDeferred.entries()){let a=this.normalizeInstanceIdentifier(o);r===a&&s.resolve(i)}return i}onInit(e,t){var r;let i=this.normalizeInstanceIdentifier(t),o=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;o.add(e),this.onInitCallbacks.set(i,o);let s=this.instances.get(i);return s&&e(s,i),()=>{o.delete(e)}}invokeOnInitCallbacks(e,t){let r=this.onInitCallbacks.get(t);if(r)for(let i of r)try{i(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:O6(e),options:t}),this.instances.set(e,r),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=zs){return this.component?this.component.multipleInstances?e:zs:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}};function O6(n){return n===zs?void 0:n}function R6(n){return n.instantiationMode==="EAGER"}var Xp=class{constructor(e){this.name=e,this.providers=new Map}addComponent(e){let t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);let t=new ew(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}};var N6=[],De=(function(n){return n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT",n})(De||{}),F6={debug:De.DEBUG,verbose:De.VERBOSE,info:De.INFO,warn:De.WARN,error:De.ERROR,silent:De.SILENT},L6=De.INFO,V6={[De.DEBUG]:"log",[De.VERBOSE]:"log",[De.INFO]:"info",[De.WARN]:"warn",[De.ERROR]:"error"},U6=(n,e,...t)=>{if(e<n.logLevel)return;let r=new Date().toISOString(),i=V6[e];if(i)console[i](`[${r}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)},ir=class{constructor(e){this.name=e,this._logLevel=L6,this._logHandler=U6,this._userLogHandler=null,N6.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in De))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?F6[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,De.DEBUG,...e),this._logHandler(this,De.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,De.VERBOSE,...e),this._logHandler(this,De.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,De.INFO,...e),this._logHandler(this,De.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,De.WARN,...e),this._logHandler(this,De.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,De.ERROR,...e),this._logHandler(this,De.ERROR,...e)}};var j6=(n,e)=>e.some(t=>n instanceof t),QP,ZP;function B6(){return QP||(QP=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function $6(){return ZP||(ZP=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}var XP=new WeakMap,nw=new WeakMap,JP=new WeakMap,tw=new WeakMap,iw=new WeakMap;function H6(n){let e=new Promise((t,r)=>{let i=()=>{n.removeEventListener("success",o),n.removeEventListener("error",s)},o=()=>{t(oi(n.result)),i()},s=()=>{r(n.error),i()};n.addEventListener("success",o),n.addEventListener("error",s)});return e.then(t=>{t instanceof IDBCursor&&XP.set(t,n)}).catch(()=>{}),iw.set(e,n),e}function z6(n){if(nw.has(n))return;let e=new Promise((t,r)=>{let i=()=>{n.removeEventListener("complete",o),n.removeEventListener("error",s),n.removeEventListener("abort",s)},o=()=>{t(),i()},s=()=>{r(n.error||new DOMException("AbortError","AbortError")),i()};n.addEventListener("complete",o),n.addEventListener("error",s),n.addEventListener("abort",s)});nw.set(n,e)}var rw={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return nw.get(n);if(e==="objectStoreNames")return n.objectStoreNames||JP.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return oi(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function eA(n){rw=n(rw)}function q6(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){let r=n.call(Jp(this),e,...t);return JP.set(r,e.sort?e.sort():[e]),oi(r)}:$6().includes(n)?function(...e){return n.apply(Jp(this),e),oi(XP.get(this))}:function(...e){return oi(n.apply(Jp(this),e))}}function W6(n){return typeof n=="function"?q6(n):(n instanceof IDBTransaction&&z6(n),j6(n,B6())?new Proxy(n,rw):n)}function oi(n){if(n instanceof IDBRequest)return H6(n);if(tw.has(n))return tw.get(n);let e=W6(n);return e!==n&&(tw.set(n,e),iw.set(e,n)),e}var Jp=n=>iw.get(n);function eg(n,e,{blocked:t,upgrade:r,blocking:i,terminated:o}={}){let s=indexedDB.open(n,e),a=oi(s);return r&&s.addEventListener("upgradeneeded",c=>{r(oi(s.result),c.oldVersion,c.newVersion,oi(s.transaction),c)}),t&&s.addEventListener("blocked",c=>t(c.oldVersion,c.newVersion,c)),a.then(c=>{o&&c.addEventListener("close",()=>o()),i&&c.addEventListener("versionchange",u=>i(u.oldVersion,u.newVersion,u))}).catch(()=>{}),a}var G6=["get","getKey","getAll","getAllKeys","count"],K6=["put","add","delete","clear"],ow=new Map;function tA(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(ow.get(e))return ow.get(e);let t=e.replace(/FromIndex$/,""),r=e!==t,i=K6.includes(t);if(!(t in(r?IDBIndex:IDBObjectStore).prototype)||!(i||G6.includes(t)))return;let o=function(s,...a){return y(this,null,function*(){let c=this.transaction(s,i?"readwrite":"readonly"),u=c.store;return r&&(u=u.index(a.shift())),(yield Promise.all([u[t](...a),i&&c.done]))[0]})};return ow.set(e,o),o}eA(n=>re(H({},n),{get:(e,t,r)=>tA(e,t)||n.get(e,t,r),has:(e,t)=>!!tA(e,t)||n.has(e,t)}));var aw=class{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(Y6(t)){let r=t.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(t=>t).join(" ")}};function Y6(n){let e=n.getComponent();return e?.type==="VERSION"}var cw="@firebase/app",nA="0.13.2";var Fi=new ir("@firebase/app"),Q6="@firebase/app-compat",Z6="@firebase/analytics-compat",X6="@firebase/analytics",J6="@firebase/app-check-compat",eB="@firebase/app-check",tB="@firebase/auth",nB="@firebase/auth-compat",rB="@firebase/database",iB="@firebase/data-connect",oB="@firebase/database-compat",sB="@firebase/functions",aB="@firebase/functions-compat",cB="@firebase/installations",lB="@firebase/installations-compat",uB="@firebase/messaging",dB="@firebase/messaging-compat",fB="@firebase/performance",hB="@firebase/performance-compat",pB="@firebase/remote-config",gB="@firebase/remote-config-compat",mB="@firebase/storage",vB="@firebase/storage-compat",_B="@firebase/firestore",yB="@firebase/ai",bB="@firebase/firestore-compat",wB="firebase",EB="11.10.0";var lw="[DEFAULT]",CB={[cw]:"fire-core",[Q6]:"fire-core-compat",[X6]:"fire-analytics",[Z6]:"fire-analytics-compat",[eB]:"fire-app-check",[J6]:"fire-app-check-compat",[tB]:"fire-auth",[nB]:"fire-auth-compat",[rB]:"fire-rtdb",[iB]:"fire-data-connect",[oB]:"fire-rtdb-compat",[sB]:"fire-fn",[aB]:"fire-fn-compat",[cB]:"fire-iid",[lB]:"fire-iid-compat",[uB]:"fire-fcm",[dB]:"fire-fcm-compat",[fB]:"fire-perf",[hB]:"fire-perf-compat",[pB]:"fire-rc",[gB]:"fire-rc-compat",[mB]:"fire-gcs",[vB]:"fire-gcs-compat",[_B]:"fire-fst",[bB]:"fire-fst-compat",[yB]:"fire-vertex","fire-js":"fire-js",[wB]:"fire-js-all"};var Gu=new Map,IB=new Map,uw=new Map;function rA(n,e){try{n.container.addComponent(e)}catch(t){Fi.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function Kt(n){let e=n.name;if(uw.has(e))return Fi.debug(`There were multiple attempts to register component ${e}.`),!1;uw.set(e,n);for(let t of Gu.values())rA(t,n);for(let t of IB.values())rA(t,n);return!0}function or(n,e){let t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function yn(n){return n==null?!1:n.settings!==void 0}var SB={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Oo=new _n("app","Firebase",SB);var dw=class{constructor(e,t,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new _t("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Oo.create("app-deleted",{appName:this._name})}};var Ro=EB;function pw(n,e={}){let t=n;typeof e!="object"&&(e={name:e});let r=Object.assign({name:lw,automaticDataCollectionEnabled:!0},e),i=r.name;if(typeof i!="string"||!i)throw Oo.create("bad-app-name",{appName:String(i)});if(t||(t=Zb()),!t)throw Oo.create("no-options");let o=Gu.get(i);if(o){if(rr(t,o.options)&&rr(r,o.config))return o;throw Oo.create("duplicate-app",{appName:i})}let s=new Xp(i);for(let c of uw.values())s.addComponent(c);let a=new dw(t,r,s);return Gu.set(i,a),a}function si(n=lw){let e=Gu.get(n);if(!e&&n===lw&&Zb())return pw();if(!e)throw Oo.create("no-app",{appName:n});return e}function tg(){return Array.from(Gu.values())}function Ne(n,e,t){var r;let i=(r=CB[n])!==null&&r!==void 0?r:n;t&&(i+=`-${t}`);let o=i.match(/\s|\//),s=e.match(/\s|\//);if(o||s){let a=[`Unable to register library "${i}" with version "${e}":`];o&&a.push(`library name "${i}" contains illegal characters (whitespace or "/")`),o&&s&&a.push("and"),s&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Fi.warn(a.join(" "));return}Kt(new _t(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}var TB="firebase-heartbeat-database",DB=1,Ku="firebase-heartbeat-store",sw=null;function aA(){return sw||(sw=eg(TB,DB,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(Ku)}catch(t){console.warn(t)}}}}).catch(n=>{throw Oo.create("idb-open",{originalErrorMessage:n.message})})),sw}function xB(n){return y(this,null,function*(){try{let t=(yield aA()).transaction(Ku),r=yield t.objectStore(Ku).get(cA(n));return yield t.done,r}catch(e){if(e instanceof Gt)Fi.warn(e.message);else{let t=Oo.create("idb-get",{originalErrorMessage:e?.message});Fi.warn(t.message)}}})}function iA(n,e){return y(this,null,function*(){try{let r=(yield aA()).transaction(Ku,"readwrite");yield r.objectStore(Ku).put(e,cA(n)),yield r.done}catch(t){if(t instanceof Gt)Fi.warn(t.message);else{let r=Oo.create("idb-set",{originalErrorMessage:t?.message});Fi.warn(r.message)}}})}function cA(n){return`${n.name}!${n.options.appId}`}var MB=1024,PB=30,fw=class{constructor(e){this.container=e,this._heartbeatsCache=null;let t=this.container.getProvider("app").getImmediate();this._storage=new hw(t),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}triggerHeartbeat(){return y(this,null,function*(){var e,t;try{let i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),o=oA();if(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=yield this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===o||this._heartbeatsCache.heartbeats.some(s=>s.date===o))return;if(this._heartbeatsCache.heartbeats.push({date:o,agent:i}),this._heartbeatsCache.heartbeats.length>PB){let s=kB(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(s,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){Fi.warn(r)}})}getHeartbeatsHeader(){return y(this,null,function*(){var e;try{if(this._heartbeatsCache===null&&(yield this._heartbeatsCachePromise),((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";let t=oA(),{heartbeatsToSend:r,unsentEntries:i}=AB(this._heartbeatsCache.heartbeats),o=zu(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=t,i.length>0?(this._heartbeatsCache.heartbeats=i,yield this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),o}catch(t){return Fi.warn(t),""}})}};function oA(){return new Date().toISOString().substring(0,10)}function AB(n,e=MB){let t=[],r=n.slice();for(let i of n){let o=t.find(s=>s.agent===i.agent);if(o){if(o.dates.push(i.date),sA(t)>e){o.dates.pop();break}}else if(t.push({agent:i.agent,dates:[i.date]}),sA(t)>e){t.pop();break}r=r.slice(1)}return{heartbeatsToSend:t,unsentEntries:r}}var hw=class{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return y(this,null,function*(){return ko()?Wu().then(()=>!0).catch(()=>!1):!1})}read(){return y(this,null,function*(){if(yield this._canUseIndexedDBPromise){let t=yield xB(this.app);return t?.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}})}overwrite(e){return y(this,null,function*(){var t;if(yield this._canUseIndexedDBPromise){let i=yield this.read();return iA(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return})}add(e){return y(this,null,function*(){var t;if(yield this._canUseIndexedDBPromise){let i=yield this.read();return iA(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return})}};function sA(n){return zu(JSON.stringify({version:2,heartbeats:n})).length}function kB(n){if(n.length===0)return-1;let e=0,t=n[0].date;for(let r=1;r<n.length;r++)n[r].date<t&&(t=n[r].date,e=r);return e}function OB(n){Kt(new _t("platform-logger",e=>new aw(e),"PRIVATE")),Kt(new _t("heartbeat",e=>new fw(e),"PRIVATE")),Ne(cw,nA,n),Ne(cw,nA,"esm2017"),Ne("fire-js","")}OB("");var RB="firebase",NB="11.10.0";Ne(RB,NB,"app");function lA(n){n===void 0&&(n=k(Qe));let e=n.get(Ya);return t=>new ge(r=>{let i=e.add(),o=!1;function s(){o||(i(),o=!0)}let a=t.subscribe({next:c=>{r.next(c),s()},complete:()=>{r.complete(),s()},error:c=>{r.error(c),s()}});return a.add(()=>{r.unsubscribe(),s()}),a})}var sr=new Rs("ANGULARFIRE2_VERSION");function Ws(n,e,t){if(e){if(e.length===1)return e[0];let o=e.filter(s=>s.app===t);if(o.length===1)return o[0]}return t.container.getProvider(n).getImmediate({optional:!0})}var No=(n,e)=>{let t=e?[e]:tg(),r=[];return t.forEach(i=>{i.container.getProvider(n).instances.forEach(s=>{r.includes(s)||r.push(s)})}),r},Ic=(function(n){return n[n.SILENT=0]="SILENT",n[n.WARN=1]="WARN",n[n.VERBOSE=2]="VERBOSE",n})(Ic||{}),uA=Ky()&&typeof Zone<"u"?Ic.WARN:Ic.SILENT;var ng=class{zone;delegate;constructor(e,t=zv){this.zone=e,this.delegate=t}now(){return this.delegate.now()}schedule(e,t,r){let i=this.zone,o=function(s){i?i.runGuarded(()=>{e.apply(this,[s])}):e.apply(this,[s])};return this.delegate.schedule(o,t,r)}},ai=(()=>{class n{outsideAngular;insideAngular;constructor(){let t=k(xe);this.outsideAngular=t.runOutsideAngular(()=>new ng(typeof Zone>"u"?void 0:Zone.current)),this.insideAngular=t.run(()=>new ng(typeof Zone>"u"?void 0:Zone.current,Hv))}static \u0275fac=function(r){return new(r||n)};static \u0275prov=Q({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),dA=!1;function FB(n,e){!dA&&(uA>Ic.SILENT||Ky())&&(dA=!0,console.warn("Calling Firebase APIs outside of an Injection context may destabilize your application leading to subtle change-detection and hydration bugs. Find more at https://github.com/angular/angularfire/blob/main/docs/zones.md")),uA>=e&&console.warn(`Firebase API called outside injection context: ${n.name}`)}function LB(n){let e=k(xe,{optional:!0});return e?e.runOutsideAngular(()=>n()):n()}function qs(n){let e=k(xe,{optional:!0});return e?e.run(()=>n()):n()}var VB=(n,e,t)=>(...r)=>(e&&setTimeout(e,0),wt(t,()=>qs(()=>n.apply(void 0,r)))),ke=(n,e,t)=>(t||=e?Ic.WARN:Ic.VERBOSE,function(){let r,i=arguments,o,s,a;try{o=k(ai),s=k(Ya),a=k(mt)}catch{return FB(n,t),n.apply(this,i)}for(let u=0;u<arguments.length;u++)typeof i[u]=="function"&&(e&&(r||=qs(()=>s.add())),i[u]=VB(i[u],r,a));let c=LB(()=>n.apply(this,i));return e?c instanceof ge?c.pipe(so(o.outsideAngular),oo(o.insideAngular),lA(a)):c instanceof Promise?qs(()=>{let u=s.add();return new Promise((f,m)=>{c.then(_=>wt(a,()=>qs(()=>f(_))),_=>wt(a,()=>qs(()=>m(_)))).finally(u)})}):typeof c=="function"&&r?function(){return setTimeout(r,0),c.apply(this,arguments)}:qs(()=>c):c instanceof ge?c.pipe(so(o.outsideAngular),oo(o.insideAngular)):qs(()=>c)});var Rr=class{constructor(e){return e}},Li=class{constructor(){return tg()}};function UB(n){return n&&n.length===1?n[0]:new Rr(si())}var gw=new J("angularfire2._apps"),jB={provide:Rr,useFactory:UB,deps:[[new zt,gw]]},BB={provide:Li,deps:[[new zt,gw]]};function $B(n){return(e,t)=>{let r=t.get(Sr);Ne("angularfire",sr.full,"core"),Ne("angularfire",sr.full,"app"),Ne("angular",pM.full,r.toString());let i=e.runOutsideAngular(()=>n(t));return new Rr(i)}}function fA(n,...e){return nn([jB,BB,{provide:gw,useFactory:$B(n),multi:!0,deps:[xe,Qe,ai,...e]}])}var hA=ke(pw,!0);var HB=new Map,zB={activated:!1,tokenObservers:[]},qB={initialized:!1,enabled:!1};function Nr(n){return HB.get(n)||Object.assign({},zB)}function vA(){return qB}var WB="https://content-firebaseappcheck.googleapis.com/v1";var GB="exchangeDebugToken",pA={OFFSET_DURATION:300*1e3,RETRIAL_MIN_WAIT:30*1e3,RETRIAL_MAX_WAIT:960*1e3},Ape=1440*60*1e3;var _w=class{constructor(e,t,r,i,o){if(this.operation=e,this.retryPolicy=t,this.getWaitDuration=r,this.lowerBound=i,this.upperBound=o,this.pending=null,this.nextErrorWaitInterval=i,i>o)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(e){return y(this,null,function*(){this.stop();try{this.pending=new Hs,this.pending.promise.catch(t=>{}),yield KB(this.getNextRun(e)),this.pending.resolve(),yield this.pending.promise,this.pending=new Hs,this.pending.promise.catch(t=>{}),yield this.operation(),this.pending.resolve(),yield this.pending.promise,this.process(!0).catch(()=>{})}catch(t){this.retryPolicy(t)?this.process(!1).catch(()=>{}):this.stop()}})}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{let t=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),t}}};function KB(n){return new Promise(e=>{setTimeout(e,n)})}var YB={"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.","initial-throttle":"{$httpStatus} error. Attempts allowed again after {$time}",throttled:"Requests throttled due to previous {$httpStatus} error. Attempts allowed again after {$time}"},Fo=new _n("appCheck","AppCheck",YB);function _A(n){if(!Nr(n).activated)throw Fo.create("use-before-activation",{appName:n.name})}function yA(r,i){return y(this,arguments,function*({url:n,body:e},t){let o={"Content-Type":"application/json"},s=t.getImmediate({optional:!0});if(s){let E=yield s.getHeartbeatsHeader();E&&(o["X-Firebase-Client"]=E)}let a={method:"POST",body:JSON.stringify(e),headers:o},c;try{c=yield fetch(n,a)}catch(E){throw Fo.create("fetch-network-error",{originalErrorMessage:E?.message})}if(c.status!==200)throw Fo.create("fetch-status-error",{httpStatus:c.status});let u;try{u=yield c.json()}catch(E){throw Fo.create("fetch-parse-error",{originalErrorMessage:E?.message})}let f=u.ttl.match(/^([\d.]+)(s)$/);if(!f||!f[2]||isNaN(Number(f[1])))throw Fo.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${u.ttl}`});let m=Number(f[1])*1e3,_=Date.now();return{token:u.token,expireTimeMillis:_+m,issuedAtTimeMillis:_}})}function bA(n,e){let{projectId:t,appId:r,apiKey:i}=n.options;return{url:`${WB}/projects/${t}/apps/${r}:${GB}?key=${i}`,body:{debug_token:e}}}var QB="firebase-app-check-database",ZB=1,yw="firebase-app-check-store";var rg=null;function XB(){return rg||(rg=new Promise((n,e)=>{try{let t=indexedDB.open(QB,ZB);t.onsuccess=r=>{n(r.target.result)},t.onerror=r=>{var i;e(Fo.create("storage-open",{originalErrorMessage:(i=r.target.error)===null||i===void 0?void 0:i.message}))},t.onupgradeneeded=r=>{let i=r.target.result;switch(r.oldVersion){case 0:i.createObjectStore(yw,{keyPath:"compositeKey"})}}}catch(t){e(Fo.create("storage-open",{originalErrorMessage:t?.message}))}}),rg)}function JB(n,e){return e8(t8(n),e)}function e8(n,e){return y(this,null,function*(){let r=(yield XB()).transaction(yw,"readwrite"),o=r.objectStore(yw).put({compositeKey:n,value:e});return new Promise((s,a)=>{o.onsuccess=c=>{s()},r.onerror=c=>{var u;a(Fo.create("storage-set",{originalErrorMessage:(u=c.target.error)===null||u===void 0?void 0:u.message}))}})})}function t8(n){return`${n.options.appId}-${n.name}`}var Yu=new ir("@firebase/app-check");function mw(n,e){return ko()?JB(n,e).catch(t=>{Yu.warn(`Failed to write token to IndexedDB. Error: ${t}`)}):Promise.resolve()}function wA(){return vA().enabled}function EA(){return y(this,null,function*(){let n=vA();if(n.enabled&&n.token)return n.token.promise;throw Error(`
            Can't get debug token in production mode.
        `)})}var n8={error:"UNKNOWN_ERROR"};function r8(n){return Wp.encodeString(JSON.stringify(n),!1)}function bw(n,e=!1,t=!1){return y(this,null,function*(){let r=n.app;_A(r);let i=Nr(r),o=i.token,s;if(o&&!Qu(o)&&(i.token=void 0,o=void 0),!o){let u=yield i.cachedTokenPromise;u&&(Qu(u)?o=u:yield mw(r,void 0))}if(!e&&o&&Qu(o))return{token:o.token};let a=!1;if(wA())try{i.exchangeTokenPromise||(i.exchangeTokenPromise=yA(bA(r,yield EA()),n.heartbeatServiceProvider).finally(()=>{i.exchangeTokenPromise=void 0}),a=!0);let u=yield i.exchangeTokenPromise;return yield mw(r,u),i.token=u,{token:u.token}}catch(u){return u.code==="appCheck/throttled"||u.code==="appCheck/initial-throttle"?Yu.warn(u.message):t&&Yu.error(u),vw(u)}try{i.exchangeTokenPromise||(i.exchangeTokenPromise=i.provider.getToken().finally(()=>{i.exchangeTokenPromise=void 0}),a=!0),o=yield Nr(r).exchangeTokenPromise}catch(u){u.code==="appCheck/throttled"||u.code==="appCheck/initial-throttle"?Yu.warn(u.message):t&&Yu.error(u),s=u}let c;return o?s?Qu(o)?c={token:o.token,internalError:s}:c=vw(s):(c={token:o.token},i.token=o,yield mw(r,o)):c=vw(s),a&&a8(r,c),c})}function i8(n){return y(this,null,function*(){let e=n.app;_A(e);let{provider:t}=Nr(e);if(wA()){let r=yield EA(),{token:i}=yield yA(bA(e,r),n.heartbeatServiceProvider);return{token:i}}else{let{token:r}=yield t.getToken();return{token:r}}})}function o8(n,e,t,r){let{app:i}=n,o=Nr(i),s={next:t,error:r,type:e};if(o.tokenObservers=[...o.tokenObservers,s],o.token&&Qu(o.token)){let a=o.token;Promise.resolve().then(()=>{t({token:a.token}),gA(n)}).catch(()=>{})}o.cachedTokenPromise.then(()=>gA(n))}function CA(n,e){let t=Nr(n),r=t.tokenObservers.filter(i=>i.next!==e);r.length===0&&t.tokenRefresher&&t.tokenRefresher.isRunning()&&t.tokenRefresher.stop(),t.tokenObservers=r}function gA(n){let{app:e}=n,t=Nr(e),r=t.tokenRefresher;r||(r=s8(n),t.tokenRefresher=r),!r.isRunning()&&t.isTokenAutoRefreshEnabled&&r.start()}function s8(n){let{app:e}=n;return new _w(()=>y(null,null,function*(){let t=Nr(e),r;if(t.token?r=yield bw(n,!0):r=yield bw(n),r.error)throw r.error;if(r.internalError)throw r.internalError}),()=>!0,()=>{let t=Nr(e);if(t.token){let r=t.token.issuedAtTimeMillis+(t.token.expireTimeMillis-t.token.issuedAtTimeMillis)*.5+3e5,i=t.token.expireTimeMillis-300*1e3;return r=Math.min(r,i),Math.max(0,r-Date.now())}else return 0},pA.RETRIAL_MIN_WAIT,pA.RETRIAL_MAX_WAIT)}function a8(n,e){let t=Nr(n).tokenObservers;for(let r of t)try{r.type==="EXTERNAL"&&e.error!=null?r.error(e.error):r.next(e)}catch{}}function Qu(n){return n.expireTimeMillis-Date.now()>0}function vw(n){return{token:r8(n8),error:n}}var ww=class{constructor(e,t){this.app=e,this.heartbeatServiceProvider=t}_delete(){let{tokenObservers:e}=Nr(this.app);for(let t of e)CA(this.app,t.next);return Promise.resolve()}};function c8(n,e){return new ww(n,e)}function l8(n){return{getToken:e=>bw(n,e),getLimitedUseToken:()=>i8(n),addTokenListener:e=>o8(n,"INTERNAL",e),removeTokenListener:e=>CA(n.app,e)}}var u8="@firebase/app-check",d8="0.10.1";var f8="app-check",mA="app-check-internal";function h8(){Kt(new _t(f8,n=>{let e=n.getProvider("app").getImmediate(),t=n.getProvider("heartbeat");return c8(e,t)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((n,e,t)=>{n.getProvider(mA).initialize()})),Kt(new _t(mA,n=>{let e=n.getProvider("app-check").getImmediate();return l8(e)},"PUBLIC").setInstantiationMode("EXPLICIT")),Ne(u8,d8)}h8();var p8="app-check";var Sc=class{constructor(){return No(p8)}};var g8=["localhost","0.0.0.0","127.0.0.1"],zpe=typeof window<"u"&&g8.includes(window.location.hostname);function UA(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}var jA=UA,BA=new _n("auth","Firebase",UA());var lg=new ir("@firebase/auth");function m8(n,...e){lg.logLevel<=De.WARN&&lg.warn(`Auth (${Ro}): ${n}`,...e)}function og(n,...e){lg.logLevel<=De.ERROR&&lg.error(`Auth (${Ro}): ${n}`,...e)}function ar(n,...e){throw zw(n,...e)}function Fr(n,...e){return zw(n,...e)}function Hw(n,e,t){let r=Object.assign(Object.assign({},jA()),{[e]:t});return new _n("auth","Firebase",r).create(e,{appName:n.name})}function ji(n){return Hw(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function v8(n,e,t){let r=t;if(!(e instanceof r))throw r.name!==e.constructor.name&&ar(n,"argument-error"),Hw(n,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function zw(n,...e){if(typeof n!="string"){let t=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=n.name),n._errorFactory.create(t,...r)}return BA.create(n,...e)}function de(n,e,...t){if(!n)throw zw(e,...t)}function Vi(n){let e="INTERNAL ASSERTION FAILED: "+n;throw og(e),new Error(e)}function Bi(n,e){n||Vi(e)}function Iw(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.href)||""}function _8(){return IA()==="http:"||IA()==="https:"}function IA(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.protocol)||null}function y8(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(_8()||qu()||"connection"in navigator)?navigator.onLine:!0}function b8(){if(typeof navigator>"u")return null;let n=navigator;return n.languages&&n.languages[0]||n.language||null}var Gs=class{constructor(e,t){this.shortDelay=e,this.longDelay=t,Bi(t>e,"Short delay should be less than long delay!"),this.isMobile=HP()||qP()}get(){return y8()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}};function qw(n,e){Bi(n.emulator,"Emulator should always be set here");let{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}var ug=class{static initialize(e,t,r){this.fetchImpl=e,t&&(this.headersImpl=t),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Vi("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Vi("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Vi("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}};var w8={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};var E8=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],C8=new Gs(3e4,6e4);function Uo(n,e){return n.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:n.tenantId}):e}function jo(o,s,a,c){return y(this,arguments,function*(n,e,t,r,i={}){return $A(n,i,()=>y(null,null,function*(){let u={},f={};r&&(e==="GET"?f=r:u={body:JSON.stringify(r)});let m=wc(Object.assign({key:n.config.apiKey},f)).slice(1),_=yield n._getAdditionalHeaders();_["Content-Type"]="application/json",n.languageCode&&(_["X-Firebase-Locale"]=n.languageCode);let E=Object.assign({method:e,headers:_},u);return zP()||(E.referrerPolicy="no-referrer"),n.emulatorConfig&&Ao(n.emulatorConfig.host)&&(E.credentials="include"),ug.fetch()(yield HA(n,n.config.apiHost,t,m),E)}))})}function $A(n,e,t){return y(this,null,function*(){n._canInitEmulator=!1;let r=Object.assign(Object.assign({},w8),e);try{let i=new Sw(n),o=yield Promise.race([t(),i.promise]);i.clearNetworkTimeout();let s=yield o.json();if("needConfirmation"in s)throw ig(n,"account-exists-with-different-credential",s);if(o.ok&&!("errorMessage"in s))return s;{let a=o.ok?s.errorMessage:s.error.message,[c,u]=a.split(" : ");if(c==="FEDERATED_USER_ID_ALREADY_LINKED")throw ig(n,"credential-already-in-use",s);if(c==="EMAIL_EXISTS")throw ig(n,"email-already-in-use",s);if(c==="USER_DISABLED")throw ig(n,"user-disabled",s);let f=r[c]||c.toLowerCase().replace(/[_\s]+/g,"-");if(u)throw Hw(n,f,u);ar(n,f)}}catch(i){if(i instanceof Gt)throw i;ar(n,"network-request-failed",{message:String(i)})}})}function od(o,s,a,c){return y(this,arguments,function*(n,e,t,r,i={}){let u=yield jo(n,e,t,r,i);return"mfaPendingCredential"in u&&ar(n,"multi-factor-auth-required",{_serverResponse:u}),u})}function HA(n,e,t,r){return y(this,null,function*(){let i=`${e}${t}?${r}`,o=n,s=o.config.emulator?qw(n.config,i):`${n.config.apiScheme}://${i}`;return E8.includes(t)&&(yield o._persistenceManagerAvailable,o._getPersistenceType()==="COOKIE")?o._getPersistence()._getFinalTarget(s).toString():s})}function I8(n){switch(n){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}var Sw=class{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,r)=>{this.timer=setTimeout(()=>r(Fr(this.auth,"network-request-failed")),C8.get())})}};function ig(n,e,t){let r={appName:n.name};t.email&&(r.email=t.email),t.phoneNumber&&(r.phoneNumber=t.phoneNumber);let i=Fr(n,e,r);return i.customData._tokenResponse=t,i}function SA(n){return n!==void 0&&n.enterprise!==void 0}var Tw=class{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(let t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return I8(t.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}};function S8(n,e){return y(this,null,function*(){return jo(n,"GET","/v2/recaptchaConfig",Uo(n,e))})}function T8(n,e){return y(this,null,function*(){return jo(n,"POST","/v1/accounts:delete",e)})}function dg(n,e){return y(this,null,function*(){return jo(n,"POST","/v1/accounts:lookup",e)})}function Xu(n){if(n)try{let e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}function Ww(n,e=!1){return y(this,null,function*(){let t=ze(n),r=yield t.getIdToken(e),i=Gw(r);de(i&&i.exp&&i.auth_time&&i.iat,t.auth,"internal-error");let o=typeof i.firebase=="object"?i.firebase:void 0,s=o?.sign_in_provider;return{claims:i,token:r,authTime:Xu(Ew(i.auth_time)),issuedAtTime:Xu(Ew(i.iat)),expirationTime:Xu(Ew(i.exp)),signInProvider:s||null,signInSecondFactor:o?.sign_in_second_factor||null}})}function Ew(n){return Number(n)*1e3}function Gw(n){let[e,t,r]=n.split(".");if(e===void 0||t===void 0||r===void 0)return og("JWT malformed, contained fewer than 3 sections"),null;try{let i=Gp(t);return i?JSON.parse(i):(og("Failed to decode base64 JWT payload"),null)}catch(i){return og("Caught error parsing JWT payload as JSON",i?.toString()),null}}function TA(n){let e=Gw(n);return de(e,"internal-error"),de(typeof e.exp<"u","internal-error"),de(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}function ed(n,e,t=!1){return y(this,null,function*(){if(t)return e;try{return yield e}catch(r){throw r instanceof Gt&&D8(r)&&n.auth.currentUser===n&&(yield n.auth.signOut()),r}})}function D8({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}var Dw=class{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){let r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;let i=((t=this.user.stsTokenManager.expirationTime)!==null&&t!==void 0?t:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;let t=this.getInterval(e);this.timerId=setTimeout(()=>y(this,null,function*(){yield this.iteration()}),t)}iteration(){return y(this,null,function*(){try{yield this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()})}};var td=class{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=Xu(this.lastLoginAt),this.creationTime=Xu(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}};function fg(n){return y(this,null,function*(){var e;let t=n.auth,r=yield n.getIdToken(),i=yield ed(n,dg(t,{idToken:r}));de(i?.users.length,t,"internal-error");let o=i.users[0];n._notifyReloadListener(o);let s=!((e=o.providerUserInfo)===null||e===void 0)&&e.length?zA(o.providerUserInfo):[],a=x8(n.providerData,s),c=n.isAnonymous,u=!(n.email&&o.passwordHash)&&!a?.length,f=c?u:!1,m={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:a,metadata:new td(o.createdAt,o.lastLoginAt),isAnonymous:f};Object.assign(n,m)})}function Kw(n){return y(this,null,function*(){let e=ze(n);yield fg(e),yield e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)})}function x8(n,e){return[...n.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function zA(n){return n.map(e=>{var{providerId:t}=e,r=Pf(e,["providerId"]);return{providerId:t,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}function M8(n,e){return y(this,null,function*(){let t=yield $A(n,{},()=>y(null,null,function*(){let r=wc({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:o}=n.config,s=yield HA(n,i,"/v1/token",`key=${o}`),a=yield n._getAdditionalHeaders();a["Content-Type"]="application/x-www-form-urlencoded";let c={method:"POST",headers:a,body:r};return n.emulatorConfig&&Ao(n.emulatorConfig.host)&&(c.credentials="include"),ug.fetch()(s,c)}));return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}})}function P8(n,e){return y(this,null,function*(){return jo(n,"POST","/v2/accounts:revokeToken",Uo(n,e))})}var Ju=class n{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){de(e.idToken,"internal-error"),de(typeof e.idToken<"u","internal-error"),de(typeof e.refreshToken<"u","internal-error");let t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):TA(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){de(e.length!==0,"internal-error");let t=TA(e);this.updateTokensAndExpiration(e,null,t)}getToken(e,t=!1){return y(this,null,function*(){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(de(this.refreshToken,e,"user-token-expired"),this.refreshToken?(yield this.refresh(e,this.refreshToken),this.accessToken):null)})}clearRefreshToken(){this.refreshToken=null}refresh(e,t){return y(this,null,function*(){let{accessToken:r,refreshToken:i,expiresIn:o}=yield M8(e,t);this.updateTokensAndExpiration(r,i,Number(o))})}updateTokensAndExpiration(e,t,r){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,t){let{refreshToken:r,accessToken:i,expirationTime:o}=t,s=new n;return r&&(de(typeof r=="string","internal-error",{appName:e}),s.refreshToken=r),i&&(de(typeof i=="string","internal-error",{appName:e}),s.accessToken=i),o&&(de(typeof o=="number","internal-error",{appName:e}),s.expirationTime=o),s}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new n,this.toJSON())}_performRefresh(){return Vi("not implemented")}};function Lo(n,e){de(typeof n=="string"||typeof n>"u","internal-error",{appName:e})}var Vo=class n{constructor(e){var{uid:t,auth:r,stsTokenManager:i}=e,o=Pf(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Dw(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=o.displayName||null,this.email=o.email||null,this.emailVerified=o.emailVerified||!1,this.phoneNumber=o.phoneNumber||null,this.photoURL=o.photoURL||null,this.isAnonymous=o.isAnonymous||!1,this.tenantId=o.tenantId||null,this.providerData=o.providerData?[...o.providerData]:[],this.metadata=new td(o.createdAt||void 0,o.lastLoginAt||void 0)}getIdToken(e){return y(this,null,function*(){let t=yield ed(this,this.stsTokenManager.getToken(this.auth,e));return de(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,yield this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t})}getIdTokenResult(e){return Ww(this,e)}reload(){return Kw(this)}_assign(e){this!==e&&(de(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>Object.assign({},t)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){let t=new n(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){de(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(e,t=!1){return y(this,null,function*(){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),t&&(yield fg(this)),yield this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)})}delete(){return y(this,null,function*(){if(yn(this.auth.app))return Promise.reject(ji(this.auth));let e=yield this.getIdToken();return yield ed(this,T8(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()})}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var r,i,o,s,a,c,u,f;let m=(r=t.displayName)!==null&&r!==void 0?r:void 0,_=(i=t.email)!==null&&i!==void 0?i:void 0,E=(o=t.phoneNumber)!==null&&o!==void 0?o:void 0,x=(s=t.photoURL)!==null&&s!==void 0?s:void 0,V=(a=t.tenantId)!==null&&a!==void 0?a:void 0,U=(c=t._redirectEventId)!==null&&c!==void 0?c:void 0,W=(u=t.createdAt)!==null&&u!==void 0?u:void 0,oe=(f=t.lastLoginAt)!==null&&f!==void 0?f:void 0,{uid:fe,emailVerified:Fe,isAnonymous:At,providerData:$e,stsTokenManager:P}=t;de(fe&&P,e,"internal-error");let S=Ju.fromJSON(this.name,P);de(typeof fe=="string",e,"internal-error"),Lo(m,e.name),Lo(_,e.name),de(typeof Fe=="boolean",e,"internal-error"),de(typeof At=="boolean",e,"internal-error"),Lo(E,e.name),Lo(x,e.name),Lo(V,e.name),Lo(U,e.name),Lo(W,e.name),Lo(oe,e.name);let D=new n({uid:fe,auth:e,email:_,emailVerified:Fe,displayName:m,isAnonymous:At,photoURL:x,phoneNumber:E,tenantId:V,stsTokenManager:S,createdAt:W,lastLoginAt:oe});return $e&&Array.isArray($e)&&(D.providerData=$e.map(M=>Object.assign({},M))),U&&(D._redirectEventId=U),D}static _fromIdTokenResponse(e,t,r=!1){return y(this,null,function*(){let i=new Ju;i.updateFromServerResponse(t);let o=new n({uid:t.localId,auth:e,stsTokenManager:i,isAnonymous:r});return yield fg(o),o})}static _fromGetAccountInfoResponse(e,t,r){return y(this,null,function*(){let i=t.users[0];de(i.localId!==void 0,"internal-error");let o=i.providerUserInfo!==void 0?zA(i.providerUserInfo):[],s=!(i.email&&i.passwordHash)&&!o?.length,a=new Ju;a.updateFromIdToken(r);let c=new n({uid:i.localId,auth:e,stsTokenManager:a,isAnonymous:s}),u={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:o,metadata:new td(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!o?.length};return Object.assign(c,u),c})}};var DA=new Map;function Ui(n){Bi(n instanceof Function,"Expected a class definition");let e=DA.get(n);return e?(Bi(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,DA.set(n,e),e)}var A8=(()=>{class n{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return y(this,null,function*(){return!0})}_set(t,r){return y(this,null,function*(){this.storage[t]=r})}_get(t){return y(this,null,function*(){let r=this.storage[t];return r===void 0?null:r})}_remove(t){return y(this,null,function*(){delete this.storage[t]})}_addListener(t,r){}_removeListener(t,r){}}return n.type="NONE",n})(),xw=A8;function sg(n,e,t){return`firebase:${n}:${e}:${t}`}var hg=class n{constructor(e,t,r){this.persistence=e,this.auth=t,this.userKey=r;let{config:i,name:o}=this.auth;this.fullUserKey=sg(this.userKey,i.apiKey,o),this.fullPersistenceKey=sg("persistence",i.apiKey,o),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}getCurrentUser(){return y(this,null,function*(){let e=yield this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){let t=yield dg(this.auth,{idToken:e}).catch(()=>{});return t?Vo._fromGetAccountInfoResponse(this.auth,t,e):null}return Vo._fromJSON(this.auth,e)})}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(e){return y(this,null,function*(){if(this.persistence===e)return;let t=yield this.getCurrentUser();if(yield this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)})}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(e,t,r="authUser"){return y(this,null,function*(){if(!t.length)return new n(Ui(xw),e,r);let i=(yield Promise.all(t.map(u=>y(null,null,function*(){if(yield u._isAvailable())return u})))).filter(u=>u),o=i[0]||Ui(xw),s=sg(r,e.config.apiKey,e.name),a=null;for(let u of t)try{let f=yield u._get(s);if(f){let m;if(typeof f=="string"){let _=yield dg(e,{idToken:f}).catch(()=>{});if(!_)break;m=yield Vo._fromGetAccountInfoResponse(e,_,f)}else m=Vo._fromJSON(e,f);u!==o&&(a=m),o=u;break}}catch{}let c=i.filter(u=>u._shouldAllowMigration);return!o._shouldAllowMigration||!c.length?new n(o,e,r):(o=c[0],a&&(yield o._set(s,a.toJSON())),yield Promise.all(t.map(u=>y(null,null,function*(){if(u!==o)try{yield u._remove(s)}catch{}}))),new n(o,e,r))})}};function xA(n){let e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(KA(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(qA(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(QA(e))return"Blackberry";if(ZA(e))return"Webos";if(WA(e))return"Safari";if((e.includes("chrome/")||GA(e))&&!e.includes("edge/"))return"Chrome";if(YA(e))return"Android";{let t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=n.match(t);if(r?.length===2)return r[1]}return"Other"}function qA(n=Vt()){return/firefox\//i.test(n)}function WA(n=Vt()){let e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function GA(n=Vt()){return/crios\//i.test(n)}function KA(n=Vt()){return/iemobile/i.test(n)}function YA(n=Vt()){return/android/i.test(n)}function QA(n=Vt()){return/blackberry/i.test(n)}function ZA(n=Vt()){return/webos/i.test(n)}function Yw(n=Vt()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function k8(n=Vt()){var e;return Yw(n)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function O8(){return WP()&&document.documentMode===10}function XA(n=Vt()){return Yw(n)||YA(n)||ZA(n)||QA(n)||/windows phone/i.test(n)||KA(n)}function JA(n,e=[]){let t;switch(n){case"Browser":t=xA(Vt());break;case"Worker":t=`${xA(Vt())}-${n}`;break;default:t=n}let r=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${Ro}/${r}`}var Mw=class{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){let r=o=>new Promise((s,a)=>{try{let c=e(o);s(c)}catch(c){a(c)}});r.onAbort=t,this.queue.push(r);let i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}runMiddleware(e){return y(this,null,function*(){if(this.auth.currentUser===e)return;let t=[];try{for(let r of this.queue)yield r(e),r.onAbort&&t.push(r.onAbort)}catch(r){t.reverse();for(let i of t)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r?.message})}})}};function R8(t){return y(this,arguments,function*(n,e={}){return jo(n,"GET","/v2/passwordPolicy",Uo(n,e))})}var N8=6,Pw=class{constructor(e){var t,r,i,o;let s=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(t=s.minPasswordLength)!==null&&t!==void 0?t:N8,s.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=s.maxPasswordLength),s.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=s.containsLowercaseCharacter),s.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=s.containsUppercaseCharacter),s.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=s.containsNumericCharacter),s.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=s.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(i=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&i!==void 0?i:"",this.forceUpgradeOnSignin=(o=e.forceUpgradeOnSignin)!==null&&o!==void 0?o:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,r,i,o,s,a;let c={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,c),this.validatePasswordCharacterOptions(e,c),c.isValid&&(c.isValid=(t=c.meetsMinPasswordLength)!==null&&t!==void 0?t:!0),c.isValid&&(c.isValid=(r=c.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),c.isValid&&(c.isValid=(i=c.containsLowercaseLetter)!==null&&i!==void 0?i:!0),c.isValid&&(c.isValid=(o=c.containsUppercaseLetter)!==null&&o!==void 0?o:!0),c.isValid&&(c.isValid=(s=c.containsNumericCharacter)!==null&&s!==void 0?s:!0),c.isValid&&(c.isValid=(a=c.containsNonAlphanumericCharacter)!==null&&a!==void 0?a:!0),c}validatePasswordLengthOptions(e,t){let r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(t.meetsMinPasswordLength=e.length>=r),i&&(t.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(t,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,t,r,i,o){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=o))}};var Aw=class{constructor(e,t,r,i){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new pg(this),this.idTokenSubscription=new pg(this),this.beforeStateQueue=new Mw(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=BA,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion,this._persistenceManagerAvailable=new Promise(o=>this._resolvePersistenceManagerAvailable=o)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=Ui(t)),this._initializationPromise=this.queue(()=>y(this,null,function*(){var r,i,o;if(!this._deleted&&(this.persistenceManager=yield hg.create(this,e),(r=this._resolvePersistenceManagerAvailable)===null||r===void 0||r.call(this),!this._deleted)){if(!((i=this._popupRedirectResolver)===null||i===void 0)&&i._shouldInitProactively)try{yield this._popupRedirectResolver._initialize(this)}catch{}yield this.initializeCurrentUser(t),this.lastNotifiedUid=((o=this.currentUser)===null||o===void 0?void 0:o.uid)||null,!this._deleted&&(this._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){return y(this,null,function*(){if(this._deleted)return;let e=yield this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),yield this.currentUser.getIdToken();return}yield this._updateCurrentUser(e,!0)}})}initializeCurrentUserFromIdToken(e){return y(this,null,function*(){try{let t=yield dg(this,{idToken:e}),r=yield Vo._fromGetAccountInfoResponse(this,t,e);yield this.directlySetCurrentUser(r)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),yield this.directlySetCurrentUser(null)}})}initializeCurrentUser(e){return y(this,null,function*(){var t;if(yn(this.app)){let s=this.app.settings.authIdToken;return s?new Promise(a=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(s).then(a,a))}):this.directlySetCurrentUser(null)}let r=yield this.assertedPersistence.getCurrentUser(),i=r,o=!1;if(e&&this.config.authDomain){yield this.getOrInitRedirectPersistenceManager();let s=(t=this.redirectUser)===null||t===void 0?void 0:t._redirectEventId,a=i?._redirectEventId,c=yield this.tryRedirectSignIn(e);(!s||s===a)&&c?.user&&(i=c.user,o=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(o)try{yield this.beforeStateQueue.runMiddleware(i)}catch(s){i=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(s))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return de(this._popupRedirectResolver,this,"argument-error"),yield this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)})}tryRedirectSignIn(e){return y(this,null,function*(){let t=null;try{t=yield this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{yield this._setRedirectUser(null)}return t})}reloadAndSetCurrentUserOrClear(e){return y(this,null,function*(){try{yield fg(e)}catch(t){if(t?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)})}useDeviceLanguage(){this.languageCode=b8()}_delete(){return y(this,null,function*(){this._deleted=!0})}updateCurrentUser(e){return y(this,null,function*(){if(yn(this.app))return Promise.reject(ji(this));let t=e?ze(e):null;return t&&de(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))})}_updateCurrentUser(e,t=!1){return y(this,null,function*(){if(!this._deleted)return e&&de(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||(yield this.beforeStateQueue.runMiddleware(e)),this.queue(()=>y(this,null,function*(){yield this.directlySetCurrentUser(e),this.notifyAuthListeners()}))})}signOut(){return y(this,null,function*(){return yn(this.app)?Promise.reject(ji(this)):(yield this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&(yield this._setRedirectUser(null)),this._updateCurrentUser(null,!0))})}setPersistence(e){return yn(this.app)?Promise.reject(ji(this)):this.queue(()=>y(this,null,function*(){yield this.assertedPersistence.setPersistence(Ui(e))}))}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}validatePassword(e){return y(this,null,function*(){this._getPasswordPolicyInternal()||(yield this._updatePasswordPolicy());let t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)})}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}_updatePasswordPolicy(){return y(this,null,function*(){let e=yield R8(this),t=new Pw(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t})}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new _n("auth","Firebase",e())}onAuthStateChanged(e,t,r){return this.registerStateListener(this.authStateSubscription,e,t,r)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,r){return this.registerStateListener(this.idTokenSubscription,e,t,r)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{let r=this.onAuthStateChanged(()=>{r(),e()},t)}})}revokeAccessToken(e){return y(this,null,function*(){if(this.currentUser){let t=yield this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(r.tenantId=this.tenantId),yield P8(this,r)}})}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}_setRedirectUser(e,t){return y(this,null,function*(){let r=yield this.getOrInitRedirectPersistenceManager(t);return e===null?r.removeCurrentUser():r.setCurrentUser(e)})}getOrInitRedirectPersistenceManager(e){return y(this,null,function*(){if(!this.redirectPersistenceManager){let t=e&&Ui(e)||this._popupRedirectResolver;de(t,this,"argument-error"),this.redirectPersistenceManager=yield hg.create(this,[Ui(t._redirectPersistence)],"redirectUser"),this.redirectUser=yield this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager})}_redirectUserForId(e){return y(this,null,function*(){var t,r;return this._isInitialized&&(yield this.queue(()=>y(this,null,function*(){}))),((t=this._currentUser)===null||t===void 0?void 0:t._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null})}_persistUserIfCurrent(e){return y(this,null,function*(){if(e===this.currentUser)return this.queue(()=>y(this,null,function*(){return this.directlySetCurrentUser(e)}))})}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);let r=(t=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&t!==void 0?t:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,r,i){if(this._deleted)return()=>{};let o=typeof t=="function"?t:t.next.bind(t),s=!1,a=this._isInitialized?Promise.resolve():this._initializationPromise;if(de(a,this,"internal-error"),a.then(()=>{s||o(this.currentUser)}),typeof t=="function"){let c=e.addObserver(t,r,i);return()=>{s=!0,c()}}else{let c=e.addObserver(t);return()=>{s=!0,c()}}}directlySetCurrentUser(e){return y(this,null,function*(){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?yield this.assertedPersistence.setCurrentUser(e):yield this.assertedPersistence.removeCurrentUser()})}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return de(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=JA(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){return y(this,null,function*(){var e;let t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);let r=yield(e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader();r&&(t["X-Firebase-Client"]=r);let i=yield this._getAppCheckToken();return i&&(t["X-Firebase-AppCheck"]=i),t})}_getAppCheckToken(){return y(this,null,function*(){var e;if(yn(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;let t=yield(e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken();return t?.error&&m8(`Error while retrieving App Check token: ${t.error}`),t?.token})}};function Bo(n){return ze(n)}var pg=class{constructor(e){this.auth=e,this.observer=null,this.addObserver=YP(t=>this.observer=t)}get next(){return de(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}};var Cg={loadJS(){return y(this,null,function*(){throw new Error("Unable to load external scripts")})},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function F8(n){Cg=n}function ek(n){return Cg.loadJS(n)}function L8(){return Cg.recaptchaEnterpriseScript}function V8(){return Cg.gapiScript}function tk(n){return`__${n}${Math.floor(Math.random()*1e6)}`}var kw=class{constructor(){this.enterprise=new Ow}ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}},Ow=class{ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}};var U8="recaptcha-enterprise",nk="NO_RECAPTCHA",Rw=class{constructor(e){this.type=U8,this.auth=Bo(e)}verify(e="verify",t=!1){return y(this,null,function*(){function r(o){return y(this,null,function*(){if(!t){if(o.tenantId==null&&o._agentRecaptchaConfig!=null)return o._agentRecaptchaConfig.siteKey;if(o.tenantId!=null&&o._tenantRecaptchaConfigs[o.tenantId]!==void 0)return o._tenantRecaptchaConfigs[o.tenantId].siteKey}return new Promise((s,a)=>y(null,null,function*(){S8(o,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(c=>{if(c.recaptchaKey===void 0)a(new Error("recaptcha Enterprise site key undefined"));else{let u=new Tw(c);return o.tenantId==null?o._agentRecaptchaConfig=u:o._tenantRecaptchaConfigs[o.tenantId]=u,s(u.siteKey)}}).catch(c=>{a(c)})}))})}function i(o,s,a){let c=window.grecaptcha;SA(c)?c.enterprise.ready(()=>{c.enterprise.execute(o,{action:e}).then(u=>{s(u)}).catch(()=>{s(nk)})}):a(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new kw().execute("siteKey",{action:"verify"}):new Promise((o,s)=>{r(this.auth).then(a=>{if(!t&&SA(window.grecaptcha))i(a,o,s);else{if(typeof window>"u"){s(new Error("RecaptchaVerifier is only supported in browser"));return}let c=L8();c.length!==0&&(c+=a),ek(c).then(()=>{i(a,o,s)}).catch(u=>{s(u)})}}).catch(a=>{s(a)})})})}};function Zu(n,e,t,r=!1,i=!1){return y(this,null,function*(){let o=new Rw(n),s;if(i)s=nk;else try{s=yield o.verify(t)}catch{s=yield o.verify(t,!0)}let a=Object.assign({},e);if(t==="mfaSmsEnrollment"||t==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in a){let c=a.phoneEnrollmentInfo.phoneNumber,u=a.phoneEnrollmentInfo.recaptchaToken;Object.assign(a,{phoneEnrollmentInfo:{phoneNumber:c,recaptchaToken:u,captchaResponse:s,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in a){let c=a.phoneSignInInfo.recaptchaToken;Object.assign(a,{phoneSignInInfo:{recaptchaToken:c,captchaResponse:s,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return a}return r?Object.assign(a,{captchaResp:s}):Object.assign(a,{captchaResponse:s}),Object.assign(a,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(a,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),a})}function Nw(n,e,t,r,i){return y(this,null,function*(){var o,s;if(i==="EMAIL_PASSWORD_PROVIDER")if(!((o=n._getRecaptchaConfig())===null||o===void 0)&&o.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){let a=yield Zu(n,e,t,t==="getOobCode");return r(n,a)}else return r(n,e).catch(a=>y(null,null,function*(){if(a.code==="auth/missing-recaptcha-token"){console.log(`${t} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);let c=yield Zu(n,e,t,t==="getOobCode");return r(n,c)}else return Promise.reject(a)}));else if(i==="PHONE_PROVIDER")if(!((s=n._getRecaptchaConfig())===null||s===void 0)&&s.isProviderEnabled("PHONE_PROVIDER")){let a=yield Zu(n,e,t);return r(n,a).catch(c=>y(null,null,function*(){var u;if(((u=n._getRecaptchaConfig())===null||u===void 0?void 0:u.getProviderEnforcementState("PHONE_PROVIDER"))==="AUDIT"&&(c.code==="auth/missing-recaptcha-token"||c.code==="auth/invalid-app-credential")){console.log(`Failed to verify with reCAPTCHA Enterprise. Automatically triggering the reCAPTCHA v2 flow to complete the ${t} flow.`);let f=yield Zu(n,e,t,!1,!0);return r(n,f)}return Promise.reject(c)}))}else{let a=yield Zu(n,e,t,!1,!0);return r(n,a)}else return Promise.reject(i+" provider is not supported.")})}function Qw(n,e){let t=or(n,"auth");if(t.isInitialized()){let i=t.getImmediate(),o=t.getOptions();if(rr(o,e??{}))return i;ar(i,"already-initialized")}return t.initialize({options:e})}function j8(n,e){let t=e?.persistence||[],r=(Array.isArray(t)?t:[t]).map(Ui);e?.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(r,e?.popupRedirectResolver)}function Zw(n,e,t){let r=Bo(n);de(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");let i=!!t?.disableWarnings,o=rk(e),{host:s,port:a}=B8(e),c=a===null?"":`:${a}`,u={url:`${o}//${s}${c}/`},f=Object.freeze({host:s,port:a,protocol:o.replace(":",""),options:Object.freeze({disableWarnings:i})});if(!r._canInitEmulator){de(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),de(rr(u,r.config.emulator)&&rr(f,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=u,r.emulatorConfig=f,r.settings.appVerificationDisabledForTesting=!0,Ao(s)?(Yp(`${o}//${s}${c}`),Qp("Auth",!0)):i||$8()}function rk(n){let e=n.indexOf(":");return e<0?"":n.substr(0,e+1)}function B8(n){let e=rk(n),t=/(\/\/)?([^?#/]+)/.exec(n.substr(e.length));if(!t)return{host:"",port:null};let r=t[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){let o=i[1];return{host:o,port:MA(r.substr(o.length+1))}}else{let[o,s]=r.split(":");return{host:o,port:MA(s)}}}function MA(n){if(!n)return null;let e=Number(n);return isNaN(e)?null:e}function $8(){function n(){let e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",n):n())}var Dc=class{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return Vi("not implemented")}_getIdTokenResponse(e){return Vi("not implemented")}_linkToIdToken(e,t){return Vi("not implemented")}_getReauthenticationResolver(e){return Vi("not implemented")}};function H8(n,e){return y(this,null,function*(){return jo(n,"POST","/v1/accounts:signUp",e)})}function z8(n,e){return y(this,null,function*(){return od(n,"POST","/v1/accounts:signInWithPassword",Uo(n,e))})}function q8(n,e){return y(this,null,function*(){return od(n,"POST","/v1/accounts:signInWithEmailLink",Uo(n,e))})}function W8(n,e){return y(this,null,function*(){return od(n,"POST","/v1/accounts:signInWithEmailLink",Uo(n,e))})}var nd=class n extends Dc{constructor(e,t,r,i=null){super("password",r),this._email=e,this._password=t,this._tenantId=i}static _fromEmailAndPassword(e,t){return new n(e,t,"password")}static _fromEmailAndCode(e,t,r=null){return new n(e,t,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){let t=typeof e=="string"?JSON.parse(e):e;if(t?.email&&t?.password){if(t.signInMethod==="password")return this._fromEmailAndPassword(t.email,t.password);if(t.signInMethod==="emailLink")return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}_getIdTokenResponse(e){return y(this,null,function*(){switch(this.signInMethod){case"password":let t={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Nw(e,t,"signInWithPassword",z8,"EMAIL_PASSWORD_PROVIDER");case"emailLink":return q8(e,{email:this._email,oobCode:this._password});default:ar(e,"internal-error")}})}_linkToIdToken(e,t){return y(this,null,function*(){switch(this.signInMethod){case"password":let r={idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Nw(e,r,"signUpPassword",H8,"EMAIL_PASSWORD_PROVIDER");case"emailLink":return W8(e,{idToken:t,email:this._email,oobCode:this._password});default:ar(e,"internal-error")}})}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}};function Tc(n,e){return y(this,null,function*(){return od(n,"POST","/v1/accounts:signInWithIdp",Uo(n,e))})}var G8="http://localhost",gg=class n extends Dc{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){let t=new n(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):ar("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){let t=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:i}=t,o=Pf(t,["providerId","signInMethod"]);if(!r||!i)return null;let s=new n(r,i);return s.idToken=o.idToken||void 0,s.accessToken=o.accessToken||void 0,s.secret=o.secret,s.nonce=o.nonce,s.pendingToken=o.pendingToken||null,s}_getIdTokenResponse(e){let t=this.buildRequest();return Tc(e,t)}_linkToIdToken(e,t){let r=this.buildRequest();return r.idToken=t,Tc(e,r)}_getReauthenticationResolver(e){let t=this.buildRequest();return t.autoCreate=!1,Tc(e,t)}buildRequest(){let e={requestUri:G8,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{let t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=wc(t)}return e}};function K8(n){switch(n){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function Y8(n){let e=Ec(Cc(n)).link,t=e?Ec(Cc(e)).deep_link_id:null,r=Ec(Cc(n)).deep_link_id;return(r?Ec(Cc(r)).link:null)||r||t||e||n}var mg=class n{constructor(e){var t,r,i,o,s,a;let c=Ec(Cc(e)),u=(t=c.apiKey)!==null&&t!==void 0?t:null,f=(r=c.oobCode)!==null&&r!==void 0?r:null,m=K8((i=c.mode)!==null&&i!==void 0?i:null);de(u&&f&&m,"argument-error"),this.apiKey=u,this.operation=m,this.code=f,this.continueUrl=(o=c.continueUrl)!==null&&o!==void 0?o:null,this.languageCode=(s=c.lang)!==null&&s!==void 0?s:null,this.tenantId=(a=c.tenantId)!==null&&a!==void 0?a:null}static parseLink(e){let t=Y8(e);try{return new n(t)}catch{return null}}};var ik=(()=>{class n{constructor(){this.providerId=n.PROVIDER_ID}static credential(t,r){return nd._fromEmailAndPassword(t,r)}static credentialWithLink(t,r){let i=mg.parseLink(r);return de(i,"argument-error"),nd._fromEmailAndCode(t,i.code,i.tenantId)}}n.PROVIDER_ID="password",n.EMAIL_PASSWORD_SIGN_IN_METHOD="password",n.EMAIL_LINK_SIGN_IN_METHOD="emailLink";return n})(),rd=class{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}};var vg=class extends rd{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}};var Xw=(()=>{class n extends vg{constructor(){super("google.com"),this.addScope("profile")}static credential(t,r){return gg._fromParams({providerId:n.PROVIDER_ID,signInMethod:n.GOOGLE_SIGN_IN_METHOD,idToken:t,accessToken:r})}static credentialFromResult(t){return n.credentialFromTaggedObject(t)}static credentialFromError(t){return n.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;let{oauthIdToken:r,oauthAccessToken:i}=t;if(!r&&!i)return null;try{return n.credential(r,i)}catch{return null}}}n.GOOGLE_SIGN_IN_METHOD="google.com",n.PROVIDER_ID="google.com";return n})();function Q8(n,e){return y(this,null,function*(){return od(n,"POST","/v1/accounts:signUp",Uo(n,e))})}var xc=class n{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static _fromIdTokenResponse(e,t,r,i=!1){return y(this,null,function*(){let o=yield Vo._fromIdTokenResponse(e,r,i),s=PA(r);return new n({user:o,providerId:s,_tokenResponse:r,operationType:t})})}static _forOperation(e,t,r){return y(this,null,function*(){yield e._updateTokensIfNecessary(r,!0);let i=PA(r);return new n({user:e,providerId:i,_tokenResponse:r,operationType:t})})}};function PA(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}var Fw=class n extends Gt{constructor(e,t,r,i){var o;super(t.code,t.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,n.prototype),this.customData={appName:e.name,tenantId:(o=e.tenantId)!==null&&o!==void 0?o:void 0,_serverResponse:t.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,t,r,i){return new n(e,t,r,i)}};function ok(n,e,t,r){return(e==="reauthenticate"?t._getReauthenticationResolver(n):t._getIdTokenResponse(n)).catch(o=>{throw o.code==="auth/multi-factor-auth-required"?Fw._fromErrorAndOperation(n,o,e,r):o})}function Z8(n,e,t=!1){return y(this,null,function*(){let r=yield ed(n,e._linkToIdToken(n.auth,yield n.getIdToken()),t);return xc._forOperation(n,"link",r)})}function X8(n,e,t=!1){return y(this,null,function*(){let{auth:r}=n;if(yn(r.app))return Promise.reject(ji(r));let i="reauthenticate";try{let o=yield ed(n,ok(r,i,e,n),t);de(o.idToken,r,"internal-error");let s=Gw(o.idToken);de(s,r,"internal-error");let{sub:a}=s;return de(n.uid===a,r,"user-mismatch"),xc._forOperation(n,i,o)}catch(o){throw o?.code==="auth/user-not-found"&&ar(r,"user-mismatch"),o}})}function sk(n,e,t=!1){return y(this,null,function*(){if(yn(n.app))return Promise.reject(ji(n));let r="signIn",i=yield ok(n,r,e),o=yield xc._fromIdTokenResponse(n,r,i);return t||(yield n._updateCurrentUser(o.user)),o})}function Jw(n,e){return y(this,null,function*(){return sk(Bo(n),e)})}function ak(n){return y(this,null,function*(){let e=Bo(n);e._getPasswordPolicyInternal()&&(yield e._updatePasswordPolicy())})}function eE(n,e,t){return y(this,null,function*(){if(yn(n.app))return Promise.reject(ji(n));let r=Bo(n),s=yield Nw(r,{returnSecureToken:!0,email:e,password:t,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",Q8,"EMAIL_PASSWORD_PROVIDER").catch(c=>{throw c.code==="auth/password-does-not-meet-requirements"&&ak(n),c}),a=yield xc._fromIdTokenResponse(r,"signIn",s);return yield r._updateCurrentUser(a.user),a})}function tE(n,e,t){return yn(n.app)?Promise.reject(ji(n)):Jw(ze(n),ik.credential(e,t)).catch(r=>y(null,null,function*(){throw r.code==="auth/password-does-not-meet-requirements"&&ak(n),r}))}function Ig(n,e,t,r){return ze(n).onIdTokenChanged(e,t,r)}function nE(n,e,t){return ze(n).beforeAuthStateChanged(e,t)}function sd(n,e,t,r){return ze(n).onAuthStateChanged(e,t,r)}function rE(n){return ze(n).signOut()}var _g="__sak";var yg=class{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(_g,"1"),this.storage.removeItem(_g),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){let t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}};var J8=1e3,e9=10,t9=(()=>{class n extends yg{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(t,r)=>this.onStorageEvent(t,r),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=XA(),this._shouldAllowMigration=!0}forAllChangedKeys(t){for(let r of Object.keys(this.listeners)){let i=this.storage.getItem(r),o=this.localCache[r];i!==o&&t(r,o,i)}}onStorageEvent(t,r=!1){if(!t.key){this.forAllChangedKeys((a,c,u)=>{this.notifyListeners(a,u)});return}let i=t.key;r?this.detachListener():this.stopPolling();let o=()=>{let a=this.storage.getItem(i);!r&&this.localCache[i]===a||this.notifyListeners(i,a)},s=this.storage.getItem(i);O8()&&s!==t.newValue&&t.newValue!==t.oldValue?setTimeout(o,e9):o()}notifyListeners(t,r){this.localCache[t]=r;let i=this.listeners[t];if(i)for(let o of Array.from(i))o(r&&JSON.parse(r))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((t,r,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:t,oldValue:r,newValue:i}),!0)})},J8)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(t,r){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[t]||(this.listeners[t]=new Set,this.localCache[t]=this.storage.getItem(t)),this.listeners[t].add(r)}_removeListener(t,r){this.listeners[t]&&(this.listeners[t].delete(r),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}_set(t,r){return y(this,null,function*(){yield ro(n.prototype,this,"_set").call(this,t,r),this.localCache[t]=JSON.stringify(r)})}_get(t){return y(this,null,function*(){let r=yield ro(n.prototype,this,"_get").call(this,t);return this.localCache[t]=JSON.stringify(r),r})}_remove(t){return y(this,null,function*(){yield ro(n.prototype,this,"_remove").call(this,t),delete this.localCache[t]})}}return n.type="LOCAL",n})(),ck=t9;var n9=(()=>{class n extends yg{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(t,r){}_removeListener(t,r){}}return n.type="SESSION",n})(),iE=n9;function r9(n){return Promise.all(n.map(e=>y(null,null,function*(){try{return{fulfilled:!0,value:yield e}}catch(t){return{fulfilled:!1,reason:t}}})))}var i9=(()=>{class n{constructor(t){this.eventTarget=t,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(t){let r=this.receivers.find(o=>o.isListeningto(t));if(r)return r;let i=new n(t);return this.receivers.push(i),i}isListeningto(t){return this.eventTarget===t}handleEvent(t){return y(this,null,function*(){let r=t,{eventId:i,eventType:o,data:s}=r.data,a=this.handlersMap[o];if(!a?.size)return;r.ports[0].postMessage({status:"ack",eventId:i,eventType:o});let c=Array.from(a).map(f=>y(this,null,function*(){return f(r.origin,s)})),u=yield r9(c);r.ports[0].postMessage({status:"done",eventId:i,eventType:o,response:u})})}_subscribe(t,r){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[t]||(this.handlersMap[t]=new Set),this.handlersMap[t].add(r)}_unsubscribe(t,r){this.handlersMap[t]&&r&&this.handlersMap[t].delete(r),(!r||this.handlersMap[t].size===0)&&delete this.handlersMap[t],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}n.receivers=[];return n})();function oE(n="",e=10){let t="";for(let r=0;r<e;r++)t+=Math.floor(Math.random()*10);return n+t}var Lw=class{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}_send(e,t,r=50){return y(this,null,function*(){let i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let o,s;return new Promise((a,c)=>{let u=oE("",20);i.port1.start();let f=setTimeout(()=>{c(new Error("unsupported_event"))},r);s={messageChannel:i,onMessage(m){let _=m;if(_.data.eventId===u)switch(_.data.status){case"ack":clearTimeout(f),o=setTimeout(()=>{c(new Error("timeout"))},3e3);break;case"done":clearTimeout(o),a(_.data.response);break;default:clearTimeout(f),clearTimeout(o),c(new Error("invalid_response"));break}}},this.handlers.add(s),i.port1.addEventListener("message",s.onMessage),this.target.postMessage({eventType:e,eventId:u,data:t},[i.port2])}).finally(()=>{s&&this.removeMessageHandler(s)})})}};function ci(){return window}function o9(n){ci().location.href=n}function lk(){return typeof ci().WorkerGlobalScope<"u"&&typeof ci().importScripts=="function"}function s9(){return y(this,null,function*(){if(!navigator?.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})}function a9(){var n;return((n=navigator?.serviceWorker)===null||n===void 0?void 0:n.controller)||null}function c9(){return lk()?self:null}var uk="firebaseLocalStorageDb",l9=1,bg="firebaseLocalStorage",dk="fbase_key",Ks=class{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}};function Sg(n,e){return n.transaction([bg],e?"readwrite":"readonly").objectStore(bg)}function u9(){let n=indexedDB.deleteDatabase(uk);return new Ks(n).toPromise()}function Vw(){let n=indexedDB.open(uk,l9);return new Promise((e,t)=>{n.addEventListener("error",()=>{t(n.error)}),n.addEventListener("upgradeneeded",()=>{let r=n.result;try{r.createObjectStore(bg,{keyPath:dk})}catch(i){t(i)}}),n.addEventListener("success",()=>y(null,null,function*(){let r=n.result;r.objectStoreNames.contains(bg)?e(r):(r.close(),yield u9(),e(yield Vw()))}))})}function AA(n,e,t){return y(this,null,function*(){let r=Sg(n,!0).put({[dk]:e,value:t});return new Ks(r).toPromise()})}function d9(n,e){return y(this,null,function*(){let t=Sg(n,!1).get(e),r=yield new Ks(t).toPromise();return r===void 0?null:r.value})}function kA(n,e){let t=Sg(n,!0).delete(e);return new Ks(t).toPromise()}var f9=800,h9=3,p9=(()=>{class n{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){return y(this,null,function*(){return this.db?this.db:(this.db=yield Vw(),this.db)})}_withRetries(t){return y(this,null,function*(){let r=0;for(;;)try{let i=yield this._openDb();return yield t(i)}catch(i){if(r++>h9)throw i;this.db&&(this.db.close(),this.db=void 0)}})}initializeServiceWorkerMessaging(){return y(this,null,function*(){return lk()?this.initializeReceiver():this.initializeSender()})}initializeReceiver(){return y(this,null,function*(){this.receiver=i9._getInstance(c9()),this.receiver._subscribe("keyChanged",(t,r)=>y(this,null,function*(){return{keyProcessed:(yield this._poll()).includes(r.key)}})),this.receiver._subscribe("ping",(t,r)=>y(this,null,function*(){return["keyChanged"]}))})}initializeSender(){return y(this,null,function*(){var t,r;if(this.activeServiceWorker=yield s9(),!this.activeServiceWorker)return;this.sender=new Lw(this.activeServiceWorker);let i=yield this.sender._send("ping",{},800);i&&!((t=i[0])===null||t===void 0)&&t.fulfilled&&!((r=i[0])===null||r===void 0)&&r.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)})}notifyServiceWorker(t){return y(this,null,function*(){if(!(!this.sender||!this.activeServiceWorker||a9()!==this.activeServiceWorker))try{yield this.sender._send("keyChanged",{key:t},this.serviceWorkerReceiverAvailable?800:50)}catch{}})}_isAvailable(){return y(this,null,function*(){try{if(!indexedDB)return!1;let t=yield Vw();return yield AA(t,_g,"1"),yield kA(t,_g),!0}catch{}return!1})}_withPendingWrite(t){return y(this,null,function*(){this.pendingWrites++;try{yield t()}finally{this.pendingWrites--}})}_set(t,r){return y(this,null,function*(){return this._withPendingWrite(()=>y(this,null,function*(){return yield this._withRetries(i=>AA(i,t,r)),this.localCache[t]=r,this.notifyServiceWorker(t)}))})}_get(t){return y(this,null,function*(){let r=yield this._withRetries(i=>d9(i,t));return this.localCache[t]=r,r})}_remove(t){return y(this,null,function*(){return this._withPendingWrite(()=>y(this,null,function*(){return yield this._withRetries(r=>kA(r,t)),delete this.localCache[t],this.notifyServiceWorker(t)}))})}_poll(){return y(this,null,function*(){let t=yield this._withRetries(o=>{let s=Sg(o,!1).getAll();return new Ks(s).toPromise()});if(!t)return[];if(this.pendingWrites!==0)return[];let r=[],i=new Set;if(t.length!==0)for(let{fbase_key:o,value:s}of t)i.add(o),JSON.stringify(this.localCache[o])!==JSON.stringify(s)&&(this.notifyListeners(o,s),r.push(o));for(let o of Object.keys(this.localCache))this.localCache[o]&&!i.has(o)&&(this.notifyListeners(o,null),r.push(o));return r})}notifyListeners(t,r){this.localCache[t]=r;let i=this.listeners[t];if(i)for(let o of Array.from(i))o(r)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>y(this,null,function*(){return this._poll()}),f9)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(t,r){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[t]||(this.listeners[t]=new Set,this._get(t)),this.listeners[t].add(r)}_removeListener(t,r){this.listeners[t]&&(this.listeners[t].delete(r),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&this.stopPolling()}}return n.type="LOCAL",n})(),fk=p9;var Xpe=tk("rcb"),Jpe=new Gs(3e4,6e4);function hk(n,e){return e?Ui(e):(de(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}var id=class extends Dc{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Tc(e,this._buildIdpRequest())}_linkToIdToken(e,t){return Tc(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return Tc(e,this._buildIdpRequest())}_buildIdpRequest(e){let t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}};function g9(n){return sk(n.auth,new id(n),n.bypassAuthState)}function m9(n){let{auth:e,user:t}=n;return de(t,e,"internal-error"),X8(t,new id(n),n.bypassAuthState)}function v9(n){return y(this,null,function*(){let{auth:e,user:t}=n;return de(t,e,"internal-error"),Z8(t,new id(n),n.bypassAuthState)})}var wg=class{constructor(e,t,r,i,o=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=o,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise((e,t)=>y(this,null,function*(){this.pendingPromise={resolve:e,reject:t};try{this.eventManager=yield this.resolver._initialize(this.auth),yield this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}}))}onAuthEvent(e){return y(this,null,function*(){let{urlResponse:t,sessionId:r,postBody:i,tenantId:o,error:s,type:a}=e;if(s){this.reject(s);return}let c={auth:this.auth,requestUri:t,sessionId:r,tenantId:o||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(yield this.getIdpTask(a)(c))}catch(u){this.reject(u)}})}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return g9;case"linkViaPopup":case"linkViaRedirect":return v9;case"reauthViaPopup":case"reauthViaRedirect":return m9;default:ar(this.auth,"internal-error")}}resolve(e){Bi(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Bi(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}};var _9=new Gs(2e3,1e4);function sE(n,e,t){return y(this,null,function*(){if(yn(n.app))return Promise.reject(Fr(n,"operation-not-supported-in-this-environment"));let r=Bo(n);v8(n,e,rd);let i=hk(r,t);return new y9(r,"signInViaPopup",e,i).executeNotNull()})}var y9=(()=>{class n extends wg{constructor(t,r,i,o,s){super(t,r,o,s),this.provider=i,this.authWindow=null,this.pollId=null,n.currentPopupAction&&n.currentPopupAction.cancel(),n.currentPopupAction=this}executeNotNull(){return y(this,null,function*(){let t=yield this.execute();return de(t,this.auth,"internal-error"),t})}onExecution(){return y(this,null,function*(){Bi(this.filter.length===1,"Popup operations only handle one event");let t=oE();this.authWindow=yield this.resolver._openPopup(this.auth,this.provider,this.filter[0],t),this.authWindow.associatedEvent=t,this.resolver._originValidation(this.auth).catch(r=>{this.reject(r)}),this.resolver._isIframeWebStorageSupported(this.auth,r=>{r||this.reject(Fr(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()})}get eventId(){var t;return((t=this.authWindow)===null||t===void 0?void 0:t.associatedEvent)||null}cancel(){this.reject(Fr(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,n.currentPopupAction=null}pollUserCancellation(){let t=()=>{var r,i;if(!((i=(r=this.authWindow)===null||r===void 0?void 0:r.window)===null||i===void 0)&&i.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Fr(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(t,_9.get())};t()}}n.currentPopupAction=null;return n})(),b9="pendingRedirect",ag=new Map,Uw=class n extends wg{constructor(e,t,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,r),this.eventId=null}execute(){return y(this,null,function*(){let e=ag.get(this.auth._key());if(!e){try{let r=(yield w9(this.resolver,this.auth))?yield ro(n.prototype,this,"execute").call(this):null;e=()=>Promise.resolve(r)}catch(t){e=()=>Promise.reject(t)}ag.set(this.auth._key(),e)}return this.bypassAuthState||ag.set(this.auth._key(),()=>Promise.resolve(null)),e()})}onAuthEvent(e){return y(this,null,function*(){if(e.type==="signInViaRedirect")return ro(n.prototype,this,"onAuthEvent").call(this,e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){let t=yield this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,ro(n.prototype,this,"onAuthEvent").call(this,e);this.resolve(null)}})}onExecution(){return y(this,null,function*(){})}cleanUp(){}};function w9(n,e){return y(this,null,function*(){let t=I9(e),r=C9(n);if(!(yield r._isAvailable()))return!1;let i=(yield r._get(t))==="true";return yield r._remove(t),i})}function E9(n,e){ag.set(n._key(),e)}function C9(n){return Ui(n._redirectPersistence)}function I9(n){return sg(b9,n.config.apiKey,n.name)}function S9(n,e,t=!1){return y(this,null,function*(){if(yn(n.app))return Promise.reject(ji(n));let r=Bo(n),i=hk(r,e),s=yield new Uw(r,i,t).execute();return s&&!t&&(delete s.user._redirectEventId,yield r._persistUserIfCurrent(s.user),yield r._setRedirectUser(null,e)),s})}var T9=600*1e3,jw=class{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(t=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!D9(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var r;if(e.error&&!pk(e)){let i=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";t.onError(Fr(this.auth,i))}else t.onAuthEvent(e)}isEventForConsumer(e,t){let r=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=T9&&this.cachedEventUids.clear(),this.cachedEventUids.has(OA(e))}saveEventToCache(e){this.cachedEventUids.add(OA(e)),this.lastProcessedEventTime=Date.now()}};function OA(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(e=>e).join("-")}function pk({type:n,error:e}){return n==="unknown"&&e?.code==="auth/no-auth-event"}function D9(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return pk(n);default:return!1}}function x9(t){return y(this,arguments,function*(n,e={}){return jo(n,"GET","/v1/projects",e)})}var M9=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,P9=/^https?/;function A9(n){return y(this,null,function*(){if(n.config.emulator)return;let{authorizedDomains:e}=yield x9(n);for(let t of e)try{if(k9(t))return}catch{}ar(n,"unauthorized-domain")})}function k9(n){let e=Iw(),{protocol:t,hostname:r}=new URL(e);if(n.startsWith("chrome-extension://")){let s=new URL(n);return s.hostname===""&&r===""?t==="chrome-extension:"&&n.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&s.hostname===r}if(!P9.test(t))return!1;if(M9.test(n))return r===n;let i=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}var O9=new Gs(3e4,6e4);function RA(){let n=ci().___jsl;if(n?.H){for(let e of Object.keys(n.H))if(n.H[e].r=n.H[e].r||[],n.H[e].L=n.H[e].L||[],n.H[e].r=[...n.H[e].L],n.CP)for(let t=0;t<n.CP.length;t++)n.CP[t]=null}}function R9(n){return new Promise((e,t)=>{var r,i,o;function s(){RA(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{RA(),t(Fr(n,"network-request-failed"))},timeout:O9.get()})}if(!((i=(r=ci().gapi)===null||r===void 0?void 0:r.iframes)===null||i===void 0)&&i.Iframe)e(gapi.iframes.getContext());else if(!((o=ci().gapi)===null||o===void 0)&&o.load)s();else{let a=tk("iframefcb");return ci()[a]=()=>{gapi.load?s():t(Fr(n,"network-request-failed"))},ek(`${V8()}?onload=${a}`).catch(c=>t(c))}}).catch(e=>{throw cg=null,e})}var cg=null;function N9(n){return cg=cg||R9(n),cg}var F9=new Gs(5e3,15e3),L9="__/auth/iframe",V9="emulator/auth/iframe",U9={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},j9=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function B9(n){let e=n.config;de(e.authDomain,n,"auth-domain-config-required");let t=e.emulator?qw(e,V9):`https://${n.config.authDomain}/${L9}`,r={apiKey:e.apiKey,appName:n.name,v:Ro},i=j9.get(n.config.apiHost);i&&(r.eid=i);let o=n._getFrameworks();return o.length&&(r.fw=o.join(",")),`${t}?${wc(r).slice(1)}`}function $9(n){return y(this,null,function*(){let e=yield N9(n),t=ci().gapi;return de(t,n,"internal-error"),e.open({where:document.body,url:B9(n),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:U9,dontclear:!0},r=>new Promise((i,o)=>y(null,null,function*(){yield r.restyle({setHideOnLeave:!1});let s=Fr(n,"network-request-failed"),a=ci().setTimeout(()=>{o(s)},F9.get());function c(){ci().clearTimeout(a),i(r)}r.ping(c).then(c,()=>{o(s)})})))})}var H9={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},z9=500,q9=600,W9="_blank",G9="http://localhost",Eg=class{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}};function K9(n,e,t,r=z9,i=q9){let o=Math.max((window.screen.availHeight-i)/2,0).toString(),s=Math.max((window.screen.availWidth-r)/2,0).toString(),a="",c=Object.assign(Object.assign({},H9),{width:r.toString(),height:i.toString(),top:o,left:s}),u=Vt().toLowerCase();t&&(a=GA(u)?W9:t),qA(u)&&(e=e||G9,c.scrollbars="yes");let f=Object.entries(c).reduce((_,[E,x])=>`${_}${E}=${x},`,"");if(k8(u)&&a!=="_self")return Y9(e||"",a),new Eg(null);let m=window.open(e||"",a,f);de(m,n,"popup-blocked");try{m.focus()}catch{}return new Eg(m)}function Y9(n,e){let t=document.createElement("a");t.href=n,t.target=e;let r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(r)}var Q9="__/auth/handler",Z9="emulator/auth/handler",X9=encodeURIComponent("fac");function NA(n,e,t,r,i,o){return y(this,null,function*(){de(n.config.authDomain,n,"auth-domain-config-required"),de(n.config.apiKey,n,"invalid-api-key");let s={apiKey:n.config.apiKey,appName:n.name,authType:t,redirectUrl:r,v:Ro,eventId:i};if(e instanceof rd){e.setDefaultLanguage(n.languageCode),s.providerId=e.providerId||"",KP(e.getCustomParameters())||(s.customParameters=JSON.stringify(e.getCustomParameters()));for(let[f,m]of Object.entries(o||{}))s[f]=m}if(e instanceof vg){let f=e.getScopes().filter(m=>m!=="");f.length>0&&(s.scopes=f.join(","))}n.tenantId&&(s.tid=n.tenantId);let a=s;for(let f of Object.keys(a))a[f]===void 0&&delete a[f];let c=yield n._getAppCheckToken(),u=c?`#${X9}=${encodeURIComponent(c)}`:"";return`${J9(n)}?${wc(a).slice(1)}${u}`})}function J9({config:n}){return n.emulator?qw(n,Z9):`https://${n.authDomain}/${Q9}`}var Cw="webStorageSupport",Bw=class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=iE,this._completeRedirectFn=S9,this._overrideRedirectResult=E9}_openPopup(e,t,r,i){return y(this,null,function*(){var o;Bi((o=this.eventManagers[e._key()])===null||o===void 0?void 0:o.manager,"_initialize() not called before _openPopup()");let s=yield NA(e,t,r,Iw(),i);return K9(e,s,oE())})}_openRedirect(e,t,r,i){return y(this,null,function*(){yield this._originValidation(e);let o=yield NA(e,t,r,Iw(),i);return o9(o),new Promise(()=>{})})}_initialize(e){let t=e._key();if(this.eventManagers[t]){let{manager:i,promise:o}=this.eventManagers[t];return i?Promise.resolve(i):(Bi(o,"If manager is not set, promise should be"),o)}let r=this.initAndGetManager(e);return this.eventManagers[t]={promise:r},r.catch(()=>{delete this.eventManagers[t]}),r}initAndGetManager(e){return y(this,null,function*(){let t=yield $9(e),r=new jw(e);return t.register("authEvent",i=>(de(i?.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=t,r})}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(Cw,{type:Cw},i=>{var o;let s=(o=i?.[0])===null||o===void 0?void 0:o[Cw];s!==void 0&&t(!!s),ar(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){let t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=A9(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return XA()||WA()||Yw()}},gk=Bw;var FA="@firebase/auth",LA="1.10.8";var $w=class{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}getToken(e){return y(this,null,function*(){return this.assertAuthConfigured(),yield this.auth._initializationPromise,this.auth.currentUser?{accessToken:yield this.auth.currentUser.getIdToken(e)}:null})}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;let t=this.auth.onIdTokenChanged(r=>{e(r?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();let t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){de(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}};function e$(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function t$(n){Kt(new _t("auth",(e,{options:t})=>{let r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),o=e.getProvider("app-check-internal"),{apiKey:s,authDomain:a}=r.options;de(s&&!s.includes(":"),"invalid-api-key",{appName:r.name});let c={apiKey:s,authDomain:a,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:JA(n)},u=new Aw(r,i,o,c);return j8(u,t),u},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,r)=>{e.getProvider("auth-internal").initialize()})),Kt(new _t("auth-internal",e=>{let t=Bo(e.getProvider("auth").getImmediate());return(r=>new $w(r))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),Ne(FA,LA,e$(n)),Ne(FA,LA,"esm2017")}var n$=300,r$=Xb("authIdTokenMaxAge")||n$,VA=null,i$=n=>e=>y(null,null,function*(){let t=e&&(yield e.getIdTokenResult()),r=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(r&&r>r$)return;let i=t?.token;VA!==i&&(VA=i,yield fetch(n,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))});function aE(n=si()){let e=or(n,"auth");if(e.isInitialized())return e.getImmediate();let t=Qw(n,{popupRedirectResolver:gk,persistence:[fk,ck,iE]}),r=Xb("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){let o=new URL(r,location.origin);if(location.origin===o.origin){let s=i$(o.toString());nE(t,s,()=>s(t.currentUser)),Ig(t,a=>s(a))}}let i=Qb("auth");return i&&Zw(t,`http://${i}`),t}function o$(){var n,e;return(e=(n=document.getElementsByTagName("head"))===null||n===void 0?void 0:n[0])!==null&&e!==void 0?e:document}F8({loadJS(n){return new Promise((e,t)=>{let r=document.createElement("script");r.setAttribute("src",n),r.onload=e,r.onerror=i=>{let o=Fr("internal-error");o.customData=i,t(o)},r.type="text/javascript",r.charset="UTF-8",o$().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});t$("Browser");function vk(n){return new ge(function(e){var t=sd(n,e.next.bind(e),e.error.bind(e),e.complete.bind(e));return{unsubscribe:t}})}var _k="auth",$n=class{constructor(e){return e}},ad=class{constructor(){return No(_k)}};var cE=new J("angularfire2.auth-instances");function q$(n,e){let t=Ws(_k,n,e);return t&&new $n(t)}function W$(n){return(e,t)=>{let r=e.runOutsideAngular(()=>n(t));return new $n(r)}}var G$={provide:ad,deps:[[new zt,cE]]},K$={provide:$n,useFactory:q$,deps:[[new zt,cE],Rr]};function yk(n,...e){return Ne("angularfire",sr.full,"auth"),nn([K$,G$,{provide:cE,useFactory:W$(n),multi:!0,deps:[xe,Qe,ai,Li,[new zt,Sc],...e]}])}var Tg=ke(vk,!0);var bk=ke(eE,!0,2);var Dg=ke(aE,!0);var wk=ke(sd,!0);var Ek=ke(tE,!0,2);var Ck=ke(sE,!0,2);var Ik=ke(rE,!0,2);var Sk=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Tk={};var $i,lE;(function(){var n;function e(P,S){function D(){}D.prototype=S.prototype,P.D=S.prototype,P.prototype=new D,P.prototype.constructor=P,P.C=function(M,A,R){for(var T=Array(arguments.length-2),mi=2;mi<arguments.length;mi++)T[mi-2]=arguments[mi];return S.prototype[A].apply(M,T)}}function t(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,t),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(P,S,D){D||(D=0);var M=Array(16);if(typeof S=="string")for(var A=0;16>A;++A)M[A]=S.charCodeAt(D++)|S.charCodeAt(D++)<<8|S.charCodeAt(D++)<<16|S.charCodeAt(D++)<<24;else for(A=0;16>A;++A)M[A]=S[D++]|S[D++]<<8|S[D++]<<16|S[D++]<<24;S=P.g[0],D=P.g[1],A=P.g[2];var R=P.g[3],T=S+(R^D&(A^R))+M[0]+3614090360&4294967295;S=D+(T<<7&4294967295|T>>>25),T=R+(A^S&(D^A))+M[1]+3905402710&4294967295,R=S+(T<<12&4294967295|T>>>20),T=A+(D^R&(S^D))+M[2]+606105819&4294967295,A=R+(T<<17&4294967295|T>>>15),T=D+(S^A&(R^S))+M[3]+3250441966&4294967295,D=A+(T<<22&4294967295|T>>>10),T=S+(R^D&(A^R))+M[4]+4118548399&4294967295,S=D+(T<<7&4294967295|T>>>25),T=R+(A^S&(D^A))+M[5]+1200080426&4294967295,R=S+(T<<12&4294967295|T>>>20),T=A+(D^R&(S^D))+M[6]+2821735955&4294967295,A=R+(T<<17&4294967295|T>>>15),T=D+(S^A&(R^S))+M[7]+4249261313&4294967295,D=A+(T<<22&4294967295|T>>>10),T=S+(R^D&(A^R))+M[8]+1770035416&4294967295,S=D+(T<<7&4294967295|T>>>25),T=R+(A^S&(D^A))+M[9]+2336552879&4294967295,R=S+(T<<12&4294967295|T>>>20),T=A+(D^R&(S^D))+M[10]+4294925233&4294967295,A=R+(T<<17&4294967295|T>>>15),T=D+(S^A&(R^S))+M[11]+2304563134&4294967295,D=A+(T<<22&4294967295|T>>>10),T=S+(R^D&(A^R))+M[12]+1804603682&4294967295,S=D+(T<<7&4294967295|T>>>25),T=R+(A^S&(D^A))+M[13]+4254626195&4294967295,R=S+(T<<12&4294967295|T>>>20),T=A+(D^R&(S^D))+M[14]+2792965006&4294967295,A=R+(T<<17&4294967295|T>>>15),T=D+(S^A&(R^S))+M[15]+1236535329&4294967295,D=A+(T<<22&4294967295|T>>>10),T=S+(A^R&(D^A))+M[1]+4129170786&4294967295,S=D+(T<<5&4294967295|T>>>27),T=R+(D^A&(S^D))+M[6]+3225465664&4294967295,R=S+(T<<9&4294967295|T>>>23),T=A+(S^D&(R^S))+M[11]+643717713&4294967295,A=R+(T<<14&4294967295|T>>>18),T=D+(R^S&(A^R))+M[0]+3921069994&4294967295,D=A+(T<<20&4294967295|T>>>12),T=S+(A^R&(D^A))+M[5]+3593408605&4294967295,S=D+(T<<5&4294967295|T>>>27),T=R+(D^A&(S^D))+M[10]+38016083&4294967295,R=S+(T<<9&4294967295|T>>>23),T=A+(S^D&(R^S))+M[15]+3634488961&4294967295,A=R+(T<<14&4294967295|T>>>18),T=D+(R^S&(A^R))+M[4]+3889429448&4294967295,D=A+(T<<20&4294967295|T>>>12),T=S+(A^R&(D^A))+M[9]+568446438&4294967295,S=D+(T<<5&4294967295|T>>>27),T=R+(D^A&(S^D))+M[14]+3275163606&4294967295,R=S+(T<<9&4294967295|T>>>23),T=A+(S^D&(R^S))+M[3]+4107603335&4294967295,A=R+(T<<14&4294967295|T>>>18),T=D+(R^S&(A^R))+M[8]+1163531501&4294967295,D=A+(T<<20&4294967295|T>>>12),T=S+(A^R&(D^A))+M[13]+2850285829&4294967295,S=D+(T<<5&4294967295|T>>>27),T=R+(D^A&(S^D))+M[2]+4243563512&4294967295,R=S+(T<<9&4294967295|T>>>23),T=A+(S^D&(R^S))+M[7]+1735328473&4294967295,A=R+(T<<14&4294967295|T>>>18),T=D+(R^S&(A^R))+M[12]+2368359562&4294967295,D=A+(T<<20&4294967295|T>>>12),T=S+(D^A^R)+M[5]+4294588738&4294967295,S=D+(T<<4&4294967295|T>>>28),T=R+(S^D^A)+M[8]+2272392833&4294967295,R=S+(T<<11&4294967295|T>>>21),T=A+(R^S^D)+M[11]+1839030562&4294967295,A=R+(T<<16&4294967295|T>>>16),T=D+(A^R^S)+M[14]+4259657740&4294967295,D=A+(T<<23&4294967295|T>>>9),T=S+(D^A^R)+M[1]+2763975236&4294967295,S=D+(T<<4&4294967295|T>>>28),T=R+(S^D^A)+M[4]+1272893353&4294967295,R=S+(T<<11&4294967295|T>>>21),T=A+(R^S^D)+M[7]+4139469664&4294967295,A=R+(T<<16&4294967295|T>>>16),T=D+(A^R^S)+M[10]+3200236656&4294967295,D=A+(T<<23&4294967295|T>>>9),T=S+(D^A^R)+M[13]+681279174&4294967295,S=D+(T<<4&4294967295|T>>>28),T=R+(S^D^A)+M[0]+3936430074&4294967295,R=S+(T<<11&4294967295|T>>>21),T=A+(R^S^D)+M[3]+3572445317&4294967295,A=R+(T<<16&4294967295|T>>>16),T=D+(A^R^S)+M[6]+76029189&4294967295,D=A+(T<<23&4294967295|T>>>9),T=S+(D^A^R)+M[9]+3654602809&4294967295,S=D+(T<<4&4294967295|T>>>28),T=R+(S^D^A)+M[12]+3873151461&4294967295,R=S+(T<<11&4294967295|T>>>21),T=A+(R^S^D)+M[15]+530742520&4294967295,A=R+(T<<16&4294967295|T>>>16),T=D+(A^R^S)+M[2]+3299628645&4294967295,D=A+(T<<23&4294967295|T>>>9),T=S+(A^(D|~R))+M[0]+4096336452&4294967295,S=D+(T<<6&4294967295|T>>>26),T=R+(D^(S|~A))+M[7]+1126891415&4294967295,R=S+(T<<10&4294967295|T>>>22),T=A+(S^(R|~D))+M[14]+2878612391&4294967295,A=R+(T<<15&4294967295|T>>>17),T=D+(R^(A|~S))+M[5]+4237533241&4294967295,D=A+(T<<21&4294967295|T>>>11),T=S+(A^(D|~R))+M[12]+1700485571&4294967295,S=D+(T<<6&4294967295|T>>>26),T=R+(D^(S|~A))+M[3]+2399980690&4294967295,R=S+(T<<10&4294967295|T>>>22),T=A+(S^(R|~D))+M[10]+4293915773&4294967295,A=R+(T<<15&4294967295|T>>>17),T=D+(R^(A|~S))+M[1]+2240044497&4294967295,D=A+(T<<21&4294967295|T>>>11),T=S+(A^(D|~R))+M[8]+1873313359&4294967295,S=D+(T<<6&4294967295|T>>>26),T=R+(D^(S|~A))+M[15]+4264355552&4294967295,R=S+(T<<10&4294967295|T>>>22),T=A+(S^(R|~D))+M[6]+2734768916&4294967295,A=R+(T<<15&4294967295|T>>>17),T=D+(R^(A|~S))+M[13]+1309151649&4294967295,D=A+(T<<21&4294967295|T>>>11),T=S+(A^(D|~R))+M[4]+4149444226&4294967295,S=D+(T<<6&4294967295|T>>>26),T=R+(D^(S|~A))+M[11]+3174756917&4294967295,R=S+(T<<10&4294967295|T>>>22),T=A+(S^(R|~D))+M[2]+718787259&4294967295,A=R+(T<<15&4294967295|T>>>17),T=D+(R^(A|~S))+M[9]+3951481745&4294967295,P.g[0]=P.g[0]+S&4294967295,P.g[1]=P.g[1]+(A+(T<<21&4294967295|T>>>11))&4294967295,P.g[2]=P.g[2]+A&4294967295,P.g[3]=P.g[3]+R&4294967295}r.prototype.u=function(P,S){S===void 0&&(S=P.length);for(var D=S-this.blockSize,M=this.B,A=this.h,R=0;R<S;){if(A==0)for(;R<=D;)i(this,P,R),R+=this.blockSize;if(typeof P=="string"){for(;R<S;)if(M[A++]=P.charCodeAt(R++),A==this.blockSize){i(this,M),A=0;break}}else for(;R<S;)if(M[A++]=P[R++],A==this.blockSize){i(this,M),A=0;break}}this.h=A,this.o+=S},r.prototype.v=function(){var P=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);P[0]=128;for(var S=1;S<P.length-8;++S)P[S]=0;var D=8*this.o;for(S=P.length-8;S<P.length;++S)P[S]=D&255,D/=256;for(this.u(P),P=Array(16),S=D=0;4>S;++S)for(var M=0;32>M;M+=8)P[D++]=this.g[S]>>>M&255;return P};function o(P,S){var D=a;return Object.prototype.hasOwnProperty.call(D,P)?D[P]:D[P]=S(P)}function s(P,S){this.h=S;for(var D=[],M=!0,A=P.length-1;0<=A;A--){var R=P[A]|0;M&&R==S||(D[A]=R,M=!1)}this.g=D}var a={};function c(P){return-128<=P&&128>P?o(P,function(S){return new s([S|0],0>S?-1:0)}):new s([P|0],0>P?-1:0)}function u(P){if(isNaN(P)||!isFinite(P))return m;if(0>P)return U(u(-P));for(var S=[],D=1,M=0;P>=D;M++)S[M]=P/D|0,D*=4294967296;return new s(S,0)}function f(P,S){if(P.length==0)throw Error("number format error: empty string");if(S=S||10,2>S||36<S)throw Error("radix out of range: "+S);if(P.charAt(0)=="-")return U(f(P.substring(1),S));if(0<=P.indexOf("-"))throw Error('number format error: interior "-" character');for(var D=u(Math.pow(S,8)),M=m,A=0;A<P.length;A+=8){var R=Math.min(8,P.length-A),T=parseInt(P.substring(A,A+R),S);8>R?(R=u(Math.pow(S,R)),M=M.j(R).add(u(T))):(M=M.j(D),M=M.add(u(T)))}return M}var m=c(0),_=c(1),E=c(16777216);n=s.prototype,n.m=function(){if(V(this))return-U(this).m();for(var P=0,S=1,D=0;D<this.g.length;D++){var M=this.i(D);P+=(0<=M?M:4294967296+M)*S,S*=4294967296}return P},n.toString=function(P){if(P=P||10,2>P||36<P)throw Error("radix out of range: "+P);if(x(this))return"0";if(V(this))return"-"+U(this).toString(P);for(var S=u(Math.pow(P,6)),D=this,M="";;){var A=Fe(D,S).g;D=W(D,A.j(S));var R=((0<D.g.length?D.g[0]:D.h)>>>0).toString(P);if(D=A,x(D))return R+M;for(;6>R.length;)R="0"+R;M=R+M}},n.i=function(P){return 0>P?0:P<this.g.length?this.g[P]:this.h};function x(P){if(P.h!=0)return!1;for(var S=0;S<P.g.length;S++)if(P.g[S]!=0)return!1;return!0}function V(P){return P.h==-1}n.l=function(P){return P=W(this,P),V(P)?-1:x(P)?0:1};function U(P){for(var S=P.g.length,D=[],M=0;M<S;M++)D[M]=~P.g[M];return new s(D,~P.h).add(_)}n.abs=function(){return V(this)?U(this):this},n.add=function(P){for(var S=Math.max(this.g.length,P.g.length),D=[],M=0,A=0;A<=S;A++){var R=M+(this.i(A)&65535)+(P.i(A)&65535),T=(R>>>16)+(this.i(A)>>>16)+(P.i(A)>>>16);M=T>>>16,R&=65535,T&=65535,D[A]=T<<16|R}return new s(D,D[D.length-1]&-2147483648?-1:0)};function W(P,S){return P.add(U(S))}n.j=function(P){if(x(this)||x(P))return m;if(V(this))return V(P)?U(this).j(U(P)):U(U(this).j(P));if(V(P))return U(this.j(U(P)));if(0>this.l(E)&&0>P.l(E))return u(this.m()*P.m());for(var S=this.g.length+P.g.length,D=[],M=0;M<2*S;M++)D[M]=0;for(M=0;M<this.g.length;M++)for(var A=0;A<P.g.length;A++){var R=this.i(M)>>>16,T=this.i(M)&65535,mi=P.i(A)>>>16,ll=P.i(A)&65535;D[2*M+2*A]+=T*ll,oe(D,2*M+2*A),D[2*M+2*A+1]+=R*ll,oe(D,2*M+2*A+1),D[2*M+2*A+1]+=T*mi,oe(D,2*M+2*A+1),D[2*M+2*A+2]+=R*mi,oe(D,2*M+2*A+2)}for(M=0;M<S;M++)D[M]=D[2*M+1]<<16|D[2*M];for(M=S;M<2*S;M++)D[M]=0;return new s(D,0)};function oe(P,S){for(;(P[S]&65535)!=P[S];)P[S+1]+=P[S]>>>16,P[S]&=65535,S++}function fe(P,S){this.g=P,this.h=S}function Fe(P,S){if(x(S))throw Error("division by zero");if(x(P))return new fe(m,m);if(V(P))return S=Fe(U(P),S),new fe(U(S.g),U(S.h));if(V(S))return S=Fe(P,U(S)),new fe(U(S.g),S.h);if(30<P.g.length){if(V(P)||V(S))throw Error("slowDivide_ only works with positive integers.");for(var D=_,M=S;0>=M.l(P);)D=At(D),M=At(M);var A=$e(D,1),R=$e(M,1);for(M=$e(M,2),D=$e(D,2);!x(M);){var T=R.add(M);0>=T.l(P)&&(A=A.add(D),R=T),M=$e(M,1),D=$e(D,1)}return S=W(P,A.j(S)),new fe(A,S)}for(A=m;0<=P.l(S);){for(D=Math.max(1,Math.floor(P.m()/S.m())),M=Math.ceil(Math.log(D)/Math.LN2),M=48>=M?1:Math.pow(2,M-48),R=u(D),T=R.j(S);V(T)||0<T.l(P);)D-=M,R=u(D),T=R.j(S);x(R)&&(R=_),A=A.add(R),P=W(P,T)}return new fe(A,P)}n.A=function(P){return Fe(this,P).h},n.and=function(P){for(var S=Math.max(this.g.length,P.g.length),D=[],M=0;M<S;M++)D[M]=this.i(M)&P.i(M);return new s(D,this.h&P.h)},n.or=function(P){for(var S=Math.max(this.g.length,P.g.length),D=[],M=0;M<S;M++)D[M]=this.i(M)|P.i(M);return new s(D,this.h|P.h)},n.xor=function(P){for(var S=Math.max(this.g.length,P.g.length),D=[],M=0;M<S;M++)D[M]=this.i(M)^P.i(M);return new s(D,this.h^P.h)};function At(P){for(var S=P.g.length+1,D=[],M=0;M<S;M++)D[M]=P.i(M)<<1|P.i(M-1)>>>31;return new s(D,P.h)}function $e(P,S){var D=S>>5;S%=32;for(var M=P.g.length-D,A=[],R=0;R<M;R++)A[R]=0<S?P.i(R+D)>>>S|P.i(R+D+1)<<32-S:P.i(R+D);return new s(A,P.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,lE=Tk.Md5=r,s.prototype.add=s.prototype.add,s.prototype.multiply=s.prototype.j,s.prototype.modulo=s.prototype.A,s.prototype.compare=s.prototype.l,s.prototype.toNumber=s.prototype.m,s.prototype.toString=s.prototype.toString,s.prototype.getBits=s.prototype.i,s.fromNumber=u,s.fromString=f,$i=Tk.Integer=s}).apply(typeof Sk<"u"?Sk:typeof self<"u"?self:typeof window<"u"?window:{});var xg=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Hi={};var uE,Q$,Mc,dE,cd,Mg,fE,hE,pE;(function(){var n,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(l,d,g){return l==Array.prototype||l==Object.prototype||(l[d]=g.value),l};function t(l){l=[typeof globalThis=="object"&&globalThis,l,typeof window=="object"&&window,typeof self=="object"&&self,typeof xg=="object"&&xg];for(var d=0;d<l.length;++d){var g=l[d];if(g&&g.Math==Math)return g}throw Error("Cannot find global object")}var r=t(this);function i(l,d){if(d)e:{var g=r;l=l.split(".");for(var w=0;w<l.length-1;w++){var O=l[w];if(!(O in g))break e;g=g[O]}l=l[l.length-1],w=g[l],d=d(w),d!=w&&d!=null&&e(g,l,{configurable:!0,writable:!0,value:d})}}function o(l,d){l instanceof String&&(l+="");var g=0,w=!1,O={next:function(){if(!w&&g<l.length){var L=g++;return{value:d(L,l[L]),done:!1}}return w=!0,{done:!0,value:void 0}}};return O[Symbol.iterator]=function(){return O},O}i("Array.prototype.values",function(l){return l||function(){return o(this,function(d,g){return g})}});var s=s||{},a=this||self;function c(l){var d=typeof l;return d=d!="object"?d:l?Array.isArray(l)?"array":d:"null",d=="array"||d=="object"&&typeof l.length=="number"}function u(l){var d=typeof l;return d=="object"&&l!=null||d=="function"}function f(l,d,g){return l.call.apply(l.bind,arguments)}function m(l,d,g){if(!l)throw Error();if(2<arguments.length){var w=Array.prototype.slice.call(arguments,2);return function(){var O=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(O,w),l.apply(d,O)}}return function(){return l.apply(d,arguments)}}function _(l,d,g){return _=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?f:m,_.apply(null,arguments)}function E(l,d){var g=Array.prototype.slice.call(arguments,1);return function(){var w=g.slice();return w.push.apply(w,arguments),l.apply(this,w)}}function x(l,d){function g(){}g.prototype=d.prototype,l.aa=d.prototype,l.prototype=new g,l.prototype.constructor=l,l.Qb=function(w,O,L){for(var Y=Array(arguments.length-2),Ge=2;Ge<arguments.length;Ge++)Y[Ge-2]=arguments[Ge];return d.prototype[O].apply(w,Y)}}function V(l){let d=l.length;if(0<d){let g=Array(d);for(let w=0;w<d;w++)g[w]=l[w];return g}return[]}function U(l,d){for(let g=1;g<arguments.length;g++){let w=arguments[g];if(c(w)){let O=l.length||0,L=w.length||0;l.length=O+L;for(let Y=0;Y<L;Y++)l[O+Y]=w[Y]}else l.push(w)}}class W{constructor(d,g){this.i=d,this.j=g,this.h=0,this.g=null}get(){let d;return 0<this.h?(this.h--,d=this.g,this.g=d.next,d.next=null):d=this.i(),d}}function oe(l){return/^[\s\xa0]*$/.test(l)}function fe(){var l=a.navigator;return l&&(l=l.userAgent)?l:""}function Fe(l){return Fe[" "](l),l}Fe[" "]=function(){};var At=fe().indexOf("Gecko")!=-1&&!(fe().toLowerCase().indexOf("webkit")!=-1&&fe().indexOf("Edge")==-1)&&!(fe().indexOf("Trident")!=-1||fe().indexOf("MSIE")!=-1)&&fe().indexOf("Edge")==-1;function $e(l,d,g){for(let w in l)d.call(g,l[w],w,l)}function P(l,d){for(let g in l)d.call(void 0,l[g],g,l)}function S(l){let d={};for(let g in l)d[g]=l[g];return d}let D="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function M(l,d){let g,w;for(let O=1;O<arguments.length;O++){w=arguments[O];for(g in w)l[g]=w[g];for(let L=0;L<D.length;L++)g=D[L],Object.prototype.hasOwnProperty.call(w,g)&&(l[g]=w[g])}}function A(l){var d=1;l=l.split(":");let g=[];for(;0<d&&l.length;)g.push(l.shift()),d--;return l.length&&g.push(l.join(":")),g}function R(l){a.setTimeout(()=>{throw l},0)}function T(){var l=tv;let d=null;return l.g&&(d=l.g,l.g=l.g.next,l.g||(l.h=null),d.next=null),d}class mi{constructor(){this.h=this.g=null}add(d,g){let w=ll.get();w.set(d,g),this.h?this.h.next=w:this.g=w,this.h=w}}var ll=new W(()=>new AN,l=>l.reset());class AN{constructor(){this.next=this.g=this.h=null}set(d,g){this.h=d,this.g=g,this.next=null}reset(){this.next=this.g=this.h=null}}let ul,dl=!1,tv=new mi,m1=()=>{let l=a.Promise.resolve(void 0);ul=()=>{l.then(kN)}};var kN=()=>{for(var l;l=T();){try{l.h.call(l.g)}catch(g){R(g)}var d=ll;d.j(l),100>d.h&&(d.h++,l.next=d.g,d.g=l)}dl=!1};function Ji(){this.s=this.s,this.C=this.C}Ji.prototype.s=!1,Ji.prototype.ma=function(){this.s||(this.s=!0,this.N())},Ji.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function Yt(l,d){this.type=l,this.g=this.target=d,this.defaultPrevented=!1}Yt.prototype.h=function(){this.defaultPrevented=!0};var ON=(function(){if(!a.addEventListener||!Object.defineProperty)return!1;var l=!1,d=Object.defineProperty({},"passive",{get:function(){l=!0}});try{let g=()=>{};a.addEventListener("test",g,d),a.removeEventListener("test",g,d)}catch{}return l})();function fl(l,d){if(Yt.call(this,l?l.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,l){var g=this.type=l.type,w=l.changedTouches&&l.changedTouches.length?l.changedTouches[0]:null;if(this.target=l.target||l.srcElement,this.g=d,d=l.relatedTarget){if(At){e:{try{Fe(d.nodeName);var O=!0;break e}catch{}O=!1}O||(d=null)}}else g=="mouseover"?d=l.fromElement:g=="mouseout"&&(d=l.toElement);this.relatedTarget=d,w?(this.clientX=w.clientX!==void 0?w.clientX:w.pageX,this.clientY=w.clientY!==void 0?w.clientY:w.pageY,this.screenX=w.screenX||0,this.screenY=w.screenY||0):(this.clientX=l.clientX!==void 0?l.clientX:l.pageX,this.clientY=l.clientY!==void 0?l.clientY:l.pageY,this.screenX=l.screenX||0,this.screenY=l.screenY||0),this.button=l.button,this.key=l.key||"",this.ctrlKey=l.ctrlKey,this.altKey=l.altKey,this.shiftKey=l.shiftKey,this.metaKey=l.metaKey,this.pointerId=l.pointerId||0,this.pointerType=typeof l.pointerType=="string"?l.pointerType:RN[l.pointerType]||"",this.state=l.state,this.i=l,l.defaultPrevented&&fl.aa.h.call(this)}}x(fl,Yt);var RN={2:"touch",3:"pen",4:"mouse"};fl.prototype.h=function(){fl.aa.h.call(this);var l=this.i;l.preventDefault?l.preventDefault():l.returnValue=!1};var hl="closure_listenable_"+(1e6*Math.random()|0),NN=0;function FN(l,d,g,w,O){this.listener=l,this.proxy=null,this.src=d,this.type=g,this.capture=!!w,this.ha=O,this.key=++NN,this.da=this.fa=!1}function Wd(l){l.da=!0,l.listener=null,l.proxy=null,l.src=null,l.ha=null}function Gd(l){this.src=l,this.g={},this.h=0}Gd.prototype.add=function(l,d,g,w,O){var L=l.toString();l=this.g[L],l||(l=this.g[L]=[],this.h++);var Y=rv(l,d,w,O);return-1<Y?(d=l[Y],g||(d.fa=!1)):(d=new FN(d,this.src,L,!!w,O),d.fa=g,l.push(d)),d};function nv(l,d){var g=d.type;if(g in l.g){var w=l.g[g],O=Array.prototype.indexOf.call(w,d,void 0),L;(L=0<=O)&&Array.prototype.splice.call(w,O,1),L&&(Wd(d),l.g[g].length==0&&(delete l.g[g],l.h--))}}function rv(l,d,g,w){for(var O=0;O<l.length;++O){var L=l[O];if(!L.da&&L.listener==d&&L.capture==!!g&&L.ha==w)return O}return-1}var iv="closure_lm_"+(1e6*Math.random()|0),ov={};function v1(l,d,g,w,O){if(w&&w.once)return y1(l,d,g,w,O);if(Array.isArray(d)){for(var L=0;L<d.length;L++)v1(l,d[L],g,w,O);return null}return g=lv(g),l&&l[hl]?l.K(d,g,u(w)?!!w.capture:!!w,O):_1(l,d,g,!1,w,O)}function _1(l,d,g,w,O,L){if(!d)throw Error("Invalid event type");var Y=u(O)?!!O.capture:!!O,Ge=av(l);if(Ge||(l[iv]=Ge=new Gd(l)),g=Ge.add(d,g,w,Y,L),g.proxy)return g;if(w=LN(),g.proxy=w,w.src=l,w.listener=g,l.addEventListener)ON||(O=Y),O===void 0&&(O=!1),l.addEventListener(d.toString(),w,O);else if(l.attachEvent)l.attachEvent(w1(d.toString()),w);else if(l.addListener&&l.removeListener)l.addListener(w);else throw Error("addEventListener and attachEvent are unavailable.");return g}function LN(){function l(g){return d.call(l.src,l.listener,g)}let d=VN;return l}function y1(l,d,g,w,O){if(Array.isArray(d)){for(var L=0;L<d.length;L++)y1(l,d[L],g,w,O);return null}return g=lv(g),l&&l[hl]?l.L(d,g,u(w)?!!w.capture:!!w,O):_1(l,d,g,!0,w,O)}function b1(l,d,g,w,O){if(Array.isArray(d))for(var L=0;L<d.length;L++)b1(l,d[L],g,w,O);else w=u(w)?!!w.capture:!!w,g=lv(g),l&&l[hl]?(l=l.i,d=String(d).toString(),d in l.g&&(L=l.g[d],g=rv(L,g,w,O),-1<g&&(Wd(L[g]),Array.prototype.splice.call(L,g,1),L.length==0&&(delete l.g[d],l.h--)))):l&&(l=av(l))&&(d=l.g[d.toString()],l=-1,d&&(l=rv(d,g,w,O)),(g=-1<l?d[l]:null)&&sv(g))}function sv(l){if(typeof l!="number"&&l&&!l.da){var d=l.src;if(d&&d[hl])nv(d.i,l);else{var g=l.type,w=l.proxy;d.removeEventListener?d.removeEventListener(g,w,l.capture):d.detachEvent?d.detachEvent(w1(g),w):d.addListener&&d.removeListener&&d.removeListener(w),(g=av(d))?(nv(g,l),g.h==0&&(g.src=null,d[iv]=null)):Wd(l)}}}function w1(l){return l in ov?ov[l]:ov[l]="on"+l}function VN(l,d){if(l.da)l=!0;else{d=new fl(d,this);var g=l.listener,w=l.ha||l.src;l.fa&&sv(l),l=g.call(w,d)}return l}function av(l){return l=l[iv],l instanceof Gd?l:null}var cv="__closure_events_fn_"+(1e9*Math.random()>>>0);function lv(l){return typeof l=="function"?l:(l[cv]||(l[cv]=function(d){return l.handleEvent(d)}),l[cv])}function Qt(){Ji.call(this),this.i=new Gd(this),this.M=this,this.F=null}x(Qt,Ji),Qt.prototype[hl]=!0,Qt.prototype.removeEventListener=function(l,d,g,w){b1(this,l,d,g,w)};function dn(l,d){var g,w=l.F;if(w)for(g=[];w;w=w.F)g.push(w);if(l=l.M,w=d.type||d,typeof d=="string")d=new Yt(d,l);else if(d instanceof Yt)d.target=d.target||l;else{var O=d;d=new Yt(w,l),M(d,O)}if(O=!0,g)for(var L=g.length-1;0<=L;L--){var Y=d.g=g[L];O=Kd(Y,w,!0,d)&&O}if(Y=d.g=l,O=Kd(Y,w,!0,d)&&O,O=Kd(Y,w,!1,d)&&O,g)for(L=0;L<g.length;L++)Y=d.g=g[L],O=Kd(Y,w,!1,d)&&O}Qt.prototype.N=function(){if(Qt.aa.N.call(this),this.i){var l=this.i,d;for(d in l.g){for(var g=l.g[d],w=0;w<g.length;w++)Wd(g[w]);delete l.g[d],l.h--}}this.F=null},Qt.prototype.K=function(l,d,g,w){return this.i.add(String(l),d,!1,g,w)},Qt.prototype.L=function(l,d,g,w){return this.i.add(String(l),d,!0,g,w)};function Kd(l,d,g,w){if(d=l.i.g[String(d)],!d)return!0;d=d.concat();for(var O=!0,L=0;L<d.length;++L){var Y=d[L];if(Y&&!Y.da&&Y.capture==g){var Ge=Y.listener,$t=Y.ha||Y.src;Y.fa&&nv(l.i,Y),O=Ge.call($t,w)!==!1&&O}}return O&&!w.defaultPrevented}function E1(l,d,g){if(typeof l=="function")g&&(l=_(l,g));else if(l&&typeof l.handleEvent=="function")l=_(l.handleEvent,l);else throw Error("Invalid listener argument");return 2147483647<Number(d)?-1:a.setTimeout(l,d||0)}function C1(l){l.g=E1(()=>{l.g=null,l.i&&(l.i=!1,C1(l))},l.l);let d=l.h;l.h=null,l.m.apply(null,d)}class UN extends Ji{constructor(d,g){super(),this.m=d,this.l=g,this.h=null,this.i=!1,this.g=null}j(d){this.h=arguments,this.g?this.i=!0:C1(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function pl(l){Ji.call(this),this.h=l,this.g={}}x(pl,Ji);var I1=[];function S1(l){$e(l.g,function(d,g){this.g.hasOwnProperty(g)&&sv(d)},l),l.g={}}pl.prototype.N=function(){pl.aa.N.call(this),S1(this)},pl.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var uv=a.JSON.stringify,jN=a.JSON.parse,BN=class{stringify(l){return a.JSON.stringify(l,void 0)}parse(l){return a.JSON.parse(l,void 0)}};function dv(){}dv.prototype.h=null;function T1(l){return l.h||(l.h=l.i())}function D1(){}var gl={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function fv(){Yt.call(this,"d")}x(fv,Yt);function hv(){Yt.call(this,"c")}x(hv,Yt);var es={},x1=null;function Yd(){return x1=x1||new Qt}es.La="serverreachability";function M1(l){Yt.call(this,es.La,l)}x(M1,Yt);function ml(l){let d=Yd();dn(d,new M1(d))}es.STAT_EVENT="statevent";function P1(l,d){Yt.call(this,es.STAT_EVENT,l),this.stat=d}x(P1,Yt);function fn(l){let d=Yd();dn(d,new P1(d,l))}es.Ma="timingevent";function A1(l,d){Yt.call(this,es.Ma,l),this.size=d}x(A1,Yt);function vl(l,d){if(typeof l!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){l()},d)}function _l(){this.g=!0}_l.prototype.xa=function(){this.g=!1};function $N(l,d,g,w,O,L){l.info(function(){if(l.g)if(L)for(var Y="",Ge=L.split("&"),$t=0;$t<Ge.length;$t++){var Re=Ge[$t].split("=");if(1<Re.length){var Zt=Re[0];Re=Re[1];var Xt=Zt.split("_");Y=2<=Xt.length&&Xt[1]=="type"?Y+(Zt+"="+Re+"&"):Y+(Zt+"=redacted&")}}else Y=null;else Y=L;return"XMLHTTP REQ ("+w+") [attempt "+O+"]: "+d+`
`+g+`
`+Y})}function HN(l,d,g,w,O,L,Y){l.info(function(){return"XMLHTTP RESP ("+w+") [ attempt "+O+"]: "+d+`
`+g+`
`+L+" "+Y})}function ya(l,d,g,w){l.info(function(){return"XMLHTTP TEXT ("+d+"): "+qN(l,g)+(w?" "+w:"")})}function zN(l,d){l.info(function(){return"TIMEOUT: "+d})}_l.prototype.info=function(){};function qN(l,d){if(!l.g)return d;if(!d)return null;try{var g=JSON.parse(d);if(g){for(l=0;l<g.length;l++)if(Array.isArray(g[l])){var w=g[l];if(!(2>w.length)){var O=w[1];if(Array.isArray(O)&&!(1>O.length)){var L=O[0];if(L!="noop"&&L!="stop"&&L!="close")for(var Y=1;Y<O.length;Y++)O[Y]=""}}}}return uv(g)}catch{return d}}var Qd={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},k1={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},pv;function Zd(){}x(Zd,dv),Zd.prototype.g=function(){return new XMLHttpRequest},Zd.prototype.i=function(){return{}},pv=new Zd;function eo(l,d,g,w){this.j=l,this.i=d,this.l=g,this.R=w||1,this.U=new pl(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new O1}function O1(){this.i=null,this.g="",this.h=!1}var R1={},gv={};function mv(l,d,g){l.L=1,l.v=tf(vi(d)),l.m=g,l.P=!0,N1(l,null)}function N1(l,d){l.F=Date.now(),Xd(l),l.A=vi(l.v);var g=l.A,w=l.R;Array.isArray(w)||(w=[String(w)]),Y1(g.i,"t",w),l.C=0,g=l.j.J,l.h=new O1,l.g=hS(l.j,g?d:null,!l.m),0<l.O&&(l.M=new UN(_(l.Y,l,l.g),l.O)),d=l.U,g=l.g,w=l.ca;var O="readystatechange";Array.isArray(O)||(O&&(I1[0]=O.toString()),O=I1);for(var L=0;L<O.length;L++){var Y=v1(g,O[L],w||d.handleEvent,!1,d.h||d);if(!Y)break;d.g[Y.key]=Y}d=l.H?S(l.H):{},l.m?(l.u||(l.u="POST"),d["Content-Type"]="application/x-www-form-urlencoded",l.g.ea(l.A,l.u,l.m,d)):(l.u="GET",l.g.ea(l.A,l.u,null,d)),ml(),$N(l.i,l.u,l.A,l.l,l.R,l.m)}eo.prototype.ca=function(l){l=l.target;let d=this.M;d&&_i(l)==3?d.j():this.Y(l)},eo.prototype.Y=function(l){try{if(l==this.g)e:{let Xt=_i(this.g);var d=this.g.Ba();let Ea=this.g.Z();if(!(3>Xt)&&(Xt!=3||this.g&&(this.h.h||this.g.oa()||nS(this.g)))){this.J||Xt!=4||d==7||(d==8||0>=Ea?ml(3):ml(2)),vv(this);var g=this.g.Z();this.X=g;t:if(F1(this)){var w=nS(this.g);l="";var O=w.length,L=_i(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){ts(this),yl(this);var Y="";break t}this.h.i=new a.TextDecoder}for(d=0;d<O;d++)this.h.h=!0,l+=this.h.i.decode(w[d],{stream:!(L&&d==O-1)});w.length=0,this.h.g+=l,this.C=0,Y=this.h.g}else Y=this.g.oa();if(this.o=g==200,HN(this.i,this.u,this.A,this.l,this.R,Xt,g),this.o){if(this.T&&!this.K){t:{if(this.g){var Ge,$t=this.g;if((Ge=$t.g?$t.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!oe(Ge)){var Re=Ge;break t}}Re=null}if(g=Re)ya(this.i,this.l,g,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,_v(this,g);else{this.o=!1,this.s=3,fn(12),ts(this),yl(this);break e}}if(this.P){g=!0;let pr;for(;!this.J&&this.C<Y.length;)if(pr=WN(this,Y),pr==gv){Xt==4&&(this.s=4,fn(14),g=!1),ya(this.i,this.l,null,"[Incomplete Response]");break}else if(pr==R1){this.s=4,fn(15),ya(this.i,this.l,Y,"[Invalid Chunk]"),g=!1;break}else ya(this.i,this.l,pr,null),_v(this,pr);if(F1(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Xt!=4||Y.length!=0||this.h.h||(this.s=1,fn(16),g=!1),this.o=this.o&&g,!g)ya(this.i,this.l,Y,"[Invalid Chunked Response]"),ts(this),yl(this);else if(0<Y.length&&!this.W){this.W=!0;var Zt=this.j;Zt.g==this&&Zt.ba&&!Zt.M&&(Zt.j.info("Great, no buffering proxy detected. Bytes received: "+Y.length),Iv(Zt),Zt.M=!0,fn(11))}}else ya(this.i,this.l,Y,null),_v(this,Y);Xt==4&&ts(this),this.o&&!this.J&&(Xt==4?lS(this.j,this):(this.o=!1,Xd(this)))}else lF(this.g),g==400&&0<Y.indexOf("Unknown SID")?(this.s=3,fn(12)):(this.s=0,fn(13)),ts(this),yl(this)}}}catch{}finally{}};function F1(l){return l.g?l.u=="GET"&&l.L!=2&&l.j.Ca:!1}function WN(l,d){var g=l.C,w=d.indexOf(`
`,g);return w==-1?gv:(g=Number(d.substring(g,w)),isNaN(g)?R1:(w+=1,w+g>d.length?gv:(d=d.slice(w,w+g),l.C=w+g,d)))}eo.prototype.cancel=function(){this.J=!0,ts(this)};function Xd(l){l.S=Date.now()+l.I,L1(l,l.I)}function L1(l,d){if(l.B!=null)throw Error("WatchDog timer not null");l.B=vl(_(l.ba,l),d)}function vv(l){l.B&&(a.clearTimeout(l.B),l.B=null)}eo.prototype.ba=function(){this.B=null;let l=Date.now();0<=l-this.S?(zN(this.i,this.A),this.L!=2&&(ml(),fn(17)),ts(this),this.s=2,yl(this)):L1(this,this.S-l)};function yl(l){l.j.G==0||l.J||lS(l.j,l)}function ts(l){vv(l);var d=l.M;d&&typeof d.ma=="function"&&d.ma(),l.M=null,S1(l.U),l.g&&(d=l.g,l.g=null,d.abort(),d.ma())}function _v(l,d){try{var g=l.j;if(g.G!=0&&(g.g==l||yv(g.h,l))){if(!l.K&&yv(g.h,l)&&g.G==3){try{var w=g.Da.g.parse(d)}catch{w=null}if(Array.isArray(w)&&w.length==3){var O=w;if(O[0]==0){e:if(!g.u){if(g.g)if(g.g.F+3e3<l.F)af(g),of(g);else break e;Cv(g),fn(18)}}else g.za=O[1],0<g.za-g.T&&37500>O[2]&&g.F&&g.v==0&&!g.C&&(g.C=vl(_(g.Za,g),6e3));if(1>=j1(g.h)&&g.ca){try{g.ca()}catch{}g.ca=void 0}}else rs(g,11)}else if((l.K||g.g==l)&&af(g),!oe(d))for(O=g.Da.g.parse(d),d=0;d<O.length;d++){let Re=O[d];if(g.T=Re[0],Re=Re[1],g.G==2)if(Re[0]=="c"){g.K=Re[1],g.ia=Re[2];let Zt=Re[3];Zt!=null&&(g.la=Zt,g.j.info("VER="+g.la));let Xt=Re[4];Xt!=null&&(g.Aa=Xt,g.j.info("SVER="+g.Aa));let Ea=Re[5];Ea!=null&&typeof Ea=="number"&&0<Ea&&(w=1.5*Ea,g.L=w,g.j.info("backChannelRequestTimeoutMs_="+w)),w=g;let pr=l.g;if(pr){let lf=pr.g?pr.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(lf){var L=w.h;L.g||lf.indexOf("spdy")==-1&&lf.indexOf("quic")==-1&&lf.indexOf("h2")==-1||(L.j=L.l,L.g=new Set,L.h&&(bv(L,L.h),L.h=null))}if(w.D){let Sv=pr.g?pr.g.getResponseHeader("X-HTTP-Session-Id"):null;Sv&&(w.ya=Sv,Je(w.I,w.D,Sv))}}g.G=3,g.l&&g.l.ua(),g.ba&&(g.R=Date.now()-l.F,g.j.info("Handshake RTT: "+g.R+"ms")),w=g;var Y=l;if(w.qa=fS(w,w.J?w.ia:null,w.W),Y.K){B1(w.h,Y);var Ge=Y,$t=w.L;$t&&(Ge.I=$t),Ge.B&&(vv(Ge),Xd(Ge)),w.g=Y}else aS(w);0<g.i.length&&sf(g)}else Re[0]!="stop"&&Re[0]!="close"||rs(g,7);else g.G==3&&(Re[0]=="stop"||Re[0]=="close"?Re[0]=="stop"?rs(g,7):Ev(g):Re[0]!="noop"&&g.l&&g.l.ta(Re),g.v=0)}}ml(4)}catch{}}var GN=class{constructor(l,d){this.g=l,this.map=d}};function V1(l){this.l=l||10,a.PerformanceNavigationTiming?(l=a.performance.getEntriesByType("navigation"),l=0<l.length&&(l[0].nextHopProtocol=="hq"||l[0].nextHopProtocol=="h2")):l=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=l?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function U1(l){return l.h?!0:l.g?l.g.size>=l.j:!1}function j1(l){return l.h?1:l.g?l.g.size:0}function yv(l,d){return l.h?l.h==d:l.g?l.g.has(d):!1}function bv(l,d){l.g?l.g.add(d):l.h=d}function B1(l,d){l.h&&l.h==d?l.h=null:l.g&&l.g.has(d)&&l.g.delete(d)}V1.prototype.cancel=function(){if(this.i=$1(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(let l of this.g.values())l.cancel();this.g.clear()}};function $1(l){if(l.h!=null)return l.i.concat(l.h.D);if(l.g!=null&&l.g.size!==0){let d=l.i;for(let g of l.g.values())d=d.concat(g.D);return d}return V(l.i)}function KN(l){if(l.V&&typeof l.V=="function")return l.V();if(typeof Map<"u"&&l instanceof Map||typeof Set<"u"&&l instanceof Set)return Array.from(l.values());if(typeof l=="string")return l.split("");if(c(l)){for(var d=[],g=l.length,w=0;w<g;w++)d.push(l[w]);return d}d=[],g=0;for(w in l)d[g++]=l[w];return d}function YN(l){if(l.na&&typeof l.na=="function")return l.na();if(!l.V||typeof l.V!="function"){if(typeof Map<"u"&&l instanceof Map)return Array.from(l.keys());if(!(typeof Set<"u"&&l instanceof Set)){if(c(l)||typeof l=="string"){var d=[];l=l.length;for(var g=0;g<l;g++)d.push(g);return d}d=[],g=0;for(let w in l)d[g++]=w;return d}}}function H1(l,d){if(l.forEach&&typeof l.forEach=="function")l.forEach(d,void 0);else if(c(l)||typeof l=="string")Array.prototype.forEach.call(l,d,void 0);else for(var g=YN(l),w=KN(l),O=w.length,L=0;L<O;L++)d.call(void 0,w[L],g&&g[L],l)}var z1=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function QN(l,d){if(l){l=l.split("&");for(var g=0;g<l.length;g++){var w=l[g].indexOf("="),O=null;if(0<=w){var L=l[g].substring(0,w);O=l[g].substring(w+1)}else L=l[g];d(L,O?decodeURIComponent(O.replace(/\+/g," ")):"")}}}function ns(l){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,l instanceof ns){this.h=l.h,Jd(this,l.j),this.o=l.o,this.g=l.g,ef(this,l.s),this.l=l.l;var d=l.i,g=new El;g.i=d.i,d.g&&(g.g=new Map(d.g),g.h=d.h),q1(this,g),this.m=l.m}else l&&(d=String(l).match(z1))?(this.h=!1,Jd(this,d[1]||"",!0),this.o=bl(d[2]||""),this.g=bl(d[3]||"",!0),ef(this,d[4]),this.l=bl(d[5]||"",!0),q1(this,d[6]||"",!0),this.m=bl(d[7]||"")):(this.h=!1,this.i=new El(null,this.h))}ns.prototype.toString=function(){var l=[],d=this.j;d&&l.push(wl(d,W1,!0),":");var g=this.g;return(g||d=="file")&&(l.push("//"),(d=this.o)&&l.push(wl(d,W1,!0),"@"),l.push(encodeURIComponent(String(g)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),g=this.s,g!=null&&l.push(":",String(g))),(g=this.l)&&(this.g&&g.charAt(0)!="/"&&l.push("/"),l.push(wl(g,g.charAt(0)=="/"?JN:XN,!0))),(g=this.i.toString())&&l.push("?",g),(g=this.m)&&l.push("#",wl(g,tF)),l.join("")};function vi(l){return new ns(l)}function Jd(l,d,g){l.j=g?bl(d,!0):d,l.j&&(l.j=l.j.replace(/:$/,""))}function ef(l,d){if(d){if(d=Number(d),isNaN(d)||0>d)throw Error("Bad port number "+d);l.s=d}else l.s=null}function q1(l,d,g){d instanceof El?(l.i=d,nF(l.i,l.h)):(g||(d=wl(d,eF)),l.i=new El(d,l.h))}function Je(l,d,g){l.i.set(d,g)}function tf(l){return Je(l,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),l}function bl(l,d){return l?d?decodeURI(l.replace(/%25/g,"%2525")):decodeURIComponent(l):""}function wl(l,d,g){return typeof l=="string"?(l=encodeURI(l).replace(d,ZN),g&&(l=l.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),l):null}function ZN(l){return l=l.charCodeAt(0),"%"+(l>>4&15).toString(16)+(l&15).toString(16)}var W1=/[#\/\?@]/g,XN=/[#\?:]/g,JN=/[#\?]/g,eF=/[#\?@]/g,tF=/#/g;function El(l,d){this.h=this.g=null,this.i=l||null,this.j=!!d}function to(l){l.g||(l.g=new Map,l.h=0,l.i&&QN(l.i,function(d,g){l.add(decodeURIComponent(d.replace(/\+/g," ")),g)}))}n=El.prototype,n.add=function(l,d){to(this),this.i=null,l=ba(this,l);var g=this.g.get(l);return g||this.g.set(l,g=[]),g.push(d),this.h+=1,this};function G1(l,d){to(l),d=ba(l,d),l.g.has(d)&&(l.i=null,l.h-=l.g.get(d).length,l.g.delete(d))}function K1(l,d){return to(l),d=ba(l,d),l.g.has(d)}n.forEach=function(l,d){to(this),this.g.forEach(function(g,w){g.forEach(function(O){l.call(d,O,w,this)},this)},this)},n.na=function(){to(this);let l=Array.from(this.g.values()),d=Array.from(this.g.keys()),g=[];for(let w=0;w<d.length;w++){let O=l[w];for(let L=0;L<O.length;L++)g.push(d[w])}return g},n.V=function(l){to(this);let d=[];if(typeof l=="string")K1(this,l)&&(d=d.concat(this.g.get(ba(this,l))));else{l=Array.from(this.g.values());for(let g=0;g<l.length;g++)d=d.concat(l[g])}return d},n.set=function(l,d){return to(this),this.i=null,l=ba(this,l),K1(this,l)&&(this.h-=this.g.get(l).length),this.g.set(l,[d]),this.h+=1,this},n.get=function(l,d){return l?(l=this.V(l),0<l.length?String(l[0]):d):d};function Y1(l,d,g){G1(l,d),0<g.length&&(l.i=null,l.g.set(ba(l,d),V(g)),l.h+=g.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";let l=[],d=Array.from(this.g.keys());for(var g=0;g<d.length;g++){var w=d[g];let L=encodeURIComponent(String(w)),Y=this.V(w);for(w=0;w<Y.length;w++){var O=L;Y[w]!==""&&(O+="="+encodeURIComponent(String(Y[w]))),l.push(O)}}return this.i=l.join("&")};function ba(l,d){return d=String(d),l.j&&(d=d.toLowerCase()),d}function nF(l,d){d&&!l.j&&(to(l),l.i=null,l.g.forEach(function(g,w){var O=w.toLowerCase();w!=O&&(G1(this,w),Y1(this,O,g))},l)),l.j=d}function rF(l,d){let g=new _l;if(a.Image){let w=new Image;w.onload=E(no,g,"TestLoadImage: loaded",!0,d,w),w.onerror=E(no,g,"TestLoadImage: error",!1,d,w),w.onabort=E(no,g,"TestLoadImage: abort",!1,d,w),w.ontimeout=E(no,g,"TestLoadImage: timeout",!1,d,w),a.setTimeout(function(){w.ontimeout&&w.ontimeout()},1e4),w.src=l}else d(!1)}function iF(l,d){let g=new _l,w=new AbortController,O=setTimeout(()=>{w.abort(),no(g,"TestPingServer: timeout",!1,d)},1e4);fetch(l,{signal:w.signal}).then(L=>{clearTimeout(O),L.ok?no(g,"TestPingServer: ok",!0,d):no(g,"TestPingServer: server error",!1,d)}).catch(()=>{clearTimeout(O),no(g,"TestPingServer: error",!1,d)})}function no(l,d,g,w,O){try{O&&(O.onload=null,O.onerror=null,O.onabort=null,O.ontimeout=null),w(g)}catch{}}function oF(){this.g=new BN}function sF(l,d,g){let w=g||"";try{H1(l,function(O,L){let Y=O;u(O)&&(Y=uv(O)),d.push(w+L+"="+encodeURIComponent(Y))})}catch(O){throw d.push(w+"type="+encodeURIComponent("_badmap")),O}}function Cl(l){this.l=l.Ub||null,this.j=l.eb||!1}x(Cl,dv),Cl.prototype.g=function(){return new nf(this.l,this.j)},Cl.prototype.i=(function(l){return function(){return l}})({});function nf(l,d){Qt.call(this),this.D=l,this.o=d,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}x(nf,Qt),n=nf.prototype,n.open=function(l,d){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=l,this.A=d,this.readyState=1,Sl(this)},n.send=function(l){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;let d={headers:this.u,method:this.B,credentials:this.m,cache:void 0};l&&(d.body=l),(this.D||a).fetch(new Request(this.A,d)).then(this.Sa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Il(this)),this.readyState=0},n.Sa=function(l){if(this.g&&(this.l=l,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=l.headers,this.readyState=2,Sl(this)),this.g&&(this.readyState=3,Sl(this),this.g)))if(this.responseType==="arraybuffer")l.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in l){if(this.j=l.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Q1(this)}else l.text().then(this.Ra.bind(this),this.ga.bind(this))};function Q1(l){l.j.read().then(l.Pa.bind(l)).catch(l.ga.bind(l))}n.Pa=function(l){if(this.g){if(this.o&&l.value)this.response.push(l.value);else if(!this.o){var d=l.value?l.value:new Uint8Array(0);(d=this.v.decode(d,{stream:!l.done}))&&(this.response=this.responseText+=d)}l.done?Il(this):Sl(this),this.readyState==3&&Q1(this)}},n.Ra=function(l){this.g&&(this.response=this.responseText=l,Il(this))},n.Qa=function(l){this.g&&(this.response=l,Il(this))},n.ga=function(){this.g&&Il(this)};function Il(l){l.readyState=4,l.l=null,l.j=null,l.v=null,Sl(l)}n.setRequestHeader=function(l,d){this.u.append(l,d)},n.getResponseHeader=function(l){return this.h&&this.h.get(l.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";let l=[],d=this.h.entries();for(var g=d.next();!g.done;)g=g.value,l.push(g[0]+": "+g[1]),g=d.next();return l.join(`\r
`)};function Sl(l){l.onreadystatechange&&l.onreadystatechange.call(l)}Object.defineProperty(nf.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(l){this.m=l?"include":"same-origin"}});function Z1(l){let d="";return $e(l,function(g,w){d+=w,d+=":",d+=g,d+=`\r
`}),d}function wv(l,d,g){e:{for(w in g){var w=!1;break e}w=!0}w||(g=Z1(g),typeof l=="string"?g!=null&&encodeURIComponent(String(g)):Je(l,d,g))}function ut(l){Qt.call(this),this.headers=new Map,this.o=l||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}x(ut,Qt);var aF=/^https?$/i,cF=["POST","PUT"];n=ut.prototype,n.Ha=function(l){this.J=l},n.ea=function(l,d,g,w){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+l);d=d?d.toUpperCase():"GET",this.D=l,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():pv.g(),this.v=this.o?T1(this.o):T1(pv),this.g.onreadystatechange=_(this.Ea,this);try{this.B=!0,this.g.open(d,String(l),!0),this.B=!1}catch(L){X1(this,L);return}if(l=g||"",g=new Map(this.headers),w)if(Object.getPrototypeOf(w)===Object.prototype)for(var O in w)g.set(O,w[O]);else if(typeof w.keys=="function"&&typeof w.get=="function")for(let L of w.keys())g.set(L,w.get(L));else throw Error("Unknown input type for opt_headers: "+String(w));w=Array.from(g.keys()).find(L=>L.toLowerCase()=="content-type"),O=a.FormData&&l instanceof a.FormData,!(0<=Array.prototype.indexOf.call(cF,d,void 0))||w||O||g.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(let[L,Y]of g)this.g.setRequestHeader(L,Y);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{tS(this),this.u=!0,this.g.send(l),this.u=!1}catch(L){X1(this,L)}};function X1(l,d){l.h=!1,l.g&&(l.j=!0,l.g.abort(),l.j=!1),l.l=d,l.m=5,J1(l),rf(l)}function J1(l){l.A||(l.A=!0,dn(l,"complete"),dn(l,"error"))}n.abort=function(l){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=l||7,dn(this,"complete"),dn(this,"abort"),rf(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),rf(this,!0)),ut.aa.N.call(this)},n.Ea=function(){this.s||(this.B||this.u||this.j?eS(this):this.bb())},n.bb=function(){eS(this)};function eS(l){if(l.h&&typeof s<"u"&&(!l.v[1]||_i(l)!=4||l.Z()!=2)){if(l.u&&_i(l)==4)E1(l.Ea,0,l);else if(dn(l,"readystatechange"),_i(l)==4){l.h=!1;try{let Y=l.Z();e:switch(Y){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var d=!0;break e;default:d=!1}var g;if(!(g=d)){var w;if(w=Y===0){var O=String(l.D).match(z1)[1]||null;!O&&a.self&&a.self.location&&(O=a.self.location.protocol.slice(0,-1)),w=!aF.test(O?O.toLowerCase():"")}g=w}if(g)dn(l,"complete"),dn(l,"success");else{l.m=6;try{var L=2<_i(l)?l.g.statusText:""}catch{L=""}l.l=L+" ["+l.Z()+"]",J1(l)}}finally{rf(l)}}}}function rf(l,d){if(l.g){tS(l);let g=l.g,w=l.v[0]?()=>{}:null;l.g=null,l.v=null,d||dn(l,"ready");try{g.onreadystatechange=w}catch{}}}function tS(l){l.I&&(a.clearTimeout(l.I),l.I=null)}n.isActive=function(){return!!this.g};function _i(l){return l.g?l.g.readyState:0}n.Z=function(){try{return 2<_i(this)?this.g.status:-1}catch{return-1}},n.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.Oa=function(l){if(this.g){var d=this.g.responseText;return l&&d.indexOf(l)==0&&(d=d.substring(l.length)),jN(d)}};function nS(l){try{if(!l.g)return null;if("response"in l.g)return l.g.response;switch(l.H){case"":case"text":return l.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in l.g)return l.g.mozResponseArrayBuffer}return null}catch{return null}}function lF(l){let d={};l=(l.g&&2<=_i(l)&&l.g.getAllResponseHeaders()||"").split(`\r
`);for(let w=0;w<l.length;w++){if(oe(l[w]))continue;var g=A(l[w]);let O=g[0];if(g=g[1],typeof g!="string")continue;g=g.trim();let L=d[O]||[];d[O]=L,L.push(g)}P(d,function(w){return w.join(", ")})}n.Ba=function(){return this.m},n.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Tl(l,d,g){return g&&g.internalChannelParams&&g.internalChannelParams[l]||d}function rS(l){this.Aa=0,this.i=[],this.j=new _l,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Tl("failFast",!1,l),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Tl("baseRetryDelayMs",5e3,l),this.cb=Tl("retryDelaySeedMs",1e4,l),this.Wa=Tl("forwardChannelMaxRetries",2,l),this.wa=Tl("forwardChannelRequestTimeoutMs",2e4,l),this.pa=l&&l.xmlHttpFactory||void 0,this.Xa=l&&l.Tb||void 0,this.Ca=l&&l.useFetchStreams||!1,this.L=void 0,this.J=l&&l.supportsCrossDomainXhr||!1,this.K="",this.h=new V1(l&&l.concurrentRequestLimit),this.Da=new oF,this.P=l&&l.fastHandshake||!1,this.O=l&&l.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=l&&l.Rb||!1,l&&l.xa&&this.j.xa(),l&&l.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&l&&l.detectBufferingProxy||!1,this.ja=void 0,l&&l.longPollingTimeout&&0<l.longPollingTimeout&&(this.ja=l.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}n=rS.prototype,n.la=8,n.G=1,n.connect=function(l,d,g,w){fn(0),this.W=l,this.H=d||{},g&&w!==void 0&&(this.H.OSID=g,this.H.OAID=w),this.F=this.X,this.I=fS(this,null,this.W),sf(this)};function Ev(l){if(iS(l),l.G==3){var d=l.U++,g=vi(l.I);if(Je(g,"SID",l.K),Je(g,"RID",d),Je(g,"TYPE","terminate"),Dl(l,g),d=new eo(l,l.j,d),d.L=2,d.v=tf(vi(g)),g=!1,a.navigator&&a.navigator.sendBeacon)try{g=a.navigator.sendBeacon(d.v.toString(),"")}catch{}!g&&a.Image&&(new Image().src=d.v,g=!0),g||(d.g=hS(d.j,null),d.g.ea(d.v)),d.F=Date.now(),Xd(d)}dS(l)}function of(l){l.g&&(Iv(l),l.g.cancel(),l.g=null)}function iS(l){of(l),l.u&&(a.clearTimeout(l.u),l.u=null),af(l),l.h.cancel(),l.s&&(typeof l.s=="number"&&a.clearTimeout(l.s),l.s=null)}function sf(l){if(!U1(l.h)&&!l.s){l.s=!0;var d=l.Ga;ul||m1(),dl||(ul(),dl=!0),tv.add(d,l),l.B=0}}function uF(l,d){return j1(l.h)>=l.h.j-(l.s?1:0)?!1:l.s?(l.i=d.D.concat(l.i),!0):l.G==1||l.G==2||l.B>=(l.Va?0:l.Wa)?!1:(l.s=vl(_(l.Ga,l,d),uS(l,l.B)),l.B++,!0)}n.Ga=function(l){if(this.s)if(this.s=null,this.G==1){if(!l){this.U=Math.floor(1e5*Math.random()),l=this.U++;let O=new eo(this,this.j,l),L=this.o;if(this.S&&(L?(L=S(L),M(L,this.S)):L=this.S),this.m!==null||this.O||(O.H=L,L=null),this.P)e:{for(var d=0,g=0;g<this.i.length;g++){t:{var w=this.i[g];if("__data__"in w.map&&(w=w.map.__data__,typeof w=="string")){w=w.length;break t}w=void 0}if(w===void 0)break;if(d+=w,4096<d){d=g;break e}if(d===4096||g===this.i.length-1){d=g+1;break e}}d=1e3}else d=1e3;d=sS(this,O,d),g=vi(this.I),Je(g,"RID",l),Je(g,"CVER",22),this.D&&Je(g,"X-HTTP-Session-Id",this.D),Dl(this,g),L&&(this.O?d="headers="+encodeURIComponent(String(Z1(L)))+"&"+d:this.m&&wv(g,this.m,L)),bv(this.h,O),this.Ua&&Je(g,"TYPE","init"),this.P?(Je(g,"$req",d),Je(g,"SID","null"),O.T=!0,mv(O,g,null)):mv(O,g,d),this.G=2}}else this.G==3&&(l?oS(this,l):this.i.length==0||U1(this.h)||oS(this))};function oS(l,d){var g;d?g=d.l:g=l.U++;let w=vi(l.I);Je(w,"SID",l.K),Je(w,"RID",g),Je(w,"AID",l.T),Dl(l,w),l.m&&l.o&&wv(w,l.m,l.o),g=new eo(l,l.j,g,l.B+1),l.m===null&&(g.H=l.o),d&&(l.i=d.D.concat(l.i)),d=sS(l,g,1e3),g.I=Math.round(.5*l.wa)+Math.round(.5*l.wa*Math.random()),bv(l.h,g),mv(g,w,d)}function Dl(l,d){l.H&&$e(l.H,function(g,w){Je(d,w,g)}),l.l&&H1({},function(g,w){Je(d,w,g)})}function sS(l,d,g){g=Math.min(l.i.length,g);var w=l.l?_(l.l.Na,l.l,l):null;e:{var O=l.i;let L=-1;for(;;){let Y=["count="+g];L==-1?0<g?(L=O[0].g,Y.push("ofs="+L)):L=0:Y.push("ofs="+L);let Ge=!0;for(let $t=0;$t<g;$t++){let Re=O[$t].g,Zt=O[$t].map;if(Re-=L,0>Re)L=Math.max(0,O[$t].g-100),Ge=!1;else try{sF(Zt,Y,"req"+Re+"_")}catch{w&&w(Zt)}}if(Ge){w=Y.join("&");break e}}}return l=l.i.splice(0,g),d.D=l,w}function aS(l){if(!l.g&&!l.u){l.Y=1;var d=l.Fa;ul||m1(),dl||(ul(),dl=!0),tv.add(d,l),l.v=0}}function Cv(l){return l.g||l.u||3<=l.v?!1:(l.Y++,l.u=vl(_(l.Fa,l),uS(l,l.v)),l.v++,!0)}n.Fa=function(){if(this.u=null,cS(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var l=2*this.R;this.j.info("BP detection timer enabled: "+l),this.A=vl(_(this.ab,this),l)}},n.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,fn(10),of(this),cS(this))};function Iv(l){l.A!=null&&(a.clearTimeout(l.A),l.A=null)}function cS(l){l.g=new eo(l,l.j,"rpc",l.Y),l.m===null&&(l.g.H=l.o),l.g.O=0;var d=vi(l.qa);Je(d,"RID","rpc"),Je(d,"SID",l.K),Je(d,"AID",l.T),Je(d,"CI",l.F?"0":"1"),!l.F&&l.ja&&Je(d,"TO",l.ja),Je(d,"TYPE","xmlhttp"),Dl(l,d),l.m&&l.o&&wv(d,l.m,l.o),l.L&&(l.g.I=l.L);var g=l.g;l=l.ia,g.L=1,g.v=tf(vi(d)),g.m=null,g.P=!0,N1(g,l)}n.Za=function(){this.C!=null&&(this.C=null,of(this),Cv(this),fn(19))};function af(l){l.C!=null&&(a.clearTimeout(l.C),l.C=null)}function lS(l,d){var g=null;if(l.g==d){af(l),Iv(l),l.g=null;var w=2}else if(yv(l.h,d))g=d.D,B1(l.h,d),w=1;else return;if(l.G!=0){if(d.o)if(w==1){g=d.m?d.m.length:0,d=Date.now()-d.F;var O=l.B;w=Yd(),dn(w,new A1(w,g)),sf(l)}else aS(l);else if(O=d.s,O==3||O==0&&0<d.X||!(w==1&&uF(l,d)||w==2&&Cv(l)))switch(g&&0<g.length&&(d=l.h,d.i=d.i.concat(g)),O){case 1:rs(l,5);break;case 4:rs(l,10);break;case 3:rs(l,6);break;default:rs(l,2)}}}function uS(l,d){let g=l.Ta+Math.floor(Math.random()*l.cb);return l.isActive()||(g*=2),g*d}function rs(l,d){if(l.j.info("Error code "+d),d==2){var g=_(l.fb,l),w=l.Xa;let O=!w;w=new ns(w||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||Jd(w,"https"),tf(w),O?rF(w.toString(),g):iF(w.toString(),g)}else fn(2);l.G=0,l.l&&l.l.sa(d),dS(l),iS(l)}n.fb=function(l){l?(this.j.info("Successfully pinged google.com"),fn(2)):(this.j.info("Failed to ping google.com"),fn(1))};function dS(l){if(l.G=0,l.ka=[],l.l){let d=$1(l.h);(d.length!=0||l.i.length!=0)&&(U(l.ka,d),U(l.ka,l.i),l.h.i.length=0,V(l.i),l.i.length=0),l.l.ra()}}function fS(l,d,g){var w=g instanceof ns?vi(g):new ns(g);if(w.g!="")d&&(w.g=d+"."+w.g),ef(w,w.s);else{var O=a.location;w=O.protocol,d=d?d+"."+O.hostname:O.hostname,O=+O.port;var L=new ns(null);w&&Jd(L,w),d&&(L.g=d),O&&ef(L,O),g&&(L.l=g),w=L}return g=l.D,d=l.ya,g&&d&&Je(w,g,d),Je(w,"VER",l.la),Dl(l,w),w}function hS(l,d,g){if(d&&!l.J)throw Error("Can't create secondary domain capable XhrIo object.");return d=l.Ca&&!l.pa?new ut(new Cl({eb:g})):new ut(l.pa),d.Ha(l.J),d}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function pS(){}n=pS.prototype,n.ua=function(){},n.ta=function(){},n.sa=function(){},n.ra=function(){},n.isActive=function(){return!0},n.Na=function(){};function cf(){}cf.prototype.g=function(l,d){return new Rn(l,d)};function Rn(l,d){Qt.call(this),this.g=new rS(d),this.l=l,this.h=d&&d.messageUrlParams||null,l=d&&d.messageHeaders||null,d&&d.clientProtocolHeaderRequired&&(l?l["X-Client-Protocol"]="webchannel":l={"X-Client-Protocol":"webchannel"}),this.g.o=l,l=d&&d.initMessageHeaders||null,d&&d.messageContentType&&(l?l["X-WebChannel-Content-Type"]=d.messageContentType:l={"X-WebChannel-Content-Type":d.messageContentType}),d&&d.va&&(l?l["X-WebChannel-Client-Profile"]=d.va:l={"X-WebChannel-Client-Profile":d.va}),this.g.S=l,(l=d&&d.Sb)&&!oe(l)&&(this.g.m=l),this.v=d&&d.supportsCrossDomainXhr||!1,this.u=d&&d.sendRawJson||!1,(d=d&&d.httpSessionIdParam)&&!oe(d)&&(this.g.D=d,l=this.h,l!==null&&d in l&&(l=this.h,d in l&&delete l[d])),this.j=new wa(this)}x(Rn,Qt),Rn.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Rn.prototype.close=function(){Ev(this.g)},Rn.prototype.o=function(l){var d=this.g;if(typeof l=="string"){var g={};g.__data__=l,l=g}else this.u&&(g={},g.__data__=uv(l),l=g);d.i.push(new GN(d.Ya++,l)),d.G==3&&sf(d)},Rn.prototype.N=function(){this.g.l=null,delete this.j,Ev(this.g),delete this.g,Rn.aa.N.call(this)};function gS(l){fv.call(this),l.__headers__&&(this.headers=l.__headers__,this.statusCode=l.__status__,delete l.__headers__,delete l.__status__);var d=l.__sm__;if(d){e:{for(let g in d){l=g;break e}l=void 0}(this.i=l)&&(l=this.i,d=d!==null&&l in d?d[l]:void 0),this.data=d}else this.data=l}x(gS,fv);function mS(){hv.call(this),this.status=1}x(mS,hv);function wa(l){this.g=l}x(wa,pS),wa.prototype.ua=function(){dn(this.g,"a")},wa.prototype.ta=function(l){dn(this.g,new gS(l))},wa.prototype.sa=function(l){dn(this.g,new mS)},wa.prototype.ra=function(){dn(this.g,"b")},cf.prototype.createWebChannel=cf.prototype.g,Rn.prototype.send=Rn.prototype.o,Rn.prototype.open=Rn.prototype.m,Rn.prototype.close=Rn.prototype.close,pE=Hi.createWebChannelTransport=function(){return new cf},hE=Hi.getStatEventTarget=function(){return Yd()},fE=Hi.Event=es,Mg=Hi.Stat={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Qd.NO_ERROR=0,Qd.TIMEOUT=8,Qd.HTTP_ERROR=6,cd=Hi.ErrorCode=Qd,k1.COMPLETE="complete",dE=Hi.EventType=k1,D1.EventType=gl,gl.OPEN="a",gl.CLOSE="b",gl.ERROR="c",gl.MESSAGE="d",Qt.prototype.listen=Qt.prototype.K,Mc=Hi.WebChannel=D1,Q$=Hi.FetchXmlHttpFactory=Cl,ut.prototype.listenOnce=ut.prototype.L,ut.prototype.getLastError=ut.prototype.Ka,ut.prototype.getLastErrorCode=ut.prototype.Ba,ut.prototype.getStatus=ut.prototype.Z,ut.prototype.getResponseJson=ut.prototype.Oa,ut.prototype.getResponseText=ut.prototype.oa,ut.prototype.send=ut.prototype.ea,ut.prototype.setWithCredentials=ut.prototype.Ha,uE=Hi.XhrIo=ut}).apply(typeof xg<"u"?xg:typeof self<"u"?self:typeof window<"u"?window:{});var Dk="@firebase/firestore",xk="4.8.0";var Ut=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};Ut.UNAUTHENTICATED=new Ut(null),Ut.GOOGLE_CREDENTIALS=new Ut("google-credentials-uid"),Ut.FIRST_PARTY=new Ut("first-party-uid"),Ut.MOCK_USER=new Ut("mock-user");var Kc="11.10.0";var ea=new ir("@firebase/firestore");function Pc(){return ea.logLevel}function te(n,...e){if(ea.logLevel<=De.DEBUG){let t=e.map(aI);ea.debug(`Firestore (${Kc}): ${n}`,...t)}}function zi(n,...e){if(ea.logLevel<=De.ERROR){let t=e.map(aI);ea.error(`Firestore (${Kc}): ${n}`,...t)}}function Wo(n,...e){if(ea.logLevel<=De.WARN){let t=e.map(aI);ea.warn(`Firestore (${Kc}): ${n}`,...t)}}function aI(n){if(typeof n=="string")return n;try{return(function(t){return JSON.stringify(t)})(n)}catch{return n}}function le(n,e,t){let r="Unexpected state";typeof e=="string"?r=e:t=e,yO(n,r,t)}function yO(n,e,t){let r=`FIRESTORE (${Kc}) INTERNAL ASSERTION FAILED: ${e} (ID: ${n.toString(16)})`;if(t!==void 0)try{r+=" CONTEXT: "+JSON.stringify(t)}catch{r+=" CONTEXT: "+t}throw zi(r),new Error(r)}function Be(n,e,t,r){let i="Unexpected state";typeof t=="string"?i=t:r=t,n||yO(e,i,r)}function me(n,e){return n}var $={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},G=class extends Gt{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}};var Lr=class{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}};var Fg=class{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}},bE=class{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(Ut.UNAUTHENTICATED))}shutdown(){}},wE=class{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}},EE=class{constructor(e){this.t=e,this.currentUser=Ut.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){Be(this.o===void 0,42304);let r=this.i,i=c=>this.i!==r?(r=this.i,t(c)):Promise.resolve(),o=new Lr;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new Lr,e.enqueueRetryable(()=>i(this.currentUser))};let s=()=>{let c=o;e.enqueueRetryable(()=>y(this,null,function*(){yield c.promise,yield i(this.currentUser)}))},a=c=>{te("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=c,this.o&&(this.auth.addAuthTokenListener(this.o),s())};this.t.onInit(c=>a(c)),setTimeout(()=>{if(!this.auth){let c=this.t.getImmediate({optional:!0});c?a(c):(te("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new Lr)}},0),s()}getToken(){let e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(te("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Be(typeof r.accessToken=="string",31837,{l:r}),new Fg(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){let e=this.auth&&this.auth.getUid();return Be(e===null||typeof e=="string",2055,{h:e}),new Ut(e)}},CE=class{constructor(e,t,r){this.P=e,this.T=t,this.I=r,this.type="FirstParty",this.user=Ut.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);let e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}},IE=class{constructor(e,t,r){this.P=e,this.T=t,this.I=r}getToken(){return Promise.resolve(new CE(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable(()=>t(Ut.FIRST_PARTY))}shutdown(){}invalidateToken(){}},Lg=class{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}},SE=class{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,yn(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){Be(this.o===void 0,3512);let r=o=>{o.error!=null&&te("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${o.error.message}`);let s=o.token!==this.m;return this.m=o.token,te("FirebaseAppCheckTokenProvider",`Received ${s?"new":"existing"} token.`),s?t(o.token):Promise.resolve()};this.o=o=>{e.enqueueRetryable(()=>r(o))};let i=o=>{te("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=o,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(o=>i(o)),setTimeout(()=>{if(!this.appCheck){let o=this.V.getImmediate({optional:!0});o?i(o):te("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new Lg(this.p));let e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(Be(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new Lg(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}};function Z$(n){let e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}function bO(){return new TextEncoder}var hd=class{static newId(){let e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516),r="";for(;r.length<20;){let i=Z$(40);for(let o=0;o<i.length;++o)r.length<20&&i[o]<t&&(r+=e.charAt(i[o]%62))}return r}};function Se(n,e){return n<e?-1:n>e?1:0}function TE(n,e){let t=0;for(;t<n.length&&t<e.length;){let r=n.codePointAt(t),i=e.codePointAt(t);if(r!==i){if(r<128&&i<128)return Se(r,i);{let o=bO(),s=X$(o.encode(Mk(n,t)),o.encode(Mk(e,t)));return s!==0?s:Se(r,i)}}t+=r>65535?2:1}return Se(n.length,e.length)}function Mk(n,e){return n.codePointAt(e)>65535?n.substring(e,e+2):n.substring(e,e+1)}function X$(n,e){for(let t=0;t<n.length&&t<e.length;++t)if(n[t]!==e[t])return Se(n[t],e[t]);return Se(n.length,e.length)}function Vc(n,e,t){return n.length===e.length&&n.every((r,i)=>t(r,e[i]))}var Pk="__name__",Vg=class n{constructor(e,t,r){t===void 0?t=0:t>e.length&&le(637,{offset:t,range:e.length}),r===void 0?r=e.length-t:r>e.length-t&&le(1746,{length:r,range:e.length-t}),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return n.comparator(this,e)===0}child(e){let t=this.segments.slice(this.offset,this.limit());return e instanceof n?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){let r=Math.min(e.length,t.length);for(let i=0;i<r;i++){let o=n.compareSegments(e.get(i),t.get(i));if(o!==0)return o}return Se(e.length,t.length)}static compareSegments(e,t){let r=n.isNumericId(e),i=n.isNumericId(t);return r&&!i?-1:!r&&i?1:r&&i?n.extractNumericId(e).compare(n.extractNumericId(t)):TE(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return $i.fromString(e.substring(4,e.length-2))}},tt=class n extends Vg{construct(e,t,r){return new n(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){let t=[];for(let r of e){if(r.indexOf("//")>=0)throw new G($.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(i=>i.length>0))}return new n(t)}static emptyPath(){return new n([])}},J$=/^[_a-zA-Z][_a-zA-Z0-9]*$/,zn=class n extends Vg{construct(e,t,r){return new n(e,t,r)}static isValidIdentifier(e){return J$.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),n.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===Pk}static keyField(){return new n([Pk])}static fromServerFormat(e){let t=[],r="",i=0,o=()=>{if(r.length===0)throw new G($.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""},s=!1;for(;i<e.length;){let a=e[i];if(a==="\\"){if(i+1===e.length)throw new G($.INVALID_ARGUMENT,"Path has trailing escape character: "+e);let c=e[i+1];if(c!=="\\"&&c!=="."&&c!=="`")throw new G($.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=c,i+=2}else a==="`"?(s=!s,i++):a!=="."||s?(r+=a,i++):(o(),i++)}if(o(),s)throw new G($.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new n(t)}static emptyPath(){return new n([])}};var ae=class n{constructor(e){this.path=e}static fromPath(e){return new n(tt.fromString(e))}static fromName(e){return new n(tt.fromString(e).popFirst(5))}static empty(){return new n(tt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&tt.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return tt.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new n(new tt(e.slice()))}};function wO(n,e,t){if(!t)throw new G($.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function e7(n,e,t,r){if(e===!0&&r===!0)throw new G($.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function Ak(n){if(!ae.isDocumentKey(n))throw new G($.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function kk(n){if(ae.isDocumentKey(n))throw new G($.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function EO(n){return typeof n=="object"&&n!==null&&(Object.getPrototypeOf(n)===Object.prototype||Object.getPrototypeOf(n)===null)}function vm(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{let e=(function(r){return r.constructor?r.constructor.name:null})(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":le(12329,{type:typeof n})}function bn(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new G($.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{let t=vm(n);throw new G($.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function t7(n,e){if(e<=0)throw new G($.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${e}.`)}function St(n,e){let t={typeString:n};return e&&(t.value=e),t}function Dd(n,e){if(!EO(n))throw new G($.INVALID_ARGUMENT,"JSON must be an object");let t;for(let r in e)if(e[r]){let i=e[r].typeString,o="value"in e[r]?{value:e[r].value}:void 0;if(!(r in n)){t=`JSON missing required field: '${r}'`;break}let s=n[r];if(i&&typeof s!==i){t=`JSON field '${r}' must be a ${i}.`;break}if(o!==void 0&&s!==o.value){t=`Expected '${r}' field to equal '${o.value}'`;break}}if(t)throw new G($.INVALID_ARGUMENT,t);return!0}var Ok=-62135596800,Rk=1e6,it=class n{static now(){return n.fromMillis(Date.now())}static fromDate(e){return n.fromMillis(e.getTime())}static fromMillis(e){let t=Math.floor(e/1e3),r=Math.floor((e-1e3*t)*Rk);return new n(t,r)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new G($.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new G($.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<Ok)throw new G($.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new G($.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/Rk}_compareTo(e){return this.seconds===e.seconds?Se(this.nanoseconds,e.nanoseconds):Se(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:n._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(Dd(e,n._jsonSchema))return new n(e.seconds,e.nanoseconds)}valueOf(){let e=this.seconds-Ok;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}};it._jsonSchemaVersion="firestore/timestamp/1.0",it._jsonSchema={type:St("string",it._jsonSchemaVersion),seconds:St("number"),nanoseconds:St("number")};var _e=class n{static fromTimestamp(e){return new n(e)}static min(){return new n(new it(0,0))}static max(){return new n(new it(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}};var pd=-1,DE=class{constructor(e,t,r,i){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=i}};DE.UNKNOWN_ID=-1;function n7(n,e){let t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,i=_e.fromTimestamp(r===1e9?new it(t+1,0):new it(t,r));return new ta(i,ae.empty(),e)}function r7(n){return new ta(n.readTime,n.key,pd)}var ta=class n{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new n(_e.min(),ae.empty(),pd)}static max(){return new n(_e.max(),ae.empty(),pd)}};function i7(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=ae.comparator(n.documentKey,e.documentKey),t!==0?t:Se(n.largestBatchId,e.largestBatchId))}var o7="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",xE=class{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}};function Yc(n){return y(this,null,function*(){if(n.code!==$.FAILED_PRECONDITION||n.message!==o7)throw n;te("LocalStore","Unexpectedly lost primary lease")})}var q=class n{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&le(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new n((r,i)=>{this.nextCallback=o=>{this.wrapSuccess(e,o).next(r,i)},this.catchCallback=o=>{this.wrapFailure(t,o).next(r,i)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{let t=e();return t instanceof n?t:n.resolve(t)}catch(t){return n.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):n.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):n.reject(t)}static resolve(e){return new n((t,r)=>{t(e)})}static reject(e){return new n((t,r)=>{r(e)})}static waitFor(e){return new n((t,r)=>{let i=0,o=0,s=!1;e.forEach(a=>{++i,a.next(()=>{++o,s&&o===i&&t()},c=>r(c))}),s=!0,o===i&&t()})}static or(e){let t=n.resolve(!1);for(let r of e)t=t.next(i=>i?n.resolve(i):r());return t}static forEach(e,t){let r=[];return e.forEach((i,o)=>{r.push(t.call(this,i,o))}),this.waitFor(r)}static mapArray(e,t){return new n((r,i)=>{let o=e.length,s=new Array(o),a=0;for(let c=0;c<o;c++){let u=c;t(e[u]).next(f=>{s[u]=f,++a,a===o&&r(s)},f=>i(f))}})}static doWhile(e,t){return new n((r,i)=>{let o=()=>{e()===!0?t().next(()=>{o()},i):r()};o()})}};function s7(n){let e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function Qc(n){return n.name==="IndexedDbTransactionError"}var cI=(()=>{class n{constructor(t,r){this.previousValue=t,r&&(r.sequenceNumberHandler=i=>this._e(i),this.ae=i=>r.writeSequenceNumber(i))}_e(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){let t=++this.previousValue;return this.ae&&this.ae(t),t}}n.ue=-1;return n})(),lI=-1;function _m(n){return n==null}function gd(n){return n===0&&1/n==-1/0}function a7(n){return typeof n=="number"&&Number.isInteger(n)&&!gd(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}var CO="";function c7(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=Nk(e)),e=l7(n.get(t),e);return Nk(e)}function l7(n,e){let t=e,r=n.length;for(let i=0;i<r;i++){let o=n.charAt(i);switch(o){case"\0":t+="";break;case CO:t+="";break;default:t+=o}}return t}function Nk(n){return n+CO+""}var u7="remoteDocuments",IO="owner";var SO="mutationQueues";var TO="mutations";var DO="documentMutations",d7="remoteDocumentsV14";var xO="remoteDocumentGlobal";var MO="targets";var PO="targetDocuments";var AO="targetGlobal",kO="collectionParents";var OO="clientMetadata";var RO="bundles";var NO="namedQueries";var f7="indexConfiguration";var h7="indexState";var p7="indexEntries";var FO="documentOverlays";var g7="globals";var m7=[SO,TO,DO,u7,MO,IO,AO,PO,OO,xO,kO,RO,NO],nme=[...m7,FO],v7=[SO,TO,DO,d7,MO,IO,AO,PO,OO,xO,kO,RO,NO,FO],_7=v7,y7=[..._7,f7,h7,p7];var rme=[...y7,g7];function Fk(n){let e=0;for(let t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function Zo(n,e){for(let t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function LO(n){for(let e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}var ht=class n{constructor(e,t){this.comparator=e,this.root=t||li.EMPTY}insert(e,t){return new n(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,li.BLACK,null,null))}remove(e){return new n(this.comparator,this.root.remove(e,this.comparator).copy(null,null,li.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){let r=this.comparator(e,t.key);if(r===0)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){let i=this.comparator(e,r.key);if(i===0)return t+r.left.size;i<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){let e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Rc(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Rc(this.root,e,this.comparator,!1)}getReverseIterator(){return new Rc(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Rc(this.root,e,this.comparator,!0)}},Rc=class{constructor(e,t,r,i){this.isReverse=i,this.nodeStack=[];let o=1;for(;!e.isEmpty();)if(o=t?r(e.key,t):1,t&&i&&(o*=-1),o<0)e=this.isReverse?e.left:e.right;else{if(o===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop(),t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;let e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}},li=class n{constructor(e,t,r,i,o){this.key=e,this.value=t,this.color=r??n.RED,this.left=i??n.EMPTY,this.right=o??n.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,i,o){return new n(e??this.key,t??this.value,r??this.color,i??this.left,o??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let i=this,o=r(e,i.key);return i=o<0?i.copy(null,null,null,i.left.insert(e,t,r),null):o===0?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return n.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),t(e,i.key)===0){if(i.right.isEmpty())return n.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){let e=this.copy(null,null,n.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){let e=this.copy(null,null,n.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){let e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){let e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw le(43730,{key:this.key,value:this.value});if(this.right.isRed())throw le(14113,{key:this.key,value:this.value});let e=this.left.check();if(e!==this.right.check())throw le(27949);return e+(this.isRed()?0:1)}};li.EMPTY=null,li.RED=!0,li.BLACK=!1;li.EMPTY=new class{constructor(){this.size=0}get key(){throw le(57766)}get value(){throw le(16141)}get color(){throw le(16727)}get left(){throw le(29726)}get right(){throw le(36894)}copy(e,t,r,i,o){return this}insert(e,t,r){return new li(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};var jt=class n{constructor(e){this.comparator=e,this.data=new ht(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){let r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){let i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let r;for(r=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){let t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new Ug(this.data.getIterator())}getIteratorFrom(e){return new Ug(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof n)||this.size!==e.size)return!1;let t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){let i=t.getNext().key,o=r.getNext().key;if(this.comparator(i,o)!==0)return!1}return!0}toArray(){let e=[];return this.forEach(t=>{e.push(t)}),e}toString(){let e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){let t=new n(this.comparator);return t.data=e,t}},Ug=class{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}};var lr=class n{constructor(e){this.fields=e,e.sort(zn.comparator)}static empty(){return new n([])}unionWith(e){let t=new jt(zn.comparator);for(let r of this.fields)t=t.add(r);for(let r of e)t=t.add(r);return new n(t.toArray())}covers(e){for(let t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Vc(this.fields,e.fields,(t,r)=>t.isEqual(r))}};var jg=class extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}};var ln=class n{constructor(e){this.binaryString=e}static fromBase64String(e){let t=(function(i){try{return atob(i)}catch(o){throw typeof DOMException<"u"&&o instanceof DOMException?new jg("Invalid base64 string: "+o):o}})(e);return new n(t)}static fromUint8Array(e){let t=(function(i){let o="";for(let s=0;s<i.length;++s)o+=String.fromCharCode(i[s]);return o})(e);return new n(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(t){return btoa(t)})(this.binaryString)}toUint8Array(){return(function(t){let r=new Uint8Array(t.length);for(let i=0;i<t.length;i++)r[i]=t.charCodeAt(i);return r})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Se(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}};ln.EMPTY_BYTE_STRING=new ln("");var b7=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function qi(n){if(Be(!!n,39018),typeof n=="string"){let e=0,t=b7.exec(n);if(Be(!!t,46558,{timestamp:n}),t[1]){let i=t[1];i=(i+"000000000").substr(0,9),e=Number(i)}let r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:rt(n.seconds),nanos:rt(n.nanos)}}function rt(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function Wi(n){return typeof n=="string"?ln.fromBase64String(n):ln.fromUint8Array(n)}var VO="server_timestamp",UO="__type__",jO="__previous_value__",BO="__local_write_time__";function ym(n){var e,t;return((t=(((e=n?.mapValue)===null||e===void 0?void 0:e.fields)||{})[UO])===null||t===void 0?void 0:t.stringValue)===VO}function bm(n){let e=n.mapValue.fields[jO];return ym(e)?bm(e):e}function md(n){let e=qi(n.mapValue.fields[BO].timestampValue);return new it(e.seconds,e.nanos)}var ME=class{constructor(e,t,r,i,o,s,a,c,u,f){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=i,this.ssl=o,this.forceLongPolling=s,this.autoDetectLongPolling=a,this.longPollingOptions=c,this.useFetchStreams=u,this.isUsingEmulator=f}},Bg="(default)",$g=class n{constructor(e,t){this.projectId=e,this.database=t||Bg}static empty(){return new n("","")}get isDefaultDatabase(){return this.database===Bg}isEqual(e){return e instanceof n&&e.projectId===this.projectId&&e.database===this.database}};var uI="__type__",$O="__max__",Pg={mapValue:{fields:{__type__:{stringValue:$O}}}},dI="__vector__",Uc="value";function Go(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?ym(n)?4:zO(n)?9007199254740991:HO(n)?10:11:le(28295,{value:n})}function fi(n,e){if(n===e)return!0;let t=Go(n);if(t!==Go(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return md(n).isEqual(md(e));case 3:return(function(i,o){if(typeof i.timestampValue=="string"&&typeof o.timestampValue=="string"&&i.timestampValue.length===o.timestampValue.length)return i.timestampValue===o.timestampValue;let s=qi(i.timestampValue),a=qi(o.timestampValue);return s.seconds===a.seconds&&s.nanos===a.nanos})(n,e);case 5:return n.stringValue===e.stringValue;case 6:return(function(i,o){return Wi(i.bytesValue).isEqual(Wi(o.bytesValue))})(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return(function(i,o){return rt(i.geoPointValue.latitude)===rt(o.geoPointValue.latitude)&&rt(i.geoPointValue.longitude)===rt(o.geoPointValue.longitude)})(n,e);case 2:return(function(i,o){if("integerValue"in i&&"integerValue"in o)return rt(i.integerValue)===rt(o.integerValue);if("doubleValue"in i&&"doubleValue"in o){let s=rt(i.doubleValue),a=rt(o.doubleValue);return s===a?gd(s)===gd(a):isNaN(s)&&isNaN(a)}return!1})(n,e);case 9:return Vc(n.arrayValue.values||[],e.arrayValue.values||[],fi);case 10:case 11:return(function(i,o){let s=i.mapValue.fields||{},a=o.mapValue.fields||{};if(Fk(s)!==Fk(a))return!1;for(let c in s)if(s.hasOwnProperty(c)&&(a[c]===void 0||!fi(s[c],a[c])))return!1;return!0})(n,e);default:return le(52216,{left:n})}}function vd(n,e){return(n.values||[]).find(t=>fi(t,e))!==void 0}function jc(n,e){if(n===e)return 0;let t=Go(n),r=Go(e);if(t!==r)return Se(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return Se(n.booleanValue,e.booleanValue);case 2:return(function(o,s){let a=rt(o.integerValue||o.doubleValue),c=rt(s.integerValue||s.doubleValue);return a<c?-1:a>c?1:a===c?0:isNaN(a)?isNaN(c)?0:-1:1})(n,e);case 3:return Lk(n.timestampValue,e.timestampValue);case 4:return Lk(md(n),md(e));case 5:return TE(n.stringValue,e.stringValue);case 6:return(function(o,s){let a=Wi(o),c=Wi(s);return a.compareTo(c)})(n.bytesValue,e.bytesValue);case 7:return(function(o,s){let a=o.split("/"),c=s.split("/");for(let u=0;u<a.length&&u<c.length;u++){let f=Se(a[u],c[u]);if(f!==0)return f}return Se(a.length,c.length)})(n.referenceValue,e.referenceValue);case 8:return(function(o,s){let a=Se(rt(o.latitude),rt(s.latitude));return a!==0?a:Se(rt(o.longitude),rt(s.longitude))})(n.geoPointValue,e.geoPointValue);case 9:return Vk(n.arrayValue,e.arrayValue);case 10:return(function(o,s){var a,c,u,f;let m=o.fields||{},_=s.fields||{},E=(a=m[Uc])===null||a===void 0?void 0:a.arrayValue,x=(c=_[Uc])===null||c===void 0?void 0:c.arrayValue,V=Se(((u=E?.values)===null||u===void 0?void 0:u.length)||0,((f=x?.values)===null||f===void 0?void 0:f.length)||0);return V!==0?V:Vk(E,x)})(n.mapValue,e.mapValue);case 11:return(function(o,s){if(o===Pg.mapValue&&s===Pg.mapValue)return 0;if(o===Pg.mapValue)return 1;if(s===Pg.mapValue)return-1;let a=o.fields||{},c=Object.keys(a),u=s.fields||{},f=Object.keys(u);c.sort(),f.sort();for(let m=0;m<c.length&&m<f.length;++m){let _=TE(c[m],f[m]);if(_!==0)return _;let E=jc(a[c[m]],u[f[m]]);if(E!==0)return E}return Se(c.length,f.length)})(n.mapValue,e.mapValue);default:throw le(23264,{le:t})}}function Lk(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return Se(n,e);let t=qi(n),r=qi(e),i=Se(t.seconds,r.seconds);return i!==0?i:Se(t.nanos,r.nanos)}function Vk(n,e){let t=n.values||[],r=e.values||[];for(let i=0;i<t.length&&i<r.length;++i){let o=jc(t[i],r[i]);if(o)return o}return Se(t.length,r.length)}function Bc(n){return PE(n)}function PE(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?(function(t){let r=qi(t);return`time(${r.seconds},${r.nanos})`})(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?(function(t){return Wi(t).toBase64()})(n.bytesValue):"referenceValue"in n?(function(t){return ae.fromName(t).toString()})(n.referenceValue):"geoPointValue"in n?(function(t){return`geo(${t.latitude},${t.longitude})`})(n.geoPointValue):"arrayValue"in n?(function(t){let r="[",i=!0;for(let o of t.values||[])i?i=!1:r+=",",r+=PE(o);return r+"]"})(n.arrayValue):"mapValue"in n?(function(t){let r=Object.keys(t.fields||{}).sort(),i="{",o=!0;for(let s of r)o?o=!1:i+=",",i+=`${s}:${PE(t.fields[s])}`;return i+"}"})(n.mapValue):le(61005,{value:n})}function Og(n){switch(Go(n)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:let e=bm(n);return e?16+Og(e):16;case 5:return 2*n.stringValue.length;case 6:return Wi(n.bytesValue).approximateByteSize();case 7:return n.referenceValue.length;case 9:return(function(r){return(r.values||[]).reduce((i,o)=>i+Og(o),0)})(n.arrayValue);case 10:case 11:return(function(r){let i=0;return Zo(r.fields,(o,s)=>{i+=o.length+Og(s)}),i})(n.mapValue);default:throw le(13486,{value:n})}}function Hg(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function AE(n){return!!n&&"integerValue"in n}function fI(n){return!!n&&"arrayValue"in n}function Uk(n){return!!n&&"nullValue"in n}function jk(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function Rg(n){return!!n&&"mapValue"in n}function HO(n){var e,t;return((t=(((e=n?.mapValue)===null||e===void 0?void 0:e.fields)||{})[uI])===null||t===void 0?void 0:t.stringValue)===dI}function ud(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){let e={mapValue:{fields:{}}};return Zo(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=ud(r)),e}if(n.arrayValue){let e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=ud(n.arrayValue.values[t]);return e}return Object.assign({},n)}function zO(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue===$O}var ome={mapValue:{fields:{[uI]:{stringValue:dI},[Uc]:{arrayValue:{}}}}};var Hn=class n{constructor(e){this.value=e}static empty(){return new n({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!Rg(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=ud(t)}setAll(e){let t=zn.emptyPath(),r={},i=[];e.forEach((s,a)=>{if(!t.isImmediateParentOf(a)){let c=this.getFieldsMap(t);this.applyChanges(c,r,i),r={},i=[],t=a.popLast()}s?r[a.lastSegment()]=ud(s):i.push(a.lastSegment())});let o=this.getFieldsMap(t);this.applyChanges(o,r,i)}delete(e){let t=this.field(e.popLast());Rg(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return fi(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=t.mapValue.fields[e.get(r)];Rg(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,r){Zo(t,(i,o)=>e[i]=o);for(let i of r)delete e[i]}clone(){return new n(ud(this.value))}};function qO(n){let e=[];return Zo(n.fields,(t,r)=>{let i=new zn([t]);if(Rg(r)){let o=qO(r.mapValue).fields;if(o.length===0)e.push(i);else for(let s of o)e.push(i.child(s))}else e.push(i)}),new lr(e)}var Vr=class n{constructor(e,t,r,i,o,s,a){this.key=e,this.documentType=t,this.version=r,this.readTime=i,this.createTime=o,this.data=s,this.documentState=a}static newInvalidDocument(e){return new n(e,0,_e.min(),_e.min(),_e.min(),Hn.empty(),0)}static newFoundDocument(e,t,r,i){return new n(e,1,t,_e.min(),r,i,0)}static newNoDocument(e,t){return new n(e,2,t,_e.min(),_e.min(),Hn.empty(),0)}static newUnknownDocument(e,t){return new n(e,3,t,_e.min(),_e.min(),Hn.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(_e.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Hn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Hn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=_e.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof n&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new n(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}};var Ko=class{constructor(e,t){this.position=e,this.inclusive=t}};function Bk(n,e,t){let r=0;for(let i=0;i<n.position.length;i++){let o=e[i],s=n.position[i];if(o.field.isKeyField()?r=ae.comparator(ae.fromName(s.referenceValue),t.key):r=jc(s,t.data.field(o.field)),o.dir==="desc"&&(r*=-1),r!==0)break}return r}function $k(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!fi(n.position[t],e.position[t]))return!1;return!0}var na=class{constructor(e,t="asc"){this.field=e,this.dir=t}};function w7(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}var zg=class{},It=class n extends zg{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,r):new OE(e,t,r):t==="array-contains"?new FE(e,r):t==="in"?new LE(e,r):t==="not-in"?new VE(e,r):t==="array-contains-any"?new UE(e,r):new n(e,t,r)}static createKeyFieldInFilter(e,t,r){return t==="in"?new RE(e,r):new NE(e,r)}matches(e){let t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(jc(t,this.value)):t!==null&&Go(this.value)===Go(t)&&this.matchesComparison(jc(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return le(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}},Ur=class n extends zg{constructor(e,t){super(),this.filters=e,this.op=t,this.he=null}static create(e,t){return new n(e,t)}matches(e){return WO(this)?this.filters.find(t=>!t.matches(e))===void 0:this.filters.find(t=>t.matches(e))!==void 0}getFlattenedFilters(){return this.he!==null||(this.he=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.he}getFilters(){return Object.assign([],this.filters)}};function WO(n){return n.op==="and"}function GO(n){return E7(n)&&WO(n)}function E7(n){for(let e of n.filters)if(e instanceof Ur)return!1;return!0}function kE(n){if(n instanceof It)return n.field.canonicalString()+n.op.toString()+Bc(n.value);if(GO(n))return n.filters.map(e=>kE(e)).join(",");{let e=n.filters.map(t=>kE(t)).join(",");return`${n.op}(${e})`}}function KO(n,e){return n instanceof It?(function(r,i){return i instanceof It&&r.op===i.op&&r.field.isEqual(i.field)&&fi(r.value,i.value)})(n,e):n instanceof Ur?(function(r,i){return i instanceof Ur&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((o,s,a)=>o&&KO(s,i.filters[a]),!0):!1})(n,e):void le(19439)}function YO(n){return n instanceof It?(function(t){return`${t.field.canonicalString()} ${t.op} ${Bc(t.value)}`})(n):n instanceof Ur?(function(t){return t.op.toString()+" {"+t.getFilters().map(YO).join(" ,")+"}"})(n):"Filter"}var OE=class extends It{constructor(e,t,r){super(e,t,r),this.key=ae.fromName(r.referenceValue)}matches(e){let t=ae.comparator(e.key,this.key);return this.matchesComparison(t)}},RE=class extends It{constructor(e,t){super(e,"in",t),this.keys=QO("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}},NE=class extends It{constructor(e,t){super(e,"not-in",t),this.keys=QO("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}};function QO(n,e){var t;return(((t=e.arrayValue)===null||t===void 0?void 0:t.values)||[]).map(r=>ae.fromName(r.referenceValue))}var FE=class extends It{constructor(e,t){super(e,"array-contains",t)}matches(e){let t=e.data.field(this.field);return fI(t)&&vd(t.arrayValue,this.value)}},LE=class extends It{constructor(e,t){super(e,"in",t)}matches(e){let t=e.data.field(this.field);return t!==null&&vd(this.value.arrayValue,t)}},VE=class extends It{constructor(e,t){super(e,"not-in",t)}matches(e){if(vd(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;let t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!vd(this.value.arrayValue,t)}},UE=class extends It{constructor(e,t){super(e,"array-contains-any",t)}matches(e){let t=e.data.field(this.field);return!(!fI(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>vd(this.value.arrayValue,r))}};var jE=class{constructor(e,t=null,r=[],i=[],o=null,s=null,a=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=i,this.limit=o,this.startAt=s,this.endAt=a,this.Pe=null}};function Hk(n,e=null,t=[],r=[],i=null,o=null,s=null){return new jE(n,e,t,r,i,o,s)}function hI(n){let e=me(n);if(e.Pe===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>kE(r)).join(","),t+="|ob:",t+=e.orderBy.map(r=>(function(o){return o.field.canonicalString()+o.dir})(r)).join(","),_m(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>Bc(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>Bc(r)).join(",")),e.Pe=t}return e.Pe}function pI(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!w7(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!KO(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!$k(n.startAt,e.startAt)&&$k(n.endAt,e.endAt)}function BE(n){return ae.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}var Gi=class{constructor(e,t=null,r=[],i=[],o=null,s="F",a=null,c=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=i,this.limit=o,this.limitType=s,this.startAt=a,this.endAt=c,this.Te=null,this.Ie=null,this.de=null,this.startAt,this.endAt}};function C7(n,e,t,r,i,o,s,a){return new Gi(n,e,t,r,i,o,s,a)}function wm(n){return new Gi(n)}function zk(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function gI(n){return n.collectionGroup!==null}function Nc(n){let e=me(n);if(e.Te===null){e.Te=[];let t=new Set;for(let o of e.explicitOrderBy)e.Te.push(o),t.add(o.field.canonicalString());let r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(s){let a=new jt(zn.comparator);return s.filters.forEach(c=>{c.getFlattenedFilters().forEach(u=>{u.isInequality()&&(a=a.add(u.field))})}),a})(e).forEach(o=>{t.has(o.canonicalString())||o.isKeyField()||e.Te.push(new na(o,r))}),t.has(zn.keyField().canonicalString())||e.Te.push(new na(zn.keyField(),r))}return e.Te}function ui(n){let e=me(n);return e.Ie||(e.Ie=I7(e,Nc(n))),e.Ie}function I7(n,e){if(n.limitType==="F")return Hk(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map(i=>{let o=i.dir==="desc"?"asc":"desc";return new na(i.field,o)});let t=n.endAt?new Ko(n.endAt.position,n.endAt.inclusive):null,r=n.startAt?new Ko(n.startAt.position,n.startAt.inclusive):null;return Hk(n.path,n.collectionGroup,e,n.filters,n.limit,t,r)}}function $E(n,e){let t=n.filters.concat([e]);return new Gi(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function qg(n,e,t){return new Gi(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function Em(n,e){return pI(ui(n),ui(e))&&n.limitType===e.limitType}function ZO(n){return`${hI(ui(n))}|lt:${n.limitType}`}function Ac(n){return`Query(target=${(function(t){let r=t.path.canonicalString();return t.collectionGroup!==null&&(r+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(r+=`, filters: [${t.filters.map(i=>YO(i)).join(", ")}]`),_m(t.limit)||(r+=", limit: "+t.limit),t.orderBy.length>0&&(r+=`, orderBy: [${t.orderBy.map(i=>(function(s){return`${s.field.canonicalString()} (${s.dir})`})(i)).join(", ")}]`),t.startAt&&(r+=", startAt: ",r+=t.startAt.inclusive?"b:":"a:",r+=t.startAt.position.map(i=>Bc(i)).join(",")),t.endAt&&(r+=", endAt: ",r+=t.endAt.inclusive?"a:":"b:",r+=t.endAt.position.map(i=>Bc(i)).join(",")),`Target(${r})`})(ui(n))}; limitType=${n.limitType})`}function Cm(n,e){return e.isFoundDocument()&&(function(r,i){let o=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(o):ae.isDocumentKey(r.path)?r.path.isEqual(o):r.path.isImmediateParentOf(o)})(n,e)&&(function(r,i){for(let o of Nc(r))if(!o.field.isKeyField()&&i.data.field(o.field)===null)return!1;return!0})(n,e)&&(function(r,i){for(let o of r.filters)if(!o.matches(i))return!1;return!0})(n,e)&&(function(r,i){return!(r.startAt&&!(function(s,a,c){let u=Bk(s,a,c);return s.inclusive?u<=0:u<0})(r.startAt,Nc(r),i)||r.endAt&&!(function(s,a,c){let u=Bk(s,a,c);return s.inclusive?u>=0:u>0})(r.endAt,Nc(r),i))})(n,e)}function S7(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function XO(n){return(e,t)=>{let r=!1;for(let i of Nc(n)){let o=T7(i,e,t);if(o!==0)return o;r=r||i.field.isKeyField()}return 0}}function T7(n,e,t){let r=n.field.isKeyField()?ae.comparator(e.key,t.key):(function(o,s,a){let c=s.data.field(o),u=a.data.field(o);return c!==null&&u!==null?jc(c,u):le(42886)})(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return le(19790,{direction:n.dir})}}var Ki=class{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){let t=this.mapKeyFn(e),r=this.inner[t];if(r!==void 0){for(let[i,o]of r)if(this.equalsFn(i,e))return o}}has(e){return this.get(e)!==void 0}set(e,t){let r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,t]],void this.innerSize++;for(let o=0;o<i.length;o++)if(this.equalsFn(i[o][0],e))return void(i[o]=[e,t]);i.push([e,t]),this.innerSize++}delete(e){let t=this.mapKeyFn(e),r=this.inner[t];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[t]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){Zo(this.inner,(t,r)=>{for(let[i,o]of r)e(i,o)})}isEmpty(){return LO(this.inner)}size(){return this.innerSize}};var D7=new ht(ae.comparator);function Yi(){return D7}var JO=new ht(ae.comparator);function ld(...n){let e=JO;for(let t of n)e=e.insert(t.key,t);return e}function eR(n){let e=JO;return n.forEach((t,r)=>e=e.insert(t,r.overlayedDocument)),e}function Ys(){return dd()}function tR(){return dd()}function dd(){return new Ki(n=>n.toString(),(n,e)=>n.isEqual(e))}var x7=new ht(ae.comparator),M7=new jt(ae.comparator);function Me(...n){let e=M7;for(let t of n)e=e.add(t);return e}var P7=new jt(Se);function A7(){return P7}function mI(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:gd(e)?"-0":e}}function nR(n){return{integerValue:""+n}}function rR(n,e){return a7(e)?nR(e):mI(n,e)}var $c=class{constructor(){this._=void 0}};function k7(n,e,t){return n instanceof ra?(function(i,o){let s={fields:{[UO]:{stringValue:VO},[BO]:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return o&&ym(o)&&(o=bm(o)),o&&(s.fields[jO]=o),{mapValue:s}})(t,e):n instanceof ia?oR(n,e):n instanceof oa?sR(n,e):(function(i,o){let s=iR(i,o),a=qk(s)+qk(i.Ee);return AE(s)&&AE(i.Ee)?nR(a):mI(i.serializer,a)})(n,e)}function O7(n,e,t){return n instanceof ia?oR(n,e):n instanceof oa?sR(n,e):t}function iR(n,e){return n instanceof sa?(function(r){return AE(r)||(function(o){return!!o&&"doubleValue"in o})(r)})(e)?e:{integerValue:0}:null}var ra=class extends $c{},ia=class extends $c{constructor(e){super(),this.elements=e}};function oR(n,e){let t=aR(e);for(let r of n.elements)t.some(i=>fi(i,r))||t.push(r);return{arrayValue:{values:t}}}var oa=class extends $c{constructor(e){super(),this.elements=e}};function sR(n,e){let t=aR(e);for(let r of n.elements)t=t.filter(i=>!fi(i,r));return{arrayValue:{values:t}}}var sa=class extends $c{constructor(e,t){super(),this.serializer=e,this.Ee=t}};function qk(n){return rt(n.integerValue||n.doubleValue)}function aR(n){return fI(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}var Wg=class{constructor(e,t){this.field=e,this.transform=t}};function R7(n,e){return n.field.isEqual(e.field)&&(function(r,i){return r instanceof ia&&i instanceof ia||r instanceof oa&&i instanceof oa?Vc(r.elements,i.elements,fi):r instanceof sa&&i instanceof sa?fi(r.Ee,i.Ee):r instanceof ra&&i instanceof ra})(n.transform,e.transform)}var HE=class{constructor(e,t){this.version=e,this.transformResults=t}},qn=class n{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new n}static exists(e){return new n(void 0,e)}static updateTime(e){return new n(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}};function Ng(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}var Hc=class{};function cR(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new zc(n.key,qn.none()):new aa(n.key,n.data,qn.none());{let t=n.data,r=Hn.empty(),i=new jt(zn.comparator);for(let o of e.fields)if(!i.has(o)){let s=t.field(o);s===null&&o.length>1&&(o=o.popLast(),s=t.field(o)),s===null?r.delete(o):r.set(o,s),i=i.add(o)}return new hi(n.key,r,new lr(i.toArray()),qn.none())}}function N7(n,e,t){n instanceof aa?(function(i,o,s){let a=i.value.clone(),c=Gk(i.fieldTransforms,o,s.transformResults);a.setAll(c),o.convertToFoundDocument(s.version,a).setHasCommittedMutations()})(n,e,t):n instanceof hi?(function(i,o,s){if(!Ng(i.precondition,o))return void o.convertToUnknownDocument(s.version);let a=Gk(i.fieldTransforms,o,s.transformResults),c=o.data;c.setAll(lR(i)),c.setAll(a),o.convertToFoundDocument(s.version,c).setHasCommittedMutations()})(n,e,t):(function(i,o,s){o.convertToNoDocument(s.version).setHasCommittedMutations()})(0,e,t)}function fd(n,e,t,r){return n instanceof aa?(function(o,s,a,c){if(!Ng(o.precondition,s))return a;let u=o.value.clone(),f=Kk(o.fieldTransforms,c,s);return u.setAll(f),s.convertToFoundDocument(s.version,u).setHasLocalMutations(),null})(n,e,t,r):n instanceof hi?(function(o,s,a,c){if(!Ng(o.precondition,s))return a;let u=Kk(o.fieldTransforms,c,s),f=s.data;return f.setAll(lR(o)),f.setAll(u),s.convertToFoundDocument(s.version,f).setHasLocalMutations(),a===null?null:a.unionWith(o.fieldMask.fields).unionWith(o.fieldTransforms.map(m=>m.field))})(n,e,t,r):(function(o,s,a){return Ng(o.precondition,s)?(s.convertToNoDocument(s.version).setHasLocalMutations(),null):a})(n,e,t)}function F7(n,e){let t=null;for(let r of n.fieldTransforms){let i=e.data.field(r.field),o=iR(r.transform,i||null);o!=null&&(t===null&&(t=Hn.empty()),t.set(r.field,o))}return t||null}function Wk(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!(function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&Vc(r,i,(o,s)=>R7(o,s))})(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}var aa=class extends Hc{constructor(e,t,r,i=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}},hi=class extends Hc{constructor(e,t,r,i,o=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=i,this.fieldTransforms=o,this.type=1}getFieldMask(){return this.fieldMask}};function lR(n){let e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){let r=n.data.field(t);e.set(t,r)}}),e}function Gk(n,e,t){let r=new Map;Be(n.length===t.length,32656,{Ae:t.length,Re:n.length});for(let i=0;i<t.length;i++){let o=n[i],s=o.transform,a=e.data.field(o.field);r.set(o.field,O7(s,a,t[i]))}return r}function Kk(n,e,t){let r=new Map;for(let i of n){let o=i.transform,s=t.data.field(i.field);r.set(i.field,k7(o,s,e))}return r}var zc=class extends Hc{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}},zE=class extends Hc{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}};var qE=class{constructor(e,t,r,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,t){let r=t.mutationResults;for(let i=0;i<this.mutations.length;i++){let o=this.mutations[i];o.key.isEqual(e.key)&&N7(o,e,r[i])}}applyToLocalView(e,t){for(let r of this.baseMutations)r.key.isEqual(e.key)&&(t=fd(r,e,t,this.localWriteTime));for(let r of this.mutations)r.key.isEqual(e.key)&&(t=fd(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){let r=tR();return this.mutations.forEach(i=>{let o=e.get(i.key),s=o.overlayedDocument,a=this.applyToLocalView(s,o.mutatedFields);a=t.has(i.key)?null:a;let c=cR(s,a);c!==null&&r.set(i.key,c),s.isValidDocument()||s.convertToNoDocument(_e.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),Me())}isEqual(e){return this.batchId===e.batchId&&Vc(this.mutations,e.mutations,(t,r)=>Wk(t,r))&&Vc(this.baseMutations,e.baseMutations,(t,r)=>Wk(t,r))}},WE=class n{constructor(e,t,r,i){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=i}static from(e,t,r){Be(e.mutations.length===r.length,58842,{Ve:e.mutations.length,me:r.length});let i=(function(){return x7})(),o=e.mutations;for(let s=0;s<o.length;s++)i=i.insert(o[s].key,r[s].version);return new n(e,t,r,i)}};var GE=class{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}};var KE=class{constructor(e,t){this.count=e,this.unchangedNames=t}};var Et,Oe;function L7(n){switch(n){case $.OK:return le(64938);case $.CANCELLED:case $.UNKNOWN:case $.DEADLINE_EXCEEDED:case $.RESOURCE_EXHAUSTED:case $.INTERNAL:case $.UNAVAILABLE:case $.UNAUTHENTICATED:return!1;case $.INVALID_ARGUMENT:case $.NOT_FOUND:case $.ALREADY_EXISTS:case $.PERMISSION_DENIED:case $.FAILED_PRECONDITION:case $.ABORTED:case $.OUT_OF_RANGE:case $.UNIMPLEMENTED:case $.DATA_LOSS:return!0;default:return le(15467,{code:n})}}function uR(n){if(n===void 0)return zi("GRPC error has no .code"),$.UNKNOWN;switch(n){case Et.OK:return $.OK;case Et.CANCELLED:return $.CANCELLED;case Et.UNKNOWN:return $.UNKNOWN;case Et.DEADLINE_EXCEEDED:return $.DEADLINE_EXCEEDED;case Et.RESOURCE_EXHAUSTED:return $.RESOURCE_EXHAUSTED;case Et.INTERNAL:return $.INTERNAL;case Et.UNAVAILABLE:return $.UNAVAILABLE;case Et.UNAUTHENTICATED:return $.UNAUTHENTICATED;case Et.INVALID_ARGUMENT:return $.INVALID_ARGUMENT;case Et.NOT_FOUND:return $.NOT_FOUND;case Et.ALREADY_EXISTS:return $.ALREADY_EXISTS;case Et.PERMISSION_DENIED:return $.PERMISSION_DENIED;case Et.FAILED_PRECONDITION:return $.FAILED_PRECONDITION;case Et.ABORTED:return $.ABORTED;case Et.OUT_OF_RANGE:return $.OUT_OF_RANGE;case Et.UNIMPLEMENTED:return $.UNIMPLEMENTED;case Et.DATA_LOSS:return $.DATA_LOSS;default:return le(39323,{code:n})}}(Oe=Et||(Et={}))[Oe.OK=0]="OK",Oe[Oe.CANCELLED=1]="CANCELLED",Oe[Oe.UNKNOWN=2]="UNKNOWN",Oe[Oe.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Oe[Oe.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Oe[Oe.NOT_FOUND=5]="NOT_FOUND",Oe[Oe.ALREADY_EXISTS=6]="ALREADY_EXISTS",Oe[Oe.PERMISSION_DENIED=7]="PERMISSION_DENIED",Oe[Oe.UNAUTHENTICATED=16]="UNAUTHENTICATED",Oe[Oe.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Oe[Oe.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Oe[Oe.ABORTED=10]="ABORTED",Oe[Oe.OUT_OF_RANGE=11]="OUT_OF_RANGE",Oe[Oe.UNIMPLEMENTED=12]="UNIMPLEMENTED",Oe[Oe.INTERNAL=13]="INTERNAL",Oe[Oe.UNAVAILABLE=14]="UNAVAILABLE",Oe[Oe.DATA_LOSS=15]="DATA_LOSS";var Yk=null;var V7=new $i([4294967295,4294967295],0);function Qk(n){let e=bO().encode(n),t=new lE;return t.update(e),new Uint8Array(t.digest())}function Zk(n){let e=new DataView(n.buffer),t=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),o=e.getUint32(12,!0);return[new $i([t,r],0),new $i([i,o],0)]}var YE=class n{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new Qs(`Invalid padding: ${t}`);if(r<0)throw new Qs(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Qs(`Invalid hash count: ${r}`);if(e.length===0&&t!==0)throw new Qs(`Invalid padding when bitmap length is 0: ${t}`);this.fe=8*e.length-t,this.ge=$i.fromNumber(this.fe)}pe(e,t,r){let i=e.add(t.multiply($i.fromNumber(r)));return i.compare(V7)===1&&(i=new $i([i.getBits(0),i.getBits(1)],0)),i.modulo(this.ge).toNumber()}ye(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.fe===0)return!1;let t=Qk(e),[r,i]=Zk(t);for(let o=0;o<this.hashCount;o++){let s=this.pe(r,i,o);if(!this.ye(s))return!1}return!0}static create(e,t,r){let i=e%8==0?0:8-e%8,o=new Uint8Array(Math.ceil(e/8)),s=new n(o,i,t);return r.forEach(a=>s.insert(a)),s}insert(e){if(this.fe===0)return;let t=Qk(e),[r,i]=Zk(t);for(let o=0;o<this.hashCount;o++){let s=this.pe(r,i,o);this.we(s)}}we(e){let t=Math.floor(e/8),r=e%8;this.bitmap[t]|=1<<r}},Qs=class extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}};var Gg=class n{constructor(e,t,r,i,o){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=o}static createSynthesizedRemoteEventForCurrentChange(e,t,r){let i=new Map;return i.set(e,_d.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new n(_e.min(),i,new ht(Se),Yi(),Me())}},_d=class n{constructor(e,t,r,i,o){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=o}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new n(r,t,Me(),Me(),Me())}};var Fc=class{constructor(e,t,r,i){this.Se=e,this.removedTargetIds=t,this.key=r,this.be=i}},Kg=class{constructor(e,t){this.targetId=e,this.De=t}},Yg=class{constructor(e,t,r=ln.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=i}},Qg=class{constructor(){this.ve=0,this.Ce=Xk(),this.Fe=ln.EMPTY_BYTE_STRING,this.Me=!1,this.xe=!0}get current(){return this.Me}get resumeToken(){return this.Fe}get Oe(){return this.ve!==0}get Ne(){return this.xe}Be(e){e.approximateByteSize()>0&&(this.xe=!0,this.Fe=e)}Le(){let e=Me(),t=Me(),r=Me();return this.Ce.forEach((i,o)=>{switch(o){case 0:e=e.add(i);break;case 2:t=t.add(i);break;case 1:r=r.add(i);break;default:le(38017,{changeType:o})}}),new _d(this.Fe,this.Me,e,t,r)}ke(){this.xe=!1,this.Ce=Xk()}qe(e,t){this.xe=!0,this.Ce=this.Ce.insert(e,t)}Qe(e){this.xe=!0,this.Ce=this.Ce.remove(e)}$e(){this.ve+=1}Ue(){this.ve-=1,Be(this.ve>=0,3241,{ve:this.ve})}Ke(){this.xe=!0,this.Me=!0}},QE=class{constructor(e){this.We=e,this.Ge=new Map,this.ze=Yi(),this.je=Ag(),this.Je=Ag(),this.He=new ht(Se)}Ye(e){for(let t of e.Se)e.be&&e.be.isFoundDocument()?this.Ze(t,e.be):this.Xe(t,e.key,e.be);for(let t of e.removedTargetIds)this.Xe(t,e.key,e.be)}et(e){this.forEachTarget(e,t=>{let r=this.tt(t);switch(e.state){case 0:this.nt(t)&&r.Be(e.resumeToken);break;case 1:r.Ue(),r.Oe||r.ke(),r.Be(e.resumeToken);break;case 2:r.Ue(),r.Oe||this.removeTarget(t);break;case 3:this.nt(t)&&(r.Ke(),r.Be(e.resumeToken));break;case 4:this.nt(t)&&(this.rt(t),r.Be(e.resumeToken));break;default:le(56790,{state:e.state})}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Ge.forEach((r,i)=>{this.nt(i)&&t(i)})}it(e){let t=e.targetId,r=e.De.count,i=this.st(t);if(i){let o=i.target;if(BE(o))if(r===0){let s=new ae(o.path);this.Xe(t,s,Vr.newNoDocument(s,_e.min()))}else Be(r===1,20013,{expectedCount:r});else{let s=this.ot(t);if(s!==r){let a=this._t(e),c=a?this.ut(a,e,s):1;if(c!==0){this.rt(t);let u=c===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.He=this.He.insert(t,u)}Yk?.ct((function(f,m,_,E,x){var V,U,W,oe,fe,Fe;let At={localCacheCount:f,existenceFilterCount:m.count,databaseId:_.database,projectId:_.projectId},$e=m.unchangedNames;return $e&&(At.bloomFilter={applied:x===0,hashCount:(V=$e?.hashCount)!==null&&V!==void 0?V:0,bitmapLength:(oe=(W=(U=$e?.bits)===null||U===void 0?void 0:U.bitmap)===null||W===void 0?void 0:W.length)!==null&&oe!==void 0?oe:0,padding:(Fe=(fe=$e?.bits)===null||fe===void 0?void 0:fe.padding)!==null&&Fe!==void 0?Fe:0,mightContain:P=>{var S;return(S=E?.mightContain(P))!==null&&S!==void 0&&S}}),At})(s,e.De,this.We.lt(),a,c))}}}}_t(e){let t=e.De.unchangedNames;if(!t||!t.bits)return null;let{bits:{bitmap:r="",padding:i=0},hashCount:o=0}=t,s,a;try{s=Wi(r).toUint8Array()}catch(c){if(c instanceof jg)return Wo("Decoding the base64 bloom filter in existence filter failed ("+c.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw c}try{a=new YE(s,i,o)}catch(c){return Wo(c instanceof Qs?"BloomFilter error: ":"Applying bloom filter failed: ",c),null}return a.fe===0?null:a}ut(e,t,r){return t.De.count===r-this.ht(e,t.targetId)?0:2}ht(e,t){let r=this.We.getRemoteKeysForTarget(t),i=0;return r.forEach(o=>{let s=this.We.lt(),a=`projects/${s.projectId}/databases/${s.database}/documents/${o.path.canonicalString()}`;e.mightContain(a)||(this.Xe(t,o,null),i++)}),i}Pt(e){let t=new Map;this.Ge.forEach((o,s)=>{let a=this.st(s);if(a){if(o.current&&BE(a.target)){let c=new ae(a.target.path);this.Tt(c).has(s)||this.It(s,c)||this.Xe(s,c,Vr.newNoDocument(c,e))}o.Ne&&(t.set(s,o.Le()),o.ke())}});let r=Me();this.Je.forEach((o,s)=>{let a=!0;s.forEachWhile(c=>{let u=this.st(c);return!u||u.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(r=r.add(o))}),this.ze.forEach((o,s)=>s.setReadTime(e));let i=new Gg(e,t,this.He,this.ze,r);return this.ze=Yi(),this.je=Ag(),this.Je=Ag(),this.He=new ht(Se),i}Ze(e,t){if(!this.nt(e))return;let r=this.It(e,t.key)?2:0;this.tt(e).qe(t.key,r),this.ze=this.ze.insert(t.key,t),this.je=this.je.insert(t.key,this.Tt(t.key).add(e)),this.Je=this.Je.insert(t.key,this.dt(t.key).add(e))}Xe(e,t,r){if(!this.nt(e))return;let i=this.tt(e);this.It(e,t)?i.qe(t,1):i.Qe(t),this.Je=this.Je.insert(t,this.dt(t).delete(e)),this.Je=this.Je.insert(t,this.dt(t).add(e)),r&&(this.ze=this.ze.insert(t,r))}removeTarget(e){this.Ge.delete(e)}ot(e){let t=this.tt(e).Le();return this.We.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}$e(e){this.tt(e).$e()}tt(e){let t=this.Ge.get(e);return t||(t=new Qg,this.Ge.set(e,t)),t}dt(e){let t=this.Je.get(e);return t||(t=new jt(Se),this.Je=this.Je.insert(e,t)),t}Tt(e){let t=this.je.get(e);return t||(t=new jt(Se),this.je=this.je.insert(e,t)),t}nt(e){let t=this.st(e)!==null;return t||te("WatchChangeAggregator","Detected inactive target",e),t}st(e){let t=this.Ge.get(e);return t&&t.Oe?null:this.We.Et(e)}rt(e){this.Ge.set(e,new Qg),this.We.getRemoteKeysForTarget(e).forEach(t=>{this.Xe(e,t,null)})}It(e,t){return this.We.getRemoteKeysForTarget(e).has(t)}};function Ag(){return new ht(ae.comparator)}function Xk(){return new ht(ae.comparator)}var U7={asc:"ASCENDING",desc:"DESCENDING"},j7={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},B7={and:"AND",or:"OR"},ZE=class{constructor(e,t){this.databaseId=e,this.useProto3Json=t}};function XE(n,e){return n.useProto3Json||_m(e)?e:{value:e}}function Zg(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function dR(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function $7(n,e){return Zg(n,e.toTimestamp())}function di(n){return Be(!!n,49232),_e.fromTimestamp((function(t){let r=qi(t);return new it(r.seconds,r.nanos)})(n))}function vI(n,e){return JE(n,e).canonicalString()}function JE(n,e){let t=(function(i){return new tt(["projects",i.projectId,"databases",i.database])})(n).child("documents");return e===void 0?t:t.child(e)}function fR(n){let e=tt.fromString(n);return Be(vR(e),10190,{key:e.toString()}),e}function eC(n,e){return vI(n.databaseId,e.path)}function gE(n,e){let t=fR(e);if(t.get(1)!==n.databaseId.projectId)throw new G($.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new G($.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new ae(pR(t))}function hR(n,e){return vI(n.databaseId,e)}function H7(n){let e=fR(n);return e.length===4?tt.emptyPath():pR(e)}function tC(n){return new tt(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function pR(n){return Be(n.length>4&&n.get(4)==="documents",29091,{key:n.toString()}),n.popFirst(5)}function Jk(n,e,t){return{name:eC(n,e),fields:t.value.mapValue.fields}}function z7(n,e){let t;if("targetChange"in e){e.targetChange;let r=(function(u){return u==="NO_CHANGE"?0:u==="ADD"?1:u==="REMOVE"?2:u==="CURRENT"?3:u==="RESET"?4:le(39313,{state:u})})(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],o=(function(u,f){return u.useProto3Json?(Be(f===void 0||typeof f=="string",58123),ln.fromBase64String(f||"")):(Be(f===void 0||f instanceof Buffer||f instanceof Uint8Array,16193),ln.fromUint8Array(f||new Uint8Array))})(n,e.targetChange.resumeToken),s=e.targetChange.cause,a=s&&(function(u){let f=u.code===void 0?$.UNKNOWN:uR(u.code);return new G(f,u.message||"")})(s);t=new Yg(r,i,o,a||null)}else if("documentChange"in e){e.documentChange;let r=e.documentChange;r.document,r.document.name,r.document.updateTime;let i=gE(n,r.document.name),o=di(r.document.updateTime),s=r.document.createTime?di(r.document.createTime):_e.min(),a=new Hn({mapValue:{fields:r.document.fields}}),c=Vr.newFoundDocument(i,o,s,a),u=r.targetIds||[],f=r.removedTargetIds||[];t=new Fc(u,f,c.key,c)}else if("documentDelete"in e){e.documentDelete;let r=e.documentDelete;r.document;let i=gE(n,r.document),o=r.readTime?di(r.readTime):_e.min(),s=Vr.newNoDocument(i,o),a=r.removedTargetIds||[];t=new Fc([],a,s.key,s)}else if("documentRemove"in e){e.documentRemove;let r=e.documentRemove;r.document;let i=gE(n,r.document),o=r.removedTargetIds||[];t=new Fc([],o,i,null)}else{if(!("filter"in e))return le(11601,{At:e});{e.filter;let r=e.filter;r.targetId;let{count:i=0,unchangedNames:o}=r,s=new KE(i,o),a=r.targetId;t=new Kg(a,s)}}return t}function q7(n,e){let t;if(e instanceof aa)t={update:Jk(n,e.key,e.value)};else if(e instanceof zc)t={delete:eC(n,e.key)};else if(e instanceof hi)t={update:Jk(n,e.key,e.data),updateMask:eH(e.fieldMask)};else{if(!(e instanceof zE))return le(16599,{Rt:e.type});t={verify:eC(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>(function(o,s){let a=s.transform;if(a instanceof ra)return{fieldPath:s.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof ia)return{fieldPath:s.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof oa)return{fieldPath:s.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof sa)return{fieldPath:s.field.canonicalString(),increment:a.Ee};throw le(20930,{transform:s.transform})})(0,r))),e.precondition.isNone||(t.currentDocument=(function(i,o){return o.updateTime!==void 0?{updateTime:$7(i,o.updateTime)}:o.exists!==void 0?{exists:o.exists}:le(27497)})(n,e.precondition)),t}function W7(n,e){return n&&n.length>0?(Be(e!==void 0,14353),n.map(t=>(function(i,o){let s=i.updateTime?di(i.updateTime):di(o);return s.isEqual(_e.min())&&(s=di(o)),new HE(s,i.transformResults||[])})(t,e))):[]}function G7(n,e){return{documents:[hR(n,e.path)]}}function K7(n,e){let t={structuredQuery:{}},r=e.path,i;e.collectionGroup!==null?(i=r,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),t.structuredQuery.from=[{collectionId:r.lastSegment()}]),t.parent=hR(n,i);let o=(function(u){if(u.length!==0)return mR(Ur.create(u,"and"))})(e.filters);o&&(t.structuredQuery.where=o);let s=(function(u){if(u.length!==0)return u.map(f=>(function(_){return{field:kc(_.field),direction:Z7(_.dir)}})(f))})(e.orderBy);s&&(t.structuredQuery.orderBy=s);let a=XE(n,e.limit);return a!==null&&(t.structuredQuery.limit=a),e.startAt&&(t.structuredQuery.startAt=(function(u){return{before:u.inclusive,values:u.position}})(e.startAt)),e.endAt&&(t.structuredQuery.endAt=(function(u){return{before:!u.inclusive,values:u.position}})(e.endAt)),{Vt:t,parent:i}}function Y7(n){let e=H7(n.parent),t=n.structuredQuery,r=t.from?t.from.length:0,i=null;if(r>0){Be(r===1,65062);let f=t.from[0];f.allDescendants?i=f.collectionId:e=e.child(f.collectionId)}let o=[];t.where&&(o=(function(m){let _=gR(m);return _ instanceof Ur&&GO(_)?_.getFilters():[_]})(t.where));let s=[];t.orderBy&&(s=(function(m){return m.map(_=>(function(x){return new na(Oc(x.field),(function(U){switch(U){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(x.direction))})(_))})(t.orderBy));let a=null;t.limit&&(a=(function(m){let _;return _=typeof m=="object"?m.value:m,_m(_)?null:_})(t.limit));let c=null;t.startAt&&(c=(function(m){let _=!!m.before,E=m.values||[];return new Ko(E,_)})(t.startAt));let u=null;return t.endAt&&(u=(function(m){let _=!m.before,E=m.values||[];return new Ko(E,_)})(t.endAt)),C7(e,i,s,o,a,"F",c,u)}function Q7(n,e){let t=(function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return le(28987,{purpose:i})}})(e.purpose);return t==null?null:{"goog-listen-tags":t}}function gR(n){return n.unaryFilter!==void 0?(function(t){switch(t.unaryFilter.op){case"IS_NAN":let r=Oc(t.unaryFilter.field);return It.create(r,"==",{doubleValue:NaN});case"IS_NULL":let i=Oc(t.unaryFilter.field);return It.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":let o=Oc(t.unaryFilter.field);return It.create(o,"!=",{doubleValue:NaN});case"IS_NOT_NULL":let s=Oc(t.unaryFilter.field);return It.create(s,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return le(61313);default:return le(60726)}})(n):n.fieldFilter!==void 0?(function(t){return It.create(Oc(t.fieldFilter.field),(function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return le(58110);default:return le(50506)}})(t.fieldFilter.op),t.fieldFilter.value)})(n):n.compositeFilter!==void 0?(function(t){return Ur.create(t.compositeFilter.filters.map(r=>gR(r)),(function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return le(1026)}})(t.compositeFilter.op))})(n):le(30097,{filter:n})}function Z7(n){return U7[n]}function X7(n){return j7[n]}function J7(n){return B7[n]}function kc(n){return{fieldPath:n.canonicalString()}}function Oc(n){return zn.fromServerFormat(n.fieldPath)}function mR(n){return n instanceof It?(function(t){if(t.op==="=="){if(jk(t.value))return{unaryFilter:{field:kc(t.field),op:"IS_NAN"}};if(Uk(t.value))return{unaryFilter:{field:kc(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(jk(t.value))return{unaryFilter:{field:kc(t.field),op:"IS_NOT_NAN"}};if(Uk(t.value))return{unaryFilter:{field:kc(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:kc(t.field),op:X7(t.op),value:t.value}}})(n):n instanceof Ur?(function(t){let r=t.getFilters().map(i=>mR(i));return r.length===1?r[0]:{compositeFilter:{op:J7(t.op),filters:r}}})(n):le(54877,{filter:n})}function eH(n){let e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function vR(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}var yd=class n{constructor(e,t,r,i,o=_e.min(),s=_e.min(),a=ln.EMPTY_BYTE_STRING,c=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=o,this.lastLimboFreeSnapshotVersion=s,this.resumeToken=a,this.expectedCount=c}withSequenceNumber(e){return new n(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}};var nC=class{constructor(e){this.gt=e}};function tH(n){let e=Y7({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?qg(e,e.limit,"L"):e}var Xg=class{constructor(){}bt(e,t){this.Dt(e,t),t.vt()}Dt(e,t){if("nullValue"in e)this.Ct(t,5);else if("booleanValue"in e)this.Ct(t,10),t.Ft(e.booleanValue?1:0);else if("integerValue"in e)this.Ct(t,15),t.Ft(rt(e.integerValue));else if("doubleValue"in e){let r=rt(e.doubleValue);isNaN(r)?this.Ct(t,13):(this.Ct(t,15),gd(r)?t.Ft(0):t.Ft(r))}else if("timestampValue"in e){let r=e.timestampValue;this.Ct(t,20),typeof r=="string"&&(r=qi(r)),t.Mt(`${r.seconds||""}`),t.Ft(r.nanos||0)}else if("stringValue"in e)this.xt(e.stringValue,t),this.Ot(t);else if("bytesValue"in e)this.Ct(t,30),t.Nt(Wi(e.bytesValue)),this.Ot(t);else if("referenceValue"in e)this.Bt(e.referenceValue,t);else if("geoPointValue"in e){let r=e.geoPointValue;this.Ct(t,45),t.Ft(r.latitude||0),t.Ft(r.longitude||0)}else"mapValue"in e?zO(e)?this.Ct(t,Number.MAX_SAFE_INTEGER):HO(e)?this.Lt(e.mapValue,t):(this.kt(e.mapValue,t),this.Ot(t)):"arrayValue"in e?(this.qt(e.arrayValue,t),this.Ot(t)):le(19022,{Qt:e})}xt(e,t){this.Ct(t,25),this.$t(e,t)}$t(e,t){t.Mt(e)}kt(e,t){let r=e.fields||{};this.Ct(t,55);for(let i of Object.keys(r))this.xt(i,t),this.Dt(r[i],t)}Lt(e,t){var r,i;let o=e.fields||{};this.Ct(t,53);let s=Uc,a=((i=(r=o[s].arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.length)||0;this.Ct(t,15),t.Ft(rt(a)),this.xt(s,t),this.Dt(o[s],t)}qt(e,t){let r=e.values||[];this.Ct(t,50);for(let i of r)this.Dt(i,t)}Bt(e,t){this.Ct(t,37),ae.fromName(e).path.forEach(r=>{this.Ct(t,60),this.$t(r,t)})}Ct(e,t){e.Ft(t)}Ot(e){e.Ft(2)}};Xg.Ut=new Xg;var rC=class{constructor(){this.Dn=new iC}addToCollectionParentIndex(e,t){return this.Dn.add(t),q.resolve()}getCollectionParents(e,t){return q.resolve(this.Dn.getEntries(t))}addFieldIndex(e,t){return q.resolve()}deleteFieldIndex(e,t){return q.resolve()}deleteAllFieldIndexes(e){return q.resolve()}createTargetIndexes(e,t){return q.resolve()}getDocumentsMatchingTarget(e,t){return q.resolve(null)}getIndexType(e,t){return q.resolve(0)}getFieldIndexes(e,t){return q.resolve([])}getNextCollectionGroupToUpdate(e){return q.resolve(null)}getMinOffset(e,t){return q.resolve(ta.min())}getMinOffsetFromCollectionGroup(e,t){return q.resolve(ta.min())}updateCollectionGroup(e,t,r){return q.resolve()}updateIndexEntries(e,t){return q.resolve()}},iC=class{constructor(){this.index={}}add(e){let t=e.lastSegment(),r=e.popLast(),i=this.index[t]||new jt(tt.comparator),o=!i.has(r);return this.index[t]=i.add(r),o}has(e){let t=e.lastSegment(),r=e.popLast(),i=this.index[t];return i&&i.has(r)}getEntries(e){return(this.index[e]||new jt(tt.comparator)).toArray()}};var sme=new Uint8Array(0);var eO={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},_R=41943040,cr=class n{static withCacheSize(e){return new n(e,n.DEFAULT_COLLECTION_PERCENTILE,n.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}};cr.DEFAULT_COLLECTION_PERCENTILE=10,cr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,cr.DEFAULT=new cr(_R,cr.DEFAULT_COLLECTION_PERCENTILE,cr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),cr.DISABLED=new cr(-1,0,0);var bd=class n{constructor(e){this._r=e}next(){return this._r+=2,this._r}static ar(){return new n(0)}static ur(){return new n(-1)}};var tO="LruGarbageCollector",nH=1048576;function nO([n,e],[t,r]){let i=Se(n,t);return i===0?Se(e,r):i}var oC=class{constructor(e){this.Tr=e,this.buffer=new jt(nO),this.Ir=0}dr(){return++this.Ir}Er(e){let t=[e,this.dr()];if(this.buffer.size<this.Tr)this.buffer=this.buffer.add(t);else{let r=this.buffer.last();nO(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}},sC=class{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.Ar=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Rr(6e4)}stop(){this.Ar&&(this.Ar.cancel(),this.Ar=null)}get started(){return this.Ar!==null}Rr(e){te(tO,`Garbage collection scheduled in ${e}ms`),this.Ar=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,()=>y(this,null,function*(){this.Ar=null;try{yield this.localStore.collectGarbage(this.garbageCollector)}catch(t){Qc(t)?te(tO,"Ignoring IndexedDB error during garbage collection: ",t):yield Yc(t)}yield this.Rr(3e5)}))}},aC=class{constructor(e,t){this.Vr=e,this.params=t}calculateTargetCount(e,t){return this.Vr.mr(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(t===0)return q.resolve(cI.ue);let r=new oC(t);return this.Vr.forEachTarget(e,i=>r.Er(i.sequenceNumber)).next(()=>this.Vr.gr(e,i=>r.Er(i))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.Vr.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.Vr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(te("LruGarbageCollector","Garbage collection skipped; disabled"),q.resolve(eO)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(te("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),eO):this.pr(e,t))}getCacheSize(e){return this.Vr.getCacheSize(e)}pr(e,t){let r,i,o,s,a,c,u,f=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(m=>(m>this.params.maximumSequenceNumbersToCollect?(te("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${m}`),i=this.params.maximumSequenceNumbersToCollect):i=m,s=Date.now(),this.nthSequenceNumber(e,i))).next(m=>(r=m,a=Date.now(),this.removeTargets(e,r,t))).next(m=>(o=m,c=Date.now(),this.removeOrphanedDocuments(e,r))).next(m=>(u=Date.now(),Pc()<=De.DEBUG&&te("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${s-f}ms
	Determined least recently used ${i} in `+(a-s)+`ms
	Removed ${o} targets in `+(c-a)+`ms
	Removed ${m} documents in `+(u-c)+`ms
Total Duration: ${u-f}ms`),q.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:o,documentsRemoved:m})))}};function rH(n,e){return new aC(n,e)}var cC=class{constructor(){this.changes=new Ki(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Vr.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();let r=this.changes.get(t);return r!==void 0?q.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}};var lC=class{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}};var uC=class{constructor(e,t,r,i){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,t))).next(i=>(r!==null&&fd(r.mutation,i,lr.empty(),it.now()),i))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.getLocalViewOfDocuments(e,r,Me()).next(()=>r))}getLocalViewOfDocuments(e,t,r=Me()){let i=Ys();return this.populateOverlays(e,i,t).next(()=>this.computeViews(e,t,i,r).next(o=>{let s=ld();return o.forEach((a,c)=>{s=s.insert(a,c.overlayedDocument)}),s}))}getOverlayedDocuments(e,t){let r=Ys();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,Me()))}populateOverlays(e,t,r){let i=[];return r.forEach(o=>{t.has(o)||i.push(o)}),this.documentOverlayCache.getOverlays(e,i).next(o=>{o.forEach((s,a)=>{t.set(s,a)})})}computeViews(e,t,r,i){let o=Yi(),s=dd(),a=(function(){return dd()})();return t.forEach((c,u)=>{let f=r.get(u.key);i.has(u.key)&&(f===void 0||f.mutation instanceof hi)?o=o.insert(u.key,u):f!==void 0?(s.set(u.key,f.mutation.getFieldMask()),fd(f.mutation,u,f.mutation.getFieldMask(),it.now())):s.set(u.key,lr.empty())}),this.recalculateAndSaveOverlays(e,o).next(c=>(c.forEach((u,f)=>s.set(u,f)),t.forEach((u,f)=>{var m;return a.set(u,new lC(f,(m=s.get(u))!==null&&m!==void 0?m:null))}),a))}recalculateAndSaveOverlays(e,t){let r=dd(),i=new ht((s,a)=>s-a),o=Me();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(s=>{for(let a of s)a.keys().forEach(c=>{let u=t.get(c);if(u===null)return;let f=r.get(c)||lr.empty();f=a.applyToLocalView(u,f),r.set(c,f);let m=(i.get(a.batchId)||Me()).add(c);i=i.insert(a.batchId,m)})}).next(()=>{let s=[],a=i.getReverseIterator();for(;a.hasNext();){let c=a.getNext(),u=c.key,f=c.value,m=tR();f.forEach(_=>{if(!o.has(_)){let E=cR(t.get(_),r.get(_));E!==null&&m.set(_,E),o=o.add(_)}}),s.push(this.documentOverlayCache.saveOverlays(e,u,m))}return q.waitFor(s)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,t,r,i){return(function(s){return ae.isDocumentKey(s.path)&&s.collectionGroup===null&&s.filters.length===0})(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):gI(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r,i):this.getDocumentsMatchingCollectionQuery(e,t,r,i)}getNextDocuments(e,t,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,i).next(o=>{let s=i-o.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,i-o.size):q.resolve(Ys()),a=pd,c=o;return s.next(u=>q.forEach(u,(f,m)=>(a<m.largestBatchId&&(a=m.largestBatchId),o.get(f)?q.resolve():this.remoteDocumentCache.getEntry(e,f).next(_=>{c=c.insert(f,_)}))).next(()=>this.populateOverlays(e,u,o)).next(()=>this.computeViews(e,c,u,Me())).next(f=>({batchId:a,changes:eR(f)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new ae(t)).next(r=>{let i=ld();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,t,r,i){let o=t.collectionGroup,s=ld();return this.indexManager.getCollectionParents(e,o).next(a=>q.forEach(a,c=>{let u=(function(m,_){return new Gi(_,null,m.explicitOrderBy.slice(),m.filters.slice(),m.limit,m.limitType,m.startAt,m.endAt)})(t,c.child(o));return this.getDocumentsMatchingCollectionQuery(e,u,r,i).next(f=>{f.forEach((m,_)=>{s=s.insert(m,_)})})}).next(()=>s))}getDocumentsMatchingCollectionQuery(e,t,r,i){let o;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next(s=>(o=s,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,o,i))).next(s=>{o.forEach((c,u)=>{let f=u.getKey();s.get(f)===null&&(s=s.insert(f,Vr.newInvalidDocument(f)))});let a=ld();return s.forEach((c,u)=>{let f=o.get(c);f!==void 0&&fd(f.mutation,u,lr.empty(),it.now()),Cm(t,u)&&(a=a.insert(c,u))}),a})}};var dC=class{constructor(e){this.serializer=e,this.Br=new Map,this.Lr=new Map}getBundleMetadata(e,t){return q.resolve(this.Br.get(t))}saveBundleMetadata(e,t){return this.Br.set(t.id,(function(i){return{id:i.id,version:i.version,createTime:di(i.createTime)}})(t)),q.resolve()}getNamedQuery(e,t){return q.resolve(this.Lr.get(t))}saveNamedQuery(e,t){return this.Lr.set(t.name,(function(i){return{name:i.name,query:tH(i.bundledQuery),readTime:di(i.readTime)}})(t)),q.resolve()}};var fC=class{constructor(){this.overlays=new ht(ae.comparator),this.kr=new Map}getOverlay(e,t){return q.resolve(this.overlays.get(t))}getOverlays(e,t){let r=Ys();return q.forEach(t,i=>this.getOverlay(e,i).next(o=>{o!==null&&r.set(i,o)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((i,o)=>{this.wt(e,t,o)}),q.resolve()}removeOverlaysForBatchId(e,t,r){let i=this.kr.get(r);return i!==void 0&&(i.forEach(o=>this.overlays=this.overlays.remove(o)),this.kr.delete(r)),q.resolve()}getOverlaysForCollection(e,t,r){let i=Ys(),o=t.length+1,s=new ae(t.child("")),a=this.overlays.getIteratorFrom(s);for(;a.hasNext();){let c=a.getNext().value,u=c.getKey();if(!t.isPrefixOf(u.path))break;u.path.length===o&&c.largestBatchId>r&&i.set(c.getKey(),c)}return q.resolve(i)}getOverlaysForCollectionGroup(e,t,r,i){let o=new ht((u,f)=>u-f),s=this.overlays.getIterator();for(;s.hasNext();){let u=s.getNext().value;if(u.getKey().getCollectionGroup()===t&&u.largestBatchId>r){let f=o.get(u.largestBatchId);f===null&&(f=Ys(),o=o.insert(u.largestBatchId,f)),f.set(u.getKey(),u)}}let a=Ys(),c=o.getIterator();for(;c.hasNext()&&(c.getNext().value.forEach((u,f)=>a.set(u,f)),!(a.size()>=i)););return q.resolve(a)}wt(e,t,r){let i=this.overlays.get(r.key);if(i!==null){let s=this.kr.get(i.largestBatchId).delete(r.key);this.kr.set(i.largestBatchId,s)}this.overlays=this.overlays.insert(r.key,new GE(t,r));let o=this.kr.get(t);o===void 0&&(o=Me(),this.kr.set(t,o)),this.kr.set(t,o.add(r.key))}};var hC=class{constructor(){this.sessionToken=ln.EMPTY_BYTE_STRING}getSessionToken(e){return q.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,q.resolve()}};var wd=class{constructor(){this.qr=new jt(Ct.Qr),this.$r=new jt(Ct.Ur)}isEmpty(){return this.qr.isEmpty()}addReference(e,t){let r=new Ct(e,t);this.qr=this.qr.add(r),this.$r=this.$r.add(r)}Kr(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.Wr(new Ct(e,t))}Gr(e,t){e.forEach(r=>this.removeReference(r,t))}zr(e){let t=new ae(new tt([])),r=new Ct(t,e),i=new Ct(t,e+1),o=[];return this.$r.forEachInRange([r,i],s=>{this.Wr(s),o.push(s.key)}),o}jr(){this.qr.forEach(e=>this.Wr(e))}Wr(e){this.qr=this.qr.delete(e),this.$r=this.$r.delete(e)}Jr(e){let t=new ae(new tt([])),r=new Ct(t,e),i=new Ct(t,e+1),o=Me();return this.$r.forEachInRange([r,i],s=>{o=o.add(s.key)}),o}containsKey(e){let t=new Ct(e,0),r=this.qr.firstAfterOrEqual(t);return r!==null&&e.isEqual(r.key)}},Ct=class{constructor(e,t){this.key=e,this.Hr=t}static Qr(e,t){return ae.comparator(e.key,t.key)||Se(e.Hr,t.Hr)}static Ur(e,t){return Se(e.Hr,t.Hr)||ae.comparator(e.key,t.key)}};var pC=class{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.er=1,this.Yr=new jt(Ct.Qr)}checkEmpty(e){return q.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,r,i){let o=this.er;this.er++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];let s=new qE(o,t,r,i);this.mutationQueue.push(s);for(let a of i)this.Yr=this.Yr.add(new Ct(a.key,o)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return q.resolve(s)}lookupMutationBatch(e,t){return q.resolve(this.Zr(t))}getNextMutationBatchAfterBatchId(e,t){let r=t+1,i=this.Xr(r),o=i<0?0:i;return q.resolve(this.mutationQueue.length>o?this.mutationQueue[o]:null)}getHighestUnacknowledgedBatchId(){return q.resolve(this.mutationQueue.length===0?lI:this.er-1)}getAllMutationBatches(e){return q.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){let r=new Ct(t,0),i=new Ct(t,Number.POSITIVE_INFINITY),o=[];return this.Yr.forEachInRange([r,i],s=>{let a=this.Zr(s.Hr);o.push(a)}),q.resolve(o)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new jt(Se);return t.forEach(i=>{let o=new Ct(i,0),s=new Ct(i,Number.POSITIVE_INFINITY);this.Yr.forEachInRange([o,s],a=>{r=r.add(a.Hr)})}),q.resolve(this.ei(r))}getAllMutationBatchesAffectingQuery(e,t){let r=t.path,i=r.length+1,o=r;ae.isDocumentKey(o)||(o=o.child(""));let s=new Ct(new ae(o),0),a=new jt(Se);return this.Yr.forEachWhile(c=>{let u=c.key.path;return!!r.isPrefixOf(u)&&(u.length===i&&(a=a.add(c.Hr)),!0)},s),q.resolve(this.ei(a))}ei(e){let t=[];return e.forEach(r=>{let i=this.Zr(r);i!==null&&t.push(i)}),t}removeMutationBatch(e,t){Be(this.ti(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Yr;return q.forEach(t.mutations,i=>{let o=new Ct(i.key,t.batchId);return r=r.delete(o),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.Yr=r})}rr(e){}containsKey(e,t){let r=new Ct(t,0),i=this.Yr.firstAfterOrEqual(r);return q.resolve(t.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,q.resolve()}ti(e,t){return this.Xr(e)}Xr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Zr(e){let t=this.Xr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}};var gC=class{constructor(e){this.ni=e,this.docs=(function(){return new ht(ae.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){let r=t.key,i=this.docs.get(r),o=i?i.size:0,s=this.ni(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:s}),this.size+=s-o,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){let t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){let r=this.docs.get(t);return q.resolve(r?r.document.mutableCopy():Vr.newInvalidDocument(t))}getEntries(e,t){let r=Yi();return t.forEach(i=>{let o=this.docs.get(i);r=r.insert(i,o?o.document.mutableCopy():Vr.newInvalidDocument(i))}),q.resolve(r)}getDocumentsMatchingQuery(e,t,r,i){let o=Yi(),s=t.path,a=new ae(s.child("__id-9223372036854775808__")),c=this.docs.getIteratorFrom(a);for(;c.hasNext();){let{key:u,value:{document:f}}=c.getNext();if(!s.isPrefixOf(u.path))break;u.path.length>s.length+1||i7(r7(f),r)<=0||(i.has(f.key)||Cm(t,f))&&(o=o.insert(f.key,f.mutableCopy()))}return q.resolve(o)}getAllFromCollectionGroup(e,t,r,i){le(9500)}ri(e,t){return q.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new mC(this)}getSize(e){return q.resolve(this.size)}},mC=class extends cC{constructor(e){super(),this.Or=e}applyChanges(e){let t=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?t.push(this.Or.addEntry(e,i)):this.Or.removeEntry(r)}),q.waitFor(t)}getFromCache(e,t){return this.Or.getEntry(e,t)}getAllFromCache(e,t){return this.Or.getEntries(e,t)}};var vC=class{constructor(e){this.persistence=e,this.ii=new Ki(t=>hI(t),pI),this.lastRemoteSnapshotVersion=_e.min(),this.highestTargetId=0,this.si=0,this.oi=new wd,this.targetCount=0,this._i=bd.ar()}forEachTarget(e,t){return this.ii.forEach((r,i)=>t(i)),q.resolve()}getLastRemoteSnapshotVersion(e){return q.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return q.resolve(this.si)}allocateTargetId(e){return this.highestTargetId=this._i.next(),q.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.si&&(this.si=t),q.resolve()}hr(e){this.ii.set(e.target,e);let t=e.targetId;t>this.highestTargetId&&(this._i=new bd(t),this.highestTargetId=t),e.sequenceNumber>this.si&&(this.si=e.sequenceNumber)}addTargetData(e,t){return this.hr(t),this.targetCount+=1,q.resolve()}updateTargetData(e,t){return this.hr(t),q.resolve()}removeTargetData(e,t){return this.ii.delete(t.target),this.oi.zr(t.targetId),this.targetCount-=1,q.resolve()}removeTargets(e,t,r){let i=0,o=[];return this.ii.forEach((s,a)=>{a.sequenceNumber<=t&&r.get(a.targetId)===null&&(this.ii.delete(s),o.push(this.removeMatchingKeysForTargetId(e,a.targetId)),i++)}),q.waitFor(o).next(()=>i)}getTargetCount(e){return q.resolve(this.targetCount)}getTargetData(e,t){let r=this.ii.get(t)||null;return q.resolve(r)}addMatchingKeys(e,t,r){return this.oi.Kr(t,r),q.resolve()}removeMatchingKeys(e,t,r){this.oi.Gr(t,r);let i=this.persistence.referenceDelegate,o=[];return i&&t.forEach(s=>{o.push(i.markPotentiallyOrphaned(e,s))}),q.waitFor(o)}removeMatchingKeysForTargetId(e,t){return this.oi.zr(t),q.resolve()}getMatchingKeysForTargetId(e,t){let r=this.oi.Jr(t);return q.resolve(r)}containsKey(e,t){return q.resolve(this.oi.containsKey(t))}};var Jg=class{constructor(e,t){this.ai={},this.overlays={},this.ui=new cI(0),this.ci=!1,this.ci=!0,this.li=new hC,this.referenceDelegate=e(this),this.hi=new vC(this),this.indexManager=new rC,this.remoteDocumentCache=(function(i){return new gC(i)})(r=>this.referenceDelegate.Pi(r)),this.serializer=new nC(t),this.Ti=new dC(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.ci=!1,Promise.resolve()}get started(){return this.ci}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new fC,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.ai[e.toKey()];return r||(r=new pC(t,this.referenceDelegate),this.ai[e.toKey()]=r),r}getGlobalsCache(){return this.li}getTargetCache(){return this.hi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ti}runTransaction(e,t,r){te("MemoryPersistence","Starting transaction:",e);let i=new _C(this.ui.next());return this.referenceDelegate.Ii(),r(i).next(o=>this.referenceDelegate.di(i).next(()=>o)).toPromise().then(o=>(i.raiseOnCommittedEvent(),o))}Ei(e,t){return q.or(Object.values(this.ai).map(r=>()=>r.containsKey(e,t)))}},_C=class extends xE{constructor(e){super(),this.currentSequenceNumber=e}},yC=class n{constructor(e){this.persistence=e,this.Ai=new wd,this.Ri=null}static Vi(e){return new n(e)}get mi(){if(this.Ri)return this.Ri;throw le(60996)}addReference(e,t,r){return this.Ai.addReference(r,t),this.mi.delete(r.toString()),q.resolve()}removeReference(e,t,r){return this.Ai.removeReference(r,t),this.mi.add(r.toString()),q.resolve()}markPotentiallyOrphaned(e,t){return this.mi.add(t.toString()),q.resolve()}removeTarget(e,t){this.Ai.zr(t.targetId).forEach(i=>this.mi.add(i.toString()));let r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(i=>{i.forEach(o=>this.mi.add(o.toString()))}).next(()=>r.removeTargetData(e,t))}Ii(){this.Ri=new Set}di(e){let t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return q.forEach(this.mi,r=>{let i=ae.fromPath(r);return this.fi(e,i).next(o=>{o||t.removeEntry(i,_e.min())})}).next(()=>(this.Ri=null,t.apply(e)))}updateLimboDocument(e,t){return this.fi(e,t).next(r=>{r?this.mi.delete(t.toString()):this.mi.add(t.toString())})}Pi(e){return 0}fi(e,t){return q.or([()=>q.resolve(this.Ai.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ei(e,t)])}},em=class n{constructor(e,t){this.persistence=e,this.gi=new Ki(r=>c7(r.path),(r,i)=>r.isEqual(i)),this.garbageCollector=rH(this,t)}static Vi(e,t){return new n(e,t)}Ii(){}di(e){return q.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}mr(e){let t=this.yr(e);return this.persistence.getTargetCache().getTargetCount(e).next(r=>t.next(i=>r+i))}yr(e){let t=0;return this.gr(e,r=>{t++}).next(()=>t)}gr(e,t){return q.forEach(this.gi,(r,i)=>this.Sr(e,r,i).next(o=>o?q.resolve():t(i)))}removeTargets(e,t,r){return this.persistence.getTargetCache().removeTargets(e,t,r)}removeOrphanedDocuments(e,t){let r=0,i=this.persistence.getRemoteDocumentCache(),o=i.newChangeBuffer();return i.ri(e,s=>this.Sr(e,s,t).next(a=>{a||(r++,o.removeEntry(s,_e.min()))})).next(()=>o.apply(e)).next(()=>r)}markPotentiallyOrphaned(e,t){return this.gi.set(t,e.currentSequenceNumber),q.resolve()}removeTarget(e,t){let r=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,t,r){return this.gi.set(r,e.currentSequenceNumber),q.resolve()}removeReference(e,t,r){return this.gi.set(r,e.currentSequenceNumber),q.resolve()}updateLimboDocument(e,t){return this.gi.set(t,e.currentSequenceNumber),q.resolve()}Pi(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=Og(e.data.value)),t}Sr(e,t,r){return q.or([()=>this.persistence.Ei(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{let i=this.gi.get(t);return q.resolve(i!==void 0&&i>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}};var bC=class n{constructor(e,t,r,i){this.targetId=e,this.fromCache=t,this.Is=r,this.ds=i}static Es(e,t){let r=Me(),i=Me();for(let o of t.docChanges)switch(o.type){case 0:r=r.add(o.doc.key);break;case 1:i=i.add(o.doc.key)}return new n(e,t.fromCache,r,i)}};var wC=class{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}};var EC=class{constructor(){this.As=!1,this.Rs=!1,this.Vs=100,this.fs=(function(){return GP()?8:s7(Vt())>0?6:4})()}initialize(e,t){this.gs=e,this.indexManager=t,this.As=!0}getDocumentsMatchingQuery(e,t,r,i){let o={result:null};return this.ps(e,t).next(s=>{o.result=s}).next(()=>{if(!o.result)return this.ys(e,t,i,r).next(s=>{o.result=s})}).next(()=>{if(o.result)return;let s=new wC;return this.ws(e,t,s).next(a=>{if(o.result=a,this.Rs)return this.Ss(e,t,s,a.size)})}).next(()=>o.result)}Ss(e,t,r,i){return r.documentReadCount<this.Vs?(Pc()<=De.DEBUG&&te("QueryEngine","SDK will not create cache indexes for query:",Ac(t),"since it only creates cache indexes for collection contains","more than or equal to",this.Vs,"documents"),q.resolve()):(Pc()<=De.DEBUG&&te("QueryEngine","Query:",Ac(t),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.fs*i?(Pc()<=De.DEBUG&&te("QueryEngine","The SDK decides to create cache indexes for query:",Ac(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,ui(t))):q.resolve())}ps(e,t){if(zk(t))return q.resolve(null);let r=ui(t);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(t.limit!==null&&i===1&&(t=qg(t,null,"F"),r=ui(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next(o=>{let s=Me(...o);return this.gs.getDocuments(e,s).next(a=>this.indexManager.getMinOffset(e,r).next(c=>{let u=this.bs(t,a);return this.Ds(t,u,s,c.readTime)?this.ps(e,qg(t,null,"F")):this.vs(e,u,t,c)}))})))}ys(e,t,r,i){return zk(t)||i.isEqual(_e.min())?q.resolve(null):this.gs.getDocuments(e,r).next(o=>{let s=this.bs(t,o);return this.Ds(t,s,r,i)?q.resolve(null):(Pc()<=De.DEBUG&&te("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),Ac(t)),this.vs(e,s,t,n7(i,pd)).next(a=>a))})}bs(e,t){let r=new jt(XO(e));return t.forEach((i,o)=>{Cm(e,o)&&(r=r.add(o))}),r}Ds(e,t,r,i){if(e.limit===null)return!1;if(r.size!==t.size)return!0;let o=e.limitType==="F"?t.last():t.first();return!!o&&(o.hasPendingWrites||o.version.compareTo(i)>0)}ws(e,t,r){return Pc()<=De.DEBUG&&te("QueryEngine","Using full collection scan to execute query:",Ac(t)),this.gs.getDocumentsMatchingQuery(e,t,ta.min(),r)}vs(e,t,r,i){return this.gs.getDocumentsMatchingQuery(e,r,i).next(o=>(t.forEach(s=>{o=o.insert(s.key,s)}),o))}};var _I="LocalStore",iH=3e8,CC=class{constructor(e,t,r,i){this.persistence=e,this.Cs=t,this.serializer=i,this.Fs=new ht(Se),this.Ms=new Ki(o=>hI(o),pI),this.xs=new Map,this.Os=e.getRemoteDocumentCache(),this.hi=e.getTargetCache(),this.Ti=e.getBundleCache(),this.Ns(r)}Ns(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new uC(this.Os,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Os.setIndexManager(this.indexManager),this.Cs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.Fs))}};function oH(n,e,t,r){return new CC(n,e,t,r)}function yR(n,e){return y(this,null,function*(){let t=me(n);return yield t.persistence.runTransaction("Handle user change","readonly",r=>{let i;return t.mutationQueue.getAllMutationBatches(r).next(o=>(i=o,t.Ns(e),t.mutationQueue.getAllMutationBatches(r))).next(o=>{let s=[],a=[],c=Me();for(let u of i){s.push(u.batchId);for(let f of u.mutations)c=c.add(f.key)}for(let u of o){a.push(u.batchId);for(let f of u.mutations)c=c.add(f.key)}return t.localDocuments.getDocuments(r,c).next(u=>({Bs:u,removedBatchIds:s,addedBatchIds:a}))})})})}function sH(n,e){let t=me(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{let i=e.batch.keys(),o=t.Os.newChangeBuffer({trackRemovals:!0});return(function(a,c,u,f){let m=u.batch,_=m.keys(),E=q.resolve();return _.forEach(x=>{E=E.next(()=>f.getEntry(c,x)).next(V=>{let U=u.docVersions.get(x);Be(U!==null,48541),V.version.compareTo(U)<0&&(m.applyToRemoteDocument(V,u),V.isValidDocument()&&(V.setReadTime(u.commitVersion),f.addEntry(V)))})}),E.next(()=>a.mutationQueue.removeMutationBatch(c,m))})(t,r,e,o).next(()=>o.apply(r)).next(()=>t.mutationQueue.performConsistencyCheck(r)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,(function(a){let c=Me();for(let u=0;u<a.mutationResults.length;++u)a.mutationResults[u].transformResults.length>0&&(c=c.add(a.batch.mutations[u].key));return c})(e))).next(()=>t.localDocuments.getDocuments(r,i))})}function bR(n){let e=me(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.hi.getLastRemoteSnapshotVersion(t))}function aH(n,e){let t=me(n),r=e.snapshotVersion,i=t.Fs;return t.persistence.runTransaction("Apply remote event","readwrite-primary",o=>{let s=t.Os.newChangeBuffer({trackRemovals:!0});i=t.Fs;let a=[];e.targetChanges.forEach((f,m)=>{let _=i.get(m);if(!_)return;a.push(t.hi.removeMatchingKeys(o,f.removedDocuments,m).next(()=>t.hi.addMatchingKeys(o,f.addedDocuments,m)));let E=_.withSequenceNumber(o.currentSequenceNumber);e.targetMismatches.get(m)!==null?E=E.withResumeToken(ln.EMPTY_BYTE_STRING,_e.min()).withLastLimboFreeSnapshotVersion(_e.min()):f.resumeToken.approximateByteSize()>0&&(E=E.withResumeToken(f.resumeToken,r)),i=i.insert(m,E),(function(V,U,W){return V.resumeToken.approximateByteSize()===0||U.snapshotVersion.toMicroseconds()-V.snapshotVersion.toMicroseconds()>=iH?!0:W.addedDocuments.size+W.modifiedDocuments.size+W.removedDocuments.size>0})(_,E,f)&&a.push(t.hi.updateTargetData(o,E))});let c=Yi(),u=Me();if(e.documentUpdates.forEach(f=>{e.resolvedLimboDocuments.has(f)&&a.push(t.persistence.referenceDelegate.updateLimboDocument(o,f))}),a.push(cH(o,s,e.documentUpdates).next(f=>{c=f.Ls,u=f.ks})),!r.isEqual(_e.min())){let f=t.hi.getLastRemoteSnapshotVersion(o).next(m=>t.hi.setTargetsMetadata(o,o.currentSequenceNumber,r));a.push(f)}return q.waitFor(a).next(()=>s.apply(o)).next(()=>t.localDocuments.getLocalViewOfDocuments(o,c,u)).next(()=>c)}).then(o=>(t.Fs=i,o))}function cH(n,e,t){let r=Me(),i=Me();return t.forEach(o=>r=r.add(o)),e.getEntries(n,r).next(o=>{let s=Yi();return t.forEach((a,c)=>{let u=o.get(a);c.isFoundDocument()!==u.isFoundDocument()&&(i=i.add(a)),c.isNoDocument()&&c.version.isEqual(_e.min())?(e.removeEntry(a,c.readTime),s=s.insert(a,c)):!u.isValidDocument()||c.version.compareTo(u.version)>0||c.version.compareTo(u.version)===0&&u.hasPendingWrites?(e.addEntry(c),s=s.insert(a,c)):te(_I,"Ignoring outdated watch update for ",a,". Current version:",u.version," Watch version:",c.version)}),{Ls:s,ks:i}})}function lH(n,e){let t=me(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=lI),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function uH(n,e){let t=me(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return t.hi.getTargetData(r,e).next(o=>o?(i=o,q.resolve(i)):t.hi.allocateTargetId(r).next(s=>(i=new yd(e,s,"TargetPurposeListen",r.currentSequenceNumber),t.hi.addTargetData(r,i).next(()=>i))))}).then(r=>{let i=t.Fs.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(t.Fs=t.Fs.insert(r.targetId,r),t.Ms.set(e,r.targetId)),r})}function IC(n,e,t){return y(this,null,function*(){let r=me(n),i=r.Fs.get(e),o=t?"readwrite":"readwrite-primary";try{t||(yield r.persistence.runTransaction("Release target",o,s=>r.persistence.referenceDelegate.removeTarget(s,i)))}catch(s){if(!Qc(s))throw s;te(_I,`Failed to update sequence numbers for target ${e}: ${s}`)}r.Fs=r.Fs.remove(e),r.Ms.delete(i.target)})}function rO(n,e,t){let r=me(n),i=_e.min(),o=Me();return r.persistence.runTransaction("Execute query","readwrite",s=>(function(c,u,f){let m=me(c),_=m.Ms.get(f);return _!==void 0?q.resolve(m.Fs.get(_)):m.hi.getTargetData(u,f)})(r,s,ui(e)).next(a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,r.hi.getMatchingKeysForTargetId(s,a.targetId).next(c=>{o=c})}).next(()=>r.Cs.getDocumentsMatchingQuery(s,e,t?i:_e.min(),t?o:Me())).next(a=>(dH(r,S7(e),a),{documents:a,qs:o})))}function dH(n,e,t){let r=n.xs.get(e)||_e.min();t.forEach((i,o)=>{o.readTime.compareTo(r)>0&&(r=o.readTime)}),n.xs.set(e,r)}var tm=class{constructor(){this.activeTargetIds=A7()}Gs(e){this.activeTargetIds=this.activeTargetIds.add(e)}zs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Ws(){let e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}};var SC=class{constructor(){this.Fo=new tm,this.Mo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e,t=!0){return t&&this.Fo.Gs(e),this.Mo[e]||"not-current"}updateQueryState(e,t,r){this.Mo[e]=t}removeLocalQueryTarget(e){this.Fo.zs(e)}isLocalQueryTarget(e){return this.Fo.activeTargetIds.has(e)}clearQueryState(e){delete this.Mo[e]}getAllActiveQueryTargets(){return this.Fo.activeTargetIds}isActiveQueryTarget(e){return this.Fo.activeTargetIds.has(e)}start(){return this.Fo=new tm,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}};var TC=class{xo(e){}shutdown(){}};var iO="ConnectivityMonitor",nm=class{constructor(){this.Oo=()=>this.No(),this.Bo=()=>this.Lo(),this.ko=[],this.qo()}xo(e){this.ko.push(e)}shutdown(){window.removeEventListener("online",this.Oo),window.removeEventListener("offline",this.Bo)}qo(){window.addEventListener("online",this.Oo),window.addEventListener("offline",this.Bo)}No(){te(iO,"Network connectivity changed: AVAILABLE");for(let e of this.ko)e(0)}Lo(){te(iO,"Network connectivity changed: UNAVAILABLE");for(let e of this.ko)e(1)}static C(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}};var kg=null;function DC(){return kg===null?kg=(function(){return 268435456+Math.round(2147483648*Math.random())})():kg++,"0x"+kg.toString(16)}var mE="RestConnection",fH={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"},xC=class{get Qo(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;let t=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.$o=t+"://"+e.host,this.Uo=`projects/${r}/databases/${i}`,this.Ko=this.databaseId.database===Bg?`project_id=${r}`:`project_id=${r}&database_id=${i}`}Wo(e,t,r,i,o){let s=DC(),a=this.Go(e,t.toUriEncodedString());te(mE,`Sending RPC '${e}' ${s}:`,a,r);let c={"google-cloud-resource-prefix":this.Uo,"x-goog-request-params":this.Ko};this.zo(c,i,o);let{host:u}=new URL(a),f=Ao(u);return this.jo(e,a,c,r,f).then(m=>(te(mE,`Received RPC '${e}' ${s}: `,m),m),m=>{throw Wo(mE,`RPC '${e}' ${s} failed with error: `,m,"url: ",a,"request:",r),m})}Jo(e,t,r,i,o,s){return this.Wo(e,t,r,i,o)}zo(e,t,r){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+Kc})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((i,o)=>e[o]=i),r&&r.headers.forEach((i,o)=>e[o]=i)}Go(e,t){let r=fH[e];return`${this.$o}/v1/${t}:${r}`}terminate(){}};var MC=class{constructor(e){this.Ho=e.Ho,this.Yo=e.Yo}Zo(e){this.Xo=e}e_(e){this.t_=e}n_(e){this.r_=e}onMessage(e){this.i_=e}close(){this.Yo()}send(e){this.Ho(e)}s_(){this.Xo()}o_(){this.t_()}__(e){this.r_(e)}a_(e){this.i_(e)}};var cn="WebChannelConnection",PC=class extends xC{constructor(e){super(e),this.u_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}jo(e,t,r,i,o){let s=DC();return new Promise((a,c)=>{let u=new uE;u.setWithCredentials(!0),u.listenOnce(dE.COMPLETE,()=>{try{switch(u.getLastErrorCode()){case cd.NO_ERROR:let m=u.getResponseJson();te(cn,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(m)),a(m);break;case cd.TIMEOUT:te(cn,`RPC '${e}' ${s} timed out`),c(new G($.DEADLINE_EXCEEDED,"Request time out"));break;case cd.HTTP_ERROR:let _=u.getStatus();if(te(cn,`RPC '${e}' ${s} failed with status:`,_,"response text:",u.getResponseText()),_>0){let E=u.getResponseJson();Array.isArray(E)&&(E=E[0]);let x=E?.error;if(x&&x.status&&x.message){let V=(function(W){let oe=W.toLowerCase().replace(/_/g,"-");return Object.values($).indexOf(oe)>=0?oe:$.UNKNOWN})(x.status);c(new G(V,x.message))}else c(new G($.UNKNOWN,"Server responded with status "+u.getStatus()))}else c(new G($.UNAVAILABLE,"Connection failed."));break;default:le(9055,{c_:e,streamId:s,l_:u.getLastErrorCode(),h_:u.getLastError()})}}finally{te(cn,`RPC '${e}' ${s} completed.`)}});let f=JSON.stringify(i);te(cn,`RPC '${e}' ${s} sending request:`,i),u.send(t,"POST",f,r,15)})}P_(e,t,r){let i=DC(),o=[this.$o,"/","google.firestore.v1.Firestore","/",e,"/channel"],s=pE(),a=hE(),c={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},u=this.longPollingOptions.timeoutSeconds;u!==void 0&&(c.longPollingTimeout=Math.round(1e3*u)),this.useFetchStreams&&(c.useFetchStreams=!0),this.zo(c.initMessageHeaders,t,r),c.encodeInitMessageHeaders=!0;let f=o.join("");te(cn,`Creating RPC '${e}' stream ${i}: ${f}`,c);let m=s.createWebChannel(f,c);this.T_(m);let _=!1,E=!1,x=new MC({Ho:U=>{E?te(cn,`Not sending because RPC '${e}' stream ${i} is closed:`,U):(_||(te(cn,`Opening RPC '${e}' stream ${i} transport.`),m.open(),_=!0),te(cn,`RPC '${e}' stream ${i} sending:`,U),m.send(U))},Yo:()=>m.close()}),V=(U,W,oe)=>{U.listen(W,fe=>{try{oe(fe)}catch(Fe){setTimeout(()=>{throw Fe},0)}})};return V(m,Mc.EventType.OPEN,()=>{E||(te(cn,`RPC '${e}' stream ${i} transport opened.`),x.s_())}),V(m,Mc.EventType.CLOSE,()=>{E||(E=!0,te(cn,`RPC '${e}' stream ${i} transport closed`),x.__(),this.I_(m))}),V(m,Mc.EventType.ERROR,U=>{E||(E=!0,Wo(cn,`RPC '${e}' stream ${i} transport errored. Name:`,U.name,"Message:",U.message),x.__(new G($.UNAVAILABLE,"The operation could not be completed")))}),V(m,Mc.EventType.MESSAGE,U=>{var W;if(!E){let oe=U.data[0];Be(!!oe,16349);let fe=oe,Fe=fe?.error||((W=fe[0])===null||W===void 0?void 0:W.error);if(Fe){te(cn,`RPC '${e}' stream ${i} received error:`,Fe);let At=Fe.status,$e=(function(D){let M=Et[D];if(M!==void 0)return uR(M)})(At),P=Fe.message;$e===void 0&&($e=$.INTERNAL,P="Unknown error status: "+At+" with message "+Fe.message),E=!0,x.__(new G($e,P)),m.close()}else te(cn,`RPC '${e}' stream ${i} received:`,oe),x.a_(oe)}}),V(a,fE.STAT_EVENT,U=>{U.stat===Mg.PROXY?te(cn,`RPC '${e}' stream ${i} detected buffering proxy`):U.stat===Mg.NOPROXY&&te(cn,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{x.o_()},0),x}terminate(){this.u_.forEach(e=>e.close()),this.u_=[]}T_(e){this.u_.push(e)}I_(e){this.u_=this.u_.filter(t=>t===e)}};function vE(){return typeof document<"u"?document:null}function Im(n){return new ZE(n,!0)}var rm=class{constructor(e,t,r=1e3,i=1.5,o=6e4){this.Fi=e,this.timerId=t,this.d_=r,this.E_=i,this.A_=o,this.R_=0,this.V_=null,this.m_=Date.now(),this.reset()}reset(){this.R_=0}f_(){this.R_=this.A_}g_(e){this.cancel();let t=Math.floor(this.R_+this.p_()),r=Math.max(0,Date.now()-this.m_),i=Math.max(0,t-r);i>0&&te("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.R_} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.V_=this.Fi.enqueueAfterDelay(this.timerId,i,()=>(this.m_=Date.now(),e())),this.R_*=this.E_,this.R_<this.d_&&(this.R_=this.d_),this.R_>this.A_&&(this.R_=this.A_)}y_(){this.V_!==null&&(this.V_.skipDelay(),this.V_=null)}cancel(){this.V_!==null&&(this.V_.cancel(),this.V_=null)}p_(){return(Math.random()-.5)*this.R_}};var oO="PersistentStream",im=class{constructor(e,t,r,i,o,s,a,c){this.Fi=e,this.w_=r,this.S_=i,this.connection=o,this.authCredentialsProvider=s,this.appCheckCredentialsProvider=a,this.listener=c,this.state=0,this.b_=0,this.D_=null,this.v_=null,this.stream=null,this.C_=0,this.F_=new rm(e,t)}M_(){return this.state===1||this.state===5||this.x_()}x_(){return this.state===2||this.state===3}start(){this.C_=0,this.state!==4?this.auth():this.O_()}stop(){return y(this,null,function*(){this.M_()&&(yield this.close(0))})}N_(){this.state=0,this.F_.reset()}B_(){this.x_()&&this.D_===null&&(this.D_=this.Fi.enqueueAfterDelay(this.w_,6e4,()=>this.L_()))}k_(e){this.q_(),this.stream.send(e)}L_(){return y(this,null,function*(){if(this.x_())return this.close(0)})}q_(){this.D_&&(this.D_.cancel(),this.D_=null)}Q_(){this.v_&&(this.v_.cancel(),this.v_=null)}close(e,t){return y(this,null,function*(){this.q_(),this.Q_(),this.F_.cancel(),this.b_++,e!==4?this.F_.reset():t&&t.code===$.RESOURCE_EXHAUSTED?(zi(t.toString()),zi("Using maximum backoff delay to prevent overloading the backend."),this.F_.f_()):t&&t.code===$.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.U_(),this.stream.close(),this.stream=null),this.state=e,yield this.listener.n_(t)})}U_(){}auth(){this.state=1;let e=this.K_(this.b_),t=this.b_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.b_===t&&this.W_(r,i)},r=>{e(()=>{let i=new G($.UNKNOWN,"Fetching auth token failed: "+r.message);return this.G_(i)})})}W_(e,t){let r=this.K_(this.b_);this.stream=this.z_(e,t),this.stream.Zo(()=>{r(()=>this.listener.Zo())}),this.stream.e_(()=>{r(()=>(this.state=2,this.v_=this.Fi.enqueueAfterDelay(this.S_,1e4,()=>(this.x_()&&(this.state=3),Promise.resolve())),this.listener.e_()))}),this.stream.n_(i=>{r(()=>this.G_(i))}),this.stream.onMessage(i=>{r(()=>++this.C_==1?this.j_(i):this.onNext(i))})}O_(){this.state=5,this.F_.g_(()=>y(this,null,function*(){this.state=0,this.start()}))}G_(e){return te(oO,`close with error: ${e}`),this.stream=null,this.close(4,e)}K_(e){return t=>{this.Fi.enqueueAndForget(()=>this.b_===e?t():(te(oO,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}},AC=class extends im{constructor(e,t,r,i,o,s){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,i,s),this.serializer=o}z_(e,t){return this.connection.P_("Listen",e,t)}j_(e){return this.onNext(e)}onNext(e){this.F_.reset();let t=z7(this.serializer,e),r=(function(o){if(!("targetChange"in o))return _e.min();let s=o.targetChange;return s.targetIds&&s.targetIds.length?_e.min():s.readTime?di(s.readTime):_e.min()})(e);return this.listener.J_(t,r)}H_(e){let t={};t.database=tC(this.serializer),t.addTarget=(function(o,s){let a,c=s.target;if(a=BE(c)?{documents:G7(o,c)}:{query:K7(o,c).Vt},a.targetId=s.targetId,s.resumeToken.approximateByteSize()>0){a.resumeToken=dR(o,s.resumeToken);let u=XE(o,s.expectedCount);u!==null&&(a.expectedCount=u)}else if(s.snapshotVersion.compareTo(_e.min())>0){a.readTime=Zg(o,s.snapshotVersion.toTimestamp());let u=XE(o,s.expectedCount);u!==null&&(a.expectedCount=u)}return a})(this.serializer,e);let r=Q7(this.serializer,e);r&&(t.labels=r),this.k_(t)}Y_(e){let t={};t.database=tC(this.serializer),t.removeTarget=e,this.k_(t)}},kC=class extends im{constructor(e,t,r,i,o,s){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,i,s),this.serializer=o}get Z_(){return this.C_>0}start(){this.lastStreamToken=void 0,super.start()}U_(){this.Z_&&this.X_([])}z_(e,t){return this.connection.P_("Write",e,t)}j_(e){return Be(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,Be(!e.writeResults||e.writeResults.length===0,55816),this.listener.ea()}onNext(e){Be(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.F_.reset();let t=W7(e.writeResults,e.commitTime),r=di(e.commitTime);return this.listener.ta(r,t)}na(){let e={};e.database=tC(this.serializer),this.k_(e)}X_(e){let t={streamToken:this.lastStreamToken,writes:e.map(r=>q7(this.serializer,r))};this.k_(t)}};var OC=class{},RC=class extends OC{constructor(e,t,r,i){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=i,this.ra=!1}ia(){if(this.ra)throw new G($.FAILED_PRECONDITION,"The client has already been terminated.")}Wo(e,t,r,i){return this.ia(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,s])=>this.connection.Wo(e,JE(t,r),i,o,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===$.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new G($.UNKNOWN,o.toString())})}Jo(e,t,r,i,o){return this.ia(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,a])=>this.connection.Jo(e,JE(t,r),i,s,a,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===$.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new G($.UNKNOWN,s.toString())})}terminate(){this.ra=!0,this.connection.terminate()}},NC=class{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.sa=0,this.oa=null,this._a=!0}aa(){this.sa===0&&(this.ua("Unknown"),this.oa=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.oa=null,this.ca("Backend didn't respond within 10 seconds."),this.ua("Offline"),Promise.resolve())))}la(e){this.state==="Online"?this.ua("Unknown"):(this.sa++,this.sa>=1&&(this.ha(),this.ca(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ua("Offline")))}set(e){this.ha(),this.sa=0,e==="Online"&&(this._a=!1),this.ua(e)}ua(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}ca(e){let t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this._a?(zi(t),this._a=!1):te("OnlineStateTracker",t)}ha(){this.oa!==null&&(this.oa.cancel(),this.oa=null)}};var ca="RemoteStore",FC=class{constructor(e,t,r,i,o){this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.Pa=[],this.Ta=new Map,this.Ia=new Set,this.da=[],this.Ea=o,this.Ea.xo(s=>{r.enqueueAndForget(()=>y(this,null,function*(){da(this)&&(te(ca,"Restarting streams for network reachability change."),yield(function(c){return y(this,null,function*(){let u=me(c);u.Ia.add(4),yield xd(u),u.Aa.set("Unknown"),u.Ia.delete(4),yield Sm(u)})})(this))}))}),this.Aa=new NC(r,i)}};function Sm(n){return y(this,null,function*(){if(da(n))for(let e of n.da)yield e(!0)})}function xd(n){return y(this,null,function*(){for(let e of n.da)yield e(!1)})}function wR(n,e){let t=me(n);t.Ta.has(e.targetId)||(t.Ta.set(e.targetId,e),EI(t)?wI(t):Zc(t).x_()&&bI(t,e))}function yI(n,e){let t=me(n),r=Zc(t);t.Ta.delete(e),r.x_()&&ER(t,e),t.Ta.size===0&&(r.x_()?r.B_():da(t)&&t.Aa.set("Unknown"))}function bI(n,e){if(n.Ra.$e(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(_e.min())>0){let t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}Zc(n).H_(e)}function ER(n,e){n.Ra.$e(e),Zc(n).Y_(e)}function wI(n){n.Ra=new QE({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),Et:e=>n.Ta.get(e)||null,lt:()=>n.datastore.serializer.databaseId}),Zc(n).start(),n.Aa.aa()}function EI(n){return da(n)&&!Zc(n).M_()&&n.Ta.size>0}function da(n){return me(n).Ia.size===0}function CR(n){n.Ra=void 0}function hH(n){return y(this,null,function*(){n.Aa.set("Online")})}function pH(n){return y(this,null,function*(){n.Ta.forEach((e,t)=>{bI(n,e)})})}function gH(n,e){return y(this,null,function*(){CR(n),EI(n)?(n.Aa.la(e),wI(n)):n.Aa.set("Unknown")})}function mH(n,e,t){return y(this,null,function*(){if(n.Aa.set("Online"),e instanceof Yg&&e.state===2&&e.cause)try{yield(function(i,o){return y(this,null,function*(){let s=o.cause;for(let a of o.targetIds)i.Ta.has(a)&&(yield i.remoteSyncer.rejectListen(a,s),i.Ta.delete(a),i.Ra.removeTarget(a))})})(n,e)}catch(r){te(ca,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield om(n,r)}else if(e instanceof Fc?n.Ra.Ye(e):e instanceof Kg?n.Ra.it(e):n.Ra.et(e),!t.isEqual(_e.min()))try{let r=yield bR(n.localStore);t.compareTo(r)>=0&&(yield(function(o,s){let a=o.Ra.Pt(s);return a.targetChanges.forEach((c,u)=>{if(c.resumeToken.approximateByteSize()>0){let f=o.Ta.get(u);f&&o.Ta.set(u,f.withResumeToken(c.resumeToken,s))}}),a.targetMismatches.forEach((c,u)=>{let f=o.Ta.get(c);if(!f)return;o.Ta.set(c,f.withResumeToken(ln.EMPTY_BYTE_STRING,f.snapshotVersion)),ER(o,c);let m=new yd(f.target,c,u,f.sequenceNumber);bI(o,m)}),o.remoteSyncer.applyRemoteEvent(a)})(n,t))}catch(r){te(ca,"Failed to raise snapshot:",r),yield om(n,r)}})}function om(n,e,t){return y(this,null,function*(){if(!Qc(e))throw e;n.Ia.add(1),yield xd(n),n.Aa.set("Offline"),t||(t=()=>bR(n.localStore)),n.asyncQueue.enqueueRetryable(()=>y(null,null,function*(){te(ca,"Retrying IndexedDB access"),yield t(),n.Ia.delete(1),yield Sm(n)}))})}function IR(n,e){return e().catch(t=>om(n,t,e))}function Tm(n){return y(this,null,function*(){let e=me(n),t=Yo(e),r=e.Pa.length>0?e.Pa[e.Pa.length-1].batchId:lI;for(;vH(e);)try{let i=yield lH(e.localStore,r);if(i===null){e.Pa.length===0&&t.B_();break}r=i.batchId,_H(e,i)}catch(i){yield om(e,i)}SR(e)&&TR(e)})}function vH(n){return da(n)&&n.Pa.length<10}function _H(n,e){n.Pa.push(e);let t=Yo(n);t.x_()&&t.Z_&&t.X_(e.mutations)}function SR(n){return da(n)&&!Yo(n).M_()&&n.Pa.length>0}function TR(n){Yo(n).start()}function yH(n){return y(this,null,function*(){Yo(n).na()})}function bH(n){return y(this,null,function*(){let e=Yo(n);for(let t of n.Pa)e.X_(t.mutations)})}function wH(n,e,t){return y(this,null,function*(){let r=n.Pa.shift(),i=WE.from(r,e,t);yield IR(n,()=>n.remoteSyncer.applySuccessfulWrite(i)),yield Tm(n)})}function EH(n,e){return y(this,null,function*(){e&&Yo(n).Z_&&(yield(function(r,i){return y(this,null,function*(){if((function(s){return L7(s)&&s!==$.ABORTED})(i.code)){let o=r.Pa.shift();Yo(r).N_(),yield IR(r,()=>r.remoteSyncer.rejectFailedWrite(o.batchId,i)),yield Tm(r)}})})(n,e)),SR(n)&&TR(n)})}function sO(n,e){return y(this,null,function*(){let t=me(n);t.asyncQueue.verifyOperationInProgress(),te(ca,"RemoteStore received new credentials");let r=da(t);t.Ia.add(3),yield xd(t),r&&t.Aa.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t.Ia.delete(3),yield Sm(t)})}function CH(n,e){return y(this,null,function*(){let t=me(n);e?(t.Ia.delete(2),yield Sm(t)):e||(t.Ia.add(2),yield xd(t),t.Aa.set("Unknown"))})}function Zc(n){return n.Va||(n.Va=(function(t,r,i){let o=me(t);return o.ia(),new AC(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)})(n.datastore,n.asyncQueue,{Zo:hH.bind(null,n),e_:pH.bind(null,n),n_:gH.bind(null,n),J_:mH.bind(null,n)}),n.da.push(e=>y(null,null,function*(){e?(n.Va.N_(),EI(n)?wI(n):n.Aa.set("Unknown")):(yield n.Va.stop(),CR(n))}))),n.Va}function Yo(n){return n.ma||(n.ma=(function(t,r,i){let o=me(t);return o.ia(),new kC(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)})(n.datastore,n.asyncQueue,{Zo:()=>Promise.resolve(),e_:yH.bind(null,n),n_:EH.bind(null,n),ea:bH.bind(null,n),ta:wH.bind(null,n)}),n.da.push(e=>y(null,null,function*(){e?(n.ma.N_(),yield Tm(n)):(yield n.ma.stop(),n.Pa.length>0&&(te(ca,`Stopping write stream with ${n.Pa.length} pending writes`),n.Pa=[]))}))),n.ma}var LC=class n{constructor(e,t,r,i,o){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=i,this.removalCallback=o,this.deferred=new Lr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(s=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,r,i,o){let s=Date.now()+r,a=new n(e,t,s,i,o);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new G($.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}};function CI(n,e){if(zi("AsyncQueue",`${e}: ${n}`),Qc(n))return new G($.UNAVAILABLE,`${e}: ${n}`);throw n}var sm=class n{static emptySet(e){return new n(e.comparator)}constructor(e){this.comparator=e?(t,r)=>e(t,r)||ae.comparator(t.key,r.key):(t,r)=>ae.comparator(t.key,r.key),this.keyedMap=ld(),this.sortedSet=new ht(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){let t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){let t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){let t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof n)||this.size!==e.size)return!1;let t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){let i=t.getNext().key,o=r.getNext().key;if(!i.isEqual(o))return!1}return!0}toString(){let e=[];return this.forEach(t=>{e.push(t.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){let r=new n;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}};var am=class{constructor(){this.fa=new ht(ae.comparator)}track(e){let t=e.doc.key,r=this.fa.get(t);r?e.type!==0&&r.type===3?this.fa=this.fa.insert(t,e):e.type===3&&r.type!==1?this.fa=this.fa.insert(t,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.fa=this.fa.insert(t,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.fa=this.fa.insert(t,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.fa=this.fa.remove(t):e.type===1&&r.type===2?this.fa=this.fa.insert(t,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.fa=this.fa.insert(t,{type:2,doc:e.doc}):le(63341,{At:e,ga:r}):this.fa=this.fa.insert(t,e)}pa(){let e=[];return this.fa.inorderTraversal((t,r)=>{e.push(r)}),e}},qc=class n{constructor(e,t,r,i,o,s,a,c,u){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=o,this.fromCache=s,this.syncStateChanged=a,this.excludesMetadataChanges=c,this.hasCachedResults=u}static fromInitialDocuments(e,t,r,i,o){let s=[];return t.forEach(a=>{s.push({type:0,doc:a})}),new n(e,t,sm.emptySet(t),s,r,i,!0,!1,o)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Em(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;let t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let i=0;i<t.length;i++)if(t[i].type!==r[i].type||!t[i].doc.isEqual(r[i].doc))return!1;return!0}};var VC=class{constructor(){this.ya=void 0,this.wa=[]}Sa(){return this.wa.some(e=>e.ba())}},UC=class{constructor(){this.queries=aO(),this.onlineState="Unknown",this.Da=new Set}terminate(){(function(t,r){let i=me(t),o=i.queries;i.queries=aO(),o.forEach((s,a)=>{for(let c of a.wa)c.onError(r)})})(this,new G($.ABORTED,"Firestore shutting down"))}};function aO(){return new Ki(n=>ZO(n),Em)}function II(n,e){return y(this,null,function*(){let t=me(n),r=3,i=e.query,o=t.queries.get(i);o?!o.Sa()&&e.ba()&&(r=2):(o=new VC,r=e.ba()?0:1);try{switch(r){case 0:o.ya=yield t.onListen(i,!0);break;case 1:o.ya=yield t.onListen(i,!1);break;case 2:yield t.onFirstRemoteStoreListen(i)}}catch(s){let a=CI(s,`Initialization of query '${Ac(e.query)}' failed`);return void e.onError(a)}t.queries.set(i,o),o.wa.push(e),e.va(t.onlineState),o.ya&&e.Ca(o.ya)&&TI(t)})}function SI(n,e){return y(this,null,function*(){let t=me(n),r=e.query,i=3,o=t.queries.get(r);if(o){let s=o.wa.indexOf(e);s>=0&&(o.wa.splice(s,1),o.wa.length===0?i=e.ba()?0:1:!o.Sa()&&e.ba()&&(i=2))}switch(i){case 0:return t.queries.delete(r),t.onUnlisten(r,!0);case 1:return t.queries.delete(r),t.onUnlisten(r,!1);case 2:return t.onLastRemoteStoreUnlisten(r);default:return}})}function IH(n,e){let t=me(n),r=!1;for(let i of e){let o=i.query,s=t.queries.get(o);if(s){for(let a of s.wa)a.Ca(i)&&(r=!0);s.ya=i}}r&&TI(t)}function SH(n,e,t){let r=me(n),i=r.queries.get(e);if(i)for(let o of i.wa)o.onError(t);r.queries.delete(e)}function TI(n){n.Da.forEach(e=>{e.next()})}var jC,cO;(cO=jC||(jC={})).Fa="default",cO.Cache="cache";var Ed=class{constructor(e,t,r){this.query=e,this.Ma=t,this.xa=!1,this.Oa=null,this.onlineState="Unknown",this.options=r||{}}Ca(e){if(!this.options.includeMetadataChanges){let r=[];for(let i of e.docChanges)i.type!==3&&r.push(i);e=new qc(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.xa?this.Na(e)&&(this.Ma.next(e),t=!0):this.Ba(e,this.onlineState)&&(this.La(e),t=!0),this.Oa=e,t}onError(e){this.Ma.error(e)}va(e){this.onlineState=e;let t=!1;return this.Oa&&!this.xa&&this.Ba(this.Oa,e)&&(this.La(this.Oa),t=!0),t}Ba(e,t){if(!e.fromCache||!this.ba())return!0;let r=t!=="Offline";return(!this.options.ka||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Na(e){if(e.docChanges.length>0)return!0;let t=this.Oa&&this.Oa.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}La(e){e=qc.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.xa=!0,this.Ma.next(e)}ba(){return this.options.source!==jC.Cache}};var cm=class{constructor(e){this.key=e}},lm=class{constructor(e){this.key=e}},BC=class{constructor(e,t){this.query=e,this.Ha=t,this.Ya=null,this.hasCachedResults=!1,this.current=!1,this.Za=Me(),this.mutatedKeys=Me(),this.Xa=XO(e),this.eu=new sm(this.Xa)}get tu(){return this.Ha}nu(e,t){let r=t?t.ru:new am,i=t?t.eu:this.eu,o=t?t.mutatedKeys:this.mutatedKeys,s=i,a=!1,c=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,u=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((f,m)=>{let _=i.get(f),E=Cm(this.query,m)?m:null,x=!!_&&this.mutatedKeys.has(_.key),V=!!E&&(E.hasLocalMutations||this.mutatedKeys.has(E.key)&&E.hasCommittedMutations),U=!1;_&&E?_.data.isEqual(E.data)?x!==V&&(r.track({type:3,doc:E}),U=!0):this.iu(_,E)||(r.track({type:2,doc:E}),U=!0,(c&&this.Xa(E,c)>0||u&&this.Xa(E,u)<0)&&(a=!0)):!_&&E?(r.track({type:0,doc:E}),U=!0):_&&!E&&(r.track({type:1,doc:_}),U=!0,(c||u)&&(a=!0)),U&&(E?(s=s.add(E),o=V?o.add(f):o.delete(f)):(s=s.delete(f),o=o.delete(f)))}),this.query.limit!==null)for(;s.size>this.query.limit;){let f=this.query.limitType==="F"?s.last():s.first();s=s.delete(f.key),o=o.delete(f.key),r.track({type:1,doc:f})}return{eu:s,ru:r,Ds:a,mutatedKeys:o}}iu(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r,i){let o=this.eu;this.eu=e.eu,this.mutatedKeys=e.mutatedKeys;let s=e.ru.pa();s.sort((f,m)=>(function(E,x){let V=U=>{switch(U){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return le(20277,{At:U})}};return V(E)-V(x)})(f.type,m.type)||this.Xa(f.doc,m.doc)),this.su(r),i=i!=null&&i;let a=t&&!i?this.ou():[],c=this.Za.size===0&&this.current&&!i?1:0,u=c!==this.Ya;return this.Ya=c,s.length!==0||u?{snapshot:new qc(this.query,e.eu,o,s,e.mutatedKeys,c===0,u,!1,!!r&&r.resumeToken.approximateByteSize()>0),_u:a}:{_u:a}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({eu:this.eu,ru:new am,mutatedKeys:this.mutatedKeys,Ds:!1},!1)):{_u:[]}}au(e){return!this.Ha.has(e)&&!!this.eu.has(e)&&!this.eu.get(e).hasLocalMutations}su(e){e&&(e.addedDocuments.forEach(t=>this.Ha=this.Ha.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Ha=this.Ha.delete(t)),this.current=e.current)}ou(){if(!this.current)return[];let e=this.Za;this.Za=Me(),this.eu.forEach(r=>{this.au(r.key)&&(this.Za=this.Za.add(r.key))});let t=[];return e.forEach(r=>{this.Za.has(r)||t.push(new lm(r))}),this.Za.forEach(r=>{e.has(r)||t.push(new cm(r))}),t}uu(e){this.Ha=e.qs,this.Za=Me();let t=this.nu(e.documents);return this.applyChanges(t,!0)}cu(){return qc.fromInitialDocuments(this.query,this.eu,this.mutatedKeys,this.Ya===0,this.hasCachedResults)}},DI="SyncEngine",$C=class{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}},HC=class{constructor(e){this.key=e,this.lu=!1}},zC=class{constructor(e,t,r,i,o,s){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=i,this.currentUser=o,this.maxConcurrentLimboResolutions=s,this.hu={},this.Pu=new Ki(a=>ZO(a),Em),this.Tu=new Map,this.Iu=new Set,this.du=new ht(ae.comparator),this.Eu=new Map,this.Au=new wd,this.Ru={},this.Vu=new Map,this.mu=bd.ur(),this.onlineState="Unknown",this.fu=void 0}get isPrimaryClient(){return this.fu===!0}};function TH(n,e,t=!0){return y(this,null,function*(){let r=kR(n),i,o=r.Pu.get(e);return o?(r.sharedClientState.addLocalQueryTarget(o.targetId),i=o.view.cu()):i=yield DR(r,e,t,!0),i})}function DH(n,e){return y(this,null,function*(){let t=kR(n);yield DR(t,e,!0,!1)})}function DR(n,e,t,r){return y(this,null,function*(){let i=yield uH(n.localStore,ui(e)),o=i.targetId,s=n.sharedClientState.addLocalQueryTarget(o,t),a;return r&&(a=yield xH(n,e,o,s==="current",i.resumeToken)),n.isPrimaryClient&&t&&wR(n.remoteStore,i),a})}function xH(n,e,t,r,i){return y(this,null,function*(){n.gu=(m,_,E)=>(function(V,U,W,oe){return y(this,null,function*(){let fe=U.view.nu(W);fe.Ds&&(fe=yield rO(V.localStore,U.query,!1).then(({documents:P})=>U.view.nu(P,fe)));let Fe=oe&&oe.targetChanges.get(U.targetId),At=oe&&oe.targetMismatches.get(U.targetId)!=null,$e=U.view.applyChanges(fe,V.isPrimaryClient,Fe,At);return uO(V,U.targetId,$e._u),$e.snapshot})})(n,m,_,E);let o=yield rO(n.localStore,e,!0),s=new BC(e,o.qs),a=s.nu(o.documents),c=_d.createSynthesizedTargetChangeForCurrentChange(t,r&&n.onlineState!=="Offline",i),u=s.applyChanges(a,n.isPrimaryClient,c);uO(n,t,u._u);let f=new $C(e,t,s);return n.Pu.set(e,f),n.Tu.has(t)?n.Tu.get(t).push(e):n.Tu.set(t,[e]),u.snapshot})}function MH(n,e,t){return y(this,null,function*(){let r=me(n),i=r.Pu.get(e),o=r.Tu.get(i.targetId);if(o.length>1)return r.Tu.set(i.targetId,o.filter(s=>!Em(s,e))),void r.Pu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||(yield IC(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),t&&yI(r.remoteStore,i.targetId),qC(r,i.targetId)}).catch(Yc))):(qC(r,i.targetId),yield IC(r.localStore,i.targetId,!0))})}function PH(n,e){return y(this,null,function*(){let t=me(n),r=t.Pu.get(e),i=t.Tu.get(r.targetId);t.isPrimaryClient&&i.length===1&&(t.sharedClientState.removeLocalQueryTarget(r.targetId),yI(t.remoteStore,r.targetId))})}function AH(n,e,t){return y(this,null,function*(){let r=VH(n);try{let i=yield(function(s,a){let c=me(s),u=it.now(),f=a.reduce((E,x)=>E.add(x.key),Me()),m,_;return c.persistence.runTransaction("Locally write mutations","readwrite",E=>{let x=Yi(),V=Me();return c.Os.getEntries(E,f).next(U=>{x=U,x.forEach((W,oe)=>{oe.isValidDocument()||(V=V.add(W))})}).next(()=>c.localDocuments.getOverlayedDocuments(E,x)).next(U=>{m=U;let W=[];for(let oe of a){let fe=F7(oe,m.get(oe.key).overlayedDocument);fe!=null&&W.push(new hi(oe.key,fe,qO(fe.value.mapValue),qn.exists(!0)))}return c.mutationQueue.addMutationBatch(E,u,W,a)}).next(U=>{_=U;let W=U.applyToLocalDocumentSet(m,V);return c.documentOverlayCache.saveOverlays(E,U.batchId,W)})}).then(()=>({batchId:_.batchId,changes:eR(m)}))})(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),(function(s,a,c){let u=s.Ru[s.currentUser.toKey()];u||(u=new ht(Se)),u=u.insert(a,c),s.Ru[s.currentUser.toKey()]=u})(r,i.batchId,t),yield Md(r,i.changes),yield Tm(r.remoteStore)}catch(i){let o=CI(i,"Failed to persist write");t.reject(o)}})}function xR(n,e){return y(this,null,function*(){let t=me(n);try{let r=yield aH(t.localStore,e);e.targetChanges.forEach((i,o)=>{let s=t.Eu.get(o);s&&(Be(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1,22616),i.addedDocuments.size>0?s.lu=!0:i.modifiedDocuments.size>0?Be(s.lu,14607):i.removedDocuments.size>0&&(Be(s.lu,42227),s.lu=!1))}),yield Md(t,r,e)}catch(r){yield Yc(r)}})}function lO(n,e,t){let r=me(n);if(r.isPrimaryClient&&t===0||!r.isPrimaryClient&&t===1){let i=[];r.Pu.forEach((o,s)=>{let a=s.view.va(e);a.snapshot&&i.push(a.snapshot)}),(function(s,a){let c=me(s);c.onlineState=a;let u=!1;c.queries.forEach((f,m)=>{for(let _ of m.wa)_.va(a)&&(u=!0)}),u&&TI(c)})(r.eventManager,e),i.length&&r.hu.J_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function kH(n,e,t){return y(this,null,function*(){let r=me(n);r.sharedClientState.updateQueryState(e,"rejected",t);let i=r.Eu.get(e),o=i&&i.key;if(o){let s=new ht(ae.comparator);s=s.insert(o,Vr.newNoDocument(o,_e.min()));let a=Me().add(o),c=new Gg(_e.min(),new Map,new ht(Se),s,a);yield xR(r,c),r.du=r.du.remove(o),r.Eu.delete(e),xI(r)}else yield IC(r.localStore,e,!1).then(()=>qC(r,e,t)).catch(Yc)})}function OH(n,e){return y(this,null,function*(){let t=me(n),r=e.batch.batchId;try{let i=yield sH(t.localStore,e);PR(t,r,null),MR(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),yield Md(t,i)}catch(i){yield Yc(i)}})}function RH(n,e,t){return y(this,null,function*(){let r=me(n);try{let i=yield(function(s,a){let c=me(s);return c.persistence.runTransaction("Reject batch","readwrite-primary",u=>{let f;return c.mutationQueue.lookupMutationBatch(u,a).next(m=>(Be(m!==null,37113),f=m.keys(),c.mutationQueue.removeMutationBatch(u,m))).next(()=>c.mutationQueue.performConsistencyCheck(u)).next(()=>c.documentOverlayCache.removeOverlaysForBatchId(u,f,a)).next(()=>c.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(u,f)).next(()=>c.localDocuments.getDocuments(u,f))})})(r.localStore,e);PR(r,e,t),MR(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),yield Md(r,i)}catch(i){yield Yc(i)}})}function MR(n,e){(n.Vu.get(e)||[]).forEach(t=>{t.resolve()}),n.Vu.delete(e)}function PR(n,e,t){let r=me(n),i=r.Ru[r.currentUser.toKey()];if(i){let o=i.get(e);o&&(t?o.reject(t):o.resolve(),i=i.remove(e)),r.Ru[r.currentUser.toKey()]=i}}function qC(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(let r of n.Tu.get(e))n.Pu.delete(r),t&&n.hu.pu(r,t);n.Tu.delete(e),n.isPrimaryClient&&n.Au.zr(e).forEach(r=>{n.Au.containsKey(r)||AR(n,r)})}function AR(n,e){n.Iu.delete(e.path.canonicalString());let t=n.du.get(e);t!==null&&(yI(n.remoteStore,t),n.du=n.du.remove(e),n.Eu.delete(t),xI(n))}function uO(n,e,t){for(let r of t)r instanceof cm?(n.Au.addReference(r.key,e),NH(n,r)):r instanceof lm?(te(DI,"Document no longer in limbo: "+r.key),n.Au.removeReference(r.key,e),n.Au.containsKey(r.key)||AR(n,r.key)):le(19791,{yu:r})}function NH(n,e){let t=e.key,r=t.path.canonicalString();n.du.get(t)||n.Iu.has(r)||(te(DI,"New document in limbo: "+t),n.Iu.add(r),xI(n))}function xI(n){for(;n.Iu.size>0&&n.du.size<n.maxConcurrentLimboResolutions;){let e=n.Iu.values().next().value;n.Iu.delete(e);let t=new ae(tt.fromString(e)),r=n.mu.next();n.Eu.set(r,new HC(t)),n.du=n.du.insert(t,r),wR(n.remoteStore,new yd(ui(wm(t.path)),r,"TargetPurposeLimboResolution",cI.ue))}}function Md(n,e,t){return y(this,null,function*(){let r=me(n),i=[],o=[],s=[];r.Pu.isEmpty()||(r.Pu.forEach((a,c)=>{s.push(r.gu(c,e,t).then(u=>{var f;if((u||t)&&r.isPrimaryClient){let m=u?!u.fromCache:(f=t?.targetChanges.get(c.targetId))===null||f===void 0?void 0:f.current;r.sharedClientState.updateQueryState(c.targetId,m?"current":"not-current")}if(u){i.push(u);let m=bC.Es(c.targetId,u);o.push(m)}}))}),yield Promise.all(s),r.hu.J_(i),yield(function(c,u){return y(this,null,function*(){let f=me(c);try{yield f.persistence.runTransaction("notifyLocalViewChanges","readwrite",m=>q.forEach(u,_=>q.forEach(_.Is,E=>f.persistence.referenceDelegate.addReference(m,_.targetId,E)).next(()=>q.forEach(_.ds,E=>f.persistence.referenceDelegate.removeReference(m,_.targetId,E)))))}catch(m){if(!Qc(m))throw m;te(_I,"Failed to update sequence numbers: "+m)}for(let m of u){let _=m.targetId;if(!m.fromCache){let E=f.Fs.get(_),x=E.snapshotVersion,V=E.withLastLimboFreeSnapshotVersion(x);f.Fs=f.Fs.insert(_,V)}}})})(r.localStore,o))})}function FH(n,e){return y(this,null,function*(){let t=me(n);if(!t.currentUser.isEqual(e)){te(DI,"User change. New user:",e.toKey());let r=yield yR(t.localStore,e);t.currentUser=e,(function(o,s){o.Vu.forEach(a=>{a.forEach(c=>{c.reject(new G($.CANCELLED,s))})}),o.Vu.clear()})(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield Md(t,r.Bs)}})}function LH(n,e){let t=me(n),r=t.Eu.get(e);if(r&&r.lu)return Me().add(r.key);{let i=Me(),o=t.Tu.get(e);if(!o)return i;for(let s of o){let a=t.Pu.get(s);i=i.unionWith(a.view.tu)}return i}}function kR(n){let e=me(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=xR.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=LH.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=kH.bind(null,e),e.hu.J_=IH.bind(null,e.eventManager),e.hu.pu=SH.bind(null,e.eventManager),e}function VH(n){let e=me(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=OH.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=RH.bind(null,e),e}var OR=(()=>{class n{constructor(){this.kind="memory",this.synchronizeTabs=!1}initialize(t){return y(this,null,function*(){this.serializer=Im(t.databaseInfo.databaseId),this.sharedClientState=this.bu(t),this.persistence=this.Du(t),yield this.persistence.start(),this.localStore=this.vu(t),this.gcScheduler=this.Cu(t,this.localStore),this.indexBackfillerScheduler=this.Fu(t,this.localStore)})}Cu(t,r){return null}Fu(t,r){return null}vu(t){return oH(this.persistence,new EC,t.initialUser,this.serializer)}Du(t){return new Jg(yC.Vi,this.serializer)}bu(t){return new SC}terminate(){return y(this,null,function*(){var t,r;(t=this.gcScheduler)===null||t===void 0||t.stop(),(r=this.indexBackfillerScheduler)===null||r===void 0||r.stop(),this.sharedClientState.shutdown(),yield this.persistence.shutdown()})}}return n.provider={build:()=>new n},n})(),WC=class extends OR{constructor(e){super(),this.cacheSizeBytes=e}Cu(e,t){Be(this.persistence.referenceDelegate instanceof em,46915);let r=this.persistence.referenceDelegate.garbageCollector;return new sC(r,e.asyncQueue,t)}Du(e){let t=this.cacheSizeBytes!==void 0?cr.withCacheSize(this.cacheSizeBytes):cr.DEFAULT;return new Jg(r=>em.Vi(r,t),this.serializer)}};var UH=(()=>{class n{initialize(t,r){return y(this,null,function*(){this.localStore||(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(r),this.remoteStore=this.createRemoteStore(r),this.eventManager=this.createEventManager(r),this.syncEngine=this.createSyncEngine(r,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>lO(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=FH.bind(null,this.syncEngine),yield CH(this.remoteStore,this.syncEngine.isPrimaryClient))})}createEventManager(t){return(function(){return new UC})()}createDatastore(t){let r=Im(t.databaseInfo.databaseId),i=(function(s){return new PC(s)})(t.databaseInfo);return(function(s,a,c,u){return new RC(s,a,c,u)})(t.authCredentials,t.appCheckCredentials,i,r)}createRemoteStore(t){return(function(i,o,s,a,c){return new FC(i,o,s,a,c)})(this.localStore,this.datastore,t.asyncQueue,r=>lO(this.syncEngine,r,0),(function(){return nm.C()?new nm:new TC})())}createSyncEngine(t,r){return(function(o,s,a,c,u,f,m){let _=new zC(o,s,a,c,u,f);return m&&(_.fu=!0),_})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,r)}terminate(){return y(this,null,function*(){var t,r;yield(function(o){return y(this,null,function*(){let s=me(o);te(ca,"RemoteStore shutting down."),s.Ia.add(5),yield xd(s),s.Ea.shutdown(),s.Aa.set("Unknown")})})(this.remoteStore),(t=this.datastore)===null||t===void 0||t.terminate(),(r=this.eventManager)===null||r===void 0||r.terminate()})}}return n.provider={build:()=>new n},n})();var Cd=class{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.xu(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.xu(this.observer.error,e):zi("Uncaught Error in snapshot listener:",e.toString()))}Ou(){this.muted=!0}xu(e,t){setTimeout(()=>{this.muted||e(t)},0)}};var Qo="FirestoreClient",GC=class{constructor(e,t,r,i,o){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=i,this.user=Ut.UNAUTHENTICATED,this.clientId=hd.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=o,this.authCredentials.start(r,s=>y(this,null,function*(){te(Qo,"Received user=",s.uid),yield this.authCredentialListener(s),this.user=s})),this.appCheckCredentials.start(r,s=>(te(Qo,"Received new app check token=",s),this.appCheckCredentialListener(s,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();let e=new Lr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(()=>y(this,null,function*(){try{this._onlineComponents&&(yield this._onlineComponents.terminate()),this._offlineComponents&&(yield this._offlineComponents.terminate()),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){let r=CI(t,"Failed to shutdown persistence");e.reject(r)}})),e.promise}};function _E(n,e){return y(this,null,function*(){n.asyncQueue.verifyOperationInProgress(),te(Qo,"Initializing OfflineComponentProvider");let t=n.configuration;yield e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(i=>y(null,null,function*(){r.isEqual(i)||(yield yR(e.localStore,i),r=i)})),e.persistence.setDatabaseDeletedListener(()=>{Wo("Terminating Firestore due to IndexedDb database deletion"),n.terminate().then(()=>{te("Terminating Firestore due to IndexedDb database deletion completed successfully")}).catch(i=>{Wo("Terminating Firestore due to IndexedDb database deletion failed",i)})}),n._offlineComponents=e})}function dO(n,e){return y(this,null,function*(){n.asyncQueue.verifyOperationInProgress();let t=yield jH(n);te(Qo,"Initializing OnlineComponentProvider"),yield e.initialize(t,n.configuration),n.setCredentialChangeListener(r=>sO(e.remoteStore,r)),n.setAppCheckTokenChangeListener((r,i)=>sO(e.remoteStore,i)),n._onlineComponents=e})}function jH(n){return y(this,null,function*(){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){te(Qo,"Using user provided OfflineComponentProvider");try{yield _E(n,n._uninitializedComponentsProvider._offline)}catch(e){let t=e;if(!(function(i){return i.name==="FirebaseError"?i.code===$.FAILED_PRECONDITION||i.code===$.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11})(t))throw t;Wo("Error using user provided cache. Falling back to memory cache: "+t),yield _E(n,new OR)}}else te(Qo,"Using default OfflineComponentProvider"),yield _E(n,new WC(void 0));return n._offlineComponents})}function RR(n){return y(this,null,function*(){return n._onlineComponents||(n._uninitializedComponentsProvider?(te(Qo,"Using user provided OnlineComponentProvider"),yield dO(n,n._uninitializedComponentsProvider._online)):(te(Qo,"Using default OnlineComponentProvider"),yield dO(n,new UH))),n._onlineComponents})}function BH(n){return RR(n).then(e=>e.syncEngine)}function um(n){return y(this,null,function*(){let e=yield RR(n),t=e.eventManager;return t.onListen=TH.bind(null,e.syncEngine),t.onUnlisten=MH.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=DH.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=PH.bind(null,e.syncEngine),t})}function $H(n,e,t={}){let r=new Lr;return n.asyncQueue.enqueueAndForget(()=>y(null,null,function*(){return(function(o,s,a,c,u){let f=new Cd({next:_=>{f.Ou(),s.enqueueAndForget(()=>SI(o,m));let E=_.docs.has(a);!E&&_.fromCache?u.reject(new G($.UNAVAILABLE,"Failed to get document because the client is offline.")):E&&_.fromCache&&c&&c.source==="server"?u.reject(new G($.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):u.resolve(_)},error:_=>u.reject(_)}),m=new Ed(wm(a.path),f,{includeMetadataChanges:!0,ka:!0});return II(o,m)})(yield um(n),n.asyncQueue,e,t,r)})),r.promise}function HH(n,e,t={}){let r=new Lr;return n.asyncQueue.enqueueAndForget(()=>y(null,null,function*(){return(function(o,s,a,c,u){let f=new Cd({next:_=>{f.Ou(),s.enqueueAndForget(()=>SI(o,m)),_.fromCache&&c.source==="server"?u.reject(new G($.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):u.resolve(_)},error:_=>u.reject(_)}),m=new Ed(a,f,{includeMetadataChanges:!0,ka:!0});return II(o,m)})(yield um(n),n.asyncQueue,e,t,r)})),r.promise}function NR(n){let e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}var fO=new Map;var FR="firestore.googleapis.com",hO=!0,dm=class{constructor(e){var t,r;if(e.host===void 0){if(e.ssl!==void 0)throw new G($.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=FR,this.ssl=hO}else this.host=e.host,this.ssl=(t=e.ssl)!==null&&t!==void 0?t:hO;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=_R;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<nH)throw new G($.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}e7("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=NR((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),(function(o){if(o.timeoutSeconds!==void 0){if(isNaN(o.timeoutSeconds))throw new G($.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (must not be NaN)`);if(o.timeoutSeconds<5)throw new G($.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (minimum allowed value is 5)`);if(o.timeoutSeconds>30)throw new G($.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(r,i){return r.timeoutSeconds===i.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}},Wc=class{constructor(e,t,r,i){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new dm({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new G($.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new G($.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new dm(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(r){if(!r)return new bE;switch(r.type){case"firstParty":return new IE(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new G($.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}_restart(){return y(this,null,function*(){this._terminateTask==="notTerminated"?yield this._terminate():this._terminateTask="notTerminated"})}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(t){let r=fO.get(t);r&&(te("ComponentProvider","Removing Datastore"),fO.delete(t),r.terminate())})(this),Promise.resolve()}};function LR(n,e,t,r={}){var i;n=bn(n,Wc);let o=Ao(e),s=n._getSettings(),a=Object.assign(Object.assign({},s),{emulatorOptions:n._getEmulatorOptions()}),c=`${e}:${t}`;o&&(Yp(`https://${c}`),Qp("Firestore",!0)),s.host!==FR&&s.host!==c&&Wo("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");let u=Object.assign(Object.assign({},s),{host:c,ssl:o,emulatorOptions:r});if(!rr(u,a)&&(n._setSettings(u),r.mockUserToken)){let f,m;if(typeof r.mockUserToken=="string")f=r.mockUserToken,m=Ut.MOCK_USER;else{f=$P(r.mockUserToken,(i=n._app)===null||i===void 0?void 0:i.options.projectId);let _=r.mockUserToken.sub||r.mockUserToken.user_id;if(!_)throw new G($.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");m=new Ut(_)}n._authCredentials=new wE(new Fg(f,m))}}var pi=class n{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new n(this.firestore,e,this._query)}},Mt=class n{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new $o(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new n(this.firestore,e,this._key)}toJSON(){return{type:n._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,r){if(Dd(t,n._jsonSchema))return new n(e,r||null,new ae(tt.fromString(t.referencePath)))}};Mt._jsonSchemaVersion="firestore/documentReference/1.0",Mt._jsonSchema={type:St("string",Mt._jsonSchemaVersion),referencePath:St("string")};var $o=class n extends pi{constructor(e,t,r){super(e,t,wm(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){let e=this._path.popLast();return e.isEmpty()?null:new Mt(this.firestore,null,new ae(e))}withConverter(e){return new n(this.firestore,e,this._path)}};function VR(n,e,...t){if(n=ze(n),wO("collection","path",e),n instanceof Wc){let r=tt.fromString(e,...t);return kk(r),new $o(n,null,r)}{if(!(n instanceof Mt||n instanceof $o))throw new G($.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=n._path.child(tt.fromString(e,...t));return kk(r),new $o(n.firestore,null,r)}}function MI(n,e,...t){if(n=ze(n),arguments.length===1&&(e=hd.newId()),wO("doc","path",e),n instanceof Wc){let r=tt.fromString(e,...t);return Ak(r),new Mt(n,null,new ae(r))}{if(!(n instanceof Mt||n instanceof $o))throw new G($.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=n._path.child(tt.fromString(e,...t));return Ak(r),new Mt(n.firestore,n instanceof $o?n.converter:null,new ae(r))}}var pO="AsyncQueue",fm=class{constructor(e=Promise.resolve()){this.Zu=[],this.Xu=!1,this.ec=[],this.tc=null,this.nc=!1,this.rc=!1,this.sc=[],this.F_=new rm(this,"async_queue_retry"),this.oc=()=>{let r=vE();r&&te(pO,"Visibility state changed to "+r.visibilityState),this.F_.y_()},this._c=e;let t=vE();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this.oc)}get isShuttingDown(){return this.Xu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.ac(),this.uc(e)}enterRestrictedMode(e){if(!this.Xu){this.Xu=!0,this.rc=e||!1;let t=vE();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this.oc)}}enqueue(e){if(this.ac(),this.Xu)return new Promise(()=>{});let t=new Lr;return this.uc(()=>this.Xu&&this.rc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Zu.push(e),this.cc()))}cc(){return y(this,null,function*(){if(this.Zu.length!==0){try{yield this.Zu[0](),this.Zu.shift(),this.F_.reset()}catch(e){if(!Qc(e))throw e;te(pO,"Operation failed with retryable error: "+e)}this.Zu.length>0&&this.F_.g_(()=>this.cc())}})}uc(e){let t=this._c.then(()=>(this.nc=!0,e().catch(r=>{throw this.tc=r,this.nc=!1,zi("INTERNAL UNHANDLED ERROR: ",gO(r)),r}).then(r=>(this.nc=!1,r))));return this._c=t,t}enqueueAfterDelay(e,t,r){this.ac(),this.sc.indexOf(e)>-1&&(t=0);let i=LC.createAndSchedule(this,e,t,r,o=>this.lc(o));return this.ec.push(i),i}ac(){this.tc&&le(47125,{hc:gO(this.tc)})}verifyOperationInProgress(){}Pc(){return y(this,null,function*(){let e;do e=this._c,yield e;while(e!==this._c)})}Tc(e){for(let t of this.ec)if(t.timerId===e)return!0;return!1}Ic(e){return this.Pc().then(()=>{this.ec.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(let t of this.ec)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Pc()})}dc(e){this.sc.push(e)}lc(e){let t=this.ec.indexOf(e);this.ec.splice(t,1)}};function gO(n){let e=n.message||"";return n.stack&&(e=n.stack.includes(n.message)?n.stack:n.message+`
`+n.stack),e}function mO(n){return(function(t,r){if(typeof t!="object"||t===null)return!1;let i=t;for(let o of r)if(o in i&&typeof i[o]=="function")return!0;return!1})(n,["next","error","complete"])}var ur=class extends Wc{constructor(e,t,r,i){super(e,t,r,i),this.type="firestore",this._queue=new fm,this._persistenceKey=i?.name||"[DEFAULT]"}_terminate(){return y(this,null,function*(){if(this._firestoreClient){let e=this._firestoreClient.terminate();this._queue=new fm(e),this._firestoreClient=void 0,yield e}})}};function UR(n,e){let t=typeof n=="object"?n:si(),r=typeof n=="string"?n:e||Bg,i=or(t,"firestore").getImmediate({identifier:r});if(!i._initialized){let o=BP("firestore");o&&LR(i,...o)}return i}function Pd(n){if(n._terminated)throw new G($.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||zH(n),n._firestoreClient}function zH(n){var e,t,r;let i=n._freezeSettings(),o=(function(a,c,u,f){return new ME(a,c,u,f.host,f.ssl,f.experimentalForceLongPolling,f.experimentalAutoDetectLongPolling,NR(f.experimentalLongPollingOptions),f.useFetchStreams,f.isUsingEmulator)})(n._databaseId,((e=n._app)===null||e===void 0?void 0:e.options.appId)||"",n._persistenceKey,i);n._componentsProvider||!((t=i.localCache)===null||t===void 0)&&t._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(n._componentsProvider={_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider}),n._firestoreClient=new GC(n._authCredentials,n._appCheckCredentials,n._queue,o,n._componentsProvider&&(function(a){let c=a?._online.build();return{_offline:a?._offline.build(c),_online:c}})(n._componentsProvider))}var Ho=class n{constructor(e){this._byteString=e}static fromBase64String(e){try{return new n(ln.fromBase64String(e))}catch(t){throw new G($.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new n(ln.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:n._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(Dd(e,n._jsonSchema))return n.fromBase64String(e.bytes)}};Ho._jsonSchemaVersion="firestore/bytes/1.0",Ho._jsonSchema={type:St("string",Ho._jsonSchemaVersion),bytes:St("string")};var la=class{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new G($.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new zn(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}};var ua=class{constructor(e){this._methodName=e}};var zo=class n{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new G($.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new G($.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return Se(this._lat,e._lat)||Se(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:n._jsonSchemaVersion}}static fromJSON(e){if(Dd(e,n._jsonSchema))return new n(e.latitude,e.longitude)}};zo._jsonSchemaVersion="firestore/geoPoint/1.0",zo._jsonSchema={type:St("string",zo._jsonSchemaVersion),latitude:St("number"),longitude:St("number")};var qo=class n{constructor(e){this._values=(e||[]).map(t=>t)}toArray(){return this._values.map(e=>e)}isEqual(e){return(function(r,i){if(r.length!==i.length)return!1;for(let o=0;o<r.length;++o)if(r[o]!==i[o])return!1;return!0})(this._values,e._values)}toJSON(){return{type:n._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(Dd(e,n._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(t=>typeof t=="number"))return new n(e.vectorValues);throw new G($.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}};qo._jsonSchemaVersion="firestore/vectorValue/1.0",qo._jsonSchema={type:St("string",qo._jsonSchemaVersion),vectorValues:St("object")};var qH=/^__.*__$/,KC=class{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return this.fieldMask!==null?new hi(e,this.data,this.fieldMask,t,this.fieldTransforms):new aa(e,this.data,t,this.fieldTransforms)}},hm=class{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new hi(e,this.data,this.fieldMask,t,this.fieldTransforms)}};function jR(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw le(40011,{Ec:n})}}var YC=class n{constructor(e,t,r,i,o,s){this.settings=e,this.databaseId=t,this.serializer=r,this.ignoreUndefinedProperties=i,o===void 0&&this.Ac(),this.fieldTransforms=o||[],this.fieldMask=s||[]}get path(){return this.settings.path}get Ec(){return this.settings.Ec}Rc(e){return new n(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Vc(e){var t;let r=(t=this.path)===null||t===void 0?void 0:t.child(e),i=this.Rc({path:r,mc:!1});return i.fc(e),i}gc(e){var t;let r=(t=this.path)===null||t===void 0?void 0:t.child(e),i=this.Rc({path:r,mc:!1});return i.Ac(),i}yc(e){return this.Rc({path:void 0,mc:!0})}wc(e){return gm(e,this.settings.methodName,this.settings.Sc||!1,this.path,this.settings.bc)}contains(e){return this.fieldMask.find(t=>e.isPrefixOf(t))!==void 0||this.fieldTransforms.find(t=>e.isPrefixOf(t.field))!==void 0}Ac(){if(this.path)for(let e=0;e<this.path.length;e++)this.fc(this.path.get(e))}fc(e){if(e.length===0)throw this.wc("Document fields must not be empty");if(jR(this.Ec)&&qH.test(e))throw this.wc('Document fields cannot begin and end with "__"')}},QC=class{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=r||Im(e)}Dc(e,t,r,i=!1){return new YC({Ec:e,methodName:t,bc:r,path:zn.emptyPath(),mc:!1,Sc:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}};function Xc(n){let e=n._freezeSettings(),t=Im(n._databaseId);return new QC(n._databaseId,!!e.ignoreUndefinedProperties,t)}function PI(n,e,t,r,i,o={}){let s=n.Dc(o.merge||o.mergeFields?2:0,e,t,i);AI("Data must be an object, but it was:",s,r);let a=zR(r,s),c,u;if(o.merge)c=new lr(s.fieldMask),u=s.fieldTransforms;else if(o.mergeFields){let f=[];for(let m of o.mergeFields){let _=JC(e,m,t);if(!s.contains(_))throw new G($.INVALID_ARGUMENT,`Field '${_}' is specified in your field mask but missing from your input data.`);WR(f,_)||f.push(_)}c=new lr(f),u=s.fieldTransforms.filter(m=>c.covers(m.field))}else c=null,u=s.fieldTransforms;return new KC(new Hn(a),c,u)}var pm=class n extends ua{_toFieldTransform(e){if(e.Ec!==2)throw e.Ec===1?e.wc(`${this._methodName}() can only appear at the top level of your update data`):e.wc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof n}};var ZC=class n extends ua{_toFieldTransform(e){return new Wg(e.path,new ra)}isEqual(e){return e instanceof n}};var XC=class n extends ua{constructor(e,t){super(e),this.Cc=t}_toFieldTransform(e){let t=new sa(e.serializer,rR(e.serializer,this.Cc));return new Wg(e.path,t)}isEqual(e){return e instanceof n&&this.Cc===e.Cc}};function BR(n,e,t,r){let i=n.Dc(1,e,t);AI("Data must be an object, but it was:",i,r);let o=[],s=Hn.empty();Zo(r,(c,u)=>{let f=kI(e,c,t);u=ze(u);let m=i.gc(f);if(u instanceof pm)o.push(f);else{let _=Ad(u,m);_!=null&&(o.push(f),s.set(f,_))}});let a=new lr(o);return new hm(s,a,i.fieldTransforms)}function $R(n,e,t,r,i,o){let s=n.Dc(1,e,t),a=[JC(e,r,t)],c=[i];if(o.length%2!=0)throw new G($.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let _=0;_<o.length;_+=2)a.push(JC(e,o[_])),c.push(o[_+1]);let u=[],f=Hn.empty();for(let _=a.length-1;_>=0;--_)if(!WR(u,a[_])){let E=a[_],x=c[_];x=ze(x);let V=s.gc(E);if(x instanceof pm)u.push(E);else{let U=Ad(x,V);U!=null&&(u.push(E),f.set(E,U))}}let m=new lr(u);return new hm(f,m,s.fieldTransforms)}function HR(n,e,t,r=!1){return Ad(t,n.Dc(r?4:3,e))}function Ad(n,e){if(qR(n=ze(n)))return AI("Unsupported field value:",e,n),zR(n,e);if(n instanceof ua)return(function(r,i){if(!jR(i.Ec))throw i.wc(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.wc(`${r._methodName}() is not currently supported inside arrays`);let o=r._toFieldTransform(i);o&&i.fieldTransforms.push(o)})(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.mc&&e.Ec!==4)throw e.wc("Nested arrays are not supported");return(function(r,i){let o=[],s=0;for(let a of r){let c=Ad(a,i.yc(s));c==null&&(c={nullValue:"NULL_VALUE"}),o.push(c),s++}return{arrayValue:{values:o}}})(n,e)}return(function(r,i){if((r=ze(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return rR(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){let o=it.fromDate(r);return{timestampValue:Zg(i.serializer,o)}}if(r instanceof it){let o=new it(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Zg(i.serializer,o)}}if(r instanceof zo)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Ho)return{bytesValue:dR(i.serializer,r._byteString)};if(r instanceof Mt){let o=i.databaseId,s=r.firestore._databaseId;if(!s.isEqual(o))throw i.wc(`Document reference is for database ${s.projectId}/${s.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:vI(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof qo)return(function(s,a){return{mapValue:{fields:{[uI]:{stringValue:dI},[Uc]:{arrayValue:{values:s.toArray().map(u=>{if(typeof u!="number")throw a.wc("VectorValues must only contain numeric values.");return mI(a.serializer,u)})}}}}}})(r,i);throw i.wc(`Unsupported field value: ${vm(r)}`)})(n,e)}function zR(n,e){let t={};return LO(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Zo(n,(r,i)=>{let o=Ad(i,e.Vc(r));o!=null&&(t[r]=o)}),{mapValue:{fields:t}}}function qR(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof it||n instanceof zo||n instanceof Ho||n instanceof Mt||n instanceof ua||n instanceof qo)}function AI(n,e,t){if(!qR(t)||!EO(t)){let r=vm(t);throw r==="an object"?e.wc(n+" a custom object"):e.wc(n+" "+r)}}function JC(n,e,t){if((e=ze(e))instanceof la)return e._internalPath;if(typeof e=="string")return kI(n,e);throw gm("Field path arguments must be of type string or ",n,!1,void 0,t)}var WH=new RegExp("[~\\*/\\[\\]]");function kI(n,e,t){if(e.search(WH)>=0)throw gm(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new la(...e.split("."))._internalPath}catch{throw gm(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function gm(n,e,t,r,i){let o=r&&!r.isEmpty(),s=i!==void 0,a=`Function ${e}() called with invalid data`;t&&(a+=" (via `toFirestore()`)"),a+=". ";let c="";return(o||s)&&(c+=" (found",o&&(c+=` in field ${r}`),s&&(c+=` in document ${i}`),c+=")"),new G($.INVALID_ARGUMENT,a+n+c)}function WR(n,e){return n.some(t=>t.isEqual(e))}var Id=class{constructor(e,t,r,i,o){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=i,this._converter=o}get id(){return this._key.path.lastSegment()}get ref(){return new Mt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){let e=new eI(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){let t=this._document.data.field(Dm("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}},eI=class extends Id{data(){return super.data()}};function Dm(n,e){return typeof e=="string"?kI(n,e):e instanceof la?e._internalPath:e._delegate._internalPath}function GR(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new G($.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var Sd=class{},Gc=class extends Sd{};function KR(n,e,...t){let r=[];e instanceof Sd&&r.push(e),r=r.concat(t),(function(o){let s=o.filter(c=>c instanceof tI).length,a=o.filter(c=>c instanceof mm).length;if(s>1||s>0&&a>0)throw new G($.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(r);for(let i of r)n=i._apply(n);return n}var mm=class n extends Gc{constructor(e,t,r){super(),this._field=e,this._op=t,this._value=r,this.type="where"}static _create(e,t,r){return new n(e,t,r)}_apply(e){let t=this._parse(e);return JR(e._query,t),new pi(e.firestore,e.converter,$E(e._query,t))}_parse(e){let t=Xc(e.firestore);return(function(o,s,a,c,u,f,m){let _;if(u.isKeyField()){if(f==="array-contains"||f==="array-contains-any")throw new G($.INVALID_ARGUMENT,`Invalid Query. You can't perform '${f}' queries on documentId().`);if(f==="in"||f==="not-in"){_O(m,f);let x=[];for(let V of m)x.push(vO(c,o,V));_={arrayValue:{values:x}}}else _=vO(c,o,m)}else f!=="in"&&f!=="not-in"&&f!=="array-contains-any"||_O(m,f),_=HR(a,s,m,f==="in"||f==="not-in");return It.create(u,f,_)})(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}};function YR(n,e,t){let r=e,i=Dm("where",n);return mm._create(i,r,t)}var tI=class n extends Sd{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new n(e,t)}_parse(e){let t=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return t.length===1?t[0]:Ur.create(t,this._getOperator())}_apply(e){let t=this._parse(e);return t.getFilters().length===0?e:((function(i,o){let s=i,a=o.getFlattenedFilters();for(let c of a)JR(s,c),s=$E(s,c)})(e._query,t),new pi(e.firestore,e.converter,$E(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}};var nI=class n extends Gc{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new n(e,t)}_apply(e){let t=(function(i,o,s){if(i.startAt!==null)throw new G($.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(i.endAt!==null)throw new G($.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new na(o,s)})(e._query,this._field,this._direction);return new pi(e.firestore,e.converter,(function(i,o){let s=i.explicitOrderBy.concat([o]);return new Gi(i.path,i.collectionGroup,s,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)})(e._query,t))}};function QR(n,e="asc"){let t=e,r=Dm("orderBy",n);return nI._create(r,t)}var rI=class n extends Gc{constructor(e,t,r){super(),this.type=e,this._limit=t,this._limitType=r}static _create(e,t,r){return new n(e,t,r)}_apply(e){return new pi(e.firestore,e.converter,qg(e._query,this._limit,this._limitType))}};function ZR(n){return t7("limit",n),rI._create("limit",n,"F")}var iI=class n extends Gc{constructor(e,t,r){super(),this.type=e,this._docOrFields=t,this._inclusive=r}static _create(e,t,r){return new n(e,t,r)}_apply(e){let t=GH(e,this.type,this._docOrFields,this._inclusive);return new pi(e.firestore,e.converter,(function(i,o){return new Gi(i.path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),i.limit,i.limitType,o,i.endAt)})(e._query,t))}};function XR(...n){return iI._create("startAfter",n,!1)}function GH(n,e,t,r){if(t[0]=ze(t[0]),t[0]instanceof Id)return(function(o,s,a,c,u){if(!c)throw new G($.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${a}().`);let f=[];for(let m of Nc(o))if(m.field.isKeyField())f.push(Hg(s,c.key));else{let _=c.data.field(m.field);if(ym(_))throw new G($.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+m.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(_===null){let E=m.field.canonicalString();throw new G($.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${E}' (used as the orderBy) does not exist.`)}f.push(_)}return new Ko(f,u)})(n._query,n.firestore._databaseId,e,t[0]._document,r);{let i=Xc(n.firestore);return(function(s,a,c,u,f,m){let _=s.explicitOrderBy;if(f.length>_.length)throw new G($.INVALID_ARGUMENT,`Too many arguments provided to ${u}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);let E=[];for(let x=0;x<f.length;x++){let V=f[x];if(_[x].field.isKeyField()){if(typeof V!="string")throw new G($.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${u}(), but got a ${typeof V}`);if(!gI(s)&&V.indexOf("/")!==-1)throw new G($.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${u}() must be a plain document ID, but '${V}' contains a slash.`);let U=s.path.child(tt.fromString(V));if(!ae.isDocumentKey(U))throw new G($.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${u}() must result in a valid document path, but '${U}' is not because it contains an odd number of segments.`);let W=new ae(U);E.push(Hg(a,W))}else{let U=HR(c,u,V);E.push(U)}}return new Ko(E,m)})(n._query,n.firestore._databaseId,i,e,t,r)}}function vO(n,e,t){if(typeof(t=ze(t))=="string"){if(t==="")throw new G($.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!gI(e)&&t.indexOf("/")!==-1)throw new G($.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);let r=e.path.child(tt.fromString(t));if(!ae.isDocumentKey(r))throw new G($.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Hg(n,new ae(r))}if(t instanceof Mt)return Hg(n,t._key);throw new G($.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${vm(t)}.`)}function _O(n,e){if(!Array.isArray(n)||n.length===0)throw new G($.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function JR(n,e){let t=(function(i,o){for(let s of i)for(let a of s.getFlattenedFilters())if(o.indexOf(a.op)>=0)return a.op;return null})(n.filters,(function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(t!==null)throw t===e.op?new G($.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new G($.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}var oI=class{convertValue(e,t="none"){switch(Go(e)){case 0:return null;case 1:return e.booleanValue;case 2:return rt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Wi(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw le(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){let r={};return Zo(e,(i,o)=>{r[i]=this.convertValue(o,t)}),r}convertVectorValue(e){var t,r,i;let o=(i=(r=(t=e.fields)===null||t===void 0?void 0:t[Uc].arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.map(s=>rt(s.doubleValue));return new qo(o)}convertGeoPoint(e){return new zo(rt(e.latitude),rt(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":let r=bm(e);return r==null?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(md(e));default:return null}}convertTimestamp(e){let t=qi(e);return new it(t.seconds,t.nanos)}convertDocumentKey(e,t){let r=tt.fromString(e);Be(vR(r),9688,{name:e});let i=new $g(r.get(1),r.get(3)),o=new ae(r.popFirst(5));return i.isEqual(t)||zi(`Document ${o} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),o}};function OI(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}var Zs=class{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}},Xs=class n extends Id{constructor(e,t,r,i,o,s){super(e,t,r,i,s),this._firestore=e,this._firestoreImpl=e,this.metadata=o}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){let t=new Lc(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){let r=this._document.data.field(Dm("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new G($.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");let e=this._document,t={};return t.type=n._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?t:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t)}};Xs._jsonSchemaVersion="firestore/documentSnapshot/1.0",Xs._jsonSchema={type:St("string",Xs._jsonSchemaVersion),bundleSource:St("string","DocumentSnapshot"),bundleName:St("string"),bundle:St("string")};var Lc=class extends Xs{data(e={}){return super.data(e)}},Js=class n{constructor(e,t,r,i){this._firestore=e,this._userDataWriter=t,this._snapshot=i,this.metadata=new Zs(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){let e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new Lc(this._firestore,this._userDataWriter,r.key,r,new Zs(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){let t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new G($.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=(function(i,o){if(i._snapshot.oldDocs.isEmpty()){let s=0;return i._snapshot.docChanges.map(a=>{let c=new Lc(i._firestore,i._userDataWriter,a.doc.key,a.doc,new Zs(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);return a.doc,{type:"added",doc:c,oldIndex:-1,newIndex:s++}})}{let s=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(a=>o||a.type!==3).map(a=>{let c=new Lc(i._firestore,i._userDataWriter,a.doc.key,a.doc,new Zs(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter),u=-1,f=-1;return a.type!==0&&(u=s.indexOf(a.doc.key),s=s.delete(a.doc.key)),a.type!==1&&(s=s.add(a.doc),f=s.indexOf(a.doc.key)),{type:KH(a.type),doc:c,oldIndex:u,newIndex:f}})}})(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new G($.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");let e={};e.type=n._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=hd.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;let t=[],r=[],i=[];return this.docs.forEach(o=>{o._document!==null&&(t.push(o._document),r.push(this._userDataWriter.convertObjectMap(o._document.data.value.mapValue.fields,"previous")),i.push(o.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}};function KH(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return le(61501,{type:n})}}function e2(n){n=bn(n,Mt);let e=bn(n.firestore,ur);return $H(Pd(e),n._key).then(t=>a2(e,n,t))}Js._jsonSchemaVersion="firestore/querySnapshot/1.0",Js._jsonSchema={type:St("string",Js._jsonSchemaVersion),bundleSource:St("string","QuerySnapshot"),bundleName:St("string"),bundle:St("string")};var Td=class extends oI{constructor(e){super(),this.firestore=e}convertBytes(e){return new Ho(e)}convertReference(e){let t=this.convertDocumentKey(e,this.firestore._databaseId);return new Mt(this.firestore,null,t)}};function t2(n){n=bn(n,pi);let e=bn(n.firestore,ur),t=Pd(e),r=new Td(e);return GR(n._query),HH(t,n._query).then(i=>new Js(e,r,n,i))}function n2(n,e,t){n=bn(n,Mt);let r=bn(n.firestore,ur),i=OI(n.converter,e,t);return kd(r,[PI(Xc(r),"setDoc",n._key,i,n.converter!==null,t).toMutation(n._key,qn.none())])}function r2(n,e,t,...r){n=bn(n,Mt);let i=bn(n.firestore,ur),o=Xc(i),s;return s=typeof(e=ze(e))=="string"||e instanceof la?$R(o,"updateDoc",n._key,e,t,r):BR(o,"updateDoc",n._key,e),kd(i,[s.toMutation(n._key,qn.exists(!0))])}function i2(n){return kd(bn(n.firestore,ur),[new zc(n._key,qn.none())])}function o2(n,e){let t=bn(n.firestore,ur),r=MI(n),i=OI(n.converter,e);return kd(t,[PI(Xc(n.firestore),"addDoc",r._key,i,n.converter!==null,{}).toMutation(r._key,qn.exists(!1))]).then(()=>r)}function s2(n,...e){var t,r,i;n=ze(n);let o={includeMetadataChanges:!1,source:"default"},s=0;typeof e[s]!="object"||mO(e[s])||(o=e[s++]);let a={includeMetadataChanges:o.includeMetadataChanges,source:o.source};if(mO(e[s])){let m=e[s];e[s]=(t=m.next)===null||t===void 0?void 0:t.bind(m),e[s+1]=(r=m.error)===null||r===void 0?void 0:r.bind(m),e[s+2]=(i=m.complete)===null||i===void 0?void 0:i.bind(m)}let c,u,f;if(n instanceof Mt)u=bn(n.firestore,ur),f=wm(n._key.path),c={next:m=>{e[s]&&e[s](a2(u,n,m))},error:e[s+1],complete:e[s+2]};else{let m=bn(n,pi);u=bn(m.firestore,ur),f=m._query;let _=new Td(u);c={next:E=>{e[s]&&e[s](new Js(u,_,m,E))},error:e[s+1],complete:e[s+2]},GR(n._query)}return(function(_,E,x,V){let U=new Cd(V),W=new Ed(E,U,x);return _.asyncQueue.enqueueAndForget(()=>y(null,null,function*(){return II(yield um(_),W)})),()=>{U.Ou(),_.asyncQueue.enqueueAndForget(()=>y(null,null,function*(){return SI(yield um(_),W)}))}})(Pd(u),f,a,c)}function kd(n,e){return(function(r,i){let o=new Lr;return r.asyncQueue.enqueueAndForget(()=>y(null,null,function*(){return AH(yield BH(r),i,o)})),o.promise})(Pd(n),e)}function a2(n,e,t){let r=t.docs.get(e._key),i=new Td(n);return new Xs(n,i,e._key,r,new Zs(t.hasPendingWrites,t.fromCache),e.converter)}var sI=class{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=Xc(e)}set(e,t,r){this._verifyNotCommitted();let i=yE(e,this._firestore),o=OI(i.converter,t,r),s=PI(this._dataReader,"WriteBatch.set",i._key,o,i.converter!==null,r);return this._mutations.push(s.toMutation(i._key,qn.none())),this}update(e,t,r,...i){this._verifyNotCommitted();let o=yE(e,this._firestore),s;return s=typeof(t=ze(t))=="string"||t instanceof la?$R(this._dataReader,"WriteBatch.update",o._key,t,r,i):BR(this._dataReader,"WriteBatch.update",o._key,t),this._mutations.push(s.toMutation(o._key,qn.exists(!0))),this}delete(e){this._verifyNotCommitted();let t=yE(e,this._firestore);return this._mutations=this._mutations.concat(new zc(t._key,qn.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new G($.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}};function yE(n,e){if((n=ze(n)).firestore!==e)throw new G($.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}function xm(){return new ZC("serverTimestamp")}function c2(n){return new XC("increment",n)}function l2(n){return Pd(n=bn(n,ur)),new sI(n,e=>kd(n,e))}(function(e,t=!0){(function(i){Kc=i})(Ro),Kt(new _t("firestore",(r,{instanceIdentifier:i,options:o})=>{let s=r.getProvider("app").getImmediate(),a=new ur(new EE(r.getProvider("auth-internal")),new SE(s,r.getProvider("app-check-internal")),(function(u,f){if(!Object.prototype.hasOwnProperty.apply(u.options,["projectId"]))throw new G($.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new $g(u.options.projectId,f)})(s,i),s);return o=Object.assign({useFetchStreams:t},o),a._setSettings(o),a},"PUBLIC").setMultipleInstances(!0)),Ne(Dk,xk,e),Ne(Dk,xk,"esm2017")})();var lt=class{constructor(e){return e}},u2="firestore",RI=class{constructor(){return No(u2)}};var NI=new J("angularfire2.firestore-instances");function YH(n,e){let t=Ws(u2,n,e);return t&&new lt(t)}function QH(n){return(e,t)=>{let r=e.runOutsideAngular(()=>n(t));return new lt(r)}}var ZH={provide:RI,deps:[[new zt,NI]]},XH={provide:lt,useFactory:YH,deps:[[new zt,NI],Rr]};function d2(n,...e){return Ne("angularfire",sr.full,"fst"),nn([XH,ZH,{provide:NI,useFactory:QH(n),multi:!0,deps:[xe,Qe,ai,Li,[new zt,ad],[new zt,Sc],...e]}])}var Jc=ke(o2,!0,2);var pt=ke(VR,!0,2);var Qi=ke(i2,!0,2);var Pe=ke(MI,!0,2);var gt=ke(e2,!0);var wn=ke(t2,!0);var f2=ke(UR,!0);var Zi=ke(c2,!0,2);var Od=ke(ZR,!0,2);var h2=ke(s2,!0);var Xi=ke(QR,!0,2),En=ke(KR,!0,2);var dr=ke(n2,!0,2);var p2=ke(XR,!0,2);var Bt=ke(r2,!0,2);var Pt=ke(YR,!0,2),Mm=ke(l2,!0,2);var ot=class n{auth=k($n);firestore=k(lt);user$=Tg(this.auth);user;constructor(){wk(this.auth,e=>{this.user=e})}emailRegister(e,t){return y(this,null,function*(){let r=yield bk(this.auth,e,t);return this.user=r.user,r.user&&(yield this.ensureProfile(r.user)),r.user})}emailLogin(e,t){return y(this,null,function*(){return Ek(this.auth,e,t)})}googleLogin(){return y(this,null,function*(){let e=new Xw,t=yield Ck(this.auth,e);this.user=t.user;let r=t.user;return r&&(yield this.ensureProfile(r)),r})}logout(){return y(this,null,function*(){return Ik(this.auth)})}ensureProfile(e){return y(this,null,function*(){let t=Pe(this.firestore,`profiles/${e.uid}`);if((yield gt(t)).exists())yield Bt(t,{lastLoggedInAt:new Date,updatedAt:new Date});else{let i={id:e.uid,name:e.displayName??"Unposter",email:e.email??"",bio:"",photoURL:e.photoURL??"",nbFollowers:0,nbFollowed:0,streaks:0,nbViews:0,nbUpvotes:0,xp:0,level:1,isActive:!0,role:"user",createdAt:new Date,updatedAt:new Date,lastLoggedInAt:new Date,socialLinks:{}};yield dr(t,i)}})}static \u0275fac=function(t){return new(t||n)};static \u0275prov=Q({token:n,factory:n.\u0275fac,providedIn:"root"})};var fr=class n{firestore=k(lt);getProfile(e){return y(this,null,function*(){let t=Pe(this.firestore,`profiles/${e}`),r=yield gt(t);return r.exists()?r.data():null})}updateProfile(e,t){return y(this,null,function*(){let r=Pe(this.firestore,`profiles/${e}`);yield Bt(r,re(H({},t),{updatedAt:new Date}))})}awardUserXP(e,t,r){return y(this,null,function*(){let i=Pe(this.firestore,`profiles/${e}`);yield Bt(i,{xp:Zi(t),updatedAt:new Date}),yield this.logXPAward(e,t,r),yield this.checkLevelUp(e)})}checkLevelUp(e){return y(this,null,function*(){let t=yield this.getProfile(e);if(!t)return;let r=this.calculateXPForLevel(t.level+1);if(t.xp>=r){let i=Pe(this.firestore,`profiles/${e}`);yield Bt(i,{level:Zi(1),updatedAt:new Date})}})}calculateXPForLevel(e){return Math.floor(100*Math.pow(1.5,e-1))}logXPAward(e,t,r){return y(this,null,function*(){let i=Pe(pt(this.firestore,`profiles/${e}/xpLogs`));yield dr(i,{amount:t,reason:r,timestamp:new Date,totalAfter:(yield this.getProfile(e))?.xp||0})})}static \u0275fac=function(t){return new(t||n)};static \u0275prov=Q({token:n,factory:n.\u0275fac,providedIn:"root"})};var el=class n{firestore=k(lt);addComment(e,t){return y(this,null,function*(){let r=pt(this.firestore,"comments");yield Jc(r,re(H({storyId:e},t),{createdAt:new Date,status:"active"}))})}getComments(e){return y(this,null,function*(){let t=pt(this.firestore,"comments"),r=En(t,Pt("storyId","==",e),Pt("status","==","active"),Xi("createdAt","desc"));return(yield wn(r)).docs.map(o=>H({id:o.id},o.data()))})}deleteOwnComment(e,t,r){return y(this,null,function*(){let i=Pe(this.firestore,`comments/${t}`),o=yield gt(i);if(o.exists()){let s=o.data();if(s?.storyId===e&&s?.userId===r)yield Bt(i,{status:"deleted"});else throw new Error("Not authorized to delete this comment")}})}countComments(e){return y(this,null,function*(){let t=pt(this.firestore,"comments"),r=En(t,Pt("storyId","==",e),Pt("status","==","active"));return(yield wn(r)).size})}static \u0275fac=function(t){return new(t||n)};static \u0275prov=Q({token:n,factory:n.\u0275fac,providedIn:"root"})};var gi=class n{firestore=k(lt);createStory(e){return y(this,null,function*(){try{let t=re(H({},e),{createdAt:new Date,updatedAt:new Date,stats:{readTime:this.calculateReadTime(e.content),wordCount:this.calculateWordCount(e.content),readCount:0,voteCount:0,commentCount:0}}),r=pt(this.firestore,"stories"),i=yield Jc(r,t);return yield Bt(i,{id:i.id}),i.id}catch(t){throw console.error("Error creating story:",t),new Error("Failed to create story")}})}updateStory(e,t){return y(this,null,function*(){try{let r=Pe(this.firestore,`stories/${e}`);yield Bt(r,H(re(H({},t),{updatedAt:new Date}),t.content&&{"stats.readTime":this.calculateReadTime(t.content),"stats.wordCount":this.calculateWordCount(t.content)}))}catch(r){throw console.error("Error updating story:",r),new Error("Failed to update story")}})}getStory(e){return y(this,null,function*(){try{let t=Pe(this.firestore,`stories/${e}`),r=yield gt(t);if(r.exists()){let i=r.data();return H({id:r.id},i)}return null}catch(t){return console.error("Error getting story:",t),null}})}getDraftsByAuthor(e){return y(this,null,function*(){try{let t=pt(this.firestore,"stories"),r=En(t,Pt("authorId","==",e),Pt("status","==","draft"),Xi("updatedAt","desc"));return(yield wn(r)).docs.map(o=>H({id:o.id},o.data()))}catch(t){return console.error("Error getting drafts:",t),[]}})}getPublishedByAuthor(e){return y(this,null,function*(){try{let t=pt(this.firestore,"stories"),r=En(t,Pt("authorId","==",e),Pt("status","==","published"),Xi("createdAt","desc"));return(yield wn(r)).docs.map(o=>H({id:o.id},o.data()))}catch(t){return console.error("Error getting published stories:",t),[]}})}lastDoc=null;hasMore=!0;resetPagination(){this.lastDoc=null,this.hasMore=!0}getStories(e,t=!1){return y(this,null,function*(){if(!this.hasMore)return[];try{let r=pt(this.firestore,"stories"),i;this.lastDoc?i=En(r,Pt("status","==","published"),Xi("createdAt","desc"),p2(this.lastDoc),Od(e)):i=En(r,Pt("status","==","published"),Xi("createdAt","desc"),Od(e));let o=yield wn(i),s=o.docs.map(a=>H({id:a.id},a.data()));return this.lastDoc=o.docs.length>0?o.docs[o.docs.length-1]:this.lastDoc,o.docs.length<e&&(this.hasMore=!1),t?s:[...s]}catch(r){return console.error("Error getting stories:",r),[]}})}calculateWordCount(e){return e?e.replace(/<[^>]*>/g,"").trim().split(/\s+/).filter(r=>r.length>0).length:0}calculateReadTime(e){let r=this.calculateWordCount(e);return Math.max(1,Math.ceil(r/200))}deleteStory(e){return y(this,null,function*(){try{let t=Pe(this.firestore,`stories/${e}`);yield Qi(t)}catch(t){throw console.error("Error deleting story:",t),new Error("Failed to delete story")}})}deleteDraft(e){return y(this,null,function*(){try{let t=yield this.getStory(e);if(!t)throw new Error("Story not found");if(t.status!=="draft")throw new Error("Cannot delete a published story using deleteDraft method");let r=Pe(this.firestore,`stories/${e}`);yield Qi(r)}catch(t){throw console.error("Error deleting draft:",t),new Error("Failed to delete draft")}})}static \u0275fac=function(t){return new(t||n)};static \u0275prov=Q({token:n,factory:n.\u0275fac,providedIn:"root"})};var Xo=class n{firestore=k(lt);auth=k($n);toggleVote(e){return y(this,null,function*(){let t=this.auth.currentUser;if(!t)throw console.error("\u274C User not authenticated"),new Error("Not authenticated");let r=Pe(this.firestore,`stories/${e}/votes/${t.uid}`);try{let i=yield gt(r),o=Pe(this.firestore,`stories/${e}`);if(i.exists())yield Qi(r),yield Bt(o,{"stats.voteCount":Zi(-1)});else{let s={storyId:e,userId:t.uid,createdAt:new Date};yield dr(r,s),yield Bt(o,{"stats.voteCount":Zi(1)})}}catch(i){throw console.error("\u274C Error in toggleVote:",i),i}})}hasVoted(e){return y(this,null,function*(){let t=this.auth.currentUser;if(!t)return!1;try{let r=Pe(this.firestore,`stories/${e}/votes/${t.uid}`);return(yield gt(r)).exists()}catch(r){return console.error("\u274C Error checking vote status:",r),!1}})}countVotes(e){return y(this,null,function*(){try{let t=Pe(this.firestore,`stories/${e}`),r=yield gt(t);return r.exists()?r.data()?.stats?.voteCount??0:0}catch(t){return console.error("\u274C Error counting votes:",t),0}})}testPermissions(e){return y(this,null,function*(){let t=this.auth.currentUser;if(t){try{let r=Pe(this.firestore,`stories/${e}/votes/${t.uid}`),i=yield gt(r)}catch(r){console.error("\u274C Cannot read vote document:",r)}try{let r=Pe(this.firestore,`stories/${e}`),i=yield gt(r)}catch(r){console.error("\u274C Cannot read story document:",r)}}})}static \u0275fac=function(t){return new(t||n)};static \u0275prov=Q({token:n,factory:n.\u0275fac,providedIn:"root"})};var I2=(()=>{class n{_renderer;_elementRef;onChange=t=>{};onTouched=()=>{};constructor(t,r){this._renderer=t,this._elementRef=r}setProperty(t,r){this._renderer.setProperty(this._elementRef.nativeElement,t,r)}registerOnTouched(t){this.onTouched=t}registerOnChange(t){this.onChange=t}setDisabledState(t){this.setProperty("disabled",t)}static \u0275fac=function(r){return new(r||n)(ne(er),ne(on))};static \u0275dir=Ze({type:n})}return n})(),UI=(()=>{class n extends I2{static \u0275fac=(()=>{let t;return function(i){return(t||(t=Ir(n)))(i||n)}})();static \u0275dir=Ze({type:n,features:[Dn]})}return n})(),Vm=new J("");var rz={provide:Vm,useExisting:Fn(()=>un),multi:!0};function iz(){let n=nr()?nr().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}var oz=new J(""),un=(()=>{class n extends I2{_compositionMode;_composing=!1;constructor(t,r,i){super(t,r),this._compositionMode=i,this._compositionMode==null&&(this._compositionMode=!iz())}writeValue(t){let r=t??"";this.setProperty("value",r)}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}static \u0275fac=function(r){return new(r||n)(ne(er),ne(on),ne(oz,8))};static \u0275dir=Ze({type:n,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(r,i){r&1&&B("input",function(s){return i._handleInput(s.target.value)})("blur",function(){return i.onTouched()})("compositionstart",function(){return i._compositionStart()})("compositionend",function(s){return i._compositionEnd(s.target.value)})},standalone:!1,features:[Xr([rz]),Dn]})}return n})();function sz(n){return n==null||jI(n)===0}function jI(n){return n==null?null:Array.isArray(n)||typeof n=="string"?n.length:n instanceof Set?n.size:null}var jd=new J(""),S2=new J("");function az(n){return sz(n.value)?{required:!0}:null}function cz(n){return e=>{let t=e.value?.length??jI(e.value);return t===null||t===0?null:t<n?{minlength:{requiredLength:n,actualLength:t}}:null}}function lz(n){return e=>{let t=e.value?.length??jI(e.value);return t!==null&&t>n?{maxlength:{requiredLength:n,actualLength:t}}:null}}function g2(n){return null}function T2(n){return n!=null}function D2(n){return Eo(n)?Ye(n):n}function x2(n){let e={};return n.forEach(t=>{e=t!=null?H(H({},e),t):e}),Object.keys(e).length===0?null:e}function M2(n,e){return e.map(t=>t(n))}function uz(n){return!n.validate}function P2(n){return n.map(e=>uz(e)?e:t=>e.validate(t))}function dz(n){if(!n)return null;let e=n.filter(T2);return e.length==0?null:function(t){return x2(M2(t,e))}}function BI(n){return n!=null?dz(P2(n)):null}function fz(n){if(!n)return null;let e=n.filter(T2);return e.length==0?null:function(t){let r=M2(t,e).map(D2);return Wv(r).pipe(Ce(x2))}}function $I(n){return n!=null?fz(P2(n)):null}function m2(n,e){return n===null?[e]:Array.isArray(n)?[...n,e]:[n,e]}function hz(n){return n._rawValidators}function pz(n){return n._rawAsyncValidators}function FI(n){return n?Array.isArray(n)?n:[n]:[]}function km(n,e){return Array.isArray(n)?n.includes(e):n===e}function v2(n,e){let t=FI(e);return FI(n).forEach(i=>{km(t,i)||t.push(i)}),t}function _2(n,e){return FI(e).filter(t=>!km(n,t))}var Om=class{get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_composedValidatorFn;_composedAsyncValidatorFn;_rawValidators=[];_rawAsyncValidators=[];_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=BI(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=$I(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_onDestroyCallbacks=[];_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e=void 0){this.control&&this.control.reset(e)}hasError(e,t){return this.control?this.control.hasError(e,t):!1}getError(e,t){return this.control?this.control.getError(e,t):null}},rl=class extends Om{name;get formDirective(){return null}get path(){return null}},Ud=class extends Om{_parent=null;name=null;valueAccessor=null},Rm=class{_cd;constructor(e){this._cd=e}get isTouched(){return this._cd?.control?._touched?.(),!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return this._cd?.control?._pristine?.(),!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return this._cd?.control?._status?.(),!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return this._cd?._submitted?.(),!!this._cd?.submitted}},gz={"[class.ng-untouched]":"isUntouched","[class.ng-touched]":"isTouched","[class.ng-pristine]":"isPristine","[class.ng-dirty]":"isDirty","[class.ng-valid]":"isValid","[class.ng-invalid]":"isInvalid","[class.ng-pending]":"isPending"},Zve=re(H({},gz),{"[class.ng-submitted]":"isSubmitted"}),kn=(()=>{class n extends Rm{constructor(t){super(t)}static \u0275fac=function(r){return new(r||n)(ne(Ud,2))};static \u0275dir=Ze({type:n,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(r,i){r&2&&he("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)},standalone:!1,features:[Dn]})}return n})(),il=(()=>{class n extends Rm{constructor(t){super(t)}static \u0275fac=function(r){return new(r||n)(ne(rl,10))};static \u0275dir=Ze({type:n,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(r,i){r&2&&he("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)("ng-submitted",i.isSubmitted)},standalone:!1,features:[Dn]})}return n})();var Rd="VALID",Am="INVALID",tl="PENDING",Nd="DISABLED",Jo=class{},Nm=class extends Jo{value;source;constructor(e,t){super(),this.value=e,this.source=t}},Ld=class extends Jo{pristine;source;constructor(e,t){super(),this.pristine=e,this.source=t}},Vd=class extends Jo{touched;source;constructor(e,t){super(),this.touched=e,this.source=t}},nl=class extends Jo{status;source;constructor(e,t){super(),this.status=e,this.source=t}},LI=class extends Jo{source;constructor(e){super(),this.source=e}},VI=class extends Jo{source;constructor(e){super(),this.source=e}};function A2(n){return(Um(n)?n.validators:n)||null}function mz(n){return Array.isArray(n)?BI(n):n||null}function k2(n,e){return(Um(e)?e.asyncValidators:n)||null}function vz(n){return Array.isArray(n)?$I(n):n||null}function Um(n){return n!=null&&!Array.isArray(n)&&typeof n=="object"}function _z(n,e,t){let r=n.controls;if(!(e?Object.keys(r):r).length)throw new X(1e3,"");if(!r[t])throw new X(1001,"")}function yz(n,e,t){n._forEachChild((r,i)=>{if(t[i]===void 0)throw new X(1002,"")})}var Fm=class{_pendingDirty=!1;_hasOwnPendingAsyncValidator=null;_pendingTouched=!1;_onCollectionChange=()=>{};_updateOn;_parent=null;_asyncValidationSubscription;_composedValidatorFn;_composedAsyncValidatorFn;_rawValidators;_rawAsyncValidators;value;constructor(e,t){this._assignValidators(e),this._assignAsyncValidators(t)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get status(){return Ft(this.statusReactive)}set status(e){Ft(()=>this.statusReactive.set(e))}_status=oc(()=>this.statusReactive());statusReactive=Tn(void 0);get valid(){return this.status===Rd}get invalid(){return this.status===Am}get pending(){return this.status==tl}get disabled(){return this.status===Nd}get enabled(){return this.status!==Nd}errors;get pristine(){return Ft(this.pristineReactive)}set pristine(e){Ft(()=>this.pristineReactive.set(e))}_pristine=oc(()=>this.pristineReactive());pristineReactive=Tn(!0);get dirty(){return!this.pristine}get touched(){return Ft(this.touchedReactive)}set touched(e){Ft(()=>this.touchedReactive.set(e))}_touched=oc(()=>this.touchedReactive());touchedReactive=Tn(!1);get untouched(){return!this.touched}_events=new Ke;events=this._events.asObservable();valueChanges;statusChanges;get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._assignValidators(e)}setAsyncValidators(e){this._assignAsyncValidators(e)}addValidators(e){this.setValidators(v2(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(v2(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(_2(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(_2(e,this._rawAsyncValidators))}hasValidator(e){return km(this._rawValidators,e)}hasAsyncValidator(e){return km(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){let t=this.touched===!1;this.touched=!0;let r=e.sourceControl??this;this._parent&&!e.onlySelf&&this._parent.markAsTouched(re(H({},e),{sourceControl:r})),t&&e.emitEvent!==!1&&this._events.next(new Vd(!0,r))}markAllAsDirty(e={}){this.markAsDirty({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:this}),this._forEachChild(t=>t.markAllAsDirty(e))}markAllAsTouched(e={}){this.markAsTouched({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:this}),this._forEachChild(t=>t.markAllAsTouched(e))}markAsUntouched(e={}){let t=this.touched===!0;this.touched=!1,this._pendingTouched=!1;let r=e.sourceControl??this;this._forEachChild(i=>{i.markAsUntouched({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:r})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e,r),t&&e.emitEvent!==!1&&this._events.next(new Vd(!1,r))}markAsDirty(e={}){let t=this.pristine===!0;this.pristine=!1;let r=e.sourceControl??this;this._parent&&!e.onlySelf&&this._parent.markAsDirty(re(H({},e),{sourceControl:r})),t&&e.emitEvent!==!1&&this._events.next(new Ld(!1,r))}markAsPristine(e={}){let t=this.pristine===!1;this.pristine=!0,this._pendingDirty=!1;let r=e.sourceControl??this;this._forEachChild(i=>{i.markAsPristine({onlySelf:!0,emitEvent:e.emitEvent})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e,r),t&&e.emitEvent!==!1&&this._events.next(new Ld(!0,r))}markAsPending(e={}){this.status=tl;let t=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new nl(this.status,t)),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.markAsPending(re(H({},e),{sourceControl:t}))}disable(e={}){let t=this._parentMarkedDirty(e.onlySelf);this.status=Nd,this.errors=null,this._forEachChild(i=>{i.disable(re(H({},e),{onlySelf:!0}))}),this._updateValue();let r=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new Nm(this.value,r)),this._events.next(new nl(this.status,r)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(re(H({},e),{skipPristineCheck:t}),this),this._onDisabledChange.forEach(i=>i(!0))}enable(e={}){let t=this._parentMarkedDirty(e.onlySelf);this.status=Rd,this._forEachChild(r=>{r.enable(re(H({},e),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors(re(H({},e),{skipPristineCheck:t}),this),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(e,t){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine({},t),this._parent._updateTouched({},t))}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){if(this._setInitialStatus(),this._updateValue(),this.enabled){let r=this._cancelExistingSubscription();this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===Rd||this.status===tl)&&this._runAsyncValidator(r,e.emitEvent)}let t=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new Nm(this.value,t)),this._events.next(new nl(this.status,t)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(re(H({},e),{sourceControl:t}))}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?Nd:Rd}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e,t){if(this.asyncValidator){this.status=tl,this._hasOwnPendingAsyncValidator={emitEvent:t!==!1,shouldHaveEmitted:e!==!1};let r=D2(this.asyncValidator(this));this._asyncValidationSubscription=r.subscribe(i=>{this._hasOwnPendingAsyncValidator=null,this.setErrors(i,{emitEvent:t,shouldHaveEmitted:e})})}}_cancelExistingSubscription(){if(this._asyncValidationSubscription){this._asyncValidationSubscription.unsubscribe();let e=(this._hasOwnPendingAsyncValidator?.emitEvent||this._hasOwnPendingAsyncValidator?.shouldHaveEmitted)??!1;return this._hasOwnPendingAsyncValidator=null,e}return!1}setErrors(e,t={}){this.errors=e,this._updateControlsErrors(t.emitEvent!==!1,this,t.shouldHaveEmitted)}get(e){let t=e;return t==null||(Array.isArray(t)||(t=t.split(".")),t.length===0)?null:t.reduce((r,i)=>r&&r._find(i),this)}getError(e,t){let r=t?this.get(t):this;return r&&r.errors?r.errors[e]:null}hasError(e,t){return!!this.getError(e,t)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e,t,r){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),(e||r)&&this._events.next(new nl(this.status,t)),this._parent&&this._parent._updateControlsErrors(e,t,r)}_initObservables(){this.valueChanges=new nt,this.statusChanges=new nt}_calculateStatus(){return this._allControlsDisabled()?Nd:this.errors?Am:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(tl)?tl:this._anyControlsHaveStatus(Am)?Am:Rd}_anyControlsHaveStatus(e){return this._anyControls(t=>t.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e,t){let r=!this._anyControlsDirty(),i=this.pristine!==r;this.pristine=r,this._parent&&!e.onlySelf&&this._parent._updatePristine(e,t),i&&this._events.next(new Ld(this.pristine,t))}_updateTouched(e={},t){this.touched=this._anyControlsTouched(),this._events.next(new Vd(this.touched,t)),this._parent&&!e.onlySelf&&this._parent._updateTouched(e,t)}_onDisabledChange=[];_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){Um(e)&&e.updateOn!=null&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){let t=this._parent&&this._parent.dirty;return!e&&!!t&&!this._parent._anyControlsDirty()}_find(e){return null}_assignValidators(e){this._rawValidators=Array.isArray(e)?e.slice():e,this._composedValidatorFn=mz(this._rawValidators)}_assignAsyncValidators(e){this._rawAsyncValidators=Array.isArray(e)?e.slice():e,this._composedAsyncValidatorFn=vz(this._rawAsyncValidators)}},Lm=class extends Fm{constructor(e,t,r){super(A2(t),k2(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}controls;registerControl(e,t){return this.controls[e]?this.controls[e]:(this.controls[e]=t,t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange),t)}addControl(e,t,r={}){this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}removeControl(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}setControl(e,t,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],t&&this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,t={}){yz(this,!0,e),Object.keys(e).forEach(r=>{_z(this,!0,r),this.controls[r].setValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){e!=null&&(Object.keys(e).forEach(r=>{let i=this.controls[r];i&&i.patchValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e={},t={}){this._forEachChild((r,i)=>{r.reset(e?e[i]:null,{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t,this),this._updateTouched(t,this),this.updateValueAndValidity(t)}getRawValue(){return this._reduceChildren({},(e,t,r)=>(e[r]=t.getRawValue(),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(t,r)=>r._syncPendingControls()?!0:t);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){Object.keys(this.controls).forEach(t=>{let r=this.controls[t];r&&e(r,t)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(let[t,r]of Object.entries(this.controls))if(this.contains(t)&&e(r))return!0;return!1}_reduceValue(){let e={};return this._reduceChildren(e,(t,r,i)=>((r.enabled||this.disabled)&&(t[i]=r.value),t))}_reduceChildren(e,t){let r=e;return this._forEachChild((i,o)=>{r=t(r,i,o)}),r}_allControlsDisabled(){for(let e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(e){return this.controls.hasOwnProperty(e)?this.controls[e]:null}};var HI=new J("",{providedIn:"root",factory:()=>zI}),zI="always";function bz(n,e){return[...e.path,n]}function O2(n,e,t=zI){R2(n,e),e.valueAccessor.writeValue(n.value),(n.disabled||t==="always")&&e.valueAccessor.setDisabledState?.(n.disabled),Ez(n,e),Iz(n,e),Cz(n,e),wz(n,e)}function y2(n,e){n.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function wz(n,e){if(e.valueAccessor.setDisabledState){let t=r=>{e.valueAccessor.setDisabledState(r)};n.registerOnDisabledChange(t),e._registerOnDestroy(()=>{n._unregisterOnDisabledChange(t)})}}function R2(n,e){let t=hz(n);e.validator!==null?n.setValidators(m2(t,e.validator)):typeof t=="function"&&n.setValidators([t]);let r=pz(n);e.asyncValidator!==null?n.setAsyncValidators(m2(r,e.asyncValidator)):typeof r=="function"&&n.setAsyncValidators([r]);let i=()=>n.updateValueAndValidity();y2(e._rawValidators,i),y2(e._rawAsyncValidators,i)}function Ez(n,e){e.valueAccessor.registerOnChange(t=>{n._pendingValue=t,n._pendingChange=!0,n._pendingDirty=!0,n.updateOn==="change"&&N2(n,e)})}function Cz(n,e){e.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,n.updateOn==="blur"&&n._pendingChange&&N2(n,e),n.updateOn!=="submit"&&n.markAsTouched()})}function N2(n,e){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}function Iz(n,e){let t=(r,i)=>{e.valueAccessor.writeValue(r),i&&e.viewToModelUpdate(r)};n.registerOnChange(t),e._registerOnDestroy(()=>{n._unregisterOnChange(t)})}function Sz(n,e){n==null,R2(n,e)}function Tz(n,e){if(!n.hasOwnProperty("model"))return!1;let t=n.model;return t.isFirstChange()?!0:!Object.is(e,t.currentValue)}function Dz(n){return Object.getPrototypeOf(n.constructor)===UI}function xz(n,e){n._syncPendingControls(),e.forEach(t=>{let r=t.control;r.updateOn==="submit"&&r._pendingChange&&(t.viewToModelUpdate(r._pendingValue),r._pendingChange=!1)})}function Mz(n,e){if(!e)return null;Array.isArray(e);let t,r,i;return e.forEach(o=>{o.constructor===un?t=o:Dz(o)?r=o:i=o}),i||r||t||null}var Pz={provide:rl,useExisting:Fn(()=>fa)},Fd=Promise.resolve(),fa=(()=>{class n extends rl{callSetDisabledState;get submitted(){return Ft(this.submittedReactive)}_submitted=oc(()=>this.submittedReactive());submittedReactive=Tn(!1);_directives=new Set;form;ngSubmit=new nt;options;constructor(t,r,i){super(),this.callSetDisabledState=i,this.form=new Lm({},BI(t),$I(r))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(t){Fd.then(()=>{let r=this._findContainer(t.path);t.control=r.registerControl(t.name,t.control),O2(t.control,t,this.callSetDisabledState),t.control.updateValueAndValidity({emitEvent:!1}),this._directives.add(t)})}getControl(t){return this.form.get(t.path)}removeControl(t){Fd.then(()=>{let r=this._findContainer(t.path);r&&r.removeControl(t.name),this._directives.delete(t)})}addFormGroup(t){Fd.then(()=>{let r=this._findContainer(t.path),i=new Lm({});Sz(i,t),r.registerControl(t.name,i),i.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(t){Fd.then(()=>{let r=this._findContainer(t.path);r&&r.removeControl(t.name)})}getFormGroup(t){return this.form.get(t.path)}updateModel(t,r){Fd.then(()=>{this.form.get(t.path).setValue(r)})}setValue(t){this.control.setValue(t)}onSubmit(t){return this.submittedReactive.set(!0),xz(this.form,this._directives),this.ngSubmit.emit(t),this.form._events.next(new LI(this.control)),t?.target?.method==="dialog"}onReset(){this.resetForm()}resetForm(t=void 0){this.form.reset(t),this.submittedReactive.set(!1),this.form._events.next(new VI(this.form))}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.form._updateOn=this.options.updateOn)}_findContainer(t){return t.pop(),t.length?this.form.get(t):this.form}static \u0275fac=function(r){return new(r||n)(ne(jd,10),ne(S2,10),ne(HI,8))};static \u0275dir=Ze({type:n,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(r,i){r&1&&B("submit",function(s){return i.onSubmit(s)})("reset",function(){return i.onReset()})},inputs:{options:[0,"ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],standalone:!1,features:[Xr([Pz]),Dn]})}return n})();function b2(n,e){let t=n.indexOf(e);t>-1&&n.splice(t,1)}function w2(n){return typeof n=="object"&&n!==null&&Object.keys(n).length===2&&"value"in n&&"disabled"in n}var Az=class extends Fm{defaultValue=null;_onChange=[];_pendingValue;_pendingChange=!1;constructor(e=null,t,r){super(A2(t),k2(r,t)),this._applyFormState(e),this._setUpdateStrategy(t),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),Um(t)&&(t.nonNullable||t.initialValueIsDefault)&&(w2(e)?this.defaultValue=e.value:this.defaultValue=e)}setValue(e,t={}){this.value=this._pendingValue=e,this._onChange.length&&t.emitModelToViewChange!==!1&&this._onChange.forEach(r=>r(this.value,t.emitViewToModelChange!==!1)),this.updateValueAndValidity(t)}patchValue(e,t={}){this.setValue(e,t)}reset(e=this.defaultValue,t={}){this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){b2(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){b2(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return this.updateOn==="submit"&&(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),this._pendingChange)?(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),!0):!1}_applyFormState(e){w2(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}};var kz={provide:Ud,useExisting:Fn(()=>Cn)},E2=Promise.resolve(),Cn=(()=>{class n extends Ud{_changeDetectorRef;callSetDisabledState;control=new Az;static ngAcceptInputType_isDisabled;_registered=!1;viewModel;name="";isDisabled;model;options;update=new nt;constructor(t,r,i,o,s,a){super(),this._changeDetectorRef=s,this.callSetDisabledState=a,this._parent=t,this._setValidators(r),this._setAsyncValidators(i),this.valueAccessor=Mz(this,o)}ngOnChanges(t){if(this._checkForErrors(),!this._registered||"name"in t){if(this._registered&&(this._checkName(),this.formDirective)){let r=t.name.previousValue;this.formDirective.removeControl({name:r,path:this._getPath(r)})}this._setUpControl()}"isDisabled"in t&&this._updateDisabled(t),Tz(t,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!!(this.options&&this.options.standalone)}_setUpStandalone(){O2(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._checkName()}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),!this._isStandalone()&&this.name}_updateValue(t){E2.then(()=>{this.control.setValue(t,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(t){let r=t.isDisabled.currentValue,i=r!==0&&Io(r);E2.then(()=>{i&&!this.control.disabled?this.control.disable():!i&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(t){return this._parent?bz(t,this._parent):[t]}static \u0275fac=function(r){return new(r||n)(ne(rl,9),ne(jd,10),ne(S2,10),ne(Vm,10),ne(Oi,8),ne(HI,8))};static \u0275dir=Ze({type:n,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:[0,"disabled","isDisabled"],model:[0,"ngModel","model"],options:[0,"ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],standalone:!1,features:[Xr([kz]),Dn,Yr]})}return n})();var ol=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275dir=Ze({type:n,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""],standalone:!1})}return n})();var Oz={provide:Vm,useExisting:Fn(()=>jm),multi:!0};function F2(n,e){return n==null?`${e}`:(e&&typeof e=="object"&&(e="Object"),`${n}: ${e}`.slice(0,50))}function Rz(n){return n.split(":")[0]}var jm=(()=>{class n extends UI{value;_optionMap=new Map;_idCounter=0;set compareWith(t){this._compareWith=t}_compareWith=Object.is;appRefInjector=k(ki).injector;destroyRef=k(Er);cdr=k(Oi);_queuedWrite=!1;_writeValueAfterRender(){this._queuedWrite||this.appRefInjector.destroyed||(this._queuedWrite=!0,du({write:()=>{this.destroyRef.destroyed||(this._queuedWrite=!1,this.writeValue(this.value))}},{injector:this.appRefInjector}))}writeValue(t){this.cdr.markForCheck(),this.value=t;let r=this._getOptionId(t),i=F2(r,t);this.setProperty("value",i)}registerOnChange(t){this.onChange=r=>{this.value=this._getOptionValue(r),t(this.value)}}_registerOption(){return(this._idCounter++).toString()}_getOptionId(t){for(let r of this._optionMap.keys())if(this._compareWith(this._optionMap.get(r),t))return r;return null}_getOptionValue(t){let r=Rz(t);return this._optionMap.has(r)?this._optionMap.get(r):t}static \u0275fac=(()=>{let t;return function(i){return(t||(t=Ir(n)))(i||n)}})();static \u0275dir=Ze({type:n,selectors:[["select","formControlName","",3,"multiple",""],["select","formControl","",3,"multiple",""],["select","ngModel","",3,"multiple",""]],hostBindings:function(r,i){r&1&&B("change",function(s){return i.onChange(s.target.value)})("blur",function(){return i.onTouched()})},inputs:{compareWith:"compareWith"},standalone:!1,features:[Xr([Oz]),Dn]})}return n})(),L2=(()=>{class n{_element;_renderer;_select;id;constructor(t,r,i){this._element=t,this._renderer=r,this._select=i,this._select&&(this.id=this._select._registerOption())}set ngValue(t){this._select!=null&&(this._select._optionMap.set(this.id,t),this._setElementValue(F2(this.id,t)),this._select._writeValueAfterRender())}set value(t){this._setElementValue(t),this._select&&this._select._writeValueAfterRender()}_setElementValue(t){this._renderer.setProperty(this._element.nativeElement,"value",t)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select._writeValueAfterRender())}static \u0275fac=function(r){return new(r||n)(ne(on),ne(er),ne(jm,9))};static \u0275dir=Ze({type:n,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"},standalone:!1})}return n})(),Nz={provide:Vm,useExisting:Fn(()=>V2),multi:!0};function C2(n,e){return n==null?`${e}`:(typeof e=="string"&&(e=`'${e}'`),e&&typeof e=="object"&&(e="Object"),`${n}: ${e}`.slice(0,50))}function Fz(n){return n.split(":")[0]}var V2=(()=>{class n extends UI{value;_optionMap=new Map;_idCounter=0;set compareWith(t){this._compareWith=t}_compareWith=Object.is;writeValue(t){this.value=t;let r;if(Array.isArray(t)){let i=t.map(o=>this._getOptionId(o));r=(o,s)=>{o._setSelected(i.indexOf(s.toString())>-1)}}else r=(i,o)=>{i._setSelected(!1)};this._optionMap.forEach(r)}registerOnChange(t){this.onChange=r=>{let i=[],o=r.selectedOptions;if(o!==void 0){let s=o;for(let a=0;a<s.length;a++){let c=s[a],u=this._getOptionValue(c.value);i.push(u)}}else{let s=r.options;for(let a=0;a<s.length;a++){let c=s[a];if(c.selected){let u=this._getOptionValue(c.value);i.push(u)}}}this.value=i,t(i)}}_registerOption(t){let r=(this._idCounter++).toString();return this._optionMap.set(r,t),r}_getOptionId(t){for(let r of this._optionMap.keys())if(this._compareWith(this._optionMap.get(r)._value,t))return r;return null}_getOptionValue(t){let r=Fz(t);return this._optionMap.has(r)?this._optionMap.get(r)._value:t}static \u0275fac=(()=>{let t;return function(i){return(t||(t=Ir(n)))(i||n)}})();static \u0275dir=Ze({type:n,selectors:[["select","multiple","","formControlName",""],["select","multiple","","formControl",""],["select","multiple","","ngModel",""]],hostBindings:function(r,i){r&1&&B("change",function(s){return i.onChange(s.target)})("blur",function(){return i.onTouched()})},inputs:{compareWith:"compareWith"},standalone:!1,features:[Xr([Nz]),Dn]})}return n})(),U2=(()=>{class n{_element;_renderer;_select;id;_value;constructor(t,r,i){this._element=t,this._renderer=r,this._select=i,this._select&&(this.id=this._select._registerOption(this))}set ngValue(t){this._select!=null&&(this._value=t,this._setElementValue(C2(this.id,t)),this._select.writeValue(this._select.value))}set value(t){this._select?(this._value=t,this._setElementValue(C2(this.id,t)),this._select.writeValue(this._select.value)):this._setElementValue(t)}_setElementValue(t){this._renderer.setProperty(this._element.nativeElement,"value",t)}_setSelected(t){this._renderer.setProperty(this._element.nativeElement,"selected",t)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}static \u0275fac=function(r){return new(r||n)(ne(on),ne(er),ne(V2,9))};static \u0275dir=Ze({type:n,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"},standalone:!1})}return n})();function j2(n){return typeof n=="number"?n:parseInt(n,10)}var qI=(()=>{class n{_validator=g2;_onChange;_enabled;ngOnChanges(t){if(this.inputName in t){let r=this.normalizeInput(t[this.inputName].currentValue);this._enabled=this.enabled(r),this._validator=this._enabled?this.createValidator(r):g2,this._onChange&&this._onChange()}}validate(t){return this._validator(t)}registerOnValidatorChange(t){this._onChange=t}enabled(t){return t!=null}static \u0275fac=function(r){return new(r||n)};static \u0275dir=Ze({type:n,features:[Yr]})}return n})();var Lz={provide:jd,useExisting:Fn(()=>jr),multi:!0};var jr=(()=>{class n extends qI{required;inputName="required";normalizeInput=Io;createValidator=t=>az;enabled(t){return t}static \u0275fac=(()=>{let t;return function(i){return(t||(t=Ir(n)))(i||n)}})();static \u0275dir=Ze({type:n,selectors:[["","required","","formControlName","",3,"type","checkbox"],["","required","","formControl","",3,"type","checkbox"],["","required","","ngModel","",3,"type","checkbox"]],hostVars:1,hostBindings:function(r,i){r&2&&sn("required",i._enabled?"":null)},inputs:{required:"required"},standalone:!1,features:[Xr([Lz]),Dn]})}return n})();var Vz={provide:jd,useExisting:Fn(()=>WI),multi:!0},WI=(()=>{class n extends qI{minlength;inputName="minlength";normalizeInput=t=>j2(t);createValidator=t=>cz(t);static \u0275fac=(()=>{let t;return function(i){return(t||(t=Ir(n)))(i||n)}})();static \u0275dir=Ze({type:n,selectors:[["","minlength","","formControlName",""],["","minlength","","formControl",""],["","minlength","","ngModel",""]],hostVars:1,hostBindings:function(r,i){r&2&&sn("minlength",i._enabled?i.minlength:null)},inputs:{minlength:"minlength"},standalone:!1,features:[Xr([Vz]),Dn]})}return n})(),Uz={provide:jd,useExisting:Fn(()=>ha),multi:!0},ha=(()=>{class n extends qI{maxlength;inputName="maxlength";normalizeInput=t=>j2(t);createValidator=t=>lz(t);static \u0275fac=(()=>{let t;return function(i){return(t||(t=Ir(n)))(i||n)}})();static \u0275dir=Ze({type:n,selectors:[["","maxlength","","formControlName",""],["","maxlength","","formControl",""],["","maxlength","","ngModel",""]],hostVars:1,hostBindings:function(r,i){r&2&&sn("maxlength",i._enabled?i.maxlength:null)},inputs:{maxlength:"maxlength"},standalone:!1,features:[Xr([Uz]),Dn]})}return n})();var jz=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275mod=Tr({type:n});static \u0275inj=Gn({})}return n})();var On=(()=>{class n{static withConfig(t){return{ngModule:n,providers:[{provide:HI,useValue:t.callSetDisabledState??zI}]}}static \u0275fac=function(r){return new(r||n)};static \u0275mod=Tr({type:n});static \u0275inj=Gn({imports:[jz]})}return n})();var sl=class n{firestore=k(lt);toggleBookmark(e){return y(this,null,function*(){let t=Pe(this.firestore,`bookmarks/${e.userId}_${e.storyId}`);(yield gt(t)).exists()?yield Qi(t):yield dr(t,e)})}getUserBookmarks(e){return y(this,null,function*(){let t=pt(this.firestore,"bookmarks"),r=En(t,Pt("userId","==",e));return(yield wn(r)).docs.map(o=>o.data())})}static \u0275fac=function(t){return new(t||n)};static \u0275prov=Q({token:n,factory:n.\u0275fac,providedIn:"root"})};var $z=()=>[1,2,3,4,5],B2=n=>["/profile/",n],$2=n=>["/story/",n];function Hz(n,e){if(n&1){let t=Z();h(0,"button",22),B("click",function(){N(t);let i=I();return F(i.clearSearch())}),ce(),h(1,"svg",23),z(2,"line",24)(3,"line",25),p()()}}function zz(n,e){if(n&1){let t=Z();h(0,"button",28),B("click",function(){let i=N(t).$implicit,o=I(2);return F(o.selectCategory(i))}),b(1),h(2,"span",34),b(3),p()()}if(n&2){let t=e.$implicit,r=I(2);he("active",r.selectedCategory===t),v(),ee(" ",t," "),v(2),K(r.getCategoryCount(t))}}function qz(n,e){if(n&1){let t=Z();h(0,"div",26)(1,"div",27)(2,"button",28),B("click",function(){N(t);let i=I();return F(i.selectCategory(""))}),b(3," All Stories "),p(),j(4,zz,4,4,"button",29),p(),h(5,"button",30),B("click",function(){N(t);let i=I();return F(i.scrollSlider(-1))}),ce(),h(6,"svg",23),z(7,"polyline",31),p()(),Ae(),h(8,"button",32),B("click",function(){N(t);let i=I();return F(i.scrollSlider(1))}),ce(),h(9,"svg",23),z(10,"polyline",33),p()()()}if(n&2){let t=I();v(2),he("active",t.selectedCategory===""),v(2),C("ngForOf",t.availableCategories.slice(0,6))}}function Wz(n,e){n&1&&(h(0,"div",37)(1,"div",38),z(2,"div",39),h(3,"div",40),z(4,"div",41)(5,"div",42),p()(),h(6,"div",43),z(7,"div",44)(8,"div",45)(9,"div",46)(10,"div",46)(11,"div",47),p()())}function Gz(n,e){n&1&&(h(0,"div",35),j(1,Wz,12,0,"div",36),p()),n&2&&(v(),C("ngForOf",Jr(1,$z)))}function Kz(n,e){if(n&1&&z(0,"img",84),n&2){let t=I().$implicit;C("src",t.authorPhotoURL,ct)("alt",t.authorName)}}function Yz(n,e){if(n&1&&(h(0,"span"),b(1),p()),n&2){let t=I().$implicit,r=I(2);v(),K(r.getAuthorInitials(t.authorName))}}function Qz(n,e){n&1&&(h(0,"span",59),b(1,"\u2022"),p())}function Zz(n,e){if(n&1&&(h(0,"span",85),b(1),p()),n&2){let t=I().$implicit,r=I(2);v(),K(r.getLanguageLabel(t.language))}}function Xz(n,e){if(n&1){let t=Z();h(0,"button",86),B("click",function(i){N(t);let o=I().$implicit,s=I(2);return F(s.toggleBookmark(i,o))}),ce(),h(1,"svg",23),z(2,"path",87),p()()}if(n&2){let t=I().$implicit,r=I(2);he("bookmarked",r.isBookmarked(t.id))}}function Jz(n,e){if(n&1){let t=Z();h(0,"article",50)(1,"div",51)(2,"div",52)(3,"div",53),j(4,Kz,1,2,"img",54)(5,Yz,2,1,"span",55),p(),h(6,"div",56)(7,"h3",57),b(8),p(),h(9,"div",58)(10,"span"),b(11),p(),h(12,"span",59),b(13,"\u2022"),p(),h(14,"span"),b(15),p(),j(16,Qz,2,0,"span",60)(17,Zz,2,1,"span",61),p()()(),j(18,Xz,3,2,"button",62),p(),h(19,"div",63)(20,"div",64)(21,"span",65),b(22),p(),h(23,"h2",66),b(24),p()(),h(25,"p",67),b(26),p(),h(27,"div",68)(28,"span",69),b(29),p()()(),h(30,"div",70)(31,"div",71)(32,"button",72),ce(),h(33,"svg",73),z(34,"path",74),p(),Ae(),h(35,"span"),b(36),p()(),h(37,"button",75),ce(),h(38,"svg",23),z(39,"path",76),p(),Ae(),h(40,"span"),b(41),p()(),h(42,"button",77),B("click",function(i){let o=N(t).$implicit,s=I(2);return F(s.shareStory(i,o))}),ce(),h(43,"svg",23),z(44,"circle",78)(45,"circle",79)(46,"circle",80)(47,"line",81)(48,"line",82),p(),Ae(),h(49,"span"),b(50,"Share"),p()()(),h(51,"button",83),b(52,"Read Story"),p()()()}if(n&2){let t=e.$implicit,r=I(2);v(3),C("routerLink",Vn(21,B2,t.authorId)),v(),C("ngIf",t.authorPhotoURL),v(),C("ngIf",!t.authorPhotoURL),v(2),C("routerLink",Vn(23,B2,t.authorId)),v(),K(t.authorName),v(3),K(r.formatDate(t.createdAt)),v(4),ee("",r.getEstimatedReadTime(t.content)," min read"),v(),C("ngIf",t.language),v(),C("ngIf",t.language),v(),C("ngIf",r.currentUser),v(),C("routerLink",Vn(25,$2,t.id)),v(3),K(t.emoji),v(2),K(t.title),v(2),ee(" ",r.getContentSnippet(t.content,180)," "),v(2),sn("data-category",t.category),v(),ee(" ",t.category," "),v(3),C("disabled",!0),v(4),K(r.formatCount(t.stats.voteCount||0)),v(),C("disabled",!0),v(4),K(r.formatCount(t.stats.commentCount||0)),v(10),C("routerLink",Vn(27,$2,t.id))}}function eq(n,e){if(n&1&&(h(0,"div",48),j(1,Jz,53,29,"article",49),p()),n&2){let t=I();v(),C("ngForOf",t.filteredStories)("ngForTrackBy",t.trackByStoryId)}}function tq(n,e){if(n&1){let t=Z();h(0,"div",88)(1,"div",89)(2,"span",90),b(3,"\u{1F319}"),p()(),h(4,"h3"),b(5,"No stories found"),p(),h(6,"p"),b(7,"Try adjusting your search or explore different categories"),p(),h(8,"button",91),B("click",function(){N(t);let i=I();return F(i.clearAllFilters())}),b(9," Explore All Stories "),p()()}}function nq(n,e){n&1&&(h(0,"span"),b(1,"Show More Stories"),p())}function rq(n,e){n&1&&(h(0,"div",95),z(1,"span")(2,"span")(3,"span"),p())}function iq(n,e){if(n&1){let t=Z();h(0,"div",92)(1,"button",93),B("click",function(){N(t);let i=I();return F(i.loadMoreStories())}),j(2,nq,2,0,"span",55)(3,rq,4,0,"div",94),p()()}if(n&2){let t=I();v(),C("disabled",t.isLoadingMore),v(),C("ngIf",!t.isLoadingMore),v(),C("ngIf",t.isLoadingMore)}}function oq(n,e){if(n&1){let t=Z();h(0,"div",96)(1,"div",97),ce(),h(2,"svg",23),z(3,"circle",98)(4,"line",99)(5,"line",100),p(),Ae(),h(6,"span"),b(7),p()(),h(8,"button",101),B("click",function(){N(t);let i=I();return F(i.errorMessage="")}),b(9,"\xD7"),p()()}if(n&2){let t=I();he("show",t.errorMessage),v(7),K(t.errorMessage)}}var Bd=class n{storyService=k(gi);voteService=k(Xo);commentService=k(el);bookmarkService=k(sl);authService=k(ot);profileService=k(fr);destroy$=new Ke;stories=[];isLoading=!0;isLoadingMore=!1;isLoadingStats=!1;errorMessage="";hasMoreStories=!0;currentUser=null;storiesPerPage=20;currentPage=1;searchQuery="";selectedCategory="";selectedLanguage="";sortType="newest";availableCategories=[];userBookmarks=[];bookmarkedStories=new Set;statsCache=new Map;CACHE_TTL=300*1e3;debounceTimeout;pendingStatsRequests=new Set;statsRequestQueue=[];ngOnInit(){this.setupAuthSubscription(),this.loadStoriesOptimized()}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete(),this.debounceTimeout&&clearTimeout(this.debounceTimeout)}setupAuthSubscription(){this.authService.user$.pipe(Ci(this.destroy$)).subscribe(e=>{this.currentUser=e,e?this.loadUserBookmarks():(this.bookmarkedStories.clear(),this.userBookmarks=[])})}loadStoriesOptimized(e=!1){return y(this,null,function*(){try{e?this.isLoadingMore=!0:(this.isLoading=!0,this.errorMessage="",this.storyService.resetPagination());let t=yield this.storyService.getStories(this.storiesPerPage,e);t.length<this.storiesPerPage&&(this.hasMoreStories=!1);let r=t.map(i=>re(H({},i),{stats:re(H({},i.stats),{voteCount:i.stats.voteCount||0,commentCount:i.stats.commentCount||0})}));e?this.stories=[...this.stories,...r]:this.stories=r,this.updateAvailableCategories(),this.isLoading=!1,this.isLoadingMore=!1,this.loadStatsInBackground(t)}catch(t){console.error("Error loading stories:",t),this.errorMessage="Failed to load stories. Please try again later.",this.isLoading=!1,this.isLoadingMore=!1}})}loadStatsInBackground(e){return y(this,null,function*(){this.isLoadingStats=!0;try{for(let r=0;r<e.length;r+=5){let i=e.slice(r,r+5);yield this.loadStatsForChunk(i),r+5<e.length&&(yield new Promise(o=>setTimeout(o,100)))}}catch(t){console.error("Error loading stats:",t)}finally{this.isLoadingStats=!1}})}loadStatsForChunk(e){return y(this,null,function*(){let t=e.map(r=>y(this,null,function*(){let i=r.id,o=this.statsCache.get(i);if(o&&Date.now()-o.timestamp<this.CACHE_TTL){this.updateStoryStats(r.id,o.votes,o.comments);return}try{let[s,a]=yield Promise.all([this.voteService.countVotes(r.id),this.commentService.countComments(r.id)]);this.statsCache.set(i,{votes:s,comments:a,timestamp:Date.now()}),this.updateStoryStats(r.id,s,a)}catch(s){console.error(`Error loading stats for story ${r.id}:`,s)}}));yield Promise.all(t)})}updateStoryStats(e,t,r){let i=this.stories.findIndex(o=>o.id===e);i!==-1&&(this.stories[i]=re(H({},this.stories[i]),{stats:re(H({},this.stories[i].stats),{voteCount:t,commentCount:r})}))}loadUserBookmarks(){return y(this,null,function*(){if(this.currentUser?.uid)try{this.userBookmarks=yield this.bookmarkService.getUserBookmarks(this.currentUser.uid),this.bookmarkedStories.clear(),this.userBookmarks.forEach(e=>{this.bookmarkedStories.add(e.storyId)})}catch(e){console.error("Error loading user bookmarks:",e)}})}loadMoreStories(){return y(this,null,function*(){!this.hasMoreStories||this.isLoadingMore||(yield this.loadStoriesOptimized(!0))})}debounceSearch(){this.debounceTimeout&&clearTimeout(this.debounceTimeout),this.debounceTimeout=window.setTimeout(()=>{},300)}sortStories(e,t){switch(this.sortType){case"newest":return this.getDateValue(t.createdAt)-this.getDateValue(e.createdAt);case"oldest":return this.getDateValue(e.createdAt)-this.getDateValue(t.createdAt);case"az":return e.title.toLowerCase().localeCompare(t.title.toLowerCase());case"popular":case"trending":let r=e.stats.voteCount||0,i=t.stats.voteCount||0;return r!==i?i-r:this.getDateValue(t.createdAt)-this.getDateValue(e.createdAt);default:return 0}}getDateValue(e){return e instanceof Date?e.getTime():e&&typeof e.toDate=="function"?e.toDate().getTime():0}updateAvailableCategories(){let e=new Set(this.stories.map(t=>t.category).filter(Boolean));this.availableCategories=Array.from(e).sort()}get filteredStories(){return this.stories.filter(e=>{if(e.status!=="published")return!1;if(this.searchQuery){let t=this.searchQuery.toLowerCase();if(!(e.title.toLowerCase().includes(t)||e.content.toLowerCase().includes(t)||e.authorName.toLowerCase().includes(t)||e.tags&&e.tags.some(i=>i.toLowerCase().includes(t))))return!1}return!(this.selectedCategory&&e.category!==this.selectedCategory||this.selectedLanguage&&e.language!==this.selectedLanguage)}).sort((e,t)=>this.sortStories(e,t))}get paginatedStories(){return this.filteredStories}onSearchChange(){this.debounceSearch()}onFilterChange(){}onSortChange(){}clearSearch(){this.searchQuery="",this.onSearchChange()}clearAllFilters(){this.searchQuery="",this.selectedCategory="",this.selectedLanguage="",this.sortType="newest"}selectCategory(e){this.selectedCategory=e,this.onFilterChange()}toggleBookmark(e,t){return y(this,null,function*(){if(e.preventDefault(),e.stopPropagation(),!!this.currentUser?.uid)try{let r=this.isBookmarked(t.id);if(r?this.bookmarkedStories.delete(t.id):this.bookmarkedStories.add(t.id),r){let i=this.userBookmarks.find(o=>o.storyId===t.id);i&&(yield this.bookmarkService.toggleBookmark(i),this.userBookmarks=this.userBookmarks.filter(o=>o.id!==i.id))}else{let i={id:"",userId:this.currentUser.uid,storyId:t.id,title:t.title,authorName:t.authorName,emoji:t.emoji,category:t.category||"General",createdAt:new Date};yield this.bookmarkService.toggleBookmark(i),this.userBookmarks.push(re(H({},i),{createdAt:new Date}))}}catch(r){console.error("Error toggling bookmark:",r),this.isBookmarked(t.id)?this.bookmarkedStories.delete(t.id):this.bookmarkedStories.add(t.id)}})}shareStory(e,t){if(e.preventDefault(),e.stopPropagation(),navigator.share)navigator.share({title:t.title,url:window.location.origin+"/story/"+t.id});else{let r=window.location.origin+"/story/"+t.id;navigator.clipboard.writeText(r).then(()=>{})}}scrollSlider(e){let t=document.querySelector(".quick-filters-slider");t&&t.scrollBy({left:e*200,behavior:"smooth"})}trackByStoryId(e,t){return t.id}getAuthorInitials(e){return e.split(" ").map(t=>t.charAt(0).toUpperCase()).join("").substring(0,2)}getCategoryCount(e){return this.stories.filter(t=>t.category===e).length}formatDate(e){try{let t=e instanceof Date?e:e.toDate(),i=Math.abs(new Date().getTime()-t.getTime()),o=Math.floor(i/(1e3*60*60*24)),s=Math.floor(i/(1e3*60*60));return s<1?"just now":s<24?`${s}h ago`:o<7?`${o}d ago`:t.toLocaleDateString("en-US",{month:"short",day:"numeric"})}catch{return"Unknown date"}}getEstimatedReadTime(e){let r=e.split(/\s+/).length;return Math.max(1,Math.ceil(r/200))}getContentSnippet(e,t=180){if(!e)return"";let r=e.replace(/<[^>]*>/g,"");return r.length>t?r.substring(0,t)+"...":r}getLanguageLabel(e){return{en:"English",ar:"\u0627\u0644\u0639\u0631\u0628\u064A\u0629",fr:"Fran\xE7ais"}[e]||e.toUpperCase()}formatCount(e){return e>=1e3?(e/1e3).toFixed(1)+"K":e.toString()}isBookmarked(e){return this.bookmarkedStories.has(e)}cleanupCache(){let e=Date.now();for(let[t,r]of this.statsCache.entries())e-r.timestamp>this.CACHE_TTL&&this.statsCache.delete(t)}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=et({type:n,selectors:[["app-stories"]],decls:25,vars:8,consts:[[1,"unposted-feed"],[1,"feed-header"],[1,"header-content"],[1,"brand"],[1,"moon-icon"],[1,"tagline"],[1,"header-actions"],[1,"search-container"],["viewBox","0 0 24 24","fill","none","stroke","currentColor",1,"search-icon"],["cx","11","cy","11","r","8"],["d","M21 21l-4.35-4.35"],["type","text","placeholder","Search stories...",1,"search-input",3,"ngModelChange","input","ngModel"],["class","search-clear",3,"click",4,"ngIf"],["routerLink","/write",1,"write-btn"],[1,"feed-container"],[1,"feed-content"],["class","quick-filters-container",4,"ngIf"],["class","loading-state",4,"ngIf"],["class","stories-feed",4,"ngIf"],["class","empty-state",4,"ngIf"],["class","load-more-container",4,"ngIf"],["class","error-toast",3,"show",4,"ngIf"],[1,"search-clear",3,"click"],["viewBox","0 0 24 24","fill","none","stroke","currentColor"],["x1","18","y1","6","x2","6","y2","18"],["x1","6","y1","6","x2","18","y2","18"],[1,"quick-filters-container"],[1,"quick-filters-slider"],[1,"filter-tag",3,"click"],["class","filter-tag",3,"active","click",4,"ngFor","ngForOf"],[1,"slider-nav","prev",3,"click"],["points","15,18 9,12 15,6"],[1,"slider-nav","next",3,"click"],["points","9,6 15,12 9,18"],[1,"tag-count"],[1,"loading-state"],["class","story-skeleton",4,"ngFor","ngForOf"],[1,"story-skeleton"],[1,"skeleton-header"],[1,"skeleton-avatar"],[1,"skeleton-meta"],[1,"skeleton-line","short"],[1,"skeleton-line","shorter"],[1,"skeleton-content"],[1,"skeleton-line","title"],[1,"skeleton-line","subtitle"],[1,"skeleton-line"],[1,"skeleton-line","medium"],[1,"stories-feed"],["class","story-card",4,"ngFor","ngForOf","ngForTrackBy"],[1,"story-card"],[1,"story-header"],[1,"author-info"],[1,"author-avatar",3,"routerLink"],[3,"src","alt",4,"ngIf"],[4,"ngIf"],[1,"author-details"],[1,"author-name",3,"routerLink"],[1,"story-meta"],[1,"separator"],["class","separator",4,"ngIf"],["class","language",4,"ngIf"],["class","bookmark-btn",3,"bookmarked","click",4,"ngIf"],[1,"story-content",3,"routerLink"],[1,"story-title-section"],[1,"story-emoji"],[1,"story-title"],[1,"story-preview"],[1,"story-category"],[1,"category-badge"],[1,"story-actions"],[1,"engagement-actions"],[1,"action-btn","upvote",3,"disabled"],["viewBox","0 0 24 24","width","24","height","24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round"],["d","M12 19V5M5 12l7-7 7 7"],[1,"action-btn","comment",3,"disabled"],["d","M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"],[1,"action-btn","share",3,"click"],["cx","18","cy","5","r","3"],["cx","6","cy","12","r","3"],["cx","18","cy","19","r","3"],["x1","8.59","y1","13.51","x2","15.42","y2","17.49"],["x1","15.41","y1","6.51","x2","8.59","y2","10.49"],[1,"read-more",3,"routerLink"],[3,"src","alt"],[1,"language"],[1,"bookmark-btn",3,"click"],["d","M19 21l-7-4-7 4V5a2 2 0 0 1 2-2h10a2 2 0 0 1 2 2v16z"],[1,"empty-state"],[1,"empty-illustration"],[1,"moon-icon","large"],[1,"explore-btn",3,"click"],[1,"load-more-container"],[1,"load-more-btn",3,"click","disabled"],["class","loading-dots",4,"ngIf"],[1,"loading-dots"],[1,"error-toast"],[1,"toast-content"],["cx","12","cy","12","r","10"],["x1","15","y1","9","x2","9","y2","15"],["x1","9","y1","9","x2","15","y2","15"],[1,"toast-close",3,"click"]],template:function(t,r){t&1&&(h(0,"div",0)(1,"header",1)(2,"div",2)(3,"div",3)(4,"span",4),b(5,"\u{1F319}"),p(),h(6,"span",5),b(7,"Where untold stories find their voice"),p()(),h(8,"div",6)(9,"div",7),ce(),h(10,"svg",8),z(11,"circle",9)(12,"path",10),p(),Ae(),h(13,"input",11),We("ngModelChange",function(o){return Xe(r.searchQuery,o)||(r.searchQuery=o),o}),B("input",function(){return r.onSearchChange()}),p(),j(14,Hz,4,0,"button",12),p(),h(15,"button",13),b(16,"Write Story"),p()()()(),h(17,"main",14)(18,"div",15),j(19,qz,11,3,"div",16)(20,Gz,2,2,"div",17)(21,eq,2,2,"div",18)(22,tq,10,0,"div",19)(23,iq,4,3,"div",20),p()(),j(24,oq,10,3,"div",21),p()),t&2&&(v(13),qe("ngModel",r.searchQuery),v(),C("ngIf",r.searchQuery),v(5),C("ngIf",!r.isLoading),v(),C("ngIf",r.isLoading),v(),C("ngIf",!r.isLoading),v(),C("ngIf",!r.isLoading&&r.filteredStories.length===0),v(),C("ngIf",!r.isLoading&&r.hasMoreStories&&r.filteredStories.length>0),v(),C("ngIf",r.errorMessage))},dependencies:[On,un,kn,Cn,Or,an,Lt,Pn,Wt],styles:['@font-face{font-family:Montserrat;font-style:normal;font-weight:300;font-display:swap;src:url(https://fonts.gstatic.com/s/montserrat/v31/JTUSjIg1_i6t8kCHKm459WRhyzbi.woff2) format("woff2");unicode-range:U+0460-052F,U+1C80-1C8A,U+20B4,U+2DE0-2DFF,U+A640-A69F,U+FE2E-FE2F}@font-face{font-family:Montserrat;font-style:normal;font-weight:300;font-display:swap;src:url(https://fonts.gstatic.com/s/montserrat/v31/JTUSjIg1_i6t8kCHKm459W1hyzbi.woff2) format("woff2");unicode-range:U+0301,U+0400-045F,U+0490-0491,U+04B0-04B1,U+2116}@font-face{font-family:Montserrat;font-style:normal;font-weight:300;font-display:swap;src:url(https://fonts.gstatic.com/s/montserrat/v31/JTUSjIg1_i6t8kCHKm459WZhyzbi.woff2) format("woff2");unicode-range:U+0102-0103,U+0110-0111,U+0128-0129,U+0168-0169,U+01A0-01A1,U+01AF-01B0,U+0300-0301,U+0303-0304,U+0308-0309,U+0323,U+0329,U+1EA0-1EF9,U+20AB}@font-face{font-family:Montserrat;font-style:normal;font-weight:300;font-display:swap;src:url(https://fonts.gstatic.com/s/montserrat/v31/JTUSjIg1_i6t8kCHKm459Wdhyzbi.woff2) format("woff2");unicode-range:U+0100-02BA,U+02BD-02C5,U+02C7-02CC,U+02CE-02D7,U+02DD-02FF,U+0304,U+0308,U+0329,U+1D00-1DBF,U+1E00-1E9F,U+1EF2-1EFF,U+2020,U+20A0-20AB,U+20AD-20C0,U+2113,U+2C60-2C7F,U+A720-A7FF}@font-face{font-family:Montserrat;font-style:normal;font-weight:300;font-display:swap;src:url(https://fonts.gstatic.com/s/montserrat/v31/JTUSjIg1_i6t8kCHKm459Wlhyw.woff2) format("woff2");unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+0304,U+0308,U+0329,U+2000-206F,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD}@font-face{font-family:Montserrat;font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/montserrat/v31/JTUSjIg1_i6t8kCHKm459WRhyzbi.woff2) format("woff2");unicode-range:U+0460-052F,U+1C80-1C8A,U+20B4,U+2DE0-2DFF,U+A640-A69F,U+FE2E-FE2F}@font-face{font-family:Montserrat;font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/montserrat/v31/JTUSjIg1_i6t8kCHKm459W1hyzbi.woff2) format("woff2");unicode-range:U+0301,U+0400-045F,U+0490-0491,U+04B0-04B1,U+2116}@font-face{font-family:Montserrat;font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/montserrat/v31/JTUSjIg1_i6t8kCHKm459WZhyzbi.woff2) format("woff2");unicode-range:U+0102-0103,U+0110-0111,U+0128-0129,U+0168-0169,U+01A0-01A1,U+01AF-01B0,U+0300-0301,U+0303-0304,U+0308-0309,U+0323,U+0329,U+1EA0-1EF9,U+20AB}@font-face{font-family:Montserrat;font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/montserrat/v31/JTUSjIg1_i6t8kCHKm459Wdhyzbi.woff2) format("woff2");unicode-range:U+0100-02BA,U+02BD-02C5,U+02C7-02CC,U+02CE-02D7,U+02DD-02FF,U+0304,U+0308,U+0329,U+1D00-1DBF,U+1E00-1E9F,U+1EF2-1EFF,U+2020,U+20A0-20AB,U+20AD-20C0,U+2113,U+2C60-2C7F,U+A720-A7FF}@font-face{font-family:Montserrat;font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/montserrat/v31/JTUSjIg1_i6t8kCHKm459Wlhyw.woff2) format("woff2");unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+0304,U+0308,U+0329,U+2000-206F,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD}@font-face{font-family:Montserrat;font-style:normal;font-weight:500;font-display:swap;src:url(https://fonts.gstatic.com/s/montserrat/v31/JTUSjIg1_i6t8kCHKm459WRhyzbi.woff2) format("woff2");unicode-range:U+0460-052F,U+1C80-1C8A,U+20B4,U+2DE0-2DFF,U+A640-A69F,U+FE2E-FE2F}@font-face{font-family:Montserrat;font-style:normal;font-weight:500;font-display:swap;src:url(https://fonts.gstatic.com/s/montserrat/v31/JTUSjIg1_i6t8kCHKm459W1hyzbi.woff2) format("woff2");unicode-range:U+0301,U+0400-045F,U+0490-0491,U+04B0-04B1,U+2116}@font-face{font-family:Montserrat;font-style:normal;font-weight:500;font-display:swap;src:url(https://fonts.gstatic.com/s/montserrat/v31/JTUSjIg1_i6t8kCHKm459WZhyzbi.woff2) format("woff2");unicode-range:U+0102-0103,U+0110-0111,U+0128-0129,U+0168-0169,U+01A0-01A1,U+01AF-01B0,U+0300-0301,U+0303-0304,U+0308-0309,U+0323,U+0329,U+1EA0-1EF9,U+20AB}@font-face{font-family:Montserrat;font-style:normal;font-weight:500;font-display:swap;src:url(https://fonts.gstatic.com/s/montserrat/v31/JTUSjIg1_i6t8kCHKm459Wdhyzbi.woff2) format("woff2");unicode-range:U+0100-02BA,U+02BD-02C5,U+02C7-02CC,U+02CE-02D7,U+02DD-02FF,U+0304,U+0308,U+0329,U+1D00-1DBF,U+1E00-1E9F,U+1EF2-1EFF,U+2020,U+20A0-20AB,U+20AD-20C0,U+2113,U+2C60-2C7F,U+A720-A7FF}@font-face{font-family:Montserrat;font-style:normal;font-weight:500;font-display:swap;src:url(https://fonts.gstatic.com/s/montserrat/v31/JTUSjIg1_i6t8kCHKm459Wlhyw.woff2) format("woff2");unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+0304,U+0308,U+0329,U+2000-206F,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD}@font-face{font-family:Montserrat;font-style:normal;font-weight:600;font-display:swap;src:url(https://fonts.gstatic.com/s/montserrat/v31/JTUSjIg1_i6t8kCHKm459WRhyzbi.woff2) format("woff2");unicode-range:U+0460-052F,U+1C80-1C8A,U+20B4,U+2DE0-2DFF,U+A640-A69F,U+FE2E-FE2F}@font-face{font-family:Montserrat;font-style:normal;font-weight:600;font-display:swap;src:url(https://fonts.gstatic.com/s/montserrat/v31/JTUSjIg1_i6t8kCHKm459W1hyzbi.woff2) format("woff2");unicode-range:U+0301,U+0400-045F,U+0490-0491,U+04B0-04B1,U+2116}@font-face{font-family:Montserrat;font-style:normal;font-weight:600;font-display:swap;src:url(https://fonts.gstatic.com/s/montserrat/v31/JTUSjIg1_i6t8kCHKm459WZhyzbi.woff2) format("woff2");unicode-range:U+0102-0103,U+0110-0111,U+0128-0129,U+0168-0169,U+01A0-01A1,U+01AF-01B0,U+0300-0301,U+0303-0304,U+0308-0309,U+0323,U+0329,U+1EA0-1EF9,U+20AB}@font-face{font-family:Montserrat;font-style:normal;font-weight:600;font-display:swap;src:url(https://fonts.gstatic.com/s/montserrat/v31/JTUSjIg1_i6t8kCHKm459Wdhyzbi.woff2) format("woff2");unicode-range:U+0100-02BA,U+02BD-02C5,U+02C7-02CC,U+02CE-02D7,U+02DD-02FF,U+0304,U+0308,U+0329,U+1D00-1DBF,U+1E00-1E9F,U+1EF2-1EFF,U+2020,U+20A0-20AB,U+20AD-20C0,U+2113,U+2C60-2C7F,U+A720-A7FF}@font-face{font-family:Montserrat;font-style:normal;font-weight:600;font-display:swap;src:url(https://fonts.gstatic.com/s/montserrat/v31/JTUSjIg1_i6t8kCHKm459Wlhyw.woff2) format("woff2");unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+0304,U+0308,U+0329,U+2000-206F,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD}@font-face{font-family:Montserrat;font-style:normal;font-weight:700;font-display:swap;src:url(https://fonts.gstatic.com/s/montserrat/v31/JTUSjIg1_i6t8kCHKm459WRhyzbi.woff2) format("woff2");unicode-range:U+0460-052F,U+1C80-1C8A,U+20B4,U+2DE0-2DFF,U+A640-A69F,U+FE2E-FE2F}@font-face{font-family:Montserrat;font-style:normal;font-weight:700;font-display:swap;src:url(https://fonts.gstatic.com/s/montserrat/v31/JTUSjIg1_i6t8kCHKm459W1hyzbi.woff2) format("woff2");unicode-range:U+0301,U+0400-045F,U+0490-0491,U+04B0-04B1,U+2116}@font-face{font-family:Montserrat;font-style:normal;font-weight:700;font-display:swap;src:url(https://fonts.gstatic.com/s/montserrat/v31/JTUSjIg1_i6t8kCHKm459WZhyzbi.woff2) format("woff2");unicode-range:U+0102-0103,U+0110-0111,U+0128-0129,U+0168-0169,U+01A0-01A1,U+01AF-01B0,U+0300-0301,U+0303-0304,U+0308-0309,U+0323,U+0329,U+1EA0-1EF9,U+20AB}@font-face{font-family:Montserrat;font-style:normal;font-weight:700;font-display:swap;src:url(https://fonts.gstatic.com/s/montserrat/v31/JTUSjIg1_i6t8kCHKm459Wdhyzbi.woff2) format("woff2");unicode-range:U+0100-02BA,U+02BD-02C5,U+02C7-02CC,U+02CE-02D7,U+02DD-02FF,U+0304,U+0308,U+0329,U+1D00-1DBF,U+1E00-1E9F,U+1EF2-1EFF,U+2020,U+20A0-20AB,U+20AD-20C0,U+2113,U+2C60-2C7F,U+A720-A7FF}@font-face{font-family:Montserrat;font-style:normal;font-weight:700;font-display:swap;src:url(https://fonts.gstatic.com/s/montserrat/v31/JTUSjIg1_i6t8kCHKm459Wlhyw.woff2) format("woff2");unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+0304,U+0308,U+0329,U+2000-206F,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD}*[_ngcontent-%COMP%]{margin:0;padding:0;box-sizing:border-box}body[_ngcontent-%COMP%]{font-family:Montserrat,-apple-system,BlinkMacSystemFont,sans-serif;line-height:1.6;color:#2e2e2e;background-color:#f5e1a5}.unposted-feed[_ngcontent-%COMP%]{min-height:100vh;background-color:#fefcf7;font-family:Montserrat,-apple-system,BlinkMacSystemFont,sans-serif}.feed-header[_ngcontent-%COMP%]{background:#fefcf7f2;-webkit-backdrop-filter:blur(12px);backdrop-filter:blur(12px);border-bottom:1px solid #f2efe9;position:sticky;top:0;z-index:100;padding:1rem 0}.header-content[_ngcontent-%COMP%]{max-width:900px;margin:0 auto;padding:0 2rem;display:flex;align-items:center;justify-content:space-between;gap:2rem}.brand[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.75rem}.moon-icon[_ngcontent-%COMP%]{font-size:1.5rem;opacity:.8}.moon-icon.large[_ngcontent-%COMP%]{font-size:3rem}.brand[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:1.75rem;font-weight:700;color:#2e2e2e;letter-spacing:-.5px;margin:0}.tagline[_ngcontent-%COMP%]{font-size:.75rem;color:#9a948c;font-weight:300;margin-left:.5rem}.header-actions[_ngcontent-%COMP%]{display:flex;align-items:center;gap:1.5rem}.search-container[_ngcontent-%COMP%]{position:relative;display:flex;align-items:center}.search-icon[_ngcontent-%COMP%]{position:absolute;left:1rem;width:16px;height:16px;color:#9a948c;z-index:1}.search-input[_ngcontent-%COMP%]{padding:.75rem 1rem .75rem 2.75rem;border:1px solid #e6e1d7;border-radius:18px;background:#fff;font-family:inherit;font-size:.875rem;width:280px;transition:all .25s cubic-bezier(.4,0,.2,1);color:#2e2e2e}.search-input[_ngcontent-%COMP%]:focus{outline:none;border-color:#f7c843;box-shadow:0 0 0 3px #e6b17a1a}.search-clear[_ngcontent-%COMP%]{position:absolute;right:.75rem;width:20px;height:20px;border:none;background:none;cursor:pointer;color:#9a948c;border-radius:50%;display:flex;align-items:center;justify-content:center;transition:all .25s cubic-bezier(.4,0,.2,1)}.search-clear[_ngcontent-%COMP%]:hover{background:#f2efe9;color:#5c554d}.filter-container[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5rem}.filter-icon[_ngcontent-%COMP%]{width:16px;height:16px;color:#9a948c}.filter-select[_ngcontent-%COMP%]{padding:.75rem 1rem;border:1px solid #e6e1d7;border-radius:18px;background:#fff;font-family:inherit;font-size:.875rem;cursor:pointer;color:#2e2e2e;transition:all .25s cubic-bezier(.4,0,.2,1)}.filter-select[_ngcontent-%COMP%]:focus{outline:none;border-color:#f7c843}.write-btn[_ngcontent-%COMP%]{padding:.75rem 1.5rem;background:#2e2e2e;color:#fff;border:none;border-radius:18px;font-weight:500;font-size:.875rem;cursor:pointer;transition:all .25s cubic-bezier(.4,0,.2,1);font-family:inherit}.write-btn[_ngcontent-%COMP%]:hover{background:#1a1a1a;transform:translateY(-1px)}.write-btn[_ngcontent-%COMP%]:disabled{background:#aaa;color:#666;cursor:not-allowed;transform:none;opacity:.6}.write-btn[_ngcontent-%COMP%]:disabled:hover{background:#aaa;transform:none}.action-btn[_ngcontent-%COMP%]:disabled{cursor:not-allowed}.feed-container[_ngcontent-%COMP%]{max-width:900px;margin:0 auto;padding:2.5rem 2rem}.feed-content[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:2rem}.quick-filters-container[_ngcontent-%COMP%]{position:relative;display:flex;align-items:center;padding:0 2rem;margin-bottom:1rem}.quick-filters-slider[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.75rem;overflow-x:auto;scroll-behavior:smooth;scrollbar-width:none;-ms-overflow-style:none;padding:.5rem 0;width:100%}.quick-filters-slider[_ngcontent-%COMP%]::-webkit-scrollbar{display:none}.slider-nav[_ngcontent-%COMP%]{position:absolute;top:50%;transform:translateY(-50%);width:32px;height:32px;border-radius:50%;background:#fff;border:1px solid #e6e1d7;display:flex;align-items:center;justify-content:center;cursor:pointer;z-index:10;transition:all .25s cubic-bezier(.4,0,.2,1);box-shadow:0 2px 8px #0000001a}.slider-nav[_ngcontent-%COMP%]:hover{border-color:#f7c843;background:#e6b17a0d}.slider-nav[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{width:16px;height:16px;color:#5c554d}.slider-nav.prev[_ngcontent-%COMP%]{left:0}.slider-nav.next[_ngcontent-%COMP%]{right:0}@media (max-width: 768px){.slider-nav[_ngcontent-%COMP%]{display:none}.quick-filters-container[_ngcontent-%COMP%]{padding:0}.quick-filters-slider[_ngcontent-%COMP%]{padding:.5rem 1rem}}.filter-tag[_ngcontent-%COMP%]{padding:.5rem 1rem;border:1px solid #e6e1d7;background:#fff;color:#5c554d;border-radius:18px;font-size:.8rem;font-weight:400;cursor:pointer;transition:all .25s cubic-bezier(.4,0,.2,1);font-family:inherit;display:flex;align-items:center;gap:.5rem}.filter-tag[_ngcontent-%COMP%]:hover{border-color:#f7c843;background:#e6b17a0d}.filter-tag.active[_ngcontent-%COMP%]{background:#f7c843;border-color:#f7c843;color:#fff}.tag-count[_ngcontent-%COMP%]{font-size:.7rem;opacity:.7;background:#fff3;padding:.1rem .4rem;border-radius:10px}.filter-tag.active[_ngcontent-%COMP%]   .tag-count[_ngcontent-%COMP%]{background:#ffffff4d}.loading-state[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:2rem}.story-skeleton[_ngcontent-%COMP%]{background:#fff;border-radius:14px;padding:2rem;border:1px solid #f2efe9}.skeleton-header[_ngcontent-%COMP%]{display:flex;align-items:center;gap:1rem;margin-bottom:1.5rem}.skeleton-avatar[_ngcontent-%COMP%]{width:48px;height:48px;border-radius:50%;background:linear-gradient(90deg,#f2efe9) 25%,#e6e1d7 50%,#f2efe9 75%;background-size:200% 100%;animation:_ngcontent-%COMP%_shimmer 1.5s infinite}.skeleton-meta[_ngcontent-%COMP%]{flex:1}.skeleton-line[_ngcontent-%COMP%]{height:.875rem;background:linear-gradient(90deg,#f2efe9) 25%,#e6e1d7 50%,#f2efe9 75%;background-size:200% 100%;animation:_ngcontent-%COMP%_shimmer 1.5s infinite;border-radius:4px;margin-bottom:.75rem}.skeleton-line.short[_ngcontent-%COMP%]{width:40%}.skeleton-line.shorter[_ngcontent-%COMP%]{width:25%}.skeleton-line.medium[_ngcontent-%COMP%]{width:70%}.skeleton-line.title[_ngcontent-%COMP%]{height:1.25rem;width:85%;margin-bottom:1rem}.skeleton-line.subtitle[_ngcontent-%COMP%]{width:60%;margin-bottom:1rem}.skeleton-content[_ngcontent-%COMP%]{display:flex;flex-direction:column}@keyframes _ngcontent-%COMP%_shimmer{0%{background-position:-200px 0}to{background-position:calc(200px + 100%) 0}}.stories-feed[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:2rem}.story-card[_ngcontent-%COMP%]{background:#fff;border-radius:14px;padding:1rem;border:1px solid #f2efe9;text-decoration:none;color:inherit;display:block;transition:all .25s cubic-bezier(.4,0,.2,1);position:relative}.story-header[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;margin-bottom:1.5rem}.author-info[_ngcontent-%COMP%]{display:flex;align-items:center;gap:1rem}.author-avatar[_ngcontent-%COMP%]{width:48px;height:48px;border-radius:50%;background:#f7c843;color:#fff;display:flex;align-items:center;justify-content:center;font-weight:600;font-size:.875rem;letter-spacing:.5px;cursor:pointer}.author-avatar[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;height:100%;border-radius:50%;object-fit:cover}.author-name[_ngcontent-%COMP%]{font-size:.95rem;font-weight:500;color:#2e2e2e;margin:0 0 .25rem;cursor:pointer}.author-name[_ngcontent-%COMP%]:hover{color:#f7c843}.story-meta[_ngcontent-%COMP%]{font-size:.8rem;color:#9a948c;display:flex;align-items:center;gap:.5rem}.separator[_ngcontent-%COMP%]{opacity:.5}.bookmark-btn[_ngcontent-%COMP%]{background:none;border:none;padding:.5rem;border-radius:6px;transition:all .25s cubic-bezier(.4,0,.2,1);color:#9a948c;cursor:pointer}.bookmark-btn[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{width:18px;height:18px}.bookmark-btn[_ngcontent-%COMP%]:hover{background:#f2efe9;color:#5c554d}.bookmark-btn.bookmarked[_ngcontent-%COMP%]{color:#f7c843}.bookmark-btn.bookmarked[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{fill:currentColor}.story-content[_ngcontent-%COMP%]{margin-bottom:1.5rem;cursor:pointer}.story-title-section[_ngcontent-%COMP%]{display:flex;align-items:flex-start;gap:.75rem;margin-bottom:1rem}.story-emoji[_ngcontent-%COMP%]{font-size:1.25rem;line-height:1;margin-top:.25rem}.story-title[_ngcontent-%COMP%]{font-size:1.5rem;font-weight:600;line-height:1.3;color:#2e2e2e;margin:0;letter-spacing:-.5px;flex:1}.story-subtitle[_ngcontent-%COMP%]{font-size:1rem;color:#5c554d;line-height:1.5;margin-bottom:1rem;font-style:italic;font-weight:300}.story-preview[_ngcontent-%COMP%]{font-size:.9rem;line-height:1.6;color:#9a948c;font-weight:300;margin-bottom:1rem}.story-category[_ngcontent-%COMP%]{display:flex;align-items:center;margin-top:.75rem}.category-badge[_ngcontent-%COMP%]{padding:.25rem .75rem;border-radius:18px;font-size:.7rem;font-weight:500;text-transform:uppercase;letter-spacing:.5px}.category-badge[data-category="Personal Growth"][_ngcontent-%COMP%]{color:#fef3c7;background:#92400e}.category-badge[data-category="Life Lessons"][_ngcontent-%COMP%]{color:#fce7f3;background:#9d174d}.category-badge[data-category="Cultural Heritage"][_ngcontent-%COMP%]{color:#e0f2fe;background:#0369a1}.category-badge[data-category="Travel & Adventure"][_ngcontent-%COMP%]{color:#dbeafe;background:#1e40af}.category-badge[data-category="Work & Career"][_ngcontent-%COMP%]{color:#f3e8ff;background:#6d28d9}.category-badge[data-category=Relationships][_ngcontent-%COMP%]{color:#ffe4e6;background:#be123c}.category-badge[data-category="Family Stories"][_ngcontent-%COMP%]{color:#dcfce7;background:#166534}.category-badge[data-category="Overcoming Challenges"][_ngcontent-%COMP%]{color:#fee2e2;background:#b91c1c}.category-badge[data-category="Creative Journey"][_ngcontent-%COMP%]{color:#ccfbf1;background:#0f766e}.category-badge[data-category="Social Impact"][_ngcontent-%COMP%]{color:#ede9fe;background:#5b21b6}.category-badge[data-category="Health & Wellness"][_ngcontent-%COMP%]{color:#fef9c3;background:#854d0e}.category-badge[data-category="Education & Learning"][_ngcontent-%COMP%]{color:#d1fae5;background:#047857}.category-badge[data-category="Dreams & Aspirations"][_ngcontent-%COMP%]{color:#fdf2f8;background:#9d174d}.category-badge[data-category="Unexpected Moments"][_ngcontent-%COMP%]{color:#e0f7fa;background:#00695c}.category-badge[data-category=Other][_ngcontent-%COMP%]{color:#f5f5f5;background:#374151}.story-actions[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;padding-top:1.5rem;border-top:1px solid #f2efe9}.engagement-actions[_ngcontent-%COMP%]{display:flex;align-items:center;gap:1.5rem}.action-btn[_ngcontent-%COMP%]{cursor:pointer;background:none;border:none;display:flex;align-items:center;gap:.5rem;padding:.5rem .75rem;border-radius:18px;font-size:.875rem;font-weight:400;color:#9a948c;transition:all .25s cubic-bezier(.4,0,.2,1);font-family:inherit}.action-btn[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{width:16px;height:16px}.action-btn[_ngcontent-%COMP%]:hover{background:#f2efe9;color:#5c554d}.action-btn.active[_ngcontent-%COMP%]{color:#f7c843}.action-btn.upvote.active[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{fill:currentColor}.read-more[_ngcontent-%COMP%]{background:#2e2e2e;color:#fff;border:none;padding:.75rem 1.5rem;border-radius:18px;font-size:.875rem;font-weight:500;cursor:pointer;transition:all .25s cubic-bezier(.4,0,.2,1);font-family:inherit}.read-more[_ngcontent-%COMP%]:hover{background:#1a1a1a;transform:translateY(-1px)}.empty-state[_ngcontent-%COMP%]{text-align:center;padding:4rem 2rem;background:#fff;border-radius:14px;border:1px solid #f2efe9}.empty-illustration[_ngcontent-%COMP%]{margin-bottom:1.5rem}.empty-state[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:1.25rem;font-weight:600;color:#2e2e2e;margin-bottom:.5rem}.empty-state[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:.95rem;color:#5c554d;margin-bottom:2rem}.explore-btn[_ngcontent-%COMP%]{padding:.75rem 2rem;background:#f7c843;color:#fff;border:none;border-radius:18px;font-weight:500;font-size:.875rem;cursor:pointer;transition:all .25s cubic-bezier(.4,0,.2,1);font-family:inherit}.explore-btn[_ngcontent-%COMP%]:hover{background:#e6b739;transform:translateY(-1px)}.load-more-container[_ngcontent-%COMP%]{text-align:center;padding-top:2rem}.load-more-btn[_ngcontent-%COMP%]{padding:1rem 2rem;background:#fff;border:1px solid #e6e1d7;border-radius:18px;color:#5c554d;font-weight:500;font-size:.875rem;cursor:pointer;transition:all .25s cubic-bezier(.4,0,.2,1);font-family:inherit}.load-more-btn[_ngcontent-%COMP%]:hover:not(:disabled){border-color:#f7c843;color:#f7c843;background:#e6b17a0d}.load-more-btn[_ngcontent-%COMP%]:disabled{opacity:.5;cursor:not-allowed}.loading-dots[_ngcontent-%COMP%]{display:flex;gap:4px;align-items:center;justify-content:center}.loading-dots[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{width:6px;height:6px;border-radius:50%;background:#9a948c;animation:_ngcontent-%COMP%_bounce 1.4s infinite ease-in-out both}.loading-dots[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:nth-child(1){animation-delay:-.32s}.loading-dots[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:nth-child(2){animation-delay:-.16s}@keyframes _ngcontent-%COMP%_bounce{0%,80%,to{transform:scale(0);opacity:.5}40%{transform:scale(1);opacity:1}}.error-toast[_ngcontent-%COMP%]{position:fixed;bottom:2rem;right:2rem;background:#fef2f2;border:1px solid #fecaca;border-radius:10px;padding:1rem 1.5rem;display:flex;align-items:center;gap:.75rem;box-shadow:0 8px 28px #00000014;transform:translate(100%);transition:transform .3s ease;z-index:1000;max-width:400px;font-family:inherit}.error-toast.show[_ngcontent-%COMP%]{transform:translate(0)}.toast-content[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5rem;flex:1}.toast-content[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{width:16px;height:16px;color:#dc2626;flex-shrink:0}.toast-content[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{color:#991b1b;font-size:.875rem;font-weight:400}.toast-close[_ngcontent-%COMP%]{background:none;border:none;color:#991b1b;cursor:pointer;font-size:1.25rem;line-height:1;padding:0;width:24px;height:24px;display:flex;align-items:center;justify-content:center;border-radius:50%;transition:all .25s cubic-bezier(.4,0,.2,1)}.toast-close[_ngcontent-%COMP%]:hover{background:#991b1b1a}@media (max-width: 768px){.header-content[_ngcontent-%COMP%]{padding:0 1rem;gap:1rem;flex-direction:column}.brand[_ngcontent-%COMP%]{justify-content:center;text-align:center}.brand[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:1.5rem}.tagline[_ngcontent-%COMP%]{display:block;margin-top:.25rem;margin-left:0}.header-actions[_ngcontent-%COMP%]{width:100%;justify-content:space-between;gap:1rem}.search-input[_ngcontent-%COMP%]{width:300px}.feed-container[_ngcontent-%COMP%]{padding:1.5rem 1rem}.story-card[_ngcontent-%COMP%]{padding:1.5rem}.story-title[_ngcontent-%COMP%]{font-size:1.25rem}.story-actions[_ngcontent-%COMP%]{flex-direction:column;align-items:stretch;gap:1rem}.engagement-actions[_ngcontent-%COMP%]{justify-content:space-around}.read-more[_ngcontent-%COMP%]{width:100%;justify-content:center}.quick-filters-slider[_ngcontent-%COMP%]{gap:.5rem;padding-bottom:.5rem}.filter-tag[_ngcontent-%COMP%]{flex-shrink:0;white-space:nowrap}}@media (max-width: 480px){.header-content[_ngcontent-%COMP%]{padding:0 .75rem}.brand[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:1.25rem}.search-input[_ngcontent-%COMP%]{width:160px;font-size:.8rem}.filter-select[_ngcontent-%COMP%]{font-size:.8rem;padding:.6rem .8rem}.write-btn[_ngcontent-%COMP%]{padding:.6rem 1rem;font-size:.8rem}.feed-container[_ngcontent-%COMP%]{padding:1rem .75rem}.story-card[_ngcontent-%COMP%]{padding:1.25rem}.author-avatar[_ngcontent-%COMP%]{width:40px;height:40px;font-size:.8rem}.story-title-section[_ngcontent-%COMP%]{flex-direction:column;gap:.5rem;align-items:flex-start}.story-title[_ngcontent-%COMP%]{font-size:1.125rem}.story-subtitle[_ngcontent-%COMP%], .story-preview[_ngcontent-%COMP%]{font-size:.85rem}.action-btn[_ngcontent-%COMP%]{font-size:.8rem;padding:.4rem .6rem}.read-more[_ngcontent-%COMP%]{font-size:.8rem;padding:.6rem 1.25rem}}@media (prefers-color-scheme: dark){.category-badge[data-category="Personal Growth"][_ngcontent-%COMP%]{background:#fef3c7;color:#92400e}.category-badge[data-category="Life Lessons"][_ngcontent-%COMP%]{background:#fce7f3;color:#9d174d}.category-badge[data-category="Cultural Heritage"][_ngcontent-%COMP%]{background:#e0f2fe;color:#0369a1}.category-badge[data-category="Travel & Adventure"][_ngcontent-%COMP%]{background:#dbeafe;color:#1e40af}.category-badge[data-category="Work & Career"][_ngcontent-%COMP%]{background:#f3e8ff;color:#6d28d9}.category-badge[data-category=Relationships][_ngcontent-%COMP%]{background:#ffe4e6;color:#be123c}.category-badge[data-category="Family Stories"][_ngcontent-%COMP%]{background:#dcfce7;color:#166534}.category-badge[data-category="Overcoming Challenges"][_ngcontent-%COMP%]{background:#fee2e2;color:#b91c1c}.category-badge[data-category="Creative Journey"][_ngcontent-%COMP%]{background:#ccfbf1;color:#0f766e}.category-badge[data-category="Social Impact"][_ngcontent-%COMP%]{background:#ede9fe;color:#5b21b6}.category-badge[data-category="Health & Wellness"][_ngcontent-%COMP%]{background:#fef9c3;color:#854d0e}.category-badge[data-category="Education & Learning"][_ngcontent-%COMP%]{background:#d1fae5;color:#047857}.category-badge[data-category="Dreams & Aspirations"][_ngcontent-%COMP%]{background:#fdf2f8;color:#9d174d}.category-badge[data-category="Unexpected Moments"][_ngcontent-%COMP%]{background:#e0f7fa;color:#00695c}.category-badge[data-category=Other][_ngcontent-%COMP%]{background:#f5f5f5;color:#374151}}@media (prefers-reduced-motion: reduce){*[_ngcontent-%COMP%]{animation-duration:.01ms!important;animation-iteration-count:1!important;transition-duration:.01ms!important}}.story-card[_ngcontent-%COMP%]:focus, .filter-tag[_ngcontent-%COMP%]:focus, .action-btn[_ngcontent-%COMP%]:focus, .bookmark-btn[_ngcontent-%COMP%]:focus, .load-more-btn[_ngcontent-%COMP%]:focus, .search-input[_ngcontent-%COMP%]:focus, .filter-select[_ngcontent-%COMP%]:focus, .write-btn[_ngcontent-%COMP%]:focus{outline:2px solid #f7c843;outline-offset:2px}html[_ngcontent-%COMP%]{scroll-behavior:smooth}[_ngcontent-%COMP%]::selection{background:#e6b17a4d}.upvote-btn[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;border:none;background:none;cursor:pointer;color:#888;font-weight:500;transition:color .2s}.upvote-btn[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{transition:stroke .2s}.upvote-btn[_ngcontent-%COMP%]:hover, .upvote-btn.voted[_ngcontent-%COMP%]{color:#ff4500}.upvote-btn.voted[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{stroke:#ff4500}']})};var al=class n{firestore=k(lt);auth=k($n);viewCache=new Map;getAnonId(){let e="anonId";try{let t=localStorage.getItem(e);return t||(t=`anon_${this.generateUUID()}`,localStorage.setItem(e,t)),t}catch{return console.warn("localStorage not available, using session-based ID"),`anon_${this.generateUUID()}`}}generateUUID(){return typeof crypto<"u"&&crypto.randomUUID?crypto.randomUUID():"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,e=>{let t=Math.random()*16|0;return(e==="x"?t:t&3|8).toString(16)})}trackView(e){return y(this,null,function*(){try{let t=this.auth.currentUser,r;t?r=t.uid:r=this.getAnonId();let i=`${e}-${r}`;if(this.viewCache.has(i))return;let o=Pe(this.firestore,`stories/${e}/views/${r}`);if((yield gt(o)).exists())this.viewCache.set(i,!0);else{let a=Mm(this.firestore);a.set(o,{storyId:e,userId:t?.uid||r,isAnonymous:!t,timestamp:xm(),userAgent:navigator.userAgent.substring(0,200)});let c=Pe(this.firestore,"stories",e);a.update(c,{"stats.readCount":Zi(1)}),yield a.commit(),this.viewCache.set(i,!0),console.log(`View tracked for story ${e}`)}}catch(t){console.error("Error tracking view:",t);try{yield this.incrementStoryReadCount(e)}catch(r){console.error("Fallback read count increment failed:",r)}}})}incrementStoryReadCount(e){return y(this,null,function*(){try{let t=Pe(this.firestore,"stories",e);yield Bt(t,{"stats.readCount":Zi(1)})}catch(t){if(t?.code==="not-found"||t?.message?.includes("No document"))try{let r=Pe(this.firestore,"stories",e);yield dr(r,{stats:{readCount:1,voteCount:0}},{merge:!0})}catch(r){throw console.error("Error creating story stats:",r),r}else throw console.error("Error updating story read count:",t),t}})}getViewCount(e){return y(this,null,function*(){try{let t=pt(this.firestore,`stories/${e}/views`);return(yield wn(t)).size}catch(t){return console.error("Error getting view count:",t),0}})}hasUserViewed(e){return y(this,null,function*(){try{let t=this.auth.currentUser,r;t?r=t.uid:r=this.getAnonId();let i=`${e}-${r}`;if(this.viewCache.has(i))return this.viewCache.get(i);let o=Pe(this.firestore,`stories/${e}/views/${r}`),a=(yield gt(o)).exists();return this.viewCache.set(i,a),a}catch(t){return console.error("Error checking if user viewed story:",t),!1}})}clearCache(){this.viewCache.clear()}getViewAnalytics(e){return y(this,null,function*(){try{let t=pt(this.firestore,`stories/${e}/views`),r=yield wn(t),i=0,o=0;return r.forEach(s=>{s.data().isAnonymous?o++:i++}),{totalViews:r.size,authenticatedViews:i,anonymousViews:o}}catch(t){return console.error("Error getting view analytics:",t),{totalViews:0,authenticatedViews:0,anonymousViews:0}}})}static \u0275fac=function(t){return new(t||n)};static \u0275prov=Q({token:n,factory:n.\u0275fac,providedIn:"root"})};var Bm=class n{firestore=k(lt);toggleFollow(e,t){return y(this,null,function*(){if(!e||!t)throw new Error("FollowerId or FollowingId is undefined");let r=Pe(this.firestore,`follows/${e}_${t}`);(yield gt(r)).exists()?yield Qi(r):yield dr(r,{followerId:e,followedId:t,createdAt:xm()})})}isFollowing(e,t){return y(this,null,function*(){if(e===t)return!1;let r=Pe(this.firestore,`follows/${e}_${t}`);return(yield gt(r)).exists()})}getFollowers(e){return y(this,null,function*(){let t=En(pt(this.firestore,"follows"),Pt("followedId","==",e));return(yield wn(t)).docs.map(i=>i.data())})}getFollowing(e){return y(this,null,function*(){let t=En(pt(this.firestore,"follows"),Pt("followerId","==",e));return(yield wn(t)).docs.map(i=>i.data())})}static \u0275fac=function(t){return new(t||n)};static \u0275prov=Q({token:n,factory:n.\u0275fac,providedIn:"root"})};var hr=class n{constructor(e,t){this.firestore=e;this.authService=t;this.authService.user$.subscribe(r=>{r?this.startListening(r.uid):this.stopListening()})}notificationsSubject=new yt([]);unreadCountSubject=new yt(0);notifications$=this.notificationsSubject.asObservable();unreadCount$=this.unreadCountSubject.asObservable();unsubscribe;startListening(e){let t=pt(this.firestore,"notifications"),r=En(t,Pt("userId","==",e),Xi("createdAt","desc"),Od(50));this.unsubscribe=h2(r,i=>{let o=[];i.forEach(a=>{let c=a.data();o.push({id:a.id,userId:c.userId,type:c.type,title:c.title,message:c.message,isRead:c.isRead,createdAt:c.createdAt?.toDate()||new Date,data:c.data||{}})}),this.notificationsSubject.next(o);let s=o.filter(a=>!a.isRead).length;this.unreadCountSubject.next(s)},i=>{console.error("Error listening to notifications:",i)})}stopListening(){this.unsubscribe&&this.unsubscribe(),this.notificationsSubject.next([]),this.unreadCountSubject.next(0)}createNotification(e){return y(this,null,function*(){try{let t=pt(this.firestore,"notifications");yield Jc(t,re(H({},e),{createdAt:it.now()}))}catch(t){throw console.error("Error creating notification:",t),t}})}markAsRead(e){return y(this,null,function*(){try{let t=Pe(this.firestore,"notifications",e);yield Bt(t,{isRead:!0})}catch(t){throw console.error("Error marking notification as read:",t),t}})}markAllAsRead(){return y(this,null,function*(){if(yield this.authService.user)try{let r=this.notificationsSubject.value.filter(o=>!o.isRead);if(r.length===0)return;let i=Mm(this.firestore);r.forEach(o=>{let s=Pe(this.firestore,"notifications",o.id);i.update(s,{isRead:!0})}),yield i.commit()}catch(t){throw console.error("Error marking all notifications as read:",t),t}})}notifyStoryLiked(e,t,r,i){return y(this,null,function*(){e&&(yield this.createNotification({userId:e,type:"like",title:"New like on your story",message:`${t} liked your story "${r}"`,isRead:!1,data:{storyId:i,fromUserName:t}}))})}notifyStoryCommented(e,t,r,i){return y(this,null,function*(){e&&(yield this.createNotification({userId:e,type:"comment",title:"New comment on your story",message:`${t} commented on your story "${r}"`,isRead:!1,data:{storyId:i,fromUserName:t}}))})}notifyNewFollower(e,t,r){return y(this,null,function*(){e&&(yield this.createNotification({userId:e,type:"follow",title:"New follower",message:`${t} started following you`,isRead:!1,data:{fromUserId:r,fromUserName:t}}))})}notifyStoryPublished(e,t,r){return y(this,null,function*(){e&&(yield this.createNotification({userId:e,type:"story_published",title:"Story published successfully",message:`Your story "${t}" has been published and is now live!`,isRead:!1,data:{storyId:r}}))})}notifyLevelUp(e,t,r){return y(this,null,function*(){if(!e)return;let i=t-r,o=i===1?`Congratulations! You've reached level ${t}!`:`Amazing! You jumped ${i} levels and reached level ${t}!`;yield this.createNotification({userId:e,type:"level_up",title:"Level Up!",message:o,isRead:!1,data:{newLevel:t,oldLevel:r,levelGain:i}})})}getCurrentNotifications(){return this.notificationsSubject.value}getCurrentUnreadCount(){return this.unreadCountSubject.value}ngOnDestroy(){this.stopListening()}static \u0275fac=function(t){return new(t||n)(ie(lt),ie(ot))};static \u0275prov=Q({token:n,factory:n.\u0275fac,providedIn:"root"})};var cq=["nameInput"],lq=["bioInput"],uq=()=>[1,2,3,4,5],dq=()=>[1,2,3,4];function fq(n,e){n&1&&(h(0,"p"),b(1,"Loading your profile..."),p())}function hq(n,e){n&1&&(h(0,"p"),b(1,"Loading the profile..."),p())}function pq(n,e){if(n&1&&(h(0,"div",11),z(1,"div",12),j(2,fq,2,0,"p",13)(3,hq,2,0,"p",13),p()),n&2){let t=I();v(2),C("ngIf",t.isOwnProfile),v(),C("ngIf",!t.isOwnProfile)}}function gq(n,e){n&1&&(h(0,"span",53),b(1,"\u270F\uFE0F"),p())}function mq(n,e){if(n&1){let t=Z();h(0,"h1",51),B("click",function(){N(t);let i=I(2);return F(i.startEditingName())}),b(1),j(2,gq,2,0,"span",52),p()}if(n&2){let t=I(2);v(),ee(" ",t.userProfile.name||"Anonymous User"," "),v(),C("ngIf",t.isOwnProfile)}}function vq(n,e){if(n&1){let t=Z();h(0,"div",54)(1,"input",55,2),We("ngModelChange",function(i){N(t);let o=I(2);return Xe(o.tempName,i)||(o.tempName=i),F(i)}),B("keydown",function(i){N(t);let o=I(2);return F(o.onKeyDown(i,"name-edit"))})("input",function(){N(t);let i=I(2);return F(i.onNameInput())}),p(),h(3,"div",56)(4,"button",57),B("click",function(){N(t);let i=I(2);return F(i.saveName())}),b(5),p(),h(6,"button",58),B("click",function(){N(t);let i=I(2);return F(i.cancelNameEdit())}),b(7,"Cancel"),p()()()}if(n&2){let t=I(2);v(),qe("ngModel",t.tempName),v(3),C("disabled",t.savingProfile),v(),ee(" ",t.savingProfile?"Saving...":"Save"," ")}}function _q(n,e){n&1&&(h(0,"span",64),b(1,"\u26A0\uFE0F At Risk"),p())}function yq(n,e){if(n&1&&(h(0,"small",65),b(1),p()),n&2){let t=I(3);v(),ee(" Last activity: ",t.formatDate(t.userProfile.lastWriteDate)," ")}}function bq(n,e){if(n&1&&(h(0,"div",59)(1,"div",60)(2,"span",61),b(3),p(),b(4),j(5,_q,2,0,"span",62),p(),j(6,yq,2,1,"small",63),p()),n&2){let t=I(2);v(),he("streak-warning",!t.isStreakCurrent()),v(2),K(t.getStreakIcon(t.userProfile.writingStreak)),v(),ee(" ",t.userProfile.writingStreak,"-day writing streak "),v(),C("ngIf",!t.isStreakCurrent()),v(),C("ngIf",t.userProfile.lastWriteDate)}}function wq(n,e){if(n&1&&(h(0,"div",66)(1,"small",67),b(2),Ly(3,"number"),p()()),n&2){let t=I(2);v(2),Mn("Level ",t.userProfile.level||1," \u2022 ",Vy(3,2,t.getXPProgress(),"1.1-1"),"% to next level")}}function Eq(n,e){n&1&&(h(0,"span",53),b(1,"\u270F\uFE0F"),p())}function Cq(n,e){if(n&1){let t=Z();h(0,"p",68),B("click",function(){N(t);let i=I(2);return F(i.startEditingBio())}),b(1),j(2,Eq,2,0,"span",52),p()}if(n&2){let t=I(2);v(),ee(" ",t.userProfile.bio||"No bio added yet. Click to add one!"," "),v(),C("ngIf",t.isOwnProfile)}}function Iq(n,e){if(n&1){let t=Z();h(0,"div",69)(1,"textarea",70,3),We("ngModelChange",function(i){N(t);let o=I(2);return Xe(o.tempBio,i)||(o.tempBio=i),F(i)}),B("keydown",function(i){N(t);let o=I(2);return F(o.onKeyDown(i,"bio-edit"))})("input",function(){N(t);let i=I(2);return F(i.onBioInput())}),p(),h(3,"div",56)(4,"button",57),B("click",function(){N(t);let i=I(2);return F(i.saveBio())}),b(5),p(),h(6,"button",58),B("click",function(){N(t);let i=I(2);return F(i.cancelBioEdit())}),b(7,"Cancel"),p()()()}if(n&2){let t=I(2);v(),qe("ngModel",t.tempBio),v(3),C("disabled",t.savingProfile),v(),ee(" ",t.savingProfile?"Saving...":"Save"," ")}}function Sq(n,e){if(n&1){let t=Z();h(0,"span",73),B("click",function(){N(t);let i=I(3);return F(i.startEditingSocial())}),b(1,"\u270F\uFE0F"),p()}}function Tq(n,e){if(n&1&&(h(0,"h4",71),b(1," Social Links "),j(2,Sq,2,0,"span",72),p()),n&2){let t=I(2);v(2),C("ngIf",t.isOwnProfile)}}function Dq(n,e){if(n&1){let t=Z();h(0,"div",77),B("click",function(){N(t);let i=I(3);return F(i.startEditingSocial())}),h(1,"span",78),b(2,"Add your social links"),p(),h(3,"span",53),b(4,"\u270F\uFE0F"),p()()}}function xq(n,e){if(n&1&&(h(0,"a",88),ce(),h(1,"svg",89),z(2,"path",90),p()()),n&2){let t=I(4);C("href",t.getSocialUrl("fb",t.userProfile.socialLinks.fb),ct)}}function Mq(n,e){if(n&1){let t=Z();h(0,"button",91),B("click",function(){N(t);let i=I(4);return F(i.editSingleSocial("fb"))}),b(1," \u270F\uFE0F "),p()}}function Pq(n,e){if(n&1&&(h(0,"a",92),ce(),h(1,"svg",89),z(2,"path",93),p()()),n&2){let t=I(4);C("href",t.getSocialUrl("ig",t.userProfile.socialLinks.ig),ct)}}function Aq(n,e){if(n&1){let t=Z();h(0,"button",94),B("click",function(){N(t);let i=I(4);return F(i.editSingleSocial("ig"))}),b(1," \u270F\uFE0F "),p()}}function kq(n,e){if(n&1&&(h(0,"a",95),ce(),h(1,"svg",89),z(2,"path",96),p()()),n&2){let t=I(4);C("href",t.getSocialUrl("linkedin",t.userProfile.socialLinks.linkedin),ct)}}function Oq(n,e){if(n&1){let t=Z();h(0,"button",97),B("click",function(){N(t);let i=I(4);return F(i.editSingleSocial("linkedin"))}),b(1," \u270F\uFE0F "),p()}}function Rq(n,e){if(n&1){let t=Z();h(0,"button",98),B("click",function(){N(t);let i=I(4);return F(i.startEditingSocial())}),ce(),h(1,"svg",99),z(2,"path",100),p(),Ae(),h(3,"span"),b(4,"Add social link"),p()()}}function Nq(n,e){if(n&1&&(h(0,"div",79)(1,"div",80),j(2,xq,3,1,"a",81)(3,Mq,2,0,"button",82),p(),h(4,"div",80),j(5,Pq,3,1,"a",83)(6,Aq,2,0,"button",84),p(),h(7,"div",80),j(8,kq,3,1,"a",85)(9,Oq,2,0,"button",86),p(),j(10,Rq,5,0,"button",87),p()),n&2){let t=I(3);v(2),C("ngIf",t.userProfile.socialLinks==null?null:t.userProfile.socialLinks.fb),v(),C("ngIf",(t.userProfile.socialLinks==null?null:t.userProfile.socialLinks.fb)&&t.isOwnProfile),v(2),C("ngIf",t.userProfile.socialLinks==null?null:t.userProfile.socialLinks.ig),v(),C("ngIf",(t.userProfile.socialLinks==null?null:t.userProfile.socialLinks.ig)&&t.isOwnProfile),v(2),C("ngIf",t.userProfile.socialLinks==null?null:t.userProfile.socialLinks.linkedin),v(),C("ngIf",(t.userProfile.socialLinks==null?null:t.userProfile.socialLinks.linkedin)&&t.isOwnProfile),v(),C("ngIf",t.isOwnProfile&&t.canAddMoreSocials())}}function Fq(n,e){if(n&1&&(h(0,"div",74),j(1,Dq,5,0,"div",75)(2,Nq,11,7,"div",76),p()),n&2){let t=I(2);v(),C("ngIf",!t.hasSocialLinks()&&t.isOwnProfile),v(),C("ngIf",t.hasSocialLinks())}}function Lq(n,e){if(n&1){let t=Z();h(0,"button",113),B("click",function(){N(t);let i=I(4);return F(i.clearSocialInput("fb"))}),b(1," \u2715 "),p()}}function Vq(n,e){if(n&1){let t=Z();h(0,"div",107)(1,"label",108),ce(),h(2,"svg",89),z(3,"path",109),p(),b(4," Facebook "),p(),Ae(),h(5,"div",110)(6,"input",111,4),We("ngModelChange",function(i){N(t);let o=I(3);return Xe(o.tempSocialLinks.fb,i)||(o.tempSocialLinks.fb=i),F(i)}),B("input",function(i){N(t);let o=I(3);return F(o.onSocialInputChange("fb",i))}),p(),j(8,Lq,2,0,"button",112),p()()}if(n&2){let t=I(3);v(6),qe("ngModel",t.tempSocialLinks.fb),v(2),C("ngIf",t.tempSocialLinks.fb)}}function Uq(n,e){if(n&1){let t=Z();h(0,"button",113),B("click",function(){N(t);let i=I(4);return F(i.clearSocialInput("ig"))}),b(1," \u2715 "),p()}}function jq(n,e){if(n&1){let t=Z();h(0,"div",107)(1,"label",114),ce(),h(2,"svg",89),z(3,"path",115),p(),b(4," Instagram "),p(),Ae(),h(5,"div",110)(6,"input",116,5),We("ngModelChange",function(i){N(t);let o=I(3);return Xe(o.tempSocialLinks.ig,i)||(o.tempSocialLinks.ig=i),F(i)}),B("input",function(i){N(t);let o=I(3);return F(o.onSocialInputChange("ig",i))}),p(),j(8,Uq,2,0,"button",112),p()()}if(n&2){let t=I(3);v(6),qe("ngModel",t.tempSocialLinks.ig),v(2),C("ngIf",t.tempSocialLinks.ig)}}function Bq(n,e){if(n&1){let t=Z();h(0,"button",113),B("click",function(){N(t);let i=I(4);return F(i.clearSocialInput("linkedin"))}),b(1," \u2715 "),p()}}function $q(n,e){if(n&1){let t=Z();h(0,"div",107)(1,"label",117),ce(),h(2,"svg",89),z(3,"path",118),p(),b(4," LinkedIn "),p(),Ae(),h(5,"div",110)(6,"input",119,6),We("ngModelChange",function(i){N(t);let o=I(3);return Xe(o.tempSocialLinks.linkedin,i)||(o.tempSocialLinks.linkedin=i),F(i)}),B("input",function(i){N(t);let o=I(3);return F(o.onSocialInputChange("linkedin",i))}),p(),j(8,Bq,2,0,"button",112),p()()}if(n&2){let t=I(3);v(6),qe("ngModel",t.tempSocialLinks.linkedin),v(2),C("ngIf",t.tempSocialLinks.linkedin)}}function Hq(n,e){if(n&1){let t=Z();h(0,"button",120),B("click",function(){N(t);let i=I(3);return F(i.deleteSocialLink(i.editingSingleSocial))}),b(1," Remove Link "),p()}}function zq(n,e){if(n&1){let t=Z();h(0,"div",101)(1,"div",102)(2,"h5",103),b(3),p(),h(4,"p",104),b(5,"Connect with your audience on social media"),p()(),j(6,Vq,9,2,"div",105)(7,jq,9,2,"div",105)(8,$q,9,2,"div",105),h(9,"div",56)(10,"button",57),B("click",function(){N(t);let i=I(2);return F(i.saveSocialLinks())}),b(11),p(),h(12,"button",58),B("click",function(){N(t);let i=I(2);return F(i.cancelSocialEdit())}),b(13,"Cancel"),p(),j(14,Hq,2,0,"button",106),p()()}if(n&2){let t=I(2);v(3),ee(" ",t.editingSingleSocial?"Edit Social Link":"Social Links"," "),v(3),C("ngIf",!t.editingSingleSocial||t.editingSingleSocial==="fb"),v(),C("ngIf",!t.editingSingleSocial||t.editingSingleSocial==="ig"),v(),C("ngIf",!t.editingSingleSocial||t.editingSingleSocial==="linkedin"),v(2),C("disabled",t.savingProfile),v(),ee(" ",t.savingProfile?"Saving...":"Save"," "),v(3),C("ngIf",t.editingSingleSocial)}}function qq(n,e){if(n&1&&(h(0,"div",123)(1,"span",124),b(2),p(),h(3,"span",125),b(4,"Drafts"),p()()),n&2){let t=I(3);v(2),K(t.drafts.length)}}function Wq(n,e){if(n&1&&(h(0,"div",123)(1,"span",124),b(2),p(),h(3,"span",125),b(4,"Bookmarks"),p()()),n&2){let t=I(3);v(2),K(t.bookmarks.length)}}function Gq(n,e){if(n&1&&(h(0,"div",123)(1,"span",124),b(2),p(),h(3,"span",125),b(4,"Total Views"),p()()),n&2){let t=I(3);v(2),K(t.formatNumber(t.userProfile.nbViews))}}function Kq(n,e){if(n&1&&(h(0,"div",123)(1,"span",124),b(2),p(),h(3,"span",125),b(4,"Total Votes"),p()()),n&2){let t=I(3);v(2),K(t.formatNumber(t.userProfile.nbUpvotes))}}function Yq(n,e){if(n&1&&(h(0,"div",121),j(1,qq,5,1,"div",122),h(2,"div",123)(3,"span",124),b(4),p(),h(5,"span",125),b(6,"Articles"),p()(),j(7,Wq,5,1,"div",122),h(8,"div",123)(9,"span",124),b(10),p(),h(11,"span",125),b(12,"Followers"),p()(),h(13,"div",123)(14,"span",124),b(15),p(),h(16,"span",125),b(17,"Following"),p()(),j(18,Gq,5,1,"div",122)(19,Kq,5,1,"div",122),p()),n&2){let t=I(2);v(),C("ngIf",t.isOwnProfile),v(3),K(t.stories.length),v(3),C("ngIf",t.isOwnProfile),v(3),K(t.formatNumber(t.userProfile.nbFollowers)||0),v(5),K(t.formatNumber(t.userProfile.nbFollowed)||0),v(3),C("ngIf",t.userProfile.nbViews>0),v(),C("ngIf",t.userProfile.nbUpvotes>0)}}function Qq(n,e){n&1&&z(0,"div",128)}function Zq(n,e){n&1&&(h(0,"div",126),j(1,Qq,1,0,"div",127),p()),n&2&&(v(),C("ngForOf",Jr(1,uq)))}function Xq(n,e){n&1&&z(0,"span",132)}function Jq(n,e){if(n&1){let t=Z();h(0,"div",129)(1,"button",130),B("click",function(){N(t);let i=I(2);return F(i.toggleFollow())}),j(2,Xq,1,0,"span",131),b(3),p()()}if(n&2){let t=I(2);v(),he("following",t.isFollowing),C("disabled",t.followLoading),v(),C("ngIf",t.followLoading),v(),ee(" ",t.followLoading?"Loading...":t.isFollowing?"Following":"Follow"," ")}}function eW(n,e){if(n&1&&(h(0,"div",133)(1,"div",134)(2,"span",135),b(3,"\u2728"),p(),h(4,"span",136),b(5),p()()()),n&2){let t=I(2);v(5),K(t.getMotivationMessage())}}function tW(n,e){if(n&1&&(h(0,"div",149)(1,"div",150),z(2,"div",151),p(),h(3,"span",152),b(4),p()()),n&2){let t=I().$implicit;v(2),xn("width",t.progress/t.requirement*100,"%"),v(2),Mn("",t.progress,"/",t.requirement)}}function nW(n,e){n&1&&(h(0,"div",153)(1,"span",154),b(2,"\u2713"),p(),b(3," Unlocked "),p())}function rW(n,e){if(n&1&&(h(0,"div",142)(1,"div",143),b(2),p(),h(3,"div",144)(4,"div",145),b(5),p(),h(6,"div",146),b(7),p(),j(8,tW,5,4,"div",147)(9,nW,4,0,"div",148),p()()),n&2){let t=e.$implicit;he("unlocked",t.unlocked)("in-progress",!t.unlocked&&t.progress&&t.progress>0),C("title",t.description),v(2),K(t.icon),v(3),K(t.name),v(2),K(t.description),v(),C("ngIf",!t.unlocked&&t.progress!==void 0&&t.requirement),v(),C("ngIf",t.unlocked)}}function iW(n,e){if(n&1&&(h(0,"div",137)(1,"h3",138),b(2," Achievements "),h(3,"span",139),b(4),p()(),h(5,"div",140),j(6,rW,10,10,"div",141),p()()),n&2){let t=I(2);v(4),Mn("(",t.unlockedBadgesCount,"/",t.totalBadgesCount,")"),v(2),C("ngForOf",t.badges)("ngForTrackBy",t.trackByFn)}}function oW(n,e){n&1&&z(0,"div",158)}function sW(n,e){n&1&&(h(0,"div",137)(1,"h3",138),b(2,"Achievements"),p(),h(3,"div",156),j(4,oW,1,0,"div",157),p()()),n&2&&(v(4),C("ngForOf",Jr(1,dq)))}function aW(n,e){if(n&1&&j(0,sW,5,2,"div",155),n&2){let t=I(2);C("ngIf",t.loadingBadges)}}function cW(n,e){if(n&1&&(h(0,"div",159)(1,"h3",138),b(2,"Community Impact"),p(),h(3,"div",160)(4,"div",161)(5,"span",162),b(6),p(),h(7,"span",163),b(8,"Total reads across stories"),p()(),h(9,"div",161)(10,"span",162),b(11),p(),h(12,"span",163),b(13,"Total votes on stories"),p()()()()),n&2){let t=I(2);v(6),K(t.formatNumber(t.userProfile.nbViews)),v(5),K(t.formatNumber(t.userProfile.nbUpvotes))}}function lW(n,e){if(n&1){let t=Z();h(0,"button",48),B("click",function(){N(t);let i=I(2);return F(i.setActiveTab("drafts"))}),b(1),p()}if(n&2){let t=I(2);he("active",t.activeTab==="drafts"),v(),ee(" Drafts (",t.drafts.length,") ")}}function uW(n,e){if(n&1){let t=Z();h(0,"button",48),B("click",function(){N(t);let i=I(2);return F(i.setActiveTab("bookmarks"))}),b(1),p()}if(n&2){let t=I(2);he("active",t.activeTab==="bookmarks"),v(),ee(" Bookmarks (",t.bookmarks.length,") ")}}function dW(n,e){n&1&&(h(0,"div",170)(1,"span",171),b(2,"\u{1F4C5}"),p(),h(3,"span",172),b(4,"Start your writing streak!"),p()())}function fW(n,e){if(n&1){let t=Z();h(0,"button",175),B("click",function(){N(t);let i=I(4);return F(i.handleEmptyStateAction("drafts"))}),b(1),p()}if(n&2){let t=I(4);v(),ee(" ",t.getEmptyStateMessage("drafts").action," ")}}function hW(n,e){if(n&1&&(h(0,"div",167)(1,"div",168),b(2,"\u{1F4DD}"),p(),h(3,"h3"),b(4),p(),h(5,"p"),b(6),p(),h(7,"div",169)(8,"div",170)(9,"span",171),b(10,"\u{1F3AF}"),p(),h(11,"span",172),b(12,"+10 XP for creating every draft"),p()(),j(13,dW,5,0,"div",173),p(),j(14,fW,2,1,"button",174),p()),n&2){let t=I(3);v(4),K(t.getEmptyStateMessage("drafts").title),v(2),K(t.getEmptyStateMessage("drafts").subtitle),v(7),C("ngIf",t.userProfile.streaks==0),v(),C("ngIf",t.getEmptyStateMessage("drafts").action)}}function pW(n,e){n&1&&(h(0,"span",186),b(1,"\u{1F680}"),p())}function gW(n,e){n&1&&z(0,"span",192)}function mW(n,e){n&1&&(h(0,"span",193),b(1,"+25 XP"),p())}function vW(n,e){n&1&&(h(0,"span",186),b(1,"\u{1F5D1}"),p())}function _W(n,e){n&1&&z(0,"span",192)}function yW(n,e){if(n&1){let t=Z();h(0,"div",176)(1,"div",177)(2,"h2",178),b(3),p(),h(4,"h3",178),b(5),p()(),h(6,"p",179),b(7),p(),h(8,"div",180)(9,"span",181),b(10),p(),h(11,"div",182)(12,"span",183),b(13),p(),h(14,"span",183),b(15),p()(),h(16,"div",184)(17,"button",185),B("click",function(){let i=N(t).$implicit,o=I(3);return F(o.editDraft(i))}),h(18,"span",186),b(19,"\u270F\uFE0F"),p(),b(20," Edit "),p(),h(21,"button",187),B("click",function(){let i=N(t).$implicit,o=I(3);return F(o.publishDraft(i))}),j(22,pW,2,0,"span",188)(23,gW,1,0,"span",189),b(24),j(25,mW,2,0,"span",190),p(),h(26,"button",191),B("click",function(){let i=N(t).$implicit,o=I(3);return F(o.deleteDraft(i))}),j(27,vW,2,0,"span",188)(28,_W,1,0,"span",189),b(29),p()()()()}if(n&2){let t=e.$implicit,r=I(3);v(3),K(t.emoji),v(2),K(t.title),v(2),K(r.getExcerpt(t.content)),v(3),ee("Last modified ",r.formatDate(t.updatedAt)),v(3),ee("\u{1F4DD} ",t.stats.wordCount||0," words"),v(2),ee("\u23F1 ",t.stats.readTime||1," min read"),v(6),C("disabled",r.deletingItem===t.id),v(),C("ngIf",r.deletingItem!==t.id),v(),C("ngIf",r.deletingItem===t.id),v(),ee(" ",r.deletingItem===t.id?"Publishing...":"Publish"," "),v(),C("ngIf",r.deletingItem!==t.id),v(),C("disabled",r.deletingItem===t.id),v(),C("ngIf",r.deletingItem!==t.id),v(),C("ngIf",r.deletingItem===t.id),v(),ee(" ",r.deletingItem===t.id?"Deleting...":"Delete"," ")}}function bW(n,e){if(n&1&&(h(0,"div",164),j(1,hW,15,4,"div",165)(2,yW,30,15,"div",166),p()),n&2){let t=I(2);v(),C("ngIf",t.activeTab==="drafts"&&t.drafts.length===0),v(),C("ngForOf",t.drafts)("ngForTrackBy",t.trackByFn)}}function wW(n,e){n&1&&(h(0,"div",169)(1,"div",170)(2,"span",171),b(3,"\u{1F680}"),p(),h(4,"span",172),b(5,"+25 XP for publishing your first story"),p()(),h(6,"div",170)(7,"span",171),b(8,"\u{1F3C6}"),p(),h(9,"span",172),b(10,'Unlock the "Author" achievement'),p()()())}function EW(n,e){if(n&1){let t=Z();h(0,"button",175),B("click",function(){N(t);let i=I(4);return F(i.handleEmptyStateAction("articles"))}),b(1," Start Writing "),p()}}function CW(n,e){if(n&1&&(h(0,"div",167)(1,"div",168),b(2,"\u{1F4DA}"),p(),h(3,"h3"),b(4),p(),h(5,"p"),b(6),p(),j(7,wW,11,0,"div",194)(8,EW,2,0,"button",174),p()),n&2){let t=I(3);v(4),K(t.getEmptyStateMessage("articles").title),v(2),K(t.getEmptyStateMessage("articles").subtitle),v(),C("ngIf",t.isOwnProfile),v(),C("ngIf",t.isOwnProfile)}}function IW(n,e){if(n&1&&(h(0,"span",200),b(1),p()),n&2){let t=e.$implicit;v(),K(t)}}function SW(n,e){if(n&1&&(h(0,"div",198),j(1,IW,2,1,"span",199),p()),n&2){let t=I().$implicit;v(),C("ngForOf",t.tags)}}function TW(n,e){n&1&&(h(0,"span",186),b(1,"\u{1F5D1}"),p())}function DW(n,e){n&1&&z(0,"span",192)}function xW(n,e){if(n&1){let t=Z();h(0,"button",191),B("click",function(){N(t);let i=I().$implicit,o=I(3);return F(o.deleteStory(i))}),j(1,TW,2,0,"span",188)(2,DW,1,0,"span",189),b(3),p()}if(n&2){let t=I().$implicit,r=I(3);C("disabled",r.deletingItem===t.id),v(),C("ngIf",r.deletingItem!==t.id),v(),C("ngIf",r.deletingItem===t.id),v(),ee(" ",r.deletingItem===t.id?"Deleting...":"Delete"," ")}}function MW(n,e){if(n&1&&(h(0,"div",176)(1,"div",177)(2,"h2",178),b(3),p(),h(4,"h3",178),b(5),p()(),h(6,"p",179),b(7),p(),j(8,SW,2,1,"div",195),h(9,"div",180)(10,"span",181),b(11),p(),h(12,"div",182)(13,"span",183),b(14),p(),h(15,"span",183),b(16),p(),h(17,"span",183),b(18),p()(),h(19,"div",184)(20,"a",196),b(21,"Read"),p(),j(22,xW,4,4,"button",197),p()()()),n&2){let t=e.$implicit,r=I(3);v(3),K(t.emoji),v(2),K(t.title),v(2),K(r.getExcerpt(t.content)),v(),C("ngIf",t.tags&&t.tags.length>0),v(3),ee("Published ",r.formatDate(t.createdAt)),v(3),ee("\u{1F441} ",t.stats.readCount||0," views"),v(2),ee("\u2B50 ",t.stats.voteCount||0," votes"),v(2),ee("\u23F1 ",t.stats.readTime||1," min read"),v(2),C("href","/story/"+t.id,ct),v(2),C("ngIf",r.isOwnProfile)}}function PW(n,e){if(n&1&&(h(0,"div",164),j(1,CW,9,4,"div",165)(2,MW,23,10,"div",166),p()),n&2){let t=I(2);v(),C("ngIf",t.activeTab==="articles"&&t.stories.length===0),v(),C("ngForOf",t.stories)("ngForTrackBy",t.trackByFn)}}function AW(n,e){if(n&1&&(h(0,"div",167)(1,"div",168),b(2,"\u{1F516}"),p(),h(3,"h3"),b(4),p(),h(5,"p"),b(6),p(),h(7,"div",169)(8,"span",172),b(9,"+5 XP for each bookmark!"),p()()()),n&2){let t=I(3);v(4),K(t.getEmptyStateMessage("bookmarks").title),v(2),K(t.getEmptyStateMessage("bookmarks").subtitle)}}function kW(n,e){if(n&1&&(h(0,"div",198)(1,"span",200),b(2),p()()),n&2){let t=I().$implicit;v(2),K(t.category)}}function OW(n,e){if(n&1){let t=Z();h(0,"div",176)(1,"div",177)(2,"h3",178),b(3),p(),h(4,"span",201),b(5),p()(),j(6,kW,3,1,"div",195),h(7,"div",180)(8,"span",181),b(9),p(),h(10,"div",184)(11,"button",185),B("click",function(){let i=N(t).$implicit,o=I(3);return F(o.readBookmark(i))}),b(12,"Read"),p(),h(13,"button",202),b(14),p()()()()}if(n&2){let t=e.$implicit,r=I(3);v(3),K(t.title),v(2),ee("by ",t.authorName),v(),C("ngIf",t.category),v(3),ee("Saved ",r.formatDate(t.createdAt)),v(4),C("disabled",r.deletingItem===t.id),v(),ee(" ",r.deletingItem===t.id?"Removing...":"Remove"," ")}}function RW(n,e){if(n&1&&(h(0,"div",164),j(1,AW,10,2,"div",165)(2,OW,15,6,"div",166),p()),n&2){let t=I(2);v(),C("ngIf",t.bookmarks.length===0),v(),C("ngForOf",t.bookmarks)("ngForTrackBy",t.trackByFn)}}function NW(n,e){if(n&1){let t=Z();h(0,"div",14)(1,"div",15)(2,"div",16)(3,"div",17),z(4,"img",18),h(5,"div",19)(6,"span",20),b(7),p()()()(),h(8,"div",21)(9,"div",22),j(10,mq,3,2,"h1",23)(11,vq,8,3,"div",24),p(),j(12,bq,7,6,"div",25),h(13,"div",26)(14,"div",27)(15,"span",28),b(16),p(),h(17,"span",29),b(18),p()(),h(19,"div",30),z(20,"div",31),p(),j(21,wq,4,5,"div",32),p(),h(22,"div",33),j(23,Cq,3,2,"p",34)(24,Iq,8,3,"div",35),p(),h(25,"div",36),j(26,Tq,3,1,"h4",37)(27,Fq,3,2,"div",38)(28,zq,15,7,"div",39),p(),j(29,Yq,20,7,"div",40)(30,Zq,2,2,"ng-template",null,0,xr)(32,Jq,4,5,"div",41),p()(),j(33,eW,6,1,"div",42)(34,iW,7,4,"div",43)(35,aW,1,1,"ng-template",null,1,xr)(37,cW,14,2,"div",44),h(38,"div",45)(39,"div",46),j(40,lW,2,3,"button",47),h(41,"button",48),B("click",function(){N(t);let i=I();return F(i.setActiveTab("articles"))}),b(42),p(),j(43,uW,2,3,"button",47),p()(),h(44,"div",49),j(45,bW,3,3,"div",50)(46,PW,3,3,"div",50)(47,RW,3,3,"div",50),p()()}if(n&2){let t=qt(31),r=qt(36),i=I();v(4),C("src",i.userProfile.photoURL||i.defaultAvatar,ct)("alt",i.userProfile.name),v(3),K(i.userProfile.level||1),v(3),C("ngIf",!i.editingName),v(),C("ngIf",i.editingName),v(),C("ngIf",i.userProfile.writingStreak&&i.userProfile.writingStreak>0),v(4),ee("",i.userProfile.xp||0," XP"),v(2),Mn("",i.getXPNeededForNextLevel()," XP to level ",(i.userProfile.level||1)+1),v(2),xn("width",i.getXPProgress(),"%"),v(),C("ngIf",!i.loadingStats),v(2),C("ngIf",!i.editingBio),v(),C("ngIf",i.editingBio),v(2),C("ngIf",!i.editingSocial),v(),C("ngIf",!i.editingSocial),v(),C("ngIf",i.editingSocial),v(),C("ngIf",!i.loadingStats)("ngIfElse",t),v(3),C("ngIf",!i.isOwnProfile),v(),C("ngIf",i.getMotivationMessage()&&i.isOwnProfile),v(),C("ngIf",!i.loadingBadges&&i.badges.length>0&&i.badgesInitialized)("ngIfElse",r),v(3),C("ngIf",i.userProfile.nbViews||i.userProfile.nbUpvotes),v(3),C("ngIf",i.isOwnProfile),v(),he("active",i.activeTab==="articles"),v(),ee(" Articles (",i.stories.length,") "),v(),C("ngIf",i.isOwnProfile),v(2),C("ngIf",i.activeTab==="drafts"),v(),C("ngIf",i.activeTab==="articles"),v(),C("ngIf",i.activeTab==="bookmarks")}}function FW(n,e){if(n&1){let t=Z();h(0,"div",203)(1,"div",204),b(2,"\u{1F614}"),p(),h(3,"h3"),b(4,"Profile not found"),p(),h(5,"p"),b(6,"There was an error loading this profile. Please try again."),p(),h(7,"button",205),B("click",function(){N(t);let i=I();return F(i.loadProfileDataOptimized())}),h(8,"span",206),b(9,"\u{1F504}"),p(),b(10," Try Again "),p()()}}var $d=class n{constructor(e,t,r,i,o,s,a,c,u,f){this.profileService=e;this.route=t;this.viewsService=r;this.voteService=i;this.storyService=o;this.bookmarkService=s;this.authService=a;this.followService=c;this.router=u;this.notificationService=f}nameInput;bioInput;currentUser=Dg().currentUser;userProfile=null;stories=[];drafts=[];bookmarks=[];activeTab="drafts";loading=!0;savingProfile=!1;loadingStats=!1;loadingBadges=!1;deletingItem=null;editingName=!1;editingBio=!1;tempName="";tempBio="";bioSaveTimeout=null;nameSaveTimeout=null;badges=[];isOwnProfile=!1;isFollowing=!1;followLoading=!1;xpProgress=0;nextLevelXP=0;currentLevelXP=0;streakUpdated=!1;badgesInitialized=!1;defaultAvatar="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTIwIiBoZWlnaHQ9IjEyMCIgdmlld0JveD0iMCAwIDEyMCAxMjAiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CjxyZWN0IHdpZHRoPSIxMjAiIGhlaWdodD0iMTIwIiByeD0iNjAiIGZpbGw9IiNlNmIxN2EiLz4KPHN2ZyB4PSIzMCIgeT0iMzAiIHdpZHRoPSI2MCIgaGVpZ2h0PSI2MCIgdmlld0JveD0iMCAwIDI0IDI0IiBmaWxsPSJub25lIiBzdHJva2U9IndoaXRlIiBzdHJva2Utd2lkdGg9IjEuNSI+CjxwYXRoIGQ9Im0zIDkgOS0xIDktMW0tMSAyIDEwIDEwaDEwbC04LTEwbS0xLTEwSDhsLTggMTB2MTBsOC0xMVoiLz4KPC9zdmc+Cjwvc3ZnPgo=";destroy$=new Ke;statsCache=new Map;CACHE_TTL=300*1e3;ngOnInit(){this.activeTab=this.getInitialTab(),this.route.paramMap.pipe(Ci(this.destroy$),bt(e=>y(this,null,function*(){let t=e.get("id"),r=this.authService.user?.uid||this.currentUser?.uid;return this.isOwnProfile=!t||t===r,r?(!this.isOwnProfile&&this.activeTab!=="articles"&&(this.activeTab="articles"),yield this.loadProfileDataOptimized(t),se(null)):(console.error("Anonymous user must provide profile ID in route"),this.router.navigate(["/login"]),tn)}))).subscribe()}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete(),this.bioSaveTimeout&&clearTimeout(this.bioSaveTimeout),this.nameSaveTimeout&&clearTimeout(this.nameSaveTimeout)}getInitialTab(){let e=sessionStorage.getItem("profileActiveTab");return this.isOwnProfile?e&&["drafts","articles","bookmarks"].includes(e)?e:"drafts":"articles"}loadProfileDataOptimized(e){return y(this,null,function*(){this.loading=!0;try{let t=this.authService.user?.uid||this.currentUser?.uid,r=e||t;if(!r){console.error("No user ID available for profile loading"),this.resetLoadingStates();return}yield this.loadCriticalData(r),this.loading=!1,yield this.loadSecondaryDataInBackground(r)}catch(t){console.error("Error loading profile:",t),this.userProfile=null,this.showNotification("Failed to load profile data","error"),this.resetLoadingStates()}})}loadContentData(e){return y(this,null,function*(){if(this.isOwnProfile){let[t,r,i]=yield Promise.all([this.storyService.getDraftsByAuthor(e),this.storyService.getPublishedByAuthor(e),this.bookmarkService.getUserBookmarks(e)]);return{drafts:t,stories:r,bookmarks:i}}else{let[t,r]=yield Promise.all([this.storyService.getPublishedByAuthor(e),this.bookmarkService.getUserBookmarks(e)]);return{drafts:[],stories:t,bookmarks:r}}})}loadSecondaryDataInBackground(e){return y(this,null,function*(){this.loadingStats=!0,this.loadingBadges=!0;try{let t=yield this.loadStatsWithCache(e);this.userProfile.nbViews=t.totalViews,this.userProfile.nbUpvotes=t.totalVotes,this.userProfile.nbFollowed=t.followingCount,this.userProfile.nbFollowers=t.followerCount,this.loadingStats=!1,this.isOwnProfile?yield this.processXPAndAchievements():(this.initializeBadges(),this.updateBadgeProgress(),this.calculateXPProgress()),this.loadingBadges=!1}catch(t){console.error("Error loading secondary data:",t),this.loadingStats=!1,this.loadingBadges=!1}})}processXPAndAchievements(){return y(this,null,function*(){try{yield this.updateWritingStreakOnLoad(),this.calculateXPProgress(),this.initializeBadges(),this.updateBadgeProgress()}catch(e){console.error("Error processing XP and achievements:",e)}})}loadStatsWithCache(e){return y(this,null,function*(){let t=`stats_${e}`,r=this.statsCache.get(t);if(r&&Date.now()-r.timestamp<this.CACHE_TTL)return r.data;let[i,o]=yield Promise.all([this.loadStoryStatsOptimized(),this.loadFollowStats(e)]),s={totalViews:i.totalViews,totalVotes:i.totalVotes,followerCount:o.followers,followingCount:o.following};return this.statsCache.set(t,{data:s,timestamp:Date.now()}),s})}loadStoryStatsOptimized(){return y(this,null,function*(){if(this.stories.length===0)return{totalViews:0,totalVotes:0};let e=10,t=0,r=0;for(let i=0;i<this.stories.length;i+=e){let s=this.stories.slice(i,i+e).map(c=>y(this,null,function*(){try{let[u,f]=yield Promise.all([this.viewsService.getViewCount(c.id),this.voteService.countVotes(c.id)]);return c.stats.readCount=u,c.stats.voteCount=f,{views:u,votes:f}}catch(u){return console.error("Error loading stats for story:",c.id,u),c.stats.readCount=0,c.stats.voteCount=0,{views:0,votes:0}}}));(yield Promise.all(s)).forEach(c=>{t+=c.views,r+=c.votes}),i+e<this.stories.length&&(yield new Promise(c=>setTimeout(c,100)))}return{totalViews:t,totalVotes:r}})}loadFollowStats(e){return y(this,null,function*(){try{let[t,r]=yield Promise.all([this.followService.getFollowers(e),this.followService.getFollowing(e)]);return{followers:t.length,following:r.length}}catch(t){return console.error("Error loading follow stats:",t),{followers:0,following:0}}})}checkFollowStatus(e){return y(this,null,function*(){if(this.currentUser)try{this.isFollowing=yield this.followService.isFollowing(this.currentUser.uid,e)}catch(t){console.error("Error checking follow status:",t)}})}resetLoadingStates(){this.loading=!1,this.loadingStats=!1,this.loadingBadges=!1}invalidateStatsCache(e){let t=`stats_${e}`;this.statsCache.delete(t)}publishDraft(e){return y(this,null,function*(){if(yield this.confirmAction("publish-draft",e.title)){this.deletingItem=e.id;try{yield this.storyService.updateStory(e.id,{status:"published"}),yield this.awardXP(25,"Published a story"),yield this.updateWritingStreak(),this.drafts=this.drafts.filter(t=>t.id!==e.id),this.stories.unshift(re(H({},e),{status:"published"})),this.showNotification("Draft published successfully!","success"),this.currentUser&&this.invalidateStatsCache(this.currentUser.uid),this.updateBadgeProgress(),this.calculateXPProgress()}catch(t){console.error("Error publishing draft:",t),this.showNotification("Failed to publish draft","error")}finally{this.deletingItem=null}}})}toggleFollow(){return y(this,null,function*(){if(!this.currentUser||!this.userProfile||this.isOwnProfile)return;let e=this.currentUser.uid,t=this.userProfile.id,r=this.isFollowing;this.isFollowing=!this.isFollowing,this.userProfile.nbFollowers+=this.isFollowing?1:-1,this.followLoading=!0;try{yield this.followService.toggleFollow(e,t),this.isFollowing&&this.notificationService.notifyNewFollower(t,this.currentUser.displayName,e),this.showNotification(this.isFollowing?"Now following!":"Unfollowed","success"),this.invalidateStatsCache(t)}catch(i){this.isFollowing=r,this.userProfile.nbFollowers+=r?1:-1,this.showNotification("Failed to update follow status. Please try again.","error"),console.error("Error toggling follow:",i)}finally{this.followLoading=!1}})}showNotification(e,t="success"){let r=document.createElement("div");r.className=`notification notification-${t}`,r.textContent=e,r.style.cssText=`
      position: fixed;
      top: 20px;
      right: 20px;
      padding: 12px 20px;
      background: ${t==="error"?"#dc3545":t==="success"?"#28a745":"#007bff"};
      color: white;
      border-radius: 6px;
      z-index: 10000;
      opacity: 0;
      transition: opacity 0.3s ease;
    `,document.body.appendChild(r),setTimeout(()=>r.style.opacity="1",100),setTimeout(()=>{r.style.opacity="0",setTimeout(()=>document.body.removeChild(r),300)},3e3)}trackByFn(e,t){return t.id||e}setActiveTab(e){this.activeTab=e,sessionStorage.setItem("profileActiveTab",e)}confirmAction(e,t){return y(this,null,function*(){let r={"delete-draft":`Delete "${t}" draft? This cannot be undone.`,"delete-story":`Delete "${t}" story? This will permanently remove it from your published articles and cannot be undone.`,"remove-bookmark":`Remove "${t}" from bookmarks?`};return confirm(r[e]||`Are you sure you want to ${e}?`)})}onKeyDown(e,t){switch(t){case"name-edit":e.key==="Enter"?(e.preventDefault(),this.saveName()):e.key==="Escape"&&this.cancelNameEdit();break;case"bio-edit":e.key==="Enter"&&e.ctrlKey?(e.preventDefault(),this.saveBio()):e.key==="Escape"&&this.cancelBioEdit();break}}onNameInput(){clearTimeout(this.nameSaveTimeout),this.nameSaveTimeout=setTimeout(()=>{this.tempName!==(this.userProfile?.name||"")&&this.tempName.trim()&&this.autoSaveName()},2e3)}onBioInput(){clearTimeout(this.bioSaveTimeout),this.bioSaveTimeout=setTimeout(()=>{this.tempBio!==(this.userProfile?.bio||"")&&this.autoSaveBio()},2e3)}autoSaveName(){return y(this,null,function*(){try{yield this.saveName()}catch{this.showNotification("Failed to auto-save name","error")}})}autoSaveBio(){return y(this,null,function*(){try{yield this.saveBio()}catch{this.showNotification("Failed to auto-save bio","error")}})}getEmptyStateMessage(e){return{drafts:{title:"No drafts yet",subtitle:"Start writing your first draft to see it here.",action:"Create Draft"},articles:{title:this.isOwnProfile?"No published articles":"No articles yet",subtitle:this.isOwnProfile?"Publish your first draft to see it here.":"This user hasn't published any articles yet."},bookmarks:{title:"No bookmarks yet",subtitle:"Save interesting articles to read them later."}}[e]||{title:"Nothing here",subtitle:""}}handleEmptyStateAction(e){switch(e){case"drafts":this.createNewDraft();break;case"articles":this.isOwnProfile&&this.router.navigate(["/write"]);break}}getCurrentDate(){return new Date().toLocaleDateString("en-CA")}getYesterdayDate(){let e=new Date;return e.setDate(e.getDate()-1),e.toLocaleDateString("en-CA")}formatDateForComparison(e){return(e.toDate?e.toDate():new Date(e)).toLocaleDateString("en-CA")}awardStreakXP(e){return y(this,null,function*(){let t=0,r="";e%30===0?(t=200,r=`Maintained ${e}-day writing streak (monthly milestone)`):e%7===0?(t=50,r=`Maintained ${e}-day writing streak (weekly milestone)`):e===1?(t=10,r="Started a new writing streak"):(t=5,r=`Maintained ${e}-day writing streak`),t>0&&(yield this.awardXP(t,r))})}showStreakBrokenNotification(e){e>3&&this.showNotification(`Your ${e}-day writing streak was broken! Start a new one today!`,"info")}getStreakIcon(e){return e>=100?"\u{1F3C6}":e>=30?"\u{1F31F}":e>=7?"\u{1F525}":"\u{1F4C5}"}initializeBadges(){this.badges=[{id:"first-draft",name:"First Draft",description:"Created your first draft",icon:"\u{1F4DD}",unlocked:!0},{id:"first-publish",name:"Author",description:"Published your first story",icon:"\u{1F4DA}",unlocked:!1},{id:"prolific-writer",name:"Prolific Writer",description:"Published 5 stories",icon:"\u270D\uFE0F",unlocked:!1,progress:0,requirement:5},{id:"word-master",name:"Word Master",description:"Written 10,000 words total",icon:"\u{1F4D6}",unlocked:!1,progress:0,requirement:1e4},{id:"streak-novice",name:"Consistent Writer",description:"Maintained a 3-day writing streak",icon:"\u{1F4C5}",unlocked:!1,progress:0,requirement:3},{id:"streak-warrior",name:"Streak Warrior",description:"Maintained a 7-day writing streak",icon:"\u{1F525}",unlocked:!1,progress:0,requirement:7},{id:"streak-champion",name:"Streak Champion",description:"Maintained a 30-day writing streak",icon:"\u{1F3C6}",unlocked:!1,progress:0,requirement:30},{id:"streak-legend",name:"Writing Legend",description:"Maintained a 100-day writing streak",icon:"\u{1F31F}",unlocked:!1,progress:0,requirement:100},{id:"community-favorite",name:"Community Favorite",description:"Received 100 total votes",icon:"\u2B50",unlocked:!1,progress:0,requirement:100},{id:"bookworm",name:"Bookworm",description:"Bookmarked 20 stories",icon:"\u{1F516}",unlocked:!1,progress:0,requirement:20}],this.badgesInitialized=!0}updateBadgeProgress(){if(!this.userProfile||!this.badgesInitialized)return;let e=this.calculateTotalVotes(),t=0;if(this.badges.forEach(r=>{let i=r.unlocked;switch(r.id){case"first-draft":r.unlocked=this.drafts.length>0||this.stories.length>0;break;case"first-publish":r.unlocked=(this.stories.length||0)>0;break;case"prolific-writer":r.progress=Math.min(this.stories.length||0,r.requirement),r.unlocked=(this.stories.length||0)>=r.requirement;break;case"word-master":let o=this.calculateTotalWords();r.progress=Math.min(o,r.requirement),r.unlocked=o>=r.requirement;break;case"streak-novice":case"streak-warrior":case"streak-champion":case"streak-legend":let s=this.isStreakCurrent()&&this.userProfile?.writingStreak||0;r.progress=Math.min(s,r.requirement),r.unlocked=s>=r.requirement;break;case"community-favorite":r.progress=Math.min(e,r.requirement),r.unlocked=e>=r.requirement;break;case"bookworm":r.progress=Math.min(this.bookmarks.length||0,r.requirement),r.unlocked=(this.bookmarks.length||0)>=r.requirement;break}r.unlocked&&!i&&t++}),t>0&&this.isOwnProfile){let r=t===1?"New achievement unlocked!":`${t} new achievements unlocked!`;this.showNotification(r,"success")}}calculateTotalVotes(){return this.stories.reduce((e,t)=>e+(t.stats.voteCount||0),0)}calculateTotalViews(){return this.stories.reduce((e,t)=>e+(t.stats.readCount||0),0)}getXPStatusText(){if(!this.userProfile)return"";let e=this.userProfile.xp||0,t=this.userProfile.level||1,r=this.getXPNeededForNextLevel();return`Level ${t} \u2022 ${e} XP \u2022 ${r} to next level`}getDetailedXPInfo(){if(!this.userProfile)return"";let e=this.userProfile.xp||0,t=this.userProfile.level||1,r=this.getLevelXP(t),i=this.getNextLevelXP(),o=e-r,s=i-r;return`${o}/${s} XP in Level ${t}`}getMotivationMessage(){if(!this.userProfile||!this.isOwnProfile)return"";let e=this.userProfile.writingStreak||0,t=this.badges.filter(o=>o.unlocked).length,r=this.badges.length;if(e>0)return this.isStreakCurrent()?e===1?"You started a streak! Write again tomorrow to keep it going!":e<3?`Keep your ${e}-day streak alive! ${3-e} more days until your first streak badge!`:e<7?`Keep your ${e}-day streak alive! ${7-e} more days until Streak Warrior!`:e<30?`Amazing ${e}-day streak! ${30-e} more days until Streak Champion!`:e<100?`Incredible ${e}-day streak! ${100-e} more days until Writing Legend!`:`You're a Writing Legend with ${e} days! Keep the momentum going!`:"Your streak is about to break! Write something today to keep it going!";let i=this.badges.filter(o=>!o.unlocked&&o.progress!==void 0&&o.requirement!==void 0).sort((o,s)=>o.id.includes("streak")?-1:s.id.includes("streak")?1:s.progress/s.requirement-o.progress/o.requirement);if(i.length>0){let o=i[0];if(o.progress/o.requirement*100>=80)return`You're ${o.requirement-o.progress} away from "${o.name}"! ${this.getBadgeHint(o.id)}`}return this.drafts.length===0?"Start a writing streak today! Create your first draft!":this.stories.length===0&&this.drafts.length>0?"Publish a draft to start building your writing reputation!":t<r?`${r-t} achievements waiting! Consistency is key.`:"Keep up the great work! Your consistency is inspiring."}getBadgeHint(e){return{"streak-novice":"Write for 3 consecutive days!","streak-warrior":"Write every day for a full week!","streak-champion":"Maintain your daily writing for a month!","streak-legend":"The ultimate challenge - 100 days of writing!","prolific-writer":"Publish more stories to reach your goal!","word-master":"Keep writing - every word counts!","community-favorite":"Engage with the community to get more votes!",bookworm:"Discover and bookmark great content!"}[e]||""}formatNumber(e){return e==null?"0":e>=1e6?(e/1e6).toFixed(1)+"M":e>=1e3?(e/1e3).toFixed(1)+"K":e.toString()}startEditingName(){this.isOwnProfile&&(this.editingName=!0,this.tempName=this.userProfile?.displayName||"",setTimeout(()=>{this.nameInput?.nativeElement?.focus()}))}saveName(){return y(this,null,function*(){if(!(!this.userProfile||!this.tempName.trim()||!this.isOwnProfile)){this.savingProfile=!0;try{this.currentUser&&(yield this.profileService.updateProfile(this.currentUser.uid,{name:this.tempName.trim()})),this.userProfile&&(this.userProfile.displayName=this.tempName.trim()),this.editingName=!1,this.showNotification("Name updated successfully","success")}catch(e){console.error("Error updating name:",e),this.showNotification("Failed to update name","error")}finally{this.savingProfile=!1}}})}cancelNameEdit(){this.editingName=!1,this.tempName=""}startEditingBio(){this.isOwnProfile&&(this.editingBio=!0,this.tempBio=this.userProfile?.bio||"",setTimeout(()=>{this.bioInput?.nativeElement?.focus()}))}saveBio(){return y(this,null,function*(){if(!(!this.userProfile||!this.isOwnProfile)){this.savingProfile=!0;try{this.currentUser&&(yield this.profileService.updateProfile(this.currentUser.uid,{bio:this.tempBio.trim()})),this.userProfile&&(this.userProfile.bio=this.tempBio.trim()),this.editingBio=!1,this.showNotification("Bio updated successfully","success")}catch(e){console.error("Error updating bio:",e),this.showNotification("Failed to update bio","error")}finally{this.savingProfile=!1}}})}cancelBioEdit(){this.editingBio=!1,this.tempBio=""}createNewDraft(){return y(this,null,function*(){try{this.router.navigate(["/write"]),this.calculateXPProgress(),this.updateBadgeProgress()}catch(e){console.error("Error creating new draft:",e),this.showNotification("Failed to create draft","error")}})}editDraft(e){this.router.navigate(["/write",e.id])}readBookmark(e){e.storyId&&this.router.navigate(["/story/",e.storyId])}editBookmark(e){}formatDate(e){if(!e)return"";let t=e.toDate?e.toDate():new Date(e),i=new Date().getTime()-t.getTime(),o=Math.floor(i/(1e3*60*60*24));return o===0?"today":o===1?"yesterday":o<7?`${o} days ago`:o<30?`${Math.floor(o/7)} weeks ago`:o<365?`${Math.floor(o/30)} months ago`:`${Math.floor(o/365)} years ago`}getExcerpt(e,t=150){if(!e)return"";let r=e.replace(/<[^>]*>/g,"");return r.length>t?r.substring(0,t)+"...":r}calculateReadTime(e){if(!e)return 0;let t=e.trim().split(/\s+/).length;return Math.ceil(t/200)}get unlockedBadgesCount(){return this.badges?this.badges.filter(e=>e.unlocked).length:0}get totalBadgesCount(){return this.badges?this.badges.length:0}calculateLastWriteDayFromStories(){if(!this.stories||this.stories.length===0)return null;let e=this.stories.filter(t=>t.status==="published"&&t.createdAt).map(t=>{let r=t.createdAt;return r instanceof Date?r:r instanceof it?r.toDate():new Date(r)}).sort((t,r)=>r.getTime()-t.getTime());return e.length>0?e[0]:null}calculateWritingStreakFromStories(){if(!this.stories||this.stories.length===0)return 0;let e=this.stories.filter(c=>c.status==="published"&&c.createdAt).map(c=>{let u=c.createdAt?c.createdAt:new Date(c.createdAt);return this.formatDateForComparison(u)}).sort().reverse();if(e.length===0)return 0;let t=this.getCurrentDate(),r=this.getYesterdayDate(),i=e[0];if(i!==t&&i!==r)return 0;let o=0,s=[...new Set(e)],a=i===t?t:r;for(let c of s)if(c===a){o++;let u=new Date(a);u.setDate(u.getDate()-1),a=u.toLocaleDateString("en-CA")}else break;return o}loadCriticalData(e){return y(this,null,function*(){let[t,r]=yield Promise.all([this.profileService.getProfile(e),this.loadContentData(e)]);if(!t)throw new Error("Profile not found");this.drafts=r.drafts,this.stories=r.stories,this.bookmarks=r.bookmarks;let i=this.calculateLastWriteDayFromStories(),o=this.calculateWritingStreakFromStories();this.userProfile=re(H({},t),{nbUpvotes:0,nbViews:0,nbFollowed:0,nbFollowers:0,xp:t.xp||0,level:t.level||1,writingStreak:o,lastWriteDate:i?i.toISOString():null}),!this.isOwnProfile&&this.currentUser&&this.checkFollowStatus(e)})}updateWritingStreak(){return y(this,null,function*(){if(!(!this.currentUser||!this.isOwnProfile||!this.userProfile))try{let e=this.calculateWritingStreakFromStories(),t=this.calculateLastWriteDayFromStories();this.currentUser&&(yield this.profileService.updateProfile(this.currentUser.uid,{streaks:e,lastWriteDay:t||new Date}));let r=this.userProfile.writingStreak||0;this.userProfile.writingStreak=e,this.userProfile.lastWriteDate=t?t.toISOString():null,e>r&&(yield this.awardStreakXP(e))}catch(e){console.error("Error updating writing streak:",e)}})}updateWritingStreakOnLoad(){return y(this,null,function*(){if(!(!this.currentUser||!this.userProfile))try{let e=this.calculateWritingStreakFromStories(),t=this.calculateLastWriteDayFromStories(),r=this.userProfile.writingStreak||0;e!==r&&(yield this.profileService.updateProfile(this.currentUser.uid,{streaks:e,lastWriteDay:t||new Date}),e===0&&r>0&&this.showStreakBrokenNotification(r),this.userProfile.writingStreak=e,this.userProfile.lastWriteDate=t?t.toISOString():null,this.streakUpdated=!0)}catch(e){console.error("Error updating writing streak on load:",e)}})}isStreakCurrent(){let e=this.calculateLastWriteDayFromStories();if(!e)return!1;let t=new Date,r=new Date;r.setDate(r.getDate()-1);let i=this.formatDateForComparison(e),o=this.getCurrentDate(),s=this.getYesterdayDate();return i===o||i===s}calculateWordCount(e){return e?e.trim().split(/\s+/).length:0}calculateTotalWords(){return[...this.stories,...this.drafts].reduce((t,r)=>{let i=r.content||"";return t+this.calculateWordCount(i)},0)}getLevelXP(e){return e<=1?0:(e-1)*(e-1)*100}calculateLevel(e){return e<=0?1:Math.floor(Math.sqrt(e/100))+1}getNextLevelXP(){let e=this.userProfile?.level||1;return this.getLevelXP(e+1)}getXPProgress(){if(!this.userProfile)return 0;let e=this.userProfile.xp||0,t=this.userProfile.level||1,r=this.getLevelXP(t),o=this.getLevelXP(t+1)-r,s=e-r;return Math.max(0,Math.min(100,s/o*100))}getXPNeededForNextLevel(){if(!this.userProfile)return 100;let e=this.userProfile.xp||0,t=this.getNextLevelXP();return Math.max(0,t-e)}getCurrentLevelXPRange(){let e=this.userProfile?.level||1,t=this.getLevelXP(e);return this.getLevelXP(e+1)-t}calculateXPProgress(){if(!this.userProfile)return;let e=this.userProfile.xp||0,t=this.calculateLevel(e);this.userProfile.level!==t&&(this.userProfile.level=t),this.currentLevelXP=this.getLevelXP(t),this.nextLevelXP=this.getLevelXP(t+1),this.xpProgress=this.getXPProgress()}awardXP(e,t){return y(this,null,function*(){if(!(!this.currentUser||!this.userProfile))try{let r=this.userProfile.level||1,o=(this.userProfile.xp||0)+e,s=this.calculateLevel(o);yield this.profileService.awardUserXP(this.currentUser.uid,e,t),this.userProfile.xp=o,this.userProfile.level=s,this.calculateXPProgress(),s>r&&this.showLevelUpNotification(s,r)}catch(r){console.error("Error awarding XP:",r)}})}showLevelUpNotification(e,t){let r=e-t,i=r===1?`Level up! You're now level ${e}!`:`Amazing! You jumped ${r} levels to level ${e}!`;this.showNotification(i,"success")}debugXPSystem(){for(let e=1;e<=10;e++){let t=this.getLevelXP(e),r=this.calculateLevel(t),o=this.getLevelXP(e+1)-t}}deleteDraft(e){return y(this,null,function*(){if(yield this.confirmAction("delete-draft",e.title)){this.deletingItem=e.id;try{yield this.storyService.deleteDraft(e.id),this.drafts=this.drafts.filter(t=>t.id!==e.id),this.showNotification("Draft deleted successfully","success"),this.currentUser&&this.invalidateStatsCache(this.currentUser.uid)}catch(t){console.error("Error deleting draft:",t),this.showNotification("Failed to delete draft","error")}finally{this.deletingItem=null}}})}deleteStory(e){return y(this,null,function*(){if(yield this.confirmAction("delete-story",e.title)){this.deletingItem=e.id;try{yield this.storyService.deleteStory(e.id),this.stories=this.stories.filter(t=>t.id!==e.id),this.showNotification("Story deleted successfully","success"),this.currentUser&&this.invalidateStatsCache(this.currentUser.uid),this.updateBadgeProgress(),this.calculateXPProgress()}catch(t){console.error("Error deleting story:",t),this.showNotification("Failed to delete story","error")}finally{this.deletingItem=null}}})}editingSocial=!1;tempSocialLinks={};hasSocialLinks(){if(!this.userProfile?.socialLinks)return!1;let e=this.userProfile.socialLinks;return!!(e.fb||e.ig||e.linkedin)}startEditingSocial(){this.isOwnProfile&&(this.editingSocial=!0,this.tempSocialLinks={fb:this.userProfile?.socialLinks?.fb||"",ig:this.userProfile?.socialLinks?.ig||"",linkedin:this.userProfile?.socialLinks?.linkedin||""})}saveSocialLinks(){return y(this,null,function*(){if(!(!this.userProfile||!this.isOwnProfile)){this.savingProfile=!0;try{let e=this.validateAndCleanSocialLinks(this.tempSocialLinks);this.currentUser&&(yield this.profileService.updateProfile(this.currentUser.uid,{socialLinks:e})),this.userProfile.socialLinks=e,this.editingSocial=!1,this.showNotification("Social links updated successfully","success")}catch(e){console.error("Error updating social links:",e),this.showNotification("Failed to update social links","error")}finally{this.savingProfile=!1}}})}cancelSocialEdit(){this.editingSocial=!1,this.tempSocialLinks={}}validateAndCleanSocialLinks(e){let t={};return e.fb&&e.fb.trim()&&(t.fb=this.cleanSocialLink(e.fb.trim(),"facebook")),e.ig&&e.ig.trim()&&(t.ig=this.cleanSocialLink(e.ig.trim(),"instagram")),e.linkedin&&e.linkedin.trim()&&(t.linkedin=this.cleanSocialLink(e.linkedin.trim(),"linkedin")),t}cleanSocialLink(e,t){let r=e.replace(/^https?:\/\/(www\.)?/,"");switch(r=r.replace(/\/+$/,""),t){case"facebook":return r.startsWith("@")?r.substring(1):r.startsWith("facebook.com/")?r.substring(13):r.startsWith("m.facebook.com/")?r.substring(15):r;case"instagram":return r.startsWith("@")?r.substring(1):r.startsWith("instagram.com/")?r.substring(14):r;case"linkedin":return r.startsWith("linkedin.com/in/")?r.substring(16):r.startsWith("linkedin.com/company/")?r.substring(21):r.startsWith("linkedin.com/")?r.substring(13):r;default:return r}}getSocialUrl(e,t){if(!t)return"#";if(t.startsWith("http://")||t.startsWith("https://"))return t;switch(e){case"fb":return`https://facebook.com/${t}`;case"ig":return`https://instagram.com/${t}`;case"linkedin":return t.includes("/company/")||this.isCompanyLinkedIn(t)?`https://linkedin.com/company/${t}`:`https://linkedin.com/in/${t}`;default:return"#"}}isCompanyLinkedIn(e){let t=["company","corp","inc","ltd","llc","technologies","solutions","services","consulting","group"],r=e.toLowerCase();return t.some(i=>r.includes(i))}validateSocialLink(e,t){if(!t||!t.trim())return{valid:!0};let r=t.trim();if(r.length>100)return{valid:!1,message:"Link is too long"};switch(e){case"fb":if(this.containsInvalidChars(r,"facebook"))return{valid:!1,message:"Invalid characters in Facebook link"};break;case"ig":if(this.containsInvalidChars(r,"instagram"))return{valid:!1,message:"Invalid characters in Instagram link"};break;case"linkedin":if(this.containsInvalidChars(r,"linkedin"))return{valid:!1,message:"Invalid characters in LinkedIn link"};break}return{valid:!0}}containsInvalidChars(e,t){let r=e.replace(/^https?:\/\/(www\.|m\.)?/,"");return r=r.replace(/^@/,""),r=r.replace(new RegExp(`^${t}.com/`),""),/[<>{}|\\^`\[\]]/.test(r)}getSocialDisplayText(e,t){if(!t)return"";if(!t.includes("/")&&!t.includes("."))return`@${t}`;let r=this.cleanSocialLink(t,e);return r.length>20?`@${r.substring(0,17)}...`:`@${r}`}editingSingleSocial=null;editSingleSocial(e){this.isOwnProfile&&(this.editingSocial=!0,this.editingSingleSocial=e,this.tempSocialLinks={fb:e==="fb"&&this.userProfile?.socialLinks?.fb||"",ig:e==="ig"&&this.userProfile?.socialLinks?.ig||"",linkedin:e==="linkedin"&&this.userProfile?.socialLinks?.linkedin||""})}clearSocialInput(e){this.tempSocialLinks[e]=""}getSocialPlatformName(e){return{fb:"Facebook",ig:"Instagram",linkedin:"LinkedIn"}[e]}deleteSocialLink(e){return y(this,null,function*(){if(!(!this.isOwnProfile||!this.userProfile?.socialLinks)&&confirm(`Remove your ${this.getSocialPlatformName(e)} link?`)){this.savingProfile=!0;try{let t=H({},this.userProfile.socialLinks);delete t[e],this.currentUser&&(yield this.profileService.updateProfile(this.currentUser.uid,{socialLinks:t})),this.userProfile.socialLinks=t,this.editingSocial=!1,this.editingSingleSocial=null,this.showNotification("Social link removed successfully","success")}catch(t){console.error("Error deleting social link:",t),this.showNotification("Failed to remove social link","error")}finally{this.savingProfile=!1}}})}canAddMoreSocials(){if(!this.userProfile?.socialLinks)return!0;let e=this.userProfile.socialLinks;return[e.fb,e.ig,e.linkedin].filter(Boolean).length<3}onSocialInputChange(e,t){let r=t.target,i=this.validateSocialLink(e,r.value);r.classList.remove("valid","invalid"),r.value.trim()&&r.classList.add(i.valid?"valid":"invalid")}static \u0275fac=function(t){return new(t||n)(ne(fr),ne(An),ne(al),ne(Xo),ne(gi),ne(sl),ne(ot),ne(Bm),ne(Ve),ne(hr))};static \u0275cmp=et({type:n,selectors:[["app-profile"]],viewQuery:function(t,r){if(t&1&&(Co(cq,5),Co(lq,5)),t&2){let i;Qr(i=Zr())&&(r.nameInput=i.first),Qr(i=Zr())&&(r.bioInput=i.first)}},decls:4,vars:3,consts:[["statsLoader",""],["badgesLoader",""],["nameInput",""],["bioInput",""],["facebookInput",""],["instagramInput",""],["linkedinInput",""],[1,"profile-container"],["class","loading-state",4,"ngIf"],["class","profile-content",4,"ngIf"],["class","error-state",4,"ngIf"],[1,"loading-state"],[1,"spinner"],[4,"ngIf"],[1,"profile-content"],[1,"profile-header"],[1,"avatar-section"],[1,"avatar-container"],[1,"avatar",3,"src","alt"],[1,"level-badge"],[1,"level-number"],[1,"profile-info"],[1,"name-section"],["class","user-name",3,"click",4,"ngIf"],["class","name-edit",4,"ngIf"],["class","streak-section",4,"ngIf"],[1,"xp-section"],[1,"xp-info"],[1,"xp-current"],[1,"xp-next"],[1,"xp-bar"],[1,"xp-progress"],["class","xp-details",4,"ngIf"],[1,"bio-section"],["class","user-bio",3,"click",4,"ngIf"],["class","bio-edit",4,"ngIf"],[1,"social-section"],["class","social-title",4,"ngIf"],["class","social-links-display",4,"ngIf"],["class","social-edit-form",4,"ngIf"],["class","user-stats",4,"ngIf","ngIfElse"],["class","follow-section",4,"ngIf"],["class","motivation-banner",4,"ngIf"],["class","badges-section",4,"ngIf","ngIfElse"],["class","community-section",4,"ngIf"],[1,"tabs-container"],[1,"tabs"],["class","tab",3,"active","click",4,"ngIf"],[1,"tab",3,"click"],[1,"content-container"],["class","content-section",4,"ngIf"],[1,"user-name",3,"click"],["class","edit-icon",4,"ngIf"],[1,"edit-icon"],[1,"name-edit"],["maxlength","50","placeholder","Enter your name",1,"name-input",3,"ngModelChange","keydown","input","ngModel"],[1,"edit-actions"],[1,"save-btn",3,"click","disabled"],[1,"cancel-btn",3,"click"],[1,"streak-section"],[1,"streak-indicator"],[1,"streak-icon"],["class","streak-status",4,"ngIf"],["class","streak-info",4,"ngIf"],[1,"streak-status"],[1,"streak-info"],[1,"xp-details"],[1,"level-info"],[1,"user-bio",3,"click"],[1,"bio-edit"],["rows","3","maxlength","200","placeholder","Tell us about yourself...",1,"bio-textarea",3,"ngModelChange","keydown","input","ngModel"],[1,"social-title"],["class","edit-icon",3,"click",4,"ngIf"],[1,"edit-icon",3,"click"],[1,"social-links-display"],["class","social-placeholder",3,"click",4,"ngIf"],["class","social-links-grid",4,"ngIf"],[1,"social-placeholder",3,"click"],[1,"placeholder-text"],[1,"social-links-grid"],[1,"social-link-wrapper"],["target","_blank","rel","noopener noreferrer","class","social-link facebook",3,"href",4,"ngIf"],["class","edit-social-btn","title","Edit Facebook link",3,"click",4,"ngIf"],["target","_blank","rel","noopener noreferrer","class","social-link instagram",3,"href",4,"ngIf"],["class","edit-social-btn","title","Edit Instagram link",3,"click",4,"ngIf"],["target","_blank","rel","noopener noreferrer","class","social-link linkedin",3,"href",4,"ngIf"],["class","edit-social-btn","title","Edit LinkedIn link",3,"click",4,"ngIf"],["class","add-social-btn","title","Add more social links",3,"click",4,"ngIf"],["target","_blank","rel","noopener noreferrer",1,"social-link","facebook",3,"href"],["viewBox","0 0 24 24","fill","currentColor",1,"social-icon"],["d",`M24 12.073c0-6.627-5.373-12-12-12s-12 
                      5.373-12 12c0 5.99 4.388 10.954 10.125 
                      11.854v-8.385H7.078v-3.47h3.047V9.43c0-3.007 
                      1.792-4.669 4.533-4.669 1.312 0 
                      2.686.235 2.686.235v2.953H15.83c-1.491 
                      0-1.956.925-1.956 1.874v2.25h3.328l-.532 
                      3.47h-2.796v8.385C19.612 23.027 
                      24 18.062 24 12.073z`],["title","Edit Facebook link",1,"edit-social-btn",3,"click"],["target","_blank","rel","noopener noreferrer",1,"social-link","instagram",3,"href"],["d",`M12 2.163c3.204 0 3.584.012 
                      4.85.07 3.252.148 4.771 1.691 
                      4.919 4.919.058 1.265.069 
                      1.645.069 4.849 0 3.205-.012 
                      3.584-.069 4.849-.149 3.225-1.664 
                      4.771-4.919 4.919-1.266.058-1.644.07-4.85.07-3.204 
                      0-3.584-.012-4.849-.07-3.26-.149-4.771-1.699-4.919-4.92-.058-1.265-.07-1.644-.07-4.849 
                      0-3.204.013-3.583.07-4.849.149-3.227 
                      1.664-4.771 4.919-4.919 1.266-.057 
                      1.645-.069 4.849-.069zM12 
                      7.001a5 5 0 1 0 0 10 5 5 0 
                      0 0 0-10zm6.406-2.684a1.44 
                      1.44 0 1 0 0 2.88 1.44 1.44 
                      0 0 0 0-2.88z`],["title","Edit Instagram link",1,"edit-social-btn",3,"click"],["target","_blank","rel","noopener noreferrer",1,"social-link","linkedin",3,"href"],["d",`M20.447 20.452h-3.554v-5.569c0-1.328-.027-3.037-1.852-3.037-1.853 
                      0-2.136 1.445-2.136 2.939v5.667H9.351V9h3.414v1.561h.046c.477-.9 
                      1.637-1.85 3.37-1.85 3.601 0 
                      4.267 2.37 4.267 5.455v6.286zM5.337 
                      7.433c-1.144 0-2.063-.926-2.063-2.065 
                      0-1.138.92-2.063 2.063-2.063 
                      1.14 0 2.064.925 2.064 
                      2.063 0 1.139-.925 2.065-2.064 
                      2.065zm1.782 13.019H3.555V9h3.564v11.452zM22.225 
                      0H1.771C.792 0 0 .774 0 1.729v20.542C0 
                      23.227.792 24 1.771 24h20.451C23.2 
                      24 24 23.227 24 22.271V1.729C24 
                      .774 23.2 0 22.222 0h.003z`],["title","Edit LinkedIn link",1,"edit-social-btn",3,"click"],["title","Add more social links",1,"add-social-btn",3,"click"],["viewBox","0 0 24 24","fill","currentColor",1,"add-icon"],["d","M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6v2z"],[1,"social-edit-form"],[1,"form-header"],[1,"form-title"],[1,"form-subtitle"],["class","social-input-group",4,"ngIf"],["class","delete-btn","title","Remove this social link",3,"click",4,"ngIf"],[1,"social-input-group"],["for","facebook-input",1,"social-input-label"],["d",`M24 12.073c0-6.627-5.373-12-12-12s-12 
                   5.373-12 12c0 5.99 4.388 10.954 10.125 
                   11.854v-8.385H7.078v-3.47h3.047V9.43c0-3.007 
                   1.792-4.669 4.533-4.669 1.312 0 
                   2.686.235 2.686.235v2.953H15.83c-1.491 
                   0-1.956.925-1.956 1.874v2.25h3.328l-.532 
                   3.47h-2.796v8.385C19.612 23.027 
                   24 18.062 24 12.073z`],[1,"input-with-actions"],["id","facebook-input","placeholder","facebook.com/yourprofile or @username","maxlength","100",1,"social-input",3,"ngModelChange","input","ngModel"],["type","button","class","clear-input-btn","title","Clear",3,"click",4,"ngIf"],["type","button","title","Clear",1,"clear-input-btn",3,"click"],["for","instagram-input",1,"social-input-label"],["d",`M12 2.163c3.204 0 3.584.012 
                   4.85.07 3.252.148 4.771 1.691 
                   4.919 4.919.058 1.265.069 
                   1.645.069 4.849 0 3.205-.012 
                   3.584-.069 4.849-.149 3.225-1.664 
                   4.771-4.919 4.919-1.266.058-1.644.07-4.85.07-3.204 
                   0-3.584-.012-4.849-.07-3.26-.149-4.771-1.699-4.919-4.92-.058-1.265-.07-1.644-.07-4.849 
                   0-3.204.013-3.583.07-4.849.149-3.227 
                   1.664-4.771 4.919-4.919 1.266-.057 
                   1.645-.069 4.849-.069zM12 
                   7.001a5 5 0 1 0 0 10 5 5 0 
                   0 0 0-10zm6.406-2.684a1.44 
                   1.44 0 1 0 0 2.88 1.44 1.44 
                   0 0 0 0-2.88z`],["id","instagram-input","placeholder","instagram.com/username or @username","maxlength","100",1,"social-input",3,"ngModelChange","input","ngModel"],["for","linkedin-input",1,"social-input-label"],["d",`M20.447 20.452h-3.554v-5.569c0-1.328-.027-3.037-1.852-3.037-1.853 
                   0-2.136 1.445-2.136 2.939v5.667H9.351V9h3.414v1.561h.046c.477-.9 
                   1.637-1.85 3.37-1.85 3.601 0 
                   4.267 2.37 4.267 5.455v6.286zM5.337 
                   7.433c-1.144 0-2.063-.926-2.063-2.065 
                   0-1.138.92-2.063 2.063-2.063 
                   1.14 0 2.064.925 2.064 
                   2.063 0 1.139-.925 2.065-2.064 
                   2.065zm1.782 13.019H3.555V9h3.564v11.452zM22.225 
                   0H1.771C.792 0 0 .774 0 1.729v20.542C0 
                   23.227.792 24 1.771 24h20.451C23.2 
                   24 24 23.227 24 22.271V1.729C24 
                   .774 23.2 0 22.222 0h.003z`],["id","linkedin-input","placeholder","linkedin.com/in/yourprofile or linkedin.com/company/yourcompany","maxlength","100",1,"social-input",3,"ngModelChange","input","ngModel"],["title","Remove this social link",1,"delete-btn",3,"click"],[1,"user-stats"],["class","stat",4,"ngIf"],[1,"stat"],[1,"stat-number"],[1,"stat-label"],[1,"stats-skeleton"],["class","skeleton-item",4,"ngFor","ngForOf"],[1,"skeleton-item"],[1,"follow-section"],[1,"follow-btn",3,"click","disabled"],["class","button-spinner",4,"ngIf"],[1,"button-spinner"],[1,"motivation-banner"],[1,"motivation-content"],[1,"motivation-icon"],[1,"motivation-text"],[1,"badges-section"],[1,"section-title"],[1,"achievement-count"],[1,"badges-grid"],["class","badge-item",3,"unlocked","in-progress","title",4,"ngFor","ngForOf","ngForTrackBy"],[1,"badge-item",3,"title"],[1,"badge-icon"],[1,"badge-info"],[1,"badge-name"],[1,"badge-description"],["class","badge-progress",4,"ngIf"],["class","badge-unlocked",4,"ngIf"],[1,"badge-progress"],[1,"progress-bar"],[1,"progress-fill"],[1,"progress-text"],[1,"badge-unlocked"],[1,"unlock-icon"],["class","badges-section",4,"ngIf"],[1,"badges-skeleton"],["class","badge-skeleton",4,"ngFor","ngForOf"],[1,"badge-skeleton"],[1,"community-section"],[1,"impact-stats"],[1,"impact-stat"],[1,"impact-number"],[1,"impact-label"],[1,"content-section"],["class","empty-state",4,"ngIf"],["class","content-card",4,"ngFor","ngForOf","ngForTrackBy"],[1,"empty-state"],[1,"empty-icon"],[1,"empty-rewards"],[1,"reward-item"],[1,"reward-icon"],[1,"reward-text"],["class","reward-item",4,"ngIf"],["class","create-btn",3,"click",4,"ngIf"],[1,"create-btn",3,"click"],[1,"content-card"],[1,"card-header"],[1,"card-title"],[1,"card-excerpt"],[1,"card-footer"],[1,"card-date"],[1,"card-stats"],[1,"stat-item"],[1,"card-actions"],[1,"action-btn",3,"click"],[1,"btn-icon"],[1,"action-btn","publish",3,"click","disabled"],["class","btn-icon",4,"ngIf"],["class","btn-spinner",4,"ngIf"],["class","btn-reward",4,"ngIf"],[1,"action-btn","danger",3,"click","disabled"],[1,"btn-spinner"],[1,"btn-reward"],["class","empty-rewards",4,"ngIf"],["class","bookmark-tags",4,"ngIf"],[1,"action-btn",2,"text-decoration","none",3,"href"],["class","action-btn danger",3,"disabled","click",4,"ngIf"],[1,"bookmark-tags"],["class","tag",4,"ngFor","ngForOf"],[1,"tag"],[1,"card-meta"],[1,"action-btn","danger",3,"disabled"],[1,"error-state"],[1,"error-icon"],[1,"retry-btn",3,"click"],[1,"retry-icon"]],template:function(t,r){t&1&&(h(0,"div",7),j(1,pq,4,2,"div",8)(2,NW,48,32,"div",9)(3,FW,11,0,"div",10),p()),t&2&&(v(),C("ngIf",r.loading),v(),C("ngIf",!r.loading&&r.userProfile),v(),C("ngIf",!r.loading&&!r.userProfile))},dependencies:[On,un,kn,ha,Cn,Lt,Pn,Wt,rb],styles:['@charset "UTF-8";.profile-container[_ngcontent-%COMP%]{max-width:960px;margin:0 auto;padding:2rem;font-family:Inter,sans-serif;color:#333}.loading-state[_ngcontent-%COMP%]{text-align:center;font-size:1.2rem;color:#777}.spinner[_ngcontent-%COMP%]{border:4px solid rgba(0,0,0,.1);border-left-color:#f7c843;border-radius:50%;width:40px;height:40px;animation:_ngcontent-%COMP%_spin 1s linear infinite;margin:1rem auto}@keyframes _ngcontent-%COMP%_spin{to{transform:rotate(360deg)}}.error-message[_ngcontent-%COMP%]{text-align:center;font-size:1.2rem;color:#e74c3c;margin:2rem 0}.profile-header[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;margin-bottom:2rem;position:relative}.avatar-container[_ngcontent-%COMP%]{position:relative;display:inline-block}.avatar[_ngcontent-%COMP%]{width:128px;height:128px;border-radius:50%;object-fit:cover;border:3px solid #f7c843;transition:transform .3s}.avatar[_ngcontent-%COMP%]:hover{transform:scale(1.05)}.level-badge[_ngcontent-%COMP%]{position:absolute;bottom:0;right:0;background:#f7c843;color:#333;border-radius:50%;padding:.3rem .6rem;font-weight:700;font-size:.8rem;border:2px solid #fff}.profile-details[_ngcontent-%COMP%]{margin-top:1rem;text-align:center}.profile-name[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;gap:.5rem}.profile-name[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{margin:0;font-size:1.8rem}.edit-input[_ngcontent-%COMP%]{font-size:1.2rem;padding:.4rem}.profile-bio[_ngcontent-%COMP%]{margin-top:.5rem;color:#555;font-size:1rem}.editable-text[_ngcontent-%COMP%]{cursor:pointer;display:inline-block}.editable-text[_ngcontent-%COMP%]:hover{background:#edeae3;padding:0 .2rem;border-radius:4px}.edit-actions[_ngcontent-%COMP%]{display:flex;gap:.5rem;margin-top:.3rem}.btn[_ngcontent-%COMP%]{padding:.3rem .7rem;border:none;border-radius:4px;cursor:pointer;font-size:.9rem;transition:background .2s}.btn-save[_ngcontent-%COMP%]{background:#2ecc71;color:#fff}.btn-cancel[_ngcontent-%COMP%]{background:#e74c3c;color:#fff}.btn[_ngcontent-%COMP%]:hover{opacity:.9}.xp-section[_ngcontent-%COMP%]{margin:1.5rem 0;text-align:center}.progress-bar[_ngcontent-%COMP%]{background:#edeae3;border-radius:10px;overflow:hidden;height:20px;width:100%;margin:.5rem 0}.progress[_ngcontent-%COMP%]{background:#f7c843;height:100%;transition:width .3s}.streak[_ngcontent-%COMP%]{margin-top:.5rem;font-size:.9rem;color:#333;display:flex;align-items:center;justify-content:center;gap:.3rem}.achievements[_ngcontent-%COMP%]{margin:2rem 0}.achievements[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin-bottom:1rem}.badges[_ngcontent-%COMP%]{display:flex;gap:1rem;flex-wrap:wrap}.badge[_ngcontent-%COMP%]{background:#edeae3;padding:.6rem 1rem;border-radius:8px;text-align:center;flex:1;min-width:120px;transition:background .2s,transform .2s}.badge[_ngcontent-%COMP%]:hover{background:#f7c843;transform:translateY(-3px)}.stats[_ngcontent-%COMP%]{display:flex;justify-content:space-around;margin:2rem 0;flex-wrap:wrap;gap:1rem}.stat[_ngcontent-%COMP%]{background:#fdfcf9;padding:1rem;border-radius:8px;flex:1;min-width:120px;text-align:center;box-shadow:0 2px 4px #0000000d}.stat[_ngcontent-%COMP%]   .number[_ngcontent-%COMP%]{font-size:1.5rem;font-weight:700;color:#333}.stat[_ngcontent-%COMP%]   .label[_ngcontent-%COMP%]{color:#777;font-size:.9rem}.follow-button[_ngcontent-%COMP%]{margin-top:1rem}.btn-follow[_ngcontent-%COMP%]{background:#f7c843;padding:.6rem 1.2rem;border-radius:20px;font-weight:700;font-size:1rem}.btn-follow[_ngcontent-%COMP%]:hover{background:#e6b839}.motivation-banner[_ngcontent-%COMP%]{background:#f7c843;padding:1rem;border-radius:8px;text-align:center;margin:1.5rem 0;font-weight:700;color:#333}.tabs[_ngcontent-%COMP%]{display:flex;justify-content:center;gap:1rem;margin:2rem 0}.tabs[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding:.5rem 1.2rem;border:none;border-radius:20px;background:#edeae3;cursor:pointer;transition:background .2s}.tabs[_ngcontent-%COMP%]   button.active[_ngcontent-%COMP%]{background:#f7c843;font-weight:700}.tabs[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{background:#f7c843}.section-content[_ngcontent-%COMP%]{min-height:200px}.empty-state[_ngcontent-%COMP%]{text-align:center;color:#777;margin:2rem 0}.rewards[_ngcontent-%COMP%]{margin-top:1rem}.draft-card[_ngcontent-%COMP%], .article-card[_ngcontent-%COMP%], .bookmark-card[_ngcontent-%COMP%]{background:#fdfcf9;border:1px solid #edeae3;border-radius:8px;padding:1rem;margin-bottom:1rem;transition:box-shadow .2s}.draft-card[_ngcontent-%COMP%]:hover, .article-card[_ngcontent-%COMP%]:hover, .bookmark-card[_ngcontent-%COMP%]:hover{box-shadow:0 4px 8px #00000014}.draft-header[_ngcontent-%COMP%], .article-header[_ngcontent-%COMP%], .bookmark-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center}.draft-title[_ngcontent-%COMP%], .article-title[_ngcontent-%COMP%], .bookmark-title[_ngcontent-%COMP%]{font-size:1.1rem;font-weight:700}.draft-excerpt[_ngcontent-%COMP%], .article-excerpt[_ngcontent-%COMP%]{margin:.5rem 0;color:#555}.draft-actions[_ngcontent-%COMP%], .article-actions[_ngcontent-%COMP%], .bookmark-actions[_ngcontent-%COMP%]{margin-top:.5rem;display:flex;gap:.5rem}.draft-actions[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%], .article-actions[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%], .bookmark-actions[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{font-size:.8rem;padding:.3rem .7rem;background:#edeae3;border-radius:4px}.draft-actions[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]:hover, .article-actions[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]:hover, .bookmark-actions[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]:hover{background:#f7c843}.skeleton[_ngcontent-%COMP%]{background:linear-gradient(90deg,#edeae3 25%,#fdfcf9,#edeae3 75%);background-size:200% 100%;animation:_ngcontent-%COMP%_shimmer 1.5s infinite;border-radius:4px}.skeleton.avatar[_ngcontent-%COMP%]{width:128px;height:128px;border-radius:50%}.skeleton-text[_ngcontent-%COMP%]{height:16px;margin:.3rem 0}.skeleton-title[_ngcontent-%COMP%]{height:24px;margin:.5rem 0}.skeleton-stat[_ngcontent-%COMP%], .skeleton-badge[_ngcontent-%COMP%]{height:20px;width:80px;margin:.5rem}@keyframes _ngcontent-%COMP%_shimmer{to{background-position:-200% 0}}@media (max-width: 600px){.stats[_ngcontent-%COMP%], .badges[_ngcontent-%COMP%]{flex-direction:column}.tabs[_ngcontent-%COMP%]{flex-wrap:wrap}}.loading-state[_ngcontent-%COMP%], .error-state[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;min-height:400px;text-align:center}.spinner[_ngcontent-%COMP%]{width:40px;height:40px;border:4px solid #EDEAE3;border-top:4px solid #F7C843;border-radius:50%;animation:_ngcontent-%COMP%_spin 1s linear infinite;margin-bottom:1rem}@keyframes _ngcontent-%COMP%_spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}.profile-header[_ngcontent-%COMP%]{display:flex;gap:2rem;margin-bottom:2rem;background:#fff;padding:2rem;border-radius:16px;box-shadow:0 2px 8px #0000000a;border:1px solid #EDEAE3}.avatar-section[_ngcontent-%COMP%]{flex-shrink:0;position:relative}.avatar-container[_ngcontent-%COMP%]{position:relative;cursor:pointer;width:120px;height:120px;border-radius:50%;overflow:hidden;transition:all .2s ease}.avatar[_ngcontent-%COMP%]{width:100%;height:100%;object-fit:cover;border:3px solid #EDEAE3}.level-badge[_ngcontent-%COMP%]{position:absolute;bottom:-5px;right:-5px;width:36px;height:36px;background:linear-gradient(135deg,#f7c843,#edeae3);border:3px solid white;border-radius:50%;display:flex;align-items:center;justify-content:center;box-shadow:0 2px 8px #f7c8434d}.level-number[_ngcontent-%COMP%]{color:#2e2e2e;font-weight:700;font-size:.875rem}.profile-info[_ngcontent-%COMP%]{flex:1;min-width:0}.name-section[_ngcontent-%COMP%]{margin-bottom:1rem}.user-name[_ngcontent-%COMP%]{font-size:2rem;font-weight:700;color:#2e2e2e;margin:0;cursor:pointer;display:inline-flex;align-items:center;gap:.5rem;transition:color .2s ease}.user-name[_ngcontent-%COMP%]:hover{color:#f7c843}.edit-icon[_ngcontent-%COMP%]{font-size:1rem;opacity:0;transition:opacity .2s ease}.user-name[_ngcontent-%COMP%]:hover   .edit-icon[_ngcontent-%COMP%], .user-bio[_ngcontent-%COMP%]:hover   .edit-icon[_ngcontent-%COMP%]{opacity:1}.streak-section[_ngcontent-%COMP%]{margin-bottom:1rem}.streak-indicator[_ngcontent-%COMP%]{display:inline-flex;align-items:center;gap:.5rem;background:linear-gradient(135deg,#f7c843,#edeae3);color:#2e2e2e;padding:.5rem 1rem;border-radius:20px;font-size:.875rem;font-weight:600;box-shadow:0 2px 8px #f7c84333;margin-bottom:.5rem;transition:all .3s ease}.streak-indicator.streak-warning[_ngcontent-%COMP%]{background:linear-gradient(135deg,#ff6b6b,#feca57);animation:_ngcontent-%COMP%_pulse 2s infinite}@keyframes _ngcontent-%COMP%_pulse{0%,to{transform:scale(1)}50%{transform:scale(1.02)}}.streak-icon[_ngcontent-%COMP%]{font-size:1rem}.streak-status[_ngcontent-%COMP%]{font-size:.75rem;margin-left:.25rem}.streak-info[_ngcontent-%COMP%]{color:#666;font-size:.75rem}.xp-section[_ngcontent-%COMP%]{margin-bottom:1rem}.xp-info[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:.5rem;font-size:.875rem}.xp-current[_ngcontent-%COMP%]{font-weight:600;color:#2e2e2e}.xp-next[_ngcontent-%COMP%]{color:#666}.xp-bar[_ngcontent-%COMP%]{height:8px;background:#edeae3;border-radius:4px;overflow:hidden}.xp-progress[_ngcontent-%COMP%]{height:100%;background:linear-gradient(90deg,#f7c843,#edeae3);border-radius:4px;transition:width .3s ease}.follow-section[_ngcontent-%COMP%]{margin-top:1rem}.follow-btn[_ngcontent-%COMP%]{padding:.75rem 1.5rem;border-radius:8px;font-size:.875rem;font-weight:600;cursor:pointer;transition:all .2s ease;border:2px solid #F7C843;background:#f7c843;color:#2e2e2e}.follow-btn[_ngcontent-%COMP%]:hover{background:#edeae3}.follow-btn.following[_ngcontent-%COMP%]{background:transparent;color:#f7c843}.follow-btn.following[_ngcontent-%COMP%]:hover{background:#edeae3}.follow-btn[_ngcontent-%COMP%]:disabled{opacity:.6;cursor:not-allowed}.name-edit[_ngcontent-%COMP%], .bio-edit[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:.75rem}.name-input[_ngcontent-%COMP%]{font-size:2rem;font-weight:700;color:#2e2e2e;border:2px solid #F7C843;border-radius:8px;padding:.5rem;background:#fdfcf9;font-family:inherit;outline:none}.bio-section[_ngcontent-%COMP%]{margin-bottom:1.5rem}.user-bio[_ngcontent-%COMP%]{font-size:1.125rem;color:#666;line-height:1.6;margin:0;cursor:pointer;display:inline-flex;align-items:flex-start;gap:.5rem;transition:color .2s ease}.user-bio[_ngcontent-%COMP%]:hover{color:#2e2e2e}.bio-textarea[_ngcontent-%COMP%]{font-size:1.125rem;color:#2e2e2e;border:2px solid #F7C843;border-radius:8px;padding:.75rem;background:#fdfcf9;font-family:inherit;resize:vertical;outline:none;line-height:1.6;min-height:80px}.edit-actions[_ngcontent-%COMP%]{display:flex;gap:.5rem}.save-btn[_ngcontent-%COMP%], .cancel-btn[_ngcontent-%COMP%], .create-btn[_ngcontent-%COMP%], .retry-btn[_ngcontent-%COMP%]{padding:.5rem 1rem;border-radius:6px;font-size:.875rem;font-weight:500;cursor:pointer;transition:all .2s ease;border:none}.save-btn[_ngcontent-%COMP%], .create-btn[_ngcontent-%COMP%], .retry-btn[_ngcontent-%COMP%]{background:#f7c843;color:#2e2e2e}.save-btn[_ngcontent-%COMP%]:hover, .create-btn[_ngcontent-%COMP%]:hover, .retry-btn[_ngcontent-%COMP%]:hover{background:#edeae3}.save-btn[_ngcontent-%COMP%]:disabled{background:#666;cursor:not-allowed}.cancel-btn[_ngcontent-%COMP%]{background:#edeae3;color:#666}.cancel-btn[_ngcontent-%COMP%]:hover{background:#666;color:#fff}.user-stats[_ngcontent-%COMP%]{display:flex;gap:2rem;flex-wrap:wrap}.stat[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;text-align:center;min-width:80px}.stat-number[_ngcontent-%COMP%]{font-size:1.5rem;font-weight:700;color:#2e2e2e}.stat-label[_ngcontent-%COMP%]{font-size:.875rem;color:#666;text-transform:uppercase;letter-spacing:.05em}.motivation-banner[_ngcontent-%COMP%]{background:linear-gradient(135deg,#f7c843,#edeae3);border-radius:16px;padding:1.5rem;margin-bottom:2rem;border:1px solid #F7C843}.motivation-content[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.75rem;color:#2e2e2e;font-weight:500}.motivation-icon[_ngcontent-%COMP%]{font-size:1.25rem}.badges-section[_ngcontent-%COMP%], .community-section[_ngcontent-%COMP%]{background:#fff;border-radius:16px;padding:2rem;margin-bottom:2rem;box-shadow:0 2px 8px #0000000a;border:1px solid #EDEAE3}.section-title[_ngcontent-%COMP%]{font-size:1.25rem;font-weight:600;color:#2e2e2e;margin:0 0 1.5rem}.badges-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fill,minmax(200px,1fr));gap:1rem}.badge-item[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.75rem;padding:1rem;border-radius:12px;background:#edeae3;transition:all .2s ease;opacity:.5}.badge-item.unlocked[_ngcontent-%COMP%]{background:linear-gradient(135deg,#f7c843,#edeae3);opacity:1;transform:translateY(-2px);box-shadow:0 4px 12px #f7c84333}.badge-icon[_ngcontent-%COMP%]{font-size:1.5rem;width:40px;text-align:center}.badge-info[_ngcontent-%COMP%]{flex:1;min-width:0}.badge-name[_ngcontent-%COMP%]{font-weight:600;color:#2e2e2e;font-size:.875rem}.badge-progress[_ngcontent-%COMP%]{font-size:.75rem;color:#666;margin-top:.25rem}.impact-stats[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(200px,1fr));gap:2rem}.impact-stat[_ngcontent-%COMP%]{text-align:center}.impact-number[_ngcontent-%COMP%]{display:block;font-size:2rem;font-weight:700;color:#f7c843;margin-bottom:.5rem}.impact-label[_ngcontent-%COMP%]{color:#666;font-size:.875rem;line-height:1.4}.tabs-container[_ngcontent-%COMP%]{margin-bottom:2rem}.tabs[_ngcontent-%COMP%]{display:flex;background:#fff;border-radius:12px;padding:.25rem;box-shadow:0 2px 8px #0000000a;border:1px solid #EDEAE3}.tab[_ngcontent-%COMP%]{flex:1;padding:.875rem 1.5rem;background:none;border:none;border-radius:8px;font-size:.875rem;font-weight:500;color:#666;cursor:pointer;transition:all .2s ease}.tab[_ngcontent-%COMP%]:hover{color:#2e2e2e;background:#edeae3}.tab.active[_ngcontent-%COMP%]{color:#2e2e2e;background:#f7c843}.content-container[_ngcontent-%COMP%]{background:#fff;border-radius:16px;padding:2rem;box-shadow:0 2px 8px #0000000a;border:1px solid #EDEAE3}.content-section[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:1.5rem}.empty-state[_ngcontent-%COMP%]{text-align:center;padding:3rem 1rem;color:#666}.empty-state[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:1.25rem;margin:0 0 .5rem;color:#2e2e2e}.empty-state[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0 0 1rem;font-size:1rem}.empty-rewards[_ngcontent-%COMP%]{margin-bottom:1.5rem}.content-card[_ngcontent-%COMP%]{padding:1.5rem;border:1px solid #EDEAE3;border-radius:12px;background:#fdfcf9;transition:all .2s ease}.content-card[_ngcontent-%COMP%]:hover{border-color:#f7c843;box-shadow:0 2px 8px #f7c8431a}.card-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:flex-start;margin-bottom:.75rem}.card-title[_ngcontent-%COMP%]{font-size:1.125rem;font-weight:600;color:#2e2e2e;margin:0;line-height:1.4;flex:1}.card-meta[_ngcontent-%COMP%]{font-size:.875rem;color:#666;white-space:nowrap;margin-left:1rem}.card-excerpt[_ngcontent-%COMP%]{color:#666;line-height:1.6;margin:0 0 1rem}.bookmark-notes[_ngcontent-%COMP%]{color:#666;line-height:1.6;margin:.5rem 0;font-style:italic;background:#edeae3;padding:.75rem;border-radius:6px}.card-footer[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;font-size:.875rem;flex-wrap:wrap;gap:1rem}.card-date[_ngcontent-%COMP%]{color:#666}.card-stats[_ngcontent-%COMP%]{display:flex;gap:1rem;flex-wrap:wrap}.stat-item[_ngcontent-%COMP%]{color:#666;display:flex;align-items:center;gap:.25rem}.card-actions[_ngcontent-%COMP%]{display:flex;gap:.5rem;flex-wrap:wrap}.action-btn[_ngcontent-%COMP%]{padding:.375rem .875rem;border-radius:6px;font-size:.875rem;font-weight:500;cursor:pointer;transition:all .2s ease;border:1px solid #F7C843;background:#f7c843;color:#2e2e2e}.action-btn[_ngcontent-%COMP%]:hover{background:#edeae3;border-color:#edeae3}.action-btn.secondary[_ngcontent-%COMP%]{background:transparent;color:#f7c843}.action-btn.secondary[_ngcontent-%COMP%]:hover{background:#f7c843;color:#2e2e2e}.action-btn.danger[_ngcontent-%COMP%]{background:transparent;color:#dc3545;border-color:#dc3545}.action-btn.danger[_ngcontent-%COMP%]:hover{background:#dc3545;color:#fff}.bookmark-tags[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:.5rem;margin-bottom:1rem}.tag[_ngcontent-%COMP%]{padding:.25rem .5rem;background:#edeae3;color:#666;border-radius:4px;font-size:.75rem;font-weight:500}@media (max-width: 768px){.profile-container[_ngcontent-%COMP%]{padding:1rem}.profile-header[_ngcontent-%COMP%]{flex-direction:column;align-items:center;text-align:center;gap:1.5rem}.user-stats[_ngcontent-%COMP%]{justify-content:center;flex-wrap:wrap}.tabs[_ngcontent-%COMP%]{flex-direction:column}.card-header[_ngcontent-%COMP%]{flex-direction:column;gap:.5rem}.card-meta[_ngcontent-%COMP%]{margin-left:0}.card-footer[_ngcontent-%COMP%]{flex-direction:column;align-items:flex-start}.card-actions[_ngcontent-%COMP%]{width:100%;justify-content:flex-start}.badges-grid[_ngcontent-%COMP%]{grid-template-columns:1fr}.impact-stats[_ngcontent-%COMP%]{grid-template-columns:1fr;gap:1.5rem}.user-stats[_ngcontent-%COMP%]{gap:1rem}}.xp-section[_ngcontent-%COMP%]{margin:1rem 0}.xp-section[_ngcontent-%COMP%]   .xp-info[_ngcontent-%COMP%]{display:flex;justify-content:space-between;margin-bottom:.5rem;font-size:.9rem}.xp-section[_ngcontent-%COMP%]   .xp-bar[_ngcontent-%COMP%]{height:8px;background:#f0f0f0;border-radius:4px;overflow:hidden}.xp-section[_ngcontent-%COMP%]   .xp-bar[_ngcontent-%COMP%]   .xp-progress[_ngcontent-%COMP%]{height:100%;background:linear-gradient(90deg,#4caf50,#8bc34a);transition:width .3s ease}.xp-section[_ngcontent-%COMP%]   .level-info[_ngcontent-%COMP%]{color:#666;font-size:.8rem}.badge-item[_ngcontent-%COMP%]{opacity:.6;transition:all .3s ease}.badge-item.unlocked[_ngcontent-%COMP%]{opacity:1;transform:scale(1.02)}.badge-item.in-progress[_ngcontent-%COMP%]{opacity:.8}.badge-item[_ngcontent-%COMP%]   .progress-bar[_ngcontent-%COMP%]{height:4px;background:#f0f0f0;border-radius:2px;margin:.25rem 0}.badge-item[_ngcontent-%COMP%]   .progress-bar[_ngcontent-%COMP%]   .progress-fill[_ngcontent-%COMP%]{height:100%;background:#2196f3;border-radius:2px;transition:width .3s ease}.badge-item[_ngcontent-%COMP%]   .progress-text[_ngcontent-%COMP%]{font-size:.75rem;color:#666}.reward-item[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5rem;margin:.25rem 0}.reward-item[_ngcontent-%COMP%]   .reward-icon[_ngcontent-%COMP%]{font-size:.9rem}.reward-item[_ngcontent-%COMP%]   .reward-text[_ngcontent-%COMP%]{font-size:.85rem;color:#28a745}.btn-reward[_ngcontent-%COMP%]{font-size:.75rem;color:#28a745;margin-left:.25rem}.social-link[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5rem;padding:.5rem 1rem;border-radius:8px;text-decoration:none;transition:all .2s ease;font-size:.875rem;font-weight:500;border:1px solid transparent;position:relative}.social-icon[_ngcontent-%COMP%]{width:18px;height:18px;display:flex;align-items:center;justify-content:center;min-width:18px}.add-social-btn[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5rem;padding:.5rem 1rem;border:2px dashed #CCCCCC;background:transparent;color:#666;border-radius:8px;cursor:pointer;transition:all .2s ease;font-size:.875rem}.add-social-btn[_ngcontent-%COMP%]:hover{border-color:#f7c843;color:#2e2e2e;background:#f7c843}.add-icon[_ngcontent-%COMP%]{width:18px;height:18px}.social-input[_ngcontent-%COMP%]{width:100%;padding:.75rem 2.5rem .75rem .75rem;border:2px solid #EDEAE3;border-radius:8px;font-size:.875rem;background:#fff;transition:all .2s ease;outline:none}.edit-actions[_ngcontent-%COMP%]{display:flex;gap:.5rem;justify-content:flex-start;flex-wrap:wrap}.social-section[_ngcontent-%COMP%]{margin-bottom:1.5rem}.social-title[_ngcontent-%COMP%]{font-size:1rem;font-weight:600;color:#2e2e2e;margin:0 0 1rem;cursor:pointer;display:inline-flex;align-items:center;gap:.5rem;transition:color .2s ease}.social-title[_ngcontent-%COMP%]:hover{color:#f7c843}.social-title[_ngcontent-%COMP%]:hover   .edit-icon[_ngcontent-%COMP%]{opacity:1}.social-links-display[_ngcontent-%COMP%]{margin-bottom:1rem}.social-placeholder[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5rem;padding:1rem;background:#edeae3;border:2px dashed #CCCCCC;border-radius:8px;cursor:pointer;transition:all .2s ease;color:#666}.social-placeholder[_ngcontent-%COMP%]:hover{background:#f7c843;border-color:#f7c843;color:#2e2e2e}.placeholder-text[_ngcontent-%COMP%]{flex:1;font-size:.875rem}.social-links-grid[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:.75rem}.social-link[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5rem;padding:.5rem 1rem;border-radius:8px;text-decoration:none;transition:all .2s ease;font-size:.875rem;font-weight:500;border:1px solid transparent}.social-link[_ngcontent-%COMP%]:hover{transform:translateY(-2px);box-shadow:0 4px 8px #0000001a}.social-link.facebook[_ngcontent-%COMP%]{background:#1877f2;color:#fff}.social-link.facebook[_ngcontent-%COMP%]:hover{background:#166fe5}.social-link.instagram[_ngcontent-%COMP%]{background:linear-gradient(45deg,#f58529,#dd2a7b,#8134af,#515bd4);color:#fff}.social-link.instagram[_ngcontent-%COMP%]:hover{opacity:.9}.social-link.linkedin[_ngcontent-%COMP%]{background:#0a66c2;color:#fff}.social-link.linkedin[_ngcontent-%COMP%]:hover{background:#004182}.social-icon[_ngcontent-%COMP%]{font-size:1rem;display:flex;align-items:center;justify-content:center;min-width:20px}.social-label[_ngcontent-%COMP%]{white-space:nowrap}.social-edit-form[_ngcontent-%COMP%]{background:#fdfcf9;border:1px solid #EDEAE3;border-radius:12px;padding:1.5rem}.social-input-group[_ngcontent-%COMP%]{margin-bottom:1rem}.social-input-group[_ngcontent-%COMP%]:last-of-type{margin-bottom:1.5rem}.social-input-label[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5rem;margin-bottom:.5rem;font-size:.875rem;font-weight:500;color:#2e2e2e}.social-input[_ngcontent-%COMP%]{width:100%;padding:.75rem;border:2px solid #EDEAE3;border-radius:8px;font-size:.875rem;background:#fff;transition:all .2s ease;outline:none}.social-input[_ngcontent-%COMP%]:focus{border-color:#f7c843;box-shadow:0 0 0 3px #f7c8431a}.social-input[_ngcontent-%COMP%]::placeholder{color:#999;font-size:.8rem}.social-input.invalid[_ngcontent-%COMP%]{border-color:#dc3545}.social-input.valid[_ngcontent-%COMP%]{border-color:#28a745}.validation-message[_ngcontent-%COMP%]{font-size:.75rem;margin-top:.25rem;display:flex;align-items:center;gap:.25rem}.validation-message.error[_ngcontent-%COMP%]{color:#dc3545}.validation-message.success[_ngcontent-%COMP%]{color:#28a745}@media (max-width: 768px){.social-links-grid[_ngcontent-%COMP%]{flex-direction:column}.social-link[_ngcontent-%COMP%]{justify-content:center;width:100%}.social-edit-form[_ngcontent-%COMP%]{padding:1rem}}.social-skeleton[_ngcontent-%COMP%]{display:flex;gap:.75rem;margin:1rem 0}.social-skeleton-item[_ngcontent-%COMP%]{height:36px;width:120px;background:linear-gradient(90deg,#edeae3 25%,#fdfcf9,#edeae3 75%);background-size:200% 100%;animation:_ngcontent-%COMP%_shimmer 1.5s infinite;border-radius:8px}.social-empty-state[_ngcontent-%COMP%]{text-align:center;padding:2rem;color:#666;background:#fdfcf9;border:1px solid #EDEAE3;border-radius:12px}.social-empty-state[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{font-size:1.125rem;margin:0 0 .5rem;color:#2e2e2e}.social-empty-state[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0 0 1rem;font-size:.875rem}.input-with-validation[_ngcontent-%COMP%]{position:relative}.validation-icon[_ngcontent-%COMP%]{position:absolute;right:.75rem;top:50%;transform:translateY(-50%);font-size:.875rem}.validation-icon.valid[_ngcontent-%COMP%]{color:#28a745}.validation-icon.invalid[_ngcontent-%COMP%]{color:#dc3545}@keyframes _ngcontent-%COMP%_fadeInUp{0%{opacity:0;transform:translateY(10px)}to{opacity:1;transform:translateY(0)}}.social-link.new[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_fadeInUp .3s ease-out}.edit-icon[_ngcontent-%COMP%]{opacity:.6;transition:opacity .2s ease;cursor:pointer;font-size:.875rem}.social-link-wrapper[_ngcontent-%COMP%]{position:relative;display:inline-flex;align-items:center}.social-link-wrapper[_ngcontent-%COMP%]:hover   .edit-social-btn[_ngcontent-%COMP%]{opacity:1}.edit-social-btn[_ngcontent-%COMP%]{position:absolute;top:-8px;right:-8px;width:24px;height:24px;border:none;background:#f7c843;color:#2e2e2e;border-radius:50%;cursor:pointer;font-size:.75rem;display:flex;align-items:center;justify-content:center;opacity:0;transition:all .2s ease;box-shadow:0 2px 4px #0000001a;z-index:2}.edit-social-btn[_ngcontent-%COMP%]:hover{background:#edeae3;transform:scale(1.1)}.form-header[_ngcontent-%COMP%]{margin-bottom:1.5rem;text-align:center}.form-title[_ngcontent-%COMP%]{font-size:1.125rem;font-weight:600;color:#2e2e2e;margin:0 0 .5rem}.form-subtitle[_ngcontent-%COMP%]{font-size:.875rem;color:#666;margin:0}.input-with-actions[_ngcontent-%COMP%]{position:relative;display:flex;align-items:center}.clear-input-btn[_ngcontent-%COMP%]{position:absolute;right:.5rem;width:20px;height:20px;border:none;background:#ccc;color:#fff;border-radius:50%;cursor:pointer;font-size:.75rem;display:flex;align-items:center;justify-content:center;transition:all .2s ease}.clear-input-btn[_ngcontent-%COMP%]:hover{background:#999}.input-help[_ngcontent-%COMP%]{font-size:.75rem;color:#666;margin-top:.25rem;font-style:italic}.save-btn[_ngcontent-%COMP%], .cancel-btn[_ngcontent-%COMP%], .delete-btn[_ngcontent-%COMP%]{padding:.5rem 1rem;border-radius:6px;font-size:.875rem;font-weight:500;cursor:pointer;transition:all .2s ease;border:none;min-width:80px}.save-btn[_ngcontent-%COMP%]{background:#f7c843;color:#2e2e2e}.save-btn[_ngcontent-%COMP%]:hover{background:#edeae3}.save-btn[_ngcontent-%COMP%]:disabled{opacity:.6;cursor:not-allowed}.cancel-btn[_ngcontent-%COMP%]{background:#edeae3;color:#2e2e2e}.cancel-btn[_ngcontent-%COMP%]:hover{background:#ccc}.delete-btn[_ngcontent-%COMP%]{background:#dc3545;color:#fff}.delete-btn[_ngcontent-%COMP%]:hover{background:#c82333}.social-icon[_ngcontent-%COMP%]{width:18px;height:18px;display:flex;align-items:center;justify-content:center;min-width:18px;fill:currentColor}.social-input-label[_ngcontent-%COMP%]   .social-icon[_ngcontent-%COMP%]{width:16px;height:16px;opacity:.8}.add-icon[_ngcontent-%COMP%]{width:18px;height:18px;fill:currentColor}@media (max-width: 768px){.social-links-grid[_ngcontent-%COMP%]{flex-direction:column}.social-link[_ngcontent-%COMP%]{justify-content:center;width:100%}.social-edit-form[_ngcontent-%COMP%]{padding:1rem}.edit-actions[_ngcontent-%COMP%]{flex-direction:column;align-items:stretch}.save-btn[_ngcontent-%COMP%], .cancel-btn[_ngcontent-%COMP%], .delete-btn[_ngcontent-%COMP%]{width:100%;margin-bottom:.5rem}}.social-input[_ngcontent-%COMP%]:focus, .save-btn[_ngcontent-%COMP%]:focus, .cancel-btn[_ngcontent-%COMP%]:focus, .delete-btn[_ngcontent-%COMP%]:focus{outline:2px solid #F7C843;outline-offset:2px}.social-section.loading[_ngcontent-%COMP%]{opacity:.6;pointer-events:none}.social-link.updated[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_pulse .6s ease-out}@keyframes _ngcontent-%COMP%_pulse{0%{transform:scale(1)}50%{transform:scale(1.05)}to{transform:scale(1)}}@keyframes _ngcontent-%COMP%_shimmer{0%{background-position:-200% 0}to{background-position:200% 0}}']})};var $m=class n{static \u0275fac=function(t){return new(t||n)};static \u0275cmp=et({type:n,selectors:[["app-about"]],decls:23,vars:0,consts:[[1,"about"],[1,"container"],[1,"about-title"],[1,"about-text"],[1,"highlight"],[1,"quote"],[1,"signature"]],template:function(t,r){t&1&&(Dr(0,"section",0)(1,"div",1)(2,"h1",2),b(3,"\u{1F319} About Unposted"),tr(),Dr(4,"p",3)(5,"span",4),b(6,"Unposted"),tr(),b(7," is your personal corner of the internet \u2014 a safe place for the words you've been keeping in drafts, notes, or your heart. Nothing here needs to be perfect or polished \u2014 it's about "),Dr(8,"em"),b(9,"writing what you feel"),tr(),b(10,", "),Dr(11,"em"),b(12,"sharing what matters"),tr(),b(13,", and giving your unposted words a home. "),tr(),Dr(14,"blockquote",5),b(15,' "Some stories don\u2019t need to be finished to be worth sharing." '),tr(),Dr(16,"p",3),b(17," Whether it\u2019s a thought, a poem, a half-written story, or a single sentence that carries meaning for you \u2014 it belongs here. Unposted is about "),Dr(18,"span",4),b(19,"expression without pressure"),tr(),b(20,". "),tr(),Dr(21,"div",6),b(22,"\u2014 The Unposted Team"),tr()()())},styles:["[_nghost-%COMP%]{display:block;background:#fdfcf9;color:#2e2e2e;line-height:1.75;font-family:Inter,Segoe UI,Tahoma,Geneva,Verdana,sans-serif}.container[_ngcontent-%COMP%]{padding:3rem 1.5rem;max-width:850px;margin:auto}.about-title[_ngcontent-%COMP%]{text-align:center;font-size:2.5rem;margin-bottom:2rem;font-weight:700;color:var(--text-primary)}.about-text[_ngcontent-%COMP%]{font-size:1.1rem;color:#444;margin-bottom:1.8rem}.highlight[_ngcontent-%COMP%]{color:var(--accent-color, #F7C843);font-weight:600}.quote[_ngcontent-%COMP%]{font-style:italic;color:#555;border-left:4px solid var(--accent-color, #F7C843);background:#f7c8430f;padding:1.2rem 1.5rem;border-radius:8px;margin:2.5rem 0;font-size:1.1rem}.signature[_ngcontent-%COMP%]{margin-top:2.5rem;text-align:right;font-style:italic;color:#666;font-size:.95rem}@media (max-width: 768px){.about-title[_ngcontent-%COMP%]{font-size:2rem}.about-text[_ngcontent-%COMP%], .quote[_ngcontent-%COMP%]{font-size:1rem}}"]})};function LW(n,e){if(n&1&&(h(0,"div",15),b(1),p()),n&2){let t=I();v(),ee(" ",t.errorMessage," ")}}var Hm=class n{authService=k(ot);router=k(Ve);email="";password="";errorMessage="";isLoading=!1;onLogin(){return y(this,null,function*(){if(!(!this.email||!this.password)){this.isLoading=!0,this.errorMessage="";try{yield this.authService.emailLogin(this.email,this.password),console.log("Login successful!"),this.router.navigate(["/stories"])}catch(e){console.error("Login error:",e),this.errorMessage=this.getErrorMessage(e.code)}finally{this.isLoading=!1}}})}onGoogleLogin(){return y(this,null,function*(){this.isLoading=!0,this.errorMessage="";try{yield this.authService.googleLogin(),this.router.navigate(["/stories"])}catch(e){console.error("Google login error:",e),this.errorMessage="Google login failed. Please try again."}finally{this.isLoading=!1}})}getErrorMessage(e){switch(e){case"auth/user-not-found":return"No account found with this email address.";case"auth/wrong-password":return"Incorrect password.";case"auth/invalid-email":return"Invalid email address.";case"auth/user-disabled":return"This account has been disabled.";case"auth/too-many-requests":return"Too many failed attempts. Please try again later.";default:return"Login failed. Please try again."}}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=et({type:n,selectors:[["app-login"]],decls:26,vars:6,consts:[["loginForm","ngForm"],[1,"login-container"],[1,"login-title"],["type","button",1,"google-button",3,"click","disabled"],["src","https://www.svgrepo.com/show/355037/google.svg","alt","Google Logo",1,"google-icon"],[3,"ngSubmit"],[1,"form-group"],["for","email"],["type","email","id","email","name","email","required","","placeholder","Enter your email",3,"ngModelChange","ngModel"],["for","password"],["type","password","id","password","name","password","required","","placeholder","Enter your password",3,"ngModelChange","ngModel"],["class","error-message",4,"ngIf"],["type","submit",1,"login-button",3,"disabled"],[1,"signup-text"],["href","/register"],[1,"error-message"]],template:function(t,r){if(t&1){let i=Z();h(0,"div",1)(1,"h2",2),b(2,"\u{1F511} Login"),p(),h(3,"button",3),B("click",function(){return N(i),F(r.onGoogleLogin())}),z(4,"img",4),h(5,"span"),b(6,"Sign in with Google"),p()(),z(7,"hr")(8,"br"),h(9,"form",5,0),B("ngSubmit",function(){return N(i),F(r.onLogin())}),h(11,"div",6)(12,"label",7),b(13,"Email"),p(),h(14,"input",8),We("ngModelChange",function(s){return N(i),Xe(r.email,s)||(r.email=s),F(s)}),p()(),h(15,"div",6)(16,"label",9),b(17,"Password"),p(),h(18,"input",10),We("ngModelChange",function(s){return N(i),Xe(r.password,s)||(r.password=s),F(s)}),p()(),j(19,LW,2,1,"div",11),h(20,"button",12),b(21),p()(),h(22,"p",13),b(23," Don\u2019t have an account? "),h(24,"a",14),b(25,"Sign up"),p()()()}if(t&2){let i=qt(10);v(3),C("disabled",r.isLoading),v(11),qe("ngModel",r.email),v(4),qe("ngModel",r.password),v(),C("ngIf",r.errorMessage),v(),C("disabled",!i.form.valid||r.isLoading),v(),ee(" ",r.isLoading?"Logging in...":"Login"," ")}},dependencies:[Lt,Wt,On,ol,un,kn,il,jr,Cn,fa],styles:["[_nghost-%COMP%]{display:flex;justify-content:center;align-items:center;min-height:70vh;background:#fdfcf9;font-family:Segoe UI,Tahoma,Geneva,Verdana,sans-serif}.login-container[_ngcontent-%COMP%]{background:#fff;padding:2rem;border-radius:12px;box-shadow:0 4px 15px #0000001a;width:100%;max-width:400px}.login-title[_ngcontent-%COMP%]{text-align:center;margin-bottom:1.5rem;font-size:1.8rem;font-weight:700;color:#2e2e2e}.form-group[_ngcontent-%COMP%]{margin-bottom:1.2rem}label[_ngcontent-%COMP%]{display:block;font-weight:600;margin-bottom:.5rem;color:#444}input[_ngcontent-%COMP%]{width:100%;padding:.8rem;border:1px solid #ddd;border-radius:8px;font-size:1rem;outline:none;transition:border .3s;box-sizing:border-box}input[_ngcontent-%COMP%]:focus{border-color:#f7c843;box-shadow:0 0 0 2px #f7c84333}.error-message[_ngcontent-%COMP%]{background:#fee;color:#c33;padding:.8rem;border-radius:8px;margin-bottom:1rem;font-size:.9rem;border:1px solid #fcc}.login-button[_ngcontent-%COMP%], .google-button[_ngcontent-%COMP%]{width:100%;padding:.9rem;font-size:1rem;font-weight:700;border:none;border-radius:8px;cursor:pointer;transition:background .3s;margin-bottom:1rem}.login-button[_ngcontent-%COMP%]{background:#f7c843;color:#2e2e2e}.login-button[_ngcontent-%COMP%]:disabled{background:#ddd;cursor:not-allowed}.login-button[_ngcontent-%COMP%]:hover:not(:disabled){background:#e5b935}.google-button[_ngcontent-%COMP%]{width:100%;padding:.9rem;font-size:1rem;font-weight:500;border:1px solid #dadce0;border-radius:8px;cursor:pointer;background:#fff;display:flex;align-items:center;justify-content:center;gap:.75rem;color:#3c4043;transition:all .2s ease}.google-button[_ngcontent-%COMP%]:hover:not(:disabled){background:#f7f8f8;box-shadow:0 1px 2px #3c404333}.google-button[_ngcontent-%COMP%]:disabled{opacity:.6;cursor:not-allowed}.google-icon[_ngcontent-%COMP%]{width:20px;height:20px}.signup-text[_ngcontent-%COMP%]{text-align:center;margin-top:1rem;font-size:.9rem;color:#555}.signup-text[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#f7c843;text-decoration:none;font-weight:700}"]})};function VW(n,e){if(n&1&&(h(0,"div",21),b(1),p()),n&2){let t=I();v(),ee(" ",t.errorMessage," ")}}function UW(n,e){if(n&1&&(h(0,"div",22),b(1),p()),n&2){let t=I();v(),ee(" ",t.successMessage," ")}}var zm=class n{authService=k(ot);router=k(Ve);profileService=k(fr);username="";email="";password="";confirmPassword="";errorMessage="";successMessage="";isLoading=!1;onRegister(){return y(this,null,function*(){if(this.errorMessage="",this.successMessage="",this.password!==this.confirmPassword){this.errorMessage="Passwords do not match!";return}if(this.password.length<6){this.errorMessage="Password must be at least 6 characters long.";return}this.isLoading=!0;try{let e=yield this.authService.emailRegister(this.email,this.password);console.log("Registration successful:",e),this.successMessage="Account created successfully! Redirecting...",setTimeout(()=>{this.router.navigate(["/stories"])},2e3)}catch(e){console.error("Registration error:",e),this.errorMessage=this.getErrorMessage(e.code)}finally{this.isLoading=!1}})}onGoogleRegister(){return y(this,null,function*(){this.isLoading=!0,this.errorMessage="";try{let e=yield this.authService.googleLogin();this.router.navigate(["/stories"])}catch(e){console.error("Google registration error:",e),this.errorMessage="Google registration failed. Please try again."}finally{this.isLoading=!1}})}getErrorMessage(e){switch(e){case"auth/email-already-in-use":return"An account with this email already exists.";case"auth/invalid-email":return"Invalid email address.";case"auth/operation-not-allowed":return"Email/password accounts are not enabled.";case"auth/weak-password":return"Password is too weak. Please choose a stronger password.";case"auth/account-exists-with-different-credential":return"An account already exists with this email using a different sign-in method.";default:return"Registration failed. Please try again."}}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=et({type:n,selectors:[["app-register"]],decls:41,vars:9,consts:[["registerForm","ngForm"],[1,"register-container"],[1,"register-title"],[1,"password-hint"],["type","button",1,"google-button",3,"click","disabled"],["src","https://www.svgrepo.com/show/355037/google.svg","alt","Google Logo",1,"google-icon"],[3,"ngSubmit"],[1,"form-group"],["for","username"],["type","text","id","username","name","username","required","","placeholder","Choose a username",3,"ngModelChange","ngModel"],["for","email"],["type","email","id","email","name","email","required","","placeholder","Enter your email",3,"ngModelChange","ngModel"],["for","password"],["type","password","id","password","name","password","required","","placeholder","Create a password","minlength","6",3,"ngModelChange","ngModel"],["for","confirmPassword"],["type","password","id","confirmPassword","name","confirmPassword","required","","placeholder","Confirm your password",3,"ngModelChange","ngModel"],["class","error-message",4,"ngIf"],["class","success-message",4,"ngIf"],["type","submit",1,"register-button",3,"disabled"],[1,"login-text"],["href","/login"],[1,"error-message"],[1,"success-message"]],template:function(t,r){if(t&1){let i=Z();h(0,"div",1)(1,"h2",2),b(2,"\u{1F4DD} Register"),p(),h(3,"small",3),b(4,"We recommend signing up with Google"),p(),h(5,"button",4),B("click",function(){return N(i),F(r.onGoogleRegister())}),z(6,"img",5),h(7,"span"),b(8,"Register with Google"),p()(),z(9,"hr")(10,"br"),h(11,"form",6,0),B("ngSubmit",function(){return N(i),F(r.onRegister())}),h(13,"div",7)(14,"label",8),b(15,"Username"),p(),h(16,"input",9),We("ngModelChange",function(s){return N(i),Xe(r.username,s)||(r.username=s),F(s)}),p()(),h(17,"div",7)(18,"label",10),b(19,"Email"),p(),h(20,"input",11),We("ngModelChange",function(s){return N(i),Xe(r.email,s)||(r.email=s),F(s)}),p()(),h(21,"div",7)(22,"label",12),b(23,"Password"),p(),h(24,"input",13),We("ngModelChange",function(s){return N(i),Xe(r.password,s)||(r.password=s),F(s)}),p(),h(25,"small",3),b(26,"Password must be at least 6 characters long"),p()(),h(27,"div",7)(28,"label",14),b(29,"Confirm Password"),p(),h(30,"input",15),We("ngModelChange",function(s){return N(i),Xe(r.confirmPassword,s)||(r.confirmPassword=s),F(s)}),p()(),j(31,VW,2,1,"div",16)(32,UW,2,1,"div",17),h(33,"button",18),b(34),p()(),h(35,"small",3),b(36,"We recommend signing up with Google"),p(),h(37,"p",19),b(38," Already have an account? "),h(39,"a",20),b(40,"Login"),p()()()}if(t&2){let i=qt(12);v(5),C("disabled",r.isLoading),v(11),qe("ngModel",r.username),v(4),qe("ngModel",r.email),v(4),qe("ngModel",r.password),v(6),qe("ngModel",r.confirmPassword),v(),C("ngIf",r.errorMessage),v(),C("ngIf",r.successMessage),v(),C("disabled",!i.form.valid||r.isLoading),v(),ee(" ",r.isLoading?"Creating Account...":"Register"," ")}},dependencies:[Lt,Wt,On,ol,un,kn,il,jr,WI,Cn,fa],styles:["[_nghost-%COMP%]{display:flex;justify-content:center;align-items:center;min-height:70vh;background:#fdfcf9;font-family:Segoe UI,Tahoma,Geneva,Verdana,sans-serif}.register-container[_ngcontent-%COMP%]{background:#fff;padding:2rem;border-radius:12px;box-shadow:0 4px 15px #0000001a;width:100%;max-width:400px}.register-title[_ngcontent-%COMP%]{text-align:center;margin-bottom:1.5rem;font-size:1.8rem;font-weight:700;color:#2e2e2e}.form-group[_ngcontent-%COMP%]{margin-bottom:1.2rem}label[_ngcontent-%COMP%]{display:block;font-weight:600;margin-bottom:.5rem;color:#444}input[_ngcontent-%COMP%]{width:100%;padding:.8rem;border:1px solid #ddd;border-radius:8px;font-size:1rem;outline:none;transition:border .3s;box-sizing:border-box}input[_ngcontent-%COMP%]:focus{border-color:#f7c843;box-shadow:0 0 0 2px #f7c84333}.password-hint[_ngcontent-%COMP%]{color:#666;font-size:.8rem;margin-top:.3rem;display:block}.error-message[_ngcontent-%COMP%]{background:#fee;color:#c33;padding:.8rem;border-radius:8px;margin-bottom:1rem;font-size:.9rem;border:1px solid #fcc}.success-message[_ngcontent-%COMP%]{background:#efe;color:#363;padding:.8rem;border-radius:8px;margin-bottom:1rem;font-size:.9rem;border:1px solid #cfc}.register-button[_ngcontent-%COMP%], .google-button[_ngcontent-%COMP%]{width:100%;padding:.9rem;font-size:1rem;font-weight:700;border:none;border-radius:8px;cursor:pointer;transition:background .3s;margin-bottom:1rem}.register-button[_ngcontent-%COMP%]{background:#f7c843;color:#2e2e2e}.register-button[_ngcontent-%COMP%]:disabled{background:#ddd;cursor:not-allowed}.register-button[_ngcontent-%COMP%]:hover:not(:disabled){background:#e5b935}.google-button[_ngcontent-%COMP%]{width:100%;padding:.9rem;font-size:1rem;font-weight:500;border:1px solid #dadce0;border-radius:8px;cursor:pointer;background:#fff;display:flex;align-items:center;justify-content:center;gap:.75rem;color:#3c4043;transition:all .2s ease}.google-button[_ngcontent-%COMP%]:hover:not(:disabled){background:#f7f8f8;box-shadow:0 1px 2px #3c404333}.google-button[_ngcontent-%COMP%]:disabled{opacity:.6;cursor:not-allowed}.google-icon[_ngcontent-%COMP%]{width:20px;height:20px}.login-text[_ngcontent-%COMP%]{text-align:center;margin-top:1rem;font-size:.9rem;color:#555}.login-text[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#f7c843;text-decoration:none;font-weight:700}"]})};var jW=["articleContent"],BW=()=>["/stories"],zd=n=>["/profile/",n],$W=n=>({rtl:n});function HW(n,e){n&1&&(h(0,"div",6),z(1,"div",7),h(2,"p"),b(3,"Loading story..."),p()())}function zW(n,e){n&1&&(ce(),h(0,"svg",21),z(1,"path",59)(2,"circle",60),p())}function qW(n,e){if(n&1&&z(0,"img",61),n&2){let t=I(3);C("routerLink",Vn(3,zd,t.story.authorId))("src",t.story.authorPhotoURL,ct)("alt",t.story.authorName)}}function WW(n,e){n&1&&(h(0,"p"),b(1,"Sign in to show your appreciation!"),p())}function GW(n,e){n&1&&(h(0,"p"),b(1,"Help others discover great content!"),p())}function KW(n,e){n&1&&z(0,"span",62)}function YW(n,e){n&1&&(ce(),h(0,"svg",63),z(1,"path",64)(2,"path",65),p())}function QW(n,e){n&1&&(ce(),h(0,"svg",63),z(1,"path",66),p())}function ZW(n,e){if(n&1){let t=Z();h(0,"div",67)(1,"button",68),B("click",function(){N(t);let i=I(3);return F(i.setSortOrder("newest"))}),b(2," Newest first "),p(),h(3,"button",68),B("click",function(){N(t);let i=I(3);return F(i.setSortOrder("oldest"))}),b(4," Oldest first "),p()()}if(n&2){let t=I(3);v(),he("active",t.sortOrder==="newest"),v(2),he("active",t.sortOrder==="oldest")}}function XW(n,e){n&1&&(h(0,"div",69),z(1,"div",70),h(2,"span"),b(3,"Loading comments..."),p()())}function JW(n,e){n&1&&(h(0,"div",71)(1,"div",72),b(2,"\u{1F4AD}"),p(),h(3,"h3"),b(4,"Start the conversation"),p(),h(5,"p"),b(6,"Be the first to share your thoughts on this story!"),p()())}function eG(n,e){if(n&1&&z(0,"img",61),n&2){let t=I().$implicit,r=I(3);C("routerLink",Vn(3,zd,r.story.authorId))("src",t.userPhotoURL,ct)("alt",r.story.authorName)}}function tG(n,e){if(n&1&&(h(0,"div",84),b(1),p()),n&2){let t=I().$implicit,r=I(3);xn("background",r.getAvatarColor(t.username)),C("routerLink",Vn(4,zd,r.story.authorId)),v(),ee(" ",r.getInitials(t.username)," ")}}function nG(n,e){n&1&&(h(0,"span",85),b(1,"Author"),p())}function rG(n,e){if(n&1){let t=Z();h(0,"button",86),B("click",function(){N(t);let i=I().$implicit,o=I(3);return F(o.deleteComment(i.id))}),ce(),h(1,"svg",21),z(2,"polyline",87)(3,"path",88),p()()}}function iG(n,e){if(n&1&&(h(0,"div",73)(1,"div",74)(2,"div",75),j(3,eG,1,5,"img",19)(4,tG,2,6,"div",76),h(5,"div",77)(6,"span",78),b(7),p(),h(8,"div",79),b(9),p()(),j(10,nG,2,0,"span",80),p(),h(11,"div",81),j(12,rG,4,0,"button",82),p()(),h(13,"div",83),b(14),p()()),n&2){let t=e.$implicit,r=e.index,i=I(3);xn("animation-delay",r*100,"ms"),v(3),C("ngIf",t.userPhotoURL),v(),C("ngIf",!t.userPhotoURL),v(2),C("routerLink",Vn(10,zd,i.story.authorId)),v(),K(t.username||"Anonymous"),v(2),K(i.formatDate(t.createdAt)),v(),C("ngIf",t.userId===i.story.authorId),v(2),C("ngIf",i.canDeleteComment(t)),v(2),K(t.content)}}function oG(n,e){n&1&&(h(0,"div",89)(1,"div",90),b(2,"\u{1F510}"),p(),h(3,"h3"),b(4,"Join the Discussion"),p(),h(5,"p"),b(6,"Please "),h(7,"a",91),b(8,"sign in"),p(),b(9," to share your thoughts and engage with the community."),p()())}function sG(n,e){if(n&1&&z(0,"img",102),n&2){let t=I(4);C("src",t.currentUser.photoURL,ct)("alt",t.story.authorName)}}function aG(n,e){if(n&1&&(h(0,"div",103),b(1),p()),n&2){let t=I(4);xn("background",t.getAvatarColor(t.currentUser.displayName)),v(),ee(" ",t.getInitials(t.currentUser.displayName||t.currentUser.email)," ")}}function cG(n,e){if(n&1){let t=Z();h(0,"button",104),B("click",function(){N(t);let i=I(4);return F(i.clearComment())}),b(1," Cancel "),p()}}function lG(n,e){n&1&&z(0,"span",62)}function uG(n,e){n&1&&(ce(),h(0,"svg",63),z(1,"line",105)(2,"polygon",106),p())}function dG(n,e){if(n&1){let t=Z();h(0,"div",92)(1,"div",93),j(2,sG,1,2,"img",94)(3,aG,2,3,"div",95),h(4,"h3"),b(5,"Share your thoughts"),p()(),h(6,"div",96)(7,"textarea",97),We("ngModelChange",function(i){N(t);let o=I(3);return Xe(o.commentText,i)||(o.commentText=i),F(i)}),B("input",function(i){N(t);let o=I(3);return F(o.adjustTextareaHeight(i))}),b(8,"            "),p(),h(9,"div",98),b(10),p()(),h(11,"div",99),j(12,cG,2,0,"button",100),h(13,"button",101),B("click",function(){N(t);let i=I(3);return F(i.addComment())}),j(14,lG,1,0,"span",39)(15,uG,3,0,"svg",44),b(16),p()()()}if(n&2){let t=I(3);v(2),C("ngIf",t.currentUser.photoURL),v(),C("ngIf",!t.currentUser.photoURL),v(4),qe("ngModel",t.commentText),v(2),he("warning",t.commentText&&t.commentText.length>450)("danger",t.commentText&&t.commentText.length>=500),v(),ee(" ",(t.commentText==null?null:t.commentText.length)||0," / 500 "),v(2),C("ngIf",t.commentText==null?null:t.commentText.trim()),v(),C("disabled",!(t.commentText!=null&&t.commentText.trim())||t.commentSubmitting||((t.commentText==null?null:t.commentText.length)||0)>500),v(),C("ngIf",t.commentSubmitting),v(),C("ngIf",!t.commentSubmitting),v(),ee(" ",t.commentSubmitting?"Posting...":"Post Comment"," ")}}function fG(n,e){if(n&1&&(h(0,"div",107),ce(),h(1,"svg",10),z(2,"path",108)(3,"polyline",109),p(),b(4),p()),n&2){let t=I(3);v(4),ee(" ",t.successMessage," ")}}function hG(n,e){if(n&1&&(h(0,"div",110),ce(),h(1,"svg",10),z(2,"circle",22)(3,"line",111)(4,"line",112),p(),b(5),p()),n&2){let t=I(3);v(5),ee(" ",t.errorMessage," ")}}function pG(n,e){if(n&1){let t=Z();h(0,"div",8)(1,"button",9),ce(),h(2,"svg",10),z(3,"path",11),p(),b(4," Back to Stories "),p(),Ae(),h(5,"div",12)(6,"div",13),b(7),p(),h(8,"div",14),b(9),p(),h(10,"h1",15),b(11),p(),h(12,"div",16)(13,"div",17),j(14,zW,3,0,"svg",18)(15,qW,1,5,"img",19),h(16,"span",20),b(17),p()(),h(18,"div",17),ce(),h(19,"svg",21),z(20,"circle",22)(21,"polyline",23),p(),Ae(),h(22,"span"),b(23),p()(),h(24,"div",17),ce(),h(25,"svg",21),z(26,"path",24)(27,"circle",25),p(),Ae(),h(28,"span"),b(29),p()(),h(30,"div",17),ce(),h(31,"svg",21),z(32,"path",26),p(),Ae(),h(33,"span"),b(34),p()()()(),z(35,"div",27),h(36,"div",28,0),B("scroll",function(){N(t);let i=I(2);return F(i.updateReadingProgress())}),z(38,"div",29),p(),h(39,"div",30)(40,"div",31)(41,"div",32)(42,"h3"),b(43,"\u{1F4A1} Found this thought-provoking?"),p(),j(44,WW,2,0,"p",33)(45,GW,2,0,"p",33),p(),h(46,"div",34)(47,"div",35)(48,"div",36),b(49),p(),h(50,"div",37),b(51),p()(),h(52,"button",38),B("click",function(){N(t);let i=I(2);return F(i.toggleUpvote())}),j(53,KW,1,0,"span",39),ce(),h(54,"svg",10),z(55,"path",40),p(),b(56),p()()(),Ae(),h(57,"div",41)(58,"h4"),b(59,"Share this story"),p(),h(60,"div",42)(61,"button",43),B("click",function(){N(t);let i=I(2);return F(i.copyLink())}),j(62,YW,3,0,"svg",44)(63,QW,2,0,"svg",44),b(64),p()()()(),h(65,"div",45)(66,"div",46)(67,"h2",47),ce(),h(68,"svg",48),z(69,"path",26),p(),b(70," Discussion "),p(),Ae(),h(71,"span",49),b(72),p()(),j(73,ZW,5,4,"div",50)(74,XW,4,0,"div",51)(75,JW,7,0,"div",52)(76,iG,15,12,"div",53),p(),h(77,"div",54),j(78,oG,10,0,"div",55)(79,dG,17,13,"div",56),p(),j(80,fG,5,1,"div",57)(81,hG,6,1,"div",58),p()}if(n&2){let t=I(2);v(),C("routerLink",Jr(46,BW)),v(5),he("pulse",!t.isLoading),v(),K(t.story.emoji||"\u{1F4D6}"),v(),sn("data-category",t.story.category),v(),K(t.story.category||"Story"),v(2),K(t.story.title),v(3),C("ngIf",!t.story.authorPhotoURL),v(),C("ngIf",t.story.authorPhotoURL),v(),C("routerLink",Vn(47,zd,t.story.authorId)),v(),K(t.story.authorName||"Anonymous"),v(6),K(t.story.createdAt?t.formatDate(t.story.createdAt):"Recently"),v(6),Mn("",t.formatViewCount(t.story.stats.readCount)," ",t.story.stats.readCount===1?"view":"views"),v(5),Mn("",t.comments.length," ",t.comments.length===1?"comment":"comments"),v(),xn("width",t.readingProgress,"%"),v(),C("ngClass",Vn(49,$W,t.isArabic(t.story.content))),v(2),C("innerHTML",t.formatContent(t.story.content),ey),v(6),C("ngIf",!t.currentUser),v(),C("ngIf",t.currentUser),v(4),K(t.story.stats.voteCount),v(2),K(t.story.stats.voteCount===1?"upvote":"upvotes"),v(),he("voted",t.hasUpvoted)("disabled",!t.currentUser),C("disabled",!t.currentUser||t.votingInProgress),v(),C("ngIf",t.votingInProgress),v(3),ee(" ",t.hasUpvoted?"Upvoted":"Upvote"," "),v(5),he("copied",t.linkCopied),v(),C("ngIf",!t.linkCopied),v(),C("ngIf",t.linkCopied),v(),ee(" ",t.linkCopied?"Copied!":"Copy Link"," "),v(8),K(t.comments.length),v(),C("ngIf",t.comments.length>0),v(),C("ngIf",t.commentsLoading),v(),C("ngIf",!t.commentsLoading&&t.comments.length===0),v(),C("ngForOf",t.sortedComments)("ngForTrackBy",t.trackComment),v(2),C("ngIf",!t.currentUser),v(),C("ngIf",t.currentUser),v(),C("ngIf",t.successMessage),v(),C("ngIf",t.errorMessage)}}function gG(n,e){if(n&1&&(h(0,"div",3),j(1,HW,4,0,"div",4)(2,pG,82,51,"div",5),p()),n&2){let t=I();v(),C("ngIf",t.isLoading),v(),C("ngIf",!t.isLoading)}}function mG(n,e){if(n&1){let t=Z();h(0,"div",113)(1,"div",114),b(2,"\u{1F4DA}"),p(),h(3,"h2"),b(4,"Story Not Found"),p(),h(5,"p"),b(6,"The story you're looking for doesn't exist or may have been removed."),p(),h(7,"button",115),B("click",function(){N(t);let i=I();return F(i.goBack())}),ce(),h(8,"svg",63),z(9,"path",11),p(),b(10," Back to Stories "),p()()}}var Hd=class n{storyService=k(gi);commentsService=k(el);votesService=k(Xo);viewsService=k(al);authService=k(ot);route=k(An);router=k(Ve);notificationService=k(hr);profileService=k(fr);storyId;articleContent;story=null;comments=[];currentUser=null;isLoading=!0;commentsLoading=!0;commentSubmitting=!1;votingInProgress=!1;upvoteCount=0;hasUpvoted=!1;viewCount=0;viewTracked=!1;commentText="";errorMessage="";successMessage="";readingProgress=0;sortOrder="newest";linkCopied=!1;ngOnInit(){this.route.params.subscribe(e=>{let t=e.id;t?(this.storyId=t,this.loadStory(t)):(this.errorMessage="No story ID provided",this.isLoading=!1)}),this.authService.user$.subscribe(e=>{this.currentUser=e,e&&this.loadUserVoteStatus()}),window.addEventListener("scroll",this.updateReadingProgress.bind(this))}ngOnDestroy(){this.currentUser&&(this.currentUser=null),window.removeEventListener("scroll",this.updateReadingProgress.bind(this))}loadStory(e){return y(this,null,function*(){try{this.isLoading=!0,this.errorMessage="";let t=e||this.route.snapshot.params.id;if(!t)throw new Error("No story ID provided");if(this.story=yield this.storyService.getStory(t),!this.story){this.errorMessage="Story not found. It may have been deleted or moved.";return}yield Promise.all([this.loadComments(),this.currentUser?this.loadUserVoteStatus():Promise.resolve()]),setTimeout(()=>this.trackView(),3e3)}catch(t){console.error("Error loading story:",t),this.errorMessage="Failed to load story. Please check your connection and try again."}finally{this.isLoading=!1}})}loadComments(){return y(this,null,function*(){try{this.commentsLoading=!0,this.comments=yield this.commentsService.getComments(this.storyId)}catch(e){console.error("Error loading comments:",e)}finally{this.commentsLoading=!1}})}loadVoteCount(){return y(this,null,function*(){try{this.upvoteCount=yield this.votesService.countVotes(this.storyId)}catch(e){console.error("Error loading vote count:",e)}})}loadViewCount(){return y(this,null,function*(){try{this.viewCount=yield this.viewsService.getViewCount(this.storyId)}catch(e){console.error("Error loading view count:",e)}})}trackView(){return y(this,null,function*(){if(!(this.viewTracked||!this.story))try{yield this.viewsService.trackView(this.storyId),this.viewTracked=!0,yield this.loadViewCount()}catch(e){console.error("Error tracking view:",e)}})}loadUserVoteStatus(){return y(this,null,function*(){if(this.currentUser)try{this.hasUpvoted=yield this.votesService.hasVoted(this.storyId)}catch(e){console.error("Error loading vote status:",e)}})}toggleUpvote(){return y(this,null,function*(){if(!this.currentUser||this.votingInProgress)return;this.votingInProgress=!0;let e=this.hasUpvoted,t=this.upvoteCount;try{this.hasUpvoted=!this.hasUpvoted,this.story.stats.voteCount+=this.hasUpvoted?1:-1,this.hasUpvoted&&(this.notificationService.notifyStoryLiked(this.story.authorId,this.currentUser.displayName,this.story.title,this.storyId),this.profileService.awardUserXP(this.currentUser.uid,1,"liked a story")),yield this.votesService.toggleVote(this.storyId),this.successMessage=this.hasUpvoted?"Thanks for your upvote!":"Upvote removed",setTimeout(()=>this.successMessage="",3e3),yield this.loadVoteCount()}catch(r){console.error("Error toggling vote:",r),this.hasUpvoted=e,this.upvoteCount=t,this.errorMessage="Failed to update vote. Please try again.",setTimeout(()=>this.errorMessage="",5e3)}finally{this.votingInProgress=!1}})}addComment(){return y(this,null,function*(){if(!(!this.currentUser||!this.commentText.trim()||this.commentSubmitting)){this.commentSubmitting=!0,this.errorMessage="";try{let e={userId:this.currentUser.uid,username:this.currentUser.displayName,userPhotoURL:this.currentUser.photoURL,content:this.commentText.trim()};yield this.commentsService.addComment(this.storyId,e),this.notificationService.notifyStoryCommented(this.story.authorId,this.currentUser.displayName,this.story.title,this.storyId),this.profileService.awardUserXP(this.currentUser.uid,2,"commented a story"),this.commentText="",this.successMessage="Comment posted successfully!",setTimeout(()=>this.successMessage="",3e3),yield this.loadComments()}catch(e){console.error("Error adding comment:",e),this.errorMessage="Failed to post comment. Please try again.",setTimeout(()=>this.errorMessage="",5e3)}finally{this.commentSubmitting=!1}}})}deleteComment(e){return y(this,null,function*(){if(this.currentUser&&confirm("Are you sure you want to delete this comment? This action cannot be undone."))try{yield this.commentsService.deleteOwnComment(this.storyId,e,this.currentUser.uid),this.successMessage="Comment deleted successfully",setTimeout(()=>this.successMessage="",3e3),yield this.loadComments()}catch(t){console.error("Error deleting comment:",t),this.errorMessage="Failed to delete comment. Please try again.",setTimeout(()=>this.errorMessage="",5e3)}})}clearComment(){this.commentText=""}canDeleteComment(e){return this.currentUser?e.userId===this.currentUser.uid:!1}trackComment(e,t){return t.id||e.toString()}getInitials(e){return e?e.split(" ").map(t=>t.charAt(0)).join("").toUpperCase().substring(0,2):"\u{1F464}"}getAvatarColor(e){if(!e)return"#f7a600";let t=["#f7a600","#e74c3c","#3498db","#2ecc71","#9b59b6","#f39c12","#1abc9c","#34495e","#e67e22","#95a5a6"],r=e.split("").reduce((i,o)=>i+o.charCodeAt(0),0);return t[r%t.length]}setSortOrder(e){this.sortOrder=e}get sortedComments(){return[...this.comments].sort((e,t)=>{let r=s=>s?s instanceof Date?s.getTime():"toDate"in s&&typeof s.toDate=="function"?s.toDate().getTime():0:0,i=r(e.createdAt),o=r(t.createdAt);return this.sortOrder==="newest"?o-i:i-o})}updateReadingProgress(){let e=this.articleContent?.nativeElement;if(!e)return;let t=window.scrollY,r=e.offsetTop,i=e.offsetHeight,o=window.innerHeight,s=Math.max(0,Math.min(100,(t-r+o)/i*100));this.readingProgress=s}adjustTextareaHeight(e){let t=e.target;t.style.height="auto",t.style.height=Math.min(t.scrollHeight,200)+"px"}goBack(){window.history.length>1?window.history.back():this.router.navigate(["/stories"])}copyLink(){return y(this,null,function*(){try{yield navigator.clipboard.writeText(window.location.href),this.linkCopied=!0,setTimeout(()=>this.linkCopied=!1,2e3)}catch(e){console.error("Failed to copy link:",e);let t=document.createElement("textarea");t.value=window.location.href,document.body.appendChild(t),t.select(),document.execCommand("copy"),document.body.removeChild(t),this.linkCopied=!0,setTimeout(()=>this.linkCopied=!1,2e3)}})}isArabic(e){return e?/[\u0600-\u06FF]/.test(e):!1}formatDate(e){if(!e)return"Recently";try{let t=e.toDate?e.toDate():new Date(e),r=new Date,i=Math.floor((r.getTime()-t.getTime())/(1e3*60));return i<1?"Just now":i<60?`${i}m ago`:i<1440?`${Math.floor(i/60)}h ago`:i<10080?`${Math.floor(i/1440)}d ago`:new Intl.DateTimeFormat("en",{month:"short",day:"numeric",year:t.getFullYear()!==r.getFullYear()?"numeric":void 0}).format(t)}catch{return"Recently"}}formatViewCount(e){return e<1e3?e.toString():e<1e6?(e/1e3).toFixed(1)+"K":(e/1e6).toFixed(1)+"M"}formatContent(e){return e?e.split(/\n\s*\n/).map(t=>{let r=t.trim();return r?`<p>${r.replace(/\n/g,"<br>")}</p>`:""}).filter(t=>t).join(""):""}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=et({type:n,selectors:[["app-story"]],viewQuery:function(t,r){if(t&1&&Co(jW,5),t&2){let i;Qr(i=Zr())&&(r.articleContent=i.first)}},inputs:{storyId:"storyId"},decls:2,vars:2,consts:[["articleContent",""],["class","article-container",4,"ngIf"],["class","not-found",4,"ngIf"],[1,"article-container"],["class","loading-state",4,"ngIf"],["class","fade-in",4,"ngIf"],[1,"loading-state"],[1,"modern-spinner"],[1,"fade-in"],[1,"back-button",3,"routerLink"],["width","20","height","20","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2"],["d","M19 12H5M12 19l-7-7 7-7"],[1,"hero-section"],[1,"article-emoji"],[1,"category-badge"],[1,"article-title"],[1,"article-meta"],[1,"meta-item"],["width","16","height","16","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2",4,"ngIf"],["style","cursor: pointer;",3,"routerLink","src","alt",4,"ngIf"],[2,"cursor","pointer",3,"routerLink"],["width","16","height","16","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2"],["cx","12","cy","12","r","10"],["points","12,6 12,12 16,14"],["d","M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"],["cx","12","cy","12","r","3"],["d","M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"],[1,"reading-progress"],[1,"article-content",3,"scroll","ngClass"],[3,"innerHTML"],[1,"engagement-section"],[1,"upvote-card"],[1,"upvote-header"],[4,"ngIf"],[1,"vote-container"],[1,"vote-display"],[1,"vote-count"],[1,"vote-label"],[1,"modern-upvote-button",3,"click","disabled"],["class","button-spinner",4,"ngIf"],["d","M14 9V5a3 3 0 0 0-3-3l-4 9v11h11.28a2 2 0 0 0 2-1.7l1.38-9a2 2 0 0 0-2-2.3zM7 22H4a2 2 0 0 1-2-2v-7a2 2 0 0 1 2-2h3"],[1,"share-section"],[1,"share-buttons"],[1,"share-btn","copy",3,"click"],["width","18","height","18","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2",4,"ngIf"],[1,"comments-section"],[1,"comments-header"],[1,"comments-title"],["width","24","height","24","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2"],[1,"comments-count"],["class","comments-controls",4,"ngIf"],["class","comments-loading",4,"ngIf"],["class","comments-empty",4,"ngIf"],["class","comment-item",3,"animation-delay",4,"ngFor","ngForOf","ngForTrackBy"],[1,"comment-form-card"],["class","auth-prompt",4,"ngIf"],["class","comment-form",4,"ngIf"],["class","success-message fade-in",4,"ngIf"],["class","error-message fade-in",4,"ngIf"],["d","M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"],["cx","12","cy","7","r","4"],[2,"cursor","pointer",3,"routerLink","src","alt"],[1,"button-spinner"],["width","18","height","18","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2"],["d","M10 13a5 5 0 007.54.54l3-3a5 5 0 00-7.07-7.07l-1.72 1.71"],["d","M14 11a5 5 0 00-7.54-.54l-3 3a5 5 0 007.07 7.07l1.71-1.71"],["d","M20 6L9 17l-5-5"],[1,"comments-controls"],[1,"sort-btn",3,"click"],[1,"comments-loading"],[1,"modern-spinner","small"],[1,"comments-empty"],[1,"empty-icon"],[1,"comment-item"],[1,"comment-header"],[1,"comment-author"],["style","cursor: pointer;","class","author-avatar",3,"routerLink","background",4,"ngIf"],[1,"author-info"],[1,"author-name",2,"cursor","pointer",3,"routerLink"],[1,"comment-date"],["class","author-badge",4,"ngIf"],[1,"comment-actions"],["class","delete-btn","title","Delete comment",3,"click",4,"ngIf"],[1,"comment-content"],[1,"author-avatar",2,"cursor","pointer",3,"routerLink"],[1,"author-badge"],["title","Delete comment",1,"delete-btn",3,"click"],["points","3,6 5,6 21,6"],["d","m19,6v14a2,2 0 0,1 -2,2H7a2,2 0 0,1 -2,-2V6m3,0V4a2,2 0 0,1 2,-2h4a2,2 0 0,1 2,2v2"],[1,"auth-prompt"],[1,"auth-icon"],["routerLink","/login",1,"auth-link"],[1,"comment-form"],[1,"form-header"],[3,"src","alt",4,"ngIf"],["class","user-avatar",3,"background",4,"ngIf"],[1,"form-group"],["placeholder","What did you think about this story? Share your perspective...","maxlength","500","rows","4","required","",1,"modern-textarea",3,"ngModelChange","input","ngModel"],[1,"character-count"],[1,"form-actions"],["class","secondary-btn",3,"click",4,"ngIf"],[1,"primary-btn",3,"click","disabled"],[3,"src","alt"],[1,"user-avatar"],[1,"secondary-btn",3,"click"],["x1","22","y1","2","x2","11","y2","13"],["points","22,2 15,22 11,13 2,9 22,2"],[1,"success-message","fade-in"],["d","M22 11.08V12a10 10 0 1 1-5.93-9.14"],["points","22,4 12,14.01 9,11.01"],[1,"error-message","fade-in"],["x1","15","y1","9","x2","9","y2","15"],["x1","9","y1","9","x2","15","y2","15"],[1,"not-found"],[1,"not-found-icon"],[1,"primary-btn",3,"click"]],template:function(t,r){t&1&&j(0,gG,3,2,"div",1)(1,mG,11,0,"div",2),t&2&&(C("ngIf",r.story),v(),C("ngIf",!r.story&&!r.isLoading))},dependencies:[Lt,Ns,Pn,Wt,On,un,kn,jr,ha,Cn,an],styles:['[_nghost-%COMP%]{--primary-color: #f7a600;--primary-hover: #e59500;--success-color: #10b981;--error-color: #ef4444;--warning-color: #f59e0b;--text-primary: #292929;--text-secondary: #757575;--text-muted: #9ca3af;--bg-primary: #ffffff;--bg-secondary: #f9fafb;--bg-elevated: #ffffff;--border-color: #e5e7eb;--border-hover: #d1d5db;--shadow-sm: 0 1px 3px 0 rgba(0, 0, 0, .1);--shadow-md: 0 4px 6px -1px rgba(0, 0, 0, .1), 0 2px 4px -1px rgba(0, 0, 0, .06);--shadow-lg: 0 10px 15px -3px rgba(0, 0, 0, .1), 0 4px 6px -2px rgba(0, 0, 0, .05);--radius-sm: 4px;--radius-md: 8px;--radius-lg: 12px;--transition: all .3s cubic-bezier(.4, 0, .2, 1)}.article-container[_ngcontent-%COMP%]{max-width:680px;margin:0 auto;padding:2rem 1rem}@keyframes _ngcontent-%COMP%_fadeIn{0%{opacity:0;transform:translateY(20px)}to{opacity:1;transform:translateY(0)}}@keyframes _ngcontent-%COMP%_slideInUp{0%{opacity:0;transform:translateY(30px)}to{opacity:1;transform:translateY(0)}}@keyframes _ngcontent-%COMP%_spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}@keyframes _ngcontent-%COMP%_pulse{0%,to{transform:scale(1)}50%{transform:scale(1.05)}}.fade-in[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_fadeIn .6s ease-out}.slide-in[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_slideInUp .4s ease-out}.pulse[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_pulse 2s infinite}.back-button[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5rem;padding:.75rem 1rem;background:var(--bg-secondary);border:1px solid var(--border-color);border-radius:var(--radius-md);color:var(--text-secondary);font-weight:500;cursor:pointer;transition:var(--transition);margin-bottom:2rem;text-decoration:none}.back-button[_ngcontent-%COMP%]:hover{background:var(--bg-elevated);color:var(--text-primary);border-color:var(--border-hover);box-shadow:var(--shadow-sm)}.hero-section[_ngcontent-%COMP%]{text-align:center;margin-bottom:3rem;padding:2rem 0}.article-emoji[_ngcontent-%COMP%]{font-size:3.5rem;margin-bottom:1.5rem;display:block}.article-title[_ngcontent-%COMP%]{font-size:clamp(2rem,5vw,2.8rem);margin-bottom:1.5rem;font-weight:700;line-height:1.2;color:var(--text-primary);letter-spacing:-.5px}.article-meta[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;justify-content:center;gap:1.2rem;color:var(--text-secondary);font-size:.9rem;margin-top:1.5rem}.meta-item[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.4rem}.meta-item[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{opacity:.7}.reading-progress[_ngcontent-%COMP%]{position:fixed;top:0;left:0;height:3px;background:linear-gradient(90deg,var(--primary-color),var(--primary-hover));z-index:1000;transition:width .3s ease}.article-content[_ngcontent-%COMP%]{font-size:1.2rem;text-align:left;line-height:1.7;margin:3rem 0;color:var(--text-primary);font-family:Georgia,serif}.article-content[_ngcontent-%COMP%]   [_ngcontent-%COMP%]:deep(p){margin-bottom:1.8rem;letter-spacing:-.03px}.article-content.rtl[_ngcontent-%COMP%]{text-align:right;direction:rtl}.loading-state[_ngcontent-%COMP%], .comments-loading[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;gap:1rem;padding:3rem;color:var(--text-secondary)}.comments-loading[_ngcontent-%COMP%]{flex-direction:row;justify-content:center;padding:2rem}.modern-spinner[_ngcontent-%COMP%]{width:40px;height:40px;border:3px solid var(--bg-secondary);border-top:3px solid var(--primary-color);border-radius:50%;animation:_ngcontent-%COMP%_spin 1s linear infinite}.modern-spinner.small[_ngcontent-%COMP%]{width:20px;height:20px;border-width:2px}.button-spinner[_ngcontent-%COMP%]{display:inline-block;width:16px;height:16px;border:2px solid transparent;border-top:2px solid currentColor;border-radius:50%;animation:_ngcontent-%COMP%_spin 1s linear infinite;margin-right:.5rem}.engagement-section[_ngcontent-%COMP%]{display:grid;gap:2rem;margin:3rem 0;border-top:1px solid var(--border-color);padding-top:2rem}.upvote-card[_ngcontent-%COMP%]{background:var(--bg-elevated);border-radius:var(--radius-md);padding:1.5rem;text-align:center}.upvote-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0 0 .5rem;color:var(--text-primary);font-size:1.1rem;font-weight:600}.upvote-header[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0 0 1.5rem;color:var(--text-secondary);font-size:.9rem}.vote-container[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;gap:2rem}.vote-display[_ngcontent-%COMP%]{text-align:center}.vote-count[_ngcontent-%COMP%]{font-size:1.8rem;font-weight:700;color:var(--primary-color);line-height:1}.vote-label[_ngcontent-%COMP%]{font-size:.875rem;color:var(--text-muted);margin-top:.25rem}.modern-upvote-button[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5rem;padding:.8rem 1.5rem;background:transparent;color:var(--text-secondary);border:1px solid var(--border-color);border-radius:var(--radius-md);font-size:.95rem;font-weight:500;cursor:pointer;transition:var(--transition)}.modern-upvote-button[_ngcontent-%COMP%]:hover:not(:disabled){background:var(--bg-secondary);border-color:var(--border-hover)}.modern-upvote-button.voted[_ngcontent-%COMP%]{background:var(--primary-color);color:#fff;border-color:var(--primary-color)}.modern-upvote-button.disabled[_ngcontent-%COMP%]{background:var(--text-muted);cursor:not-allowed;transform:none}.modern-upvote-button[_ngcontent-%COMP%]:disabled{opacity:.7;cursor:not-allowed;transform:none}.share-section[_ngcontent-%COMP%]{background:var(--bg-secondary);border-radius:var(--radius-md);padding:1.5rem;text-align:center}.share-section[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{margin:0 0 1rem;color:var(--text-primary);font-size:1rem}.share-buttons[_ngcontent-%COMP%]{display:flex;gap:1rem;justify-content:center}.share-btn[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5rem;padding:.75rem 1.5rem;border:1px solid var(--border-color);border-radius:var(--radius-md);background:var(--bg-primary);color:var(--text-secondary);font-size:.875rem;font-weight:500;cursor:pointer;transition:var(--transition)}.share-btn[_ngcontent-%COMP%]:hover{background:var(--bg-elevated);border-color:var(--border-hover);transform:translateY(-1px);box-shadow:var(--shadow-sm)}.share-btn.twitter[_ngcontent-%COMP%]:hover{color:#1da1f2;border-color:#1da1f2}.share-btn.copy.copied[_ngcontent-%COMP%]{color:var(--success-color);border-color:var(--success-color);background:#f0fdf4}.comments-section[_ngcontent-%COMP%]{margin:4rem 0;border-top:1px solid var(--border-color);padding-top:2rem}.comments-header[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;margin-bottom:2rem}.comments-title[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.75rem;font-size:1.3rem;font-weight:700;margin:0;color:var(--text-primary)}.comments-count[_ngcontent-%COMP%]{background:linear-gradient(135deg,var(--primary-color),var(--primary-hover));color:#fff;padding:.375rem .75rem;border-radius:50px;font-size:.875rem;font-weight:600}.comments-controls[_ngcontent-%COMP%]{display:flex;gap:1rem;margin-bottom:2rem}.sort-btn[_ngcontent-%COMP%]{padding:.5rem 1rem;border:1px solid var(--border-color);border-radius:var(--radius-sm);background:var(--bg-primary);color:var(--text-secondary);font-size:.875rem;cursor:pointer;transition:var(--transition)}.sort-btn.active[_ngcontent-%COMP%], .sort-btn[_ngcontent-%COMP%]:hover{background:var(--primary-color);color:#fff;border-color:var(--primary-color)}.comments-empty[_ngcontent-%COMP%]{text-align:center;padding:4rem 2rem;color:var(--text-secondary);background:var(--bg-secondary);border-radius:var(--radius-md)}.empty-icon[_ngcontent-%COMP%]{font-size:3rem;margin-bottom:1rem}.comments-empty[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0 0 .5rem;color:var(--text-primary)}.comment-item[_ngcontent-%COMP%]{background:var(--bg-elevated);border:1px solid var(--border-color);border-radius:var(--radius-md);padding:1.5rem;margin-bottom:1.5rem;transition:var(--transition);animation:_ngcontent-%COMP%_slideInUp .4s ease-out forwards}.comment-item[_ngcontent-%COMP%]:hover{box-shadow:var(--shadow-md);border-color:var(--border-hover)}.comment-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:flex-start;margin-bottom:1rem}.comment-author[_ngcontent-%COMP%]{display:flex;align-items:center;gap:1rem}.author-avatar[_ngcontent-%COMP%]{width:40px;height:40px;background:var(--primary-color);border-radius:50%;display:flex;align-items:center;justify-content:center;font-weight:600;color:#fff;flex-shrink:0;font-size:.875rem}.author-info[_ngcontent-%COMP%]{display:flex;flex-direction:column}.author-name[_ngcontent-%COMP%]{font-weight:600;color:var(--text-primary);font-size:.9rem}.comment-date[_ngcontent-%COMP%]{font-size:.75rem;color:var(--text-muted);margin-top:.25rem}.author-badge[_ngcontent-%COMP%]{background:linear-gradient(135deg,var(--primary-color),var(--primary-hover));color:#fff;padding:.25rem .5rem;border-radius:12px;font-size:.7rem;font-weight:600;text-transform:uppercase;letter-spacing:.025em;margin-left:.5rem}.comment-content[_ngcontent-%COMP%]{text-align:left;line-height:1.6;color:var(--text-primary);font-size:1rem;margin-top:1rem}.comment-actions[_ngcontent-%COMP%]{display:flex;gap:.5rem}.delete-btn[_ngcontent-%COMP%]{background:none;border:none;cursor:pointer;padding:.5rem;border-radius:var(--radius-sm);color:var(--text-muted);transition:var(--transition);display:flex;align-items:center;justify-content:center}.delete-btn[_ngcontent-%COMP%]:hover{color:var(--error-color);background:#fef2f2}.comment-form-card[_ngcontent-%COMP%]{background:var(--bg-elevated);border:1px solid var(--border-color);border-radius:var(--radius-md);padding:2rem;margin-top:2rem}.auth-prompt[_ngcontent-%COMP%]{text-align:center;padding:2rem;color:var(--text-secondary)}.auth-icon[_ngcontent-%COMP%]{font-size:2.5rem;margin-bottom:1rem}.auth-prompt[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0 0 .5rem;color:var(--text-primary);font-size:1.25rem}.auth-link[_ngcontent-%COMP%]{color:var(--primary-color);text-decoration:none;font-weight:600;transition:var(--transition)}.auth-link[_ngcontent-%COMP%]:hover{text-decoration:underline;color:var(--primary-hover)}.comment-form[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_fadeIn .5s ease-out}.form-header[_ngcontent-%COMP%]{display:flex;align-items:center;gap:1rem;margin-bottom:1.5rem}.form-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0;color:var(--text-primary);font-size:1.125rem;font-weight:600}.user-avatar[_ngcontent-%COMP%]{width:36px;height:36px;background:var(--primary-color);border-radius:50%;display:flex;align-items:center;justify-content:center;font-weight:600;color:#fff;font-size:.875rem}.form-group[_ngcontent-%COMP%]{margin-bottom:1.5rem}.modern-textarea[_ngcontent-%COMP%]{width:100%;padding:1rem;border-radius:var(--radius-md);border:1px solid var(--border-color);font-family:inherit;font-size:1rem;transition:var(--transition);resize:vertical;min-height:120px;line-height:1.5}.modern-textarea[_ngcontent-%COMP%]:focus{outline:none;border-color:var(--primary-color);box-shadow:0 0 0 2px #f7a4001a}.character-count[_ngcontent-%COMP%]{font-size:.75rem;color:var(--text-muted);text-align:right;margin-top:.5rem;transition:var(--transition)}.character-count.warning[_ngcontent-%COMP%]{color:var(--warning-color);font-weight:500}.character-count.danger[_ngcontent-%COMP%]{color:var(--error-color);font-weight:600}.form-actions[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;gap:1rem}.primary-btn[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5rem;padding:.8rem 1.5rem;border:none;border-radius:var(--radius-md);background:var(--primary-color);color:#fff;font-weight:500;font-size:.95rem;cursor:pointer;transition:var(--transition)}.primary-btn[_ngcontent-%COMP%]:hover:not(:disabled){background:var(--primary-hover);transform:translateY(-1px)}.primary-btn[_ngcontent-%COMP%]:disabled{background:var(--text-muted);cursor:not-allowed;transform:none}.secondary-btn[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5rem;padding:.8rem 1.5rem;border:1px solid var(--border-color);border-radius:var(--radius-md);background:var(--bg-primary);color:var(--text-secondary);font-weight:500;font-size:.95rem;cursor:pointer;transition:var(--transition)}.secondary-btn[_ngcontent-%COMP%]:hover{border-color:var(--border-hover);background:var(--bg-secondary);color:var(--text-primary)}.success-message[_ngcontent-%COMP%], .error-message[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.75rem;padding:1rem 1.25rem;border-radius:var(--radius-md);margin:1.5rem 0;font-weight:500;font-size:.95rem}.success-message[_ngcontent-%COMP%]{background:#f0fdf4;color:var(--success-color);border:1px solid #bbf7d0}.error-message[_ngcontent-%COMP%]{background:#fef2f2;color:var(--error-color);border:1px solid #fecaca}.not-found[_ngcontent-%COMP%]{text-align:center;padding:4rem 2rem;color:var(--text-secondary)}.not-found-icon[_ngcontent-%COMP%]{font-size:4rem;margin-bottom:1.5rem}.not-found[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{color:var(--text-primary);margin-bottom:1rem;font-size:1.75rem}.not-found[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin-bottom:2rem;font-size:1.1rem}.category-badge[data-category="Personal Growth"][_ngcontent-%COMP%]{color:#fef3c7;background:#92400e}.category-badge[data-category="Life Lessons"][_ngcontent-%COMP%]{color:#fce7f3;background:#9d174d}.category-badge[data-category="Cultural Heritage"][_ngcontent-%COMP%]{color:#e0f2fe;background:#0369a1}.category-badge[data-category="Travel & Adventure"][_ngcontent-%COMP%]{color:#dbeafe;background:#1e40af}.category-badge[data-category="Work & Career"][_ngcontent-%COMP%]{color:#f3e8ff;background:#6d28d9}.category-badge[data-category=Relationships][_ngcontent-%COMP%]{color:#ffe4e6;background:#be123c}.category-badge[data-category="Family Stories"][_ngcontent-%COMP%]{color:#dcfce7;background:#166534}.category-badge[data-category="Overcoming Challenges"][_ngcontent-%COMP%]{color:#fee2e2;background:#b91c1c}.category-badge[data-category="Creative Journey"][_ngcontent-%COMP%]{color:#ccfbf1;background:#0f766e}.category-badge[data-category="Social Impact"][_ngcontent-%COMP%]{color:#ede9fe;background:#5b21b6}.category-badge[data-category="Health & Wellness"][_ngcontent-%COMP%]{color:#fef9c3;background:#854d0e}.category-badge[data-category="Education & Learning"][_ngcontent-%COMP%]{color:#d1fae5;background:#047857}.category-badge[data-category="Dreams & Aspirations"][_ngcontent-%COMP%]{color:#fdf2f8;background:#9d174d}.category-badge[data-category="Unexpected Moments"][_ngcontent-%COMP%]{color:#e0f7fa;background:#00695c}.category-badge[data-category=Other][_ngcontent-%COMP%]{color:#f5f5f5;background:#374151}.category-badge[_ngcontent-%COMP%]{display:inline-block;padding:.35rem .75rem;border-radius:50px;font-size:.75rem;font-weight:600;text-transform:uppercase;letter-spacing:.025em;margin-bottom:1.5rem}@media (max-width: 768px){.article-container[_ngcontent-%COMP%]{padding:1rem}.article-title[_ngcontent-%COMP%]{font-size:2rem}.article-content[_ngcontent-%COMP%]{font-size:1.1rem;line-height:1.65}.article-meta[_ngcontent-%COMP%]{flex-direction:column;gap:.75rem}.vote-container[_ngcontent-%COMP%]{flex-direction:column;gap:1.5rem}.share-buttons[_ngcontent-%COMP%]{flex-direction:column}.comment-header[_ngcontent-%COMP%]{flex-direction:column;align-items:flex-start;gap:1rem}.comment-actions[_ngcontent-%COMP%]{align-self:flex-end}.form-actions[_ngcontent-%COMP%]{flex-direction:column-reverse}.comments-controls[_ngcontent-%COMP%]{flex-direction:column;gap:.5rem}}@media (max-width: 480px){.hero-section[_ngcontent-%COMP%]{padding:1rem 0}.article-emoji[_ngcontent-%COMP%]{font-size:3rem}.modern-upvote-button[_ngcontent-%COMP%]{padding:.75rem 1.5rem;font-size:.9rem}.comment-form-card[_ngcontent-%COMP%]{padding:1.5rem}}.meta-item[_ngcontent-%COMP%]   img[_ngcontent-%COMP%], .comment-author[_ngcontent-%COMP%]   img[_ngcontent-%COMP%], .form-header[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:3rem;height:100%;border-radius:50%}']})};var vG=["contentEditor"];function _G(n,e){n&1&&(h(0,"div",5)(1,"div",6)(2,"div",7),b(3,"\u270D\uFE0F"),p(),h(4,"h1"),b(5,"Start writing"),p(),h(6,"p"),b(7,"Join thousands of writers sharing their stories"),p(),h(8,"div",8)(9,"a",9),b(10,"Sign In"),p(),h(11,"a",10),b(12,"Create Account"),p()()()())}function yG(n,e){n&1&&(h(0,"div",11),z(1,"div",12),p())}function bG(n,e){if(n&1){let t=Z();h(0,"div",63)(1,"div",64)(2,"div",65),b(3,"\u{1F4C4}"),p(),h(4,"div",66)(5,"h3"),b(6,"Previous draft found"),p(),h(7,"p"),b(8,"We found an unsaved draft from your last session. Would you like to continue?"),p()(),h(9,"div",67)(10,"button",68),B("click",function(){N(t);let i=I(2);return F(i.restoreDraft())}),b(11,"Restore"),p(),h(12,"button",69),B("click",function(){N(t);let i=I(2);return F(i.dismissDraftRecovery())}),b(13,"Start fresh"),p()()()()}}function wG(n,e){n&1&&(h(0,"span"),b(1,"Auto-saving..."),p())}function EG(n,e){if(n&1&&(h(0,"span"),b(1),p()),n&2){let t=I(3);v(),ee("Saved ",t.getTimeSince())}}function CG(n,e){n&1&&(h(0,"span",74),b(1,"Save failed"),p())}function IG(n,e){n&1&&(h(0,"span"),b(1,"Saved"),p())}function SG(n,e){if(n&1&&(h(0,"div",70),z(1,"span",71),j(2,wG,2,0,"span",72)(3,EG,2,1,"span",72)(4,CG,2,0,"span",73)(5,IG,2,0,"span",72),p()),n&2){let t=I(2);v(),he("pulse",t.autoSaveStatus==="saving")("error",t.autoSaveStatus==="error"),v(),C("ngIf",t.autoSaveStatus==="saving"),v(),C("ngIf",t.autoSaveStatus==="saved"),v(),C("ngIf",t.autoSaveStatus==="error"),v(),C("ngIf",t.autoSaveStatus==="idle"&&t.isDraftSaved)}}function TG(n,e){if(n&1&&(h(0,"div",75)(1,"div",76),z(2,"div",77),p(),h(3,"span",78),b(4),p()()),n&2){let t=I(2);v(2),xn("width",t.getWritingProgress().percentage,"%"),v(2),Mn("",t.getWritingProgress().completed,"/",t.getWritingProgress().total," requirements complete")}}function DG(n,e){if(n&1&&(h(0,"div",79),b(1),p()),n&2){let t=I(2);he("warning",t.getTitleCharacterInfo().isWarning)("error",t.getTitleCharacterInfo().isError),v(),Mn(" ",t.getTitleCharacterInfo().count,"/",t.getTitleCharacterInfo().limit," ")}}function xG(n,e){n&1&&(h(0,"div",80),b(1," Tell your story... "),p())}function MG(n,e){if(n&1&&(h(0,"div",81)(1,"span"),b(2),p(),h(3,"span",82),b(4,"\u2022"),p(),h(5,"span"),b(6),p()()),n&2){let t=I(2);v(2),ee("",t.getWordCount()," words"),v(4),ee("",t.getReadTime()," min read")}}function PG(n,e){if(n&1&&(h(0,"div",113),z(1,"img",114),p()),n&2){let t=I(3);v(),C("src",t.formData.coverImg,ct)}}function AG(n,e){if(n&1&&(h(0,"option",115),b(1),p()),n&2){let t=e.$implicit;C("value",t),v(),K(t)}}function kG(n,e){if(n&1&&(h(0,"option",115),b(1),p()),n&2){let t=e.$implicit;C("value",t.value),v(),K(t.label)}}function OG(n,e){if(n&1){let t=Z();h(0,"button",118),B("click",function(){let i=N(t).$implicit,o=I(4);return F(o.selectEmoji(i))}),b(1),p()}if(n&2){let t=e.$implicit;v(),ee(" ",t," ")}}function RG(n,e){if(n&1&&(h(0,"div",116),j(1,OG,2,1,"button",117),p()),n&2){let t=I(3);v(),C("ngForOf",t.emojiSuggestions)}}function NG(n,e){if(n&1){let t=Z();h(0,"span",121),b(1),h(2,"button",122),B("click",function(){let i=N(t).$implicit,o=I(4);return F(o.removeTag(i))}),b(3,"\xD7"),p()()}if(n&2){let t=e.$implicit;v(),ee(" ",t," ")}}function FG(n,e){if(n&1&&(h(0,"div",119),j(1,NG,4,1,"span",120),p()),n&2){let t=I(3);v(),C("ngForOf",t.selectedTags)}}function LG(n,e){if(n&1){let t=Z();h(0,"button",127),B("click",function(){let i=N(t).$implicit,o=I(4);return F(o.selectSuggestedTag(i))}),b(1),p()}if(n&2){let t=e.$implicit;v(),ee(" + ",t," ")}}function VG(n,e){if(n&1&&(h(0,"div",123)(1,"label",124),b(2,"Suggested tags:"),p(),h(3,"div",125),j(4,LG,2,1,"button",126),p()()),n&2){let t=I(3);v(4),C("ngForOf",t.suggestedTags)}}function UG(n,e){if(n&1){let t=Z();h(0,"div",83),B("click",function(){N(t);let i=I(2);return F(i.closePublishModal())}),h(1,"div",84),B("click",function(i){return N(t),F(i.stopPropagation())}),h(2,"div",85)(3,"h2"),b(4,"Story preview"),p(),h(5,"button",86),B("click",function(){N(t);let i=I(2);return F(i.closePublishModal())}),b(6,"\xD7"),p()(),h(7,"div",87)(8,"div",88),j(9,PG,2,1,"div",89),h(10,"h1",90),b(11),p(),h(12,"div",91)(13,"div",92),z(14,"img",93),h(15,"span",94),b(16),p()(),h(17,"div",95),b(18),p()()(),h(19,"div",96)(20,"div",97)(21,"label"),b(22,"Category *"),p(),h(23,"select",98),We("ngModelChange",function(i){N(t);let o=I(2);return Xe(o.formData.category,i)||(o.formData.category=i),F(i)}),h(24,"option",99),b(25,"Choose a category"),p(),j(26,AG,2,2,"option",100),p()(),h(27,"div",101)(28,"div",97)(29,"label"),b(30,"Language *"),p(),h(31,"select",102),We("ngModelChange",function(i){N(t);let o=I(2);return Xe(o.formData.language,i)||(o.formData.language=i),F(i)}),h(32,"option",99),b(33,"Select language"),p(),j(34,kG,2,2,"option",100),p()(),h(35,"div",97)(36,"label"),b(37,"Emoji *"),p(),h(38,"div",103)(39,"input",104),We("ngModelChange",function(i){N(t);let o=I(2);return Xe(o.formData.emoji,i)||(o.formData.emoji=i),F(i)}),B("focus",function(){N(t);let i=I(2);return F(i.showEmojiSuggestions=!0)})("blur",function(){N(t);let i=I(2);return F(i.hideEmojiSuggestions())}),p(),j(40,RG,2,1,"div",105),p()()(),h(41,"div",97)(42,"label"),b(43,"Tags (optional)"),p(),h(44,"div",106),j(45,FG,2,1,"div",107)(46,VG,5,1,"div",108),h(47,"input",109),We("ngModelChange",function(i){N(t);let o=I(2);return Xe(o.tagsInput,i)||(o.tagsInput=i),F(i)}),B("keydown.enter",function(i){N(t);let o=I(2);return F(o.addTag(i))}),p(),h(48,"small",110),b(49),p()()()()(),h(50,"div",111)(51,"button",112),B("click",function(){N(t);let i=I(2);return F(i.closePublishModal())}),b(52,"Cancel"),p(),h(53,"button",23),B("click",function(){N(t);let i=I(2);return F(i.submitStory())}),b(54),p()()()()}if(n&2){let t=I(2);v(9),C("ngIf",t.formData.coverImg),v(2),K(t.formData.title||"Untitled Story"),v(3),C("src",t.getUserAvatar(),ct)("alt",t.getUserName()),v(2),K(t.getUserName()),v(2),Mn(" ",t.getWordCount()," words \u2022 ",t.getReadTime()," min read "),v(5),qe("ngModel",t.formData.category),v(3),C("ngForOf",t.categories),v(5),qe("ngModel",t.formData.language),v(3),C("ngForOf",t.languages),v(5),qe("ngModel",t.formData.emoji),v(),C("ngIf",t.showEmojiSuggestions),v(5),C("ngIf",t.selectedTags.length>0),v(),C("ngIf",t.suggestedTags.length>0),v(),qe("ngModel",t.tagsInput),C("disabled",t.selectedTags.length>=5),v(2),ee("",t.selectedTags.length,"/5 tags \u2022 Press Enter to add"),v(4),C("disabled",!t.isValidForPublish()||t.isSubmitting),v(),ee(" ",t.isSubmitting?"Publishing...":"Publish now"," ")}}function jG(n,e){if(n&1){let t=Z();h(0,"div",128)(1,"div",129),ce(),h(2,"svg",38),z(3,"circle",130)(4,"line",131)(5,"line",132),p()(),Ae(),h(6,"div",133)(7,"div",134),b(8),p()(),h(9,"button",135),B("click",function(){N(t);let i=I(2);return F(i.clearMessages())}),b(10,"\xD7"),p()()}if(n&2){let t=I(2);he("visible",!!t.errorMessage),v(8),K(t.errorMessage)}}function BG(n,e){if(n&1){let t=Z();h(0,"div",136)(1,"div",129),ce(),h(2,"svg",38),z(3,"polyline",137),p()(),Ae(),h(4,"div",133)(5,"div",134),b(6),p()(),h(7,"button",135),B("click",function(){N(t);let i=I(2);return F(i.clearMessages())}),b(8,"\xD7"),p()()}if(n&2){let t=I(2);he("visible",!!t.successMessage),v(6),K(t.successMessage)}}function $G(n,e){if(n&1){let t=Z();h(0,"div",13),j(1,bG,14,0,"div",14),h(2,"div",15)(3,"div",16)(4,"button",17),B("click",function(){N(t);let i=I();return F(i.navigateHome())}),h(5,"span",18),b(6,"\u270D\uFE0F"),p(),h(7,"span",19),b(8,"Write"),p()(),j(9,SG,6,8,"div",20),p(),h(10,"div",21)(11,"button",22),B("click",function(){N(t);let i=I();return F(i.saveDraft())}),b(12),p(),h(13,"button",23),B("click",function(){N(t);let i=I();return F(i.openPublishModal())}),b(14," Publish "),p(),h(15,"div",24),z(16,"img",25),p()()(),j(17,TG,5,4,"div",26),h(18,"div",27)(19,"div",28)(20,"div",29)(21,"textarea",30,0),We("ngModelChange",function(i){N(t);let o=I();return Xe(o.formData.title,i)||(o.formData.title=i),F(i)}),B("input",function(){N(t);let i=qt(22),o=I();return F(o.adjustTextareaHeight(i))}),p(),j(23,DG,2,6,"div",31),p(),h(24,"div",32)(25,"div",33)(26,"button",34),B("click",function(){N(t);let i=I();return F(i.formatText("bold"))}),h(27,"strong"),b(28,"B"),p()(),h(29,"button",35),B("click",function(){N(t);let i=I();return F(i.formatText("italic"))}),h(30,"em"),b(31,"I"),p()()(),z(32,"div",36),h(33,"div",33)(34,"button",37),B("click",function(){N(t);let i=I();return F(i.insertLink())}),ce(),h(35,"svg",38),z(36,"path",39)(37,"path",40),p()(),Ae(),h(38,"button",41),B("click",function(){N(t);let i=I();return F(i.formatText("formatBlock","h2"))}),h(39,"strong"),b(40,"H2"),p()()(),z(41,"div",36),h(42,"div",33)(43,"button",42),B("click",function(){N(t);let i=I();return F(i.formatText("insertUnorderedList"))}),ce(),h(44,"svg",38),z(45,"line",43)(46,"line",44)(47,"line",45)(48,"line",46)(49,"line",47)(50,"line",48),p()(),Ae(),h(51,"button",49),B("click",function(){N(t);let i=I();return F(i.formatText("insertOrderedList"))}),ce(),h(52,"svg",38),z(53,"line",50)(54,"line",51)(55,"line",52)(56,"path",53)(57,"path",54)(58,"path",55)(59,"path",56),p()()()(),Ae(),h(60,"div",57,1),B("input",function(i){N(t);let o=I();return F(o.onContentInput(i))})("focus",function(){N(t);let i=I();return F(i.onEditorFocus())})("blur",function(){N(t);let i=I();return F(i.onEditorBlur())})("keydown",function(i){N(t);let o=I();return F(o.onEditorKeydown(i))})("keyup",function(i){N(t);let o=I();return F(o.onEditorKeyup(i))})("paste",function(i){N(t);let o=I();return F(o.onEditorPaste(i))}),j(62,xG,2,0,"div",58),p(),j(63,MG,7,2,"div",59),p()(),j(64,UG,55,20,"div",60)(65,jG,11,3,"div",61)(66,BG,9,3,"div",62),p()}if(n&2){let t=I();v(),C("ngIf",t.showDraftRecovery),v(8),C("ngIf",t.autoSaveStatus!=="idle"||t.isDraftSaved),v(2),he("saving",t.isSubmitting&&t.formData.status==="draft"),C("disabled",!t.canSave()||t.isSubmitting),v(),ee(" ",t.isSubmitting&&t.formData.status==="draft"?"Saving...":"Save draft"," "),v(),C("disabled",!t.canSave()||t.isSubmitting),v(3),C("src",t.getUserAvatar(),ct)("alt",t.getUserName()),v(),C("ngIf",t.getWritingProgress().shouldShow),v(4),qe("ngModel",t.formData.title),v(2),C("ngIf",t.getTitleCharacterInfo().shouldShow),v(),he("visible",t.showToolbar),v(2),he("active",t.isFormatActive("bold")),v(3),he("active",t.isFormatActive("italic")),v(31),he("rtl",t.isRTL),sn("dir",t.isRTL?"rtl":"ltr"),v(2),C("ngIf",!t.formData.content||t.formData.content.length===0),v(),C("ngIf",t.formData.content&&t.formData.content.length>0),v(),C("ngIf",t.showPublishModal),v(),C("ngIf",t.errorMessage),v(),C("ngIf",t.successMessage)}}var qm=class n{contentEditor;storyService=k(gi);authService=k(ot);router=k(Ve);profileService=k(fr);notificationService=k(hr);currentUser=null;authLoading=!0;isSubmitting=!1;successMessage="";errorMessage="";tagsInput="";selectedTags=[];suggestedTags=[];showPublishModal=!1;showCoverOptions=!1;showToolbar=!1;showEmojiSuggestions=!1;showDraftRecovery=!1;isDraftSaved=!1;isRTL=!1;autoSaveStatus="idle";lastSavedTime=null;recoveredDraft=null;selectionRange=null;toolbarTimeout;isInitialized=!1;retryCount=0;maxRetries=2;emojiSuggestions=["\u{1F4DD}","\u270D\uFE0F","\u{1F4D6}","\u{1F4AD}","\u{1F31F}","\u2764\uFE0F","\u{1F525}","\u{1F4A1}","\u{1F3AF}","\u{1F680}","\u{1F308}","\u2728","\u{1F4AA}","\u{1F64F}","\u{1F60A}","\u{1F389}","\u{1F30D}","\u{1F3D4}\uFE0F","\u{1F30A}","\u{1F3A8}","\u{1F3B5}","\u{1F4DA}","\u2B50","\u{1F4AB}"];categories=["Personal Growth","Life Lessons","Cultural Heritage","Travel & Adventure","Work & Career","Relationships","Family Stories","Overcoming Challenges","Creative Journey","Social Impact","Health & Wellness","Education & Learning","Dreams & Aspirations","Unexpected Moments","Other"];languages=[{value:"en",label:"English"},{value:"ar",label:"\u0627\u0644\u0639\u0631\u0628\u064A\u0629"},{value:"fr",label:"Fran\xE7ais"},{value:"mixed",label:"Mixed Languages"}];formData={category:"",language:"",emoji:"",title:"",content:"",coverImg:"",status:"published",tags:[]};userSubscription;autoSaveInterval;ngOnInit(){this.userSubscription=this.authService.user$.subscribe(e=>{this.currentUser=e,this.authLoading=!1,e&&(this.formData.authorId=e.uid,this.formData.authorName=e.displayName||e.email?.split("@")[0]||"Anonymous",this.formData.authorPhotoURL=e.photoURL||"")}),this.checkForExistingDraft(),this.setupAutoSave(),this.setupKeyboardShortcuts()}ngAfterViewInit(){this.initializeEditor()}ngOnDestroy(){this.userSubscription&&this.userSubscription.unsubscribe(),this.autoSaveInterval&&clearInterval(this.autoSaveInterval),this.toolbarTimeout&&clearTimeout(this.toolbarTimeout),document.removeEventListener("selectionchange",this.handleSelectionChange.bind(this)),this.clearMessages()}checkForExistingDraft(){let e=localStorage.getItem("story-draft");if(e&&e!=="{}")try{let t=JSON.parse(e);(t.title||t.content&&t.content.length>20)&&(this.recoveredDraft=t,this.showDraftRecovery=!0,this.showSuccess("Previous draft found. Restore it or start fresh."))}catch(t){console.error("Error checking draft:",t)}}restoreDraft(){this.recoveredDraft&&(this.formData=H(H({},this.formData),this.recoveredDraft),this.selectedTags=this.recoveredDraft.tags||[],this.showDraftRecovery=!1,this.contentEditor?.nativeElement&&this.formData.content&&(this.contentEditor.nativeElement.innerHTML=this.formData.content),this.showSuccess("Draft restored successfully!"))}dismissDraftRecovery(){this.showDraftRecovery=!1,localStorage.removeItem("story-draft"),this.recoveredDraft=null}setupAutoSave(){this.autoSaveInterval=window.setInterval(()=>{if(this.canSave()&&!this.isSubmitting&&!this.showDraftRecovery){this.autoSaveStatus="saving";try{this.saveDraftToLocal(),this.autoSaveStatus="saved",this.lastSavedTime=new Date,setTimeout(()=>{this.autoSaveStatus="idle"},2e3)}catch(e){this.autoSaveStatus="error",console.error("Auto-save failed:",e)}}},3e4)}getTimeSince(){if(!this.lastSavedTime)return"";let t=Math.floor((new Date().getTime()-this.lastSavedTime.getTime())/1e3);return t<60?"just now":t<3600?`${Math.floor(t/60)}m ago`:`${Math.floor(t/3600)}h ago`}getTitleCharacterInfo(){let e=this.formData.title?.length||0,t=200,r=e/t*100;return{count:e,limit:t,percentage:r,isWarning:r>=80,isError:r>=95,shouldShow:r>=70}}getWritingProgress(){let e={hasTitle:!!this.formData.title&&this.formData.title.length>=3,hasContent:!!this.formData.content&&this.formData.content.length>=100,hasCategory:!!this.formData.category,hasLanguage:!!this.formData.language,hasEmoji:!!this.formData.emoji,hasMinimumWords:this.getWordCount()>=50},t=Object.values(e).filter(Boolean).length,r=Object.keys(e).length;return{percentage:Math.round(t/r*100),completed:t,total:r,requirements:e,shouldShow:this.formData.title||this.formData.content}}generateTagSuggestions(){let e=this.formData.content?.toLowerCase()||"",t=this.formData.title?.toLowerCase()||"",r=this.formData.category?.toLowerCase()||"",i=`${t} ${e} ${r}`,o={travel:["adventure","journey","exploration","culture"],work:["career","professional","business","leadership"],family:["relationships","love","home","parenting"],personal:["growth","self-improvement","reflection","mindfulness"],creative:["art","design","inspiration","creativity"],health:["wellness","fitness","mental-health","lifestyle"],learning:["education","knowledge","skills","development"],challenge:["resilience","strength","perseverance","courage"],story:["narrative","experience","life-lessons","wisdom"]};this.suggestedTags=[],Object.entries(o).forEach(([s,a])=>{i.includes(s)&&this.suggestedTags.push(...a)}),this.suggestedTags=[...new Set(this.suggestedTags)].filter(s=>!this.selectedTags.includes(s)).slice(0,5)}selectSuggestedTag(e){this.selectedTags.length<5&&!this.selectedTags.includes(e)&&(this.selectedTags.push(e),this.generateTagSuggestions())}submitWithRetry(e){return y(this,null,function*(){let t=0;for(;t<=this.maxRetries;)try{return yield e()}catch(r){if(t++,t>this.maxRetries)throw r;this.showError(`Connection issue. Retrying... (${this.maxRetries-t+1} attempts left)`),yield new Promise(i=>setTimeout(i,1e3*t))}})}initializeEditor(){if(this.isInitialized||!this.contentEditor?.nativeElement)return;let e=this.contentEditor.nativeElement;this.formData.content?e.innerHTML=this.formData.content:e.innerHTML="<p><br></p>",e.setAttribute("spellcheck","true"),e.setAttribute("autocomplete","off"),e.setAttribute("autocorrect","on"),e.setAttribute("autocapitalize","sentences"),document.execCommand("defaultParagraphSeparator",!1,"p"),this.isInitialized=!0}navigateHome(){this.router.navigate(["/"])}getUserName(){return this.currentUser?this.currentUser.displayName||this.currentUser.email?.split("@")[0]||"Writer":""}getUserAvatar(){return this.currentUser?this.currentUser.photoURL||`https://ui-avatars.com/api/?name=${encodeURIComponent(this.getUserName())}&background=f7c843&color=fff`:"/assets/default-avatar.png"}getWordCount(){return this.formData.content?this.formData.content.replace(/<[^>]*>/g,"").trim().split(/\s+/).filter(t=>t.length>0).length:0}getReadTime(){let t=this.getWordCount();return Math.max(1,Math.ceil(t/200))}canSave(){return!!(this.formData.title&&this.formData.content&&this.formData.content.length>=10)}isValidForPublish(){return!!(this.formData.title&&this.formData.content&&this.formData.category&&this.formData.language&&this.formData.emoji)}onCoverImageSelected(e){let t=e.target.files[0];if(t){if(t.size>5*1024*1024){this.showError("Image size must be less than 5MB");return}if(!t.type.startsWith("image/")){this.showError("Please select a valid image file");return}let r=new FileReader;r.onload=i=>{this.formData.coverImg=i.target?.result},r.readAsDataURL(t)}}removeCover(){this.formData.coverImg="",this.showCoverOptions=!1}changeCover(){document.querySelector('input[type="file"]')?.click()}adjustTextareaHeight(e){e.style.height="auto",e.style.height=e.scrollHeight+"px"}onContentInput(e){let t=e.target,r=t.innerHTML,i=t.textContent||"",s=/[\u0590-\u05FF\u0600-\u06FF\u0750-\u077F]/.test(i);s!==this.isRTL&&(this.isRTL=s),this.formData.content!==r&&(this.formData.content=r,this.formData.content&&this.formData.content.length>100&&this.generateTagSuggestions())}onEditorKeydown(e){e.key==="Enter"&&!e.shiftKey&&(e.preventDefault(),document.execCommand("formatBlock",!1,"p"),document.execCommand("insertParagraph",!1),setTimeout(()=>{this.cleanupEditorContent()},0)),e.key==="Tab"&&(e.preventDefault(),document.execCommand("insertText",!1,"    "))}onEditorKeyup(e){this.updateContentFromEditor(),e.key==="Escape"&&(this.showToolbar=!1)}onEditorFocus(){document.addEventListener("selectionchange",this.handleSelectionChange.bind(this))}onEditorBlur(){document.removeEventListener("selectionchange",this.handleSelectionChange.bind(this)),this.hideToolbarDelayed()}handleSelectionChange(){let e=window.getSelection();if(!e||e.rangeCount===0||e.isCollapsed){this.hideToolbarDelayed();return}let t=e.getRangeAt(0),r=this.contentEditor?.nativeElement;if(!r||!r.contains(t.commonAncestorContainer)){this.hideToolbarDelayed();return}t.toString().trim().length>0?(this.selectionRange=t.cloneRange(),this.showToolbarAtSelection()):this.hideToolbarDelayed()}showToolbarAtSelection(){this.toolbarTimeout&&clearTimeout(this.toolbarTimeout),this.showToolbar=!0,setTimeout(()=>{this.updateToolbarPosition()},0)}formatText(e,t){if(this.selectionRange){let r=window.getSelection();r&&(r.removeAllRanges(),r.addRange(this.selectionRange))}document.execCommand(e,!1,t),this.updateContentFromEditor(),this.contentEditor?.nativeElement.focus(),this.hideToolbarDelayed()}hideToolbarDelayed(){this.toolbarTimeout&&clearTimeout(this.toolbarTimeout),this.toolbarTimeout=window.setTimeout(()=>{this.showToolbar=!1,this.selectionRange=null},150)}updateToolbarPosition(){if(!this.selectionRange)return;let e=this.selectionRange.getBoundingClientRect(),t=document.querySelector(".editor-toolbar");if(t){let r=t.getBoundingClientRect(),i=window.innerWidth,o=e.top-r.height-10,s=e.left+e.width/2-r.width/2;s<10&&(s=10),s+r.width>i-10&&(s=i-r.width-10),o<10&&(o=e.bottom+10),t.style.position="fixed",t.style.top=`${o}px`,t.style.left=`${s}px`,t.style.transform="none"}}insertLink(){let e=prompt("Enter URL:");e&&e.trim()&&this.formatText("createLink",e)}isFormatActive(e){try{return document.queryCommandState(e)}catch{return!1}}updateContentFromEditor(){if(this.contentEditor?.nativeElement){let e=this.contentEditor.nativeElement.innerHTML;this.formData.content=e}}onEditorPaste(e){e.preventDefault();let t=e.clipboardData?.getData("text/plain")||"";t&&(document.execCommand("insertText",!1,t),this.updateContentFromEditor())}cleanupEditorContent(){if(!this.contentEditor?.nativeElement)return;let e=this.contentEditor.nativeElement,t=e.innerHTML;if(t=t.replace(/<div><br><\/div>/g,"<p><br></p>").replace(/<div>/g,"<p>").replace(/<\/div>/g,"</p>").replace(/<p><\/p>/g,"<p><br></p>").replace(/&nbsp;/g," ").trim(),t!==e.innerHTML){let r=window.getSelection(),i=r?.rangeCount?r.getRangeAt(0):null;if(e.innerHTML=t,i&&e.lastChild)try{let o=document.createRange();o.setStart(e.lastChild,e.lastChild.textContent?.length||0),o.collapse(!0),r?.removeAllRanges(),r?.addRange(o)}catch{e.focus()}this.formData.content=t}}addTag(e){e.preventDefault();let t=this.tagsInput.trim();t&&!this.selectedTags.includes(t)&&this.selectedTags.length<5&&(this.selectedTags.push(t),this.tagsInput="",this.generateTagSuggestions())}removeTag(e){this.selectedTags=this.selectedTags.filter(t=>t!==e),this.generateTagSuggestions()}selectEmoji(e){this.formData.emoji=e,this.showEmojiSuggestions=!1}hideEmojiSuggestions(){setTimeout(()=>{this.showEmojiSuggestions=!1},150)}openPublishModal(){this.canSave()&&(this.generateTagSuggestions(),this.showPublishModal=!0,document.body.style.overflow="hidden")}closePublishModal(){this.showPublishModal=!1,document.body.style.overflow=""}submitStory(){return y(this,null,function*(){if(!(!this.currentUser||this.isSubmitting||!this.isValidForPublish())){this.isSubmitting=!0,this.clearMessages(),this.formData.status="published";try{yield this.submitWithRetry(()=>y(this,null,function*(){let e={title:this.formData.title,content:this.formData.content,category:this.formData.category,language:this.formData.language,emoji:this.formData.emoji,coverImg:this.formData.coverImg||"",status:"published",tags:this.selectedTags,authorId:this.currentUser.uid,authorName:this.currentUser.displayName||this.currentUser.email?.split("@")[0]||"Anonymous",authorPhotoURL:this.currentUser.photoURL||""},t=yield this.storyService.createStory(e);this.notificationService.notifyStoryPublished(this.currentUser.uid,this.formData.title,t),this.profileService.awardUserXP(this.currentUser.uid,25,"posted a story")})),this.showSuccess("Story published successfully!"),this.closePublishModal(),localStorage.removeItem("story-draft"),setTimeout(()=>{this.router.navigate(["/"])},2e3)}catch(e){console.error("Error publishing story:",e),this.showError("Failed to publish story after multiple attempts. Please check your connection and try again.")}finally{this.isSubmitting=!1}}})}saveDraft(){return y(this,null,function*(){if(!(!this.currentUser||this.isSubmitting||!this.canSave())){this.isSubmitting=!0,this.clearMessages(),this.formData.status="draft";try{yield this.submitWithRetry(()=>y(this,null,function*(){let e={title:this.formData.title,content:this.formData.content,category:this.formData.category||"",language:this.formData.language||"",emoji:this.formData.emoji||"\u{1F4DD}",coverImg:this.formData.coverImg||"",status:"draft",tags:this.selectedTags,authorId:this.currentUser.uid,authorName:this.currentUser.displayName||this.currentUser.email?.split("@")[0]||"Anonymous",authorPhotoURL:this.currentUser.photoURL||""};return this.profileService.awardUserXP(this.currentUser.uid,10,"saved a draft"),yield this.storyService.createStory(e)})),this.showSuccess("Draft saved successfully!"),this.closePublishModal(),localStorage.removeItem("story-draft"),setTimeout(()=>{this.router.navigate(["/profile"])},2e3)}catch(e){console.error("Error saving draft:",e),this.showError("Failed to save draft after multiple attempts. Please check your connection and try again.")}finally{this.isSubmitting=!1}}})}saveDraftToLocal(){let e=re(H({},this.formData),{tags:this.selectedTags,timestamp:new Date().toISOString()});localStorage.setItem("story-draft",JSON.stringify(e))}setupKeyboardShortcuts(){document.addEventListener("keydown",e=>{if(e.ctrlKey||e.metaKey)switch(e.key){case"s":e.preventDefault(),this.canSave()&&this.saveDraft();break;case"Enter":e.preventDefault(),this.canSave()&&this.openPublishModal();break}})}showSuccess(e){this.successMessage=e,setTimeout(()=>{this.successMessage=""},5e3)}showError(e){this.errorMessage=e,setTimeout(()=>{this.errorMessage=""},8e3)}clearMessages(){this.successMessage="",this.errorMessage=""}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=et({type:n,selectors:[["app-write"]],viewQuery:function(t,r){if(t&1&&Co(vG,5),t&2){let i;Qr(i=Zr())&&(r.contentEditor=i.first)}},decls:3,vars:3,consts:[["titleTextarea",""],["contentEditor",""],["class","auth-required",4,"ngIf"],["class","loading-state",4,"ngIf"],["class","write-container",4,"ngIf"],[1,"auth-required"],[1,"auth-container"],[1,"auth-icon"],[1,"auth-buttons"],["routerLink","/login",1,"btn-primary"],["routerLink","/register",1,"btn-outline"],[1,"loading-state"],[1,"loading-spinner"],[1,"write-container"],["class","draft-recovery-banner",4,"ngIf"],[1,"top-bar"],[1,"top-bar-left"],[1,"logo-btn",3,"click"],[1,"logo-icon"],[1,"logo-text"],["class","draft-status",4,"ngIf"],[1,"top-bar-right"],[1,"btn-ghost",3,"click","disabled"],[1,"btn-publish",3,"click","disabled"],[1,"user-avatar"],[3,"src","alt"],["class","progress-container",4,"ngIf"],[1,"main-content"],[1,"story-content"],[1,"title-container"],["placeholder","Title","rows","1","maxlength","200","required","",1,"title-input",3,"ngModelChange","input","ngModel"],["class","character-count",3,"warning","error",4,"ngIf"],[1,"editor-toolbar"],[1,"toolbar-group"],["type","button","title","Bold (Ctrl+B)",3,"click"],["type","button","title","Italic (Ctrl+I)",3,"click"],[1,"toolbar-divider"],["type","button","title","Link (Ctrl+K)",3,"click"],["width","20","height","20","viewBox","0 0 24 24","fill","none","stroke","currentColor"],["d","10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"],["d","14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"],["type","button","title","Heading",3,"click"],["type","button","title","Bullet List",3,"click"],["x1","8","y1","6","x2","21","y2","6"],["x1","8","y1","12","x2","21","y2","12"],["x1","8","y1","18","x2","21","y2","18"],["x1","3","y1","6","x2","3.01","y2","6"],["x1","3","y1","12","x2","3.01","y2","12"],["x1","3","y1","18","x2","3.01","y2","18"],["type","button","title","Numbered List",3,"click"],["x1","10","y1","6","x2","21","y2","6"],["x1","10","y1","12","x2","21","y2","12"],["x1","10","y1","18","x2","21","y2","18"],["d","4 6h1v4"],["d","4 10h2l-2 2h2"],["d","6 14v2h-2"],["d","4 16h2"],["contenteditable","true",1,"content-editor",3,"input","focus","blur","keydown","keyup","paste"],["class","editor-placeholder",4,"ngIf"],["class","writing-stats",4,"ngIf"],["class","modal-overlay",3,"click",4,"ngIf"],["class","toast error-toast",3,"visible",4,"ngIf"],["class","toast success-toast",3,"visible",4,"ngIf"],[1,"draft-recovery-banner"],[1,"recovery-content"],[1,"recovery-icon"],[1,"recovery-text"],[1,"recovery-actions"],[1,"btn-recovery-restore",3,"click"],[1,"btn-recovery-dismiss",3,"click"],[1,"draft-status"],[1,"status-dot"],[4,"ngIf"],["class","error-text",4,"ngIf"],[1,"error-text"],[1,"progress-container"],[1,"progress-bar"],[1,"progress-fill"],[1,"progress-text"],[1,"character-count"],[1,"editor-placeholder"],[1,"writing-stats"],[1,"stat-divider"],[1,"modal-overlay",3,"click"],[1,"publish-modal",3,"click"],[1,"modal-header"],[1,"modal-close",3,"click"],[1,"modal-content"],[1,"story-preview"],["class","preview-cover",4,"ngIf"],[1,"preview-title"],[1,"preview-meta"],[1,"author-info"],[1,"author-avatar",3,"src","alt"],[1,"author-name"],[1,"story-stats"],[1,"publish-options"],[1,"form-group"],["name","category","required","",1,"select-input",3,"ngModelChange","ngModel"],["value","","disabled",""],[3,"value",4,"ngFor","ngForOf"],[1,"form-row"],["name","language","required","",1,"select-input",3,"ngModelChange","ngModel"],[1,"emoji-container"],["type","text","name","emoji","placeholder","\u{1F4DD}","maxlength","2","required","",1,"emoji-input",3,"ngModelChange","focus","blur","ngModel"],["class","emoji-suggestions",4,"ngIf"],[1,"tags-section"],["class","selected-tags",4,"ngIf"],["class","suggested-tags",4,"ngIf"],["type","text","name","tags","placeholder","Add up to 5 tags...",1,"tags-input",3,"ngModelChange","keydown.enter","ngModel","disabled"],[1,"tags-help"],[1,"modal-actions"],[1,"btn-outline",3,"click"],[1,"preview-cover"],["alt","Cover",3,"src"],[3,"value"],[1,"emoji-suggestions"],["type","button","class","emoji-option",3,"click",4,"ngFor","ngForOf"],["type","button",1,"emoji-option",3,"click"],[1,"selected-tags"],["class","tag-chip",4,"ngFor","ngForOf"],[1,"tag-chip"],["type","button",1,"tag-remove",3,"click"],[1,"suggested-tags"],[1,"suggestions-label"],[1,"suggestions-list"],["type","button","class","tag-suggestion",3,"click",4,"ngFor","ngForOf"],["type","button",1,"tag-suggestion",3,"click"],[1,"toast","error-toast"],[1,"toast-icon"],["cx","12","cy","12","r","10"],["x1","15","y1","9","x2","9","y2","15"],["x1","9","y1","9","x2","15","y2","15"],[1,"toast-content"],[1,"toast-message"],[1,"toast-dismiss",3,"click"],[1,"toast","success-toast"],["points","20,6 9,17 4,12"]],template:function(t,r){t&1&&j(0,_G,13,0,"div",2)(1,yG,2,0,"div",3)(2,$G,67,26,"div",4),t&2&&(C("ngIf",!r.currentUser&&!r.authLoading),v(),C("ngIf",r.authLoading),v(),C("ngIf",r.currentUser&&!r.authLoading))},dependencies:[Lt,Pn,Wt,On,L2,U2,un,jm,kn,jr,ha,Cn,Or,an],styles:[`[_nghost-%COMP%]{--primary: #1a8917;--primary-hover: #156b13;--text-primary: #242424;--text-secondary: #6b6b6b;--text-muted: #8b8b8b;--border-light: #e6e6e6;--border-medium: #d1d1d1;--background: #ffffff;--background-secondary: #f9f9f9;--shadow-light: 0 1px 3px rgba(0,0,0,.05);--shadow-medium: 0 4px 12px rgba(0,0,0,.1);--shadow-heavy: 0 8px 24px rgba(0,0,0,.15);--radius: 6px;--font-serif: Charter, Georgia, serif;--font-sans: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif}.progress-container[_ngcontent-%COMP%]{margin:1rem 0 2rem}.progress-bar[_ngcontent-%COMP%]{height:6px;background:var(--border-light);border-radius:3px;overflow:hidden}.progress-fill[_ngcontent-%COMP%]{height:100%;background:var(--primary);transition:width .3s ease}.progress-text[_ngcontent-%COMP%]{display:block;margin-top:.5rem;font-size:.85rem;color:var(--text-secondary)}.draft-recovery-banner[_ngcontent-%COMP%]{background:#fff8e6;border:1px solid #ffe4a3;border-radius:var(--radius);margin:1rem auto 2rem;padding:1rem 1.5rem}.recovery-content[_ngcontent-%COMP%]{display:flex;align-items:center;gap:1rem}.recovery-icon[_ngcontent-%COMP%]{font-size:1.5rem}.recovery-text[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0;font-size:1rem;font-weight:600}.recovery-text[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;color:var(--text-secondary);font-size:.9rem}.recovery-actions[_ngcontent-%COMP%]{margin-left:auto;display:flex;gap:.5rem}.btn-recovery-restore[_ngcontent-%COMP%]{background:var(--primary);border:none;padding:.5rem 1rem;border-radius:var(--radius);color:#fff;cursor:pointer}.btn-recovery-dismiss[_ngcontent-%COMP%]{background:transparent;border:1px solid var(--border-medium);padding:.5rem 1rem;border-radius:var(--radius);cursor:pointer}.character-count[_ngcontent-%COMP%]{font-size:.85rem;color:var(--text-muted);margin-top:.25rem}.character-count.warning[_ngcontent-%COMP%]{color:#d67c00}.character-count.error[_ngcontent-%COMP%]{color:#d60000}.tags-section[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:.5rem}.tag-chip[_ngcontent-%COMP%]{background:var(--background-secondary);padding:.25rem .75rem;border-radius:16px;font-size:.85rem;display:inline-flex;align-items:center;gap:.25rem}.tag-remove[_ngcontent-%COMP%]{border:none;background:none;cursor:pointer;font-size:1rem;line-height:1}.suggested-tags[_ngcontent-%COMP%]{font-size:.85rem;color:var(--text-secondary)}.suggestions-list[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:.5rem;margin-top:.25rem}.tag-suggestion[_ngcontent-%COMP%]{border:1px solid var(--border-medium);background:#fff;padding:.25rem .75rem;border-radius:16px;cursor:pointer;font-size:.85rem}.tag-suggestion[_ngcontent-%COMP%]:hover{border-color:var(--primary);color:var(--primary-dark)}.tags-input[_ngcontent-%COMP%]{border:1px solid var(--border-medium);border-radius:var(--radius);padding:.5rem .75rem;outline:none}.tags-help[_ngcontent-%COMP%]{font-size:.8rem;color:var(--text-muted)}.emoji-suggestions[_ngcontent-%COMP%]{position:absolute;top:110%;left:0;right:0;background:#fff;border:1px solid var(--border-medium);border-radius:var(--radius);box-shadow:var(--shadow-medium);display:flex;flex-wrap:wrap;padding:.5rem;gap:.5rem;z-index:50}.emoji-option[_ngcontent-%COMP%]{font-size:1.25rem;border:none;background:transparent;cursor:pointer;transition:transform .1s}.emoji-option[_ngcontent-%COMP%]:hover{transform:scale(1.2)}.toast[_ngcontent-%COMP%]{position:fixed;bottom:1rem;right:1rem;display:flex;align-items:center;gap:.75rem;padding:.75rem 1rem;border-radius:var(--radius);box-shadow:var(--shadow-medium);opacity:0;transform:translateY(10px);pointer-events:none;transition:all .3s ease;min-width:250px;max-width:350px;z-index:3000}.toast.visible[_ngcontent-%COMP%]{opacity:1;transform:translateY(0);pointer-events:auto}.toast-icon[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{width:20px;height:20px}.toast-content[_ngcontent-%COMP%]{flex:1}.toast-dismiss[_ngcontent-%COMP%]{border:none;background:none;font-size:1.2rem;cursor:pointer}.error-toast[_ngcontent-%COMP%]{background:#ffecec;border:1px solid #ffb8b8;color:#d60000}.success-toast[_ngcontent-%COMP%]{background:#e9ffe9;border:1px solid #9fd89f;color:#0f7d0f}.auth-required[_ngcontent-%COMP%]{min-height:100vh;display:flex;align-items:center;justify-content:center;background:linear-gradient(135deg,#f7c843,#f7a600);font-family:var(--font-sans)}.auth-container[_ngcontent-%COMP%]{text-align:center;background:#fff;padding:3rem 2rem;border-radius:12px;box-shadow:var(--shadow-heavy);max-width:400px}.auth-icon[_ngcontent-%COMP%]{font-size:3rem;margin-bottom:1rem}.auth-container[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:2rem;font-weight:700;margin-bottom:.5rem;color:var(--text-primary)}.auth-container[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:var(--text-secondary);margin-bottom:2rem;font-size:1.1rem}.auth-buttons[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:1rem}.loading-state[_ngcontent-%COMP%]{min-height:100vh;display:flex;align-items:center;justify-content:center;background:var(--background)}.loading-spinner[_ngcontent-%COMP%]{width:40px;height:40px;border:3px solid var(--border-light);border-top:3px solid var(--primary);border-radius:50%;animation:_ngcontent-%COMP%_spin 1s linear infinite}@keyframes _ngcontent-%COMP%_spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}.write-container[_ngcontent-%COMP%]{min-height:100vh;background:var(--background);font-family:var(--font-sans)}.top-bar[_ngcontent-%COMP%]{position:sticky;top:0;background:#fffffff2;-webkit-backdrop-filter:blur(8px);backdrop-filter:blur(8px);border-bottom:1px solid var(--border-light);padding:.75rem 2rem;display:flex;justify-content:space-between;align-items:center;z-index:100}.top-bar-left[_ngcontent-%COMP%]{display:flex;align-items:center;gap:1.5rem}.logo-btn[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5rem;border:none;background:none;font-size:1.2rem;font-weight:600;color:var(--text-primary);cursor:pointer;padding:.5rem 0}.logo-icon[_ngcontent-%COMP%]{font-size:1.5rem}.draft-status[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5rem;font-size:.9rem;color:var(--text-secondary)}.status-dot[_ngcontent-%COMP%]{width:8px;height:8px;border-radius:50%;background:var(--primary);animation:_ngcontent-%COMP%_pulse 2s infinite}@keyframes _ngcontent-%COMP%_pulse{0%,to{opacity:1}50%{opacity:.5}}.top-bar-right[_ngcontent-%COMP%]{display:flex;align-items:center;gap:1rem}.user-avatar[_ngcontent-%COMP%]{width:36px;height:36px;border-radius:50%;overflow:hidden}.user-avatar[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;height:100%;object-fit:cover}.main-content[_ngcontent-%COMP%]{max-width:740px;margin:0 auto;padding:2rem}.story-content[_ngcontent-%COMP%]{position:relative}.cover-section[_ngcontent-%COMP%]{margin-bottom:2rem}.cover-container[_ngcontent-%COMP%]{position:relative;border-radius:var(--radius);overflow:hidden;background:var(--background-secondary)}.cover-image[_ngcontent-%COMP%]{width:100%;height:300px;object-fit:cover;display:block}.cover-overlay[_ngcontent-%COMP%]{position:absolute;top:1rem;right:1rem;display:flex;gap:.5rem;opacity:0;transition:opacity .2s}.cover-container[_ngcontent-%COMP%]:hover   .cover-overlay[_ngcontent-%COMP%]{opacity:1}.btn-cover-action[_ngcontent-%COMP%]{padding:.5rem 1rem;background:#000000b3;color:#fff;border:none;border-radius:var(--radius);font-size:.9rem;cursor:pointer;transition:background .2s}.btn-cover-action[_ngcontent-%COMP%]:hover{background:#000000e6}.cover-upload-area[_ngcontent-%COMP%]{height:200px;border:2px dashed var(--border-medium);border-radius:var(--radius);display:flex;align-items:center;justify-content:center;cursor:pointer;transition:all .2s;background:var(--background-secondary)}.cover-upload-area[_ngcontent-%COMP%]:hover{border-color:var(--primary);background:#1a89170d}.upload-content[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;gap:.5rem;color:var(--text-secondary)}.upload-content[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{width:32px;height:32px}.add-cover-btn[_ngcontent-%COMP%]{display:inline-flex;align-items:center;gap:.5rem;padding:.75rem 1rem;border:1px solid var(--border-medium);background:var(--background);border-radius:var(--radius);color:var(--text-secondary);font-size:.9rem;cursor:pointer;margin-bottom:2rem;transition:all .2s}.add-cover-btn[_ngcontent-%COMP%]:hover{border-color:var(--primary);color:var(--primary)}.title-container[_ngcontent-%COMP%]{margin-bottom:1rem}.title-input[_ngcontent-%COMP%]{width:100%;font-family:var(--font-serif);font-size:2.5rem;font-weight:700;line-height:1.2;color:var(--text-primary);border:none;outline:none;background:transparent;resize:none;overflow:hidden}.title-input[_ngcontent-%COMP%]::placeholder{color:var(--text-muted)}.subtitle-container[_ngcontent-%COMP%]{margin-bottom:2rem}.subtitle-input[_ngcontent-%COMP%]{width:100%;font-family:var(--font-serif);font-size:1.4rem;font-weight:400;line-height:1.4;color:var(--text-secondary);border:none;outline:none;background:transparent;resize:none;overflow:hidden}.subtitle-input[_ngcontent-%COMP%]::placeholder{color:var(--text-muted)}.editor-toolbar[_ngcontent-%COMP%]{position:fixed;display:flex;align-items:center;background:var(--text-primary);border-radius:6px;padding:.5rem;box-shadow:var(--shadow-heavy);opacity:0;visibility:hidden;transition:all .2s;z-index:1000;pointer-events:none;user-select:none;-webkit-user-select:none;-webkit-touch-callout:none;-webkit-tap-highlight-color:transparent}.editor-toolbar.visible[_ngcontent-%COMP%]{opacity:1;visibility:visible;pointer-events:auto}.toolbar-group[_ngcontent-%COMP%]{display:flex}.toolbar-divider[_ngcontent-%COMP%]{width:1px;height:24px;background:#fff3;margin:0 .5rem}.editor-toolbar[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;width:32px;height:32px;border:none;background:none;color:#fff;border-radius:4px;cursor:pointer;transition:background .2s;position:relative}.editor-toolbar[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover, .editor-toolbar[_ngcontent-%COMP%]   button.active[_ngcontent-%COMP%]{background:#fff3}.content-editor[_ngcontent-%COMP%]{font-family:var(--font-serif);font-size:1.25rem;line-height:1.6;color:var(--text-primary);min-height:300px;padding:1rem 0;outline:none;position:relative}.content-editor[_ngcontent-%COMP%]:empty:before{content:"";position:absolute;top:1rem;left:0;right:0;pointer-events:none}.editor-placeholder[_ngcontent-%COMP%]{position:absolute;top:1rem;left:0;right:0;font-family:var(--font-serif);font-size:1.25rem;color:var(--text-muted);pointer-events:none;font-style:italic;z-index:1}.content-editor[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%], .content-editor[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-weight:700;margin:2rem 0 1rem;line-height:1.2}.content-editor[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:2rem}.content-editor[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:1.6rem}.content-editor[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin-bottom:1rem}.content-editor[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%], .content-editor[_ngcontent-%COMP%]   ol[_ngcontent-%COMP%]{margin-bottom:1rem;padding-left:2rem}.content-editor[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{margin-bottom:.5rem}.content-editor.rtl[_ngcontent-%COMP%]{direction:rtl;text-align:right}.writing-stats[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5rem;margin-top:2rem;padding-top:2rem;border-top:1px solid var(--border-light);font-size:.9rem;color:var(--text-secondary)}.stat-divider[_ngcontent-%COMP%]{color:var(--text-muted)}.btn-primary[_ngcontent-%COMP%]{background:#f7a600;color:#fff;border:none;padding:.75rem 1.5rem;border-radius:var(--radius);font-weight:600;cursor:pointer;transition:background .2s;text-decoration:none;display:inline-block;text-align:center}.btn-primary[_ngcontent-%COMP%]:hover:not(:disabled){background:#f7c843}.btn-outline[_ngcontent-%COMP%]{background:transparent;color:#f7c843;border:1px solid #f7c843;padding:.75rem 1.5rem;border-radius:var(--radius);font-weight:600;cursor:pointer;transition:all .2s;text-decoration:none;display:inline-block;text-align:center}.btn-outline[_ngcontent-%COMP%]:hover:not(:disabled){background:#f7a600;color:#fff}.btn-ghost[_ngcontent-%COMP%]{background:none;color:var(--text-secondary);border:none;padding:.75rem 1rem;border-radius:var(--radius);cursor:pointer;transition:all .2s;font-weight:500}.btn-ghost[_ngcontent-%COMP%]:hover:not(:disabled){background:var(--background-secondary);color:var(--text-primary)}.btn-ghost.saving[_ngcontent-%COMP%]{color:var(--primary)}.btn-publish[_ngcontent-%COMP%]{background:#f7c843;color:#fff;border:none;padding:.75rem 1.5rem;border-radius:24px;font-weight:600;cursor:pointer;transition:background .2s}.btn-publish[_ngcontent-%COMP%]:hover:not(:disabled){background:#f7a600}.btn-primary[_ngcontent-%COMP%]:disabled, .btn-outline[_ngcontent-%COMP%]:disabled, .btn-ghost[_ngcontent-%COMP%]:disabled, .btn-publish[_ngcontent-%COMP%]:disabled{opacity:.6;cursor:not-allowed}.modal-overlay[_ngcontent-%COMP%]{position:fixed;inset:0;background:#00000080;display:flex;align-items:center;justify-content:center;z-index:2000;padding:2rem}.publish-modal[_ngcontent-%COMP%]{background:#fff;border-radius:12px;box-shadow:var(--shadow-heavy);max-width:600px;width:100%;max-height:90vh;overflow-y:auto;animation:_ngcontent-%COMP%_modalSlideUp .3s ease-out}@keyframes _ngcontent-%COMP%_modalSlideUp{0%{opacity:0;transform:translateY(20px)}to{opacity:1;transform:translateY(0)}}.modal-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:1.5rem 2rem;border-bottom:1px solid var(--border-light)}.modal-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:0;font-size:1.5rem;font-weight:600}.modal-close[_ngcontent-%COMP%]{border:none;background:none;font-size:1.5rem;cursor:pointer;color:var(--text-secondary);padding:0;width:32px;height:32px;border-radius:50%;display:flex;align-items:center;justify-content:center;transition:background .2s}.modal-close[_ngcontent-%COMP%]:hover{background:var(--background-secondary)}.modal-content[_ngcontent-%COMP%]{padding:2rem}.modal-actions[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;gap:1rem;padding:1.5rem 2rem;border-top:1px solid var(--border-light)}.story-preview[_ngcontent-%COMP%]{margin-bottom:2rem;padding:1.5rem;background:var(--background-secondary);border-radius:var(--radius)}.preview-cover[_ngcontent-%COMP%]{margin-bottom:1rem;border-radius:var(--radius);overflow:hidden}.preview-cover[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;height:200px;object-fit:cover}.preview-title[_ngcontent-%COMP%]{font-size:1.8rem;font-weight:700;margin-bottom:.5rem;color:var(--text-primary)}.preview-subtitle[_ngcontent-%COMP%]{font-size:1.1rem;color:var(--text-secondary);margin-bottom:1rem}.preview-meta[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;font-size:.9rem;color:var(--text-secondary)}.author-info[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5rem}.author-avatar[_ngcontent-%COMP%]{width:24px;height:24px;border-radius:50%;object-fit:cover}.publish-options[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:1.5rem}.form-group[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:.5rem}.form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-weight:600;color:var(--text-primary);font-size:.9rem}.form-row[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 1fr;gap:1rem}.select-input[_ngcontent-%COMP%]{padding:.75rem 2.5rem .75rem .75rem;border:1px solid var(--border-medium);border-radius:var(--radius);background:#fff;font-size:1rem;outline:none;transition:border-color .2s;appearance:none;background-image:url("data:image/svg+xml;charset=UTF-8,%3csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='none' stroke='currentColor' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'%3e%3cpolyline points='6,9 12,15 18,9'%3e%3c/polyline%3e%3c/svg%3e");background-repeat:no-repeat;background-position:right .75rem center;background-size:16px}.select-input[_ngcontent-%COMP%]:focus{border-color:var(--primary);box-shadow:0 0 0 3px #1a89171a}.emoji-container[_ngcontent-%COMP%]{position:relative}.emoji-input[_ngcontent-%COMP%]{padding:.75rem;border:1px solid var(--border-medium);border-radius:var(--radius);background:#fff;font-size:1.5rem;text-align:center;outline:none;transition:border-color .2s;width:100%}.emoji-input[_ngcontent-%COMP%]:focus{border-color:var(--primary);box-shadow:0 0 0 3px #1a89171a}.emoji-suggestions[_ngcontent-%COMP%]{position:absolute;top:100%;left:0;right:0;background:#fff;border:1px solid var(--border-medium);border-radius:var(--radius);box-shadow:var(--shadow-medium);max-height:200px;overflow-y:auto;z-index:10;display:grid;grid-template-columns:repeat(6,1fr);gap:.25rem;padding:.5rem;margin-top:.25rem}.emoji-option[_ngcontent-%COMP%]{border:none;background:none;font-size:1.2rem;padding:.5rem;cursor:pointer;border-radius:4px;transition:background .2s;aspect-ratio:1;display:flex;align-items:center;justify-content:center}.emoji-option[_ngcontent-%COMP%]:hover{background:var(--background-secondary)}.tags-section[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:.75rem}.selected-tags[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:.5rem}.tag-chip[_ngcontent-%COMP%]{display:inline-flex;align-items:center;background:var(--background-secondary);color:var(--text-primary);padding:.375rem .75rem;border-radius:16px;font-size:.85rem;gap:.375rem;border:1px solid var(--border-light)}.tag-remove[_ngcontent-%COMP%]{border:none;background:none;color:var(--text-secondary);cursor:pointer;font-size:1rem;padding:0;line-height:1;width:16px;height:16px;border-radius:50%;display:flex;align-items:center;justify-content:center;transition:all .2s}.tag-remove[_ngcontent-%COMP%]:hover{background:var(--border-medium);color:var(--text-primary)}.tags-input[_ngcontent-%COMP%]{padding:.75rem;border:1px solid var(--border-medium);border-radius:var(--radius);background:#fff;font-size:1rem;outline:none;transition:border-color .2s}.tags-input[_ngcontent-%COMP%]:focus{border-color:var(--primary);box-shadow:0 0 0 3px #1a89171a}.toast[_ngcontent-%COMP%]{position:fixed;bottom:2rem;right:2rem;display:flex;align-items:center;gap:.75rem;padding:1rem 1.5rem;border-radius:var(--radius);font-weight:500;box-shadow:var(--shadow-medium);transform:translate(400px);transition:transform .3s ease-out;z-index:3000;max-width:400px}.toast.visible[_ngcontent-%COMP%]{transform:translate(0)}.error-toast[_ngcontent-%COMP%]{background:#fef2f2;color:#dc2626;border:1px solid #fecaca}.success-toast[_ngcontent-%COMP%]{background:#f0fdf4;color:#16a34a;border:1px solid #bbf7d0}@media (max-width: 768px){.top-bar[_ngcontent-%COMP%]{padding:.75rem 1rem}.main-content[_ngcontent-%COMP%]{padding:1rem}.title-input[_ngcontent-%COMP%]{font-size:2rem}.subtitle-input[_ngcontent-%COMP%]{font-size:1.2rem}.content-editor[_ngcontent-%COMP%]{font-family:var(--font-serif);font-size:1.25rem;line-height:1.6;color:var(--text-primary);min-height:300px;padding:1rem 0;outline:none;position:relative}.modal-overlay[_ngcontent-%COMP%]{padding:1rem}.modal-content[_ngcontent-%COMP%], .modal-header[_ngcontent-%COMP%], .modal-actions[_ngcontent-%COMP%]{padding-left:1rem;padding-right:1rem}.form-row[_ngcontent-%COMP%]{grid-template-columns:1fr}.cover-image[_ngcontent-%COMP%]{height:200px}.toast[_ngcontent-%COMP%]{bottom:1rem;right:1rem;left:1rem;max-width:none}}@media (max-width: 480px){.top-bar-left[_ngcontent-%COMP%]   .logo-text[_ngcontent-%COMP%]{display:none}.title-input[_ngcontent-%COMP%]{font-size:1.75rem}.editor-toolbar[_ngcontent-%COMP%]{position:fixed;bottom:10rem;left:50%;transform:translate(-50%);top:auto;margin:0;width:90%;justify-content:center;opacity:1;visibility:visible;pointer-events:auto;background:var(--background-secondary);box-shadow:var(--shadow-medium);border:1px solid var(--border-light)}.editor-toolbar[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{color:var(--text-primary);width:44px;height:44px}.editor-toolbar[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover, .editor-toolbar[_ngcontent-%COMP%]   button.active[_ngcontent-%COMP%]{background:var(--border-light)}.toolbar-divider[_ngcontent-%COMP%]{background:var(--border-medium);height:32px;margin:0 .25rem}.content-editor[_ngcontent-%COMP%]{margin-bottom:4rem}}.content-editor[_ngcontent-%COMP%]{-webkit-user-select:auto;-webkit-touch-callout:default;-webkit-tap-highlight-color:rgba(0,0,0,.1)}@media (max-width: 768px){.btn-ghost[_ngcontent-%COMP%], .btn-publish[_ngcontent-%COMP%]{padding:.875rem 1.25rem;min-height:44px}.toolbar-group[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{min-width:44px;min-height:44px}.editor-toolbar[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover, .editor-toolbar[_ngcontent-%COMP%]   button.active[_ngcontent-%COMP%]{background:var(--border-light)}}`]})};function HG(n,e){if(n&1&&(h(0,"span",19),b(1),p()),n&2){let t=I();v(),K(t.unreadCount)}}function zG(n,e){if(n&1){let t=Z();h(0,"button",20),B("click",function(){N(t);let i=I();return F(i.markAllAsRead())}),b(1," Mark all read "),p()}}function qG(n,e){n&1&&(h(0,"div",21),z(1,"div",22),h(2,"p"),b(3,"Loading notifications..."),p()())}function WG(n,e){n&1&&(h(0,"div",35),z(1,"div",36),p())}function GG(n,e){if(n&1){let t=Z();h(0,"div",25),B("click",function(){let i=N(t).$implicit,o=I(2);return F(o.onNotificationClick(i))}),h(1,"div",26)(2,"span"),b(3),p()(),h(4,"div",27)(5,"div",28),b(6),p(),h(7,"div",29),b(8),p(),h(9,"div",30),b(10),p()(),j(11,WG,2,0,"div",31),h(12,"div",32),ce(),h(13,"svg",33),z(14,"path",34),p()()()}if(n&2){let t=e.$implicit,r=I(2);he("unread",!t.isRead)("read",t.isRead),v(),C("ngClass","icon-"+t.type),v(2),K(r.getNotificationIcon(t.type)),v(3),K(t.title),v(2),K(t.message),v(2),K(r.getTimeAgo(t.createdAt)),v(),C("ngIf",!t.isRead)}}function KG(n,e){if(n&1&&(h(0,"div",23),j(1,GG,15,10,"div",24),p()),n&2){let t=I();v(),C("ngForOf",t.filteredNotifications)("ngForTrackBy",t.trackByNotificationId)}}function YG(n,e){n&1&&(h(0,"span"),b(1,"\u{1F514}"),p())}function QG(n,e){n&1&&(h(0,"span"),b(1,"\u2705"),p())}function ZG(n,e){n&1&&(h(0,"span"),b(1,"No notifications yet"),p())}function XG(n,e){n&1&&(h(0,"span"),b(1,"All caught up!"),p())}function JG(n,e){n&1&&(h(0,"span"),b(1," When you get likes, comments, or follows, they'll appear here. "),p())}function eK(n,e){n&1&&(h(0,"span"),b(1," You've read all your notifications. Great job staying updated! "),p())}function tK(n,e){n&1&&(h(0,"a",43),b(1," Explore Stories "),p())}function nK(n,e){if(n&1){let t=Z();h(0,"button",44),B("click",function(){N(t);let i=I(2);return F(i.setFilter("all"))}),b(1," View All Notifications "),p()}}function rK(n,e){if(n&1&&(h(0,"div",37)(1,"div",38),j(2,YG,2,0,"span",18)(3,QG,2,0,"span",18),p(),h(4,"h3",39),j(5,ZG,2,0,"span",18)(6,XG,2,0,"span",18),p(),h(7,"p",40),j(8,JG,2,0,"span",18)(9,eK,2,0,"span",18),p(),j(10,tK,2,0,"a",41)(11,nK,2,0,"button",42),p()),n&2){let t=I();v(2),C("ngIf",t.selectedFilter==="all"),v(),C("ngIf",t.selectedFilter==="unread"),v(2),C("ngIf",t.selectedFilter==="all"),v(),C("ngIf",t.selectedFilter==="unread"),v(2),C("ngIf",t.selectedFilter==="all"),v(),C("ngIf",t.selectedFilter==="unread"),v(),C("ngIf",t.selectedFilter==="all"),v(),C("ngIf",t.selectedFilter==="unread")}}function iK(n,e){if(n&1&&(rp(0),b(1),ip()),n&2){let t=I();v(),ee(" ",t.trackByNotificationId(0,t.notifications[0]),`
`)}}var Wm=class n{constructor(e,t,r){this.notificationService=e;this.authService=t;this.router=r}notifications=[];unreadCount=0;user=null;loading=!0;selectedFilter="all";notificationsSubscription;unreadCountSubscription;userSubscription;ngOnInit(){this.userSubscription=this.authService.user$.subscribe(e=>{this.user=e,console.log(this.user),e||this.router.navigate(["/login"])}),this.notificationsSubscription=this.notificationService.notifications$.subscribe(e=>{this.notifications=e,this.loading=!1}),this.unreadCountSubscription=this.notificationService.unreadCount$.subscribe(e=>{this.unreadCount=e})}ngOnDestroy(){this.notificationsSubscription&&this.notificationsSubscription.unsubscribe(),this.unreadCountSubscription&&this.unreadCountSubscription.unsubscribe(),this.userSubscription&&this.userSubscription.unsubscribe()}get filteredNotifications(){return this.selectedFilter==="unread"?this.notifications.filter(e=>!e.isRead):this.notifications}markAllAsRead(){return y(this,null,function*(){try{yield this.notificationService.markAllAsRead()}catch(e){console.error("Error marking all notifications as read:",e)}})}markAsRead(e){return y(this,null,function*(){try{yield this.notificationService.markAsRead(e)}catch(t){console.error("Error marking notification as read:",t)}})}onNotificationClick(e){return y(this,null,function*(){e.isRead||(yield this.markAsRead(e.id)),this.navigateFromNotification(e)})}navigateFromNotification(e){switch(e.type){case"like":case"comment":e.data?.storyId&&this.router.navigate(["/story",e.data.storyId]);break;case"follow":e.data?.fromUserId&&this.router.navigate(["/profile",e.data.fromUserId]);break;case"story_published":e.data?.storyId?this.router.navigate(["/story",e.data.storyId]):this.router.navigate(["/my-stories"]);break;default:break}}setFilter(e){this.selectedFilter=e}getTimeAgo(e){let r=Math.floor((new Date().getTime()-e.getTime())/1e3);if(r<60)return"Just now";let i=Math.floor(r/60);if(i<60)return`${i}m ago`;let o=Math.floor(i/60);if(o<24)return`${o}h ago`;let s=Math.floor(o/24);if(s<7)return`${s}d ago`;let a=Math.floor(s/7);if(a<4)return`${a}w ago`;let c=Math.floor(s/30);return c<12?`${c}mo ago`:`${Math.floor(s/365)}y ago`}getNotificationIcon(e){switch(e){case"like":return"\u2764\uFE0F";case"comment":return"\u{1F4AC}";case"follow":return"\u{1F464}";case"story_published":return"\u2705";default:return"\u{1F514}"}}goBack(){window.history.back()}trackByNotificationId(e,t){return t.id}static \u0275fac=function(t){return new(t||n)(ne(hr),ne(ot),ne(Ve))};static \u0275cmp=et({type:n,selectors:[["app-notifications"]],decls:28,vars:12,consts:[[1,"notifications-header"],[1,"header-content"],[1,"back-btn",3,"click"],["width","24","height","24","viewBox","0 0 24 24","fill","none","xmlns","http://www.w3.org/2000/svg"],["d","M19 12H5","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round"],["d","M12 19L5 12L12 5","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round"],[1,"back-text"],[1,"page-title"],[1,"title-icon"],["class","unread-badge",4,"ngIf"],["class","mark-all-read-btn",3,"click",4,"ngIf"],[1,"filter-tabs"],[1,"filter-tab",3,"click"],[1,"tab-count"],[1,"notifications-container"],["class","loading-state",4,"ngIf"],["class","notifications-list",4,"ngIf"],["class","empty-state",4,"ngIf"],[4,"ngIf"],[1,"unread-badge"],[1,"mark-all-read-btn",3,"click"],[1,"loading-state"],[1,"loading-spinner"],[1,"notifications-list"],["class","notification-item",3,"unread","read","click",4,"ngFor","ngForOf","ngForTrackBy"],[1,"notification-item",3,"click"],[1,"notification-icon",3,"ngClass"],[1,"notification-content"],[1,"notification-title"],[1,"notification-message"],[1,"notification-time"],["class","notification-status",4,"ngIf"],[1,"notification-arrow"],["width","16","height","16","viewBox","0 0 24 24","fill","none","xmlns","http://www.w3.org/2000/svg"],["d","M9 18L15 12L9 6","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round"],[1,"notification-status"],[1,"unread-dot"],[1,"empty-state"],[1,"empty-icon"],[1,"empty-title"],[1,"empty-description"],["routerLink","/stories","class","cta-button",4,"ngIf"],["class","cta-button secondary",3,"click",4,"ngIf"],["routerLink","/stories",1,"cta-button"],[1,"cta-button","secondary",3,"click"]],template:function(t,r){t&1&&(h(0,"div",0)(1,"div",1)(2,"button",2),B("click",function(){return r.goBack()}),ce(),h(3,"svg",3),z(4,"path",4)(5,"path",5),p(),Ae(),h(6,"span",6),b(7,"Back"),p()(),h(8,"h1",7)(9,"span",8),b(10,"\u{1F514}"),p(),b(11," Notifications "),j(12,HG,2,1,"span",9),p(),j(13,zG,2,0,"button",10),p()(),h(14,"div",11)(15,"button",12),B("click",function(){return r.setFilter("all")}),b(16," All "),h(17,"span",13),b(18),p()(),h(19,"button",12),B("click",function(){return r.setFilter("unread")}),b(20," Unread "),h(21,"span",13),b(22),p()()(),h(23,"div",14),j(24,qG,4,0,"div",15)(25,KG,2,2,"div",16)(26,rK,12,8,"div",17),p(),j(27,iK,2,1,"ng-container",18)),t&2&&(v(12),C("ngIf",r.unreadCount>0),v(),C("ngIf",r.unreadCount>0),v(2),he("active",r.selectedFilter==="all"),v(3),ee("(",r.notifications.length,")"),v(),he("active",r.selectedFilter==="unread"),v(3),ee("(",r.unreadCount,")"),v(2),C("ngIf",r.loading),v(),C("ngIf",!r.loading&&r.filteredNotifications.length>0),v(),C("ngIf",!r.loading&&r.filteredNotifications.length===0),v(),C("ngIf",!1))},dependencies:[Lt,Ns,Pn,Wt,Or,an],styles:["[_nghost-%COMP%]{--main-color: #ffc107;--text-dark: #2c3e50;--border-color: #e9ecef;--hover-bg: #f8f9fa;--unread-bg: #fff8e1;--unread-dot: #2196f3;--card-shadow: 0 2px 4px rgba(0,0,0,.1);--success-color: #4caf50;--danger-color: #f44336}.notifications-header[_ngcontent-%COMP%]{position:sticky;top:0;background:#fff;border-bottom:1px solid var(--border-color);z-index:100;box-shadow:0 2px 4px #0000000d}.notifications-header[_ngcontent-%COMP%]   .header-content[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;padding:1rem 2rem;max-width:1200px;margin:0 auto}@media (max-width: 768px){.notifications-header[_ngcontent-%COMP%]   .header-content[_ngcontent-%COMP%]{padding:1rem}}.back-btn[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5rem;background:none;border:none;color:var(--text-dark);cursor:pointer;padding:.5rem;border-radius:8px;transition:all .3s ease;font-size:.9rem}.back-btn[_ngcontent-%COMP%]:hover{background:var(--hover-bg);color:var(--main-color)}@media (max-width: 480px){.back-btn[_ngcontent-%COMP%]   .back-text[_ngcontent-%COMP%]{display:none}}.page-title[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5rem;font-size:1.5rem;font-weight:700;color:var(--text-dark);margin:0}@media (max-width: 480px){.page-title[_ngcontent-%COMP%]{font-size:1.2rem}}.page-title[_ngcontent-%COMP%]   .title-icon[_ngcontent-%COMP%]{font-size:1.2rem}.page-title[_ngcontent-%COMP%]   .unread-badge[_ngcontent-%COMP%]{background:var(--danger-color);color:#fff;font-size:.7rem;padding:.2rem .5rem;border-radius:12px;font-weight:600;min-width:20px;text-align:center}.mark-all-read-btn[_ngcontent-%COMP%]{background:var(--main-color);color:var(--text-dark);border:none;padding:.6rem 1rem;border-radius:8px;font-weight:600;cursor:pointer;transition:all .3s ease;font-size:.85rem}.mark-all-read-btn[_ngcontent-%COMP%]:hover{background:#e0a800;transform:translateY(-1px)}@media (max-width: 480px){.mark-all-read-btn[_ngcontent-%COMP%]{padding:.5rem .8rem;font-size:.8rem}}.filter-tabs[_ngcontent-%COMP%]{display:flex;background:#fff;border-bottom:1px solid var(--border-color);padding:0 2rem;max-width:1200px;margin:0 auto}@media (max-width: 768px){.filter-tabs[_ngcontent-%COMP%]{padding:0 1rem}}.filter-tab[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5rem;background:none;border:none;padding:1rem 1.5rem;cursor:pointer;color:#666;font-weight:500;border-bottom:3px solid transparent;transition:all .3s ease}.filter-tab[_ngcontent-%COMP%]:hover{color:var(--main-color);background:var(--hover-bg)}.filter-tab.active[_ngcontent-%COMP%]{color:var(--main-color);border-bottom-color:var(--main-color);font-weight:600}.filter-tab[_ngcontent-%COMP%]   .tab-count[_ngcontent-%COMP%]{font-size:.8rem;color:#999}@media (max-width: 480px){.filter-tab[_ngcontent-%COMP%]{padding:.8rem 1rem;font-size:.9rem}}.notifications-container[_ngcontent-%COMP%]{max-width:1200px;margin:0 auto;padding:2rem;min-height:calc(100vh - 180px)}@media (max-width: 768px){.notifications-container[_ngcontent-%COMP%]{padding:1rem;min-height:calc(100vh - 160px)}}.loading-state[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;padding:4rem 2rem;text-align:center;color:#666}.loading-state[_ngcontent-%COMP%]   .loading-spinner[_ngcontent-%COMP%]{width:40px;height:40px;border:3px solid #f3f3f3;border-top:3px solid var(--main-color);border-radius:50%;animation:_ngcontent-%COMP%_spin 1s linear infinite;margin-bottom:1rem}.loading-state[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;font-size:.9rem}@keyframes _ngcontent-%COMP%_spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}.notifications-list[_ngcontent-%COMP%]{background:#fff;border-radius:12px;border:1px solid var(--border-color);overflow:hidden;box-shadow:var(--card-shadow)}.notification-item[_ngcontent-%COMP%]{display:flex;align-items:flex-start;gap:1rem;padding:1.25rem;border-bottom:1px solid #f0f0f0;cursor:pointer;transition:all .3s ease;position:relative}.notification-item[_ngcontent-%COMP%]:last-child{border-bottom:none}.notification-item[_ngcontent-%COMP%]:hover{background:var(--hover-bg);transform:translateY(-1px)}.notification-item.unread[_ngcontent-%COMP%]{background:var(--unread-bg);border-left:4px solid var(--main-color)}.notification-item.unread[_ngcontent-%COMP%]:hover{background:#fff3c4}.notification-item.read[_ngcontent-%COMP%]{opacity:.8}@media (max-width: 480px){.notification-item[_ngcontent-%COMP%]{gap:.8rem;padding:1rem}}.notification-icon[_ngcontent-%COMP%]{width:48px;height:48px;border-radius:50%;background:#f5f5f5;display:flex;align-items:center;justify-content:center;font-size:1.5rem;flex-shrink:0}.notification-icon.icon-like[_ngcontent-%COMP%]{background:#ffe8e8}.notification-icon.icon-comment[_ngcontent-%COMP%]{background:#e8f4fd}.notification-icon.icon-follow[_ngcontent-%COMP%]{background:#f0f8ff}.notification-icon.icon-story_published[_ngcontent-%COMP%]{background:#e8f5e8}@media (max-width: 480px){.notification-icon[_ngcontent-%COMP%]{width:40px;height:40px;font-size:1.2rem}}.notification-content[_ngcontent-%COMP%]{flex:1;min-width:0}.notification-content[_ngcontent-%COMP%]   .notification-title[_ngcontent-%COMP%]{font-weight:600;color:var(--text-dark);margin-bottom:.5rem;line-height:1.4}@media (max-width: 480px){.notification-content[_ngcontent-%COMP%]   .notification-title[_ngcontent-%COMP%]{font-size:.9rem}}.notification-content[_ngcontent-%COMP%]   .notification-message[_ngcontent-%COMP%]{color:#666;font-size:.9rem;line-height:1.4;margin-bottom:.5rem}@media (max-width: 480px){.notification-content[_ngcontent-%COMP%]   .notification-message[_ngcontent-%COMP%]{font-size:.85rem}}.notification-content[_ngcontent-%COMP%]   .notification-time[_ngcontent-%COMP%]{color:#999;font-size:.8rem;font-weight:500}.notification-status[_ngcontent-%COMP%]{flex-shrink:0}.notification-status[_ngcontent-%COMP%]   .unread-dot[_ngcontent-%COMP%]{width:8px;height:8px;background:var(--unread-dot);border-radius:50%;box-shadow:0 0 0 3px #2196f333}.notification-arrow[_ngcontent-%COMP%]{color:#ccc;flex-shrink:0;margin-left:auto}@media (max-width: 480px){.notification-arrow[_ngcontent-%COMP%]{display:none}}.empty-state[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;text-align:center;padding:4rem 2rem;background:#fff;border-radius:12px;border:1px solid var(--border-color);box-shadow:var(--card-shadow)}.empty-state[_ngcontent-%COMP%]   .empty-icon[_ngcontent-%COMP%]{font-size:4rem;margin-bottom:1.5rem;opacity:.7}.empty-state[_ngcontent-%COMP%]   .empty-title[_ngcontent-%COMP%]{color:var(--text-dark);font-size:1.5rem;font-weight:600;margin-bottom:.8rem}@media (max-width: 480px){.empty-state[_ngcontent-%COMP%]   .empty-title[_ngcontent-%COMP%]{font-size:1.3rem}}.empty-state[_ngcontent-%COMP%]   .empty-description[_ngcontent-%COMP%]{color:#666;font-size:1rem;line-height:1.6;max-width:400px;margin-bottom:2rem}@media (max-width: 480px){.empty-state[_ngcontent-%COMP%]   .empty-description[_ngcontent-%COMP%]{font-size:.9rem}}.cta-button[_ngcontent-%COMP%]{display:inline-flex;align-items:center;gap:.5rem;background:var(--main-color);color:var(--text-dark);text-decoration:none;padding:.8rem 1.5rem;border-radius:8px;font-weight:600;transition:all .3s ease;border:none;cursor:pointer;font-size:.9rem}.cta-button[_ngcontent-%COMP%]:hover{background:#e0a800;transform:translateY(-2px);box-shadow:0 4px 12px #ffc1074d}.cta-button.secondary[_ngcontent-%COMP%]{background:#f8f9fa;color:#666;border:1px solid var(--border-color)}.cta-button.secondary[_ngcontent-%COMP%]:hover{background:#e9ecef;transform:translateY(-2px);box-shadow:0 4px 12px #0000001a}@media (max-width: 768px){.notifications-header[_ngcontent-%COMP%]   .header-content[_ngcontent-%COMP%]{gap:1rem}.page-title[_ngcontent-%COMP%]{flex:1;justify-content:center}.mark-all-read-btn[_ngcontent-%COMP%]{position:absolute;right:1rem}}@media (max-width: 768px){.notifications-container[_ngcontent-%COMP%]{padding-bottom:100px}}"]})};var Gm=()=>{let n=k(ot),e=k(Ve);return n.user?!0:(e.navigate(["/login"]),!1)};var KI=()=>{let n=k(ot),e=k(Ve);return n.user$.pipe(Tt(t=>t!==void 0),mr(1),Ce(t=>t?e.createUrlTree(["/stories"]):!0))};var H2=[{path:"",component:Bd,title:"Stories - Unposted"},{path:"stories",component:Bd,title:"Stories - Unposted"},{path:"story/:id",component:Hd,title:"Story - Unposted"},{path:"story",component:Hd,title:"Story - Unposted"},{path:"article",redirectTo:"/stories",pathMatch:"full"},{path:"about",component:$m,title:"About - Unposted"},{path:"notifications",component:Wm,canActivate:[Gm],title:"Notifications - Unposted"},{path:"write",component:qm,title:"Write - Unposted"},{path:"profile",component:$d,canActivate:[Gm],title:"Profile - Unposted"},{path:"profile/:id",component:$d,canActivate:[Gm],title:"Profile - Unposted"},{path:"login",component:Hm,canActivate:[KI],title:"Login - Unposted"},{path:"register",component:zm,canActivate:[KI],title:"Register - Unposted"},{path:"**",redirectTo:"/stories"}];var W2="@firebase/installations",XI="0.6.18";var G2=1e4,K2=`w:${XI}`,Y2="FIS_v2",oK="https://firebaseinstallations.googleapis.com/v1",sK=3600*1e3,aK="installations",cK="Installations";var lK={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."},ma=new _n(aK,cK,lK);function Q2(n){return n instanceof Gt&&n.code.includes("request-failed")}function Z2({projectId:n}){return`${oK}/projects/${n}/installations`}function X2(n){return{token:n.token,requestStatus:2,expiresIn:dK(n.expiresIn),creationTime:Date.now()}}function J2(n,e){return y(this,null,function*(){let r=(yield e.json()).error;return ma.create("request-failed",{requestName:n,serverCode:r.code,serverMessage:r.message,serverStatus:r.status})})}function eN({apiKey:n}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":n})}function uK(n,{refreshToken:e}){let t=eN(n);return t.append("Authorization",fK(e)),t}function tN(n){return y(this,null,function*(){let e=yield n();return e.status>=500&&e.status<600?n():e})}function dK(n){return Number(n.replace("s","000"))}function fK(n){return`${Y2} ${n}`}function hK(r,i){return y(this,arguments,function*({appConfig:n,heartbeatServiceProvider:e},{fid:t}){let o=Z2(n),s=eN(n),a=e.getImmediate({optional:!0});if(a){let m=yield a.getHeartbeatsHeader();m&&s.append("x-firebase-client",m)}let c={fid:t,authVersion:Y2,appId:n.appId,sdkVersion:K2},u={method:"POST",headers:s,body:JSON.stringify(c)},f=yield tN(()=>fetch(o,u));if(f.ok){let m=yield f.json();return{fid:m.fid||t,registrationStatus:2,refreshToken:m.refreshToken,authToken:X2(m.authToken)}}else throw yield J2("Create Installation",f)})}function nN(n){return new Promise(e=>{setTimeout(e,n)})}function pK(n){return btoa(String.fromCharCode(...n)).replace(/\+/g,"-").replace(/\//g,"_")}var gK=/^[cdef][\w-]{21}$/,ZI="";function mK(){try{let n=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(n),n[0]=112+n[0]%16;let t=vK(n);return gK.test(t)?t:ZI}catch{return ZI}}function vK(n){return pK(n).substr(0,22)}function Ym(n){return`${n.appName}!${n.appId}`}var rN=new Map;function iN(n,e){let t=Ym(n);oN(t,e),_K(t,e)}function oN(n,e){let t=rN.get(n);if(t)for(let r of t)r(e)}function _K(n,e){let t=yK();t&&t.postMessage({key:n,fid:e}),bK()}var ga=null;function yK(){return!ga&&"BroadcastChannel"in self&&(ga=new BroadcastChannel("[Firebase] FID Change"),ga.onmessage=n=>{oN(n.data.key,n.data.fid)}),ga}function bK(){rN.size===0&&ga&&(ga.close(),ga=null)}var wK="firebase-installations-database",EK=1,va="firebase-installations-store",YI=null;function JI(){return YI||(YI=eg(wK,EK,{upgrade:(n,e)=>{switch(e){case 0:n.createObjectStore(va)}}})),YI}function Km(n,e){return y(this,null,function*(){let t=Ym(n),i=(yield JI()).transaction(va,"readwrite"),o=i.objectStore(va),s=yield o.get(t);return yield o.put(e,t),yield i.done,(!s||s.fid!==e.fid)&&iN(n,e.fid),e})}function sN(n){return y(this,null,function*(){let e=Ym(n),r=(yield JI()).transaction(va,"readwrite");yield r.objectStore(va).delete(e),yield r.done})}function Qm(n,e){return y(this,null,function*(){let t=Ym(n),i=(yield JI()).transaction(va,"readwrite"),o=i.objectStore(va),s=yield o.get(t),a=e(s);return a===void 0?yield o.delete(t):yield o.put(a,t),yield i.done,a&&(!s||s.fid!==a.fid)&&iN(n,a.fid),a})}function e1(n){return y(this,null,function*(){let e,t=yield Qm(n.appConfig,r=>{let i=CK(r),o=IK(n,i);return e=o.registrationPromise,o.installationEntry});return t.fid===ZI?{installationEntry:yield e}:{installationEntry:t,registrationPromise:e}})}function CK(n){let e=n||{fid:mK(),registrationStatus:0};return aN(e)}function IK(n,e){if(e.registrationStatus===0){if(!navigator.onLine){let i=Promise.reject(ma.create("app-offline"));return{installationEntry:e,registrationPromise:i}}let t={fid:e.fid,registrationStatus:1,registrationTime:Date.now()},r=SK(n,t);return{installationEntry:t,registrationPromise:r}}else return e.registrationStatus===1?{installationEntry:e,registrationPromise:TK(n)}:{installationEntry:e}}function SK(n,e){return y(this,null,function*(){try{let t=yield hK(n,e);return Km(n.appConfig,t)}catch(t){throw Q2(t)&&t.customData.serverCode===409?yield sN(n.appConfig):yield Km(n.appConfig,{fid:e.fid,registrationStatus:0}),t}})}function TK(n){return y(this,null,function*(){let e=yield z2(n.appConfig);for(;e.registrationStatus===1;)yield nN(100),e=yield z2(n.appConfig);if(e.registrationStatus===0){let{installationEntry:t,registrationPromise:r}=yield e1(n);return r||t}return e})}function z2(n){return Qm(n,e=>{if(!e)throw ma.create("installation-not-found");return aN(e)})}function aN(n){return DK(n)?{fid:n.fid,registrationStatus:0}:n}function DK(n){return n.registrationStatus===1&&n.registrationTime+G2<Date.now()}function xK(r,i){return y(this,arguments,function*({appConfig:n,heartbeatServiceProvider:e},t){let o=MK(n,t),s=uK(n,t),a=e.getImmediate({optional:!0});if(a){let m=yield a.getHeartbeatsHeader();m&&s.append("x-firebase-client",m)}let c={installation:{sdkVersion:K2,appId:n.appId}},u={method:"POST",headers:s,body:JSON.stringify(c)},f=yield tN(()=>fetch(o,u));if(f.ok){let m=yield f.json();return X2(m)}else throw yield J2("Generate Auth Token",f)})}function MK(n,{fid:e}){return`${Z2(n)}/${e}/authTokens:generate`}function t1(n,e=!1){return y(this,null,function*(){let t,r=yield Qm(n.appConfig,o=>{if(!cN(o))throw ma.create("not-registered");let s=o.authToken;if(!e&&kK(s))return o;if(s.requestStatus===1)return t=PK(n,e),o;{if(!navigator.onLine)throw ma.create("app-offline");let a=RK(o);return t=AK(n,a),a}});return t?yield t:r.authToken})}function PK(n,e){return y(this,null,function*(){let t=yield q2(n.appConfig);for(;t.authToken.requestStatus===1;)yield nN(100),t=yield q2(n.appConfig);let r=t.authToken;return r.requestStatus===0?t1(n,e):r})}function q2(n){return Qm(n,e=>{if(!cN(e))throw ma.create("not-registered");let t=e.authToken;return NK(t)?Object.assign(Object.assign({},e),{authToken:{requestStatus:0}}):e})}function AK(n,e){return y(this,null,function*(){try{let t=yield xK(n,e),r=Object.assign(Object.assign({},e),{authToken:t});return yield Km(n.appConfig,r),t}catch(t){if(Q2(t)&&(t.customData.serverCode===401||t.customData.serverCode===404))yield sN(n.appConfig);else{let r=Object.assign(Object.assign({},e),{authToken:{requestStatus:0}});yield Km(n.appConfig,r)}throw t}})}function cN(n){return n!==void 0&&n.registrationStatus===2}function kK(n){return n.requestStatus===2&&!OK(n)}function OK(n){let e=Date.now();return e<n.creationTime||n.creationTime+n.expiresIn<e+sK}function RK(n){let e={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},n),{authToken:e})}function NK(n){return n.requestStatus===1&&n.requestTime+G2<Date.now()}function FK(n){return y(this,null,function*(){let e=n,{installationEntry:t,registrationPromise:r}=yield e1(e);return r?r.catch(console.error):t1(e).catch(console.error),t.fid})}function LK(n,e=!1){return y(this,null,function*(){let t=n;return yield VK(t),(yield t1(t,e)).token})}function VK(n){return y(this,null,function*(){let{registrationPromise:e}=yield e1(n);e&&(yield e)})}function UK(n){if(!n||!n.options)throw QI("App Configuration");if(!n.name)throw QI("App Name");let e=["projectId","apiKey","appId"];for(let t of e)if(!n.options[t])throw QI(t);return{appName:n.name,projectId:n.options.projectId,apiKey:n.options.apiKey,appId:n.options.appId}}function QI(n){return ma.create("missing-app-config-values",{valueName:n})}var lN="installations",jK="installations-internal",BK=n=>{let e=n.getProvider("app").getImmediate(),t=UK(e),r=or(e,"heartbeat");return{app:e,appConfig:t,heartbeatServiceProvider:r,_delete:()=>Promise.resolve()}},$K=n=>{let e=n.getProvider("app").getImmediate(),t=or(e,lN).getImmediate();return{getId:()=>FK(t),getToken:i=>LK(t,i)}};function HK(){Kt(new _t(lN,BK,"PUBLIC")),Kt(new _t(jK,$K,"PRIVATE"))}HK();Ne(W2,XI);Ne(W2,XI,"esm2017");var Zm="analytics",zK="firebase_id",qK="origin",WK=60*1e3,GK="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",c1="https://www.googletagmanager.com/gtag/js";var In=new ir("@firebase/analytics");var KK={"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-initialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."},Wn=new _n("analytics","Analytics",KK);function YK(n){if(!n.startsWith(c1)){let e=Wn.create("invalid-gtag-resource",{gtagURL:n});return In.warn(e.message),""}return n}function mN(n){return Promise.all(n.map(e=>e.catch(t=>t)))}function QK(n,e){let t;return window.trustedTypes&&(t=window.trustedTypes.createPolicy(n,e)),t}function ZK(n,e){let t=QK("firebase-js-sdk-policy",{createScriptURL:YK}),r=document.createElement("script"),i=`${c1}?l=${n}&id=${e}`;r.src=t?t?.createScriptURL(i):i,r.async=!0,document.head.appendChild(r)}function XK(n){let e=[];return Array.isArray(window[n])?e=window[n]:window[n]=e,e}function JK(n,e,t,r,i,o){return y(this,null,function*(){let s=r[i];try{if(s)yield e[s];else{let c=(yield mN(t)).find(u=>u.measurementId===i);c&&(yield e[c.appId])}}catch(a){In.error(a)}n("config",i,o)})}function eY(n,e,t,r,i){return y(this,null,function*(){try{let o=[];if(i&&i.send_to){let s=i.send_to;Array.isArray(s)||(s=[s]);let a=yield mN(t);for(let c of s){let u=a.find(m=>m.measurementId===c),f=u&&e[u.appId];if(f)o.push(f);else{o=[];break}}}o.length===0&&(o=Object.values(e)),yield Promise.all(o),n("event",r,i||{})}catch(o){In.error(o)}})}function tY(n,e,t,r){function i(o,...s){return y(this,null,function*(){try{if(o==="event"){let[a,c]=s;yield eY(n,e,t,a,c)}else if(o==="config"){let[a,c]=s;yield JK(n,e,t,r,a,c)}else if(o==="consent"){let[a,c]=s;n("consent",a,c)}else if(o==="get"){let[a,c,u]=s;n("get",a,c,u)}else if(o==="set"){let[a]=s;n("set",a)}else n(o,...s)}catch(a){In.error(a)}})}return i}function nY(n,e,t,r,i){let o=function(...s){window[r].push(arguments)};return window[i]&&typeof window[i]=="function"&&(o=window[i]),window[i]=tY(o,n,e,t),{gtagCore:o,wrappedGtag:window[i]}}function rY(n){let e=window.document.getElementsByTagName("script");for(let t of Object.values(e))if(t.src&&t.src.includes(c1)&&t.src.includes(n))return t;return null}var iY=30,oY=1e3,r1=class{constructor(e={},t=oY){this.throttleMetadata=e,this.intervalMillis=t}getThrottleMetadata(e){return this.throttleMetadata[e]}setThrottleMetadata(e,t){this.throttleMetadata[e]=t}deleteThrottleMetadata(e){delete this.throttleMetadata[e]}},vN=new r1;function sY(n){return new Headers({Accept:"application/json","x-goog-api-key":n})}function aY(n){return y(this,null,function*(){var e;let{appId:t,apiKey:r}=n,i={method:"GET",headers:sY(r)},o=GK.replace("{app-id}",t),s=yield fetch(o,i);if(s.status!==200&&s.status!==304){let a="";try{let c=yield s.json();!((e=c.error)===null||e===void 0)&&e.message&&(a=c.error.message)}catch{}throw Wn.create("config-fetch-failed",{httpStatus:s.status,responseMessage:a})}return s.json()})}function cY(r){return y(this,arguments,function*(n,e=vN,t){let{appId:i,apiKey:o,measurementId:s}=n.options;if(!i)throw Wn.create("no-app-id");if(!o){if(s)return{measurementId:s,appId:i};throw Wn.create("no-api-key")}let a=e.getThrottleMetadata(i)||{backoffCount:0,throttleEndTimeMillis:Date.now()},c=new i1;return setTimeout(()=>y(null,null,function*(){c.abort()}),t!==void 0?t:WK),_N({appId:i,apiKey:o,measurementId:s},a,c,e)})}function _N(o,s,a){return y(this,arguments,function*(n,{throttleEndTimeMillis:e,backoffCount:t},r,i=vN){var c;let{appId:u,measurementId:f}=n;try{yield lY(r,e)}catch(m){if(f)return In.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${f} provided in the "measurementId" field in the local Firebase config. [${m?.message}]`),{appId:u,measurementId:f};throw m}try{let m=yield aY(n);return i.deleteThrottleMetadata(u),m}catch(m){let _=m;if(!uY(_)){if(i.deleteThrottleMetadata(u),f)return In.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${f} provided in the "measurementId" field in the local Firebase config. [${_?.message}]`),{appId:u,measurementId:f};throw m}let E=Number((c=_?.customData)===null||c===void 0?void 0:c.httpStatus)===503?Zp(t,i.intervalMillis,iY):Zp(t,i.intervalMillis),x={throttleEndTimeMillis:Date.now()+E,backoffCount:t+1};return i.setThrottleMetadata(u,x),In.debug(`Calling attemptFetch again in ${E} millis`),_N(n,x,r,i)}})}function lY(n,e){return new Promise((t,r)=>{let i=Math.max(e-Date.now(),0),o=setTimeout(t,i);n.addEventListener(()=>{clearTimeout(o),r(Wn.create("fetch-throttle",{throttleEndTimeMillis:e}))})})}function uY(n){if(!(n instanceof Gt)||!n.customData)return!1;let e=Number(n.customData.httpStatus);return e===429||e===500||e===503||e===504}var i1=class{constructor(){this.listeners=[]}addEventListener(e){this.listeners.push(e)}abort(){this.listeners.forEach(e=>e())}};var o1;function dY(n,e,t,r,i){return y(this,null,function*(){if(i&&i.global){n("event",t,r);return}else{let o=yield e,s=Object.assign(Object.assign({},r),{send_to:o});n("event",t,s)}})}function fY(n,e,t,r){return y(this,null,function*(){if(r&&r.global)return n("set",{user_id:t}),Promise.resolve();{let i=yield e;n("config",i,{update:!0,user_id:t})}})}var s1;function hY(n){s1=n}function pY(n){o1=n}function gY(){return y(this,null,function*(){if(ko())try{yield Wu()}catch(n){return In.warn(Wn.create("indexeddb-unavailable",{errorInfo:n?.toString()}).message),!1}else return In.warn(Wn.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;return!0})}function mY(n,e,t,r,i,o,s){return y(this,null,function*(){var a;let c=cY(n);c.then(E=>{t[E.measurementId]=E.appId,n.options.measurementId&&E.measurementId!==n.options.measurementId&&In.warn(`The measurement ID in the local Firebase config (${n.options.measurementId}) does not match the measurement ID fetched from the server (${E.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(E=>In.error(E)),e.push(c);let u=gY().then(E=>{if(E)return r.getId()}),[f,m]=yield Promise.all([c,u]);rY(o)||ZK(o,f.measurementId),s1&&(i("consent","default",s1),hY(void 0)),i("js",new Date);let _=(a=s?.config)!==null&&a!==void 0?a:{};return _[qK]="firebase",_.update=!0,m!=null&&(_[zK]=m),i("config",f.measurementId,_),o1&&(i("set",o1),pY(void 0)),f.measurementId})}var a1=class{constructor(e){this.app=e}_delete(){return delete cl[this.app.options.appId],Promise.resolve()}},cl={},uN=[],dN={},n1="dataLayer",vY="gtag",fN,l1,hN=!1;function _Y(){let n=[];if(qu()&&n.push("This is a browser extension environment."),Jb()||n.push("Cookies are not available."),n.length>0){let e=n.map((r,i)=>`(${i+1}) ${r}`).join(" "),t=Wn.create("invalid-analytics-context",{errorInfo:e});In.warn(t.message)}}function yY(n,e,t){_Y();let r=n.options.appId;if(!r)throw Wn.create("no-app-id");if(!n.options.apiKey)if(n.options.measurementId)In.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${n.options.measurementId} provided in the "measurementId" field in the local Firebase config.`);else throw Wn.create("no-api-key");if(cl[r]!=null)throw Wn.create("already-exists",{id:r});if(!hN){XK(n1);let{wrappedGtag:o,gtagCore:s}=nY(cl,uN,dN,n1,vY);l1=o,fN=s,hN=!0}return cl[r]=mY(n,uN,dN,e,fN,n1,t),new a1(n)}function yN(n=si()){n=ze(n);let e=or(n,Zm);return e.isInitialized()?e.getImmediate():bN(n)}function bN(n,e={}){let t=or(n,Zm);if(t.isInitialized()){let i=t.getImmediate();if(rr(e,t.getOptions()))return i;throw Wn.create("already-initialized")}return t.initialize({options:e})}function wN(){return y(this,null,function*(){if(qu()||!Jb()||!ko())return!1;try{return yield Wu()}catch{return!1}})}function EN(n,e,t){n=ze(n),fY(l1,cl[n.app.options.appId],e,t).catch(r=>In.error(r))}function u1(n,e,t,r){n=ze(n),dY(l1,cl[n.app.options.appId],e,t,r).catch(i=>In.error(i))}var pN="@firebase/analytics",gN="0.10.17";function bY(){Kt(new _t(Zm,(e,{options:t})=>{let r=e.getProvider("app").getImmediate(),i=e.getProvider("installations-internal").getImmediate();return yY(r,i,t)},"PUBLIC")),Kt(new _t("analytics-internal",n,"PRIVATE")),Ne(pN,gN),Ne(pN,gN,"esm2017");function n(e){try{let t=e.getProvider(Zm).getImmediate();return{logEvent:(r,i,o)=>u1(t,r,i,o)}}catch(t){throw Wn.create("interop-component-reg-failed",{reason:t})}}}bY();var _a=class{constructor(e){return e}},SN="analytics",f1=class{constructor(){return No(SN)}};var TN=ke(yN,!0);var DN=ke(wN,!1),wY=ke(u1,!1,2);var EY=ke(EN,!0,2);var p1=(()=>{class n{initialized;disposables=[];constructor(t,r,i){Ne("angularfire",sr.full,"user-tracking");let o;this.initialized=r.runOutsideAngular(()=>new Promise(s=>{o=s})),DN().then(()=>{let s=i.get(_a);s?this.disposables=[Tg(t).subscribe(a=>{EY(s,a?.uid),o()})]:o()})}ngOnDestroy(){this.disposables.forEach(t=>t.unsubscribe())}static \u0275fac=function(r){return new(r||n)(ie($n),ie(xe),ie(Qe))};static \u0275prov=Q({token:n,factory:n.\u0275fac})}return n})(),CY="firebase_event_origin",IY="firebase_previous_class",SY="firebase_previous_id",TY="firebase_previous_screen",DY="firebase_screen_class",CN="firebase_screen_id",xY="firebase_screen",h1="outlet",MY="page_path",PY="page_title",qd="screen_class",IN="screen_name",AY="screen_view",kY="auto",OY="#",RY=Math.floor(Math.random()*(2**32-1))-2**31,d1={},NY=n=>{let e=[n[qd],n[h1]].join(OY);if(d1.hasOwnProperty(e))return d1[e];{let t=RY++;return d1[e]=t,t}},FY=(n,e,t)=>n.events.pipe(Tt(i=>i instanceof pc)).pipe(bt(i=>{let s=n.parseUrl(n.url.replace(/(?:\().+(?:\))/g,_=>_.replace("://",":///"))).root.children[i.snapshot.outlet]?.toString()||"",a=n.routerState.root.children.map(_=>_).find(_=>_.outlet===i.snapshot.outlet);if(!a)return se(null);let c=a;for(;c.firstChild;)c=c.firstChild;let u=c.pathFromRoot.map(_=>_.routeConfig?.path).filter(_=>_).join("/")||"/",f={[IN]:u,[MY]:`/${s}`,[CY]:kY,[xY]:u,[h1]:i.snapshot.outlet};e&&(f[PY]=e.getTitle());let m=a.component;if(m){if(m===Uu){let _=i.snapshot;for(;_.firstChild;)_=_.firstChild;m=_.component}}else m=i.snapshot.component;if(typeof m=="string")return se(re(H({},f),{[qd]:m}));if(m){let _=t.resolveComponentFactory(m);return se(re(H({},f),{[qd]:_.selector}))}return se(null)}),Tt(i=>!!i),Ce(i=>H({[DY]:i[qd],[CN]:NY(i)},i)),Kv(i=>i[h1]),st(i=>i.pipe(Gv((o,s)=>JSON.stringify(o)===JSON.stringify(s)),Ll(void 0),Qv(),Ce(([o,s])=>o?H({[IY]:o[qd],[TY]:o[IN],[SY]:o[CN]},s):s)))),xN=(()=>{class n{disposable;constructor(t,r,i,o,s,a){Ne("angularfire",sr.full,"screen-tracking"),DN().then(()=>{let c=a.get(_a);!t||!c||o.runOutsideAngular(()=>{this.disposable=FY(t,r,i).pipe(bt(u=>y(this,null,function*(){return s&&(yield s.initialized),wY(c,AY,u)}))).subscribe()})})}ngOnDestroy(){this.disposable&&this.disposable.unsubscribe()}static \u0275fac=function(r){return new(r||n)(ie(Ve,8),ie(_p,8),ie(Ps),ie(xe),ie(p1,8),ie(Qe))};static \u0275prov=Q({token:n,factory:n.\u0275fac})}return n})(),g1=new J("angularfire2.analytics-instances");function LY(n,e,t){if(!ab(t))return null;let r=Ws(SN,n,e);return r&&new _a(r)}function VY(n){return(e,t,r)=>{if(!ab(r))return null;let i=e.runOutsideAngular(()=>n(t));return new _a(i)}}var UY={provide:f1,deps:[[new zt,g1]]},jY={provide:_a,useFactory:LY,deps:[[new zt,g1],Rr,Sr]};function MN(n,...e){return Ne("angularfire",sr.full,"analytics"),nn([jY,UY,{provide:g1,useFactory:VY(n),multi:!0,deps:[xe,Qe,Sr,ai,Li,...e]}])}var PN={providers:[n_(),By({eventCoalescing:!0}),zb(H2),fA(()=>hA({projectId:"unposted-v2",appId:"1:273897103513:web:eb0c3937d204d537f49808",storageBucket:"unposted-v2.firebasestorage.app",apiKey:"AIzaSyC8DqjESQ0w90Yv9RINgAlSLRFK1QMmGlg",authDomain:"unposted-v2.firebaseapp.com",messagingSenderId:"273897103513",measurementId:"G-SN4RKRJDK8"})),yk(()=>Dg()),MN(()=>TN()),xN,p1,d2(()=>f2())]};var Xm=class n{static \u0275fac=function(t){return new(t||n)};static \u0275cmp=et({type:n,selectors:[["app-footer"]],decls:15,vars:0,consts:[[1,"container"],[1,"brand"],[1,"tagline"],[1,"links"],["href","https://instagram.com/unpostedtn","target","_blank","rel","noopener noreferrer"],["routerLink","/about",2,"cursor","pointer"],[1,"bottom"]],template:function(t,r){t&1&&(h(0,"footer")(1,"div",0)(2,"div",1)(3,"h3"),b(4,"\u{1F319} Unposted"),p(),h(5,"p",2),b(6,"Where hidden words find their voice."),p()(),h(7,"div",3)(8,"a",4),b(9," Instagram "),p(),h(10,"a",5),b(11,"About"),p()()(),h(12,"div",6)(13,"p"),b(14,"\xA9 2025 Unposted. All rights reserved."),p()()())},dependencies:[Or,an],styles:["footer[_ngcontent-%COMP%]{background:#fff;border-top:1px solid var(--border-light);padding:2rem 1.5rem;color:var(--text-secondary);font-family:Inter,sans-serif}.container[_ngcontent-%COMP%]{max-width:1100px;margin:0 auto;display:flex;flex-direction:column;align-items:center;text-align:center;gap:1.5rem}.brand[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:1.3rem;font-weight:600;color:var(--text-primary);margin:0}.tagline[_ngcontent-%COMP%]{font-size:.9rem;color:var(--text-muted);margin-top:.3rem}.links[_ngcontent-%COMP%]{display:flex;gap:1.2rem;flex-wrap:wrap;justify-content:center}.links[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{text-decoration:none;color:var(--text-secondary);font-size:.9rem;transition:color .2s ease}.links[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{color:var(--main-color)}.bottom[_ngcontent-%COMP%]{margin-top:2rem;text-align:center;font-size:.8rem;color:var(--text-muted)}@media (min-width: 768px){.container[_ngcontent-%COMP%]{flex-direction:row;justify-content:space-between;text-align:left}}"]})};var BY=()=>({exact:!0});function $Y(n,e){if(n&1&&(h(0,"span",49),b(1),p()),n&2){let t=I(2);v(),ee(" ",t.getBadgeDisplay()," ")}}function HY(n,e){if(n&1){let t=Z();h(0,"div",45),B("click",function(){N(t);let i=I();return F(i.toggleNotifications())}),ce(),h(1,"svg",22),z(2,"path",46)(3,"path",47),p(),j(4,$Y,2,1,"span",48),p()}if(n&2){let t=I();he("has-notifications",t.hasUnreadNotifications),v(4),C("ngIf",t.hasUnreadNotifications)}}function zY(n,e){if(n&1){let t=Z();h(0,"button",50),B("click",function(){N(t);let i=I();return F(i.markNotificationsAsRead())}),b(1," Mark all as read "),p()}}function qY(n,e){n&1&&(h(0,"span"),b(1,"\u2764\uFE0F"),p())}function WY(n,e){n&1&&(h(0,"span"),b(1,"\u{1F4AC}"),p())}function GY(n,e){n&1&&(h(0,"span"),b(1,"\u{1F464}"),p())}function KY(n,e){n&1&&(h(0,"span"),b(1,"\u2705"),p())}function YY(n,e){n&1&&(h(0,"div",61),z(1,"div",62),p())}function QY(n,e){if(n&1){let t=Z();h(0,"div",53),B("click",function(){let i=N(t).$implicit,o=I(2);return F(o.onNotificationClick(i))}),h(1,"div",54),j(2,qY,2,0,"span",55)(3,WY,2,0,"span",55)(4,GY,2,0,"span",55)(5,KY,2,0,"span",55),p(),h(6,"div",56)(7,"div",57),b(8),p(),h(9,"div",58),b(10),p(),h(11,"div",59),b(12),p()(),j(13,YY,2,0,"div",60),p()}if(n&2){let t=e.$implicit,r=I(2);he("unread",!t.isRead)("read",t.isRead),v(),C("ngClass","icon-"+t.type),v(),C("ngIf",t.type==="like"),v(),C("ngIf",t.type==="comment"),v(),C("ngIf",t.type==="follow"),v(),C("ngIf",t.type==="story_published"),v(3),K(t.title),v(2),K(t.message),v(2),K(r.getTimeAgo(t.createdAt)),v(),C("ngIf",!t.isRead)}}function ZY(n,e){if(n&1&&(h(0,"div",51),j(1,QY,14,13,"div",52),p()),n&2){let t=I();v(),C("ngForOf",t.notifications)}}function XY(n,e){n&1&&(h(0,"div",63)(1,"div",64),b(2,"\u{1F514}"),p(),h(3,"div",65),b(4,"No notifications yet"),p()())}function JY(n,e){n&1&&(h(0,"div",66)(1,"a",67),b(2,"Sign In"),p(),h(3,"a",68),b(4,"Sign Up"),p()())}function eQ(n,e){if(n&1&&z(0,"img",83),n&2){let t=I(2);C("src",t.user==null?null:t.user.photoURL,ct)}}function tQ(n,e){if(n&1&&b(0),n&2){let t=I(2);K(t.getUserInitial())}}function nQ(n,e){if(n&1&&z(0,"img",83),n&2){let t=I(2);C("src",t.user==null?null:t.user.photoURL,ct)}}function rQ(n,e){if(n&1&&b(0),n&2){let t=I(2);K(t.getUserInitial())}}function iQ(n,e){if(n&1){let t=Z();h(0,"div",69)(1,"div",70),B("click",function(){N(t);let i=I();return F(i.toggleUserMenu())}),h(2,"div",71),j(3,eQ,1,1,"img",72)(4,tQ,1,1,"ng-template",null,3,xr),p(),h(6,"span",73),b(7),p(),h(8,"span",74),b(9,"\u25BC"),p()(),h(10,"div",75)(11,"div",76),j(12,nQ,1,1,"img",72)(13,rQ,1,1,"ng-template",null,3,xr),h(15,"div")(16,"div",77),b(17),p(),h(18,"div",78),b(19),p()()(),z(20,"hr"),h(21,"a",79),B("click",function(){N(t);let i=I();return F(i.closeUserMenu())}),h(22,"span"),b(23,"\u{1F464}"),p(),b(24," Profile "),p(),h(25,"a",80),B("click",function(){N(t);let i=I();return F(i.closeUserMenu())}),h(26,"span"),b(27,"\u{1F4D6}"),p(),b(28," My Stories "),p(),h(29,"a",81),B("click",function(){N(t);let i=I();return F(i.closeUserMenu())}),h(30,"span"),b(31,"\u2699\uFE0F"),p(),b(32," Settings "),p(),z(33,"hr"),h(34,"button",82),B("click",function(){N(t);let i=I();return F(i.logout())}),h(35,"span"),b(36,"\u{1F6AA}"),p(),b(37," Sign Out "),p()()()}if(n&2){let t=qt(5),r=I();v(3),C("ngIf",r.user==null?null:r.user.photoURL)("ngIfElse",t),v(4),K(r.getUserName()),v(),he("rotated",r.userMenuOpen),v(2),he("active",r.userMenuOpen),v(2),C("ngIf",r.user==null?null:r.user.photoURL)("ngIfElse",t),v(5),K(r.getUserName()),v(2),K(r.user==null?null:r.user.email)}}function oQ(n,e){if(n&1&&(h(0,"span",86),b(1),p()),n&2){let t=I(2);v(),ee(" ",t.getBadgeDisplay()," ")}}function sQ(n,e){if(n&1&&(h(0,"div",84)(1,"div",21),ce(),h(2,"svg",22),z(3,"path",46)(4,"path",47),p(),j(5,oQ,2,1,"span",85),p(),Ae(),h(6,"span",25),b(7,"Notifications"),p()()),n&2){let t=I();he("has-notifications",t.hasUnreadNotifications),v(5),C("ngIf",t.hasUnreadNotifications)}}function aQ(n,e){n&1&&(h(0,"a",87)(1,"div",21),ce(),h(2,"svg",22),z(3,"circle",88)(4,"path",89)(5,"path",90),p()(),Ae(),h(6,"span",25),b(7,"About"),p()())}function cQ(n,e){if(n&1&&z(0,"img",83),n&2){let t=I(2);C("src",t.user==null?null:t.user.photoURL,ct)}}function lQ(n,e){if(n&1&&b(0),n&2){let t=I(2);K(t.getUserInitial())}}function uQ(n,e){if(n&1){let t=Z();h(0,"div",91)(1,"div",92),B("click",function(){N(t);let i=I();return F(i.toggleMobileUserMenu())}),h(2,"div",93),j(3,cQ,1,1,"img",72)(4,lQ,1,1,"ng-template",null,3,xr),p()(),h(6,"span",25),b(7,"Profile"),p()()}if(n&2){let t=qt(5),r=I();v(3),C("ngIf",r.user==null?null:r.user.photoURL)("ngIfElse",t)}}function dQ(n,e){n&1&&(h(0,"a",94)(1,"div",21),ce(),h(2,"svg",22),z(3,"path",95)(4,"path",96)(5,"path",97),p()(),Ae(),h(6,"span",25),b(7,"Sign In"),p()())}function fQ(n,e){if(n&1&&z(0,"img",83),n&2){let t=I(2);C("src",t.user==null?null:t.user.photoURL,ct)}}function hQ(n,e){if(n&1&&b(0),n&2){let t=I(2);K(t.getUserInitial())}}function pQ(n,e){if(n&1){let t=Z();h(0,"div",98),B("click",function(){N(t);let i=I();return F(i.closeMobileUserMenu())}),h(1,"div",99),B("click",function(i){return N(t),F(i.stopPropagation())}),h(2,"div",100),j(3,fQ,1,1,"img",72)(4,hQ,1,1,"ng-template",null,4,xr),h(6,"div",101)(7,"div",77),b(8),p(),h(9,"div",78),b(10),p()(),h(11,"button",102),B("click",function(){N(t);let i=I();return F(i.closeMobileUserMenu())}),b(12,"\xD7"),p()(),h(13,"div",103)(14,"a",104),B("click",function(){N(t);let i=I();return F(i.closeMobileUserMenu())}),h(15,"span",105),b(16,"\u{1F464}"),p(),h(17,"span"),b(18,"Profile"),p()(),h(19,"a",106),B("click",function(){N(t);let i=I();return F(i.closeMobileUserMenu())}),h(20,"span",105),b(21,"\u{1F4D6}"),p(),h(22,"span"),b(23,"My Stories"),p()(),h(24,"a",107),B("click",function(){N(t);let i=I();return F(i.closeMobileUserMenu())}),h(25,"span",105),b(26,"\u2699\uFE0F"),p(),h(27,"span"),b(28,"Settings"),p()(),h(29,"button",108),B("click",function(){N(t);let i=I();return F(i.logout())}),h(30,"span",105),b(31,"\u{1F6AA}"),p(),h(32,"span"),b(33,"Sign Out"),p()()()()()}if(n&2){let t=qt(5),r=I();he("active",r.mobileUserMenuOpen),v(3),C("ngIf",r.user==null?null:r.user.photoURL)("ngIfElse",t),v(5),K(r.getUserName()),v(2),K(r.user==null?null:r.user.email)}}var Jm=class n{constructor(e,t,r){this.authService=e;this.notificationService=t;this.router=r}userMenuOpen=!1;mobileUserMenuOpen=!1;showAnnouncement=!0;user=null;notificationsOpen=!1;notificationsMOpen=!1;notifications=[];unreadCount=0;userSubscription;notificationsSubscription;unreadCountSubscription;isOpen=!1;closeModalEvent=new nt;subscribeEvent=new nt;ngOnInit(){this.userSubscription=this.authService.user$.subscribe(e=>{this.user=e}),this.notificationsSubscription=this.notificationService.notifications$.subscribe(e=>{this.notifications=e}),this.unreadCountSubscription=this.notificationService.unreadCount$.subscribe(e=>{this.unreadCount=e}),document.addEventListener("click",e=>{let t=e.target;!t?.closest(".navbar-right")&&!t?.closest(".mobile-user-menu")&&!t?.closest(".profile-nav")&&(this.userMenuOpen=!1,this.mobileUserMenuOpen=!1)})}ngOnDestroy(){this.userSubscription&&this.userSubscription.unsubscribe(),this.notificationsSubscription&&this.notificationsSubscription.unsubscribe(),this.unreadCountSubscription&&this.unreadCountSubscription.unsubscribe()}toggleUserMenu(){this.userMenuOpen=!this.userMenuOpen}closeUserMenu(){this.userMenuOpen=!1}toggleMobileUserMenu(){this.mobileUserMenuOpen=!this.mobileUserMenuOpen}closeMobileUserMenu(){this.mobileUserMenuOpen=!1}getUserInitial(){return this.user?this.user.displayName?this.user.displayName.charAt(0).toUpperCase():this.user.email?this.user.email.charAt(0).toUpperCase():"U":"U"}getUserName(){return this.user?this.user.displayName?this.user.displayName:this.user.email?this.user.email.split("@")[0]:"User":"User"}logout(){return y(this,null,function*(){try{yield this.authService.logout(),this.closeUserMenu(),this.closeMobileUserMenu()}catch(e){console.error("Logout error:",e)}})}email="";openSubscribeModal(e){e.preventDefault(),this.isOpen=!0}closeModal(){this.isOpen=!1,this.closeModalEvent.emit()}onOverlayClick(e){e.target===e.currentTarget&&this.closeModal()}onSubmit(){this.email&&(this.subscribeEvent.emit(this.email),this.email="",this.closeModal())}toggleNotifications(){this.notificationsOpen=!this.notificationsOpen}closeNotifications(){this.notificationsOpen=!1}toggleNotificationsM(){this.notificationsOpen=!this.notificationsOpen}closeNotificationsM(){this.notificationsOpen=!1}markNotificationsAsRead(){return y(this,null,function*(){try{yield this.notificationService.markAllAsRead()}catch(e){console.error("Error marking notifications as read:",e)}})}onNotificationClick(e){return y(this,null,function*(){if(!e.isRead)try{yield this.notificationService.markAsRead(e.id)}catch(t){console.error("Error marking notification as read:",t)}this.navigateFromNotification(e),this.closeNotifications()})}navigateFromNotification(e){switch(e.type){case"like":case"comment":e.data?.storyId&&this.router.navigate(["/story",e.data.storyId]);break;case"follow":e.data?.fromUserId&&this.router.navigate(["/profile",e.data.fromUserId]);break;case"story_published":e.data?.storyId?this.router.navigate(["/story",e.data.storyId]):this.router.navigate(["/my-stories"]);break;default:break}}onDocumentClick(e){let t=e.target,r=document.querySelector(".notification-bell"),i=document.querySelector(".notification-dropdown");this.notificationsOpen&&!r?.contains(t)&&!i?.contains(t)&&this.closeNotifications()}getTimeAgo(e){let r=Math.floor((new Date().getTime()-e.getTime())/1e3);if(r<60)return"Just now";let i=Math.floor(r/60);if(i<60)return`${i}m ago`;let o=Math.floor(i/60);if(o<24)return`${o}h ago`;let s=Math.floor(o/24);if(s<7)return`${s}d ago`;let a=Math.floor(s/7);if(a<4)return`${a}w ago`;let c=Math.floor(s/30);return c<12?`${c}mo ago`:`${Math.floor(s/365)}y ago`}getBadgeDisplay(){return this.unreadCount===0?"":this.unreadCount>99?"99+":this.unreadCount.toString()}get hasUnreadNotifications(){return this.unreadCount>0}static \u0275fac=function(t){return new(t||n)(ne(ot),ne(hr),ne(Ve))};static \u0275cmp=et({type:n,selectors:[["app-navbar"]],hostBindings:function(t,r){t&1&&B("click",function(o){return r.onDocumentClick(o)},ry)},inputs:{isOpen:"isOpen"},outputs:{closeModalEvent:"closeModalEvent",subscribeEvent:"subscribeEvent"},decls:62,vars:20,consts:[["noNotifications",""],["authButtons",""],["subscribeForm","ngForm"],["initials",""],["initialsLarge",""],[1,"navbar","desktop-navbar"],["routerLink","/",1,"navbar-logo"],[1,"navbar-right"],[1,"nav-links"],["class","notification-bell",3,"has-notifications","click",4,"ngIf"],[1,"notification-dropdown"],[1,"notification-header"],["class","mark-all-read",3,"click",4,"ngIf"],["class","notification-list",4,"ngIf","ngIfElse"],[1,"notification-footer"],["routerLink","/notifications",3,"click"],["class","navbar-buttons",4,"ngIf"],["class","navbar-buttons logged-in",4,"ngIf"],[1,"bottom-nav","mobile-navbar"],[1,"bottom-nav-container"],["routerLink","/stories","routerLinkActive","active",1,"nav-item",3,"routerLinkActiveOptions"],[1,"nav-icon"],["width","24","height","24","viewBox","0 0 24 24","fill","none","xmlns","http://www.w3.org/2000/svg"],["d","M3 9L12 2L21 9V20C21 20.5304 20.7893 21.0391 20.4142 21.4142C20.0391 21.7893 19.5304 22 19 22H5C4.46957 22 3.96086 21.7893 3.58579 21.4142C3.21071 21.0391 3 20.5304 3 20V9Z","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round"],["d","M9 22V12H15V22","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round"],[1,"nav-label"],["routerLink","/write","routerLinkActive","active",1,"nav-item"],["d","M11 4H4C3.46957 4 2.96086 4.21071 2.58579 4.58579C2.21071 4.96086 2 5.46957 2 6V20C2 20.5304 2.21071 21.0391 2.58579 21.4142C2.96086 21.7893 3.46957 22 4 22H18C18.5304 22 19.0391 21.7893 19.4142 21.4142C19.7893 21.0391 20 20.5304 20 20V13","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round"],["d","M18.5 2.49998C18.8978 2.10216 19.4374 1.87866 20 1.87866C20.5626 1.87866 21.1022 2.10216 21.5 2.49998C21.8978 2.89781 22.1213 3.43737 22.1213 3.99998C22.1213 4.56259 21.8978 5.10216 21.5 5.49998L12 15L8 16L9 12L18.5 2.49998Z","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round"],["routerLink","/notifications","routerLinkActive","active","class","nav-item notification-bell",3,"has-notifications",4,"ngIf"],["routerLink","/about","routerLinkActive","active","class","nav-item",4,"ngIf"],["class","nav-item profile-nav",4,"ngIf","ngIfElse"],["class","mobile-user-overlay",3,"active","click",4,"ngIf"],["role","dialog","aria-labelledby","modal-title","aria-modal","true",1,"modal",3,"click"],["role","document",1,"modal-content"],["aria-label","Close Subscription Form",1,"close-modal",3,"click"],["id","modal-title"],["action","https://formsubmit.co/unposted.infos@gmail.com","method","POST","target","_blank",3,"ngSubmit"],["for","email-subscribe"],[1,"required"],["type","email","id","email-subscribe","name","email","placeholder","Enter your email","required","",3,"ngModelChange","ngModel"],["type","text","name","_honey",2,"display","none"],["type","hidden","name","_captcha","value","false"],["type","hidden","name","_next","value","https://un-posted.github.io/unposted/pages/thank-you.html"],["type","submit",3,"disabled"],[1,"notification-bell",3,"click"],["d","M18 8C18 6.4087 17.3679 4.88258 16.2426 3.75736C15.1174 2.63214 13.5913 2 12 2C10.4087 2 8.88258 2.63214 7.75736 3.75736C6.63214 4.88258 6 6.4087 6 8C6 15 3 17 3 17H21C21 17 18 15 18 8Z","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round"],["d","M13.73 21C13.5542 21.3031 13.3019 21.5547 12.9982 21.7295C12.6946 21.9044 12.3504 21.9965 12 21.9965C11.6496 21.9965 11.3054 21.9044 11.0018 21.7295C10.6981 21.5547 10.4458 21.3031 10.27 21","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round"],["class","notification-badge",4,"ngIf"],[1,"notification-badge"],[1,"mark-all-read",3,"click"],[1,"notification-list"],["class","notification-item",3,"unread","read","click",4,"ngFor","ngForOf"],[1,"notification-item",3,"click"],[1,"notification-icon",3,"ngClass"],[4,"ngIf"],[1,"notification-content"],[1,"notification-title"],[1,"notification-message"],[1,"notification-time"],["class","notification-status",4,"ngIf"],[1,"notification-status"],[1,"unread-dot"],[1,"no-notifications"],[1,"no-notifications-icon"],[1,"no-notifications-text"],[1,"navbar-buttons"],["routerLink","/login",1,"auth-btn"],["routerLink","/register",1,"auth-btn","signup"],[1,"navbar-buttons","logged-in"],[1,"user-profile",3,"click"],[1,"user-avatar"],["alt","User Avatar",3,"src",4,"ngIf","ngIfElse"],[1,"username"],[1,"dropdown-arrow"],[1,"user-menu"],[1,"user-info"],[1,"user-display-name"],[1,"user-email"],["routerLink","/profile",3,"click"],["routerLink","/my-stories",3,"click"],["routerLink","/settings",3,"click"],[1,"logout-btn",3,"click"],["alt","User Avatar",3,"src"],["routerLink","/notifications","routerLinkActive","active",1,"nav-item","notification-bell"],["class","mobile-notification-badge",4,"ngIf"],[1,"mobile-notification-badge"],["routerLink","/about","routerLinkActive","active",1,"nav-item"],["cx","12","cy","12","r","10","stroke","currentColor","stroke-width","2"],["d","M9.09 9C9.3251 8.33167 9.78915 7.76811 10.4 7.40913C11.0108 7.05016 11.7289 6.91894 12.4272 7.03871C13.1255 7.15849 13.7588 7.52152 14.2151 8.06353C14.6713 8.60553 14.9211 9.29152 14.92 10C14.92 12 11.92 13 11.92 13","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round"],["d","M12 17H12.01","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round"],[1,"nav-item","profile-nav"],[1,"nav-icon","profile-icon",3,"click"],[1,"user-avatar-mobile"],["routerLink","/login",1,"nav-item","auth-nav"],["d","M15 3H19C19.5304 3 20.0391 3.21071 20.4142 3.58579C20.7893 3.96086 21 4.46957 21 5V19C21 19.5304 20.7893 20.0391 20.4142 20.4142C20.0391 20.7893 19.5304 21 19 21H15","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round"],["d","M10 17L15 12L10 7","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round"],["d","M15 12H3","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round"],[1,"mobile-user-overlay",3,"click"],[1,"mobile-user-menu",3,"click"],[1,"mobile-user-header"],[1,"user-details"],[1,"close-mobile-menu",3,"click"],[1,"mobile-menu-items"],["routerLink","/profile",1,"mobile-menu-item",3,"click"],[1,"item-icon"],["routerLink","/my-stories",1,"mobile-menu-item",3,"click"],["routerLink","/settings",1,"mobile-menu-item",3,"click"],[1,"mobile-menu-item","logout-item",3,"click"]],template:function(t,r){if(t&1){let i=Z();h(0,"nav",5)(1,"a",6)(2,"span"),b(3,"\u{1F319}"),p(),h(4,"span"),b(5,"Unposted"),p()(),h(6,"div",7),z(7,"div",8),j(8,HY,5,3,"div",9),h(9,"div",10)(10,"div",11)(11,"h3"),b(12,"Notifications"),p(),j(13,zY,2,0,"button",12),p(),j(14,ZY,2,1,"div",13)(15,XY,5,0,"ng-template",null,0,xr),h(17,"div",14)(18,"a",15),B("click",function(){return N(i),F(r.closeNotifications())}),b(19,"View all notifications"),p()()(),j(20,JY,5,0,"div",16)(21,iQ,38,11,"div",17),p()(),h(22,"nav",18)(23,"div",19)(24,"a",20)(25,"div",21),ce(),h(26,"svg",22),z(27,"path",23)(28,"path",24),p()(),Ae(),h(29,"span",25),b(30,"Home"),p()(),h(31,"a",26)(32,"div",21),ce(),h(33,"svg",22),z(34,"path",27)(35,"path",28),p()(),Ae(),h(36,"span",25),b(37,"Write"),p()(),j(38,sQ,8,3,"div",29)(39,aQ,8,0,"a",30)(40,uQ,8,2,"div",31)(41,dQ,8,0,"ng-template",null,1,xr),p()(),j(43,pQ,34,6,"div",32),h(44,"div",33),B("click",function(s){return N(i),F(r.onOverlayClick(s))}),h(45,"div",34)(46,"button",35),B("click",function(){return N(i),F(r.closeModal())}),b(47," \xD7 "),p(),h(48,"h2",36),b(49,"Subscribe to Our Newsletter"),p(),h(50,"form",37,2),B("ngSubmit",function(){return N(i),F(r.onSubmit())}),h(52,"label",38),b(53," Email Address "),h(54,"span",39),b(55,"*"),p()(),h(56,"input",40),We("ngModelChange",function(s){return N(i),Xe(r.email,s)||(r.email=s),F(s)}),p(),z(57,"input",41)(58,"input",42)(59,"input",43),h(60,"button",44),b(61," Subscribe "),p()()()()}if(t&2){let i=qt(16),o=qt(42),s=qt(51);v(8),C("ngIf",r.user),v(),he("active",r.notificationsOpen),v(4),C("ngIf",r.hasUnreadNotifications),v(),C("ngIf",r.notifications.length>0)("ngIfElse",i),v(6),C("ngIf",!r.user),v(),C("ngIf",r.user),v(3),C("routerLinkActiveOptions",Jr(19,BY)),v(14),C("ngIf",r.user),v(),C("ngIf",!r.user),v(),C("ngIf",r.user)("ngIfElse",o),v(3),C("ngIf",r.user&&r.mobileUserMenuOpen),v(),xn("display",r.isOpen?"flex":"none"),sn("aria-hidden",!r.isOpen),v(12),qe("ngModel",r.email),v(4),C("disabled",!s.valid)}},dependencies:[Or,an,Hb,On,ol,un,kn,il,jr,Cn,fa,Lt,Ns,Pn,Wt],styles:['@charset "UTF-8";.user-info[_ngcontent-%COMP%]   img[_ngcontent-%COMP%], .mobile-user-header[_ngcontent-%COMP%]   img[_ngcontent-%COMP%], .user-avatar[_ngcontent-%COMP%]   img[_ngcontent-%COMP%], .user-avatar-large[_ngcontent-%COMP%]   img[_ngcontent-%COMP%], .user-avatar-mobile[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;height:100%;border-radius:50%;object-fit:cover}.desktop-navbar[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:1rem 2rem;background:#fff;border-bottom:1px solid #eee;box-shadow:0 2px 4px #00000005;position:relative}.navbar-logo[_ngcontent-%COMP%]{font-size:1.5rem;font-weight:700;color:#000;text-decoration:none;display:flex;align-items:center;gap:.5rem}.navbar-right[_ngcontent-%COMP%]{display:flex;align-items:center;gap:2rem;position:relative}.nav-links[_ngcontent-%COMP%]{display:flex;gap:2rem;font-size:.95rem}.nav-links[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{text-decoration:none;color:var(--text-dark);transition:all .3s ease;padding:.5rem 0}.nav-links[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover, .nav-links[_ngcontent-%COMP%]   a.active[_ngcontent-%COMP%]{color:var(--main-color)}.nav-links[_ngcontent-%COMP%]   a.active[_ngcontent-%COMP%]{font-weight:600}.notification-bell[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;width:40px;height:40px;border-radius:50%;cursor:pointer;transition:all .3s ease;color:#666;position:relative}.notification-bell[_ngcontent-%COMP%]:hover{background:#f5f5f5;color:var(--main-color);transform:translateY(-1px)}.notification-bell[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{width:20px;height:20px}.notification-bell[_ngcontent-%COMP%]   .notification-badge[_ngcontent-%COMP%]{position:absolute;top:6px;right:6px;background:#dc3545;color:#fff;border-radius:10px;min-width:18px;height:18px;display:flex;align-items:center;justify-content:center;font-size:.7rem;font-weight:600;padding:0 4px;border:2px solid white;box-shadow:0 2px 4px #0000001a;z-index:10}.notification-bell.has-notifications[_ngcontent-%COMP%]   .notification-badge[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_pulse-badge 2s infinite}.mobile-notification-badge[_ngcontent-%COMP%]{position:absolute;top:2px;right:2px;background:#dc3545;color:#fff;border-radius:8px;width:16px;height:16px;display:flex;align-items:center;justify-content:center;font-size:.6rem;font-weight:600;padding:0 3px;border:1px solid white;box-shadow:0 1px 3px #0003;z-index:10}@keyframes _ngcontent-%COMP%_pulse-badge{0%{transform:scale(1);opacity:1}50%{transform:scale(1.1);opacity:.8}to{transform:scale(1);opacity:1}}.navbar-buttons[_ngcontent-%COMP%]{display:flex;align-items:center;gap:1rem}.navbar-buttons.logged-in[_ngcontent-%COMP%]{position:relative}.auth-btn[_ngcontent-%COMP%]{text-decoration:none;color:var(--text-dark);padding:.6rem 1rem;border-radius:6px;font-weight:500;transition:all .3s ease;font-size:.9rem}.auth-btn[_ngcontent-%COMP%]:hover{background:#f5f5f5}.auth-btn.signup[_ngcontent-%COMP%]{background:var(--main-color);color:var(--text-dark);font-weight:600}.auth-btn.signup[_ngcontent-%COMP%]:hover{background:#f7a600}.user-profile[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5rem;cursor:pointer;padding:.5rem;border-radius:8px;transition:background .3s ease}.user-profile[_ngcontent-%COMP%]:hover{background:#f5f5f5}.user-avatar[_ngcontent-%COMP%]{width:32px;height:32px;border-radius:50%;background:var(--main-color);color:var(--text-dark);display:flex;align-items:center;justify-content:center;font-weight:700;font-size:.9rem}.user-avatar-large[_ngcontent-%COMP%]{width:40px;height:40px;border-radius:50%;background:var(--main-color);color:var(--text-dark);display:flex;align-items:center;justify-content:center;font-weight:700;font-size:1.1rem}.username[_ngcontent-%COMP%]{font-weight:500;color:var(--text-dark);font-size:.9rem}.dropdown-arrow[_ngcontent-%COMP%]{font-size:.7rem;color:#666;transition:transform .3s ease}.dropdown-arrow.rotated[_ngcontent-%COMP%]{transform:rotate(180deg)}.user-menu[_ngcontent-%COMP%]{position:absolute;top:100%;right:0;background:#fff;border:1px solid #eee;border-radius:8px;box-shadow:0 4px 12px #0000001a;min-width:220px;transform:translateY(-10px);opacity:0;visibility:hidden;transition:all .3s ease;z-index:1000;margin-top:.5rem}.user-menu.active[_ngcontent-%COMP%]{transform:translateY(0);opacity:1;visibility:visible}.user-info[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.8rem;padding:1rem}.user-display-name[_ngcontent-%COMP%]{font-weight:600;color:var(--text-dark);font-size:.9rem}.user-email[_ngcontent-%COMP%]{color:#666;font-size:.8rem}.user-menu[_ngcontent-%COMP%]   hr[_ngcontent-%COMP%]{margin:0;border:none;border-top:1px solid #eee}.user-menu[_ngcontent-%COMP%]   a[_ngcontent-%COMP%], .user-menu[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.8rem;padding:.8rem 1rem;text-decoration:none;color:var(--text-dark);font-size:.9rem;transition:background .3s ease;border:none;background:none;width:100%;text-align:left;cursor:pointer}.user-menu[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover, .user-menu[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{background:#f5f5f5}.logout-btn[_ngcontent-%COMP%]{color:#dc3545!important}.logout-btn[_ngcontent-%COMP%]:hover{background:#fff5f5!important}.mobile-navbar[_ngcontent-%COMP%]{display:none}.bottom-nav[_ngcontent-%COMP%]{position:fixed;bottom:0;left:0;right:0;background:#fffffff2;backdrop-filter:blur(10px);-webkit-backdrop-filter:blur(10px);border-top:1px solid rgba(0,0,0,.1);z-index:1000;box-shadow:0 -2px 20px #0000001a}.bottom-nav-container[_ngcontent-%COMP%]{display:flex;justify-content:space-around;align-items:center;padding:.5rem 1rem 1rem;max-width:100%}.nav-item[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;gap:.25rem;padding:.5rem;border-radius:12px;text-decoration:none;color:#666;transition:all .3s ease;min-width:60px;position:relative;cursor:pointer}.nav-item[_ngcontent-%COMP%]:hover, .nav-item.active[_ngcontent-%COMP%]{color:var(--main-color);background:#ffc1001a}.nav-item.active[_ngcontent-%COMP%]{transform:translateY(-2px)}.nav-item.active[_ngcontent-%COMP%]   .nav-icon[_ngcontent-%COMP%]{transform:scale(1.1)}.nav-icon[_ngcontent-%COMP%]{width:24px;height:24px;display:flex;align-items:center;justify-content:center;transition:transform .3s ease;position:relative}.nav-icon[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{width:100%;height:100%}.nav-label[_ngcontent-%COMP%]{font-size:.7rem;font-weight:500;text-align:center}.profile-icon[_ngcontent-%COMP%]{cursor:pointer}.user-avatar-mobile[_ngcontent-%COMP%]{width:24px;height:24px;border-radius:50%;background:var(--main-color);color:var(--text-dark);display:flex;align-items:center;justify-content:center;font-weight:700;font-size:.7rem}.mobile-user-overlay[_ngcontent-%COMP%]{position:fixed;inset:0;background:#00000080;z-index:10000;display:flex;align-items:flex-end;opacity:0;visibility:hidden;transition:all .3s ease}.mobile-user-overlay.active[_ngcontent-%COMP%]{opacity:1;visibility:visible}.mobile-user-menu[_ngcontent-%COMP%]{width:100%;background:#fff;border-radius:20px 20px 0 0;max-height:70vh;transform:translateY(100%);transition:transform .4s cubic-bezier(.25,.46,.45,.94)}.mobile-user-overlay.active[_ngcontent-%COMP%]   .mobile-user-menu[_ngcontent-%COMP%]{transform:translateY(0)}.mobile-user-header[_ngcontent-%COMP%]{display:flex;align-items:center;gap:1rem;padding:1.5rem 1.5rem 1rem;border-bottom:1px solid #eee;position:relative}.user-details[_ngcontent-%COMP%]{flex:1}.close-mobile-menu[_ngcontent-%COMP%]{position:absolute;top:1rem;right:1rem;background:none;border:none;font-size:1.5rem;color:#666;cursor:pointer;padding:.5rem;border-radius:50%;transition:background .3s ease}.close-mobile-menu[_ngcontent-%COMP%]:hover{background:#f5f5f5}.mobile-menu-items[_ngcontent-%COMP%]{padding:1rem 0}.mobile-menu-item[_ngcontent-%COMP%]{display:flex;align-items:center;gap:1rem;padding:1rem 1.5rem;text-decoration:none;color:var(--text-dark);font-size:1rem;transition:background .3s ease;border:none;background:none;width:100%;text-align:left;cursor:pointer}.mobile-menu-item[_ngcontent-%COMP%]:hover{background:#f5f5f5}.mobile-menu-item.logout-item[_ngcontent-%COMP%]{color:#dc3545}.mobile-menu-item.logout-item[_ngcontent-%COMP%]:hover{background:#fff5f5}.item-icon[_ngcontent-%COMP%]{font-size:1.2rem;width:24px;text-align:center}.modal[_ngcontent-%COMP%]{position:fixed;inset:0;background:#00000080;display:flex;justify-content:center;align-items:center;z-index:9999;font-family:Segoe UI,Tahoma,Geneva,Verdana,sans-serif}.modal-content[_ngcontent-%COMP%]{background:#fff;padding:2rem;border-radius:12px;max-width:400px;width:90%;position:relative;box-shadow:var(--card-shadow)}.close-modal[_ngcontent-%COMP%]{position:absolute;top:.5rem;right:1rem;background:transparent;border:none;font-size:2rem;line-height:1;color:var(--main-color);cursor:pointer;font-weight:700;transition:color .3s ease}.close-modal[_ngcontent-%COMP%]:hover{color:#f7a600}h2[_ngcontent-%COMP%]{color:var(--main-color);margin-bottom:1rem}label[_ngcontent-%COMP%]{font-weight:600;display:block;margin-bottom:.5rem}.required[_ngcontent-%COMP%]{color:red}input[_ngcontent-%COMP%]{padding:.7rem 1rem;border-radius:8px;border:1.5px solid #ccc;font-size:1rem;width:100%;margin-bottom:1rem}input[_ngcontent-%COMP%]:focus{outline:none;border-color:var(--main-color)}button[type=submit][_ngcontent-%COMP%]{background:var(--main-color);color:var(--text-dark);padding:.8rem 1.5rem;font-weight:700;border:nothing;border-radius:8px;cursor:pointer;width:100%;transition:background-color .3s ease}button[type=submit][_ngcontent-%COMP%]:hover:not(:disabled){background:#f7a600}button[type=submit][_ngcontent-%COMP%]:disabled{opacity:.6;cursor:not-allowed}.notification-bell[_ngcontent-%COMP%]{position:relative;cursor:pointer;display:flex;align-items:center;justify-content:center}.notification-bell[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{width:24px;height:24px}.notification-badge[_ngcontent-%COMP%], .mobile-notification-badge[_ngcontent-%COMP%]{position:absolute;top:0;right:0;background:#f44336;color:#fff;font-size:.7rem;font-weight:700;padding:2px 6px;border-radius:999px;line-height:1}.notification-dropdown[_ngcontent-%COMP%]{position:absolute;top:calc(100% + .5rem);right:0;width:350px;max-height:80vh;background:#fff;border:1px solid #ddd;border-radius:10px;box-shadow:0 6px 20px #00000026;overflow-y:auto;z-index:1500;opacity:0;visibility:hidden;transform:translateY(10px);transition:all .2s ease-in-out}.notification-dropdown.active[_ngcontent-%COMP%]{opacity:1;visibility:visible;transform:translateY(0)}.notification-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:.75rem 1rem;border-bottom:1px solid #eee}.notification-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:1rem;font-weight:700;margin:0}.notification-header[_ngcontent-%COMP%]   .mark-all-read[_ngcontent-%COMP%]{font-size:.8rem;background:none;border:none;color:#007bff;cursor:pointer}.notification-header[_ngcontent-%COMP%]   .mark-all-read[_ngcontent-%COMP%]:hover{text-decoration:underline}.notification-list[_ngcontent-%COMP%]{max-height:60vh;overflow-y:auto}.notification-item[_ngcontent-%COMP%]{display:flex;align-items:flex-start;gap:.75rem;padding:.75rem 1rem;border-bottom:1px solid #f0f0f0;cursor:pointer;transition:background .2s}.notification-item[_ngcontent-%COMP%]:hover{background:#f9f9f9}.notification-item.unread[_ngcontent-%COMP%]{background:#fdf7e3}.notification-item[_ngcontent-%COMP%]   .notification-icon[_ngcontent-%COMP%]{font-size:1.2rem}.notification-item[_ngcontent-%COMP%]   .notification-content[_ngcontent-%COMP%]{flex:1}.notification-item[_ngcontent-%COMP%]   .notification-content[_ngcontent-%COMP%]   .notification-title[_ngcontent-%COMP%]{font-weight:600;margin-bottom:.25rem}.notification-item[_ngcontent-%COMP%]   .notification-content[_ngcontent-%COMP%]   .notification-message[_ngcontent-%COMP%]{font-size:.9rem;color:#555;margin-bottom:.25rem}.notification-item[_ngcontent-%COMP%]   .notification-content[_ngcontent-%COMP%]   .notification-time[_ngcontent-%COMP%]{font-size:.8rem;color:#999}.notification-item[_ngcontent-%COMP%]   .notification-status[_ngcontent-%COMP%]   .unread-dot[_ngcontent-%COMP%]{width:8px;height:8px;background:#007bff;border-radius:50%}.no-notifications[_ngcontent-%COMP%]{text-align:center;padding:2rem 1rem;color:#777}.no-notifications[_ngcontent-%COMP%]   .no-notifications-icon[_ngcontent-%COMP%]{font-size:2rem;margin-bottom:.5rem}.notification-footer[_ngcontent-%COMP%]{padding:.75rem 1rem;text-align:center;border-top:1px solid #eee}.notification-footer[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#007bff;font-size:.9rem}.notification-footer[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{text-decoration:underline}@media (max-width: 768px){.bottom-nav[_ngcontent-%COMP%]   .notification-dropdown[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:100%;height:100%;max-height:none;border-radius:0;border:none;box-shadow:none;background:#fff;z-index:3000;opacity:0;visibility:hidden;transform:translateY(20px);transition:all .3s ease-in-out}.notification-dropdown.active[_ngcontent-%COMP%]{opacity:1;visibility:visible;transform:translateY(0)}.notification-header[_ngcontent-%COMP%]{position:sticky;top:0;background:#fff;border-bottom:1px solid #eee;z-index:10;padding:1rem}.notification-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:1.2rem}.notification-header[_ngcontent-%COMP%]   .mark-all-read[_ngcontent-%COMP%]{font-size:.9rem}.notification-list[_ngcontent-%COMP%]{max-height:calc(100% - 60px);overflow-y:auto}.notification-footer[_ngcontent-%COMP%]{position:sticky;bottom:0;background:#fff;border-top:1px solid #eee;padding:1rem}.desktop-navbar[_ngcontent-%COMP%]{display:none}.mobile-navbar[_ngcontent-%COMP%]{display:block}.notification-dropdown[_ngcontent-%COMP%]{right:1rem;left:1rem;width:auto}.notification-bell[_ngcontent-%COMP%]{position:relative}.bottom-nav[_ngcontent-%COMP%]   .notification-dropdown[_ngcontent-%COMP%]{position:absolute;top:110%;right:0;width:320px;background:#fff;border:1px solid #eee;border-radius:12px;box-shadow:0 4px 12px #0000001a;opacity:0;transform:translateY(-10px);pointer-events:none;transition:all .3s ease;z-index:2000}.bottom-nav[_ngcontent-%COMP%]   .notification-dropdown.active[_ngcontent-%COMP%]{opacity:1;transform:translateY(0);pointer-events:auto}}@media (max-width: 768px) and (max-width: 768px){.bottom-nav[_ngcontent-%COMP%]   .notification-dropdown[_ngcontent-%COMP%]{left:0;right:0;width:calc(100vw - 2rem);margin:0 auto}}@media (min-width: 769px){.mobile-navbar[_ngcontent-%COMP%], .mobile-user-overlay[_ngcontent-%COMP%]{display:none!important}}']})};var ev=class n{title=Tn("unposted");static \u0275fac=function(t){return new(t||n)};static \u0275cmp=et({type:n,selectors:[["app-root"]],decls:3,vars:0,template:function(t,r){t&1&&z(0,"app-navbar")(1,"router-outlet")(2,"app-footer")},dependencies:[Lu,Xm,Jm],encapsulation:2})};mb(ev,PN).catch(n=>console.error(n));
